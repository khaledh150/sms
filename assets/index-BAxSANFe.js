var j2=t=>{throw TypeError(t)};var K1=(t,e,n)=>e.has(t)||j2("Cannot "+n);var ee=(t,e,n)=>(K1(t,e,"read from private field"),n?n.call(t):e.get(t)),st=(t,e,n)=>e.has(t)?j2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),qe=(t,e,n,r)=>(K1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Et=(t,e,n)=>(K1(t,e,"access private method"),n);var Gf=(t,e,n,r)=>({set _(l){qe(t,e,l,n)},get _(){return ee(t,e,r)}});function u3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const l in r)if(l!=="default"&&!(l in t)){const u=Object.getOwnPropertyDescriptor(r,l);u&&Object.defineProperty(t,l,u.get?u:{enumerable:!0,get:()=>r[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const g of u.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&r(g)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var qf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function GA(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var l=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,l.get?l:{enumerable:!0,get:function(){return t[r]}})}),n}var Z1={exports:{}},Ou={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B2;function qA(){if(B2)return Ou;B2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,u){var g=null;if(u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),"key"in l){u={};for(var y in l)y!=="key"&&(u[y]=l[y])}else u=l;return l=u.ref,{$$typeof:t,type:r,key:g,ref:l!==void 0?l:null,props:u}}return Ou.Fragment=e,Ou.jsx=n,Ou.jsxs=n,Ou}var P2;function YA(){return P2||(P2=1,Z1.exports=qA()),Z1.exports}var E=YA();const ft=t=>typeof t=="string",Iu=()=>{let t,e;const n=new Promise((r,l)=>{t=r,e=l});return n.resolve=t,n.reject=e,n},U2=t=>t==null?"":""+t,XA=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},WA=/###/g,F2=t=>t&&t.indexOf("###")>-1?t.replace(WA,"."):t,V2=t=>!t||ft(t),Wu=(t,e,n)=>{const r=ft(e)?e.split("."):e;let l=0;for(;l<r.length-1;){if(V2(t))return{};const u=F2(r[l]);!t[u]&&n&&(t[u]=new n),Object.prototype.hasOwnProperty.call(t,u)?t=t[u]:t={},++l}return V2(t)?{}:{obj:t,k:F2(r[l])}},H2=(t,e,n)=>{const{obj:r,k:l}=Wu(t,e,Object);if(r!==void 0||e.length===1){r[l]=n;return}let u=e[e.length-1],g=e.slice(0,e.length-1),y=Wu(t,g,Object);for(;y.obj===void 0&&g.length;)u=`${g[g.length-1]}.${u}`,g=g.slice(0,g.length-1),y=Wu(t,g,Object),y!=null&&y.obj&&typeof y.obj[`${y.k}.${u}`]<"u"&&(y.obj=void 0);y.obj[`${y.k}.${u}`]=n},KA=(t,e,n,r)=>{const{obj:l,k:u}=Wu(t,e,Object);l[u]=l[u]||[],l[u].push(n)},xh=(t,e)=>{const{obj:n,k:r}=Wu(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},ZA=(t,e,n)=>{const r=xh(t,n);return r!==void 0?r:xh(e,n)},d3=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?ft(t[r])||t[r]instanceof String||ft(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):d3(t[r],e[r],n):t[r]=e[r]);return t},Wl=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var QA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const JA=t=>ft(t)?t.replace(/[&<>"'\/]/g,e=>QA[e]):t;class e4{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const t4=[" ",",","?","!",";"],n4=new e4(20),i4=(t,e,n)=>{e=e||"",n=n||"";const r=t4.filter(g=>e.indexOf(g)<0&&n.indexOf(g)<0);if(r.length===0)return!0;const l=n4.getRegExp(`(${r.map(g=>g==="?"?"\\?":g).join("|")})`);let u=!l.test(t);if(!u){const g=t.indexOf(n);g>0&&!l.test(t.substring(0,g))&&(u=!0)}return u},Lg=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let l=t;for(let u=0;u<r.length;){if(!l||typeof l!="object")return;let g,y="";for(let b=u;b<r.length;++b)if(b!==u&&(y+=n),y+=r[b],g=l[y],g!==void 0){if(["string","number","boolean"].indexOf(typeof g)>-1&&b<r.length-1)continue;u+=b-u+1;break}l=g}return l},od=t=>t==null?void 0:t.replace("_","-"),s4={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class yh{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||s4,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,l){return l&&!this.debug?null:(ft(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new yh(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new yh(this.logger,e)}}var xr=new yh;class Ph{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const l=this.observers[r].get(n)||0;this.observers[r].set(n,l+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([l,u])=>{for(let g=0;g<u;g++)l(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([l,u])=>{for(let g=0;g<u;g++)l.apply(l,[e,...n])})}}class z2 extends Ph{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,l={}){var x,S;const u=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,g=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure;let y;e.indexOf(".")>-1?y=e.split("."):(y=[e,n],r&&(Array.isArray(r)?y.push(...r):ft(r)&&u?y.push(...r.split(u)):y.push(r)));const b=xh(this.data,y);return!b&&!n&&!r&&e.indexOf(".")>-1&&(e=y[0],n=y[1],r=y.slice(2).join(".")),b||!g||!ft(r)?b:Lg((S=(x=this.data)==null?void 0:x[e])==null?void 0:S[n],r,u)}addResource(e,n,r,l,u={silent:!1}){const g=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator;let y=[e,n];r&&(y=y.concat(g?r.split(g):r)),e.indexOf(".")>-1&&(y=e.split("."),l=n,n=y[1]),this.addNamespaces(n),H2(this.data,y,l),u.silent||this.emit("added",e,n,r,l)}addResources(e,n,r,l={silent:!1}){for(const u in r)(ft(r[u])||Array.isArray(r[u]))&&this.addResource(e,n,u,r[u],{silent:!0});l.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,l,u,g={silent:!1,skipCopy:!1}){let y=[e,n];e.indexOf(".")>-1&&(y=e.split("."),l=r,r=n,n=y[1]),this.addNamespaces(n);let b=xh(this.data,y)||{};g.skipCopy||(r=JSON.parse(JSON.stringify(r))),l?d3(b,r,u):b={...b,...r},H2(this.data,y,b),g.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(l=>n[l]&&Object.keys(n[l]).length>0)}toJSON(){return this.data}}var f3={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,l){return t.forEach(u=>{var g;e=((g=this.processors[u])==null?void 0:g.process(e,n,r,l))??e}),e}};const $2={},G2=t=>!ft(t)&&typeof t!="boolean"&&typeof t!="number";class bh extends Ph{constructor(e,n={}){super(),XA(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=xr.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const l=this.resolve(e,r);return(l==null?void 0:l.res)!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const l=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let u=n.ns||this.options.defaultNS||[];const g=r&&e.indexOf(r)>-1,y=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!i4(e,r,l);if(g&&!y){const b=e.match(this.interpolator.nestingRegexp);if(b&&b.length>0)return{key:e,namespaces:ft(u)?[u]:u};const x=e.split(r);(r!==l||r===l&&this.options.ns.indexOf(x[0])>-1)&&(u=x.shift()),e=x.join(l)}return{key:e,namespaces:ft(u)?[u]:u}}translate(e,n,r){let l=typeof n=="object"?{...n}:n;if(typeof l!="object"&&this.options.overloadTranslationOptionHandler&&(l=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(l={...l}),l||(l={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const u=l.returnDetails!==void 0?l.returnDetails:this.options.returnDetails,g=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,{key:y,namespaces:b}=this.extractFromKey(e[e.length-1],l),x=b[b.length-1];let S=l.nsSeparator!==void 0?l.nsSeparator:this.options.nsSeparator;S===void 0&&(S=":");const A=l.lng||this.language,N=l.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((A==null?void 0:A.toLowerCase())==="cimode")return N?u?{res:`${x}${S}${y}`,usedKey:y,exactUsedKey:y,usedLng:A,usedNS:x,usedParams:this.getUsedParamsDetails(l)}:`${x}${S}${y}`:u?{res:y,usedKey:y,exactUsedKey:y,usedLng:A,usedNS:x,usedParams:this.getUsedParamsDetails(l)}:y;const I=this.resolve(e,l);let M=I==null?void 0:I.res;const j=(I==null?void 0:I.usedKey)||y,U=(I==null?void 0:I.exactUsedKey)||y,z=["[object Number]","[object Function]","[object RegExp]"],q=l.joinArrays!==void 0?l.joinArrays:this.options.joinArrays,B=!this.i18nFormat||this.i18nFormat.handleAsObject,V=l.count!==void 0&&!ft(l.count),H=bh.hasDefaultValue(l),J=V?this.pluralResolver.getSuffix(A,l.count,l):"",X=l.ordinal&&V?this.pluralResolver.getSuffix(A,l.count,{ordinal:!1}):"",oe=V&&!l.ordinal&&l.count===0,Y=oe&&l[`defaultValue${this.options.pluralSeparator}zero`]||l[`defaultValue${J}`]||l[`defaultValue${X}`]||l.defaultValue;let be=M;B&&!M&&H&&(be=Y);const Ae=G2(be),Ee=Object.prototype.toString.apply(be);if(B&&be&&Ae&&z.indexOf(Ee)<0&&!(ft(q)&&Array.isArray(be))){if(!l.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const de=this.options.returnedObjectHandler?this.options.returnedObjectHandler(j,be,{...l,ns:b}):`key '${y} (${this.language})' returned an object instead of string.`;return u?(I.res=de,I.usedParams=this.getUsedParamsDetails(l),I):de}if(g){const de=Array.isArray(be),Oe=de?[]:{},re=de?U:j;for(const ie in be)if(Object.prototype.hasOwnProperty.call(be,ie)){const le=`${re}${g}${ie}`;H&&!M?Oe[ie]=this.translate(le,{...l,defaultValue:G2(Y)?Y[ie]:void 0,joinArrays:!1,ns:b}):Oe[ie]=this.translate(le,{...l,joinArrays:!1,ns:b}),Oe[ie]===le&&(Oe[ie]=be[ie])}M=Oe}}else if(B&&ft(q)&&Array.isArray(M))M=M.join(q),M&&(M=this.extendTranslation(M,e,l,r));else{let de=!1,Oe=!1;!this.isValidLookup(M)&&H&&(de=!0,M=Y),this.isValidLookup(M)||(Oe=!0,M=y);const ie=(l.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Oe?void 0:M,le=H&&Y!==M&&this.options.updateMissing;if(Oe||de||le){if(this.logger.log(le?"updateKey":"missingKey",A,x,y,le?Y:M),g){const Z=this.resolve(y,{...l,keySeparator:!1});Z&&Z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let De=[];const $e=this.languageUtils.getFallbackCodes(this.options.fallbackLng,l.lng||this.language);if(this.options.saveMissingTo==="fallback"&&$e&&$e[0])for(let Z=0;Z<$e.length;Z++)De.push($e[Z]);else this.options.saveMissingTo==="all"?De=this.languageUtils.toResolveHierarchy(l.lng||this.language):De.push(l.lng||this.language);const W=(Z,ce,se)=>{var We;const Ne=H&&se!==M?se:ie;this.options.missingKeyHandler?this.options.missingKeyHandler(Z,x,ce,Ne,le,l):(We=this.backendConnector)!=null&&We.saveMissing&&this.backendConnector.saveMissing(Z,x,ce,Ne,le,l),this.emit("missingKey",Z,x,ce,M)};this.options.saveMissing&&(this.options.saveMissingPlurals&&V?De.forEach(Z=>{const ce=this.pluralResolver.getSuffixes(Z,l);oe&&l[`defaultValue${this.options.pluralSeparator}zero`]&&ce.indexOf(`${this.options.pluralSeparator}zero`)<0&&ce.push(`${this.options.pluralSeparator}zero`),ce.forEach(se=>{W([Z],y+se,l[`defaultValue${se}`]||Y)})}):W(De,y,Y))}M=this.extendTranslation(M,e,l,I,r),Oe&&M===y&&this.options.appendNamespaceToMissingKey&&(M=`${x}${S}${y}`),(Oe||de)&&this.options.parseMissingKeyHandler&&(M=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${x}${S}${y}`:y,de?M:void 0,l))}return u?(I.res=M,I.usedParams=this.getUsedParamsDetails(l),I):M}extendTranslation(e,n,r,l,u){var b,x;if((b=this.i18nFormat)!=null&&b.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const S=ft(e)&&(((x=r==null?void 0:r.interpolation)==null?void 0:x.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let A;if(S){const I=e.match(this.interpolator.nestingRegexp);A=I&&I.length}let N=r.replace&&!ft(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(N={...this.options.interpolation.defaultVariables,...N}),e=this.interpolator.interpolate(e,N,r.lng||this.language||l.usedLng,r),S){const I=e.match(this.interpolator.nestingRegexp),M=I&&I.length;A<M&&(r.nest=!1)}!r.lng&&l&&l.res&&(r.lng=this.language||l.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...I)=>(u==null?void 0:u[0])===I[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${I[0]} in key: ${n[0]}`),null):this.translate(...I,n),r)),r.interpolation&&this.interpolator.reset()}const g=r.postProcess||this.options.postProcess,y=ft(g)?[g]:g;return e!=null&&(y!=null&&y.length)&&r.applyPostProcessor!==!1&&(e=f3.handle(y,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...l,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,l,u,g,y;return ft(e)&&(e=[e]),e.forEach(b=>{if(this.isValidLookup(r))return;const x=this.extractFromKey(b,n),S=x.key;l=S;let A=x.namespaces;this.options.fallbackNS&&(A=A.concat(this.options.fallbackNS));const N=n.count!==void 0&&!ft(n.count),I=N&&!n.ordinal&&n.count===0,M=n.context!==void 0&&(ft(n.context)||typeof n.context=="number")&&n.context!=="",j=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);A.forEach(U=>{var z,q;this.isValidLookup(r)||(y=U,!$2[`${j[0]}-${U}`]&&((z=this.utils)!=null&&z.hasLoadedNamespace)&&!((q=this.utils)!=null&&q.hasLoadedNamespace(y))&&($2[`${j[0]}-${U}`]=!0,this.logger.warn(`key "${l}" for languages "${j.join(", ")}" won't get resolved as namespace "${y}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),j.forEach(B=>{var J;if(this.isValidLookup(r))return;g=B;const V=[S];if((J=this.i18nFormat)!=null&&J.addLookupKeys)this.i18nFormat.addLookupKeys(V,S,B,U,n);else{let X;N&&(X=this.pluralResolver.getSuffix(B,n.count,n));const oe=`${this.options.pluralSeparator}zero`,Y=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(N&&(V.push(S+X),n.ordinal&&X.indexOf(Y)===0&&V.push(S+X.replace(Y,this.options.pluralSeparator)),I&&V.push(S+oe)),M){const be=`${S}${this.options.contextSeparator}${n.context}`;V.push(be),N&&(V.push(be+X),n.ordinal&&X.indexOf(Y)===0&&V.push(be+X.replace(Y,this.options.pluralSeparator)),I&&V.push(be+oe))}}let H;for(;H=V.pop();)this.isValidLookup(r)||(u=H,r=this.getResource(B,U,H,n))}))})}),{res:r,usedKey:l,exactUsedKey:u,usedLng:g,usedNS:y}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,l={}){var u;return(u=this.i18nFormat)!=null&&u.getResource?this.i18nFormat.getResource(e,n,r,l):this.resourceStore.getResource(e,n,r,l)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ft(e.replace);let l=r?e.replace:e;if(r&&typeof e.count<"u"&&(l.count=e.count),this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),!r){l={...l};for(const u of n)delete l[u]}return l}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class q2{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=xr.create("languageUtils")}getScriptPartFromCode(e){if(e=od(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=od(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(ft(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const l=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(l))&&(n=l)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const l=this.getScriptPartFromCode(r);if(this.isSupportedCode(l))return n=l;const u=this.getLanguagePartFromCode(r);if(this.isSupportedCode(u))return n=u;n=this.options.supportedLngs.find(g=>{if(g===u)return g;if(!(g.indexOf("-")<0&&u.indexOf("-")<0)&&(g.indexOf("-")>0&&u.indexOf("-")<0&&g.substring(0,g.indexOf("-"))===u||g.indexOf(u)===0&&u.length>1))return g})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),ft(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),l=[],u=g=>{g&&(this.isSupportedCode(g)?l.push(g):this.logger.warn(`rejecting language code not found in supportedLngs: ${g}`))};return ft(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&u(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&u(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&u(this.getLanguagePartFromCode(e))):ft(e)&&u(this.formatLanguageCode(e)),r.forEach(g=>{l.indexOf(g)<0&&u(this.formatLanguageCode(g))}),l}}const Y2={zero:0,one:1,two:2,few:3,many:4,other:5},X2={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class r4{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=xr.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=od(e==="dev"?"en":e),l=n.ordinal?"ordinal":"cardinal",u=JSON.stringify({cleanedCode:r,type:l});if(u in this.pluralRulesCache)return this.pluralRulesCache[u];let g;try{g=new Intl.PluralRules(r,{type:l})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),X2;if(!e.match(/-|_/))return X2;const b=this.languageUtils.getLanguagePartFromCode(e);g=this.getRule(b,n)}return this.pluralRulesCache[u]=g,g}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(l=>`${n}${l}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((l,u)=>Y2[l]-Y2[u]).map(l=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${l}`):[]}getSuffix(e,n,r={}){const l=this.getRule(e,r);return l?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${l.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const W2=(t,e,n,r=".",l=!0)=>{let u=ZA(t,e,n);return!u&&l&&ft(n)&&(u=Lg(t,n,r),u===void 0&&(u=Lg(e,n,r))),u},Q1=t=>t.replace(/\$/g,"$$$$");class a4{constructor(e={}){var n;this.logger=xr.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:l,prefix:u,prefixEscaped:g,suffix:y,suffixEscaped:b,formatSeparator:x,unescapeSuffix:S,unescapePrefix:A,nestingPrefix:N,nestingPrefixEscaped:I,nestingSuffix:M,nestingSuffixEscaped:j,nestingOptionsSeparator:U,maxReplaces:z,alwaysFormat:q}=e.interpolation;this.escape=n!==void 0?n:JA,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=l!==void 0?l:!1,this.prefix=u?Wl(u):g||"{{",this.suffix=y?Wl(y):b||"}}",this.formatSeparator=x||",",this.unescapePrefix=S?"":A||"-",this.unescapeSuffix=this.unescapePrefix?"":S||"",this.nestingPrefix=N?Wl(N):I||Wl("$t("),this.nestingSuffix=M?Wl(M):j||Wl(")"),this.nestingOptionsSeparator=U||",",this.maxReplaces=z||1e3,this.alwaysFormat=q!==void 0?q:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,l){var I;let u,g,y;const b=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},x=M=>{if(M.indexOf(this.formatSeparator)<0){const q=W2(n,b,M,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(q,void 0,r,{...l,...n,interpolationkey:M}):q}const j=M.split(this.formatSeparator),U=j.shift().trim(),z=j.join(this.formatSeparator).trim();return this.format(W2(n,b,U,this.options.keySeparator,this.options.ignoreJSONStructure),z,r,{...l,...n,interpolationkey:U})};this.resetRegExp();const S=(l==null?void 0:l.missingInterpolationHandler)||this.options.missingInterpolationHandler,A=((I=l==null?void 0:l.interpolation)==null?void 0:I.skipOnVariables)!==void 0?l.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:M=>Q1(M)},{regex:this.regexp,safeValue:M=>this.escapeValue?Q1(this.escape(M)):Q1(M)}].forEach(M=>{for(y=0;u=M.regex.exec(e);){const j=u[1].trim();if(g=x(j),g===void 0)if(typeof S=="function"){const z=S(e,u,l);g=ft(z)?z:""}else if(l&&Object.prototype.hasOwnProperty.call(l,j))g="";else if(A){g=u[0];continue}else this.logger.warn(`missed to pass in variable ${j} for interpolating ${e}`),g="";else!ft(g)&&!this.useRawValueToEscape&&(g=U2(g));const U=M.safeValue(g);if(e=e.replace(u[0],U),A?(M.regex.lastIndex+=g.length,M.regex.lastIndex-=u[0].length):M.regex.lastIndex=0,y++,y>=this.maxReplaces)break}}),e}nest(e,n,r={}){let l,u,g;const y=(b,x)=>{const S=this.nestingOptionsSeparator;if(b.indexOf(S)<0)return b;const A=b.split(new RegExp(`${S}[ ]*{`));let N=`{${A[1]}`;b=A[0],N=this.interpolate(N,g);const I=N.match(/'/g),M=N.match(/"/g);(((I==null?void 0:I.length)??0)%2===0&&!M||M.length%2!==0)&&(N=N.replace(/'/g,'"'));try{g=JSON.parse(N),x&&(g={...x,...g})}catch(j){return this.logger.warn(`failed parsing options string in nesting for key ${b}`,j),`${b}${S}${N}`}return g.defaultValue&&g.defaultValue.indexOf(this.prefix)>-1&&delete g.defaultValue,b};for(;l=this.nestingRegexp.exec(e);){let b=[];g={...r},g=g.replace&&!ft(g.replace)?g.replace:g,g.applyPostProcessor=!1,delete g.defaultValue;const x=/{.*}/.test(l[1])?l[1].lastIndexOf("}")+1:l[1].indexOf(this.formatSeparator);if(x!==-1&&(b=l[1].slice(x).split(this.formatSeparator).map(S=>S.trim()).filter(Boolean),l[1]=l[1].slice(0,x)),u=n(y.call(this,l[1].trim(),g),g),u&&l[0]===e&&!ft(u))return u;ft(u)||(u=U2(u)),u||(this.logger.warn(`missed to resolve ${l[1]} for nesting ${e}`),u=""),b.length&&(u=b.reduce((S,A)=>this.format(S,A,r.lng,{...r,interpolationkey:l[1].trim()}),u.trim())),e=e.replace(l[0],u),this.regexp.lastIndex=0}return e}}const o4=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const l=r[1].substring(0,r[1].length-1);e==="currency"&&l.indexOf(":")<0?n.currency||(n.currency=l.trim()):e==="relativetime"&&l.indexOf(":")<0?n.range||(n.range=l.trim()):l.split(";").forEach(g=>{if(g){const[y,...b]=g.split(":"),x=b.join(":").trim().replace(/^'+|'+$/g,""),S=y.trim();n[S]||(n[S]=x),x==="false"&&(n[S]=!1),x==="true"&&(n[S]=!0),isNaN(x)||(n[S]=parseInt(x,10))}})}return{formatName:e,formatOptions:n}},K2=t=>{const e={};return(n,r,l)=>{let u=l;l&&l.interpolationkey&&l.formatParams&&l.formatParams[l.interpolationkey]&&l[l.interpolationkey]&&(u={...u,[l.interpolationkey]:void 0});const g=r+JSON.stringify(u);let y=e[g];return y||(y=t(od(r),l),e[g]=y),y(n)}},l4=t=>(e,n,r)=>t(od(n),r)(e);class c4{constructor(e={}){this.logger=xr.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?K2:l4;this.formats={number:r((l,u)=>{const g=new Intl.NumberFormat(l,{...u});return y=>g.format(y)}),currency:r((l,u)=>{const g=new Intl.NumberFormat(l,{...u,style:"currency"});return y=>g.format(y)}),datetime:r((l,u)=>{const g=new Intl.DateTimeFormat(l,{...u});return y=>g.format(y)}),relativetime:r((l,u)=>{const g=new Intl.RelativeTimeFormat(l,{...u});return y=>g.format(y,u.range||"day")}),list:r((l,u)=>{const g=new Intl.ListFormat(l,{...u});return y=>g.format(y)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=K2(n)}format(e,n,r,l={}){const u=n.split(this.formatSeparator);if(u.length>1&&u[0].indexOf("(")>1&&u[0].indexOf(")")<0&&u.find(y=>y.indexOf(")")>-1)){const y=u.findIndex(b=>b.indexOf(")")>-1);u[0]=[u[0],...u.splice(1,y)].join(this.formatSeparator)}return u.reduce((y,b)=>{var A;const{formatName:x,formatOptions:S}=o4(b);if(this.formats[x]){let N=y;try{const I=((A=l==null?void 0:l.formatParams)==null?void 0:A[l.interpolationkey])||{},M=I.locale||I.lng||l.locale||l.lng||r;N=this.formats[x](y,M,{...S,...l,...I})}catch(I){this.logger.warn(I)}return N}else this.logger.warn(`there was no format function for ${x}`);return y},e)}}const u4=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class d4 extends Ph{constructor(e,n,r,l={}){var u,g;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=l,this.logger=xr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=l.maxParallelReads||10,this.readingCalls=0,this.maxRetries=l.maxRetries>=0?l.maxRetries:5,this.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,this.state={},this.queue=[],(g=(u=this.backend)==null?void 0:u.init)==null||g.call(u,r,l.backend,l)}queueLoad(e,n,r,l){const u={},g={},y={},b={};return e.forEach(x=>{let S=!0;n.forEach(A=>{const N=`${x}|${A}`;!r.reload&&this.store.hasResourceBundle(x,A)?this.state[N]=2:this.state[N]<0||(this.state[N]===1?g[N]===void 0&&(g[N]=!0):(this.state[N]=1,S=!1,g[N]===void 0&&(g[N]=!0),u[N]===void 0&&(u[N]=!0),b[A]===void 0&&(b[A]=!0)))}),S||(y[x]=!0)}),(Object.keys(u).length||Object.keys(g).length)&&this.queue.push({pending:g,pendingCount:Object.keys(g).length,loaded:{},errors:[],callback:l}),{toLoad:Object.keys(u),pending:Object.keys(g),toLoadLanguages:Object.keys(y),toLoadNamespaces:Object.keys(b)}}loaded(e,n,r){const l=e.split("|"),u=l[0],g=l[1];n&&this.emit("failedLoading",u,g,n),!n&&r&&this.store.addResourceBundle(u,g,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const y={};this.queue.forEach(b=>{KA(b.loaded,[u],g),u4(b,e),n&&b.errors.push(n),b.pendingCount===0&&!b.done&&(Object.keys(b.loaded).forEach(x=>{y[x]||(y[x]={});const S=b.loaded[x];S.length&&S.forEach(A=>{y[x][A]===void 0&&(y[x][A]=!0)})}),b.done=!0,b.errors.length?b.callback(b.errors):b.callback())}),this.emit("loaded",y),this.queue=this.queue.filter(b=>!b.done)}read(e,n,r,l=0,u=this.retryTimeout,g){if(!e.length)return g(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:l,wait:u,callback:g});return}this.readingCalls++;const y=(x,S)=>{if(this.readingCalls--,this.waitingReads.length>0){const A=this.waitingReads.shift();this.read(A.lng,A.ns,A.fcName,A.tried,A.wait,A.callback)}if(x&&S&&l<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,l+1,u*2,g)},u);return}g(x,S)},b=this.backend[r].bind(this.backend);if(b.length===2){try{const x=b(e,n);x&&typeof x.then=="function"?x.then(S=>y(null,S)).catch(y):y(null,x)}catch(x){y(x)}return}return b(e,n,y)}prepareLoading(e,n,r={},l){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();ft(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ft(n)&&(n=[n]);const u=this.queueLoad(e,n,r,l);if(!u.toLoad.length)return u.pending.length||l(),null;u.toLoad.forEach(g=>{this.loadOne(g)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),l=r[0],u=r[1];this.read(l,u,"read",void 0,void 0,(g,y)=>{g&&this.logger.warn(`${n}loading namespace ${u} for language ${l} failed`,g),!g&&y&&this.logger.log(`${n}loaded namespace ${u} for language ${l}`,y),this.loaded(e,g,y)})}saveMissing(e,n,r,l,u,g={},y=()=>{}){var b,x,S,A,N;if((x=(b=this.services)==null?void 0:b.utils)!=null&&x.hasLoadedNamespace&&!((A=(S=this.services)==null?void 0:S.utils)!=null&&A.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((N=this.backend)!=null&&N.create){const I={...g,isUpdate:u},M=this.backend.create.bind(this.backend);if(M.length<6)try{let j;M.length===5?j=M(e,n,r,l,I):j=M(e,n,r,l),j&&typeof j.then=="function"?j.then(U=>y(null,U)).catch(y):y(null,j)}catch(j){y(j)}else M(e,n,r,l,y,I)}!e||!e[0]||this.store.addResource(e[0],n,r,l)}}}const Z2=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ft(t[1])&&(e.defaultValue=t[1]),ft(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Q2=t=>{var e,n;return ft(t.ns)&&(t.ns=[t.ns]),ft(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ft(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Yf=()=>{},f4=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class ld extends Ph{constructor(e={},n){if(super(),this.options=Q2(e),this.services={},this.logger=xr,this.modules={external:[]},f4(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(ft(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=Z2();this.options={...r,...this.options,...Q2(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const l=x=>x?typeof x=="function"?new x:x:null;if(!this.options.isClone){this.modules.logger?xr.init(l(this.modules.logger),this.options):xr.init(null,this.options);let x;this.modules.formatter?x=this.modules.formatter:x=c4;const S=new q2(this.options);this.store=new z2(this.options.resources,this.options);const A=this.services;A.logger=xr,A.resourceStore=this.store,A.languageUtils=S,A.pluralResolver=new r4(S,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),x&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(A.formatter=l(x),A.formatter.init&&A.formatter.init(A,this.options),this.options.interpolation.format=A.formatter.format.bind(A.formatter)),A.interpolator=new a4(this.options),A.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},A.backendConnector=new d4(l(this.modules.backend),A.resourceStore,A,this.options),A.backendConnector.on("*",(I,...M)=>{this.emit(I,...M)}),this.modules.languageDetector&&(A.languageDetector=l(this.modules.languageDetector),A.languageDetector.init&&A.languageDetector.init(A,this.options.detection,this.options)),this.modules.i18nFormat&&(A.i18nFormat=l(this.modules.i18nFormat),A.i18nFormat.init&&A.i18nFormat.init(this)),this.translator=new bh(this.services,this.options),this.translator.on("*",(I,...M)=>{this.emit(I,...M)}),this.modules.external.forEach(I=>{I.init&&I.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Yf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const x=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);x.length>0&&x[0]!=="dev"&&(this.options.lng=x[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(x=>{this[x]=(...S)=>this.store[x](...S)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(x=>{this[x]=(...S)=>(this.store[x](...S),this)});const y=Iu(),b=()=>{const x=(S,A)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),y.resolve(A),n(S,A)};if(this.languages&&!this.isInitialized)return x(null,this.t.bind(this));this.changeLanguage(this.options.lng,x)};return this.options.resources||!this.options.initAsync?b():setTimeout(b,0),y}loadResources(e,n=Yf){var u,g;let r=n;const l=ft(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((l==null?void 0:l.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const y=[],b=x=>{if(!x||x==="cimode")return;this.services.languageUtils.toResolveHierarchy(x).forEach(A=>{A!=="cimode"&&y.indexOf(A)<0&&y.push(A)})};l?b(l):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(S=>b(S)),(g=(u=this.options.preload)==null?void 0:u.forEach)==null||g.call(u,x=>b(x)),this.services.backendConnector.load(y,this.options.ns,x=>{!x&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(x)})}else r(null)}reloadResources(e,n,r){const l=Iu();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Yf),this.services.backendConnector.reload(e,n,u=>{l.resolve(),r(u)}),l}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&f3.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Iu();this.emit("languageChanging",e);const l=y=>{this.language=y,this.languages=this.services.languageUtils.toResolveHierarchy(y),this.resolvedLanguage=void 0,this.setResolvedLanguage(y)},u=(y,b)=>{b?this.isLanguageChangingTo===e&&(l(b),this.translator.changeLanguage(b),this.isLanguageChangingTo=void 0,this.emit("languageChanged",b),this.logger.log("languageChanged",b)):this.isLanguageChangingTo=void 0,r.resolve((...x)=>this.t(...x)),n&&n(y,(...x)=>this.t(...x))},g=y=>{var S,A;!e&&!y&&this.services.languageDetector&&(y=[]);const b=ft(y)?y:y&&y[0],x=this.store.hasLanguageSomeTranslations(b)?b:this.services.languageUtils.getBestMatchFromCodes(ft(y)?[y]:y);x&&(this.language||l(x),this.translator.language||this.translator.changeLanguage(x),(A=(S=this.services.languageDetector)==null?void 0:S.cacheUserLanguage)==null||A.call(S,x)),this.loadResources(x,N=>{u(N,x)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?g(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(g):this.services.languageDetector.detect(g):g(e),r}getFixedT(e,n,r){const l=(u,g,...y)=>{let b;typeof g!="object"?b=this.options.overloadTranslationOptionHandler([u,g].concat(y)):b={...g},b.lng=b.lng||l.lng,b.lngs=b.lngs||l.lngs,b.ns=b.ns||l.ns,b.keyPrefix!==""&&(b.keyPrefix=b.keyPrefix||r||l.keyPrefix);const x=this.options.keySeparator||".";let S;return b.keyPrefix&&Array.isArray(u)?S=u.map(A=>`${b.keyPrefix}${x}${A}`):S=b.keyPrefix?`${b.keyPrefix}${x}${u}`:u,this.t(S,b)};return ft(e)?l.lng=e:l.lngs=e,l.ns=n,l.keyPrefix=r,l}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,u=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const g=(y,b)=>{const x=this.services.backendConnector.state[`${y}|${b}`];return x===-1||x===0||x===2};if(n.precheck){const y=n.precheck(this,g);if(y!==void 0)return y}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||g(r,e)&&(!l||g(u,e)))}loadNamespaces(e,n){const r=Iu();return this.options.ns?(ft(e)&&(e=[e]),e.forEach(l=>{this.options.ns.indexOf(l)<0&&this.options.ns.push(l)}),this.loadResources(l=>{r.resolve(),n&&n(l)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Iu();ft(e)&&(e=[e]);const l=this.options.preload||[],u=e.filter(g=>l.indexOf(g)<0&&this.services.languageUtils.isSupportedCode(g));return u.length?(this.options.preload=l.concat(u),this.loadResources(g=>{r.resolve(),n&&n(g)}),r):(n&&n(),Promise.resolve())}dir(e){var l,u;if(e||(e=this.resolvedLanguage||(((l=this.languages)==null?void 0:l.length)>0?this.languages[0]:this.language)),!e)return"rtl";if(Intl.Locale){const g=new Intl.Locale(e);if(g&&g.getTextInfo){const y=g.getTextInfo();if(y&&y.direction)return y.direction}}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((u=this.services)==null?void 0:u.languageUtils)||new q2(Z2());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new ld(e,n)}cloneInstance(e={},n=Yf){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const l={...this.options,...e,isClone:!0},u=new ld(l);if((e.debug!==void 0||e.prefix!==void 0)&&(u.logger=u.logger.clone(e)),["store","services","language"].forEach(y=>{u[y]=this[y]}),u.services={...this.services},u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},r){const y=Object.keys(this.store.data).reduce((b,x)=>(b[x]={...this.store.data[x]},b[x]=Object.keys(b[x]).reduce((S,A)=>(S[A]={...b[x][A]},S),b[x]),b),{});u.store=new z2(y,l),u.services.resourceStore=u.store}return u.translator=new bh(u.services,l),u.translator.on("*",(y,...b)=>{u.emit(y,...b)}),u.init(l,n),u.translator.options=l,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Qn=ld.createInstance();Qn.createInstance=ld.createInstance;Qn.createInstance;Qn.dir;Qn.init;Qn.loadResources;Qn.reloadResources;Qn.use;Qn.changeLanguage;Qn.getFixedT;Qn.t;Qn.exists;Qn.setDefaultNamespace;Qn.hasLoadedNamespace;Qn.loadNamespaces;Qn.loadLanguages;var J1={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J2;function h4(){if(J2)return St;J2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.iterator;function N(W){return W===null||typeof W!="object"?null:(W=A&&W[A]||W["@@iterator"],typeof W=="function"?W:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,j={};function U(W,Z,ce){this.props=W,this.context=Z,this.refs=j,this.updater=ce||I}U.prototype.isReactComponent={},U.prototype.setState=function(W,Z){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,Z,"setState")},U.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function z(){}z.prototype=U.prototype;function q(W,Z,ce){this.props=W,this.context=Z,this.refs=j,this.updater=ce||I}var B=q.prototype=new z;B.constructor=q,M(B,U.prototype),B.isPureReactComponent=!0;var V=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},J=Object.prototype.hasOwnProperty;function X(W,Z,ce,se,Ne,We){return ce=We.ref,{$$typeof:t,type:W,key:Z,ref:ce!==void 0?ce:null,props:We}}function oe(W,Z){return X(W.type,Z,void 0,void 0,void 0,W.props)}function Y(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function be(W){var Z={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(ce){return Z[ce]})}var Ae=/\/+/g;function Ee(W,Z){return typeof W=="object"&&W!==null&&W.key!=null?be(""+W.key):Z.toString(36)}function de(){}function Oe(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(de,de):(W.status="pending",W.then(function(Z){W.status==="pending"&&(W.status="fulfilled",W.value=Z)},function(Z){W.status==="pending"&&(W.status="rejected",W.reason=Z)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function re(W,Z,ce,se,Ne){var We=typeof W;(We==="undefined"||We==="boolean")&&(W=null);var Se=!1;if(W===null)Se=!0;else switch(We){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(W.$$typeof){case t:case e:Se=!0;break;case S:return Se=W._init,re(Se(W._payload),Z,ce,se,Ne)}}if(Se)return Ne=Ne(W),Se=se===""?"."+Ee(W,0):se,V(Ne)?(ce="",Se!=null&&(ce=Se.replace(Ae,"$&/")+"/"),re(Ne,Z,ce,"",function(He){return He})):Ne!=null&&(Y(Ne)&&(Ne=oe(Ne,ce+(Ne.key==null||W&&W.key===Ne.key?"":(""+Ne.key).replace(Ae,"$&/")+"/")+Se)),Z.push(Ne)),1;Se=0;var ht=se===""?".":se+":";if(V(W))for(var ve=0;ve<W.length;ve++)se=W[ve],We=ht+Ee(se,ve),Se+=re(se,Z,ce,We,Ne);else if(ve=N(W),typeof ve=="function")for(W=ve.call(W),ve=0;!(se=W.next()).done;)se=se.value,We=ht+Ee(se,ve++),Se+=re(se,Z,ce,We,Ne);else if(We==="object"){if(typeof W.then=="function")return re(Oe(W),Z,ce,se,Ne);throw Z=String(W),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Se}function ie(W,Z,ce){if(W==null)return W;var se=[],Ne=0;return re(W,se,"","",function(We){return Z.call(ce,We,Ne++)}),se}function le(W){if(W._status===-1){var Z=W._result;Z=Z(),Z.then(function(ce){(W._status===0||W._status===-1)&&(W._status=1,W._result=ce)},function(ce){(W._status===0||W._status===-1)&&(W._status=2,W._result=ce)}),W._status===-1&&(W._status=0,W._result=Z)}if(W._status===1)return W._result.default;throw W._result}var De=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)};function $e(){}return St.Children={map:ie,forEach:function(W,Z,ce){ie(W,function(){Z.apply(this,arguments)},ce)},count:function(W){var Z=0;return ie(W,function(){Z++}),Z},toArray:function(W){return ie(W,function(Z){return Z})||[]},only:function(W){if(!Y(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},St.Component=U,St.Fragment=n,St.Profiler=l,St.PureComponent=q,St.StrictMode=r,St.Suspense=b,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,St.__COMPILER_RUNTIME={__proto__:null,c:function(W){return H.H.useMemoCache(W)}},St.cache=function(W){return function(){return W.apply(null,arguments)}},St.cloneElement=function(W,Z,ce){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var se=M({},W.props),Ne=W.key,We=void 0;if(Z!=null)for(Se in Z.ref!==void 0&&(We=void 0),Z.key!==void 0&&(Ne=""+Z.key),Z)!J.call(Z,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&Z.ref===void 0||(se[Se]=Z[Se]);var Se=arguments.length-2;if(Se===1)se.children=ce;else if(1<Se){for(var ht=Array(Se),ve=0;ve<Se;ve++)ht[ve]=arguments[ve+2];se.children=ht}return X(W.type,Ne,void 0,void 0,We,se)},St.createContext=function(W){return W={$$typeof:g,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:u,_context:W},W},St.createElement=function(W,Z,ce){var se,Ne={},We=null;if(Z!=null)for(se in Z.key!==void 0&&(We=""+Z.key),Z)J.call(Z,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(Ne[se]=Z[se]);var Se=arguments.length-2;if(Se===1)Ne.children=ce;else if(1<Se){for(var ht=Array(Se),ve=0;ve<Se;ve++)ht[ve]=arguments[ve+2];Ne.children=ht}if(W&&W.defaultProps)for(se in Se=W.defaultProps,Se)Ne[se]===void 0&&(Ne[se]=Se[se]);return X(W,We,void 0,void 0,null,Ne)},St.createRef=function(){return{current:null}},St.forwardRef=function(W){return{$$typeof:y,render:W}},St.isValidElement=Y,St.lazy=function(W){return{$$typeof:S,_payload:{_status:-1,_result:W},_init:le}},St.memo=function(W,Z){return{$$typeof:x,type:W,compare:Z===void 0?null:Z}},St.startTransition=function(W){var Z=H.T,ce={};H.T=ce;try{var se=W(),Ne=H.S;Ne!==null&&Ne(ce,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then($e,De)}catch(We){De(We)}finally{H.T=Z}},St.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},St.use=function(W){return H.H.use(W)},St.useActionState=function(W,Z,ce){return H.H.useActionState(W,Z,ce)},St.useCallback=function(W,Z){return H.H.useCallback(W,Z)},St.useContext=function(W){return H.H.useContext(W)},St.useDebugValue=function(){},St.useDeferredValue=function(W,Z){return H.H.useDeferredValue(W,Z)},St.useEffect=function(W,Z,ce){var se=H.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(W,Z)},St.useId=function(){return H.H.useId()},St.useImperativeHandle=function(W,Z,ce){return H.H.useImperativeHandle(W,Z,ce)},St.useInsertionEffect=function(W,Z){return H.H.useInsertionEffect(W,Z)},St.useLayoutEffect=function(W,Z){return H.H.useLayoutEffect(W,Z)},St.useMemo=function(W,Z){return H.H.useMemo(W,Z)},St.useOptimistic=function(W,Z){return H.H.useOptimistic(W,Z)},St.useReducer=function(W,Z,ce){return H.H.useReducer(W,Z,ce)},St.useRef=function(W){return H.H.useRef(W)},St.useState=function(W){return H.H.useState(W)},St.useSyncExternalStore=function(W,Z,ce){return H.H.useSyncExternalStore(W,Z,ce)},St.useTransition=function(){return H.H.useTransition()},St.version="19.1.0",St}var eb;function Uh(){return eb||(eb=1,J1.exports=h4()),J1.exports}var R=Uh();const lt=jm(R),tb=u3({__proto__:null,default:lt},[R]),g4=(t,e,n,r)=>{var u,g,y,b;const l=[n,{code:e,...r||{}}];if((g=(u=t==null?void 0:t.services)==null?void 0:u.logger)!=null&&g.forward)return t.services.logger.forward(l,"warn","react-i18next::",!0);el(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),(b=(y=t==null?void 0:t.services)==null?void 0:y.logger)!=null&&b.warn?t.services.logger.warn(...l):console!=null&&console.warn&&console.warn(...l)},nb={},kg=(t,e,n,r)=>{el(n)&&nb[n]||(el(n)&&(nb[n]=new Date),g4(t,e,n,r))},h3=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},jg=(t,e,n)=>{t.loadNamespaces(e,h3(t,n))},ib=(t,e,n,r)=>{if(el(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return jg(t,n,r);n.forEach(l=>{t.options.ns.indexOf(l)<0&&t.options.ns.push(l)}),t.loadLanguages(e,h3(t,r))},m4=(t,e,n={})=>!e.languages||!e.languages.length?(kg(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,l)=>{var u;if(((u=n.bindI18n)==null?void 0:u.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!l(r.isLanguageChangingTo,t))return!1}}),el=t=>typeof t=="string",p4=t=>typeof t=="object"&&t!==null,x4=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,y4={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},b4=t=>y4[t],w4=t=>t.replace(x4,b4);let Bg={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:w4};const v4=(t={})=>{Bg={...Bg,...t}},S4=()=>Bg;let g3;const E4=t=>{g3=t},C4=()=>g3,A4={type:"3rdParty",init(t){v4(t.options.react),E4(t)}},T4=R.createContext();class _4{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const N4=(t,e)=>{const n=R.useRef();return R.useEffect(()=>{n.current=t},[t,e]),n.current},m3=(t,e,n,r)=>t.getFixedT(e,n,r),R4=(t,e,n,r)=>R.useCallback(m3(t,e,n,r),[t,e,n,r]),Bn=(t,e={})=>{var V,H,J,X;const{i18n:n}=e,{i18n:r,defaultNS:l}=R.useContext(T4)||{},u=n||r||C4();if(u&&!u.reportNamespaces&&(u.reportNamespaces=new _4),!u){kg(u,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const oe=(be,Ae)=>el(Ae)?Ae:p4(Ae)&&el(Ae.defaultValue)?Ae.defaultValue:Array.isArray(be)?be[be.length-1]:be,Y=[oe,{},!1];return Y.t=oe,Y.i18n={},Y.ready=!1,Y}(V=u.options.react)!=null&&V.wait&&kg(u,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const g={...S4(),...u.options.react,...e},{useSuspense:y,keyPrefix:b}=g;let x=l||((H=u.options)==null?void 0:H.defaultNS);x=el(x)?[x]:x||["translation"],(X=(J=u.reportNamespaces).addUsedNamespaces)==null||X.call(J,x);const S=(u.isInitialized||u.initializedStoreOnce)&&x.every(oe=>m4(oe,u,g)),A=R4(u,e.lng||null,g.nsMode==="fallback"?x:x[0],b),N=()=>A,I=()=>m3(u,e.lng||null,g.nsMode==="fallback"?x:x[0],b),[M,j]=R.useState(N);let U=x.join();e.lng&&(U=`${e.lng}${U}`);const z=N4(U),q=R.useRef(!0);R.useEffect(()=>{const{bindI18n:oe,bindI18nStore:Y}=g;q.current=!0,!S&&!y&&(e.lng?ib(u,e.lng,x,()=>{q.current&&j(I)}):jg(u,x,()=>{q.current&&j(I)})),S&&z&&z!==U&&q.current&&j(I);const be=()=>{q.current&&j(I)};return oe&&(u==null||u.on(oe,be)),Y&&(u==null||u.store.on(Y,be)),()=>{q.current=!1,u&&(oe==null||oe.split(" ").forEach(Ae=>u.off(Ae,be))),Y&&u&&Y.split(" ").forEach(Ae=>u.store.off(Ae,be))}},[u,U]),R.useEffect(()=>{q.current&&S&&j(N)},[u,b,S]);const B=[M,u,S];if(B.t=M,B.i18n=u,B.ready=S,S||!S&&!y)return B;throw new Promise(oe=>{e.lng?ib(u,e.lng,x,()=>oe()):jg(u,x,()=>oe())})},O4="Welcome",I4="Login",M4="Logout",D4="Select at least one course.",L4="Please enter a nick name.",k4="Student {{nick}} added!",j4="Application submitted!",B4="Thank you!",P4="Your application has been received.",U4="Our staff will contact you via LINE or phone.",F4="You may close this page.",V4="Wonder Kids Admissions",H4="Fill out the application form below. {{staffMsg}}",z4="Students will be enrolled instantly.",$4="Our staff will contact you to confirm your admission.",G4="Student Info",q4="Nick Name",Y4="First Name",X4="Last Name",W4="Date of Birth",K4="Parent / Guardian",Z4="Line App ID",Q4="Phone",J4="Courses",e5="Loading courses",t5="No courses available.",n5="({{count}} seats)",i5="+ Time",s5="Hours Purchased:",r5="Payment Receipt",a5="Choose Files",o5="Adding",l5="Add Student",c5="Submitting",u5="Submit Application",d5="Refresh Public Admissions Link",f5="Show Public Admissions Link",h5="Copy",g5="Loading pending",m5="Pending Check-ins",p5="No pending check-ins.",x5="Take Attendance",y5="Loading students",b5="Student",w5="Slots",v5="Used / Limit",S5="Check",E5="",C5="Student QR Code",A5="Download",T5="Print",_5="Close",N5="Approve",R5="Unchecked {{first}} {{last}}",O5="Over limit for {{first}} {{last}}",I5="Checked in {{first}} {{last}}",M5="Unknown code",D5="{{first}} {{last}} already scanned",L5="Scan failed",k5="Pending: {{first}} {{last}}",j5="Billing Page (coming soon)",B5="Check Courses",P5="Manage Courses",U5="Select Course",F5="Select Day",V5="Select Time",H5="Loading",z5="No students found.",$5="Nick name",G5="Full name",q5="Course",Y5="Days",X5="Times",W5="Capacity",K5="Edit",Z5="+ Add Course",Q5="Edit Course",J5="New Course",eT="Name",tT="Days:",nT="{{day}} Times:",iT="Save",sT="Cancel",rT="Enter a name",aT="Delete this course?",oT="Monday",lT="Tuesday",cT="Wednesday",uT="Thursday",dT="Friday",fT="Saturday",hT="Sunday",gT="Add New Student",mT="Students (active)",pT="Students (inactive)",xT="Review",yT="Fast, beautiful, mobile-friendly management for your school.",bT="Scan Student QR",wT="Scan another",vT="Sign In",ST="Signing In",ET="Email",CT="Password",AT="you@example.com",TT="No notifications.",_T="Read",NT="New application  {{name}}",RT="Course limit reached  {{name}}",OT="Edit request from {{name}}",IT="New Applications",MT="Renewals",DT="Course Changes",LT="Select All",kT="Unselect All",jT="Reject",BT="Approve {{count}} item(s)?",PT="Reject (delete) {{count}} item(s)?",UT="Submitted by",FT="Line ID",VT="Submitted at",HT="Hours",zT="Open",$T="Receipts",GT="View Receipts ({{count}})",qT="Settings",YT="Close",XT="Invite User",WT="Temp password",KT="Role",ZT="Staff",QT="Admin",JT="Send Invite",e6="Inviting",t6="Team Members",n6="No users.",i6="Edit User",s6="E-mail (read-only)",r6="Saving",a6="Auth returned no user id",o6="Remove this staff account?",l6="Staff",c6="Admin",u6="Home",d6="Reports",f6="Messaging",h6="Billing",g6="Settings",m6="Back",p6="Delete Student",x6="Add New Course",y6="Select...",b6="Day",w6="Time Slot",v6="Hours to Purchase",S6="Upload Receipt",E6="Submit",C6="Not found.",A6="Joined",T6="Enrolled Courses",_6="Days & Times",N6="Hours Left",R6="Status",O6="Receipt",I6="Actions",M6="Attendance",D6="Ongoing",L6="Renewal Needed",k6="View",j6="Hide",B6="Renew",P6="Delete student?",U6="Attendance History",F6="No records",V6="Renew {{course}}",H6="Add-course request submitted.",z6="Renewal request submitted.",$6="Cancelled",G6="Edit Day",q6="Edit Time",Y6="Profile information missing. Please reload and try again.",X6="Students (Inactive)",W6="Search students",K6="Parent Phone",Z6="Line ID",Q6="Action",J6="Renew Enrollment",e8="All fields are required.",t8="Failed to upload the file.",n8="Renew Now",i8="Submit Renewal Request",s8="Export Students ({{count}})",r8="Export CSV",a8="Students",o8="No.",l8="{{count}} hours",c8="Select hour package",u8="Please select an hour package for each course.",d8="Total",f8="Show details",h8="Hide details",g8="baht",m8="Cancellations",p8="No receipt uploaded",x8="Cancel course",y8="Course cancellation request submitted for review.",b8="Cancel this course?",w8="Submit cancellation",v8="Cancellation pending approval",S8="Course cancelled",E8="Cancellation request rejected",C8="Purchased Packages",A8="Price",T8="Hour Packages",_8="No packages defined",N8="+ Add Package",R8="Times for {{day}}",O8="Course Name",I8="Choose a course to see students",M8="Inactive",D8="Students (Inactive)",L8="Used",k8="Purchased",j8="Add Existing Student (Offline Package)",B8="Hours remaining",P8="Used days (enter date, press Enter)",U8="YYYYMMDD",F8="Full day",V8="Used hours",H8="Enter the used hours for each selected course.",z8="Used hours cannot exceed the package hours ({{count}})",$8="Max Hours",G8="Used hours must be 0 to {{max}}",q8={welcome:O4,login:I4,logout:M4,selectCourseError:D4,enterNickError:L4,studentAdded:k4,applicationSubmitted:j4,thankYou:B4,applicationReceived:P4,staffWillContact:U4,youMayClose:F4,admissionsTitle:V4,admissionsIntro:H4,enrollInstant:z4,contactToConfirm:$4,studentInfo:G4,nickName:q4,firstName:Y4,lastName:X4,dob:W4,guardian:K4,lineAppId:Z4,phone:Q4,courses:J4,loadingCourses:e5,noCourses:t5,seats:n5,addTime:i5,hoursPurchased:s5,paymentReceipt:r5,chooseFiles:a5,adding:o5,addStudent:l5,submitting:c5,submitApplication:u5,refreshPublicAdmissionsLink:d5,showPublicAdmissionsLink:f5,copy:h5,loadingPending:g5,pendingCheckins:m5,noPendingCheckins:p5,takeAttendance:x5,loadingStudents:y5,student:b5,slots:w5,usedLimit:v5,check:S5,unlimited:E5,studentQrCode:C5,download:A5,print:T5,close:_5,approve:N5,uncheckedStudent:R5,overLimit:O5,checkedInStudent:I5,unknownCode:M5,alreadyScanned:D5,scanFailed:L5,pendingStudent:k5,billingComingSoon:j5,checkCourses:B5,manageCourses:P5,selectCourse:U5,selectDay:F5,selectTime:V5,loading:H5,noStudentsFound:z5,nickname:$5,fullName:G5,course:q5,days:Y5,times:X5,capacity:W5,edit:K5,delete:"Delete",addCourse:Z5,editCourse:Q5,newCourse:J5,name:eT,daysColon:tT,timesColon:nT,save:iT,cancel:sT,enterName:rT,deleteThisCourse:aT,monday:oT,tuesday:lT,wednesday:cT,thursday:uT,friday:dT,saturday:fT,sunday:hT,addNewStudent:gT,studentsActive:mT,studentsInactive:pT,review:xT,homepageSlogan:yT,scanStudentQr:bT,scanAnother:wT,signIn:vT,signingIn:ST,email:ET,password:CT,emailPlaceholder:AT,noNotifications:TT,markRead:_T,newApplication:NT,courseLimitReached:RT,editRequestFrom:OT,newApplications:IT,renewals:MT,courseChanges:DT,selectAll:LT,unselectAll:kT,reject:jT,approveConfirm:BT,rejectConfirm:PT,submittedBy:UT,lineId:FT,submittedAt:VT,hours:HT,open:zT,receipts:$T,viewReceipts:GT,settingsTitle:qT,closeInvite:YT,inviteUser:XT,tempPassword:WT,role:KT,roleStaff:ZT,roleAdmin:QT,sendInvite:JT,inviting:e6,teamMembers:t6,noUsers:n6,editUser:i6,emailReadOnly:s6,saving:r6,noUserIdError:a6,confirmRemoveStaff:o6,role_staff:l6,role_admin:c6,home:u6,reports:d6,messaging:f6,billing:h6,settings:g6,back:m6,deleteStudent:p6,addNewCourse:x6,select:y6,day:b6,timeSlot:w6,hoursToPurchase:v6,uploadReceipt:S6,submit:E6,studentNotFound:C6,joined:A6,enrolledCourses:T6,daysTimes:_6,hoursLeft:N6,status:R6,receipt:O6,actions:I6,attendance:M6,ongoing:D6,renewalNeeded:L6,view:k6,hide:j6,renew:B6,deleteStudentConfirm:P6,attendanceHistory:U6,noRecords:F6,submitRenew:V6,submitAdd:H6,submitRenewal:z6,cancelled:$6,editDay:G6,editTime:q6,profileMissingError:Y6,inactiveStudents:X6,searchStudents:W6,export:"Export",parentPhone:K6,lineID:Z6,action:Q6,renewEnrollment:J6,allFieldsRequired:e8,uploadError:t8,renewNow:n8,submitRenewalRequest:i8,exportStudents:s8,exportCSV:r8,students:a8,no:o8,hoursLabel:l8,chooseHourPackage:c8,selectHourPackageError:u8,totalPrice:d8,showDetail:f8,hideDetail:h8,baht:g8,cancellations:m8,noReceipt:p8,cancelCourse:x8,cancelRequest:y8,cancelConfirm:b8,cancelSubmit:w8,cancelPending:v8,cancelApproved:S8,cancelRejected:E8,purchasedPackages:C8,price:A8,hourPackages:T8,noPackagesDefined:_8,addPackage:N8,timesForDay:R8,courseName:O8,chooseCourseToSeeStudents:I8,inactive:M8,studentsNeedingRenewal:D8,used:L8,purchased:k8,addExistingStudent:j8,hoursRemaining:B8,usedDays:P8,YYYYMMDD:U8,fullDay:F8,usedHours:V8,enterUsedHoursError:H8,usedHoursTooMany:z8,maxHours:$8,usedHoursInvalid:G8},Y8="",X8="",W8="",K8=" 1 ",Z8="",Q8=" {{nick}} !",J8="!",e_="!",t_="",n_=" LINE ",i_="",s_="",r_=" {{staffMsg}}",a_="",o_="",l_="",c_="",u_="",d_="",f_="",h_="",g_="LINE ID",m_="",p_="",x_="",y_="",b_="({{count}} )",w_="+ ",v_=":",S_="",E_="",C_="",A_="",T_="",__="",N_="",R_="",O_="",I_="",M_="",D_="",L_="",k_="",j_="",B_="",P_=" / ",U_="",F_="",V_="",H_="",z_="",$_="",G_="",q_=" {{first}} {{last}}",Y_=" {{first}} {{last}}",X_=" {{first}} {{last}}",W_="",K_="{{first}} {{last}} ",Z_="",Q_=": {{first}} {{last}}",J_=" (  )",eN="",tN="",nN="",iN="",sN="",rN="",aN="",oN="",lN="-",cN="",uN="",dN="",fN="",hN="",gN="+ ",mN="",pN="",xN="",yN=":",bN="{{day}} :",wN="",vN="",SN="",EN="?",CN="",AN="",TN="",_N="",NN="",RN="",ON="",IN="",MN=" ()",DN=" ()",LN="",kN="  ",jN=" QR ",BN="",PN="",UN="",FN="",VN="",HN="you@example.com",zN="",$N="",GN="  {{name}}",qN="  {{name}}",YN=" {{name}}",XN="",WN="",KN="",ZN="",QN="",JN="",eR=" {{count}} ?",tR=" () {{count}} ?",nR="",iR="",sR="",rR="",aR="",oR="",lR=" ({{count}})",cR="",uR="",dR="",fR="",hR="",gR="",mR="",pR="",xR="",yR="",bR="",wR="",vR=" ()",SR="",ER="",CR="?",AR="",TR="",_R="",NR="",RR="",OR="",IR="",MR="",DR="",LR="",kR="...",jR="",BR="",PR="",UR="",FR="",VR="",HR="",zR="",$R="",GR="",qR="",YR="",XR="",WR="",KR="",ZR="",QR="",JR="",e7="",t7="?",n7="",i7="",s7=" {{course}}",r7="",a7="",o7="",l7="",c7="",u7=" ",d7=" ()",f7="",h7="",g7="",m7="",p7="",x7="",y7="",b7="",w7=" ({{count}})",v7=" CSV",S7="",E7="",C7="{{count}} ",A7="",T7="",_7="",N7="",R7="",O7="",I7="",M7="",D7="",L7=" ",k7="?",j7="",B7="",P7="",U7="",F7="",V7="",H7="",z7="",$7="+ ",G7="{{day}}",q7="",Y7="",X7="",W7="",K7="",Z7="",Q7="/",J7="",eO=" ( Enter)",tO="--",nO="",iO="",sO="",rO="",aO=" ({{count}})",oO="",lO=" 0  {{max}}",cO={welcome:Y8,login:X8,logout:W8,selectCourseError:K8,enterNickError:Z8,studentAdded:Q8,applicationSubmitted:J8,thankYou:e_,applicationReceived:t_,staffWillContact:n_,youMayClose:i_,admissionsTitle:s_,admissionsIntro:r_,enrollInstant:a_,contactToConfirm:o_,studentInfo:l_,nickName:c_,firstName:u_,lastName:d_,dob:f_,guardian:h_,lineAppId:g_,phone:m_,courses:p_,loadingCourses:x_,noCourses:y_,seats:b_,addTime:w_,hoursPurchased:v_,paymentReceipt:S_,chooseFiles:E_,adding:C_,addStudent:A_,submitting:T_,submitApplication:__,refreshPublicAdmissionsLink:N_,showPublicAdmissionsLink:R_,copy:O_,loadingPending:I_,pendingCheckins:M_,noPendingCheckins:D_,takeAttendance:L_,loadingStudents:k_,student:j_,slots:B_,usedLimit:P_,check:U_,unlimited:F_,studentQrCode:V_,download:H_,print:z_,close:$_,approve:G_,uncheckedStudent:q_,overLimit:Y_,checkedInStudent:X_,unknownCode:W_,alreadyScanned:K_,scanFailed:Z_,pendingStudent:Q_,billingComingSoon:J_,checkCourses:eN,manageCourses:tN,selectCourse:nN,selectDay:iN,selectTime:sN,loading:rN,noStudentsFound:aN,nickname:oN,fullName:lN,course:cN,days:uN,times:dN,capacity:fN,edit:hN,delete:"",addCourse:gN,editCourse:mN,newCourse:pN,name:xN,daysColon:yN,timesColon:bN,save:wN,cancel:vN,enterName:SN,deleteThisCourse:EN,monday:CN,tuesday:AN,wednesday:TN,thursday:_N,friday:NN,saturday:RN,sunday:ON,addNewStudent:IN,studentsActive:MN,studentsInactive:DN,review:LN,homepageSlogan:kN,scanStudentQr:jN,scanAnother:BN,signIn:PN,signingIn:UN,email:FN,password:VN,emailPlaceholder:HN,noNotifications:zN,markRead:$N,newApplication:GN,courseLimitReached:qN,editRequestFrom:YN,newApplications:XN,renewals:WN,courseChanges:KN,selectAll:ZN,unselectAll:QN,reject:JN,approveConfirm:eR,rejectConfirm:tR,submittedBy:nR,lineId:iR,submittedAt:sR,hours:rR,open:aR,receipts:oR,viewReceipts:lR,settingsTitle:cR,closeInvite:uR,inviteUser:dR,tempPassword:fR,role:hR,roleStaff:gR,roleAdmin:mR,sendInvite:pR,inviting:xR,teamMembers:yR,noUsers:bR,editUser:wR,emailReadOnly:vR,saving:SR,noUserIdError:ER,confirmRemoveStaff:CR,role_staff:AR,role_admin:TR,home:_R,reports:NR,messaging:RR,billing:OR,settings:IR,back:MR,deleteStudent:DR,addNewCourse:LR,select:kR,day:jR,timeSlot:BR,hoursToPurchase:PR,uploadReceipt:UR,submit:FR,studentNotFound:VR,joined:HR,enrolledCourses:zR,daysTimes:$R,hoursLeft:GR,status:qR,receipt:YR,actions:XR,attendance:WR,ongoing:KR,renewalNeeded:ZR,view:QR,hide:JR,renew:e7,deleteStudentConfirm:t7,attendanceHistory:n7,noRecords:i7,submitRenew:s7,submitAdd:r7,submitRenewal:a7,cancelled:o7,editDay:l7,editTime:c7,profileMissingError_th:u7,inactiveStudents:d7,searchStudents:f7,export:"",parentPhone:h7,lineID:g7,action:m7,allFieldsRequired:p7,uploadError:x7,renewNow:y7,submitRenewalRequest:b7,exportStudents:w7,exportCSV:v7,students:S7,no:E7,hoursLabel:C7,chooseHourPackage:A7,selectHourPackageError:T7,totalPrice:_7,showDetail:N7,hideDetail:R7,baht:O7,cancellations:I7,noReceipt:M7,cancelCourse:D7,cancelRequest:L7,cancelConfirm:k7,cancelSubmit:j7,cancelPending:B7,cancelApproved:P7,cancelRejected:U7,purchasedPackages:F7,price:V7,hourPackages:H7,noPackagesDefined:z7,addPackage:$7,timesForDay:G7,courseName:q7,chooseCourseToSeeStudents:Y7,inactive:X7,used:W7,purchased:K7,studentsNeedingRenewal:Z7,usedPurchased:Q7,addExistingStudent:J7,usedDays:eO,YYYYMMDD:tO,fullDay:nO,usedHours:iO,hoursRemaining:sO,enterUsedHoursError:rO,usedHoursTooMany:aO,maxHours:oO,usedHoursInvalid:lO},uO=typeof window<"u"&&localStorage.getItem("lang"),sb="en";Qn.use(A4).init({resources:{en:{translation:q8},th:{translation:cO}},lng:uO||sb,fallbackLng:sb,interpolation:{escapeValue:!1}});typeof window<"u"&&(window.i18n=Qn);var eg={exports:{}},Mu={},tg={exports:{}},ng={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb;function dO(){return rb||(rb=1,function(t){function e(ie,le){var De=ie.length;ie.push(le);e:for(;0<De;){var $e=De-1>>>1,W=ie[$e];if(0<l(W,le))ie[$e]=le,ie[De]=W,De=$e;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var le=ie[0],De=ie.pop();if(De!==le){ie[0]=De;e:for(var $e=0,W=ie.length,Z=W>>>1;$e<Z;){var ce=2*($e+1)-1,se=ie[ce],Ne=ce+1,We=ie[Ne];if(0>l(se,De))Ne<W&&0>l(We,se)?(ie[$e]=We,ie[Ne]=De,$e=Ne):(ie[$e]=se,ie[ce]=De,$e=ce);else if(Ne<W&&0>l(We,De))ie[$e]=We,ie[Ne]=De,$e=Ne;else break e}}return le}function l(ie,le){var De=ie.sortIndex-le.sortIndex;return De!==0?De:ie.id-le.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var g=Date,y=g.now();t.unstable_now=function(){return g.now()-y}}var b=[],x=[],S=1,A=null,N=3,I=!1,M=!1,j=!1,U=!1,z=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function V(ie){for(var le=n(x);le!==null;){if(le.callback===null)r(x);else if(le.startTime<=ie)r(x),le.sortIndex=le.expirationTime,e(b,le);else break;le=n(x)}}function H(ie){if(j=!1,V(ie),!M)if(n(b)!==null)M=!0,J||(J=!0,Ee());else{var le=n(x);le!==null&&re(H,le.startTime-ie)}}var J=!1,X=-1,oe=5,Y=-1;function be(){return U?!0:!(t.unstable_now()-Y<oe)}function Ae(){if(U=!1,J){var ie=t.unstable_now();Y=ie;var le=!0;try{e:{M=!1,j&&(j=!1,q(X),X=-1),I=!0;var De=N;try{t:{for(V(ie),A=n(b);A!==null&&!(A.expirationTime>ie&&be());){var $e=A.callback;if(typeof $e=="function"){A.callback=null,N=A.priorityLevel;var W=$e(A.expirationTime<=ie);if(ie=t.unstable_now(),typeof W=="function"){A.callback=W,V(ie),le=!0;break t}A===n(b)&&r(b),V(ie)}else r(b);A=n(b)}if(A!==null)le=!0;else{var Z=n(x);Z!==null&&re(H,Z.startTime-ie),le=!1}}break e}finally{A=null,N=De,I=!1}le=void 0}}finally{le?Ee():J=!1}}}var Ee;if(typeof B=="function")Ee=function(){B(Ae)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Oe=de.port2;de.port1.onmessage=Ae,Ee=function(){Oe.postMessage(null)}}else Ee=function(){z(Ae,0)};function re(ie,le){X=z(function(){ie(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_next=function(ie){switch(N){case 1:case 2:case 3:var le=3;break;default:le=N}var De=N;N=le;try{return ie()}finally{N=De}},t.unstable_requestPaint=function(){U=!0},t.unstable_runWithPriority=function(ie,le){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var De=N;N=ie;try{return le()}finally{N=De}},t.unstable_scheduleCallback=function(ie,le,De){var $e=t.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?$e+De:$e):De=$e,ie){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=De+W,ie={id:S++,callback:le,priorityLevel:ie,startTime:De,expirationTime:W,sortIndex:-1},De>$e?(ie.sortIndex=De,e(x,ie),n(b)===null&&ie===n(x)&&(j?(q(X),X=-1):j=!0,re(H,De-$e))):(ie.sortIndex=W,e(b,ie),M||I||(M=!0,J||(J=!0,Ee()))),ie},t.unstable_shouldYield=be,t.unstable_wrapCallback=function(ie){var le=N;return function(){var De=N;N=le;try{return ie.apply(this,arguments)}finally{N=De}}}}(ng)),ng}var ab;function fO(){return ab||(ab=1,tg.exports=dO()),tg.exports}var ig={exports:{}},Si={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ob;function hO(){if(ob)return Si;ob=1;var t=Uh();function e(b){var x="https://react.dev/errors/"+b;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)x+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+b+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(b,x,S){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:A==null?null:""+A,children:b,containerInfo:x,implementation:S}}var g=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(b,x){if(b==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Si.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Si.createPortal=function(b,x){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(b,x,null,S)},Si.flushSync=function(b){var x=g.T,S=r.p;try{if(g.T=null,r.p=2,b)return b()}finally{g.T=x,r.p=S,r.d.f()}},Si.preconnect=function(b,x){typeof b=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(b,x))},Si.prefetchDNS=function(b){typeof b=="string"&&r.d.D(b)},Si.preinit=function(b,x){if(typeof b=="string"&&x&&typeof x.as=="string"){var S=x.as,A=y(S,x.crossOrigin),N=typeof x.integrity=="string"?x.integrity:void 0,I=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;S==="style"?r.d.S(b,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:A,integrity:N,fetchPriority:I}):S==="script"&&r.d.X(b,{crossOrigin:A,integrity:N,fetchPriority:I,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Si.preinitModule=function(b,x){if(typeof b=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var S=y(x.as,x.crossOrigin);r.d.M(b,{crossOrigin:S,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(b)},Si.preload=function(b,x){if(typeof b=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var S=x.as,A=y(S,x.crossOrigin);r.d.L(b,S,{crossOrigin:A,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Si.preloadModule=function(b,x){if(typeof b=="string")if(x){var S=y(x.as,x.crossOrigin);r.d.m(b,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:S,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(b)},Si.requestFormReset=function(b){r.d.r(b)},Si.unstable_batchedUpdates=function(b,x){return b(x)},Si.useFormState=function(b,x,S){return g.H.useFormState(b,x,S)},Si.useFormStatus=function(){return g.H.useHostTransitionStatus()},Si.version="19.1.0",Si}var lb;function p3(){if(lb)return ig.exports;lb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ig.exports=hO(),ig.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb;function gO(){if(cb)return Mu;cb=1;var t=fO(),e=Uh(),n=p3();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function u(i){var a=i,d=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(d=a.return),i=a.return;while(i)}return a.tag===3?d:null}function g(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function y(i){if(u(i)!==i)throw Error(r(188))}function b(i){var a=i.alternate;if(!a){if(a=u(i),a===null)throw Error(r(188));return a!==i?null:i}for(var d=i,m=a;;){var v=d.return;if(v===null)break;var T=v.alternate;if(T===null){if(m=v.return,m!==null){d=m;continue}break}if(v.child===T.child){for(T=v.child;T;){if(T===d)return y(v),i;if(T===m)return y(v),a;T=T.sibling}throw Error(r(188))}if(d.return!==m.return)d=v,m=T;else{for(var D=!1,F=v.child;F;){if(F===d){D=!0,d=v,m=T;break}if(F===m){D=!0,m=v,d=T;break}F=F.sibling}if(!D){for(F=T.child;F;){if(F===d){D=!0,d=T,m=v;break}if(F===m){D=!0,m=T,d=v;break}F=F.sibling}if(!D)throw Error(r(189))}}if(d.alternate!==m)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?i:a}function x(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=x(i),a!==null)return a;i=i.sibling}return null}var S=Object.assign,A=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),B=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),be=Symbol.for("react.memo_cache_sentinel"),Ae=Symbol.iterator;function Ee(i){return i===null||typeof i!="object"?null:(i=Ae&&i[Ae]||i["@@iterator"],typeof i=="function"?i:null)}var de=Symbol.for("react.client.reference");function Oe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===de?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case U:return"Profiler";case j:return"StrictMode";case H:return"Suspense";case J:return"SuspenseList";case Y:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case I:return"Portal";case B:return(i.displayName||"Context")+".Provider";case q:return(i._context.displayName||"Context")+".Consumer";case V:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case X:return a=i.displayName||null,a!==null?a:Oe(i.type)||"Memo";case oe:a=i._payload,i=i._init;try{return Oe(i(a))}catch{}}return null}var re=Array.isArray,ie=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De={pending:!1,data:null,method:null,action:null},$e=[],W=-1;function Z(i){return{current:i}}function ce(i){0>W||(i.current=$e[W],$e[W]=null,W--)}function se(i,a){W++,$e[W]=i.current,i.current=a}var Ne=Z(null),We=Z(null),Se=Z(null),ht=Z(null);function ve(i,a){switch(se(Se,a),se(We,i),se(Ne,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?u2(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=u2(a),i=d2(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ce(Ne),se(Ne,i)}function He(){ce(Ne),ce(We),ce(Se)}function at(i){i.memoizedState!==null&&se(ht,i);var a=Ne.current,d=d2(a,i.type);a!==d&&(se(We,i),se(Ne,d))}function gt(i){We.current===i&&(ce(Ne),ce(We)),ht.current===i&&(ce(ht),Au._currentValue=De)}var Ve=Object.prototype.hasOwnProperty,ue=t.unstable_scheduleCallback,Ue=t.unstable_cancelCallback,Ke=t.unstable_shouldYield,Ze=t.unstable_requestPaint,Fe=t.unstable_now,mt=t.unstable_getCurrentPriorityLevel,ze=t.unstable_ImmediatePriority,dt=t.unstable_UserBlockingPriority,Pe=t.unstable_NormalPriority,ki=t.unstable_LowPriority,qs=t.unstable_IdlePriority,je=t.log,Rt=t.unstable_setDisableYieldValue,Ct=null,wt=null;function Lt(i){if(typeof je=="function"&&Rt(i),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(Ct,i)}catch{}}var tt=Math.clz32?Math.clz32:cs,Jn=Math.log,mi=Math.LN2;function cs(i){return i>>>=0,i===0?32:31-(Jn(i)/mi|0)|0}var $t=256,ke=4194304;function Vt(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function At(i,a,d){var m=i.pendingLanes;if(m===0)return 0;var v=0,T=i.suspendedLanes,D=i.pingedLanes;i=i.warmLanes;var F=m&134217727;return F!==0?(m=F&~T,m!==0?v=Vt(m):(D&=F,D!==0?v=Vt(D):d||(d=F&~i,d!==0&&(v=Vt(d))))):(F=m&~T,F!==0?v=Vt(F):D!==0?v=Vt(D):d||(d=m&~i,d!==0&&(v=Vt(d)))),v===0?0:a!==0&&a!==v&&(a&T)===0&&(T=v&-v,d=a&-a,T>=d||T===32&&(d&4194048)!==0)?a:v}function jt(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Ys(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Er(){var i=$t;return $t<<=1,($t&4194048)===0&&($t=256),i}function jc(){var i=ke;return ke<<=1,(ke&62914560)===0&&(ke=4194304),i}function Bt(i){for(var a=[],d=0;31>d;d++)a.push(i);return a}function Wi(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ld(i,a,d,m,v,T){var D=i.pendingLanes;i.pendingLanes=d,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=d,i.entangledLanes&=d,i.errorRecoveryDisabledLanes&=d,i.shellSuspendCounter=0;var F=i.entanglements,K=i.expirationTimes,me=i.hiddenUpdates;for(d=D&~d;0<d;){var Ce=31-tt(d),_e=1<<Ce;F[Ce]=0,K[Ce]=-1;var pe=me[Ce];if(pe!==null)for(me[Ce]=null,Ce=0;Ce<pe.length;Ce++){var ye=pe[Ce];ye!==null&&(ye.lane&=-536870913)}d&=~_e}m!==0&&Bc(i,m,0),T!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=T&~(D&~a))}function Bc(i,a,d){i.pendingLanes|=a,i.suspendedLanes&=~a;var m=31-tt(a);i.entangledLanes|=a,i.entanglements[m]=i.entanglements[m]|1073741824|d&4194090}function ji(i,a){var d=i.entangledLanes|=a;for(i=i.entanglements;d;){var m=31-tt(d),v=1<<m;v&a|i[m]&a&&(i[m]|=a),d&=~v}}function uo(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Pn(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Cr(){var i=le.p;return i!==0?i:(i=window.event,i===void 0?32:O2(i.type))}function ul(i,a){var d=le.p;try{return le.p=i,a()}finally{le.p=d}}var zn=Math.random().toString(36).slice(2),ei="__reactFiber$"+zn,vn="__reactProps$"+zn,Xs="__reactContainer$"+zn,ti="__reactEvents$"+zn,Ar="__reactListeners$"+zn,Bi="__reactHandles$"+zn,Ge="__reactResources$"+zn,us="__reactMarker$"+zn;function fo(i){delete i[ei],delete i[vn],delete i[ti],delete i[Ar],delete i[Bi]}function Rn(i){var a=i[ei];if(a)return a;for(var d=i.parentNode;d;){if(a=d[Xs]||d[ei]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(i=m2(i);i!==null;){if(d=i[ei])return d;i=m2(i)}return a}i=d,d=i.parentNode}return null}function Ki(i){if(i=i[ei]||i[Xs]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Ws(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function Rs(i){var a=i[Ge];return a||(a=i[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Wt(i){i[us]=!0}var kd=new Set,jd={};function ni(i,a){Sn(i,a),Sn(i+"Capture",a)}function Sn(i,a){for(jd[i]=a,i=0;i<a.length;i++)kd.add(a[i])}var ln=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pc={},Os={};function Uc(i){return Ve.call(Os,i)?!0:Ve.call(Pc,i)?!1:ln.test(i)?Os[i]=!0:(Pc[i]=!0,!1)}function Re(i,a,d){if(Uc(a))if(d===null)i.removeAttribute(a);else{switch(typeof d){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var m=a.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+d)}}function dl(i,a,d){if(d===null)i.removeAttribute(a);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+d)}}function Ht(i,a,d,m){if(m===null)i.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(d);return}i.setAttributeNS(a,d,""+m)}}var Ks,Bd;function Ot(i){if(Ks===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);Ks=a&&a[1]||"",Bd=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ks+i+Bd}var Pt=!1;function Tt(i,a){if(!i||Pt)return"";Pt=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(a){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(ye){var pe=ye}Reflect.construct(i,[],_e)}else{try{_e.call()}catch(ye){pe=ye}i.call(_e.prototype)}}else{try{throw Error()}catch(ye){pe=ye}(_e=i())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(ye){if(ye&&pe&&typeof ye.stack=="string")return[ye.stack,pe.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=m.DetermineComponentFrameRoot(),D=T[0],F=T[1];if(D&&F){var K=D.split(`
`),me=F.split(`
`);for(v=m=0;m<K.length&&!K[m].includes("DetermineComponentFrameRoot");)m++;for(;v<me.length&&!me[v].includes("DetermineComponentFrameRoot");)v++;if(m===K.length||v===me.length)for(m=K.length-1,v=me.length-1;1<=m&&0<=v&&K[m]!==me[v];)v--;for(;1<=m&&0<=v;m--,v--)if(K[m]!==me[v]){if(m!==1||v!==1)do if(m--,v--,0>v||K[m]!==me[v]){var Ce=`
`+K[m].replace(" at new "," at ");return i.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",i.displayName)),Ce}while(1<=m&&0<=v);break}}}finally{Pt=!1,Error.prepareStackTrace=d}return(d=i?i.displayName||i.name:"")?Ot(d):""}function Fc(i){switch(i.tag){case 26:case 27:case 5:return Ot(i.type);case 16:return Ot("Lazy");case 13:return Ot("Suspense");case 19:return Ot("SuspenseList");case 0:case 15:return Tt(i.type,!1);case 11:return Tt(i.type.render,!1);case 1:return Tt(i.type,!0);case 31:return Ot("Activity");default:return""}}function fl(i){try{var a="";do a+=Fc(i),i=i.return;while(i);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function pi(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function En(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Zs(i){var a=En(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),m=""+i[a];if(!i.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,T=d.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return v.call(this)},set:function(D){m=""+D,T.call(this,D)}}),Object.defineProperty(i,a,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(D){m=""+D},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function hl(i){i._valueTracker||(i._valueTracker=Zs(i))}function hn(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var d=a.getValue(),m="";return i&&(m=En(i)?i.checked?"true":"false":i.value),i=m,i!==d?(a.setValue(i),!0):!1}function Zi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var n0=/[\n"\\]/g;function $n(i){return i.replace(n0,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function qt(i,a,d,m,v,T,D,F){i.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.type=D:i.removeAttribute("type"),a!=null?D==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+pi(a)):i.value!==""+pi(a)&&(i.value=""+pi(a)):D!=="submit"&&D!=="reset"||i.removeAttribute("value"),a!=null?he(i,D,pi(a)):d!=null?he(i,D,pi(d)):m!=null&&i.removeAttribute("value"),v==null&&T!=null&&(i.defaultChecked=!!T),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?i.name=""+pi(F):i.removeAttribute("name")}function Gn(i,a,d,m,v,T,D,F){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.type=T),a!=null||d!=null){if(!(T!=="submit"&&T!=="reset"||a!=null))return;d=d!=null?""+pi(d):"",a=a!=null?""+pi(a):d,F||a===i.value||(i.value=a),i.defaultValue=a}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=F?i.checked:!!m,i.defaultChecked=!!m,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(i.name=D)}function he(i,a,d){a==="number"&&Zi(i.ownerDocument)===i||i.defaultValue===""+d||(i.defaultValue=""+d)}function $(i,a,d,m){if(i=i.options,a){a={};for(var v=0;v<d.length;v++)a["$"+d[v]]=!0;for(d=0;d<i.length;d++)v=a.hasOwnProperty("$"+i[d].value),i[d].selected!==v&&(i[d].selected=v),v&&m&&(i[d].defaultSelected=!0)}else{for(d=""+pi(d),a=null,v=0;v<i.length;v++){if(i[v].value===d){i[v].selected=!0,m&&(i[v].defaultSelected=!0);return}a!==null||i[v].disabled||(a=i[v])}a!==null&&(a.selected=!0)}}function Qe(i,a,d){if(a!=null&&(a=""+pi(a),a!==i.value&&(i.value=a),d==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=d!=null?""+pi(d):""}function On(i,a,d,m){if(a==null){if(m!=null){if(d!=null)throw Error(r(92));if(re(m)){if(1<m.length)throw Error(r(93));m=m[0]}d=m}d==null&&(d=""),a=d}d=pi(a),i.defaultValue=d,m=i.textContent,m===d&&m!==""&&m!==null&&(i.value=m)}function qn(i,a){if(a){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=a;return}}i.textContent=a}var i0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gl(i,a,d){var m=a.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":m?i.setProperty(a,d):typeof d!="number"||d===0||i0.has(a)?a==="float"?i.cssFloat=d:i[a]=(""+d).trim():i[a]=d+"px"}function Ni(i,a,d){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||a!=null&&a.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var v in a)m=a[v],a.hasOwnProperty(v)&&d[v]!==m&&gl(i,v,m)}else for(var T in a)a.hasOwnProperty(T)&&gl(i,T,a[T])}function Je(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ml(i){return Pd.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var ho=null;function ra(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Qs=null,aa=null;function In(i){var a=Ki(i);if(a&&(i=a.stateNode)){var d=i[vn]||null;e:switch(i=a.stateNode,a.type){case"input":if(qt(i,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),a=d.name,d.type==="radio"&&a!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+$n(""+a)+'"][type="radio"]'),a=0;a<d.length;a++){var m=d[a];if(m!==i&&m.form===i.form){var v=m[vn]||null;if(!v)throw Error(r(90));qt(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<d.length;a++)m=d[a],m.form===i.form&&hn(m)}break e;case"textarea":Qe(i,d.value,d.defaultValue);break e;case"select":a=d.value,a!=null&&$(i,!!d.multiple,a,!1)}}}var Tr=!1;function Is(i,a,d){if(Tr)return i(a,d);Tr=!0;try{var m=i(a);return m}finally{if(Tr=!1,(Qs!==null||aa!==null)&&(Cf(),Qs&&(a=Qs,i=aa,aa=Qs=null,In(a),i)))for(a=0;a<i.length;a++)In(i[a])}}function nt(i,a){var d=i.stateNode;if(d===null)return null;var m=d[vn]||null;if(m===null)return null;d=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(r(231,a,typeof d));return d}var Ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xt=!1;if(Ms)try{var yn={};Object.defineProperty(yn,"passive",{get:function(){xt=!0}}),window.addEventListener("test",yn,yn),window.removeEventListener("test",yn,yn)}catch{xt=!1}var Js=null,go=null,mo=null;function er(){if(mo)return mo;var i,a=go,d=a.length,m,v="value"in Js?Js.value:Js.textContent,T=v.length;for(i=0;i<d&&a[i]===v[i];i++);var D=d-i;for(m=1;m<=D&&a[d-m]===v[T-m];m++);return mo=v.slice(i,1<m?1-m:void 0)}function pl(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function tr(){return!0}function oa(){return!1}function Un(i){function a(d,m,v,T,D){this._reactName=d,this._targetInst=v,this.type=m,this.nativeEvent=T,this.target=D,this.currentTarget=null;for(var F in i)i.hasOwnProperty(F)&&(d=i[F],this[F]=d?d(T):T[F]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?tr:oa,this.isPropagationStopped=oa,this}return S(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),a}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ir=Un(nr),Ds=S({},nr,{view:0,detail:0}),xi=Un(Ds),xl,yl,la,bl=S({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==la&&(la&&i.type==="mousemove"?(xl=i.screenX-la.screenX,yl=i.screenY-la.screenY):yl=xl=0,la=i),xl)},movementY:function(i){return"movementY"in i?i.movementY:yl}}),Ud=Un(bl),s0=S({},bl,{dataTransfer:0}),Yt=Un(s0),Fd=S({},Ds,{relatedTarget:0}),ca=Un(Fd),sr=S({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),r0=Un(sr),we=S({},nr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),vt=Un(we),Yn=S({},nr,{data:0}),po=Un(Yn),Vd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l0(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=o0[i])?!!a[i]:!1}function xo(){return l0}var Mn=S({},Ds,{key:function(i){if(i.key){var a=Vd[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=pl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?a0[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xo,charCode:function(i){return i.type==="keypress"?pl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?pl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Vc=Un(Mn),gn=S({},bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yo=Un(gn),_r=S({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xo}),Kt=Un(_r),it=S({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),c0=Un(it),rn=S({},bl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Nr=Un(rn),ua=S({},nr,{newState:0,oldState:0}),u0=Un(ua),ds=[9,13,27,32],bo=Ms&&"CompositionEvent"in window,da=null;Ms&&"documentMode"in document&&(da=document.documentMode);var Hc=Ms&&"TextEvent"in window&&!da,zc=Ms&&(!bo||da&&8<da&&11>=da),$c=" ",Hd=!1;function Rr(i,a){switch(i){case"keyup":return ds.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var fa=!1;function wo(i,a){switch(i){case"compositionend":return wl(a);case"keypress":return a.which!==32?null:(Hd=!0,$c);case"textInput":return i=a.data,i===$c&&Hd?null:i;default:return null}}function d0(i,a){if(fa)return i==="compositionend"||!bo&&Rr(i,a)?(i=er(),mo=go=Js=null,fa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return zc&&a.locale!=="ko"?null:a.data;default:return null}}var rr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vo(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!rr[i.type]:a==="textarea"}function Ri(i,a,d,m){Qs?aa?aa.push(m):aa=[m]:Qs=m,a=Of(a,"onChange"),0<a.length&&(d=new ir("onChange","change",null,d,m),i.push({event:d,listeners:a}))}var ha=null,yi=null;function f0(i){r2(i,0)}function ga(i){var a=Ws(i);if(hn(a))return i}function zd(i,a){if(i==="change")return a}var Gc=!1;if(Ms){var Pi;if(Ms){var qc="oninput"in document;if(!qc){var vl=document.createElement("div");vl.setAttribute("oninput","return;"),qc=typeof vl.oninput=="function"}Pi=qc}else Pi=!1;Gc=Pi&&(!document.documentMode||9<document.documentMode)}function ma(){ha&&(ha.detachEvent("onpropertychange",kt),yi=ha=null)}function kt(i){if(i.propertyName==="value"&&ga(yi)){var a=[];Ri(a,yi,i,ra(i)),Is(f0,a)}}function Sl(i,a,d){i==="focusin"?(ma(),ha=a,yi=d,ha.attachEvent("onpropertychange",kt)):i==="focusout"&&ma()}function L(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ga(yi)}function s(i,a){if(i==="click")return ga(a)}function o(i,a){if(i==="input"||i==="change")return ga(a)}function c(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var f=typeof Object.is=="function"?Object.is:c;function h(i,a){if(f(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var d=Object.keys(i),m=Object.keys(a);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var v=d[m];if(!Ve.call(a,v)||!f(i[v],a[v]))return!1}return!0}function p(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function w(i,a){var d=p(i);i=0;for(var m;d;){if(d.nodeType===3){if(m=i+d.textContent.length,i<=a&&m>=a)return{node:d,offset:a-i};i=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=p(d)}}function C(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?C(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function _(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Zi(i.document);a instanceof i.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)i=a.contentWindow;else break;a=Zi(i.document)}return a}function O(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var k=Ms&&"documentMode"in document&&11>=document.documentMode,P=null,G=null,Q=null,te=!1;function fe(i,a,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;te||P==null||P!==Zi(m)||(m=P,"selectionStart"in m&&O(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Q&&h(Q,m)||(Q=m,m=Of(G,"onSelect"),0<m.length&&(a=new ir("onSelect","select",null,a,d),i.push({event:a,listeners:m}),a.target=P)))}function xe(i,a){var d={};return d[i.toLowerCase()]=a.toLowerCase(),d["Webkit"+i]="webkit"+a,d["Moz"+i]="moz"+a,d}var Me={animationend:xe("Animation","AnimationEnd"),animationiteration:xe("Animation","AnimationIteration"),animationstart:xe("Animation","AnimationStart"),transitionrun:xe("Transition","TransitionRun"),transitionstart:xe("Transition","TransitionStart"),transitioncancel:xe("Transition","TransitionCancel"),transitionend:xe("Transition","TransitionEnd")},Le={},Ie={};Ms&&(Ie=document.createElement("div").style,"AnimationEvent"in window||(delete Me.animationend.animation,delete Me.animationiteration.animation,delete Me.animationstart.animation),"TransitionEvent"in window||delete Me.transitionend.transition);function yt(i){if(Le[i])return Le[i];if(!Me[i])return i;var a=Me[i],d;for(d in a)if(a.hasOwnProperty(d)&&d in Ie)return Le[i]=a[d];return i}var pt=yt("animationend"),ui=yt("animationiteration"),Ui=yt("animationstart"),bi=yt("transitionrun"),Zt=yt("transitionstart"),Xn=yt("transitioncancel"),wi=yt("transitionend"),Or=new Map,ar="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ar.push("scrollEnd");function Qi(i,a){Or.set(i,a),ni(a,[i])}var $d=new WeakMap;function fs(i,a){if(typeof i=="object"&&i!==null){var d=$d.get(i);return d!==void 0?d:(a={value:i,source:a,stack:fl(a)},$d.set(i,a),a)}return{value:i,source:a,stack:fl(a)}}var hs=[],El=0,h0=0;function Gd(){for(var i=El,a=h0=El=0;a<i;){var d=hs[a];hs[a++]=null;var m=hs[a];hs[a++]=null;var v=hs[a];hs[a++]=null;var T=hs[a];if(hs[a++]=null,m!==null&&v!==null){var D=m.pending;D===null?v.next=v:(v.next=D.next,D.next=v),m.pending=v}T!==0&&zp(d,v,T)}}function qd(i,a,d,m){hs[El++]=i,hs[El++]=a,hs[El++]=d,hs[El++]=m,h0|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function g0(i,a,d,m){return qd(i,a,d,m),Yd(i)}function Cl(i,a){return qd(i,null,null,a),Yd(i)}function zp(i,a,d){i.lanes|=d;var m=i.alternate;m!==null&&(m.lanes|=d);for(var v=!1,T=i.return;T!==null;)T.childLanes|=d,m=T.alternate,m!==null&&(m.childLanes|=d),T.tag===22&&(i=T.stateNode,i===null||i._visibility&1||(v=!0)),i=T,T=T.return;return i.tag===3?(T=i.stateNode,v&&a!==null&&(v=31-tt(d),i=T.hiddenUpdates,m=i[v],m===null?i[v]=[a]:m.push(a),a.lane=d|536870912),T):null}function Yd(i){if(50<xu)throw xu=0,w1=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Al={};function OC(i,a,d,m){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(i,a,d,m){return new OC(i,a,d,m)}function m0(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ir(i,a){var d=i.alternate;return d===null?(d=Ji(i.tag,a,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=a,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&65011712,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,a=i.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d.refCleanup=i.refCleanup,d}function $p(i,a){i.flags&=65011714;var d=i.alternate;return d===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=d.childLanes,i.lanes=d.lanes,i.child=d.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=d.memoizedProps,i.memoizedState=d.memoizedState,i.updateQueue=d.updateQueue,i.type=d.type,a=d.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Xd(i,a,d,m,v,T){var D=0;if(m=i,typeof i=="function")m0(i)&&(D=1);else if(typeof i=="string")D=MA(i,d,Ne.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case Y:return i=Ji(31,d,a,v),i.elementType=Y,i.lanes=T,i;case M:return So(d.children,v,T,a);case j:D=8,v|=24;break;case U:return i=Ji(12,d,a,v|2),i.elementType=U,i.lanes=T,i;case H:return i=Ji(13,d,a,v),i.elementType=H,i.lanes=T,i;case J:return i=Ji(19,d,a,v),i.elementType=J,i.lanes=T,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case z:case B:D=10;break e;case q:D=9;break e;case V:D=11;break e;case X:D=14;break e;case oe:D=16,m=null;break e}D=29,d=Error(r(130,i===null?"null":typeof i,"")),m=null}return a=Ji(D,d,a,v),a.elementType=i,a.type=m,a.lanes=T,a}function So(i,a,d,m){return i=Ji(7,i,m,a),i.lanes=d,i}function p0(i,a,d){return i=Ji(6,i,null,a),i.lanes=d,i}function x0(i,a,d){return a=Ji(4,i.children!==null?i.children:[],i.key,a),a.lanes=d,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Tl=[],_l=0,Wd=null,Kd=0,gs=[],ms=0,Eo=null,Mr=1,Dr="";function Co(i,a){Tl[_l++]=Kd,Tl[_l++]=Wd,Wd=i,Kd=a}function Gp(i,a,d){gs[ms++]=Mr,gs[ms++]=Dr,gs[ms++]=Eo,Eo=i;var m=Mr;i=Dr;var v=32-tt(m)-1;m&=~(1<<v),d+=1;var T=32-tt(a)+v;if(30<T){var D=v-v%5;T=(m&(1<<D)-1).toString(32),m>>=D,v-=D,Mr=1<<32-tt(a)+v|d<<v|m,Dr=T+i}else Mr=1<<T|d<<v|m,Dr=i}function y0(i){i.return!==null&&(Co(i,1),Gp(i,1,0))}function b0(i){for(;i===Wd;)Wd=Tl[--_l],Tl[_l]=null,Kd=Tl[--_l],Tl[_l]=null;for(;i===Eo;)Eo=gs[--ms],gs[ms]=null,Dr=gs[--ms],gs[ms]=null,Mr=gs[--ms],gs[ms]=null}var Oi=null,Cn=null,Gt=!1,Ao=null,or=!1,w0=Error(r(519));function To(i){var a=Error(r(418,""));throw Wc(fs(a,i)),w0}function qp(i){var a=i.stateNode,d=i.type,m=i.memoizedProps;switch(a[ei]=i,a[vn]=m,d){case"dialog":Mt("cancel",a),Mt("close",a);break;case"iframe":case"object":case"embed":Mt("load",a);break;case"video":case"audio":for(d=0;d<bu.length;d++)Mt(bu[d],a);break;case"source":Mt("error",a);break;case"img":case"image":case"link":Mt("error",a),Mt("load",a);break;case"details":Mt("toggle",a);break;case"input":Mt("invalid",a),Gn(a,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),hl(a);break;case"select":Mt("invalid",a);break;case"textarea":Mt("invalid",a),On(a,m.value,m.defaultValue,m.children),hl(a)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||a.textContent===""+d||m.suppressHydrationWarning===!0||c2(a.textContent,d)?(m.popover!=null&&(Mt("beforetoggle",a),Mt("toggle",a)),m.onScroll!=null&&Mt("scroll",a),m.onScrollEnd!=null&&Mt("scrollend",a),m.onClick!=null&&(a.onclick=If),a=!0):a=!1,a||To(i)}function Yp(i){for(Oi=i.return;Oi;)switch(Oi.tag){case 5:case 13:or=!1;return;case 27:case 3:or=!0;return;default:Oi=Oi.return}}function Yc(i){if(i!==Oi)return!1;if(!Gt)return Yp(i),Gt=!0,!1;var a=i.tag,d;if((d=a!==3&&a!==27)&&((d=a===5)&&(d=i.type,d=!(d!=="form"&&d!=="button")||j1(i.type,i.memoizedProps)),d=!d),d&&Cn&&To(i),Yp(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(d=i.data,d==="/$"){if(a===0){Cn=ks(i.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++;i=i.nextSibling}Cn=null}}else a===27?(a=Cn,Ia(i.type)?(i=F1,F1=null,Cn=i):Cn=a):Cn=Oi?ks(i.stateNode.nextSibling):null;return!0}function Xc(){Cn=Oi=null,Gt=!1}function Xp(){var i=Ao;return i!==null&&(Hi===null?Hi=i:Hi.push.apply(Hi,i),Ao=null),i}function Wc(i){Ao===null?Ao=[i]:Ao.push(i)}var v0=Z(null),_o=null,Lr=null;function pa(i,a,d){se(v0,a._currentValue),a._currentValue=d}function kr(i){i._currentValue=v0.current,ce(v0)}function S0(i,a,d){for(;i!==null;){var m=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),i===d)break;i=i.return}}function E0(i,a,d,m){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var T=v.dependencies;if(T!==null){var D=v.child;T=T.firstContext;e:for(;T!==null;){var F=T;T=v;for(var K=0;K<a.length;K++)if(F.context===a[K]){T.lanes|=d,F=T.alternate,F!==null&&(F.lanes|=d),S0(T.return,d,i),m||(D=null);break e}T=F.next}}else if(v.tag===18){if(D=v.return,D===null)throw Error(r(341));D.lanes|=d,T=D.alternate,T!==null&&(T.lanes|=d),S0(D,d,i),D=null}else D=v.child;if(D!==null)D.return=v;else for(D=v;D!==null;){if(D===i){D=null;break}if(v=D.sibling,v!==null){v.return=D.return,D=v;break}D=D.return}v=D}}function Kc(i,a,d,m){i=null;for(var v=a,T=!1;v!==null;){if(!T){if((v.flags&524288)!==0)T=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var D=v.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var F=v.type;f(v.pendingProps.value,D.value)||(i!==null?i.push(F):i=[F])}}else if(v===ht.current){if(D=v.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(Au):i=[Au])}v=v.return}i!==null&&E0(a,i,d,m),a.flags|=262144}function Zd(i){for(i=i.firstContext;i!==null;){if(!f(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function No(i){_o=i,Lr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function vi(i){return Wp(_o,i)}function Qd(i,a){return _o===null&&No(i),Wp(i,a)}function Wp(i,a){var d=a._currentValue;if(a={context:a,memoizedValue:d,next:null},Lr===null){if(i===null)throw Error(r(308));Lr=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Lr=Lr.next=a;return d}var IC=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(d,m){i.push(m)}};this.abort=function(){a.aborted=!0,i.forEach(function(d){return d()})}},MC=t.unstable_scheduleCallback,DC=t.unstable_NormalPriority,Wn={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function C0(){return{controller:new IC,data:new Map,refCount:0}}function Zc(i){i.refCount--,i.refCount===0&&MC(DC,function(){i.controller.abort()})}var Qc=null,A0=0,Nl=0,Rl=null;function LC(i,a){if(Qc===null){var d=Qc=[];A0=0,Nl=_1(),Rl={status:"pending",value:void 0,then:function(m){d.push(m)}}}return A0++,a.then(Kp,Kp),a}function Kp(){if(--A0===0&&Qc!==null){Rl!==null&&(Rl.status="fulfilled");var i=Qc;Qc=null,Nl=0,Rl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function kC(i,a){var d=[],m={status:"pending",value:null,reason:null,then:function(v){d.push(v)}};return i.then(function(){m.status="fulfilled",m.value=a;for(var v=0;v<d.length;v++)(0,d[v])(a)},function(v){for(m.status="rejected",m.reason=v,v=0;v<d.length;v++)(0,d[v])(void 0)}),m}var Zp=ie.S;ie.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&LC(i,a),Zp!==null&&Zp(i,a)};var Ro=Z(null);function T0(){var i=Ro.current;return i!==null?i:cn.pooledCache}function Jd(i,a){a===null?se(Ro,Ro.current):se(Ro,a.pool)}function Qp(){var i=T0();return i===null?null:{parent:Wn._currentValue,pool:i}}var Jc=Error(r(460)),Jp=Error(r(474)),ef=Error(r(542)),_0={then:function(){}};function ex(i){return i=i.status,i==="fulfilled"||i==="rejected"}function tf(){}function tx(i,a,d){switch(d=i[d],d===void 0?i.push(a):d!==a&&(a.then(tf,tf),a=d),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,ix(i),i;default:if(typeof a.status=="string")a.then(tf,tf);else{if(i=cn,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(m){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=m}},function(m){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=m}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,ix(i),i}throw eu=a,Jc}}var eu=null;function nx(){if(eu===null)throw Error(r(459));var i=eu;return eu=null,i}function ix(i){if(i===Jc||i===ef)throw Error(r(483))}var xa=!1;function N0(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function R0(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ya(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ba(i,a,d){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(Qt&2)!==0){var v=m.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),m.pending=a,a=Yd(i),zp(i,null,d),a}return qd(i,m,a,d),Yd(i)}function tu(i,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194048)!==0)){var m=a.lanes;m&=i.pendingLanes,d|=m,a.lanes=d,ji(i,d)}}function O0(i,a){var d=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var v=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var D={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};T===null?v=T=D:T=T.next=D,d=d.next}while(d!==null);T===null?v=T=a:T=T.next=a}else v=T=a;d={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:T,shared:m.shared,callbacks:m.callbacks},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=a:i.next=a,d.lastBaseUpdate=a}var I0=!1;function nu(){if(I0){var i=Rl;if(i!==null)throw i}}function iu(i,a,d,m){I0=!1;var v=i.updateQueue;xa=!1;var T=v.firstBaseUpdate,D=v.lastBaseUpdate,F=v.shared.pending;if(F!==null){v.shared.pending=null;var K=F,me=K.next;K.next=null,D===null?T=me:D.next=me,D=K;var Ce=i.alternate;Ce!==null&&(Ce=Ce.updateQueue,F=Ce.lastBaseUpdate,F!==D&&(F===null?Ce.firstBaseUpdate=me:F.next=me,Ce.lastBaseUpdate=K))}if(T!==null){var _e=v.baseState;D=0,Ce=me=K=null,F=T;do{var pe=F.lane&-536870913,ye=pe!==F.lane;if(ye?(Ft&pe)===pe:(m&pe)===pe){pe!==0&&pe===Nl&&(I0=!0),Ce!==null&&(Ce=Ce.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var ct=i,rt=F;pe=a;var sn=d;switch(rt.tag){case 1:if(ct=rt.payload,typeof ct=="function"){_e=ct.call(sn,_e,pe);break e}_e=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=rt.payload,pe=typeof ct=="function"?ct.call(sn,_e,pe):ct,pe==null)break e;_e=S({},_e,pe);break e;case 2:xa=!0}}pe=F.callback,pe!==null&&(i.flags|=64,ye&&(i.flags|=8192),ye=v.callbacks,ye===null?v.callbacks=[pe]:ye.push(pe))}else ye={lane:pe,tag:F.tag,payload:F.payload,callback:F.callback,next:null},Ce===null?(me=Ce=ye,K=_e):Ce=Ce.next=ye,D|=pe;if(F=F.next,F===null){if(F=v.shared.pending,F===null)break;ye=F,F=ye.next,ye.next=null,v.lastBaseUpdate=ye,v.shared.pending=null}}while(!0);Ce===null&&(K=_e),v.baseState=K,v.firstBaseUpdate=me,v.lastBaseUpdate=Ce,T===null&&(v.shared.lanes=0),_a|=D,i.lanes=D,i.memoizedState=_e}}function sx(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function rx(i,a){var d=i.callbacks;if(d!==null)for(i.callbacks=null,i=0;i<d.length;i++)sx(d[i],a)}var Ol=Z(null),nf=Z(0);function ax(i,a){i=Hr,se(nf,i),se(Ol,a),Hr=i|a.baseLanes}function M0(){se(nf,Hr),se(Ol,Ol.current)}function D0(){Hr=nf.current,ce(Ol),ce(nf)}var wa=0,_t=null,tn=null,Fn=null,sf=!1,Il=!1,Oo=!1,rf=0,su=0,Ml=null,jC=0;function Dn(){throw Error(r(321))}function L0(i,a){if(a===null)return!1;for(var d=0;d<a.length&&d<i.length;d++)if(!f(i[d],a[d]))return!1;return!0}function k0(i,a,d,m,v,T){return wa=T,_t=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ie.H=i===null||i.memoizedState===null?zx:$x,Oo=!1,T=d(m,v),Oo=!1,Il&&(T=lx(a,d,m,v)),ox(i),T}function ox(i){ie.H=df;var a=tn!==null&&tn.next!==null;if(wa=0,Fn=tn=_t=null,sf=!1,su=0,Ml=null,a)throw Error(r(300));i===null||ii||(i=i.dependencies,i!==null&&Zd(i)&&(ii=!0))}function lx(i,a,d,m){_t=i;var v=0;do{if(Il&&(Ml=null),su=0,Il=!1,25<=v)throw Error(r(301));if(v+=1,Fn=tn=null,i.updateQueue!=null){var T=i.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}ie.H=zC,T=a(d,m)}while(Il);return T}function BC(){var i=ie.H,a=i.useState()[0];return a=typeof a.then=="function"?ru(a):a,i=i.useState()[0],(tn!==null?tn.memoizedState:null)!==i&&(_t.flags|=1024),a}function j0(){var i=rf!==0;return rf=0,i}function B0(i,a,d){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~d}function P0(i){if(sf){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}sf=!1}wa=0,Fn=tn=_t=null,Il=!1,su=rf=0,Ml=null}function Fi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?_t.memoizedState=Fn=i:Fn=Fn.next=i,Fn}function Vn(){if(tn===null){var i=_t.alternate;i=i!==null?i.memoizedState:null}else i=tn.next;var a=Fn===null?_t.memoizedState:Fn.next;if(a!==null)Fn=a,tn=i;else{if(i===null)throw _t.alternate===null?Error(r(467)):Error(r(310));tn=i,i={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},Fn===null?_t.memoizedState=Fn=i:Fn=Fn.next=i}return Fn}function U0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ru(i){var a=su;return su+=1,Ml===null&&(Ml=[]),i=tx(Ml,i,a),a=_t,(Fn===null?a.memoizedState:Fn.next)===null&&(a=a.alternate,ie.H=a===null||a.memoizedState===null?zx:$x),i}function af(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ru(i);if(i.$$typeof===B)return vi(i)}throw Error(r(438,String(i)))}function F0(i){var a=null,d=_t.updateQueue;if(d!==null&&(a=d.memoCache),a==null){var m=_t.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(a={data:m.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),d===null&&(d=U0(),_t.updateQueue=d),d.memoCache=a,d=a.data[a.index],d===void 0)for(d=a.data[a.index]=Array(i),m=0;m<i;m++)d[m]=be;return a.index++,d}function jr(i,a){return typeof a=="function"?a(i):a}function of(i){var a=Vn();return V0(a,tn,i)}function V0(i,a,d){var m=i.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=d;var v=i.baseQueue,T=m.pending;if(T!==null){if(v!==null){var D=v.next;v.next=T.next,T.next=D}a.baseQueue=v=T,m.pending=null}if(T=i.baseState,v===null)i.memoizedState=T;else{a=v.next;var F=D=null,K=null,me=a,Ce=!1;do{var _e=me.lane&-536870913;if(_e!==me.lane?(Ft&_e)===_e:(wa&_e)===_e){var pe=me.revertLane;if(pe===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),_e===Nl&&(Ce=!0);else if((wa&pe)===pe){me=me.next,pe===Nl&&(Ce=!0);continue}else _e={lane:0,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},K===null?(F=K=_e,D=T):K=K.next=_e,_t.lanes|=pe,_a|=pe;_e=me.action,Oo&&d(T,_e),T=me.hasEagerState?me.eagerState:d(T,_e)}else pe={lane:_e,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},K===null?(F=K=pe,D=T):K=K.next=pe,_t.lanes|=_e,_a|=_e;me=me.next}while(me!==null&&me!==a);if(K===null?D=T:K.next=F,!f(T,i.memoizedState)&&(ii=!0,Ce&&(d=Rl,d!==null)))throw d;i.memoizedState=T,i.baseState=D,i.baseQueue=K,m.lastRenderedState=T}return v===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function H0(i){var a=Vn(),d=a.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=i;var m=d.dispatch,v=d.pending,T=a.memoizedState;if(v!==null){d.pending=null;var D=v=v.next;do T=i(T,D.action),D=D.next;while(D!==v);f(T,a.memoizedState)||(ii=!0),a.memoizedState=T,a.baseQueue===null&&(a.baseState=T),d.lastRenderedState=T}return[T,m]}function cx(i,a,d){var m=_t,v=Vn(),T=Gt;if(T){if(d===void 0)throw Error(r(407));d=d()}else d=a();var D=!f((tn||v).memoizedState,d);D&&(v.memoizedState=d,ii=!0),v=v.queue;var F=fx.bind(null,m,v,i);if(au(2048,8,F,[i]),v.getSnapshot!==a||D||Fn!==null&&Fn.memoizedState.tag&1){if(m.flags|=2048,Dl(9,lf(),dx.bind(null,m,v,d,a),null),cn===null)throw Error(r(349));T||(wa&124)!==0||ux(m,a,d)}return d}function ux(i,a,d){i.flags|=16384,i={getSnapshot:a,value:d},a=_t.updateQueue,a===null?(a=U0(),_t.updateQueue=a,a.stores=[i]):(d=a.stores,d===null?a.stores=[i]:d.push(i))}function dx(i,a,d,m){a.value=d,a.getSnapshot=m,hx(a)&&gx(i)}function fx(i,a,d){return d(function(){hx(a)&&gx(i)})}function hx(i){var a=i.getSnapshot;i=i.value;try{var d=a();return!f(i,d)}catch{return!0}}function gx(i){var a=Cl(i,2);a!==null&&ss(a,i,2)}function z0(i){var a=Fi();if(typeof i=="function"){var d=i;if(i=d(),Oo){Lt(!0);try{d()}finally{Lt(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:i},a}function mx(i,a,d,m){return i.baseState=d,V0(i,tn,typeof m=="function"?m:jr)}function PC(i,a,d,m,v){if(uf(i))throw Error(r(485));if(i=a.action,i!==null){var T={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){T.listeners.push(D)}};ie.T!==null?d(!0):T.isTransition=!1,m(T),d=a.pending,d===null?(T.next=a.pending=T,px(a,T)):(T.next=d.next,a.pending=d.next=T)}}function px(i,a){var d=a.action,m=a.payload,v=i.state;if(a.isTransition){var T=ie.T,D={};ie.T=D;try{var F=d(v,m),K=ie.S;K!==null&&K(D,F),xx(i,a,F)}catch(me){$0(i,a,me)}finally{ie.T=T}}else try{T=d(v,m),xx(i,a,T)}catch(me){$0(i,a,me)}}function xx(i,a,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){yx(i,a,m)},function(m){return $0(i,a,m)}):yx(i,a,d)}function yx(i,a,d){a.status="fulfilled",a.value=d,bx(a),i.state=d,a=i.pending,a!==null&&(d=a.next,d===a?i.pending=null:(d=d.next,a.next=d,px(i,d)))}function $0(i,a,d){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do a.status="rejected",a.reason=d,bx(a),a=a.next;while(a!==m)}i.action=null}function bx(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function wx(i,a){return a}function vx(i,a){if(Gt){var d=cn.formState;if(d!==null){e:{var m=_t;if(Gt){if(Cn){t:{for(var v=Cn,T=or;v.nodeType!==8;){if(!T){v=null;break t}if(v=ks(v.nextSibling),v===null){v=null;break t}}T=v.data,v=T==="F!"||T==="F"?v:null}if(v){Cn=ks(v.nextSibling),m=v.data==="F!";break e}}To(m)}m=!1}m&&(a=d[0])}}return d=Fi(),d.memoizedState=d.baseState=a,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wx,lastRenderedState:a},d.queue=m,d=Fx.bind(null,_t,m),m.dispatch=d,m=z0(!1),T=W0.bind(null,_t,!1,m.queue),m=Fi(),v={state:a,dispatch:null,action:i,pending:null},m.queue=v,d=PC.bind(null,_t,v,T,d),v.dispatch=d,m.memoizedState=i,[a,d,!1]}function Sx(i){var a=Vn();return Ex(a,tn,i)}function Ex(i,a,d){if(a=V0(i,a,wx)[0],i=of(jr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var m=ru(a)}catch(D){throw D===Jc?ef:D}else m=a;a=Vn();var v=a.queue,T=v.dispatch;return d!==a.memoizedState&&(_t.flags|=2048,Dl(9,lf(),UC.bind(null,v,d),null)),[m,T,i]}function UC(i,a){i.action=a}function Cx(i){var a=Vn(),d=tn;if(d!==null)return Ex(a,d,i);Vn(),a=a.memoizedState,d=Vn();var m=d.queue.dispatch;return d.memoizedState=i,[a,m,!1]}function Dl(i,a,d,m){return i={tag:i,create:d,deps:m,inst:a,next:null},a=_t.updateQueue,a===null&&(a=U0(),_t.updateQueue=a),d=a.lastEffect,d===null?a.lastEffect=i.next=i:(m=d.next,d.next=i,i.next=m,a.lastEffect=i),i}function lf(){return{destroy:void 0,resource:void 0}}function Ax(){return Vn().memoizedState}function cf(i,a,d,m){var v=Fi();m=m===void 0?null:m,_t.flags|=i,v.memoizedState=Dl(1|a,lf(),d,m)}function au(i,a,d,m){var v=Vn();m=m===void 0?null:m;var T=v.memoizedState.inst;tn!==null&&m!==null&&L0(m,tn.memoizedState.deps)?v.memoizedState=Dl(a,T,d,m):(_t.flags|=i,v.memoizedState=Dl(1|a,T,d,m))}function Tx(i,a){cf(8390656,8,i,a)}function _x(i,a){au(2048,8,i,a)}function Nx(i,a){return au(4,2,i,a)}function Rx(i,a){return au(4,4,i,a)}function Ox(i,a){if(typeof a=="function"){i=i();var d=a(i);return function(){typeof d=="function"?d():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Ix(i,a,d){d=d!=null?d.concat([i]):null,au(4,4,Ox.bind(null,a,i),d)}function G0(){}function Mx(i,a){var d=Vn();a=a===void 0?null:a;var m=d.memoizedState;return a!==null&&L0(a,m[1])?m[0]:(d.memoizedState=[i,a],i)}function Dx(i,a){var d=Vn();a=a===void 0?null:a;var m=d.memoizedState;if(a!==null&&L0(a,m[1]))return m[0];if(m=i(),Oo){Lt(!0);try{i()}finally{Lt(!1)}}return d.memoizedState=[m,a],m}function q0(i,a,d){return d===void 0||(wa&1073741824)!==0?i.memoizedState=a:(i.memoizedState=d,i=jy(),_t.lanes|=i,_a|=i,d)}function Lx(i,a,d,m){return f(d,a)?d:Ol.current!==null?(i=q0(i,d,m),f(i,a)||(ii=!0),i):(wa&42)===0?(ii=!0,i.memoizedState=d):(i=jy(),_t.lanes|=i,_a|=i,a)}function kx(i,a,d,m,v){var T=le.p;le.p=T!==0&&8>T?T:8;var D=ie.T,F={};ie.T=F,W0(i,!1,a,d);try{var K=v(),me=ie.S;if(me!==null&&me(F,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var Ce=kC(K,m);ou(i,a,Ce,is(i))}else ou(i,a,m,is(i))}catch(_e){ou(i,a,{then:function(){},status:"rejected",reason:_e},is())}finally{le.p=T,ie.T=D}}function FC(){}function Y0(i,a,d,m){if(i.tag!==5)throw Error(r(476));var v=jx(i).queue;kx(i,v,a,De,d===null?FC:function(){return Bx(i),d(m)})}function jx(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:De,baseState:De,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:De},next:null};var d={};return a.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:d},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function Bx(i){var a=jx(i).next.queue;ou(i,a,{},is())}function X0(){return vi(Au)}function Px(){return Vn().memoizedState}function Ux(){return Vn().memoizedState}function VC(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var d=is();i=ya(d);var m=ba(a,i,d);m!==null&&(ss(m,a,d),tu(m,a,d)),a={cache:C0()},i.payload=a;return}a=a.return}}function HC(i,a,d){var m=is();d={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},uf(i)?Vx(a,d):(d=g0(i,a,d,m),d!==null&&(ss(d,i,m),Hx(d,a,m)))}function Fx(i,a,d){var m=is();ou(i,a,d,m)}function ou(i,a,d,m){var v={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(uf(i))Vx(a,v);else{var T=i.alternate;if(i.lanes===0&&(T===null||T.lanes===0)&&(T=a.lastRenderedReducer,T!==null))try{var D=a.lastRenderedState,F=T(D,d);if(v.hasEagerState=!0,v.eagerState=F,f(F,D))return qd(i,a,v,0),cn===null&&Gd(),!1}catch{}finally{}if(d=g0(i,a,v,m),d!==null)return ss(d,i,m),Hx(d,a,m),!0}return!1}function W0(i,a,d,m){if(m={lane:2,revertLane:_1(),action:m,hasEagerState:!1,eagerState:null,next:null},uf(i)){if(a)throw Error(r(479))}else a=g0(i,d,m,2),a!==null&&ss(a,i,2)}function uf(i){var a=i.alternate;return i===_t||a!==null&&a===_t}function Vx(i,a){Il=sf=!0;var d=i.pending;d===null?a.next=a:(a.next=d.next,d.next=a),i.pending=a}function Hx(i,a,d){if((d&4194048)!==0){var m=a.lanes;m&=i.pendingLanes,d|=m,a.lanes=d,ji(i,d)}}var df={readContext:vi,use:af,useCallback:Dn,useContext:Dn,useEffect:Dn,useImperativeHandle:Dn,useLayoutEffect:Dn,useInsertionEffect:Dn,useMemo:Dn,useReducer:Dn,useRef:Dn,useState:Dn,useDebugValue:Dn,useDeferredValue:Dn,useTransition:Dn,useSyncExternalStore:Dn,useId:Dn,useHostTransitionStatus:Dn,useFormState:Dn,useActionState:Dn,useOptimistic:Dn,useMemoCache:Dn,useCacheRefresh:Dn},zx={readContext:vi,use:af,useCallback:function(i,a){return Fi().memoizedState=[i,a===void 0?null:a],i},useContext:vi,useEffect:Tx,useImperativeHandle:function(i,a,d){d=d!=null?d.concat([i]):null,cf(4194308,4,Ox.bind(null,a,i),d)},useLayoutEffect:function(i,a){return cf(4194308,4,i,a)},useInsertionEffect:function(i,a){cf(4,2,i,a)},useMemo:function(i,a){var d=Fi();a=a===void 0?null:a;var m=i();if(Oo){Lt(!0);try{i()}finally{Lt(!1)}}return d.memoizedState=[m,a],m},useReducer:function(i,a,d){var m=Fi();if(d!==void 0){var v=d(a);if(Oo){Lt(!0);try{d(a)}finally{Lt(!1)}}}else v=a;return m.memoizedState=m.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},m.queue=i,i=i.dispatch=HC.bind(null,_t,i),[m.memoizedState,i]},useRef:function(i){var a=Fi();return i={current:i},a.memoizedState=i},useState:function(i){i=z0(i);var a=i.queue,d=Fx.bind(null,_t,a);return a.dispatch=d,[i.memoizedState,d]},useDebugValue:G0,useDeferredValue:function(i,a){var d=Fi();return q0(d,i,a)},useTransition:function(){var i=z0(!1);return i=kx.bind(null,_t,i.queue,!0,!1),Fi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,d){var m=_t,v=Fi();if(Gt){if(d===void 0)throw Error(r(407));d=d()}else{if(d=a(),cn===null)throw Error(r(349));(Ft&124)!==0||ux(m,a,d)}v.memoizedState=d;var T={value:d,getSnapshot:a};return v.queue=T,Tx(fx.bind(null,m,T,i),[i]),m.flags|=2048,Dl(9,lf(),dx.bind(null,m,T,d,a),null),d},useId:function(){var i=Fi(),a=cn.identifierPrefix;if(Gt){var d=Dr,m=Mr;d=(m&~(1<<32-tt(m)-1)).toString(32)+d,a=""+a+"R"+d,d=rf++,0<d&&(a+="H"+d.toString(32)),a+=""}else d=jC++,a=""+a+"r"+d.toString(32)+"";return i.memoizedState=a},useHostTransitionStatus:X0,useFormState:vx,useActionState:vx,useOptimistic:function(i){var a=Fi();a.memoizedState=a.baseState=i;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=d,a=W0.bind(null,_t,!0,d),d.dispatch=a,[i,a]},useMemoCache:F0,useCacheRefresh:function(){return Fi().memoizedState=VC.bind(null,_t)}},$x={readContext:vi,use:af,useCallback:Mx,useContext:vi,useEffect:_x,useImperativeHandle:Ix,useInsertionEffect:Nx,useLayoutEffect:Rx,useMemo:Dx,useReducer:of,useRef:Ax,useState:function(){return of(jr)},useDebugValue:G0,useDeferredValue:function(i,a){var d=Vn();return Lx(d,tn.memoizedState,i,a)},useTransition:function(){var i=of(jr)[0],a=Vn().memoizedState;return[typeof i=="boolean"?i:ru(i),a]},useSyncExternalStore:cx,useId:Px,useHostTransitionStatus:X0,useFormState:Sx,useActionState:Sx,useOptimistic:function(i,a){var d=Vn();return mx(d,tn,i,a)},useMemoCache:F0,useCacheRefresh:Ux},zC={readContext:vi,use:af,useCallback:Mx,useContext:vi,useEffect:_x,useImperativeHandle:Ix,useInsertionEffect:Nx,useLayoutEffect:Rx,useMemo:Dx,useReducer:H0,useRef:Ax,useState:function(){return H0(jr)},useDebugValue:G0,useDeferredValue:function(i,a){var d=Vn();return tn===null?q0(d,i,a):Lx(d,tn.memoizedState,i,a)},useTransition:function(){var i=H0(jr)[0],a=Vn().memoizedState;return[typeof i=="boolean"?i:ru(i),a]},useSyncExternalStore:cx,useId:Px,useHostTransitionStatus:X0,useFormState:Cx,useActionState:Cx,useOptimistic:function(i,a){var d=Vn();return tn!==null?mx(d,tn,i,a):(d.baseState=i,[i,d.queue.dispatch])},useMemoCache:F0,useCacheRefresh:Ux},Ll=null,lu=0;function ff(i){var a=lu;return lu+=1,Ll===null&&(Ll=[]),tx(Ll,i,a)}function cu(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function hf(i,a){throw a.$$typeof===A?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Gx(i){var a=i._init;return a(i._payload)}function qx(i){function a(ae,ne){if(i){var ge=ae.deletions;ge===null?(ae.deletions=[ne],ae.flags|=16):ge.push(ne)}}function d(ae,ne){if(!i)return null;for(;ne!==null;)a(ae,ne),ne=ne.sibling;return null}function m(ae){for(var ne=new Map;ae!==null;)ae.key!==null?ne.set(ae.key,ae):ne.set(ae.index,ae),ae=ae.sibling;return ne}function v(ae,ne){return ae=Ir(ae,ne),ae.index=0,ae.sibling=null,ae}function T(ae,ne,ge){return ae.index=ge,i?(ge=ae.alternate,ge!==null?(ge=ge.index,ge<ne?(ae.flags|=67108866,ne):ge):(ae.flags|=67108866,ne)):(ae.flags|=1048576,ne)}function D(ae){return i&&ae.alternate===null&&(ae.flags|=67108866),ae}function F(ae,ne,ge,Te){return ne===null||ne.tag!==6?(ne=p0(ge,ae.mode,Te),ne.return=ae,ne):(ne=v(ne,ge),ne.return=ae,ne)}function K(ae,ne,ge,Te){var Xe=ge.type;return Xe===M?Ce(ae,ne,ge.props.children,Te,ge.key):ne!==null&&(ne.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===oe&&Gx(Xe)===ne.type)?(ne=v(ne,ge.props),cu(ne,ge),ne.return=ae,ne):(ne=Xd(ge.type,ge.key,ge.props,null,ae.mode,Te),cu(ne,ge),ne.return=ae,ne)}function me(ae,ne,ge,Te){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ge.containerInfo||ne.stateNode.implementation!==ge.implementation?(ne=x0(ge,ae.mode,Te),ne.return=ae,ne):(ne=v(ne,ge.children||[]),ne.return=ae,ne)}function Ce(ae,ne,ge,Te,Xe){return ne===null||ne.tag!==7?(ne=So(ge,ae.mode,Te,Xe),ne.return=ae,ne):(ne=v(ne,ge),ne.return=ae,ne)}function _e(ae,ne,ge){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=p0(""+ne,ae.mode,ge),ne.return=ae,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case N:return ge=Xd(ne.type,ne.key,ne.props,null,ae.mode,ge),cu(ge,ne),ge.return=ae,ge;case I:return ne=x0(ne,ae.mode,ge),ne.return=ae,ne;case oe:var Te=ne._init;return ne=Te(ne._payload),_e(ae,ne,ge)}if(re(ne)||Ee(ne))return ne=So(ne,ae.mode,ge,null),ne.return=ae,ne;if(typeof ne.then=="function")return _e(ae,ff(ne),ge);if(ne.$$typeof===B)return _e(ae,Qd(ae,ne),ge);hf(ae,ne)}return null}function pe(ae,ne,ge,Te){var Xe=ne!==null?ne.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Xe!==null?null:F(ae,ne,""+ge,Te);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case N:return ge.key===Xe?K(ae,ne,ge,Te):null;case I:return ge.key===Xe?me(ae,ne,ge,Te):null;case oe:return Xe=ge._init,ge=Xe(ge._payload),pe(ae,ne,ge,Te)}if(re(ge)||Ee(ge))return Xe!==null?null:Ce(ae,ne,ge,Te,null);if(typeof ge.then=="function")return pe(ae,ne,ff(ge),Te);if(ge.$$typeof===B)return pe(ae,ne,Qd(ae,ge),Te);hf(ae,ge)}return null}function ye(ae,ne,ge,Te,Xe){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return ae=ae.get(ge)||null,F(ne,ae,""+Te,Xe);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case N:return ae=ae.get(Te.key===null?ge:Te.key)||null,K(ne,ae,Te,Xe);case I:return ae=ae.get(Te.key===null?ge:Te.key)||null,me(ne,ae,Te,Xe);case oe:var Nt=Te._init;return Te=Nt(Te._payload),ye(ae,ne,ge,Te,Xe)}if(re(Te)||Ee(Te))return ae=ae.get(ge)||null,Ce(ne,ae,Te,Xe,null);if(typeof Te.then=="function")return ye(ae,ne,ge,ff(Te),Xe);if(Te.$$typeof===B)return ye(ae,ne,ge,Qd(ne,Te),Xe);hf(ne,Te)}return null}function ct(ae,ne,ge,Te){for(var Xe=null,Nt=null,et=ne,ot=ne=0,ri=null;et!==null&&ot<ge.length;ot++){et.index>ot?(ri=et,et=null):ri=et.sibling;var zt=pe(ae,et,ge[ot],Te);if(zt===null){et===null&&(et=ri);break}i&&et&&zt.alternate===null&&a(ae,et),ne=T(zt,ne,ot),Nt===null?Xe=zt:Nt.sibling=zt,Nt=zt,et=ri}if(ot===ge.length)return d(ae,et),Gt&&Co(ae,ot),Xe;if(et===null){for(;ot<ge.length;ot++)et=_e(ae,ge[ot],Te),et!==null&&(ne=T(et,ne,ot),Nt===null?Xe=et:Nt.sibling=et,Nt=et);return Gt&&Co(ae,ot),Xe}for(et=m(et);ot<ge.length;ot++)ri=ye(et,ae,ot,ge[ot],Te),ri!==null&&(i&&ri.alternate!==null&&et.delete(ri.key===null?ot:ri.key),ne=T(ri,ne,ot),Nt===null?Xe=ri:Nt.sibling=ri,Nt=ri);return i&&et.forEach(function(ja){return a(ae,ja)}),Gt&&Co(ae,ot),Xe}function rt(ae,ne,ge,Te){if(ge==null)throw Error(r(151));for(var Xe=null,Nt=null,et=ne,ot=ne=0,ri=null,zt=ge.next();et!==null&&!zt.done;ot++,zt=ge.next()){et.index>ot?(ri=et,et=null):ri=et.sibling;var ja=pe(ae,et,zt.value,Te);if(ja===null){et===null&&(et=ri);break}i&&et&&ja.alternate===null&&a(ae,et),ne=T(ja,ne,ot),Nt===null?Xe=ja:Nt.sibling=ja,Nt=ja,et=ri}if(zt.done)return d(ae,et),Gt&&Co(ae,ot),Xe;if(et===null){for(;!zt.done;ot++,zt=ge.next())zt=_e(ae,zt.value,Te),zt!==null&&(ne=T(zt,ne,ot),Nt===null?Xe=zt:Nt.sibling=zt,Nt=zt);return Gt&&Co(ae,ot),Xe}for(et=m(et);!zt.done;ot++,zt=ge.next())zt=ye(et,ae,ot,zt.value,Te),zt!==null&&(i&&zt.alternate!==null&&et.delete(zt.key===null?ot:zt.key),ne=T(zt,ne,ot),Nt===null?Xe=zt:Nt.sibling=zt,Nt=zt);return i&&et.forEach(function($A){return a(ae,$A)}),Gt&&Co(ae,ot),Xe}function sn(ae,ne,ge,Te){if(typeof ge=="object"&&ge!==null&&ge.type===M&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case N:e:{for(var Xe=ge.key;ne!==null;){if(ne.key===Xe){if(Xe=ge.type,Xe===M){if(ne.tag===7){d(ae,ne.sibling),Te=v(ne,ge.props.children),Te.return=ae,ae=Te;break e}}else if(ne.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===oe&&Gx(Xe)===ne.type){d(ae,ne.sibling),Te=v(ne,ge.props),cu(Te,ge),Te.return=ae,ae=Te;break e}d(ae,ne);break}else a(ae,ne);ne=ne.sibling}ge.type===M?(Te=So(ge.props.children,ae.mode,Te,ge.key),Te.return=ae,ae=Te):(Te=Xd(ge.type,ge.key,ge.props,null,ae.mode,Te),cu(Te,ge),Te.return=ae,ae=Te)}return D(ae);case I:e:{for(Xe=ge.key;ne!==null;){if(ne.key===Xe)if(ne.tag===4&&ne.stateNode.containerInfo===ge.containerInfo&&ne.stateNode.implementation===ge.implementation){d(ae,ne.sibling),Te=v(ne,ge.children||[]),Te.return=ae,ae=Te;break e}else{d(ae,ne);break}else a(ae,ne);ne=ne.sibling}Te=x0(ge,ae.mode,Te),Te.return=ae,ae=Te}return D(ae);case oe:return Xe=ge._init,ge=Xe(ge._payload),sn(ae,ne,ge,Te)}if(re(ge))return ct(ae,ne,ge,Te);if(Ee(ge)){if(Xe=Ee(ge),typeof Xe!="function")throw Error(r(150));return ge=Xe.call(ge),rt(ae,ne,ge,Te)}if(typeof ge.then=="function")return sn(ae,ne,ff(ge),Te);if(ge.$$typeof===B)return sn(ae,ne,Qd(ae,ge),Te);hf(ae,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,ne!==null&&ne.tag===6?(d(ae,ne.sibling),Te=v(ne,ge),Te.return=ae,ae=Te):(d(ae,ne),Te=p0(ge,ae.mode,Te),Te.return=ae,ae=Te),D(ae)):d(ae,ne)}return function(ae,ne,ge,Te){try{lu=0;var Xe=sn(ae,ne,ge,Te);return Ll=null,Xe}catch(et){if(et===Jc||et===ef)throw et;var Nt=Ji(29,et,null,ae.mode);return Nt.lanes=Te,Nt.return=ae,Nt}finally{}}}var kl=qx(!0),Yx=qx(!1),ps=Z(null),lr=null;function va(i){var a=i.alternate;se(Kn,Kn.current&1),se(ps,i),lr===null&&(a===null||Ol.current!==null||a.memoizedState!==null)&&(lr=i)}function Xx(i){if(i.tag===22){if(se(Kn,Kn.current),se(ps,i),lr===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(lr=i)}}else Sa()}function Sa(){se(Kn,Kn.current),se(ps,ps.current)}function Br(i){ce(ps),lr===i&&(lr=null),ce(Kn)}var Kn=Z(0);function gf(i){for(var a=i;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||U1(d)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function K0(i,a,d,m){a=i.memoizedState,d=d(m,a),d=d==null?a:S({},a,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var Z0={enqueueSetState:function(i,a,d){i=i._reactInternals;var m=is(),v=ya(m);v.payload=a,d!=null&&(v.callback=d),a=ba(i,v,m),a!==null&&(ss(a,i,m),tu(a,i,m))},enqueueReplaceState:function(i,a,d){i=i._reactInternals;var m=is(),v=ya(m);v.tag=1,v.payload=a,d!=null&&(v.callback=d),a=ba(i,v,m),a!==null&&(ss(a,i,m),tu(a,i,m))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var d=is(),m=ya(d);m.tag=2,a!=null&&(m.callback=a),a=ba(i,m,d),a!==null&&(ss(a,i,d),tu(a,i,d))}};function Wx(i,a,d,m,v,T,D){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,T,D):a.prototype&&a.prototype.isPureReactComponent?!h(d,m)||!h(v,T):!0}function Kx(i,a,d,m){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,m),a.state!==i&&Z0.enqueueReplaceState(a,a.state,null)}function Io(i,a){var d=a;if("ref"in a){d={};for(var m in a)m!=="ref"&&(d[m]=a[m])}if(i=i.defaultProps){d===a&&(d=S({},d));for(var v in i)d[v]===void 0&&(d[v]=i[v])}return d}var mf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Zx(i){mf(i)}function Qx(i){console.error(i)}function Jx(i){mf(i)}function pf(i,a){try{var d=i.onUncaughtError;d(a.value,{componentStack:a.stack})}catch(m){setTimeout(function(){throw m})}}function ey(i,a,d){try{var m=i.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Q0(i,a,d){return d=ya(d),d.tag=3,d.payload={element:null},d.callback=function(){pf(i,a)},d}function ty(i){return i=ya(i),i.tag=3,i}function ny(i,a,d,m){var v=d.type.getDerivedStateFromError;if(typeof v=="function"){var T=m.value;i.payload=function(){return v(T)},i.callback=function(){ey(a,d,m)}}var D=d.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(i.callback=function(){ey(a,d,m),typeof v!="function"&&(Na===null?Na=new Set([this]):Na.add(this));var F=m.stack;this.componentDidCatch(m.value,{componentStack:F!==null?F:""})})}function $C(i,a,d,m,v){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(a=d.alternate,a!==null&&Kc(a,d,v,!0),d=ps.current,d!==null){switch(d.tag){case 13:return lr===null?S1():d.alternate===null&&An===0&&(An=3),d.flags&=-257,d.flags|=65536,d.lanes=v,m===_0?d.flags|=16384:(a=d.updateQueue,a===null?d.updateQueue=new Set([m]):a.add(m),C1(i,m,v)),!1;case 22:return d.flags|=65536,m===_0?d.flags|=16384:(a=d.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=a):(d=a.retryQueue,d===null?a.retryQueue=new Set([m]):d.add(m)),C1(i,m,v)),!1}throw Error(r(435,d.tag))}return C1(i,m,v),S1(),!1}if(Gt)return a=ps.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=v,m!==w0&&(i=Error(r(422),{cause:m}),Wc(fs(i,d)))):(m!==w0&&(a=Error(r(423),{cause:m}),Wc(fs(a,d))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,m=fs(m,d),v=Q0(i.stateNode,m,v),O0(i,v),An!==4&&(An=2)),!1;var T=Error(r(520),{cause:m});if(T=fs(T,d),pu===null?pu=[T]:pu.push(T),An!==4&&(An=2),a===null)return!0;m=fs(m,d),d=a;do{switch(d.tag){case 3:return d.flags|=65536,i=v&-v,d.lanes|=i,i=Q0(d.stateNode,m,i),O0(d,i),!1;case 1:if(a=d.type,T=d.stateNode,(d.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Na===null||!Na.has(T))))return d.flags|=65536,v&=-v,d.lanes|=v,v=ty(v),ny(v,i,d,m),O0(d,v),!1}d=d.return}while(d!==null);return!1}var iy=Error(r(461)),ii=!1;function di(i,a,d,m){a.child=i===null?Yx(a,null,d,m):kl(a,i.child,d,m)}function sy(i,a,d,m,v){d=d.render;var T=a.ref;if("ref"in m){var D={};for(var F in m)F!=="ref"&&(D[F]=m[F])}else D=m;return No(a),m=k0(i,a,d,D,T,v),F=j0(),i!==null&&!ii?(B0(i,a,v),Pr(i,a,v)):(Gt&&F&&y0(a),a.flags|=1,di(i,a,m,v),a.child)}function ry(i,a,d,m,v){if(i===null){var T=d.type;return typeof T=="function"&&!m0(T)&&T.defaultProps===void 0&&d.compare===null?(a.tag=15,a.type=T,ay(i,a,T,m,v)):(i=Xd(d.type,null,m,a,a.mode,v),i.ref=a.ref,i.return=a,a.child=i)}if(T=i.child,!a1(i,v)){var D=T.memoizedProps;if(d=d.compare,d=d!==null?d:h,d(D,m)&&i.ref===a.ref)return Pr(i,a,v)}return a.flags|=1,i=Ir(T,m),i.ref=a.ref,i.return=a,a.child=i}function ay(i,a,d,m,v){if(i!==null){var T=i.memoizedProps;if(h(T,m)&&i.ref===a.ref)if(ii=!1,a.pendingProps=m=T,a1(i,v))(i.flags&131072)!==0&&(ii=!0);else return a.lanes=i.lanes,Pr(i,a,v)}return J0(i,a,d,m,v)}function oy(i,a,d){var m=a.pendingProps,v=m.children,T=i!==null?i.memoizedState:null;if(m.mode==="hidden"){if((a.flags&128)!==0){if(m=T!==null?T.baseLanes|d:d,i!==null){for(v=a.child=i.child,T=0;v!==null;)T=T|v.lanes|v.childLanes,v=v.sibling;a.childLanes=T&~m}else a.childLanes=0,a.child=null;return ly(i,a,m,d)}if((d&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Jd(a,T!==null?T.cachePool:null),T!==null?ax(a,T):M0(),Xx(a);else return a.lanes=a.childLanes=536870912,ly(i,a,T!==null?T.baseLanes|d:d,d)}else T!==null?(Jd(a,T.cachePool),ax(a,T),Sa(),a.memoizedState=null):(i!==null&&Jd(a,null),M0(),Sa());return di(i,a,v,d),a.child}function ly(i,a,d,m){var v=T0();return v=v===null?null:{parent:Wn._currentValue,pool:v},a.memoizedState={baseLanes:d,cachePool:v},i!==null&&Jd(a,null),M0(),Xx(a),i!==null&&Kc(i,a,m,!0),null}function xf(i,a){var d=a.ref;if(d===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(i===null||i.ref!==d)&&(a.flags|=4194816)}}function J0(i,a,d,m,v){return No(a),d=k0(i,a,d,m,void 0,v),m=j0(),i!==null&&!ii?(B0(i,a,v),Pr(i,a,v)):(Gt&&m&&y0(a),a.flags|=1,di(i,a,d,v),a.child)}function cy(i,a,d,m,v,T){return No(a),a.updateQueue=null,d=lx(a,m,d,v),ox(i),m=j0(),i!==null&&!ii?(B0(i,a,T),Pr(i,a,T)):(Gt&&m&&y0(a),a.flags|=1,di(i,a,d,T),a.child)}function uy(i,a,d,m,v){if(No(a),a.stateNode===null){var T=Al,D=d.contextType;typeof D=="object"&&D!==null&&(T=vi(D)),T=new d(m,T),a.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Z0,a.stateNode=T,T._reactInternals=a,T=a.stateNode,T.props=m,T.state=a.memoizedState,T.refs={},N0(a),D=d.contextType,T.context=typeof D=="object"&&D!==null?vi(D):Al,T.state=a.memoizedState,D=d.getDerivedStateFromProps,typeof D=="function"&&(K0(a,d,D,m),T.state=a.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(D=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),D!==T.state&&Z0.enqueueReplaceState(T,T.state,null),iu(a,m,T,v),nu(),T.state=a.memoizedState),typeof T.componentDidMount=="function"&&(a.flags|=4194308),m=!0}else if(i===null){T=a.stateNode;var F=a.memoizedProps,K=Io(d,F);T.props=K;var me=T.context,Ce=d.contextType;D=Al,typeof Ce=="object"&&Ce!==null&&(D=vi(Ce));var _e=d.getDerivedStateFromProps;Ce=typeof _e=="function"||typeof T.getSnapshotBeforeUpdate=="function",F=a.pendingProps!==F,Ce||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(F||me!==D)&&Kx(a,T,m,D),xa=!1;var pe=a.memoizedState;T.state=pe,iu(a,m,T,v),nu(),me=a.memoizedState,F||pe!==me||xa?(typeof _e=="function"&&(K0(a,d,_e,m),me=a.memoizedState),(K=xa||Wx(a,d,K,m,pe,me,D))?(Ce||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=me),T.props=m,T.state=me,T.context=D,m=K):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{T=a.stateNode,R0(i,a),D=a.memoizedProps,Ce=Io(d,D),T.props=Ce,_e=a.pendingProps,pe=T.context,me=d.contextType,K=Al,typeof me=="object"&&me!==null&&(K=vi(me)),F=d.getDerivedStateFromProps,(me=typeof F=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==_e||pe!==K)&&Kx(a,T,m,K),xa=!1,pe=a.memoizedState,T.state=pe,iu(a,m,T,v),nu();var ye=a.memoizedState;D!==_e||pe!==ye||xa||i!==null&&i.dependencies!==null&&Zd(i.dependencies)?(typeof F=="function"&&(K0(a,d,F,m),ye=a.memoizedState),(Ce=xa||Wx(a,d,Ce,m,pe,ye,K)||i!==null&&i.dependencies!==null&&Zd(i.dependencies))?(me||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(m,ye,K),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(m,ye,K)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||D===i.memoizedProps&&pe===i.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&pe===i.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=ye),T.props=m,T.state=ye,T.context=K,m=Ce):(typeof T.componentDidUpdate!="function"||D===i.memoizedProps&&pe===i.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&pe===i.memoizedState||(a.flags|=1024),m=!1)}return T=m,xf(i,a),m=(a.flags&128)!==0,T||m?(T=a.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:T.render(),a.flags|=1,i!==null&&m?(a.child=kl(a,i.child,null,v),a.child=kl(a,null,d,v)):di(i,a,d,v),a.memoizedState=T.state,i=a.child):i=Pr(i,a,v),i}function dy(i,a,d,m){return Xc(),a.flags|=256,di(i,a,d,m),a.child}var e1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function t1(i){return{baseLanes:i,cachePool:Qp()}}function n1(i,a,d){return i=i!==null?i.childLanes&~d:0,a&&(i|=xs),i}function fy(i,a,d){var m=a.pendingProps,v=!1,T=(a.flags&128)!==0,D;if((D=T)||(D=i!==null&&i.memoizedState===null?!1:(Kn.current&2)!==0),D&&(v=!0,a.flags&=-129),D=(a.flags&32)!==0,a.flags&=-33,i===null){if(Gt){if(v?va(a):Sa(),Gt){var F=Cn,K;if(K=F){e:{for(K=F,F=or;K.nodeType!==8;){if(!F){F=null;break e}if(K=ks(K.nextSibling),K===null){F=null;break e}}F=K}F!==null?(a.memoizedState={dehydrated:F,treeContext:Eo!==null?{id:Mr,overflow:Dr}:null,retryLane:536870912,hydrationErrors:null},K=Ji(18,null,null,0),K.stateNode=F,K.return=a,a.child=K,Oi=a,Cn=null,K=!0):K=!1}K||To(a)}if(F=a.memoizedState,F!==null&&(F=F.dehydrated,F!==null))return U1(F)?a.lanes=32:a.lanes=536870912,null;Br(a)}return F=m.children,m=m.fallback,v?(Sa(),v=a.mode,F=yf({mode:"hidden",children:F},v),m=So(m,v,d,null),F.return=a,m.return=a,F.sibling=m,a.child=F,v=a.child,v.memoizedState=t1(d),v.childLanes=n1(i,D,d),a.memoizedState=e1,m):(va(a),i1(a,F))}if(K=i.memoizedState,K!==null&&(F=K.dehydrated,F!==null)){if(T)a.flags&256?(va(a),a.flags&=-257,a=s1(i,a,d)):a.memoizedState!==null?(Sa(),a.child=i.child,a.flags|=128,a=null):(Sa(),v=m.fallback,F=a.mode,m=yf({mode:"visible",children:m.children},F),v=So(v,F,d,null),v.flags|=2,m.return=a,v.return=a,m.sibling=v,a.child=m,kl(a,i.child,null,d),m=a.child,m.memoizedState=t1(d),m.childLanes=n1(i,D,d),a.memoizedState=e1,a=v);else if(va(a),U1(F)){if(D=F.nextSibling&&F.nextSibling.dataset,D)var me=D.dgst;D=me,m=Error(r(419)),m.stack="",m.digest=D,Wc({value:m,source:null,stack:null}),a=s1(i,a,d)}else if(ii||Kc(i,a,d,!1),D=(d&i.childLanes)!==0,ii||D){if(D=cn,D!==null&&(m=d&-d,m=(m&42)!==0?1:uo(m),m=(m&(D.suspendedLanes|d))!==0?0:m,m!==0&&m!==K.retryLane))throw K.retryLane=m,Cl(i,m),ss(D,i,m),iy;F.data==="$?"||S1(),a=s1(i,a,d)}else F.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=K.treeContext,Cn=ks(F.nextSibling),Oi=a,Gt=!0,Ao=null,or=!1,i!==null&&(gs[ms++]=Mr,gs[ms++]=Dr,gs[ms++]=Eo,Mr=i.id,Dr=i.overflow,Eo=a),a=i1(a,m.children),a.flags|=4096);return a}return v?(Sa(),v=m.fallback,F=a.mode,K=i.child,me=K.sibling,m=Ir(K,{mode:"hidden",children:m.children}),m.subtreeFlags=K.subtreeFlags&65011712,me!==null?v=Ir(me,v):(v=So(v,F,d,null),v.flags|=2),v.return=a,m.return=a,m.sibling=v,a.child=m,m=v,v=a.child,F=i.child.memoizedState,F===null?F=t1(d):(K=F.cachePool,K!==null?(me=Wn._currentValue,K=K.parent!==me?{parent:me,pool:me}:K):K=Qp(),F={baseLanes:F.baseLanes|d,cachePool:K}),v.memoizedState=F,v.childLanes=n1(i,D,d),a.memoizedState=e1,m):(va(a),d=i.child,i=d.sibling,d=Ir(d,{mode:"visible",children:m.children}),d.return=a,d.sibling=null,i!==null&&(D=a.deletions,D===null?(a.deletions=[i],a.flags|=16):D.push(i)),a.child=d,a.memoizedState=null,d)}function i1(i,a){return a=yf({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function yf(i,a){return i=Ji(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function s1(i,a,d){return kl(a,i.child,null,d),i=i1(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function hy(i,a,d){i.lanes|=a;var m=i.alternate;m!==null&&(m.lanes|=a),S0(i.return,a,d)}function r1(i,a,d,m,v){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:v}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=d,T.tailMode=v)}function gy(i,a,d){var m=a.pendingProps,v=m.revealOrder,T=m.tail;if(di(i,a,m.children,d),m=Kn.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&hy(i,d,a);else if(i.tag===19)hy(i,d,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}switch(se(Kn,m),v){case"forwards":for(d=a.child,v=null;d!==null;)i=d.alternate,i!==null&&gf(i)===null&&(v=d),d=d.sibling;d=v,d===null?(v=a.child,a.child=null):(v=d.sibling,d.sibling=null),r1(a,!1,v,d,T);break;case"backwards":for(d=null,v=a.child,a.child=null;v!==null;){if(i=v.alternate,i!==null&&gf(i)===null){a.child=v;break}i=v.sibling,v.sibling=d,d=v,v=i}r1(a,!0,d,null,T);break;case"together":r1(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Pr(i,a,d){if(i!==null&&(a.dependencies=i.dependencies),_a|=a.lanes,(d&a.childLanes)===0)if(i!==null){if(Kc(i,a,d,!1),(d&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,d=Ir(i,i.pendingProps),a.child=d,d.return=a;i.sibling!==null;)i=i.sibling,d=d.sibling=Ir(i,i.pendingProps),d.return=a;d.sibling=null}return a.child}function a1(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Zd(i)))}function GC(i,a,d){switch(a.tag){case 3:ve(a,a.stateNode.containerInfo),pa(a,Wn,i.memoizedState.cache),Xc();break;case 27:case 5:at(a);break;case 4:ve(a,a.stateNode.containerInfo);break;case 10:pa(a,a.type,a.memoizedProps.value);break;case 13:var m=a.memoizedState;if(m!==null)return m.dehydrated!==null?(va(a),a.flags|=128,null):(d&a.child.childLanes)!==0?fy(i,a,d):(va(a),i=Pr(i,a,d),i!==null?i.sibling:null);va(a);break;case 19:var v=(i.flags&128)!==0;if(m=(d&a.childLanes)!==0,m||(Kc(i,a,d,!1),m=(d&a.childLanes)!==0),v){if(m)return gy(i,a,d);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),se(Kn,Kn.current),m)break;return null;case 22:case 23:return a.lanes=0,oy(i,a,d);case 24:pa(a,Wn,i.memoizedState.cache)}return Pr(i,a,d)}function my(i,a,d){if(i!==null)if(i.memoizedProps!==a.pendingProps)ii=!0;else{if(!a1(i,d)&&(a.flags&128)===0)return ii=!1,GC(i,a,d);ii=(i.flags&131072)!==0}else ii=!1,Gt&&(a.flags&1048576)!==0&&Gp(a,Kd,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var m=a.elementType,v=m._init;if(m=v(m._payload),a.type=m,typeof m=="function")m0(m)?(i=Io(m,i),a.tag=1,a=uy(null,a,m,i,d)):(a.tag=0,a=J0(null,a,m,i,d));else{if(m!=null){if(v=m.$$typeof,v===V){a.tag=11,a=sy(null,a,m,i,d);break e}else if(v===X){a.tag=14,a=ry(null,a,m,i,d);break e}}throw a=Oe(m)||m,Error(r(306,a,""))}}return a;case 0:return J0(i,a,a.type,a.pendingProps,d);case 1:return m=a.type,v=Io(m,a.pendingProps),uy(i,a,m,v,d);case 3:e:{if(ve(a,a.stateNode.containerInfo),i===null)throw Error(r(387));m=a.pendingProps;var T=a.memoizedState;v=T.element,R0(i,a),iu(a,m,null,d);var D=a.memoizedState;if(m=D.cache,pa(a,Wn,m),m!==T.cache&&E0(a,[Wn],d,!0),nu(),m=D.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:D.cache},a.updateQueue.baseState=T,a.memoizedState=T,a.flags&256){a=dy(i,a,m,d);break e}else if(m!==v){v=fs(Error(r(424)),a),Wc(v),a=dy(i,a,m,d);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Cn=ks(i.firstChild),Oi=a,Gt=!0,Ao=null,or=!0,d=Yx(a,null,m,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Xc(),m===v){a=Pr(i,a,d);break e}di(i,a,m,d)}a=a.child}return a;case 26:return xf(i,a),i===null?(d=b2(a.type,null,a.pendingProps,null))?a.memoizedState=d:Gt||(d=a.type,i=a.pendingProps,m=Mf(Se.current).createElement(d),m[ei]=a,m[vn]=i,hi(m,d,i),Wt(m),a.stateNode=m):a.memoizedState=b2(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return at(a),i===null&&Gt&&(m=a.stateNode=p2(a.type,a.pendingProps,Se.current),Oi=a,or=!0,v=Cn,Ia(a.type)?(F1=v,Cn=ks(m.firstChild)):Cn=v),di(i,a,a.pendingProps.children,d),xf(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Gt&&((v=m=Cn)&&(m=bA(m,a.type,a.pendingProps,or),m!==null?(a.stateNode=m,Oi=a,Cn=ks(m.firstChild),or=!1,v=!0):v=!1),v||To(a)),at(a),v=a.type,T=a.pendingProps,D=i!==null?i.memoizedProps:null,m=T.children,j1(v,T)?m=null:D!==null&&j1(v,D)&&(a.flags|=32),a.memoizedState!==null&&(v=k0(i,a,BC,null,null,d),Au._currentValue=v),xf(i,a),di(i,a,m,d),a.child;case 6:return i===null&&Gt&&((i=d=Cn)&&(d=wA(d,a.pendingProps,or),d!==null?(a.stateNode=d,Oi=a,Cn=null,i=!0):i=!1),i||To(a)),null;case 13:return fy(i,a,d);case 4:return ve(a,a.stateNode.containerInfo),m=a.pendingProps,i===null?a.child=kl(a,null,m,d):di(i,a,m,d),a.child;case 11:return sy(i,a,a.type,a.pendingProps,d);case 7:return di(i,a,a.pendingProps,d),a.child;case 8:return di(i,a,a.pendingProps.children,d),a.child;case 12:return di(i,a,a.pendingProps.children,d),a.child;case 10:return m=a.pendingProps,pa(a,a.type,m.value),di(i,a,m.children,d),a.child;case 9:return v=a.type._context,m=a.pendingProps.children,No(a),v=vi(v),m=m(v),a.flags|=1,di(i,a,m,d),a.child;case 14:return ry(i,a,a.type,a.pendingProps,d);case 15:return ay(i,a,a.type,a.pendingProps,d);case 19:return gy(i,a,d);case 31:return m=a.pendingProps,d=a.mode,m={mode:m.mode,children:m.children},i===null?(d=yf(m,d),d.ref=a.ref,a.child=d,d.return=a,a=d):(d=Ir(i.child,m),d.ref=a.ref,a.child=d,d.return=a,a=d),a;case 22:return oy(i,a,d);case 24:return No(a),m=vi(Wn),i===null?(v=T0(),v===null&&(v=cn,T=C0(),v.pooledCache=T,T.refCount++,T!==null&&(v.pooledCacheLanes|=d),v=T),a.memoizedState={parent:m,cache:v},N0(a),pa(a,Wn,v)):((i.lanes&d)!==0&&(R0(i,a),iu(a,null,null,d),nu()),v=i.memoizedState,T=a.memoizedState,v.parent!==m?(v={parent:m,cache:m},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),pa(a,Wn,m)):(m=T.cache,pa(a,Wn,m),m!==v.cache&&E0(a,[Wn],d,!0))),di(i,a,a.pendingProps.children,d),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Ur(i){i.flags|=4}function py(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!C2(a)){if(a=ps.current,a!==null&&((Ft&4194048)===Ft?lr!==null:(Ft&62914560)!==Ft&&(Ft&536870912)===0||a!==lr))throw eu=_0,Jp;i.flags|=8192}}function bf(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?jc():536870912,i.lanes|=a,Ul|=a)}function uu(i,a){if(!Gt)switch(i.tailMode){case"hidden":a=i.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function bn(i){var a=i.alternate!==null&&i.alternate.child===i.child,d=0,m=0;if(a)for(var v=i.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=m,i.childLanes=d,a}function qC(i,a,d){var m=a.pendingProps;switch(b0(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(a),null;case 1:return bn(a),null;case 3:return d=a.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),a.memoizedState.cache!==m&&(a.flags|=2048),kr(Wn),He(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Yc(a)?Ur(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Xp())),bn(a),null;case 26:return d=a.memoizedState,i===null?(Ur(a),d!==null?(bn(a),py(a,d)):(bn(a),a.flags&=-16777217)):d?d!==i.memoizedState?(Ur(a),bn(a),py(a,d)):(bn(a),a.flags&=-16777217):(i.memoizedProps!==m&&Ur(a),bn(a),a.flags&=-16777217),null;case 27:gt(a),d=Se.current;var v=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==m&&Ur(a);else{if(!m){if(a.stateNode===null)throw Error(r(166));return bn(a),null}i=Ne.current,Yc(a)?qp(a):(i=p2(v,m,d),a.stateNode=i,Ur(a))}return bn(a),null;case 5:if(gt(a),d=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==m&&Ur(a);else{if(!m){if(a.stateNode===null)throw Error(r(166));return bn(a),null}if(i=Ne.current,Yc(a))qp(a);else{switch(v=Mf(Se.current),i){case 1:i=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:i=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":i=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":i=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":i=v.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof m.is=="string"?v.createElement("select",{is:m.is}):v.createElement("select"),m.multiple?i.multiple=!0:m.size&&(i.size=m.size);break;default:i=typeof m.is=="string"?v.createElement(d,{is:m.is}):v.createElement(d)}}i[ei]=a,i[vn]=m;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)i.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=i;e:switch(hi(i,d,m),d){case"button":case"input":case"select":case"textarea":i=!!m.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ur(a)}}return bn(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==m&&Ur(a);else{if(typeof m!="string"&&a.stateNode===null)throw Error(r(166));if(i=Se.current,Yc(a)){if(i=a.stateNode,d=a.memoizedProps,m=null,v=Oi,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}i[ei]=a,i=!!(i.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||c2(i.nodeValue,d)),i||To(a)}else i=Mf(i).createTextNode(m),i[ei]=a,a.stateNode=i}return bn(a),null;case 13:if(m=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=Yc(a),m!==null&&m.dehydrated!==null){if(i===null){if(!v)throw Error(r(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[ei]=a}else Xc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;bn(a),v=!1}else v=Xp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return a.flags&256?(Br(a),a):(Br(a),null)}if(Br(a),(a.flags&128)!==0)return a.lanes=d,a;if(d=m!==null,i=i!==null&&i.memoizedState!==null,d){m=a.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool);var T=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(T=m.memoizedState.cachePool.pool),T!==v&&(m.flags|=2048)}return d!==i&&d&&(a.child.flags|=8192),bf(a,a.updateQueue),bn(a),null;case 4:return He(),i===null&&I1(a.stateNode.containerInfo),bn(a),null;case 10:return kr(a.type),bn(a),null;case 19:if(ce(Kn),v=a.memoizedState,v===null)return bn(a),null;if(m=(a.flags&128)!==0,T=v.rendering,T===null)if(m)uu(v,!1);else{if(An!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(T=gf(i),T!==null){for(a.flags|=128,uu(v,!1),i=T.updateQueue,a.updateQueue=i,bf(a,i),a.subtreeFlags=0,i=d,d=a.child;d!==null;)$p(d,i),d=d.sibling;return se(Kn,Kn.current&1|2),a.child}i=i.sibling}v.tail!==null&&Fe()>Sf&&(a.flags|=128,m=!0,uu(v,!1),a.lanes=4194304)}else{if(!m)if(i=gf(T),i!==null){if(a.flags|=128,m=!0,i=i.updateQueue,a.updateQueue=i,bf(a,i),uu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!T.alternate&&!Gt)return bn(a),null}else 2*Fe()-v.renderingStartTime>Sf&&d!==536870912&&(a.flags|=128,m=!0,uu(v,!1),a.lanes=4194304);v.isBackwards?(T.sibling=a.child,a.child=T):(i=v.last,i!==null?i.sibling=T:a.child=T,v.last=T)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=Fe(),a.sibling=null,i=Kn.current,se(Kn,m?i&1|2:i&1),a):(bn(a),null);case 22:case 23:return Br(a),D0(),m=a.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(a.flags|=8192):m&&(a.flags|=8192),m?(d&536870912)!==0&&(a.flags&128)===0&&(bn(a),a.subtreeFlags&6&&(a.flags|=8192)):bn(a),d=a.updateQueue,d!==null&&bf(a,d.retryQueue),d=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),m=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(m=a.memoizedState.cachePool.pool),m!==d&&(a.flags|=2048),i!==null&&ce(Ro),null;case 24:return d=null,i!==null&&(d=i.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),kr(Wn),bn(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function YC(i,a){switch(b0(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return kr(Wn),He(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return gt(a),null;case 13:if(Br(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Xc()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ce(Kn),null;case 4:return He(),null;case 10:return kr(a.type),null;case 22:case 23:return Br(a),D0(),i!==null&&ce(Ro),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return kr(Wn),null;case 25:return null;default:return null}}function xy(i,a){switch(b0(a),a.tag){case 3:kr(Wn),He();break;case 26:case 27:case 5:gt(a);break;case 4:He();break;case 13:Br(a);break;case 19:ce(Kn);break;case 10:kr(a.type);break;case 22:case 23:Br(a),D0(),i!==null&&ce(Ro);break;case 24:kr(Wn)}}function du(i,a){try{var d=a.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var v=m.next;d=v;do{if((d.tag&i)===i){m=void 0;var T=d.create,D=d.inst;m=T(),D.destroy=m}d=d.next}while(d!==v)}}catch(F){an(a,a.return,F)}}function Ea(i,a,d){try{var m=a.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var T=v.next;m=T;do{if((m.tag&i)===i){var D=m.inst,F=D.destroy;if(F!==void 0){D.destroy=void 0,v=a;var K=d,me=F;try{me()}catch(Ce){an(v,K,Ce)}}}m=m.next}while(m!==T)}}catch(Ce){an(a,a.return,Ce)}}function yy(i){var a=i.updateQueue;if(a!==null){var d=i.stateNode;try{rx(a,d)}catch(m){an(i,i.return,m)}}}function by(i,a,d){d.props=Io(i.type,i.memoizedProps),d.state=i.memoizedState;try{d.componentWillUnmount()}catch(m){an(i,a,m)}}function fu(i,a){try{var d=i.ref;if(d!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof d=="function"?i.refCleanup=d(m):d.current=m}}catch(v){an(i,a,v)}}function cr(i,a){var d=i.ref,m=i.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(v){an(i,a,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(v){an(i,a,v)}else d.current=null}function wy(i){var a=i.type,d=i.memoizedProps,m=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(v){an(i,i.return,v)}}function o1(i,a,d){try{var m=i.stateNode;gA(m,i.type,d,a),m[vn]=a}catch(v){an(i,i.return,v)}}function vy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ia(i.type)||i.tag===4}function l1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||vy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ia(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function c1(i,a,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(i,a):(a=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,a.appendChild(i),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=If));else if(m!==4&&(m===27&&Ia(i.type)&&(d=i.stateNode,a=null),i=i.child,i!==null))for(c1(i,a,d),i=i.sibling;i!==null;)c1(i,a,d),i=i.sibling}function wf(i,a,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?d.insertBefore(i,a):d.appendChild(i);else if(m!==4&&(m===27&&Ia(i.type)&&(d=i.stateNode),i=i.child,i!==null))for(wf(i,a,d),i=i.sibling;i!==null;)wf(i,a,d),i=i.sibling}function Sy(i){var a=i.stateNode,d=i.memoizedProps;try{for(var m=i.type,v=a.attributes;v.length;)a.removeAttributeNode(v[0]);hi(a,m,d),a[ei]=i,a[vn]=d}catch(T){an(i,i.return,T)}}var Fr=!1,Ln=!1,u1=!1,Ey=typeof WeakSet=="function"?WeakSet:Set,si=null;function XC(i,a){if(i=i.containerInfo,L1=Pf,i=_(i),O(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var v=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var D=0,F=-1,K=-1,me=0,Ce=0,_e=i,pe=null;t:for(;;){for(var ye;_e!==d||v!==0&&_e.nodeType!==3||(F=D+v),_e!==T||m!==0&&_e.nodeType!==3||(K=D+m),_e.nodeType===3&&(D+=_e.nodeValue.length),(ye=_e.firstChild)!==null;)pe=_e,_e=ye;for(;;){if(_e===i)break t;if(pe===d&&++me===v&&(F=D),pe===T&&++Ce===m&&(K=D),(ye=_e.nextSibling)!==null)break;_e=pe,pe=_e.parentNode}_e=ye}d=F===-1||K===-1?null:{start:F,end:K}}else d=null}d=d||{start:0,end:0}}else d=null;for(k1={focusedElem:i,selectionRange:d},Pf=!1,si=a;si!==null;)if(a=si,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,si=i;else for(;si!==null;){switch(a=si,T=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&T!==null){i=void 0,d=a,v=T.memoizedProps,T=T.memoizedState,m=d.stateNode;try{var ct=Io(d.type,v,d.elementType===d.type);i=m.getSnapshotBeforeUpdate(ct,T),m.__reactInternalSnapshotBeforeUpdate=i}catch(rt){an(d,d.return,rt)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,d=i.nodeType,d===9)P1(i);else if(d===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":P1(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,si=i;break}si=a.return}}function Cy(i,a,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:Ca(i,d),m&4&&du(5,d);break;case 1:if(Ca(i,d),m&4)if(i=d.stateNode,a===null)try{i.componentDidMount()}catch(D){an(d,d.return,D)}else{var v=Io(d.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(v,a,i.__reactInternalSnapshotBeforeUpdate)}catch(D){an(d,d.return,D)}}m&64&&yy(d),m&512&&fu(d,d.return);break;case 3:if(Ca(i,d),m&64&&(i=d.updateQueue,i!==null)){if(a=null,d.child!==null)switch(d.child.tag){case 27:case 5:a=d.child.stateNode;break;case 1:a=d.child.stateNode}try{rx(i,a)}catch(D){an(d,d.return,D)}}break;case 27:a===null&&m&4&&Sy(d);case 26:case 5:Ca(i,d),a===null&&m&4&&wy(d),m&512&&fu(d,d.return);break;case 12:Ca(i,d);break;case 13:Ca(i,d),m&4&&_y(i,d),m&64&&(i=d.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(d=iA.bind(null,d),vA(i,d))));break;case 22:if(m=d.memoizedState!==null||Fr,!m){a=a!==null&&a.memoizedState!==null||Ln,v=Fr;var T=Ln;Fr=m,(Ln=a)&&!T?Aa(i,d,(d.subtreeFlags&8772)!==0):Ca(i,d),Fr=v,Ln=T}break;case 30:break;default:Ca(i,d)}}function Ay(i){var a=i.alternate;a!==null&&(i.alternate=null,Ay(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&fo(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var mn=null,Vi=!1;function Vr(i,a,d){for(d=d.child;d!==null;)Ty(i,a,d),d=d.sibling}function Ty(i,a,d){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Ct,d)}catch{}switch(d.tag){case 26:Ln||cr(d,a),Vr(i,a,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Ln||cr(d,a);var m=mn,v=Vi;Ia(d.type)&&(mn=d.stateNode,Vi=!1),Vr(i,a,d),vu(d.stateNode),mn=m,Vi=v;break;case 5:Ln||cr(d,a);case 6:if(m=mn,v=Vi,mn=null,Vr(i,a,d),mn=m,Vi=v,mn!==null)if(Vi)try{(mn.nodeType===9?mn.body:mn.nodeName==="HTML"?mn.ownerDocument.body:mn).removeChild(d.stateNode)}catch(T){an(d,a,T)}else try{mn.removeChild(d.stateNode)}catch(T){an(d,a,T)}break;case 18:mn!==null&&(Vi?(i=mn,g2(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,d.stateNode),Ru(i)):g2(mn,d.stateNode));break;case 4:m=mn,v=Vi,mn=d.stateNode.containerInfo,Vi=!0,Vr(i,a,d),mn=m,Vi=v;break;case 0:case 11:case 14:case 15:Ln||Ea(2,d,a),Ln||Ea(4,d,a),Vr(i,a,d);break;case 1:Ln||(cr(d,a),m=d.stateNode,typeof m.componentWillUnmount=="function"&&by(d,a,m)),Vr(i,a,d);break;case 21:Vr(i,a,d);break;case 22:Ln=(m=Ln)||d.memoizedState!==null,Vr(i,a,d),Ln=m;break;default:Vr(i,a,d)}}function _y(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ru(i)}catch(d){an(a,a.return,d)}}function WC(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Ey),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Ey),a;default:throw Error(r(435,i.tag))}}function d1(i,a){var d=WC(i);a.forEach(function(m){var v=sA.bind(null,i,m);d.has(m)||(d.add(m),m.then(v,v))})}function es(i,a){var d=a.deletions;if(d!==null)for(var m=0;m<d.length;m++){var v=d[m],T=i,D=a,F=D;e:for(;F!==null;){switch(F.tag){case 27:if(Ia(F.type)){mn=F.stateNode,Vi=!1;break e}break;case 5:mn=F.stateNode,Vi=!1;break e;case 3:case 4:mn=F.stateNode.containerInfo,Vi=!0;break e}F=F.return}if(mn===null)throw Error(r(160));Ty(T,D,v),mn=null,Vi=!1,T=v.alternate,T!==null&&(T.return=null),v.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Ny(a,i),a=a.sibling}var Ls=null;function Ny(i,a){var d=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:es(a,i),ts(i),m&4&&(Ea(3,i,i.return),du(3,i),Ea(5,i,i.return));break;case 1:es(a,i),ts(i),m&512&&(Ln||d===null||cr(d,d.return)),m&64&&Fr&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(d=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var v=Ls;if(es(a,i),ts(i),m&512&&(Ln||d===null||cr(d,d.return)),m&4){var T=d!==null?d.memoizedState:null;if(m=i.memoizedState,d===null)if(m===null)if(i.stateNode===null){e:{m=i.type,d=i.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":T=v.getElementsByTagName("title")[0],(!T||T[us]||T[ei]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=v.createElement(m),v.head.insertBefore(T,v.querySelector("head > title"))),hi(T,m,d),T[ei]=i,Wt(T),m=T;break e;case"link":var D=S2("link","href",v).get(m+(d.href||""));if(D){for(var F=0;F<D.length;F++)if(T=D[F],T.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&T.getAttribute("rel")===(d.rel==null?null:d.rel)&&T.getAttribute("title")===(d.title==null?null:d.title)&&T.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){D.splice(F,1);break t}}T=v.createElement(m),hi(T,m,d),v.head.appendChild(T);break;case"meta":if(D=S2("meta","content",v).get(m+(d.content||""))){for(F=0;F<D.length;F++)if(T=D[F],T.getAttribute("content")===(d.content==null?null:""+d.content)&&T.getAttribute("name")===(d.name==null?null:d.name)&&T.getAttribute("property")===(d.property==null?null:d.property)&&T.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&T.getAttribute("charset")===(d.charSet==null?null:d.charSet)){D.splice(F,1);break t}}T=v.createElement(m),hi(T,m,d),v.head.appendChild(T);break;default:throw Error(r(468,m))}T[ei]=i,Wt(T),m=T}i.stateNode=m}else E2(v,i.type,i.stateNode);else i.stateNode=v2(v,m,i.memoizedProps);else T!==m?(T===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):T.count--,m===null?E2(v,i.type,i.stateNode):v2(v,m,i.memoizedProps)):m===null&&i.stateNode!==null&&o1(i,i.memoizedProps,d.memoizedProps)}break;case 27:es(a,i),ts(i),m&512&&(Ln||d===null||cr(d,d.return)),d!==null&&m&4&&o1(i,i.memoizedProps,d.memoizedProps);break;case 5:if(es(a,i),ts(i),m&512&&(Ln||d===null||cr(d,d.return)),i.flags&32){v=i.stateNode;try{qn(v,"")}catch(ye){an(i,i.return,ye)}}m&4&&i.stateNode!=null&&(v=i.memoizedProps,o1(i,v,d!==null?d.memoizedProps:v)),m&1024&&(u1=!0);break;case 6:if(es(a,i),ts(i),m&4){if(i.stateNode===null)throw Error(r(162));m=i.memoizedProps,d=i.stateNode;try{d.nodeValue=m}catch(ye){an(i,i.return,ye)}}break;case 3:if(kf=null,v=Ls,Ls=Df(a.containerInfo),es(a,i),Ls=v,ts(i),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Ru(a.containerInfo)}catch(ye){an(i,i.return,ye)}u1&&(u1=!1,Ry(i));break;case 4:m=Ls,Ls=Df(i.stateNode.containerInfo),es(a,i),ts(i),Ls=m;break;case 12:es(a,i),ts(i);break;case 13:es(a,i),ts(i),i.child.flags&8192&&i.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(x1=Fe()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,d1(i,m)));break;case 22:v=i.memoizedState!==null;var K=d!==null&&d.memoizedState!==null,me=Fr,Ce=Ln;if(Fr=me||v,Ln=Ce||K,es(a,i),Ln=Ce,Fr=me,ts(i),m&8192)e:for(a=i.stateNode,a._visibility=v?a._visibility&-2:a._visibility|1,v&&(d===null||K||Fr||Ln||Mo(i)),d=null,a=i;;){if(a.tag===5||a.tag===26){if(d===null){K=d=a;try{if(T=K.stateNode,v)D=T.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{F=K.stateNode;var _e=K.memoizedProps.style,pe=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;F.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(ye){an(K,K.return,ye)}}}else if(a.tag===6){if(d===null){K=a;try{K.stateNode.nodeValue=v?"":K.memoizedProps}catch(ye){an(K,K.return,ye)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;d===a&&(d=null),a=a.return}d===a&&(d=null),a.sibling.return=a.return,a=a.sibling}m&4&&(m=i.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,d1(i,d))));break;case 19:es(a,i),ts(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,d1(i,m)));break;case 30:break;case 21:break;default:es(a,i),ts(i)}}function ts(i){var a=i.flags;if(a&2){try{for(var d,m=i.return;m!==null;){if(vy(m)){d=m;break}m=m.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var v=d.stateNode,T=l1(i);wf(i,T,v);break;case 5:var D=d.stateNode;d.flags&32&&(qn(D,""),d.flags&=-33);var F=l1(i);wf(i,F,D);break;case 3:case 4:var K=d.stateNode.containerInfo,me=l1(i);c1(i,me,K);break;default:throw Error(r(161))}}catch(Ce){an(i,i.return,Ce)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Ry(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;Ry(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Ca(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Cy(i,a.alternate,a),a=a.sibling}function Mo(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Ea(4,a,a.return),Mo(a);break;case 1:cr(a,a.return);var d=a.stateNode;typeof d.componentWillUnmount=="function"&&by(a,a.return,d),Mo(a);break;case 27:vu(a.stateNode);case 26:case 5:cr(a,a.return),Mo(a);break;case 22:a.memoizedState===null&&Mo(a);break;case 30:Mo(a);break;default:Mo(a)}i=i.sibling}}function Aa(i,a,d){for(d=d&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var m=a.alternate,v=i,T=a,D=T.flags;switch(T.tag){case 0:case 11:case 15:Aa(v,T,d),du(4,T);break;case 1:if(Aa(v,T,d),m=T,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(me){an(m,m.return,me)}if(m=T,v=m.updateQueue,v!==null){var F=m.stateNode;try{var K=v.shared.hiddenCallbacks;if(K!==null)for(v.shared.hiddenCallbacks=null,v=0;v<K.length;v++)sx(K[v],F)}catch(me){an(m,m.return,me)}}d&&D&64&&yy(T),fu(T,T.return);break;case 27:Sy(T);case 26:case 5:Aa(v,T,d),d&&m===null&&D&4&&wy(T),fu(T,T.return);break;case 12:Aa(v,T,d);break;case 13:Aa(v,T,d),d&&D&4&&_y(v,T);break;case 22:T.memoizedState===null&&Aa(v,T,d),fu(T,T.return);break;case 30:break;default:Aa(v,T,d)}a=a.sibling}}function f1(i,a){var d=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==d&&(i!=null&&i.refCount++,d!=null&&Zc(d))}function h1(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Zc(i))}function ur(i,a,d,m){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Oy(i,a,d,m),a=a.sibling}function Oy(i,a,d,m){var v=a.flags;switch(a.tag){case 0:case 11:case 15:ur(i,a,d,m),v&2048&&du(9,a);break;case 1:ur(i,a,d,m);break;case 3:ur(i,a,d,m),v&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Zc(i)));break;case 12:if(v&2048){ur(i,a,d,m),i=a.stateNode;try{var T=a.memoizedProps,D=T.id,F=T.onPostCommit;typeof F=="function"&&F(D,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(K){an(a,a.return,K)}}else ur(i,a,d,m);break;case 13:ur(i,a,d,m);break;case 23:break;case 22:T=a.stateNode,D=a.alternate,a.memoizedState!==null?T._visibility&2?ur(i,a,d,m):hu(i,a):T._visibility&2?ur(i,a,d,m):(T._visibility|=2,jl(i,a,d,m,(a.subtreeFlags&10256)!==0)),v&2048&&f1(D,a);break;case 24:ur(i,a,d,m),v&2048&&h1(a.alternate,a);break;default:ur(i,a,d,m)}}function jl(i,a,d,m,v){for(v=v&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var T=i,D=a,F=d,K=m,me=D.flags;switch(D.tag){case 0:case 11:case 15:jl(T,D,F,K,v),du(8,D);break;case 23:break;case 22:var Ce=D.stateNode;D.memoizedState!==null?Ce._visibility&2?jl(T,D,F,K,v):hu(T,D):(Ce._visibility|=2,jl(T,D,F,K,v)),v&&me&2048&&f1(D.alternate,D);break;case 24:jl(T,D,F,K,v),v&&me&2048&&h1(D.alternate,D);break;default:jl(T,D,F,K,v)}a=a.sibling}}function hu(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var d=i,m=a,v=m.flags;switch(m.tag){case 22:hu(d,m),v&2048&&f1(m.alternate,m);break;case 24:hu(d,m),v&2048&&h1(m.alternate,m);break;default:hu(d,m)}a=a.sibling}}var gu=8192;function Bl(i){if(i.subtreeFlags&gu)for(i=i.child;i!==null;)Iy(i),i=i.sibling}function Iy(i){switch(i.tag){case 26:Bl(i),i.flags&gu&&i.memoizedState!==null&&LA(Ls,i.memoizedState,i.memoizedProps);break;case 5:Bl(i);break;case 3:case 4:var a=Ls;Ls=Df(i.stateNode.containerInfo),Bl(i),Ls=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=gu,gu=16777216,Bl(i),gu=a):Bl(i));break;default:Bl(i)}}function My(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function mu(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var d=0;d<a.length;d++){var m=a[d];si=m,Ly(m,i)}My(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Dy(i),i=i.sibling}function Dy(i){switch(i.tag){case 0:case 11:case 15:mu(i),i.flags&2048&&Ea(9,i,i.return);break;case 3:mu(i);break;case 12:mu(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,vf(i)):mu(i);break;default:mu(i)}}function vf(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var d=0;d<a.length;d++){var m=a[d];si=m,Ly(m,i)}My(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Ea(8,a,a.return),vf(a);break;case 22:d=a.stateNode,d._visibility&2&&(d._visibility&=-3,vf(a));break;default:vf(a)}i=i.sibling}}function Ly(i,a){for(;si!==null;){var d=si;switch(d.tag){case 0:case 11:case 15:Ea(8,d,a);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Zc(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,si=m;else e:for(d=i;si!==null;){m=si;var v=m.sibling,T=m.return;if(Ay(m),m===d){si=null;break e}if(v!==null){v.return=T,si=v;break e}si=T}}}var KC={getCacheForType:function(i){var a=vi(Wn),d=a.data.get(i);return d===void 0&&(d=i(),a.data.set(i,d)),d}},ZC=typeof WeakMap=="function"?WeakMap:Map,Qt=0,cn=null,It=null,Ft=0,Jt=0,ns=null,Ta=!1,Pl=!1,g1=!1,Hr=0,An=0,_a=0,Do=0,m1=0,xs=0,Ul=0,pu=null,Hi=null,p1=!1,x1=0,Sf=1/0,Ef=null,Na=null,fi=0,Ra=null,Fl=null,Vl=0,y1=0,b1=null,ky=null,xu=0,w1=null;function is(){if((Qt&2)!==0&&Ft!==0)return Ft&-Ft;if(ie.T!==null){var i=Nl;return i!==0?i:_1()}return Cr()}function jy(){xs===0&&(xs=(Ft&536870912)===0||Gt?Er():536870912);var i=ps.current;return i!==null&&(i.flags|=32),xs}function ss(i,a,d){(i===cn&&(Jt===2||Jt===9)||i.cancelPendingCommit!==null)&&(Hl(i,0),Oa(i,Ft,xs,!1)),Wi(i,d),((Qt&2)===0||i!==cn)&&(i===cn&&((Qt&2)===0&&(Do|=d),An===4&&Oa(i,Ft,xs,!1)),dr(i))}function By(i,a,d){if((Qt&6)!==0)throw Error(r(327));var m=!d&&(a&124)===0&&(a&i.expiredLanes)===0||jt(i,a),v=m?eA(i,a):E1(i,a,!0),T=m;do{if(v===0){Pl&&!m&&Oa(i,a,0,!1);break}else{if(d=i.current.alternate,T&&!QC(d)){v=E1(i,a,!1),T=!1;continue}if(v===2){if(T=a,i.errorRecoveryDisabledLanes&T)var D=0;else D=i.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){a=D;e:{var F=i;v=pu;var K=F.current.memoizedState.isDehydrated;if(K&&(Hl(F,D).flags|=256),D=E1(F,D,!1),D!==2){if(g1&&!K){F.errorRecoveryDisabledLanes|=T,Do|=T,v=4;break e}T=Hi,Hi=v,T!==null&&(Hi===null?Hi=T:Hi.push.apply(Hi,T))}v=D}if(T=!1,v!==2)continue}}if(v===1){Hl(i,0),Oa(i,a,0,!0);break}e:{switch(m=i,T=v,T){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Oa(m,a,xs,!Ta);break e;case 2:Hi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(v=x1+300-Fe(),10<v)){if(Oa(m,a,xs,!Ta),At(m,0,!0)!==0)break e;m.timeoutHandle=f2(Py.bind(null,m,d,Hi,Ef,p1,a,xs,Do,Ul,Ta,T,2,-0,0),v);break e}Py(m,d,Hi,Ef,p1,a,xs,Do,Ul,Ta,T,0,-0,0)}}break}while(!0);dr(i)}function Py(i,a,d,m,v,T,D,F,K,me,Ce,_e,pe,ye){if(i.timeoutHandle=-1,_e=a.subtreeFlags,(_e&8192||(_e&16785408)===16785408)&&(Cu={stylesheets:null,count:0,unsuspend:DA},Iy(a),_e=kA(),_e!==null)){i.cancelPendingCommit=_e(Gy.bind(null,i,a,T,d,m,v,D,F,K,Ce,1,pe,ye)),Oa(i,T,D,!me);return}Gy(i,a,T,d,m,v,D,F,K)}function QC(i){for(var a=i;;){var d=a.tag;if((d===0||d===11||d===15)&&a.flags&16384&&(d=a.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var v=d[m],T=v.getSnapshot;v=v.value;try{if(!f(T(),v))return!1}catch{return!1}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Oa(i,a,d,m){a&=~m1,a&=~Do,i.suspendedLanes|=a,i.pingedLanes&=~a,m&&(i.warmLanes|=a),m=i.expirationTimes;for(var v=a;0<v;){var T=31-tt(v),D=1<<T;m[T]=-1,v&=~D}d!==0&&Bc(i,d,a)}function Cf(){return(Qt&6)===0?(yu(0),!1):!0}function v1(){if(It!==null){if(Jt===0)var i=It.return;else i=It,Lr=_o=null,P0(i),Ll=null,lu=0,i=It;for(;i!==null;)xy(i.alternate,i),i=i.return;It=null}}function Hl(i,a){var d=i.timeoutHandle;d!==-1&&(i.timeoutHandle=-1,pA(d)),d=i.cancelPendingCommit,d!==null&&(i.cancelPendingCommit=null,d()),v1(),cn=i,It=d=Ir(i.current,null),Ft=a,Jt=0,ns=null,Ta=!1,Pl=jt(i,a),g1=!1,Ul=xs=m1=Do=_a=An=0,Hi=pu=null,p1=!1,(a&8)!==0&&(a|=a&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=a;0<m;){var v=31-tt(m),T=1<<v;a|=i[v],m&=~T}return Hr=a,Gd(),d}function Uy(i,a){_t=null,ie.H=df,a===Jc||a===ef?(a=nx(),Jt=3):a===Jp?(a=nx(),Jt=4):Jt=a===iy?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ns=a,It===null&&(An=1,pf(i,fs(a,i.current)))}function Fy(){var i=ie.H;return ie.H=df,i===null?df:i}function Vy(){var i=ie.A;return ie.A=KC,i}function S1(){An=4,Ta||(Ft&4194048)!==Ft&&ps.current!==null||(Pl=!0),(_a&134217727)===0&&(Do&134217727)===0||cn===null||Oa(cn,Ft,xs,!1)}function E1(i,a,d){var m=Qt;Qt|=2;var v=Fy(),T=Vy();(cn!==i||Ft!==a)&&(Ef=null,Hl(i,a)),a=!1;var D=An;e:do try{if(Jt!==0&&It!==null){var F=It,K=ns;switch(Jt){case 8:v1(),D=6;break e;case 3:case 2:case 9:case 6:ps.current===null&&(a=!0);var me=Jt;if(Jt=0,ns=null,zl(i,F,K,me),d&&Pl){D=0;break e}break;default:me=Jt,Jt=0,ns=null,zl(i,F,K,me)}}JC(),D=An;break}catch(Ce){Uy(i,Ce)}while(!0);return a&&i.shellSuspendCounter++,Lr=_o=null,Qt=m,ie.H=v,ie.A=T,It===null&&(cn=null,Ft=0,Gd()),D}function JC(){for(;It!==null;)Hy(It)}function eA(i,a){var d=Qt;Qt|=2;var m=Fy(),v=Vy();cn!==i||Ft!==a?(Ef=null,Sf=Fe()+500,Hl(i,a)):Pl=jt(i,a);e:do try{if(Jt!==0&&It!==null){a=It;var T=ns;t:switch(Jt){case 1:Jt=0,ns=null,zl(i,a,T,1);break;case 2:case 9:if(ex(T)){Jt=0,ns=null,zy(a);break}a=function(){Jt!==2&&Jt!==9||cn!==i||(Jt=7),dr(i)},T.then(a,a);break e;case 3:Jt=7;break e;case 4:Jt=5;break e;case 7:ex(T)?(Jt=0,ns=null,zy(a)):(Jt=0,ns=null,zl(i,a,T,7));break;case 5:var D=null;switch(It.tag){case 26:D=It.memoizedState;case 5:case 27:var F=It;if(!D||C2(D)){Jt=0,ns=null;var K=F.sibling;if(K!==null)It=K;else{var me=F.return;me!==null?(It=me,Af(me)):It=null}break t}}Jt=0,ns=null,zl(i,a,T,5);break;case 6:Jt=0,ns=null,zl(i,a,T,6);break;case 8:v1(),An=6;break e;default:throw Error(r(462))}}tA();break}catch(Ce){Uy(i,Ce)}while(!0);return Lr=_o=null,ie.H=m,ie.A=v,Qt=d,It!==null?0:(cn=null,Ft=0,Gd(),An)}function tA(){for(;It!==null&&!Ke();)Hy(It)}function Hy(i){var a=my(i.alternate,i,Hr);i.memoizedProps=i.pendingProps,a===null?Af(i):It=a}function zy(i){var a=i,d=a.alternate;switch(a.tag){case 15:case 0:a=cy(d,a,a.pendingProps,a.type,void 0,Ft);break;case 11:a=cy(d,a,a.pendingProps,a.type.render,a.ref,Ft);break;case 5:P0(a);default:xy(d,a),a=It=$p(a,Hr),a=my(d,a,Hr)}i.memoizedProps=i.pendingProps,a===null?Af(i):It=a}function zl(i,a,d,m){Lr=_o=null,P0(a),Ll=null,lu=0;var v=a.return;try{if($C(i,v,a,d,Ft)){An=1,pf(i,fs(d,i.current)),It=null;return}}catch(T){if(v!==null)throw It=v,T;An=1,pf(i,fs(d,i.current)),It=null;return}a.flags&32768?(Gt||m===1?i=!0:Pl||(Ft&536870912)!==0?i=!1:(Ta=i=!0,(m===2||m===9||m===3||m===6)&&(m=ps.current,m!==null&&m.tag===13&&(m.flags|=16384))),$y(a,i)):Af(a)}function Af(i){var a=i;do{if((a.flags&32768)!==0){$y(a,Ta);return}i=a.return;var d=qC(a.alternate,a,Hr);if(d!==null){It=d;return}if(a=a.sibling,a!==null){It=a;return}It=a=i}while(a!==null);An===0&&(An=5)}function $y(i,a){do{var d=YC(i.alternate,i);if(d!==null){d.flags&=32767,It=d;return}if(d=i.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!a&&(i=i.sibling,i!==null)){It=i;return}It=i=d}while(i!==null);An=6,It=null}function Gy(i,a,d,m,v,T,D,F,K){i.cancelPendingCommit=null;do Tf();while(fi!==0);if((Qt&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(T=a.lanes|a.childLanes,T|=h0,Ld(i,d,T,D,F,K),i===cn&&(It=cn=null,Ft=0),Fl=a,Ra=i,Vl=d,y1=T,b1=v,ky=m,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,rA(Pe,function(){return Ky(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||m){m=ie.T,ie.T=null,v=le.p,le.p=2,D=Qt,Qt|=4;try{XC(i,a,d)}finally{Qt=D,le.p=v,ie.T=m}}fi=1,qy(),Yy(),Xy()}}function qy(){if(fi===1){fi=0;var i=Ra,a=Fl,d=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||d){d=ie.T,ie.T=null;var m=le.p;le.p=2;var v=Qt;Qt|=4;try{Ny(a,i);var T=k1,D=_(i.containerInfo),F=T.focusedElem,K=T.selectionRange;if(D!==F&&F&&F.ownerDocument&&C(F.ownerDocument.documentElement,F)){if(K!==null&&O(F)){var me=K.start,Ce=K.end;if(Ce===void 0&&(Ce=me),"selectionStart"in F)F.selectionStart=me,F.selectionEnd=Math.min(Ce,F.value.length);else{var _e=F.ownerDocument||document,pe=_e&&_e.defaultView||window;if(pe.getSelection){var ye=pe.getSelection(),ct=F.textContent.length,rt=Math.min(K.start,ct),sn=K.end===void 0?rt:Math.min(K.end,ct);!ye.extend&&rt>sn&&(D=sn,sn=rt,rt=D);var ae=w(F,rt),ne=w(F,sn);if(ae&&ne&&(ye.rangeCount!==1||ye.anchorNode!==ae.node||ye.anchorOffset!==ae.offset||ye.focusNode!==ne.node||ye.focusOffset!==ne.offset)){var ge=_e.createRange();ge.setStart(ae.node,ae.offset),ye.removeAllRanges(),rt>sn?(ye.addRange(ge),ye.extend(ne.node,ne.offset)):(ge.setEnd(ne.node,ne.offset),ye.addRange(ge))}}}}for(_e=[],ye=F;ye=ye.parentNode;)ye.nodeType===1&&_e.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<_e.length;F++){var Te=_e[F];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}Pf=!!L1,k1=L1=null}finally{Qt=v,le.p=m,ie.T=d}}i.current=a,fi=2}}function Yy(){if(fi===2){fi=0;var i=Ra,a=Fl,d=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||d){d=ie.T,ie.T=null;var m=le.p;le.p=2;var v=Qt;Qt|=4;try{Cy(i,a.alternate,a)}finally{Qt=v,le.p=m,ie.T=d}}fi=3}}function Xy(){if(fi===4||fi===3){fi=0,Ze();var i=Ra,a=Fl,d=Vl,m=ky;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?fi=5:(fi=0,Fl=Ra=null,Wy(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(Na=null),Pn(d),a=a.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Ct,a,void 0,(a.current.flags&128)===128)}catch{}if(m!==null){a=ie.T,v=le.p,le.p=2,ie.T=null;try{for(var T=i.onRecoverableError,D=0;D<m.length;D++){var F=m[D];T(F.value,{componentStack:F.stack})}}finally{ie.T=a,le.p=v}}(Vl&3)!==0&&Tf(),dr(i),v=i.pendingLanes,(d&4194090)!==0&&(v&42)!==0?i===w1?xu++:(xu=0,w1=i):xu=0,yu(0)}}function Wy(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Zc(a)))}function Tf(i){return qy(),Yy(),Xy(),Ky()}function Ky(){if(fi!==5)return!1;var i=Ra,a=y1;y1=0;var d=Pn(Vl),m=ie.T,v=le.p;try{le.p=32>d?32:d,ie.T=null,d=b1,b1=null;var T=Ra,D=Vl;if(fi=0,Fl=Ra=null,Vl=0,(Qt&6)!==0)throw Error(r(331));var F=Qt;if(Qt|=4,Dy(T.current),Oy(T,T.current,D,d),Qt=F,yu(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Ct,T)}catch{}return!0}finally{le.p=v,ie.T=m,Wy(i,a)}}function Zy(i,a,d){a=fs(d,a),a=Q0(i.stateNode,a,2),i=ba(i,a,2),i!==null&&(Wi(i,2),dr(i))}function an(i,a,d){if(i.tag===3)Zy(i,i,d);else for(;a!==null;){if(a.tag===3){Zy(a,i,d);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Na===null||!Na.has(m))){i=fs(d,i),d=ty(2),m=ba(a,d,2),m!==null&&(ny(d,m,a,i),Wi(m,2),dr(m));break}}a=a.return}}function C1(i,a,d){var m=i.pingCache;if(m===null){m=i.pingCache=new ZC;var v=new Set;m.set(a,v)}else v=m.get(a),v===void 0&&(v=new Set,m.set(a,v));v.has(d)||(g1=!0,v.add(d),i=nA.bind(null,i,a,d),a.then(i,i))}function nA(i,a,d){var m=i.pingCache;m!==null&&m.delete(a),i.pingedLanes|=i.suspendedLanes&d,i.warmLanes&=~d,cn===i&&(Ft&d)===d&&(An===4||An===3&&(Ft&62914560)===Ft&&300>Fe()-x1?(Qt&2)===0&&Hl(i,0):m1|=d,Ul===Ft&&(Ul=0)),dr(i)}function Qy(i,a){a===0&&(a=jc()),i=Cl(i,a),i!==null&&(Wi(i,a),dr(i))}function iA(i){var a=i.memoizedState,d=0;a!==null&&(d=a.retryLane),Qy(i,d)}function sA(i,a){var d=0;switch(i.tag){case 13:var m=i.stateNode,v=i.memoizedState;v!==null&&(d=v.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(a),Qy(i,d)}function rA(i,a){return ue(i,a)}var _f=null,$l=null,A1=!1,Nf=!1,T1=!1,Lo=0;function dr(i){i!==$l&&i.next===null&&($l===null?_f=$l=i:$l=$l.next=i),Nf=!0,A1||(A1=!0,oA())}function yu(i,a){if(!T1&&Nf){T1=!0;do for(var d=!1,m=_f;m!==null;){if(i!==0){var v=m.pendingLanes;if(v===0)var T=0;else{var D=m.suspendedLanes,F=m.pingedLanes;T=(1<<31-tt(42|i)+1)-1,T&=v&~(D&~F),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(d=!0,n2(m,T))}else T=Ft,T=At(m,m===cn?T:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(T&3)===0||jt(m,T)||(d=!0,n2(m,T));m=m.next}while(d);T1=!1}}function aA(){Jy()}function Jy(){Nf=A1=!1;var i=0;Lo!==0&&(mA()&&(i=Lo),Lo=0);for(var a=Fe(),d=null,m=_f;m!==null;){var v=m.next,T=e2(m,a);T===0?(m.next=null,d===null?_f=v:d.next=v,v===null&&($l=d)):(d=m,(i!==0||(T&3)!==0)&&(Nf=!0)),m=v}yu(i)}function e2(i,a){for(var d=i.suspendedLanes,m=i.pingedLanes,v=i.expirationTimes,T=i.pendingLanes&-62914561;0<T;){var D=31-tt(T),F=1<<D,K=v[D];K===-1?((F&d)===0||(F&m)!==0)&&(v[D]=Ys(F,a)):K<=a&&(i.expiredLanes|=F),T&=~F}if(a=cn,d=Ft,d=At(i,i===a?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,d===0||i===a&&(Jt===2||Jt===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&Ue(m),i.callbackNode=null,i.callbackPriority=0;if((d&3)===0||jt(i,d)){if(a=d&-d,a===i.callbackPriority)return a;switch(m!==null&&Ue(m),Pn(d)){case 2:case 8:d=dt;break;case 32:d=Pe;break;case 268435456:d=qs;break;default:d=Pe}return m=t2.bind(null,i),d=ue(d,m),i.callbackPriority=a,i.callbackNode=d,a}return m!==null&&m!==null&&Ue(m),i.callbackPriority=2,i.callbackNode=null,2}function t2(i,a){if(fi!==0&&fi!==5)return i.callbackNode=null,i.callbackPriority=0,null;var d=i.callbackNode;if(Tf()&&i.callbackNode!==d)return null;var m=Ft;return m=At(i,i===cn?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(By(i,m,a),e2(i,Fe()),i.callbackNode!=null&&i.callbackNode===d?t2.bind(null,i):null)}function n2(i,a){if(Tf())return null;By(i,a,!0)}function oA(){xA(function(){(Qt&6)!==0?ue(ze,aA):Jy()})}function _1(){return Lo===0&&(Lo=Er()),Lo}function i2(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ml(""+i)}function s2(i,a){var d=a.ownerDocument.createElement("input");return d.name=a.name,d.value=a.value,i.id&&d.setAttribute("form",i.id),a.parentNode.insertBefore(d,a),i=new FormData(i),d.parentNode.removeChild(d),i}function lA(i,a,d,m,v){if(a==="submit"&&d&&d.stateNode===v){var T=i2((v[vn]||null).action),D=m.submitter;D&&(a=(a=D[vn]||null)?i2(a.formAction):D.getAttribute("formAction"),a!==null&&(T=a,D=null));var F=new ir("action","action",null,m,v);i.push({event:F,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Lo!==0){var K=D?s2(v,D):new FormData(v);Y0(d,{pending:!0,data:K,method:v.method,action:T},null,K)}}else typeof T=="function"&&(F.preventDefault(),K=D?s2(v,D):new FormData(v),Y0(d,{pending:!0,data:K,method:v.method,action:T},T,K))},currentTarget:v}]})}}for(var N1=0;N1<ar.length;N1++){var R1=ar[N1],cA=R1.toLowerCase(),uA=R1[0].toUpperCase()+R1.slice(1);Qi(cA,"on"+uA)}Qi(pt,"onAnimationEnd"),Qi(ui,"onAnimationIteration"),Qi(Ui,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(bi,"onTransitionRun"),Qi(Zt,"onTransitionStart"),Qi(Xn,"onTransitionCancel"),Qi(wi,"onTransitionEnd"),Sn("onMouseEnter",["mouseout","mouseover"]),Sn("onMouseLeave",["mouseout","mouseover"]),Sn("onPointerEnter",["pointerout","pointerover"]),Sn("onPointerLeave",["pointerout","pointerover"]),ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bu));function r2(i,a){a=(a&4)!==0;for(var d=0;d<i.length;d++){var m=i[d],v=m.event;m=m.listeners;e:{var T=void 0;if(a)for(var D=m.length-1;0<=D;D--){var F=m[D],K=F.instance,me=F.currentTarget;if(F=F.listener,K!==T&&v.isPropagationStopped())break e;T=F,v.currentTarget=me;try{T(v)}catch(Ce){mf(Ce)}v.currentTarget=null,T=K}else for(D=0;D<m.length;D++){if(F=m[D],K=F.instance,me=F.currentTarget,F=F.listener,K!==T&&v.isPropagationStopped())break e;T=F,v.currentTarget=me;try{T(v)}catch(Ce){mf(Ce)}v.currentTarget=null,T=K}}}}function Mt(i,a){var d=a[ti];d===void 0&&(d=a[ti]=new Set);var m=i+"__bubble";d.has(m)||(a2(a,i,2,!1),d.add(m))}function O1(i,a,d){var m=0;a&&(m|=4),a2(d,i,m,a)}var Rf="_reactListening"+Math.random().toString(36).slice(2);function I1(i){if(!i[Rf]){i[Rf]=!0,kd.forEach(function(d){d!=="selectionchange"&&(dA.has(d)||O1(d,!1,i),O1(d,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Rf]||(a[Rf]=!0,O1("selectionchange",!1,a))}}function a2(i,a,d,m){switch(O2(a)){case 2:var v=PA;break;case 8:v=UA;break;default:v=G1}d=v.bind(null,a,d,i),v=void 0,!xt||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),m?v!==void 0?i.addEventListener(a,d,{capture:!0,passive:v}):i.addEventListener(a,d,!0):v!==void 0?i.addEventListener(a,d,{passive:v}):i.addEventListener(a,d,!1)}function M1(i,a,d,m,v){var T=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var D=m.tag;if(D===3||D===4){var F=m.stateNode.containerInfo;if(F===v)break;if(D===4)for(D=m.return;D!==null;){var K=D.tag;if((K===3||K===4)&&D.stateNode.containerInfo===v)return;D=D.return}for(;F!==null;){if(D=Rn(F),D===null)return;if(K=D.tag,K===5||K===6||K===26||K===27){m=T=D;continue e}F=F.parentNode}}m=m.return}Is(function(){var me=T,Ce=ra(d),_e=[];e:{var pe=Or.get(i);if(pe!==void 0){var ye=ir,ct=i;switch(i){case"keypress":if(pl(d)===0)break e;case"keydown":case"keyup":ye=Vc;break;case"focusin":ct="focus",ye=ca;break;case"focusout":ct="blur",ye=ca;break;case"beforeblur":case"afterblur":ye=ca;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=Ud;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Yt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Kt;break;case pt:case ui:case Ui:ye=r0;break;case wi:ye=c0;break;case"scroll":case"scrollend":ye=xi;break;case"wheel":ye=Nr;break;case"copy":case"cut":case"paste":ye=vt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=yo;break;case"toggle":case"beforetoggle":ye=u0}var rt=(a&4)!==0,sn=!rt&&(i==="scroll"||i==="scrollend"),ae=rt?pe!==null?pe+"Capture":null:pe;rt=[];for(var ne=me,ge;ne!==null;){var Te=ne;if(ge=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||ge===null||ae===null||(Te=nt(ne,ae),Te!=null&&rt.push(wu(ne,Te,ge))),sn)break;ne=ne.return}0<rt.length&&(pe=new ye(pe,ct,null,d,Ce),_e.push({event:pe,listeners:rt}))}}if((a&7)===0){e:{if(pe=i==="mouseover"||i==="pointerover",ye=i==="mouseout"||i==="pointerout",pe&&d!==ho&&(ct=d.relatedTarget||d.fromElement)&&(Rn(ct)||ct[Xs]))break e;if((ye||pe)&&(pe=Ce.window===Ce?Ce:(pe=Ce.ownerDocument)?pe.defaultView||pe.parentWindow:window,ye?(ct=d.relatedTarget||d.toElement,ye=me,ct=ct?Rn(ct):null,ct!==null&&(sn=u(ct),rt=ct.tag,ct!==sn||rt!==5&&rt!==27&&rt!==6)&&(ct=null)):(ye=null,ct=me),ye!==ct)){if(rt=Ud,Te="onMouseLeave",ae="onMouseEnter",ne="mouse",(i==="pointerout"||i==="pointerover")&&(rt=yo,Te="onPointerLeave",ae="onPointerEnter",ne="pointer"),sn=ye==null?pe:Ws(ye),ge=ct==null?pe:Ws(ct),pe=new rt(Te,ne+"leave",ye,d,Ce),pe.target=sn,pe.relatedTarget=ge,Te=null,Rn(Ce)===me&&(rt=new rt(ae,ne+"enter",ct,d,Ce),rt.target=ge,rt.relatedTarget=sn,Te=rt),sn=Te,ye&&ct)t:{for(rt=ye,ae=ct,ne=0,ge=rt;ge;ge=Gl(ge))ne++;for(ge=0,Te=ae;Te;Te=Gl(Te))ge++;for(;0<ne-ge;)rt=Gl(rt),ne--;for(;0<ge-ne;)ae=Gl(ae),ge--;for(;ne--;){if(rt===ae||ae!==null&&rt===ae.alternate)break t;rt=Gl(rt),ae=Gl(ae)}rt=null}else rt=null;ye!==null&&o2(_e,pe,ye,rt,!1),ct!==null&&sn!==null&&o2(_e,sn,ct,rt,!0)}}e:{if(pe=me?Ws(me):window,ye=pe.nodeName&&pe.nodeName.toLowerCase(),ye==="select"||ye==="input"&&pe.type==="file")var Xe=zd;else if(vo(pe))if(Gc)Xe=o;else{Xe=L;var Nt=Sl}else ye=pe.nodeName,!ye||ye.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?me&&Je(me.elementType)&&(Xe=zd):Xe=s;if(Xe&&(Xe=Xe(i,me))){Ri(_e,Xe,d,Ce);break e}Nt&&Nt(i,pe,me),i==="focusout"&&me&&pe.type==="number"&&me.memoizedProps.value!=null&&he(pe,"number",pe.value)}switch(Nt=me?Ws(me):window,i){case"focusin":(vo(Nt)||Nt.contentEditable==="true")&&(P=Nt,G=me,Q=null);break;case"focusout":Q=G=P=null;break;case"mousedown":te=!0;break;case"contextmenu":case"mouseup":case"dragend":te=!1,fe(_e,d,Ce);break;case"selectionchange":if(k)break;case"keydown":case"keyup":fe(_e,d,Ce)}var et;if(bo)e:{switch(i){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else fa?Rr(i,d)&&(ot="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(ot="onCompositionStart");ot&&(zc&&d.locale!=="ko"&&(fa||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&fa&&(et=er()):(Js=Ce,go="value"in Js?Js.value:Js.textContent,fa=!0)),Nt=Of(me,ot),0<Nt.length&&(ot=new po(ot,i,null,d,Ce),_e.push({event:ot,listeners:Nt}),et?ot.data=et:(et=wl(d),et!==null&&(ot.data=et)))),(et=Hc?wo(i,d):d0(i,d))&&(ot=Of(me,"onBeforeInput"),0<ot.length&&(Nt=new po("onBeforeInput","beforeinput",null,d,Ce),_e.push({event:Nt,listeners:ot}),Nt.data=et)),lA(_e,i,me,d,Ce)}r2(_e,a)})}function wu(i,a,d){return{instance:i,listener:a,currentTarget:d}}function Of(i,a){for(var d=a+"Capture",m=[];i!==null;){var v=i,T=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||T===null||(v=nt(i,d),v!=null&&m.unshift(wu(i,v,T)),v=nt(i,a),v!=null&&m.push(wu(i,v,T))),i.tag===3)return m;i=i.return}return[]}function Gl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function o2(i,a,d,m,v){for(var T=a._reactName,D=[];d!==null&&d!==m;){var F=d,K=F.alternate,me=F.stateNode;if(F=F.tag,K!==null&&K===m)break;F!==5&&F!==26&&F!==27||me===null||(K=me,v?(me=nt(d,T),me!=null&&D.unshift(wu(d,me,K))):v||(me=nt(d,T),me!=null&&D.push(wu(d,me,K)))),d=d.return}D.length!==0&&i.push({event:a,listeners:D})}var fA=/\r\n?/g,hA=/\u0000|\uFFFD/g;function l2(i){return(typeof i=="string"?i:""+i).replace(fA,`
`).replace(hA,"")}function c2(i,a){return a=l2(a),l2(i)===a}function If(){}function nn(i,a,d,m,v,T){switch(d){case"children":typeof m=="string"?a==="body"||a==="textarea"&&m===""||qn(i,m):(typeof m=="number"||typeof m=="bigint")&&a!=="body"&&qn(i,""+m);break;case"className":dl(i,"class",m);break;case"tabIndex":dl(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":dl(i,d,m);break;case"style":Ni(i,m,T);break;case"data":if(a!=="object"){dl(i,"data",m);break}case"src":case"href":if(m===""&&(a!=="a"||d!=="href")){i.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(d);break}m=ml(""+m),i.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(d==="formAction"?(a!=="input"&&nn(i,a,"name",v.name,v,null),nn(i,a,"formEncType",v.formEncType,v,null),nn(i,a,"formMethod",v.formMethod,v,null),nn(i,a,"formTarget",v.formTarget,v,null)):(nn(i,a,"encType",v.encType,v,null),nn(i,a,"method",v.method,v,null),nn(i,a,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(d);break}m=ml(""+m),i.setAttribute(d,m);break;case"onClick":m!=null&&(i.onclick=If);break;case"onScroll":m!=null&&Mt("scroll",i);break;case"onScrollEnd":m!=null&&Mt("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=d}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}d=ml(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(d,""+m):i.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(d,""):i.removeAttribute(d);break;case"capture":case"download":m===!0?i.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(d,m):i.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(d,m):i.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(d):i.setAttribute(d,m);break;case"popover":Mt("beforetoggle",i),Mt("toggle",i),Re(i,"popover",m);break;case"xlinkActuate":Ht(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Ht(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Ht(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Ht(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Ht(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Ht(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Ht(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Ht(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Ht(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Re(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=dn.get(d)||d,Re(i,d,m))}}function D1(i,a,d,m,v,T){switch(d){case"style":Ni(i,m,T);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=d}}break;case"children":typeof m=="string"?qn(i,m):(typeof m=="number"||typeof m=="bigint")&&qn(i,""+m);break;case"onScroll":m!=null&&Mt("scroll",i);break;case"onScrollEnd":m!=null&&Mt("scrollend",i);break;case"onClick":m!=null&&(i.onclick=If);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jd.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(v=d.endsWith("Capture"),a=d.slice(2,v?d.length-7:void 0),T=i[vn]||null,T=T!=null?T[d]:null,typeof T=="function"&&i.removeEventListener(a,T,v),typeof m=="function")){typeof T!="function"&&T!==null&&(d in i?i[d]=null:i.hasAttribute(d)&&i.removeAttribute(d)),i.addEventListener(a,m,v);break e}d in i?i[d]=m:m===!0?i.setAttribute(d,""):Re(i,d,m)}}}function hi(i,a,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",i),Mt("load",i);var m=!1,v=!1,T;for(T in d)if(d.hasOwnProperty(T)){var D=d[T];if(D!=null)switch(T){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:nn(i,a,T,D,d,null)}}v&&nn(i,a,"srcSet",d.srcSet,d,null),m&&nn(i,a,"src",d.src,d,null);return;case"input":Mt("invalid",i);var F=T=D=v=null,K=null,me=null;for(m in d)if(d.hasOwnProperty(m)){var Ce=d[m];if(Ce!=null)switch(m){case"name":v=Ce;break;case"type":D=Ce;break;case"checked":K=Ce;break;case"defaultChecked":me=Ce;break;case"value":T=Ce;break;case"defaultValue":F=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(r(137,a));break;default:nn(i,a,m,Ce,d,null)}}Gn(i,T,F,K,me,D,v,!1),hl(i);return;case"select":Mt("invalid",i),m=D=T=null;for(v in d)if(d.hasOwnProperty(v)&&(F=d[v],F!=null))switch(v){case"value":T=F;break;case"defaultValue":D=F;break;case"multiple":m=F;default:nn(i,a,v,F,d,null)}a=T,d=D,i.multiple=!!m,a!=null?$(i,!!m,a,!1):d!=null&&$(i,!!m,d,!0);return;case"textarea":Mt("invalid",i),T=v=m=null;for(D in d)if(d.hasOwnProperty(D)&&(F=d[D],F!=null))switch(D){case"value":m=F;break;case"defaultValue":v=F;break;case"children":T=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:nn(i,a,D,F,d,null)}On(i,m,v,T),hl(i);return;case"option":for(K in d)if(d.hasOwnProperty(K)&&(m=d[K],m!=null))switch(K){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:nn(i,a,K,m,d,null)}return;case"dialog":Mt("beforetoggle",i),Mt("toggle",i),Mt("cancel",i),Mt("close",i);break;case"iframe":case"object":Mt("load",i);break;case"video":case"audio":for(m=0;m<bu.length;m++)Mt(bu[m],i);break;case"image":Mt("error",i),Mt("load",i);break;case"details":Mt("toggle",i);break;case"embed":case"source":case"link":Mt("error",i),Mt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in d)if(d.hasOwnProperty(me)&&(m=d[me],m!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:nn(i,a,me,m,d,null)}return;default:if(Je(a)){for(Ce in d)d.hasOwnProperty(Ce)&&(m=d[Ce],m!==void 0&&D1(i,a,Ce,m,d,void 0));return}}for(F in d)d.hasOwnProperty(F)&&(m=d[F],m!=null&&nn(i,a,F,m,d,null))}function gA(i,a,d,m){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,T=null,D=null,F=null,K=null,me=null,Ce=null;for(ye in d){var _e=d[ye];if(d.hasOwnProperty(ye)&&_e!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":K=_e;default:m.hasOwnProperty(ye)||nn(i,a,ye,null,m,_e)}}for(var pe in m){var ye=m[pe];if(_e=d[pe],m.hasOwnProperty(pe)&&(ye!=null||_e!=null))switch(pe){case"type":T=ye;break;case"name":v=ye;break;case"checked":me=ye;break;case"defaultChecked":Ce=ye;break;case"value":D=ye;break;case"defaultValue":F=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,a));break;default:ye!==_e&&nn(i,a,pe,ye,m,_e)}}qt(i,D,F,K,me,Ce,T,v);return;case"select":ye=D=F=pe=null;for(T in d)if(K=d[T],d.hasOwnProperty(T)&&K!=null)switch(T){case"value":break;case"multiple":ye=K;default:m.hasOwnProperty(T)||nn(i,a,T,null,m,K)}for(v in m)if(T=m[v],K=d[v],m.hasOwnProperty(v)&&(T!=null||K!=null))switch(v){case"value":pe=T;break;case"defaultValue":F=T;break;case"multiple":D=T;default:T!==K&&nn(i,a,v,T,m,K)}a=F,d=D,m=ye,pe!=null?$(i,!!d,pe,!1):!!m!=!!d&&(a!=null?$(i,!!d,a,!0):$(i,!!d,d?[]:"",!1));return;case"textarea":ye=pe=null;for(F in d)if(v=d[F],d.hasOwnProperty(F)&&v!=null&&!m.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:nn(i,a,F,null,m,v)}for(D in m)if(v=m[D],T=d[D],m.hasOwnProperty(D)&&(v!=null||T!=null))switch(D){case"value":pe=v;break;case"defaultValue":ye=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==T&&nn(i,a,D,v,m,T)}Qe(i,pe,ye);return;case"option":for(var ct in d)if(pe=d[ct],d.hasOwnProperty(ct)&&pe!=null&&!m.hasOwnProperty(ct))switch(ct){case"selected":i.selected=!1;break;default:nn(i,a,ct,null,m,pe)}for(K in m)if(pe=m[K],ye=d[K],m.hasOwnProperty(K)&&pe!==ye&&(pe!=null||ye!=null))switch(K){case"selected":i.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:nn(i,a,K,pe,m,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rt in d)pe=d[rt],d.hasOwnProperty(rt)&&pe!=null&&!m.hasOwnProperty(rt)&&nn(i,a,rt,null,m,pe);for(me in m)if(pe=m[me],ye=d[me],m.hasOwnProperty(me)&&pe!==ye&&(pe!=null||ye!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,a));break;default:nn(i,a,me,pe,m,ye)}return;default:if(Je(a)){for(var sn in d)pe=d[sn],d.hasOwnProperty(sn)&&pe!==void 0&&!m.hasOwnProperty(sn)&&D1(i,a,sn,void 0,m,pe);for(Ce in m)pe=m[Ce],ye=d[Ce],!m.hasOwnProperty(Ce)||pe===ye||pe===void 0&&ye===void 0||D1(i,a,Ce,pe,m,ye);return}}for(var ae in d)pe=d[ae],d.hasOwnProperty(ae)&&pe!=null&&!m.hasOwnProperty(ae)&&nn(i,a,ae,null,m,pe);for(_e in m)pe=m[_e],ye=d[_e],!m.hasOwnProperty(_e)||pe===ye||pe==null&&ye==null||nn(i,a,_e,pe,m,ye)}var L1=null,k1=null;function Mf(i){return i.nodeType===9?i:i.ownerDocument}function u2(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function d2(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function j1(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var B1=null;function mA(){var i=window.event;return i&&i.type==="popstate"?i===B1?!1:(B1=i,!0):(B1=null,!1)}var f2=typeof setTimeout=="function"?setTimeout:void 0,pA=typeof clearTimeout=="function"?clearTimeout:void 0,h2=typeof Promise=="function"?Promise:void 0,xA=typeof queueMicrotask=="function"?queueMicrotask:typeof h2<"u"?function(i){return h2.resolve(null).then(i).catch(yA)}:f2;function yA(i){setTimeout(function(){throw i})}function Ia(i){return i==="head"}function g2(i,a){var d=a,m=0,v=0;do{var T=d.nextSibling;if(i.removeChild(d),T&&T.nodeType===8)if(d=T.data,d==="/$"){if(0<m&&8>m){d=m;var D=i.ownerDocument;if(d&1&&vu(D.documentElement),d&2&&vu(D.body),d&4)for(d=D.head,vu(d),D=d.firstChild;D;){var F=D.nextSibling,K=D.nodeName;D[us]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&D.rel.toLowerCase()==="stylesheet"||d.removeChild(D),D=F}}if(v===0){i.removeChild(T),Ru(a);return}v--}else d==="$"||d==="$?"||d==="$!"?v++:m=d.charCodeAt(0)-48;else m=0;d=T}while(d);Ru(a)}function P1(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var d=a;switch(a=a.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":P1(d),fo(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}i.removeChild(d)}}function bA(i,a,d,m){for(;i.nodeType===1;){var v=d;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[us])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(T=i.getAttribute("rel"),T==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(T!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(T=i.getAttribute("src"),(T!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&T&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var T=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===T)return i}else return i;if(i=ks(i.nextSibling),i===null)break}return null}function wA(i,a,d){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!d||(i=ks(i.nextSibling),i===null))return null;return i}function U1(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function vA(i,a){var d=i.ownerDocument;if(i.data!=="$?"||d.readyState==="complete")a();else{var m=function(){a(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function ks(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var F1=null;function m2(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return i;a--}else d==="/$"&&a++}i=i.previousSibling}return null}function p2(i,a,d){switch(a=Mf(d),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function vu(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);fo(i)}var ys=new Map,x2=new Set;function Df(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var zr=le.d;le.d={f:SA,r:EA,D:CA,C:AA,L:TA,m:_A,X:RA,S:NA,M:OA};function SA(){var i=zr.f(),a=Cf();return i||a}function EA(i){var a=Ki(i);a!==null&&a.tag===5&&a.type==="form"?Bx(a):zr.r(i)}var ql=typeof document>"u"?null:document;function y2(i,a,d){var m=ql;if(m&&typeof a=="string"&&a){var v=$n(a);v='link[rel="'+i+'"][href="'+v+'"]',typeof d=="string"&&(v+='[crossorigin="'+d+'"]'),x2.has(v)||(x2.add(v),i={rel:i,crossOrigin:d,href:a},m.querySelector(v)===null&&(a=m.createElement("link"),hi(a,"link",i),Wt(a),m.head.appendChild(a)))}}function CA(i){zr.D(i),y2("dns-prefetch",i,null)}function AA(i,a){zr.C(i,a),y2("preconnect",i,a)}function TA(i,a,d){zr.L(i,a,d);var m=ql;if(m&&i&&a){var v='link[rel="preload"][as="'+$n(a)+'"]';a==="image"&&d&&d.imageSrcSet?(v+='[imagesrcset="'+$n(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(v+='[imagesizes="'+$n(d.imageSizes)+'"]')):v+='[href="'+$n(i)+'"]';var T=v;switch(a){case"style":T=Yl(i);break;case"script":T=Xl(i)}ys.has(T)||(i=S({rel:"preload",href:a==="image"&&d&&d.imageSrcSet?void 0:i,as:a},d),ys.set(T,i),m.querySelector(v)!==null||a==="style"&&m.querySelector(Su(T))||a==="script"&&m.querySelector(Eu(T))||(a=m.createElement("link"),hi(a,"link",i),Wt(a),m.head.appendChild(a)))}}function _A(i,a){zr.m(i,a);var d=ql;if(d&&i){var m=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+$n(m)+'"][href="'+$n(i)+'"]',T=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Xl(i)}if(!ys.has(T)&&(i=S({rel:"modulepreload",href:i},a),ys.set(T,i),d.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Eu(T)))return}m=d.createElement("link"),hi(m,"link",i),Wt(m),d.head.appendChild(m)}}}function NA(i,a,d){zr.S(i,a,d);var m=ql;if(m&&i){var v=Rs(m).hoistableStyles,T=Yl(i);a=a||"default";var D=v.get(T);if(!D){var F={loading:0,preload:null};if(D=m.querySelector(Su(T)))F.loading=5;else{i=S({rel:"stylesheet",href:i,"data-precedence":a},d),(d=ys.get(T))&&V1(i,d);var K=D=m.createElement("link");Wt(K),hi(K,"link",i),K._p=new Promise(function(me,Ce){K.onload=me,K.onerror=Ce}),K.addEventListener("load",function(){F.loading|=1}),K.addEventListener("error",function(){F.loading|=2}),F.loading|=4,Lf(D,a,m)}D={type:"stylesheet",instance:D,count:1,state:F},v.set(T,D)}}}function RA(i,a){zr.X(i,a);var d=ql;if(d&&i){var m=Rs(d).hoistableScripts,v=Xl(i),T=m.get(v);T||(T=d.querySelector(Eu(v)),T||(i=S({src:i,async:!0},a),(a=ys.get(v))&&H1(i,a),T=d.createElement("script"),Wt(T),hi(T,"link",i),d.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(v,T))}}function OA(i,a){zr.M(i,a);var d=ql;if(d&&i){var m=Rs(d).hoistableScripts,v=Xl(i),T=m.get(v);T||(T=d.querySelector(Eu(v)),T||(i=S({src:i,async:!0,type:"module"},a),(a=ys.get(v))&&H1(i,a),T=d.createElement("script"),Wt(T),hi(T,"link",i),d.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(v,T))}}function b2(i,a,d,m){var v=(v=Se.current)?Df(v):null;if(!v)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(a=Yl(d.href),d=Rs(v).hoistableStyles,m=d.get(a),m||(m={type:"style",instance:null,count:0,state:null},d.set(a,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){i=Yl(d.href);var T=Rs(v).hoistableStyles,D=T.get(i);if(D||(v=v.ownerDocument||v,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(i,D),(T=v.querySelector(Su(i)))&&!T._p&&(D.instance=T,D.state.loading=5),ys.has(i)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},ys.set(i,d),T||IA(v,i,d,D.state))),a&&m===null)throw Error(r(528,""));return D}if(a&&m!==null)throw Error(r(529,""));return null;case"script":return a=d.async,d=d.src,typeof d=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Xl(d),d=Rs(v).hoistableScripts,m=d.get(a),m||(m={type:"script",instance:null,count:0,state:null},d.set(a,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Yl(i){return'href="'+$n(i)+'"'}function Su(i){return'link[rel="stylesheet"]['+i+"]"}function w2(i){return S({},i,{"data-precedence":i.precedence,precedence:null})}function IA(i,a,d,m){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?m.loading=1:(a=i.createElement("link"),m.preload=a,a.addEventListener("load",function(){return m.loading|=1}),a.addEventListener("error",function(){return m.loading|=2}),hi(a,"link",d),Wt(a),i.head.appendChild(a))}function Xl(i){return'[src="'+$n(i)+'"]'}function Eu(i){return"script[async]"+i}function v2(i,a,d){if(a.count++,a.instance===null)switch(a.type){case"style":var m=i.querySelector('style[data-href~="'+$n(d.href)+'"]');if(m)return a.instance=m,Wt(m),m;var v=S({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),Wt(m),hi(m,"style",v),Lf(m,d.precedence,i),a.instance=m;case"stylesheet":v=Yl(d.href);var T=i.querySelector(Su(v));if(T)return a.state.loading|=4,a.instance=T,Wt(T),T;m=w2(d),(v=ys.get(v))&&V1(m,v),T=(i.ownerDocument||i).createElement("link"),Wt(T);var D=T;return D._p=new Promise(function(F,K){D.onload=F,D.onerror=K}),hi(T,"link",m),a.state.loading|=4,Lf(T,d.precedence,i),a.instance=T;case"script":return T=Xl(d.src),(v=i.querySelector(Eu(T)))?(a.instance=v,Wt(v),v):(m=d,(v=ys.get(T))&&(m=S({},d),H1(m,v)),i=i.ownerDocument||i,v=i.createElement("script"),Wt(v),hi(v,"link",m),i.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(m=a.instance,a.state.loading|=4,Lf(m,d.precedence,i));return a.instance}function Lf(i,a,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,T=v,D=0;D<m.length;D++){var F=m[D];if(F.dataset.precedence===a)T=F;else if(T!==v)break}T?T.parentNode.insertBefore(i,T.nextSibling):(a=d.nodeType===9?d.head:d,a.insertBefore(i,a.firstChild))}function V1(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function H1(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var kf=null;function S2(i,a,d){if(kf===null){var m=new Map,v=kf=new Map;v.set(d,m)}else v=kf,m=v.get(d),m||(m=new Map,v.set(d,m));if(m.has(i))return m;for(m.set(i,null),d=d.getElementsByTagName(i),v=0;v<d.length;v++){var T=d[v];if(!(T[us]||T[ei]||i==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var D=T.getAttribute(a)||"";D=i+D;var F=m.get(D);F?F.push(T):m.set(D,[T])}}return m}function E2(i,a,d){i=i.ownerDocument||i,i.head.insertBefore(d,a==="title"?i.querySelector("head > title"):null)}function MA(i,a,d){if(d===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function C2(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Cu=null;function DA(){}function LA(i,a,d){if(Cu===null)throw Error(r(475));var m=Cu;if(a.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var v=Yl(d.href),T=i.querySelector(Su(v));if(T){i=T._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(m.count++,m=jf.bind(m),i.then(m,m)),a.state.loading|=4,a.instance=T,Wt(T);return}T=i.ownerDocument||i,d=w2(d),(v=ys.get(v))&&V1(d,v),T=T.createElement("link"),Wt(T);var D=T;D._p=new Promise(function(F,K){D.onload=F,D.onerror=K}),hi(T,"link",d),a.instance=T}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(m.count++,a=jf.bind(m),i.addEventListener("load",a),i.addEventListener("error",a))}}function kA(){if(Cu===null)throw Error(r(475));var i=Cu;return i.stylesheets&&i.count===0&&z1(i,i.stylesheets),0<i.count?function(a){var d=setTimeout(function(){if(i.stylesheets&&z1(i,i.stylesheets),i.unsuspend){var m=i.unsuspend;i.unsuspend=null,m()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(d)}}:null}function jf(){if(this.count--,this.count===0){if(this.stylesheets)z1(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Bf=null;function z1(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Bf=new Map,a.forEach(jA,i),Bf=null,jf.call(i))}function jA(i,a){if(!(a.state.loading&4)){var d=Bf.get(i);if(d)var m=d.get(null);else{d=new Map,Bf.set(i,d);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<v.length;T++){var D=v[T];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(d.set(D.dataset.precedence,D),m=D)}m&&d.set(null,m)}v=a.instance,D=v.getAttribute("data-precedence"),T=d.get(D)||m,T===m&&d.set(null,v),d.set(D,v),this.count++,m=jf.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),T?T.parentNode.insertBefore(v,T.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),a.state.loading|=4}}var Au={$$typeof:B,Provider:null,Consumer:null,_currentValue:De,_currentValue2:De,_threadCount:0};function BA(i,a,d,m,v,T,D,F){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.hiddenUpdates=Bt(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=T,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function A2(i,a,d,m,v,T,D,F,K,me,Ce,_e){return i=new BA(i,a,d,D,F,K,me,_e),a=1,T===!0&&(a|=24),T=Ji(3,null,null,a),i.current=T,T.stateNode=i,a=C0(),a.refCount++,i.pooledCache=a,a.refCount++,T.memoizedState={element:m,isDehydrated:d,cache:a},N0(T),i}function T2(i){return i?(i=Al,i):Al}function _2(i,a,d,m,v,T){v=T2(v),m.context===null?m.context=v:m.pendingContext=v,m=ya(a),m.payload={element:d},T=T===void 0?null:T,T!==null&&(m.callback=T),d=ba(i,m,a),d!==null&&(ss(d,i,a),tu(d,i,a))}function N2(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<a?d:a}}function $1(i,a){N2(i,a),(i=i.alternate)&&N2(i,a)}function R2(i){if(i.tag===13){var a=Cl(i,67108864);a!==null&&ss(a,i,67108864),$1(i,67108864)}}var Pf=!0;function PA(i,a,d,m){var v=ie.T;ie.T=null;var T=le.p;try{le.p=2,G1(i,a,d,m)}finally{le.p=T,ie.T=v}}function UA(i,a,d,m){var v=ie.T;ie.T=null;var T=le.p;try{le.p=8,G1(i,a,d,m)}finally{le.p=T,ie.T=v}}function G1(i,a,d,m){if(Pf){var v=q1(m);if(v===null)M1(i,a,m,Uf,d),I2(i,m);else if(VA(v,i,a,d,m))m.stopPropagation();else if(I2(i,m),a&4&&-1<FA.indexOf(i)){for(;v!==null;){var T=Ki(v);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var D=Vt(T.pendingLanes);if(D!==0){var F=T;for(F.pendingLanes|=2,F.entangledLanes|=2;D;){var K=1<<31-tt(D);F.entanglements[1]|=K,D&=~K}dr(T),(Qt&6)===0&&(Sf=Fe()+500,yu(0))}}break;case 13:F=Cl(T,2),F!==null&&ss(F,T,2),Cf(),$1(T,2)}if(T=q1(m),T===null&&M1(i,a,m,Uf,d),T===v)break;v=T}v!==null&&m.stopPropagation()}else M1(i,a,m,null,d)}}function q1(i){return i=ra(i),Y1(i)}var Uf=null;function Y1(i){if(Uf=null,i=Rn(i),i!==null){var a=u(i);if(a===null)i=null;else{var d=a.tag;if(d===13){if(i=g(a),i!==null)return i;i=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Uf=i,null}function O2(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mt()){case ze:return 2;case dt:return 8;case Pe:case ki:return 32;case qs:return 268435456;default:return 32}default:return 32}}var X1=!1,Ma=null,Da=null,La=null,Tu=new Map,_u=new Map,ka=[],FA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function I2(i,a){switch(i){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":Da=null;break;case"mouseover":case"mouseout":La=null;break;case"pointerover":case"pointerout":Tu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":_u.delete(a.pointerId)}}function Nu(i,a,d,m,v,T){return i===null||i.nativeEvent!==T?(i={blockedOn:a,domEventName:d,eventSystemFlags:m,nativeEvent:T,targetContainers:[v]},a!==null&&(a=Ki(a),a!==null&&R2(a)),i):(i.eventSystemFlags|=m,a=i.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),i)}function VA(i,a,d,m,v){switch(a){case"focusin":return Ma=Nu(Ma,i,a,d,m,v),!0;case"dragenter":return Da=Nu(Da,i,a,d,m,v),!0;case"mouseover":return La=Nu(La,i,a,d,m,v),!0;case"pointerover":var T=v.pointerId;return Tu.set(T,Nu(Tu.get(T)||null,i,a,d,m,v)),!0;case"gotpointercapture":return T=v.pointerId,_u.set(T,Nu(_u.get(T)||null,i,a,d,m,v)),!0}return!1}function M2(i){var a=Rn(i.target);if(a!==null){var d=u(a);if(d!==null){if(a=d.tag,a===13){if(a=g(d),a!==null){i.blockedOn=a,ul(i.priority,function(){if(d.tag===13){var m=is();m=uo(m);var v=Cl(d,m);v!==null&&ss(v,d,m),$1(d,m)}});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ff(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var d=q1(i.nativeEvent);if(d===null){d=i.nativeEvent;var m=new d.constructor(d.type,d);ho=m,d.target.dispatchEvent(m),ho=null}else return a=Ki(d),a!==null&&R2(a),i.blockedOn=d,!1;a.shift()}return!0}function D2(i,a,d){Ff(i)&&d.delete(a)}function HA(){X1=!1,Ma!==null&&Ff(Ma)&&(Ma=null),Da!==null&&Ff(Da)&&(Da=null),La!==null&&Ff(La)&&(La=null),Tu.forEach(D2),_u.forEach(D2)}function Vf(i,a){i.blockedOn===a&&(i.blockedOn=null,X1||(X1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,HA)))}var Hf=null;function L2(i){Hf!==i&&(Hf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Hf===i&&(Hf=null);for(var a=0;a<i.length;a+=3){var d=i[a],m=i[a+1],v=i[a+2];if(typeof m!="function"){if(Y1(m||d)===null)continue;break}var T=Ki(d);T!==null&&(i.splice(a,3),a-=3,Y0(T,{pending:!0,data:v,method:d.method,action:m},m,v))}}))}function Ru(i){function a(K){return Vf(K,i)}Ma!==null&&Vf(Ma,i),Da!==null&&Vf(Da,i),La!==null&&Vf(La,i),Tu.forEach(a),_u.forEach(a);for(var d=0;d<ka.length;d++){var m=ka[d];m.blockedOn===i&&(m.blockedOn=null)}for(;0<ka.length&&(d=ka[0],d.blockedOn===null);)M2(d),d.blockedOn===null&&ka.shift();if(d=(i.ownerDocument||i).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var v=d[m],T=d[m+1],D=v[vn]||null;if(typeof T=="function")D||L2(d);else if(D){var F=null;if(T&&T.hasAttribute("formAction")){if(v=T,D=T[vn]||null)F=D.formAction;else if(Y1(v)!==null)continue}else F=D.action;typeof F=="function"?d[m+1]=F:(d.splice(m,3),m-=3),L2(d)}}}function W1(i){this._internalRoot=i}zf.prototype.render=W1.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var d=a.current,m=is();_2(d,m,i,a,null,null)},zf.prototype.unmount=W1.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;_2(i.current,2,null,i,null,null),Cf(),a[Xs]=null}};function zf(i){this._internalRoot=i}zf.prototype.unstable_scheduleHydration=function(i){if(i){var a=Cr();i={blockedOn:null,target:i,priority:a};for(var d=0;d<ka.length&&a!==0&&a<ka[d].priority;d++);ka.splice(d,0,i),d===0&&M2(i)}};var k2=e.version;if(k2!=="19.1.0")throw Error(r(527,k2,"19.1.0"));le.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=b(a),i=i!==null?x(i):null,i=i===null?null:i.stateNode,i};var zA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$f.isDisabled&&$f.supportsFiber)try{Ct=$f.inject(zA),wt=$f}catch{}}return Mu.createRoot=function(i,a){if(!l(i))throw Error(r(299));var d=!1,m="",v=Zx,T=Qx,D=Jx,F=null;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(D=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(F=a.unstable_transitionCallbacks)),a=A2(i,1,!1,null,null,d,m,v,T,D,F,null),i[Xs]=a.current,I1(i),new W1(a)},Mu.hydrateRoot=function(i,a,d){if(!l(i))throw Error(r(299));var m=!1,v="",T=Zx,D=Qx,F=Jx,K=null,me=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(D=d.onCaughtError),d.onRecoverableError!==void 0&&(F=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(K=d.unstable_transitionCallbacks),d.formState!==void 0&&(me=d.formState)),a=A2(i,1,!0,a,d??null,m,v,T,D,F,K,me),a.context=T2(null),d=a.current,m=is(),m=uo(m),v=ya(m),v.callback=null,ba(d,v,m),d=m,a.current.lanes=d,Wi(a,d),dr(a),i[Xs]=a.current,I1(i),new zf(a)},Mu.version="19.1.0",Mu}var ub;function mO(){if(ub)return eg.exports;ub=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),eg.exports=gO(),eg.exports}var pO=mO(),Du={},db;function xO(){if(db)return Du;db=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.parse=g,Du.serialize=x;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,u=(()=>{const N=function(){};return N.prototype=Object.create(null),N})();function g(N,I){const M=new u,j=N.length;if(j<2)return M;const U=(I==null?void 0:I.decode)||S;let z=0;do{const q=N.indexOf("=",z);if(q===-1)break;const B=N.indexOf(";",z),V=B===-1?j:B;if(q>V){z=N.lastIndexOf(";",q-1)+1;continue}const H=y(N,z,q),J=b(N,q,H),X=N.slice(H,J);if(M[X]===void 0){let oe=y(N,q+1,V),Y=b(N,V,oe);const be=U(N.slice(oe,Y));M[X]=be}z=V+1}while(z<j);return M}function y(N,I,M){do{const j=N.charCodeAt(I);if(j!==32&&j!==9)return I}while(++I<M);return M}function b(N,I,M){for(;I>M;){const j=N.charCodeAt(--I);if(j!==32&&j!==9)return I+1}return M}function x(N,I,M){const j=(M==null?void 0:M.encode)||encodeURIComponent;if(!t.test(N))throw new TypeError(`argument name is invalid: ${N}`);const U=j(I);if(!e.test(U))throw new TypeError(`argument val is invalid: ${I}`);let z=N+"="+U;if(!M)return z;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);z+="; Max-Age="+M.maxAge}if(M.domain){if(!n.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);z+="; Domain="+M.domain}if(M.path){if(!r.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);z+="; Path="+M.path}if(M.expires){if(!A(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);z+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(z+="; HttpOnly"),M.secure&&(z+="; Secure"),M.partitioned&&(z+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":z+="; Priority=Low";break;case"medium":z+="; Priority=Medium";break;case"high":z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":z+="; SameSite=Strict";break;case"lax":z+="; SameSite=Lax";break;case"none":z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return z}function S(N){if(N.indexOf("%")===-1)return N;try{return decodeURIComponent(N)}catch{return N}}function A(N){return l.call(N)==="[object Date]"}return Du}xO();var fb="popstate";function yO(t={}){function e(l,u){let{pathname:g="/",search:y="",hash:b=""}=ol(l.location.hash.substring(1));return!g.startsWith("/")&&!g.startsWith(".")&&(g="/"+g),Pg("",{pathname:g,search:y,hash:b},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(l,u){let g=l.document.querySelector("base"),y="";if(g&&g.getAttribute("href")){let b=l.location.href,x=b.indexOf("#");y=x===-1?b:b.slice(0,x)}return y+"#"+(typeof u=="string"?u:cd(u))}function r(l,u){As(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return wO(e,n,r,t)}function xn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function As(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bO(){return Math.random().toString(36).substring(2,10)}function hb(t,e){return{usr:t.state,key:t.key,idx:e}}function Pg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ol(e):e,state:n,key:e&&e.key||r||bO()}}function cd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ol(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function wO(t,e,n,r={}){let{window:l=document.defaultView,v5Compat:u=!1}=r,g=l.history,y="POP",b=null,x=S();x==null&&(x=0,g.replaceState({...g.state,idx:x},""));function S(){return(g.state||{idx:null}).idx}function A(){y="POP";let U=S(),z=U==null?null:U-x;x=U,b&&b({action:y,location:j.location,delta:z})}function N(U,z){y="PUSH";let q=Pg(j.location,U,z);n&&n(q,U),x=S()+1;let B=hb(q,x),V=j.createHref(q);try{g.pushState(B,"",V)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;l.location.assign(V)}u&&b&&b({action:y,location:j.location,delta:1})}function I(U,z){y="REPLACE";let q=Pg(j.location,U,z);n&&n(q,U),x=S();let B=hb(q,x),V=j.createHref(q);g.replaceState(B,"",V),u&&b&&b({action:y,location:j.location,delta:0})}function M(U){return vO(U)}let j={get action(){return y},get location(){return t(l,g)},listen(U){if(b)throw new Error("A history only accepts one active listener");return l.addEventListener(fb,A),b=U,()=>{l.removeEventListener(fb,A),b=null}},createHref(U){return e(l,U)},createURL:M,encodeLocation(U){let z=M(U);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:N,replace:I,go(U){return g.go(U)}};return j}function vO(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),xn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:cd(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function x3(t,e,n="/"){return SO(t,e,n,!1)}function SO(t,e,n,r){let l=typeof e=="string"?ol(e):e,u=ea(l.pathname||"/",n);if(u==null)return null;let g=y3(t);EO(g);let y=null;for(let b=0;y==null&&b<g.length;++b){let x=LO(u);y=MO(g[b],x,r)}return y}function y3(t,e=[],n=[],r=""){let l=(u,g,y)=>{let b={relativePath:y===void 0?u.path||"":y,caseSensitive:u.caseSensitive===!0,childrenIndex:g,route:u};b.relativePath.startsWith("/")&&(xn(b.relativePath.startsWith(r),`Absolute route path "${b.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(r.length));let x=Zr([r,b.relativePath]),S=n.concat(b);u.children&&u.children.length>0&&(xn(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),y3(u.children,e,S,x)),!(u.path==null&&!u.index)&&e.push({path:x,score:OO(x,u.index),routesMeta:S})};return t.forEach((u,g)=>{var y;if(u.path===""||!((y=u.path)!=null&&y.includes("?")))l(u,g);else for(let b of b3(u.path))l(u,g,b)}),e}function b3(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(r.length===0)return l?[u,""]:[u];let g=b3(r.join("/")),y=[];return y.push(...g.map(b=>b===""?u:[u,b].join("/"))),l&&y.push(...g),y.map(b=>t.startsWith("/")&&b===""?"/":b)}function EO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:IO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var CO=/^:[\w-]+$/,AO=3,TO=2,_O=1,NO=10,RO=-2,gb=t=>t==="*";function OO(t,e){let n=t.split("/"),r=n.length;return n.some(gb)&&(r+=RO),e&&(r+=TO),n.filter(l=>!gb(l)).reduce((l,u)=>l+(CO.test(u)?AO:u===""?_O:NO),r)}function IO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,l)=>r===e[l])?t[t.length-1]-e[e.length-1]:0}function MO(t,e,n=!1){let{routesMeta:r}=t,l={},u="/",g=[];for(let y=0;y<r.length;++y){let b=r[y],x=y===r.length-1,S=u==="/"?e:e.slice(u.length)||"/",A=wh({path:b.relativePath,caseSensitive:b.caseSensitive,end:x},S),N=b.route;if(!A&&x&&n&&!r[r.length-1].route.index&&(A=wh({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},S)),!A)return null;Object.assign(l,A.params),g.push({params:l,pathname:Zr([u,A.pathname]),pathnameBase:PO(Zr([u,A.pathnameBase])),route:N}),A.pathnameBase!=="/"&&(u=Zr([u,A.pathnameBase]))}return g}function wh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=DO(t.path,t.caseSensitive,t.end),l=e.match(n);if(!l)return null;let u=l[0],g=u.replace(/(.)\/+$/,"$1"),y=l.slice(1);return{params:r.reduce((x,{paramName:S,isOptional:A},N)=>{if(S==="*"){let M=y[N]||"";g=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const I=y[N];return A&&!I?x[S]=void 0:x[S]=(I||"").replace(/%2F/g,"/"),x},{}),pathname:u,pathnameBase:g,pattern:t}}function DO(t,e=!1,n=!0){As(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,y,b)=>(r.push({paramName:y,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),r]}function LO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return As(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ea(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function kO(t,e="/"){let{pathname:n,search:r="",hash:l=""}=typeof t=="string"?ol(t):t;return{pathname:n?n.startsWith("/")?n:jO(n,e):e,search:UO(r),hash:FO(l)}}function jO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function sg(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function BO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Bm(t){let e=BO(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Pm(t,e,n,r=!1){let l;typeof t=="string"?l=ol(t):(l={...t},xn(!l.pathname||!l.pathname.includes("?"),sg("?","pathname","search",l)),xn(!l.pathname||!l.pathname.includes("#"),sg("#","pathname","hash",l)),xn(!l.search||!l.search.includes("#"),sg("#","search","hash",l)));let u=t===""||l.pathname==="",g=u?"/":l.pathname,y;if(g==null)y=n;else{let A=e.length-1;if(!r&&g.startsWith("..")){let N=g.split("/");for(;N[0]==="..";)N.shift(),A-=1;l.pathname=N.join("/")}y=A>=0?e[A]:"/"}let b=kO(l,y),x=g&&g!=="/"&&g.endsWith("/"),S=(u||g===".")&&n.endsWith("/");return!b.pathname.endsWith("/")&&(x||S)&&(b.pathname+="/"),b}var Zr=t=>t.join("/").replace(/\/\/+/g,"/"),PO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),UO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function VO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var w3=["POST","PUT","PATCH","DELETE"];new Set(w3);var HO=["GET",...w3];new Set(HO);var Nc=R.createContext(null);Nc.displayName="DataRouter";var Fh=R.createContext(null);Fh.displayName="DataRouterState";var v3=R.createContext({isTransitioning:!1});v3.displayName="ViewTransition";var zO=R.createContext(new Map);zO.displayName="Fetchers";var $O=R.createContext(null);$O.displayName="Await";var Gs=R.createContext(null);Gs.displayName="Navigation";var Ed=R.createContext(null);Ed.displayName="Location";var Ts=R.createContext({outlet:null,matches:[],isDataRoute:!1});Ts.displayName="Route";var Um=R.createContext(null);Um.displayName="RouteError";function GO(t,{relative:e}={}){xn(Rc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(Gs),{hash:l,pathname:u,search:g}=Cd(t,{relative:e}),y=u;return n!=="/"&&(y=u==="/"?n:Zr([n,u])),r.createHref({pathname:y,search:g,hash:l})}function Rc(){return R.useContext(Ed)!=null}function vr(){return xn(Rc(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Ed).location}var S3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function E3(t){R.useContext(Gs).static||R.useLayoutEffect(t)}function _s(){let{isDataRoute:t}=R.useContext(Ts);return t?oI():qO()}function qO(){xn(Rc(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(Nc),{basename:e,navigator:n}=R.useContext(Gs),{matches:r}=R.useContext(Ts),{pathname:l}=vr(),u=JSON.stringify(Bm(r)),g=R.useRef(!1);return E3(()=>{g.current=!0}),R.useCallback((b,x={})=>{if(As(g.current,S3),!g.current)return;if(typeof b=="number"){n.go(b);return}let S=Pm(b,JSON.parse(u),l,x.relative==="path");t==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:Zr([e,S.pathname])),(x.replace?n.replace:n.push)(S,x.state,x)},[e,n,u,l,t])}var YO=R.createContext(null);function XO(t){let e=R.useContext(Ts).outlet;return e&&R.createElement(YO.Provider,{value:t},e)}function WO(){let{matches:t}=R.useContext(Ts),e=t[t.length-1];return e?e.params:{}}function Cd(t,{relative:e}={}){let{matches:n}=R.useContext(Ts),{pathname:r}=vr(),l=JSON.stringify(Bm(n));return R.useMemo(()=>Pm(t,JSON.parse(l),r,e==="path"),[t,l,r,e])}function KO(t,e){return C3(t,e)}function C3(t,e,n,r){var z;xn(Rc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=R.useContext(Gs),{matches:u}=R.useContext(Ts),g=u[u.length-1],y=g?g.params:{},b=g?g.pathname:"/",x=g?g.pathnameBase:"/",S=g&&g.route;{let q=S&&S.path||"";A3(b,!S||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let A=vr(),N;if(e){let q=typeof e=="string"?ol(e):e;xn(x==="/"||((z=q.pathname)==null?void 0:z.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${q.pathname}" was given in the \`location\` prop.`),N=q}else N=A;let I=N.pathname||"/",M=I;if(x!=="/"){let q=x.replace(/^\//,"").split("/");M="/"+I.replace(/^\//,"").split("/").slice(q.length).join("/")}let j=x3(t,{pathname:M});As(S||j!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),As(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=tI(j&&j.map(q=>Object.assign({},q,{params:Object.assign({},y,q.params),pathname:Zr([x,l.encodeLocation?l.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?x:Zr([x,l.encodeLocation?l.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),u,n,r);return e&&U?R.createElement(Ed.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},U):U}function ZO(){let t=aI(),e=VO(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},g=null;return console.error("Error handled by React Router default ErrorBoundary:",t),g=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:u},"ErrorBoundary")," or"," ",R.createElement("code",{style:u},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:l},n):null,g)}var QO=R.createElement(ZO,null),JO=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?R.createElement(Ts.Provider,{value:this.props.routeContext},R.createElement(Um.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function eI({routeContext:t,match:e,children:n}){let r=R.useContext(Nc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Ts.Provider,{value:t},n)}function tI(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,u=n==null?void 0:n.errors;if(u!=null){let b=l.findIndex(x=>x.route.id&&(u==null?void 0:u[x.route.id])!==void 0);xn(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,b+1))}let g=!1,y=-1;if(n)for(let b=0;b<l.length;b++){let x=l[b];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(y=b),x.route.id){let{loaderData:S,errors:A}=n,N=x.route.loader&&!S.hasOwnProperty(x.route.id)&&(!A||A[x.route.id]===void 0);if(x.route.lazy||N){g=!0,y>=0?l=l.slice(0,y+1):l=[l[0]];break}}}return l.reduceRight((b,x,S)=>{let A,N=!1,I=null,M=null;n&&(A=u&&x.route.id?u[x.route.id]:void 0,I=x.route.errorElement||QO,g&&(y<0&&S===0?(A3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,M=null):y===S&&(N=!0,M=x.route.hydrateFallbackElement||null)));let j=e.concat(l.slice(0,S+1)),U=()=>{let z;return A?z=I:N?z=M:x.route.Component?z=R.createElement(x.route.Component,null):x.route.element?z=x.route.element:z=b,R.createElement(eI,{match:x,routeContext:{outlet:b,matches:j,isDataRoute:n!=null},children:z})};return n&&(x.route.ErrorBoundary||x.route.errorElement||S===0)?R.createElement(JO,{location:n.location,revalidation:n.revalidation,component:I,error:A,children:U(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):U()},null)}function Fm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nI(t){let e=R.useContext(Nc);return xn(e,Fm(t)),e}function iI(t){let e=R.useContext(Fh);return xn(e,Fm(t)),e}function sI(t){let e=R.useContext(Ts);return xn(e,Fm(t)),e}function Vm(t){let e=sI(t),n=e.matches[e.matches.length-1];return xn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function rI(){return Vm("useRouteId")}function aI(){var r;let t=R.useContext(Um),e=iI("useRouteError"),n=Vm("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function oI(){let{router:t}=nI("useNavigate"),e=Vm("useNavigate"),n=R.useRef(!1);return E3(()=>{n.current=!0}),R.useCallback(async(l,u={})=>{As(n.current,S3),n.current&&(typeof l=="number"?t.navigate(l):await t.navigate(l,{fromRouteId:e,...u}))},[t,e])}var mb={};function A3(t,e,n){!e&&!mb[t]&&(mb[t]=!0,As(!1,n))}R.memo(lI);function lI({routes:t,future:e,state:n}){return C3(t,void 0,n,e)}function pb({to:t,replace:e,state:n,relative:r}){xn(Rc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=R.useContext(Gs);As(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=R.useContext(Ts),{pathname:g}=vr(),y=_s(),b=Pm(t,Bm(u),g,r==="path"),x=JSON.stringify(b);return R.useEffect(()=>{y(JSON.parse(x),{replace:e,state:n,relative:r})},[y,x,r,e,n]),null}function cI(t){return XO(t.context)}function kn(t){xn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function uI({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:l,static:u=!1}){xn(!Rc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=t.replace(/^\/*/,"/"),y=R.useMemo(()=>({basename:g,navigator:l,static:u,future:{}}),[g,l,u]);typeof n=="string"&&(n=ol(n));let{pathname:b="/",search:x="",hash:S="",state:A=null,key:N="default"}=n,I=R.useMemo(()=>{let M=ea(b,g);return M==null?null:{location:{pathname:M,search:x,hash:S,state:A,key:N},navigationType:r}},[g,b,x,S,A,N,r]);return As(I!=null,`<Router basename="${g}"> is not able to match the URL "${b}${x}${S}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:R.createElement(Gs.Provider,{value:y},R.createElement(Ed.Provider,{children:e,value:I}))}function dI({children:t,location:e}){return KO(Ug(t),e)}function Ug(t,e=[]){let n=[];return R.Children.forEach(t,(r,l)=>{if(!R.isValidElement(r))return;let u=[...e,l];if(r.type===R.Fragment){n.push.apply(n,Ug(r.props.children,u));return}xn(r.type===kn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let g={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(g.children=Ug(r.props.children,u)),n.push(g)}),n}var uh="get",dh="application/x-www-form-urlencoded";function Vh(t){return t!=null&&typeof t.tagName=="string"}function fI(t){return Vh(t)&&t.tagName.toLowerCase()==="button"}function hI(t){return Vh(t)&&t.tagName.toLowerCase()==="form"}function gI(t){return Vh(t)&&t.tagName.toLowerCase()==="input"}function mI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pI(t,e){return t.button===0&&(!e||e==="_self")&&!mI(t)}var Xf=null;function xI(){if(Xf===null)try{new FormData(document.createElement("form"),0),Xf=!1}catch{Xf=!0}return Xf}var yI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rg(t){return t!=null&&!yI.has(t)?(As(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dh}"`),null):t}function bI(t,e){let n,r,l,u,g;if(hI(t)){let y=t.getAttribute("action");r=y?ea(y,e):null,n=t.getAttribute("method")||uh,l=rg(t.getAttribute("enctype"))||dh,u=new FormData(t)}else if(fI(t)||gI(t)&&(t.type==="submit"||t.type==="image")){let y=t.form;if(y==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=t.getAttribute("formaction")||y.getAttribute("action");if(r=b?ea(b,e):null,n=t.getAttribute("formmethod")||y.getAttribute("method")||uh,l=rg(t.getAttribute("formenctype"))||rg(y.getAttribute("enctype"))||dh,u=new FormData(y,t),!xI()){let{name:x,type:S,value:A}=t;if(S==="image"){let N=x?`${x}.`:"";u.append(`${N}x`,"0"),u.append(`${N}y`,"0")}else x&&u.append(x,A)}}else{if(Vh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=uh,r=null,l=dh,g=t}return u&&l==="text/plain"&&(g=u,u=void 0),{action:r,method:n.toLowerCase(),encType:l,formData:u,body:g}}function Hm(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function wI(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vI(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function SI(t,e,n){let r=await Promise.all(t.map(async l=>{let u=e.routes[l.route.id];if(u){let g=await wI(u,n);return g.links?g.links():[]}return[]}));return TI(r.flat(1).filter(vI).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function xb(t,e,n,r,l,u){let g=(b,x)=>n[x]?b.route.id!==n[x].route.id:!0,y=(b,x)=>{var S;return n[x].pathname!==b.pathname||((S=n[x].route.path)==null?void 0:S.endsWith("*"))&&n[x].params["*"]!==b.params["*"]};return u==="assets"?e.filter((b,x)=>g(b,x)||y(b,x)):u==="data"?e.filter((b,x)=>{var A;let S=r.routes[b.route.id];if(!S||!S.hasLoader)return!1;if(g(b,x)||y(b,x))return!0;if(b.route.shouldRevalidate){let N=b.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((A=n[0])==null?void 0:A.params)||{},nextUrl:new URL(t,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function EI(t,e,{includeHydrateFallback:n}={}){return CI(t.map(r=>{let l=e.routes[r.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function CI(t){return[...new Set(t)]}function AI(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function TI(t,e){let n=new Set;return new Set(e),t.reduce((r,l)=>{let u=JSON.stringify(AI(l));return n.has(u)||(n.add(u),r.push({key:u,link:l})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var _I=new Set([100,101,204,205]);function NI(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&ea(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function T3(){let t=R.useContext(Nc);return Hm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function RI(){let t=R.useContext(Fh);return Hm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var zm=R.createContext(void 0);zm.displayName="FrameworkContext";function _3(){let t=R.useContext(zm);return Hm(t,"You must render this element inside a <HydratedRouter> element"),t}function OI(t,e){let n=R.useContext(zm),[r,l]=R.useState(!1),[u,g]=R.useState(!1),{onFocus:y,onBlur:b,onMouseEnter:x,onMouseLeave:S,onTouchStart:A}=e,N=R.useRef(null);R.useEffect(()=>{if(t==="render"&&g(!0),t==="viewport"){let j=z=>{z.forEach(q=>{g(q.isIntersecting)})},U=new IntersectionObserver(j,{threshold:.5});return N.current&&U.observe(N.current),()=>{U.disconnect()}}},[t]),R.useEffect(()=>{if(r){let j=setTimeout(()=>{g(!0)},100);return()=>{clearTimeout(j)}}},[r]);let I=()=>{l(!0)},M=()=>{l(!1),g(!1)};return n?t!=="intent"?[u,N,{}]:[u,N,{onFocus:Lu(y,I),onBlur:Lu(b,M),onMouseEnter:Lu(x,I),onMouseLeave:Lu(S,M),onTouchStart:Lu(A,I)}]:[!1,N,{}]}function Lu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function II({page:t,...e}){let{router:n}=T3(),r=R.useMemo(()=>x3(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?R.createElement(DI,{page:t,matches:r,...e}):null}function MI(t){let{manifest:e,routeModules:n}=_3(),[r,l]=R.useState([]);return R.useEffect(()=>{let u=!1;return SI(t,e,n).then(g=>{u||l(g)}),()=>{u=!0}},[t,e,n]),r}function DI({page:t,matches:e,...n}){let r=vr(),{manifest:l,routeModules:u}=_3(),{basename:g}=T3(),{loaderData:y,matches:b}=RI(),x=R.useMemo(()=>xb(t,e,b,l,r,"data"),[t,e,b,l,r]),S=R.useMemo(()=>xb(t,e,b,l,r,"assets"),[t,e,b,l,r]),A=R.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let M=new Set,j=!1;if(e.forEach(z=>{var B;let q=l.routes[z.route.id];!q||!q.hasLoader||(!x.some(V=>V.route.id===z.route.id)&&z.route.id in y&&((B=u[z.route.id])!=null&&B.shouldRevalidate)||q.hasClientLoader?j=!0:M.add(z.route.id))}),M.size===0)return[];let U=NI(t,g);return j&&M.size>0&&U.searchParams.set("_routes",e.filter(z=>M.has(z.route.id)).map(z=>z.route.id).join(",")),[U.pathname+U.search]},[g,y,r,l,x,e,t,u]),N=R.useMemo(()=>EI(S,l),[S,l]),I=MI(S);return R.createElement(R.Fragment,null,A.map(M=>R.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),N.map(M=>R.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),I.map(({key:M,link:j})=>R.createElement("link",{key:M,...j})))}function LI(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var N3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{N3&&(window.__reactRouterVersion="7.6.3")}catch{}function kI({basename:t,children:e,window:n}){let r=R.useRef();r.current==null&&(r.current=yO({window:n,v5Compat:!0}));let l=r.current,[u,g]=R.useState({action:l.action,location:l.location}),y=R.useCallback(b=>{R.startTransition(()=>g(b))},[g]);return R.useLayoutEffect(()=>l.listen(y),[l,y]),R.createElement(uI,{basename:t,children:e,location:u.location,navigationType:u.action,navigator:l})}var R3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vh=R.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:l,reloadDocument:u,replace:g,state:y,target:b,to:x,preventScrollReset:S,viewTransition:A,...N},I){let{basename:M}=R.useContext(Gs),j=typeof x=="string"&&R3.test(x),U,z=!1;if(typeof x=="string"&&j&&(U=x,N3))try{let Y=new URL(window.location.href),be=x.startsWith("//")?new URL(Y.protocol+x):new URL(x),Ae=ea(be.pathname,M);be.origin===Y.origin&&Ae!=null?x=Ae+be.search+be.hash:z=!0}catch{As(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=GO(x,{relative:l}),[B,V,H]=OI(r,N),J=UI(x,{replace:g,state:y,target:b,preventScrollReset:S,relative:l,viewTransition:A});function X(Y){e&&e(Y),Y.defaultPrevented||J(Y)}let oe=R.createElement("a",{...N,...H,href:U||q,onClick:z||u?e:X,ref:LI(I,V),target:b,"data-discover":!j&&n==="render"?"true":void 0});return B&&!j?R.createElement(R.Fragment,null,oe,R.createElement(II,{page:q})):oe});vh.displayName="Link";var jI=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:l=!1,style:u,to:g,viewTransition:y,children:b,...x},S){let A=Cd(g,{relative:x.relative}),N=vr(),I=R.useContext(Fh),{navigator:M,basename:j}=R.useContext(Gs),U=I!=null&&$I(A)&&y===!0,z=M.encodeLocation?M.encodeLocation(A).pathname:A.pathname,q=N.pathname,B=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;n||(q=q.toLowerCase(),B=B?B.toLowerCase():null,z=z.toLowerCase()),B&&j&&(B=ea(B,j)||B);const V=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let H=q===z||!l&&q.startsWith(z)&&q.charAt(V)==="/",J=B!=null&&(B===z||!l&&B.startsWith(z)&&B.charAt(z.length)==="/"),X={isActive:H,isPending:J,isTransitioning:U},oe=H?e:void 0,Y;typeof r=="function"?Y=r(X):Y=[r,H?"active":null,J?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let be=typeof u=="function"?u(X):u;return R.createElement(vh,{...x,"aria-current":oe,className:Y,ref:S,style:be,to:g,viewTransition:y},typeof b=="function"?b(X):b)});jI.displayName="NavLink";var BI=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:l,state:u,method:g=uh,action:y,onSubmit:b,relative:x,preventScrollReset:S,viewTransition:A,...N},I)=>{let M=HI(),j=zI(y,{relative:x}),U=g.toLowerCase()==="get"?"get":"post",z=typeof y=="string"&&R3.test(y),q=B=>{if(b&&b(B),B.defaultPrevented)return;B.preventDefault();let V=B.nativeEvent.submitter,H=(V==null?void 0:V.getAttribute("formmethod"))||g;M(V||B.currentTarget,{fetcherKey:e,method:H,navigate:n,replace:l,state:u,relative:x,preventScrollReset:S,viewTransition:A})};return R.createElement("form",{ref:I,method:U,action:j,onSubmit:r?b:q,...N,"data-discover":!z&&t==="render"?"true":void 0})});BI.displayName="Form";function PI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function O3(t){let e=R.useContext(Nc);return xn(e,PI(t)),e}function UI(t,{target:e,replace:n,state:r,preventScrollReset:l,relative:u,viewTransition:g}={}){let y=_s(),b=vr(),x=Cd(t,{relative:u});return R.useCallback(S=>{if(pI(S,e)){S.preventDefault();let A=n!==void 0?n:cd(b)===cd(x);y(t,{replace:A,state:r,preventScrollReset:l,relative:u,viewTransition:g})}},[b,y,x,n,r,e,t,l,u,g])}var FI=0,VI=()=>`__${String(++FI)}__`;function HI(){let{router:t}=O3("useSubmit"),{basename:e}=R.useContext(Gs),n=rI();return R.useCallback(async(r,l={})=>{let{action:u,method:g,encType:y,formData:b,body:x}=bI(r,e);if(l.navigate===!1){let S=l.fetcherKey||VI();await t.fetch(S,n,l.action||u,{preventScrollReset:l.preventScrollReset,formData:b,body:x,formMethod:l.method||g,formEncType:l.encType||y,flushSync:l.flushSync})}else await t.navigate(l.action||u,{preventScrollReset:l.preventScrollReset,formData:b,body:x,formMethod:l.method||g,formEncType:l.encType||y,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[t,e,n])}function zI(t,{relative:e}={}){let{basename:n}=R.useContext(Gs),r=R.useContext(Ts);xn(r,"useFormAction must be used inside a RouteContext");let[l]=r.matches.slice(-1),u={...Cd(t||".",{relative:e})},g=vr();if(t==null){u.search=g.search;let y=new URLSearchParams(u.search),b=y.getAll("index");if(b.some(S=>S==="")){y.delete("index"),b.filter(A=>A).forEach(A=>y.append("index",A));let S=y.toString();u.search=S?`?${S}`:""}}return(!t||t===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Zr([n,u.pathname])),cd(u)}function $I(t,e={}){let n=R.useContext(v3);xn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=O3("useViewTransitionState"),l=Cd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let u=ea(n.currentLocation.pathname,r)||n.currentLocation.pathname,g=ea(n.nextLocation.pathname,r)||n.nextLocation.pathname;return wh(l.pathname,g)!=null||wh(l.pathname,u)!=null}[..._I];var GI=p3(),Oc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},sl=typeof window>"u"||"Deno"in globalThis;function Di(){}function qI(t,e){return typeof t=="function"?t(e):t}function Fg(t){return typeof t=="number"&&t>=0&&t!==1/0}function I3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function no(t,e){return typeof t=="function"?t(e):t}function zs(t,e){return typeof t=="function"?t(e):t}function yb(t,e){const{type:n="all",exact:r,fetchStatus:l,predicate:u,queryKey:g,stale:y}=t;if(g){if(r){if(e.queryHash!==$m(g,e.options))return!1}else if(!ud(e.queryKey,g))return!1}if(n!=="all"){const b=e.isActive();if(n==="active"&&!b||n==="inactive"&&b)return!1}return!(typeof y=="boolean"&&e.isStale()!==y||l&&l!==e.state.fetchStatus||u&&!u(e))}function bb(t,e){const{exact:n,status:r,predicate:l,mutationKey:u}=t;if(u){if(!e.options.mutationKey)return!1;if(n){if(rl(e.options.mutationKey)!==rl(u))return!1}else if(!ud(e.options.mutationKey,u))return!1}return!(r&&e.state.status!==r||l&&!l(e))}function $m(t,e){return((e==null?void 0:e.queryKeyHashFn)||rl)(t)}function rl(t){return JSON.stringify(t,(e,n)=>Vg(n)?Object.keys(n).sort().reduce((r,l)=>(r[l]=n[l],r),{}):n)}function ud(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ud(t[n],e[n])):!1}function M3(t,e){if(t===e)return t;const n=wb(t)&&wb(e);if(n||Vg(t)&&Vg(e)){const r=n?t:Object.keys(t),l=r.length,u=n?e:Object.keys(e),g=u.length,y=n?[]:{},b=new Set(r);let x=0;for(let S=0;S<g;S++){const A=n?S:u[S];(!n&&b.has(A)||n)&&t[A]===void 0&&e[A]===void 0?(y[A]=void 0,x++):(y[A]=M3(t[A],e[A]),y[A]===t[A]&&t[A]!==void 0&&x++)}return l===g&&x===l?t:y}return e}function Sh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function wb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Vg(t){if(!vb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!vb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function vb(t){return Object.prototype.toString.call(t)==="[object Object]"}function YI(t){return new Promise(e=>{setTimeout(e,t)})}function Hg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?M3(t,e):e}function XI(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function WI(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Gm=Symbol();function D3(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Gm?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function L3(t,e){return typeof t=="function"?t(...e):!!t}var Go,$a,hc,e3,KI=(e3=class extends Oc{constructor(){super();st(this,Go);st(this,$a);st(this,hc);qe(this,hc,e=>{if(!sl&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ee(this,$a)||this.setEventListener(ee(this,hc))}onUnsubscribe(){var e;this.hasListeners()||((e=ee(this,$a))==null||e.call(this),qe(this,$a,void 0))}setEventListener(e){var n;qe(this,hc,e),(n=ee(this,$a))==null||n.call(this),qe(this,$a,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ee(this,Go)!==e&&(qe(this,Go,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof ee(this,Go)=="boolean"?ee(this,Go):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Go=new WeakMap,$a=new WeakMap,hc=new WeakMap,e3),qm=new KI,gc,Ga,mc,t3,ZI=(t3=class extends Oc{constructor(){super();st(this,gc,!0);st(this,Ga);st(this,mc);qe(this,mc,e=>{if(!sl&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){ee(this,Ga)||this.setEventListener(ee(this,mc))}onUnsubscribe(){var e;this.hasListeners()||((e=ee(this,Ga))==null||e.call(this),qe(this,Ga,void 0))}setEventListener(e){var n;qe(this,mc,e),(n=ee(this,Ga))==null||n.call(this),qe(this,Ga,e(this.setOnline.bind(this)))}setOnline(e){ee(this,gc)!==e&&(qe(this,gc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ee(this,gc)}},gc=new WeakMap,Ga=new WeakMap,mc=new WeakMap,t3),Eh=new ZI;function zg(){let t,e;const n=new Promise((l,u)=>{t=l,e=u});n.status="pending",n.catch(()=>{});function r(l){Object.assign(n,l),delete n.resolve,delete n.reject}return n.resolve=l=>{r({status:"fulfilled",value:l}),t(l)},n.reject=l=>{r({status:"rejected",reason:l}),e(l)},n}function QI(t){return Math.min(1e3*2**t,3e4)}function k3(t){return(t??"online")==="online"?Eh.isOnline():!0}var j3=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ag(t){return t instanceof j3}function B3(t){let e=!1,n=0,r=!1,l;const u=zg(),g=j=>{var U;r||(N(new j3(j)),(U=t.abort)==null||U.call(t))},y=()=>{e=!0},b=()=>{e=!1},x=()=>qm.isFocused()&&(t.networkMode==="always"||Eh.isOnline())&&t.canRun(),S=()=>k3(t.networkMode)&&t.canRun(),A=j=>{var U;r||(r=!0,(U=t.onSuccess)==null||U.call(t,j),l==null||l(),u.resolve(j))},N=j=>{var U;r||(r=!0,(U=t.onError)==null||U.call(t,j),l==null||l(),u.reject(j))},I=()=>new Promise(j=>{var U;l=z=>{(r||x())&&j(z)},(U=t.onPause)==null||U.call(t)}).then(()=>{var j;l=void 0,r||(j=t.onContinue)==null||j.call(t)}),M=()=>{if(r)return;let j;const U=n===0?t.initialPromise:void 0;try{j=U??t.fn()}catch(z){j=Promise.reject(z)}Promise.resolve(j).then(A).catch(z=>{var J;if(r)return;const q=t.retry??(sl?0:3),B=t.retryDelay??QI,V=typeof B=="function"?B(n,z):B,H=q===!0||typeof q=="number"&&n<q||typeof q=="function"&&q(n,z);if(e||!H){N(z);return}n++,(J=t.onFail)==null||J.call(t,n,z),YI(V).then(()=>x()?void 0:I()).then(()=>{e?N(z):M()})})};return{promise:u,cancel:g,continue:()=>(l==null||l(),u),cancelRetry:y,continueRetry:b,canStart:S,start:()=>(S()?M():I().then(M),u)}}var JI=t=>setTimeout(t,0);function eM(){let t=[],e=0,n=y=>{y()},r=y=>{y()},l=JI;const u=y=>{e?t.push(y):l(()=>{n(y)})},g=()=>{const y=t;t=[],y.length&&l(()=>{r(()=>{y.forEach(b=>{n(b)})})})};return{batch:y=>{let b;e++;try{b=y()}finally{e--,e||g()}return b},batchCalls:y=>(...b)=>{u(()=>{y(...b)})},schedule:u,setNotifyFunction:y=>{n=y},setBatchNotifyFunction:y=>{r=y},setScheduler:y=>{l=y}}}var Zn=eM(),qo,n3,P3=(n3=class{constructor(){st(this,qo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Fg(this.gcTime)&&qe(this,qo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(sl?1/0:5*60*1e3))}clearGcTimeout(){ee(this,qo)&&(clearTimeout(ee(this,qo)),qe(this,qo,void 0))}},qo=new WeakMap,n3),pc,Yo,Ss,Xo,Ai,bd,Wo,Us,$r,i3,tM=(i3=class extends P3{constructor(e){super();st(this,Us);st(this,pc);st(this,Yo);st(this,Ss);st(this,Xo);st(this,Ai);st(this,bd);st(this,Wo);qe(this,Wo,!1),qe(this,bd,e.defaultOptions),this.setOptions(e.options),this.observers=[],qe(this,Xo,e.client),qe(this,Ss,ee(this,Xo).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,qe(this,pc,nM(this.options)),this.state=e.state??ee(this,pc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ee(this,Ai))==null?void 0:e.promise}setOptions(e){this.options={...ee(this,bd),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ee(this,Ss).remove(this)}setData(e,n){const r=Hg(this.state.data,e,this.options);return Et(this,Us,$r).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Et(this,Us,$r).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,l;const n=(r=ee(this,Ai))==null?void 0:r.promise;return(l=ee(this,Ai))==null||l.cancel(e),n?n.then(Di).catch(Di):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ee(this,pc))}isActive(){return this.observers.some(e=>zs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Gm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>no(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!I3(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=ee(this,Ai))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=ee(this,Ai))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ee(this,Ss).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(ee(this,Ai)&&(ee(this,Wo)?ee(this,Ai).cancel({revert:!0}):ee(this,Ai).cancelRetry()),this.scheduleGc()),ee(this,Ss).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Et(this,Us,$r).call(this,{type:"invalidate"})}fetch(e,n){var x,S,A;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(ee(this,Ai))return ee(this,Ai).continueRetry(),ee(this,Ai).promise}if(e&&this.setOptions(e),!this.options.queryFn){const N=this.observers.find(I=>I.options.queryFn);N&&this.setOptions(N.options)}const r=new AbortController,l=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(qe(this,Wo,!0),r.signal)})},u=()=>{const N=D3(this.options,n),M=(()=>{const j={client:ee(this,Xo),queryKey:this.queryKey,meta:this.meta};return l(j),j})();return qe(this,Wo,!1),this.options.persister?this.options.persister(N,M,this):N(M)},y=(()=>{const N={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:ee(this,Xo),state:this.state,fetchFn:u};return l(N),N})();(x=this.options.behavior)==null||x.onFetch(y,this),qe(this,Yo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((S=y.fetchOptions)==null?void 0:S.meta))&&Et(this,Us,$r).call(this,{type:"fetch",meta:(A=y.fetchOptions)==null?void 0:A.meta});const b=N=>{var I,M,j,U;ag(N)&&N.silent||Et(this,Us,$r).call(this,{type:"error",error:N}),ag(N)||((M=(I=ee(this,Ss).config).onError)==null||M.call(I,N,this),(U=(j=ee(this,Ss).config).onSettled)==null||U.call(j,this.state.data,N,this)),this.scheduleGc()};return qe(this,Ai,B3({initialPromise:n==null?void 0:n.initialPromise,fn:y.fetchFn,abort:r.abort.bind(r),onSuccess:N=>{var I,M,j,U;if(N===void 0){b(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(N)}catch(z){b(z);return}(M=(I=ee(this,Ss).config).onSuccess)==null||M.call(I,N,this),(U=(j=ee(this,Ss).config).onSettled)==null||U.call(j,N,this.state.error,this),this.scheduleGc()},onError:b,onFail:(N,I)=>{Et(this,Us,$r).call(this,{type:"failed",failureCount:N,error:I})},onPause:()=>{Et(this,Us,$r).call(this,{type:"pause"})},onContinue:()=>{Et(this,Us,$r).call(this,{type:"continue"})},retry:y.options.retry,retryDelay:y.options.retryDelay,networkMode:y.options.networkMode,canRun:()=>!0})),ee(this,Ai).start()}},pc=new WeakMap,Yo=new WeakMap,Ss=new WeakMap,Xo=new WeakMap,Ai=new WeakMap,bd=new WeakMap,Wo=new WeakMap,Us=new WeakSet,$r=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...U3(r.data,this.options),fetchMeta:e.meta??null};case"success":return qe(this,Yo,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const l=e.error;return ag(l)&&l.revert&&ee(this,Yo)?{...ee(this,Yo),fetchStatus:"idle"}:{...r,error:l,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Zn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ee(this,Ss).notify({query:this,type:"updated",action:e})})},i3);function U3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:k3(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function nM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var gr,s3,iM=(s3=class extends Oc{constructor(e={}){super();st(this,gr);this.config=e,qe(this,gr,new Map)}build(e,n,r){const l=n.queryKey,u=n.queryHash??$m(l,n);let g=this.get(u);return g||(g=new tM({client:e,queryKey:l,queryHash:u,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(l)}),this.add(g)),g}add(e){ee(this,gr).has(e.queryHash)||(ee(this,gr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=ee(this,gr).get(e.queryHash);n&&(e.destroy(),n===e&&ee(this,gr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Zn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ee(this,gr).get(e)}getAll(){return[...ee(this,gr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>yb(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>yb(e,r)):n}notify(e){Zn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Zn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Zn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},gr=new WeakMap,s3),mr,Ii,Ko,pr,Pa,r3,sM=(r3=class extends P3{constructor(e){super();st(this,pr);st(this,mr);st(this,Ii);st(this,Ko);this.mutationId=e.mutationId,qe(this,Ii,e.mutationCache),qe(this,mr,[]),this.state=e.state||F3(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ee(this,mr).includes(e)||(ee(this,mr).push(e),this.clearGcTimeout(),ee(this,Ii).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){qe(this,mr,ee(this,mr).filter(n=>n!==e)),this.scheduleGc(),ee(this,Ii).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ee(this,mr).length||(this.state.status==="pending"?this.scheduleGc():ee(this,Ii).remove(this))}continue(){var e;return((e=ee(this,Ko))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var u,g,y,b,x,S,A,N,I,M,j,U,z,q,B,V,H,J,X,oe;const n=()=>{Et(this,pr,Pa).call(this,{type:"continue"})};qe(this,Ko,B3({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(Y,be)=>{Et(this,pr,Pa).call(this,{type:"failed",failureCount:Y,error:be})},onPause:()=>{Et(this,pr,Pa).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ee(this,Ii).canRun(this)}));const r=this.state.status==="pending",l=!ee(this,Ko).canStart();try{if(r)n();else{Et(this,pr,Pa).call(this,{type:"pending",variables:e,isPaused:l}),await((g=(u=ee(this,Ii).config).onMutate)==null?void 0:g.call(u,e,this));const be=await((b=(y=this.options).onMutate)==null?void 0:b.call(y,e));be!==this.state.context&&Et(this,pr,Pa).call(this,{type:"pending",context:be,variables:e,isPaused:l})}const Y=await ee(this,Ko).start();return await((S=(x=ee(this,Ii).config).onSuccess)==null?void 0:S.call(x,Y,e,this.state.context,this)),await((N=(A=this.options).onSuccess)==null?void 0:N.call(A,Y,e,this.state.context)),await((M=(I=ee(this,Ii).config).onSettled)==null?void 0:M.call(I,Y,null,this.state.variables,this.state.context,this)),await((U=(j=this.options).onSettled)==null?void 0:U.call(j,Y,null,e,this.state.context)),Et(this,pr,Pa).call(this,{type:"success",data:Y}),Y}catch(Y){try{throw await((q=(z=ee(this,Ii).config).onError)==null?void 0:q.call(z,Y,e,this.state.context,this)),await((V=(B=this.options).onError)==null?void 0:V.call(B,Y,e,this.state.context)),await((J=(H=ee(this,Ii).config).onSettled)==null?void 0:J.call(H,void 0,Y,this.state.variables,this.state.context,this)),await((oe=(X=this.options).onSettled)==null?void 0:oe.call(X,void 0,Y,e,this.state.context)),Y}finally{Et(this,pr,Pa).call(this,{type:"error",error:Y})}}finally{ee(this,Ii).runNext(this)}}},mr=new WeakMap,Ii=new WeakMap,Ko=new WeakMap,pr=new WeakSet,Pa=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Zn.batch(()=>{ee(this,mr).forEach(r=>{r.onMutationUpdate(e)}),ee(this,Ii).notify({mutation:this,type:"updated",action:e})})},r3);function F3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Yr,Fs,wd,a3,rM=(a3=class extends Oc{constructor(e={}){super();st(this,Yr);st(this,Fs);st(this,wd);this.config=e,qe(this,Yr,new Set),qe(this,Fs,new Map),qe(this,wd,0)}build(e,n,r){const l=new sM({mutationCache:this,mutationId:++Gf(this,wd)._,options:e.defaultMutationOptions(n),state:r});return this.add(l),l}add(e){ee(this,Yr).add(e);const n=Wf(e);if(typeof n=="string"){const r=ee(this,Fs).get(n);r?r.push(e):ee(this,Fs).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ee(this,Yr).delete(e)){const n=Wf(e);if(typeof n=="string"){const r=ee(this,Fs).get(n);if(r)if(r.length>1){const l=r.indexOf(e);l!==-1&&r.splice(l,1)}else r[0]===e&&ee(this,Fs).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Wf(e);if(typeof n=="string"){const r=ee(this,Fs).get(n),l=r==null?void 0:r.find(u=>u.state.status==="pending");return!l||l===e}else return!0}runNext(e){var r;const n=Wf(e);if(typeof n=="string"){const l=(r=ee(this,Fs).get(n))==null?void 0:r.find(u=>u!==e&&u.state.isPaused);return(l==null?void 0:l.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Zn.batch(()=>{ee(this,Yr).forEach(e=>{this.notify({type:"removed",mutation:e})}),ee(this,Yr).clear(),ee(this,Fs).clear()})}getAll(){return Array.from(ee(this,Yr))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>bb(n,r))}findAll(e={}){return this.getAll().filter(n=>bb(e,n))}notify(e){Zn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Zn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Di))))}},Yr=new WeakMap,Fs=new WeakMap,wd=new WeakMap,a3);function Wf(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Sb(t){return{onFetch:(e,n)=>{var S,A,N,I,M;const r=e.options,l=(N=(A=(S=e.fetchOptions)==null?void 0:S.meta)==null?void 0:A.fetchMore)==null?void 0:N.direction,u=((I=e.state.data)==null?void 0:I.pages)||[],g=((M=e.state.data)==null?void 0:M.pageParams)||[];let y={pages:[],pageParams:[]},b=0;const x=async()=>{let j=!1;const U=B=>{Object.defineProperty(B,"signal",{enumerable:!0,get:()=>(e.signal.aborted?j=!0:e.signal.addEventListener("abort",()=>{j=!0}),e.signal)})},z=D3(e.options,e.fetchOptions),q=async(B,V,H)=>{if(j)return Promise.reject();if(V==null&&B.pages.length)return Promise.resolve(B);const X=(()=>{const Ae={client:e.client,queryKey:e.queryKey,pageParam:V,direction:H?"backward":"forward",meta:e.options.meta};return U(Ae),Ae})(),oe=await z(X),{maxPages:Y}=e.options,be=H?WI:XI;return{pages:be(B.pages,oe,Y),pageParams:be(B.pageParams,V,Y)}};if(l&&u.length){const B=l==="backward",V=B?aM:Eb,H={pages:u,pageParams:g},J=V(r,H);y=await q(H,J,B)}else{const B=t??u.length;do{const V=b===0?g[0]??r.initialPageParam:Eb(r,y);if(b>0&&V==null)break;y=await q(y,V),b++}while(b<B)}return y};e.options.persister?e.fetchFn=()=>{var j,U;return(U=(j=e.options).persister)==null?void 0:U.call(j,x,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=x}}}function Eb(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function aM(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Tn,qa,Ya,xc,yc,Xa,bc,wc,o3,oM=(o3=class{constructor(t={}){st(this,Tn);st(this,qa);st(this,Ya);st(this,xc);st(this,yc);st(this,Xa);st(this,bc);st(this,wc);qe(this,Tn,t.queryCache||new iM),qe(this,qa,t.mutationCache||new rM),qe(this,Ya,t.defaultOptions||{}),qe(this,xc,new Map),qe(this,yc,new Map),qe(this,Xa,0)}mount(){Gf(this,Xa)._++,ee(this,Xa)===1&&(qe(this,bc,qm.subscribe(async t=>{t&&(await this.resumePausedMutations(),ee(this,Tn).onFocus())})),qe(this,wc,Eh.subscribe(async t=>{t&&(await this.resumePausedMutations(),ee(this,Tn).onOnline())})))}unmount(){var t,e;Gf(this,Xa)._--,ee(this,Xa)===0&&((t=ee(this,bc))==null||t.call(this),qe(this,bc,void 0),(e=ee(this,wc))==null||e.call(this),qe(this,wc,void 0))}isFetching(t){return ee(this,Tn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ee(this,qa).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ee(this,Tn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=ee(this,Tn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(no(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return ee(this,Tn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),l=ee(this,Tn).get(r.queryHash),u=l==null?void 0:l.state.data,g=qI(e,u);if(g!==void 0)return ee(this,Tn).build(this,r).setData(g,{...n,manual:!0})}setQueriesData(t,e,n){return Zn.batch(()=>ee(this,Tn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ee(this,Tn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=ee(this,Tn);Zn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=ee(this,Tn);return Zn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Zn.batch(()=>ee(this,Tn).findAll(t).map(l=>l.cancel(n)));return Promise.all(r).then(Di).catch(Di)}invalidateQueries(t,e={}){return Zn.batch(()=>(ee(this,Tn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Zn.batch(()=>ee(this,Tn).findAll(t).filter(l=>!l.isDisabled()&&!l.isStatic()).map(l=>{let u=l.fetch(void 0,n);return n.throwOnError||(u=u.catch(Di)),l.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(r).then(Di)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=ee(this,Tn).build(this,e);return n.isStaleByTime(no(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Di).catch(Di)}fetchInfiniteQuery(t){return t.behavior=Sb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Di).catch(Di)}ensureInfiniteQueryData(t){return t.behavior=Sb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Eh.isOnline()?ee(this,qa).resumePausedMutations():Promise.resolve()}getQueryCache(){return ee(this,Tn)}getMutationCache(){return ee(this,qa)}getDefaultOptions(){return ee(this,Ya)}setDefaultOptions(t){qe(this,Ya,t)}setQueryDefaults(t,e){ee(this,xc).set(rl(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ee(this,xc).values()],n={};return e.forEach(r=>{ud(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){ee(this,yc).set(rl(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ee(this,yc).values()],n={};return e.forEach(r=>{ud(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...ee(this,Ya).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=$m(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Gm&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ee(this,Ya).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ee(this,Tn).clear(),ee(this,qa).clear()}},Tn=new WeakMap,qa=new WeakMap,Ya=new WeakMap,xc=new WeakMap,yc=new WeakMap,Xa=new WeakMap,bc=new WeakMap,wc=new WeakMap,o3),$i,Ut,vd,Mi,Zo,vc,Wa,Ka,Sd,Sc,Ec,Qo,Jo,Za,Cc,Xt,Uu,$g,Gg,qg,Yg,Xg,Wg,Kg,V3,l3,lM=(l3=class extends Oc{constructor(e,n){super();st(this,Xt);st(this,$i);st(this,Ut);st(this,vd);st(this,Mi);st(this,Zo);st(this,vc);st(this,Wa);st(this,Ka);st(this,Sd);st(this,Sc);st(this,Ec);st(this,Qo);st(this,Jo);st(this,Za);st(this,Cc,new Set);this.options=n,qe(this,$i,e),qe(this,Ka,null),qe(this,Wa,zg()),this.options.experimental_prefetchInRender||ee(this,Wa).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ee(this,Ut).addObserver(this),Cb(ee(this,Ut),this.options)?Et(this,Xt,Uu).call(this):this.updateResult(),Et(this,Xt,Yg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Zg(ee(this,Ut),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Zg(ee(this,Ut),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Et(this,Xt,Xg).call(this),Et(this,Xt,Wg).call(this),ee(this,Ut).removeObserver(this)}setOptions(e){const n=this.options,r=ee(this,Ut);if(this.options=ee(this,$i).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof zs(this.options.enabled,ee(this,Ut))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Et(this,Xt,Kg).call(this),ee(this,Ut).setOptions(this.options),n._defaulted&&!Sh(this.options,n)&&ee(this,$i).getQueryCache().notify({type:"observerOptionsUpdated",query:ee(this,Ut),observer:this});const l=this.hasListeners();l&&Ab(ee(this,Ut),r,this.options,n)&&Et(this,Xt,Uu).call(this),this.updateResult(),l&&(ee(this,Ut)!==r||zs(this.options.enabled,ee(this,Ut))!==zs(n.enabled,ee(this,Ut))||no(this.options.staleTime,ee(this,Ut))!==no(n.staleTime,ee(this,Ut)))&&Et(this,Xt,$g).call(this);const u=Et(this,Xt,Gg).call(this);l&&(ee(this,Ut)!==r||zs(this.options.enabled,ee(this,Ut))!==zs(n.enabled,ee(this,Ut))||u!==ee(this,Za))&&Et(this,Xt,qg).call(this,u)}getOptimisticResult(e){const n=ee(this,$i).getQueryCache().build(ee(this,$i),e),r=this.createResult(n,e);return uM(this,r)&&(qe(this,Mi,r),qe(this,vc,this.options),qe(this,Zo,ee(this,Ut).state)),r}getCurrentResult(){return ee(this,Mi)}trackResult(e,n){return new Proxy(e,{get:(r,l)=>(this.trackProp(l),n==null||n(l),Reflect.get(r,l))})}trackProp(e){ee(this,Cc).add(e)}getCurrentQuery(){return ee(this,Ut)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=ee(this,$i).defaultQueryOptions(e),r=ee(this,$i).getQueryCache().build(ee(this,$i),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Et(this,Xt,Uu).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ee(this,Mi)))}createResult(e,n){var Y;const r=ee(this,Ut),l=this.options,u=ee(this,Mi),g=ee(this,Zo),y=ee(this,vc),x=e!==r?e.state:ee(this,vd),{state:S}=e;let A={...S},N=!1,I;if(n._optimisticResults){const be=this.hasListeners(),Ae=!be&&Cb(e,n),Ee=be&&Ab(e,r,n,l);(Ae||Ee)&&(A={...A,...U3(S.data,e.options)}),n._optimisticResults==="isRestoring"&&(A.fetchStatus="idle")}let{error:M,errorUpdatedAt:j,status:U}=A;I=A.data;let z=!1;if(n.placeholderData!==void 0&&I===void 0&&U==="pending"){let be;u!=null&&u.isPlaceholderData&&n.placeholderData===(y==null?void 0:y.placeholderData)?(be=u.data,z=!0):be=typeof n.placeholderData=="function"?n.placeholderData((Y=ee(this,Ec))==null?void 0:Y.state.data,ee(this,Ec)):n.placeholderData,be!==void 0&&(U="success",I=Hg(u==null?void 0:u.data,be,n),N=!0)}if(n.select&&I!==void 0&&!z)if(u&&I===(g==null?void 0:g.data)&&n.select===ee(this,Sd))I=ee(this,Sc);else try{qe(this,Sd,n.select),I=n.select(I),I=Hg(u==null?void 0:u.data,I,n),qe(this,Sc,I),qe(this,Ka,null)}catch(be){qe(this,Ka,be)}ee(this,Ka)&&(M=ee(this,Ka),I=ee(this,Sc),j=Date.now(),U="error");const q=A.fetchStatus==="fetching",B=U==="pending",V=U==="error",H=B&&q,J=I!==void 0,oe={status:U,fetchStatus:A.fetchStatus,isPending:B,isSuccess:U==="success",isError:V,isInitialLoading:H,isLoading:H,data:I,dataUpdatedAt:A.dataUpdatedAt,error:M,errorUpdatedAt:j,failureCount:A.fetchFailureCount,failureReason:A.fetchFailureReason,errorUpdateCount:A.errorUpdateCount,isFetched:A.dataUpdateCount>0||A.errorUpdateCount>0,isFetchedAfterMount:A.dataUpdateCount>x.dataUpdateCount||A.errorUpdateCount>x.errorUpdateCount,isFetching:q,isRefetching:q&&!B,isLoadingError:V&&!J,isPaused:A.fetchStatus==="paused",isPlaceholderData:N,isRefetchError:V&&J,isStale:Ym(e,n),refetch:this.refetch,promise:ee(this,Wa)};if(this.options.experimental_prefetchInRender){const be=de=>{oe.status==="error"?de.reject(oe.error):oe.data!==void 0&&de.resolve(oe.data)},Ae=()=>{const de=qe(this,Wa,oe.promise=zg());be(de)},Ee=ee(this,Wa);switch(Ee.status){case"pending":e.queryHash===r.queryHash&&be(Ee);break;case"fulfilled":(oe.status==="error"||oe.data!==Ee.value)&&Ae();break;case"rejected":(oe.status!=="error"||oe.error!==Ee.reason)&&Ae();break}}return oe}updateResult(){const e=ee(this,Mi),n=this.createResult(ee(this,Ut),this.options);if(qe(this,Zo,ee(this,Ut).state),qe(this,vc,this.options),ee(this,Zo).data!==void 0&&qe(this,Ec,ee(this,Ut)),Sh(n,e))return;qe(this,Mi,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:l}=this.options,u=typeof l=="function"?l():l;if(u==="all"||!u&&!ee(this,Cc).size)return!0;const g=new Set(u??ee(this,Cc));return this.options.throwOnError&&g.add("error"),Object.keys(ee(this,Mi)).some(y=>{const b=y;return ee(this,Mi)[b]!==e[b]&&g.has(b)})};Et(this,Xt,V3).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Et(this,Xt,Yg).call(this)}},$i=new WeakMap,Ut=new WeakMap,vd=new WeakMap,Mi=new WeakMap,Zo=new WeakMap,vc=new WeakMap,Wa=new WeakMap,Ka=new WeakMap,Sd=new WeakMap,Sc=new WeakMap,Ec=new WeakMap,Qo=new WeakMap,Jo=new WeakMap,Za=new WeakMap,Cc=new WeakMap,Xt=new WeakSet,Uu=function(e){Et(this,Xt,Kg).call(this);let n=ee(this,Ut).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Di)),n},$g=function(){Et(this,Xt,Xg).call(this);const e=no(this.options.staleTime,ee(this,Ut));if(sl||ee(this,Mi).isStale||!Fg(e))return;const r=I3(ee(this,Mi).dataUpdatedAt,e)+1;qe(this,Qo,setTimeout(()=>{ee(this,Mi).isStale||this.updateResult()},r))},Gg=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ee(this,Ut)):this.options.refetchInterval)??!1},qg=function(e){Et(this,Xt,Wg).call(this),qe(this,Za,e),!(sl||zs(this.options.enabled,ee(this,Ut))===!1||!Fg(ee(this,Za))||ee(this,Za)===0)&&qe(this,Jo,setInterval(()=>{(this.options.refetchIntervalInBackground||qm.isFocused())&&Et(this,Xt,Uu).call(this)},ee(this,Za)))},Yg=function(){Et(this,Xt,$g).call(this),Et(this,Xt,qg).call(this,Et(this,Xt,Gg).call(this))},Xg=function(){ee(this,Qo)&&(clearTimeout(ee(this,Qo)),qe(this,Qo,void 0))},Wg=function(){ee(this,Jo)&&(clearInterval(ee(this,Jo)),qe(this,Jo,void 0))},Kg=function(){const e=ee(this,$i).getQueryCache().build(ee(this,$i),this.options);if(e===ee(this,Ut))return;const n=ee(this,Ut);qe(this,Ut,e),qe(this,vd,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},V3=function(e){Zn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(ee(this,Mi))}),ee(this,$i).getQueryCache().notify({query:ee(this,Ut),type:"observerResultsUpdated"})})},l3);function cM(t,e){return zs(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Cb(t,e){return cM(t,e)||t.state.data!==void 0&&Zg(t,e,e.refetchOnMount)}function Zg(t,e,n){if(zs(e.enabled,t)!==!1&&no(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Ym(t,e)}return!1}function Ab(t,e,n,r){return(t!==e||zs(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Ym(t,n)}function Ym(t,e){return zs(e.enabled,t)!==!1&&t.isStaleByTime(no(e.staleTime,t))}function uM(t,e){return!Sh(t.getCurrentResult(),e)}var Qa,Ja,Gi,Xr,Jr,fh,Qg,c3,dM=(c3=class extends Oc{constructor(n,r){super();st(this,Jr);st(this,Qa);st(this,Ja);st(this,Gi);st(this,Xr);qe(this,Qa,n),this.setOptions(r),this.bindMethods(),Et(this,Jr,fh).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var l;const r=this.options;this.options=ee(this,Qa).defaultMutationOptions(n),Sh(this.options,r)||ee(this,Qa).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ee(this,Gi),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&rl(r.mutationKey)!==rl(this.options.mutationKey)?this.reset():((l=ee(this,Gi))==null?void 0:l.state.status)==="pending"&&ee(this,Gi).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=ee(this,Gi))==null||n.removeObserver(this)}onMutationUpdate(n){Et(this,Jr,fh).call(this),Et(this,Jr,Qg).call(this,n)}getCurrentResult(){return ee(this,Ja)}reset(){var n;(n=ee(this,Gi))==null||n.removeObserver(this),qe(this,Gi,void 0),Et(this,Jr,fh).call(this),Et(this,Jr,Qg).call(this)}mutate(n,r){var l;return qe(this,Xr,r),(l=ee(this,Gi))==null||l.removeObserver(this),qe(this,Gi,ee(this,Qa).getMutationCache().build(ee(this,Qa),this.options)),ee(this,Gi).addObserver(this),ee(this,Gi).execute(n)}},Qa=new WeakMap,Ja=new WeakMap,Gi=new WeakMap,Xr=new WeakMap,Jr=new WeakSet,fh=function(){var r;const n=((r=ee(this,Gi))==null?void 0:r.state)??F3();qe(this,Ja,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Qg=function(n){Zn.batch(()=>{var r,l,u,g,y,b,x,S;if(ee(this,Xr)&&this.hasListeners()){const A=ee(this,Ja).variables,N=ee(this,Ja).context;(n==null?void 0:n.type)==="success"?((l=(r=ee(this,Xr)).onSuccess)==null||l.call(r,n.data,A,N),(g=(u=ee(this,Xr)).onSettled)==null||g.call(u,n.data,null,A,N)):(n==null?void 0:n.type)==="error"&&((b=(y=ee(this,Xr)).onError)==null||b.call(y,n.error,A,N),(S=(x=ee(this,Xr)).onSettled)==null||S.call(x,void 0,n.error,A,N))}this.listeners.forEach(A=>{A(ee(this,Ja))})})},c3),H3=R.createContext(void 0),Ic=t=>{const e=R.useContext(H3);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},fM=({client:t,children:e})=>(R.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),E.jsx(H3.Provider,{value:t,children:e})),z3=R.createContext(!1),hM=()=>R.useContext(z3);z3.Provider;function gM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var mM=R.createContext(gM()),pM=()=>R.useContext(mM),xM=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},yM=t=>{R.useEffect(()=>{t.clearReset()},[t])},bM=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:l})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(l&&t.data===void 0||L3(n,[t.error,r])),wM=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},vM=(t,e)=>t.isLoading&&t.isFetching&&!e,SM=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Tb=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function EM(t,e,n){var A,N,I,M,j;const r=hM(),l=pM(),u=Ic(),g=u.defaultQueryOptions(t);(N=(A=u.getDefaultOptions().queries)==null?void 0:A._experimental_beforeQuery)==null||N.call(A,g),g._optimisticResults=r?"isRestoring":"optimistic",wM(g),xM(g,l),yM(l);const y=!u.getQueryCache().get(g.queryHash),[b]=R.useState(()=>new e(u,g)),x=b.getOptimisticResult(g),S=!r&&t.subscribed!==!1;if(R.useSyncExternalStore(R.useCallback(U=>{const z=S?b.subscribe(Zn.batchCalls(U)):Di;return b.updateResult(),z},[b,S]),()=>b.getCurrentResult(),()=>b.getCurrentResult()),R.useEffect(()=>{b.setOptions(g)},[g,b]),SM(g,x))throw Tb(g,b,l);if(bM({result:x,errorResetBoundary:l,throwOnError:g.throwOnError,query:u.getQueryCache().get(g.queryHash),suspense:g.suspense}))throw x.error;if((M=(I=u.getDefaultOptions().queries)==null?void 0:I._experimental_afterQuery)==null||M.call(I,g,x),g.experimental_prefetchInRender&&!sl&&vM(x,r)){const U=y?Tb(g,b,l):(j=u.getQueryCache().get(g.queryHash))==null?void 0:j.promise;U==null||U.catch(Di).finally(()=>{b.updateResult()})}return g.notifyOnChangeProps?x:b.trackResult(x)}function ci(t,e){return EM(t,lM)}function _b(t,e){const n=Ic(),[r]=R.useState(()=>new dM(n,t));R.useEffect(()=>{r.setOptions(t)},[r,t]);const l=R.useSyncExternalStore(R.useCallback(g=>r.subscribe(Zn.batchCalls(g)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),u=R.useCallback((g,y)=>{r.mutate(g,y).catch(Di)},[r]);if(l.error&&L3(r.options.throwOnError,[l.error]))throw l.error;return{...l,mutate:u,mutateAsync:l.mutate}}const CM="modulepreload",AM=function(t){return"/sms/"+t},Nb={},Ad=function(e,n,r){let l=Promise.resolve();if(n&&n.length>0){let g=function(x){return Promise.all(x.map(S=>Promise.resolve(S).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const y=document.querySelector("meta[property=csp-nonce]"),b=(y==null?void 0:y.nonce)||(y==null?void 0:y.getAttribute("nonce"));l=g(n.map(x=>{if(x=AM(x),x in Nb)return;Nb[x]=!0;const S=x.endsWith(".css"),A=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${A}`))return;const N=document.createElement("link");if(N.rel=S?"stylesheet":CM,S||(N.as="script"),N.crossOrigin="",N.href=x,b&&N.setAttribute("nonce",b),document.head.appendChild(N),S)return new Promise((I,M)=>{N.addEventListener("load",I),N.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${x}`)))})}))}function u(g){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=g,window.dispatchEvent(y),!y.defaultPrevented)throw g}return l.then(g=>{for(const y of g||[])y.status==="rejected"&&u(y.reason);return e().catch(u)})},TM=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ad(async()=>{const{default:r}=await Promise.resolve().then(()=>Mc);return{default:r}},[]).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Xm extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class _M extends Xm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Rb extends Xm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ob extends Xm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Jg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Jg||(Jg={}));var NM=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(S){try{x(r.next(S))}catch(A){g(A)}}function b(S){try{x(r.throw(S))}catch(A){g(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};class RM{constructor(e,{headers:n={},customFetch:r,region:l=Jg.Any}={}){this.url=e,this.headers=n,this.region=l,this.fetch=TM(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return NM(this,void 0,void 0,function*(){try{const{headers:l,method:u,body:g}=n;let y={},{region:b}=n;b||(b=this.region);const x=new URL(`${this.url}/${e}`);b&&b!=="any"&&(y["x-region"]=b,x.searchParams.set("forceFunctionRegion",b));let S;g&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",S=g):typeof g=="string"?(y["Content-Type"]="text/plain",S=g):typeof FormData<"u"&&g instanceof FormData?S=g:(y["Content-Type"]="application/json",S=JSON.stringify(g)));const A=yield this.fetch(x.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),l),body:S}).catch(j=>{throw new _M(j)}),N=A.headers.get("x-relay-error");if(N&&N==="true")throw new Rb(A);if(!A.ok)throw new Ob(A);let I=((r=A.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),M;return I==="application/json"?M=yield A.json():I==="application/octet-stream"?M=yield A.blob():I==="text/event-stream"?M=A:I==="multipart/form-data"?M=yield A.formData():M=yield A.text(),{data:M,error:null,response:A}}catch(l){return{data:null,error:l,response:l instanceof Ob||l instanceof Rb?l.context:void 0}}})}}var ai={},Kl={},Zl={},Ql={},Jl={},ec={},OM=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ac=OM();const IM=Ac.fetch,$3=Ac.fetch.bind(Ac),G3=Ac.Headers,MM=Ac.Request,DM=Ac.Response,Mc=Object.freeze(Object.defineProperty({__proto__:null,Headers:G3,Request:MM,Response:DM,default:$3,fetch:IM},Symbol.toStringTag,{value:"Module"})),LM=GA(Mc);var Kf={},Ib;function q3(){if(Ib)return Kf;Ib=1,Object.defineProperty(Kf,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Kf.default=t,Kf}var Mb;function Y3(){if(Mb)return ec;Mb=1;var t=ec&&ec.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(ec,"__esModule",{value:!0});const e=t(LM),n=t(q3());class r{constructor(u){this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=u.headers,this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=u.shouldThrowOnError,this.signal=u.signal,this.isMaybeSingle=u.isMaybeSingle,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,g){return this.headers=Object.assign({},this.headers),this.headers[u]=g,this}then(u,g){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const y=this.fetch;let b=y(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async x=>{var S,A,N;let I=null,M=null,j=null,U=x.status,z=x.statusText;if(x.ok){if(this.method!=="HEAD"){const H=await x.text();H===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?M=H:M=JSON.parse(H))}const B=(S=this.headers.Prefer)===null||S===void 0?void 0:S.match(/count=(exact|planned|estimated)/),V=(A=x.headers.get("content-range"))===null||A===void 0?void 0:A.split("/");B&&V&&V.length>1&&(j=parseInt(V[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(M)&&(M.length>1?(I={code:"PGRST116",details:`Results contain ${M.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},M=null,j=null,U=406,z="Not Acceptable"):M.length===1?M=M[0]:M=null)}else{const B=await x.text();try{I=JSON.parse(B),Array.isArray(I)&&x.status===404&&(M=[],I=null,U=200,z="OK")}catch{x.status===404&&B===""?(U=204,z="No Content"):I={message:B}}if(I&&this.isMaybeSingle&&(!((N=I==null?void 0:I.details)===null||N===void 0)&&N.includes("0 rows"))&&(I=null,U=200,z="OK"),I&&this.shouldThrowOnError)throw new n.default(I)}return{error:I,data:M,count:j,status:U,statusText:z}});return this.shouldThrowOnError||(b=b.catch(x=>{var S,A,N;return{error:{message:`${(S=x==null?void 0:x.name)!==null&&S!==void 0?S:"FetchError"}: ${x==null?void 0:x.message}`,details:`${(A=x==null?void 0:x.stack)!==null&&A!==void 0?A:""}`,hint:"",code:`${(N=x==null?void 0:x.code)!==null&&N!==void 0?N:""}`},data:null,count:null,status:0,statusText:""}})),b.then(u,g)}returns(){return this}overrideTypes(){return this}}return ec.default=r,ec}var Db;function X3(){if(Db)return Jl;Db=1;var t=Jl&&Jl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jl,"__esModule",{value:!0});const e=t(Y3());class n extends e.default{select(l){let u=!1;const g=(l??"*").split("").map(y=>/\s/.test(y)&&!u?"":(y==='"'&&(u=!u),y)).join("");return this.url.searchParams.set("select",g),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(l,{ascending:u=!0,nullsFirst:g,foreignTable:y,referencedTable:b=y}={}){const x=b?`${b}.order`:"order",S=this.url.searchParams.get(x);return this.url.searchParams.set(x,`${S?`${S},`:""}${l}.${u?"asc":"desc"}${g===void 0?"":g?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:u,referencedTable:g=u}={}){const y=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(y,`${l}`),this}range(l,u,{foreignTable:g,referencedTable:y=g}={}){const b=typeof y>"u"?"offset":`${y}.offset`,x=typeof y>"u"?"limit":`${y}.limit`;return this.url.searchParams.set(b,`${l}`),this.url.searchParams.set(x,`${u-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:l=!1,verbose:u=!1,settings:g=!1,buffers:y=!1,wal:b=!1,format:x="text"}={}){var S;const A=[l?"analyze":null,u?"verbose":null,g?"settings":null,y?"buffers":null,b?"wal":null].filter(Boolean).join("|"),N=(S=this.headers.Accept)!==null&&S!==void 0?S:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${x}; for="${N}"; options=${A};`,x==="json"?this:this}rollback(){var l;return((l=this.headers.Prefer)!==null&&l!==void 0?l:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Jl.default=n,Jl}var Lb;function Wm(){if(Lb)return Ql;Lb=1;var t=Ql&&Ql.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ql,"__esModule",{value:!0});const e=t(X3());class n extends e.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}in(l,u){const g=Array.from(new Set(u)).map(y=>typeof y=="string"&&new RegExp("[,()]").test(y)?`"${y}"`:`${y}`).join(",");return this.url.searchParams.append(l,`in.(${g})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:g,type:y}={}){let b="";y==="plain"?b="pl":y==="phrase"?b="ph":y==="websearch"&&(b="w");const x=g===void 0?"":`(${g})`;return this.url.searchParams.append(l,`${b}fts${x}.${u}`),this}match(l){return Object.entries(l).forEach(([u,g])=>{this.url.searchParams.append(u,`eq.${g}`)}),this}not(l,u,g){return this.url.searchParams.append(l,`not.${u}.${g}`),this}or(l,{foreignTable:u,referencedTable:g=u}={}){const y=g?`${g}.or`:"or";return this.url.searchParams.append(y,`(${l})`),this}filter(l,u,g){return this.url.searchParams.append(l,`${u}.${g}`),this}}return Ql.default=n,Ql}var kb;function W3(){if(kb)return Zl;kb=1;var t=Zl&&Zl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zl,"__esModule",{value:!0});const e=t(Wm());class n{constructor(l,{headers:u={},schema:g,fetch:y}){this.url=l,this.headers=u,this.schema=g,this.fetch=y}select(l,{head:u=!1,count:g}={}){const y=u?"HEAD":"GET";let b=!1;const x=(l??"*").split("").map(S=>/\s/.test(S)&&!b?"":(S==='"'&&(b=!b),S)).join("");return this.url.searchParams.set("select",x),g&&(this.headers.Prefer=`count=${g}`),new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(l,{count:u,defaultToNull:g=!0}={}){const y="POST",b=[];if(this.headers.Prefer&&b.push(this.headers.Prefer),u&&b.push(`count=${u}`),g||b.push("missing=default"),this.headers.Prefer=b.join(","),Array.isArray(l)){const x=l.reduce((S,A)=>S.concat(Object.keys(A)),[]);if(x.length>0){const S=[...new Set(x)].map(A=>`"${A}"`);this.url.searchParams.set("columns",S.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}upsert(l,{onConflict:u,ignoreDuplicates:g=!1,count:y,defaultToNull:b=!0}={}){const x="POST",S=[`resolution=${g?"ignore":"merge"}-duplicates`];if(u!==void 0&&this.url.searchParams.set("on_conflict",u),this.headers.Prefer&&S.push(this.headers.Prefer),y&&S.push(`count=${y}`),b||S.push("missing=default"),this.headers.Prefer=S.join(","),Array.isArray(l)){const A=l.reduce((N,I)=>N.concat(Object.keys(I)),[]);if(A.length>0){const N=[...new Set(A)].map(I=>`"${I}"`);this.url.searchParams.set("columns",N.join(","))}}return new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}update(l,{count:u}={}){const g="PATCH",y=[];return this.headers.Prefer&&y.push(this.headers.Prefer),u&&y.push(`count=${u}`),this.headers.Prefer=y.join(","),new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}delete({count:l}={}){const u="DELETE",g=[];return l&&g.push(`count=${l}`),this.headers.Prefer&&g.unshift(this.headers.Prefer),this.headers.Prefer=g.join(","),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Zl.default=n,Zl}var ku={},ju={},jb;function kM(){return jb||(jb=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.version=void 0,ju.version="0.0.0-automated"),ju}var Bb;function jM(){if(Bb)return ku;Bb=1,Object.defineProperty(ku,"__esModule",{value:!0}),ku.DEFAULT_HEADERS=void 0;const t=kM();return ku.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},ku}var Pb;function BM(){if(Pb)return Kl;Pb=1;var t=Kl&&Kl.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Kl,"__esModule",{value:!0});const e=t(W3()),n=t(Wm()),r=jM();class l{constructor(g,{headers:y={},schema:b,fetch:x}={}){this.url=g,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),y),this.schemaName=b,this.fetch=x}from(g){const y=new URL(`${this.url}/${g}`);return new e.default(y,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(g){return new l(this.url,{headers:this.headers,schema:g,fetch:this.fetch})}rpc(g,y={},{head:b=!1,get:x=!1,count:S}={}){let A;const N=new URL(`${this.url}/rpc/${g}`);let I;b||x?(A=b?"HEAD":"GET",Object.entries(y).filter(([j,U])=>U!==void 0).map(([j,U])=>[j,Array.isArray(U)?`{${U.join(",")}}`:`${U}`]).forEach(([j,U])=>{N.searchParams.append(j,U)})):(A="POST",I=y);const M=Object.assign({},this.headers);return S&&(M.Prefer=`count=${S}`),new n.default({method:A,url:N,headers:M,schema:this.schemaName,body:I,fetch:this.fetch,allowEmpty:!1})}}return Kl.default=l,Kl}var Ub;function PM(){if(Ub)return ai;Ub=1;var t=ai&&ai.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(ai,"__esModule",{value:!0}),ai.PostgrestError=ai.PostgrestBuilder=ai.PostgrestTransformBuilder=ai.PostgrestFilterBuilder=ai.PostgrestQueryBuilder=ai.PostgrestClient=void 0;const e=t(BM());ai.PostgrestClient=e.default;const n=t(W3());ai.PostgrestQueryBuilder=n.default;const r=t(Wm());ai.PostgrestFilterBuilder=r.default;const l=t(X3());ai.PostgrestTransformBuilder=l.default;const u=t(Y3());ai.PostgrestBuilder=u.default;const g=t(q3());return ai.PostgrestError=g.default,ai.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:u.default,PostgrestError:g.default},ai}var UM=PM();const FM=jm(UM),{PostgrestClient:VM,PostgrestQueryBuilder:mz,PostgrestFilterBuilder:pz,PostgrestTransformBuilder:xz,PostgrestBuilder:yz,PostgrestError:bz}=FM;function HM(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const zM=HM(),$M="2.11.15",GM=`realtime-js/${$M}`,qM="1.0.0",K3=1e4,YM=1e3;var Ku;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ku||(Ku={}));var Ci;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ci||(Ci={}));var Vs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vs||(Vs={}));var em;(function(t){t.websocket="websocket"})(em||(em={}));var Fo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Fo||(Fo={}));class XM{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const l=n.getUint8(1),u=n.getUint8(2);let g=this.HEADER_LENGTH+2;const y=r.decode(e.slice(g,g+l));g=g+l;const b=r.decode(e.slice(g,g+u));g=g+u;const x=JSON.parse(r.decode(e.slice(g,e.byteLength)));return{ref:null,topic:y,event:b,payload:x}}}class Z3{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var un;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(un||(un={}));const Fb=(t,e,n={})=>{var r;const l=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((u,g)=>(u[g]=WM(g,t,e,l),u),{})},WM=(t,e,n,r)=>{const l=e.find(y=>y.name===t),u=l==null?void 0:l.type,g=n[t];return u&&!r.includes(u)?Q3(u,g):tm(g)},Q3=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return JM(e,n)}switch(t){case un.bool:return KM(e);case un.float4:case un.float8:case un.int2:case un.int4:case un.int8:case un.numeric:case un.oid:return ZM(e);case un.json:case un.jsonb:return QM(e);case un.timestamp:return eD(e);case un.abstime:case un.date:case un.daterange:case un.int4range:case un.int8range:case un.money:case un.reltime:case un.text:case un.time:case un.timestamptz:case un.timetz:case un.tsrange:case un.tstzrange:return tm(e);default:return tm(e)}},tm=t=>t,KM=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ZM=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},QM=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},JM=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let u;const g=t.slice(1,n);try{u=JSON.parse("["+g+"]")}catch{u=g?g.split(","):[]}return u.map(y=>Q3(e,y))}return t},eD=t=>typeof t=="string"?t.replace(" ","T"):t,J3=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class og{constructor(e,n,r={},l=K3){this.channel=e,this.event=n,this.payload=r,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Vb;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Vb||(Vb={}));class Zu{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},l=>{const{onJoin:u,onLeave:g,onSync:y}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zu.syncState(this.state,l,u,g),this.pendingDiffs.forEach(b=>{this.state=Zu.syncDiff(this.state,b,u,g)}),this.pendingDiffs=[],y()}),this.channel._on(r.diff,{},l=>{const{onJoin:u,onLeave:g,onSync:y}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Zu.syncDiff(this.state,l,u,g),y())}),this.onJoin((l,u,g)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:g})}),this.onLeave((l,u,g)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:g})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,l){const u=this.cloneDeep(e),g=this.transformState(n),y={},b={};return this.map(u,(x,S)=>{g[x]||(b[x]=S)}),this.map(g,(x,S)=>{const A=u[x];if(A){const N=S.map(U=>U.presence_ref),I=A.map(U=>U.presence_ref),M=S.filter(U=>I.indexOf(U.presence_ref)<0),j=A.filter(U=>N.indexOf(U.presence_ref)<0);M.length>0&&(y[x]=M),j.length>0&&(b[x]=j)}else y[x]=S}),this.syncDiff(u,{joins:y,leaves:b},r,l)}static syncDiff(e,n,r,l){const{joins:u,leaves:g}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),l||(l=()=>{}),this.map(u,(y,b)=>{var x;const S=(x=e[y])!==null&&x!==void 0?x:[];if(e[y]=this.cloneDeep(b),S.length>0){const A=e[y].map(I=>I.presence_ref),N=S.filter(I=>A.indexOf(I.presence_ref)<0);e[y].unshift(...N)}r(y,S,b)}),this.map(g,(y,b)=>{let x=e[y];if(!x)return;const S=b.map(A=>A.presence_ref);x=x.filter(A=>S.indexOf(A.presence_ref)<0),e[y]=x,l(y,x,b),x.length===0&&delete e[y]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const l=e[r];return"metas"in l?n[r]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[r]=l,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hb;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Hb||(Hb={}));var zb;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(zb||(zb={}));var qr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(qr||(qr={}));class Km{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ci.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new og(this,Vs.join,this.params,this.timeout),this.rejoinTimer=new Z3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ci.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ci.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ci.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ci.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vs.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Zu(this),this.broadcastEndpointURL=J3(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Ci.closed){const{config:{broadcast:u,presence:g,private:y}}=this.params;this._onError(S=>e==null?void 0:e(qr.CHANNEL_ERROR,S)),this._onClose(()=>e==null?void 0:e(qr.CLOSED));const b={},x={broadcast:u,presence:g,postgres_changes:(l=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(S=>S.filter))!==null&&l!==void 0?l:[],private:y};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:x},b)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var A;if(this.socket.setAuth(),S===void 0){e==null||e(qr.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,I=(A=N==null?void 0:N.length)!==null&&A!==void 0?A:0,M=[];for(let j=0;j<I;j++){const U=N[j],{filter:{event:z,schema:q,table:B,filter:V}}=U,H=S&&S[j];if(H&&H.event===z&&H.schema===q&&H.table===B&&H.filter===V)M.push(Object.assign(Object.assign({},U),{id:H.id}));else{this.unsubscribe(),this.state=Ci.errored,e==null||e(qr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,e&&e(qr.SUBSCRIBED);return}}).receive("error",S=>{this.state=Ci.errored,e==null||e(qr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(qr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,l;if(!this._canPush()&&e.type==="broadcast"){const{event:u,payload:g}=e,b={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:g,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((l=x.body)===null||l===void 0?void 0:l.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var g,y,b;const x=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((b=(y=(g=this.params)===null||g===void 0?void 0:g.config)===null||y===void 0?void 0:y.broadcast)===null||b===void 0)&&b.ack)&&u("ok"),x.receive("ok",()=>u("ok")),x.receive("error",()=>u("error")),x.receive("timeout",()=>u("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ci.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(l=>{r=new og(this,Vs.leave,{},e),r.receive("ok",()=>{n(),l("ok")}).receive("timeout",()=>{n(),l("timed out")}).receive("error",()=>{l("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const l=new AbortController,u=setTimeout(()=>l.abort(),r),g=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:l.signal}));return clearTimeout(u),g}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new og(this,e,n,r);return this._canPush()?l.send():(l.startTimeout(),this.pushBuffer.push(l)),l}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var l,u;const g=e.toLocaleLowerCase(),{close:y,error:b,leave:x,join:S}=Vs;if(r&&[y,b,x,S].indexOf(g)>=0&&r!==this._joinRef())return;let N=this._onMessage(g,n,r);if(n&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(g)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(I=>{var M,j,U;return((M=I.filter)===null||M===void 0?void 0:M.event)==="*"||((U=(j=I.filter)===null||j===void 0?void 0:j.event)===null||U===void 0?void 0:U.toLocaleLowerCase())===g}).map(I=>I.callback(N,r)):(u=this.bindings[g])===null||u===void 0||u.filter(I=>{var M,j,U,z,q,B;if(["broadcast","presence","postgres_changes"].includes(g))if("id"in I){const V=I.id,H=(M=I.filter)===null||M===void 0?void 0:M.event;return V&&((j=n.ids)===null||j===void 0?void 0:j.includes(V))&&(H==="*"||(H==null?void 0:H.toLocaleLowerCase())===((U=n.data)===null||U===void 0?void 0:U.type.toLocaleLowerCase()))}else{const V=(q=(z=I==null?void 0:I.filter)===null||z===void 0?void 0:z.event)===null||q===void 0?void 0:q.toLocaleLowerCase();return V==="*"||V===((B=n==null?void 0:n.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return I.type.toLocaleLowerCase()===g}).map(I=>{if(typeof N=="object"&&"ids"in N){const M=N.data,{schema:j,table:U,commit_timestamp:z,type:q,errors:B}=M;N=Object.assign(Object.assign({},{schema:j,table:U,commit_timestamp:z,eventType:q,new:{},old:{},errors:B}),this._getPayloadRecords(M))}I.callback(N,r)})}_isClosed(){return this.state===Ci.closed}_isJoined(){return this.state===Ci.joined}_isJoining(){return this.state===Ci.joining}_isLeaving(){return this.state===Ci.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const l=e.toLocaleLowerCase(),u={type:l,filter:n,callback:r};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===r&&Km.isEqual(l.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vs.close,{},e)}_onError(e){this._on(Vs.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ci.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Fb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Fb(e.columns,e.old_record)),n}}const $b=()=>{},tD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nD{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=K3,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$b,this.ref=0,this.logger=$b,this.conn=null,this.sendBuffer=[],this.serializer=new XM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=u=>{let g;return u?g=u:typeof fetch>"u"?g=(...y)=>Ad(async()=>{const{default:b}=await Promise.resolve().then(()=>Mc);return{default:b}},void 0).then(({default:b})=>b(...y)):g=fetch,(...y)=>g(...y)},this.endPoint=`${e}/${em.websocket}`,this.httpEndpoint=J3(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const l=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(l&&(this.accessTokenValue=l,this.apiKey=l),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:u=>[1e3,2e3,5e3,1e4][u-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(u,g)=>g(JSON.stringify(u)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Z3(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=zM),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:qM}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ku.connecting:return Fo.Connecting;case Ku.open:return Fo.Open;case Ku.closing:return Fo.Closing;default:return Fo.Closed}}isConnected(){return this.connectionState()===Fo.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,l=this.getChannels().find(u=>u.topic===r);if(l)return l;{const u=new Km(`realtime:${e}`,n,this);return this.channels.push(u),u}}push(e){const{topic:n,event:r,payload:l,ref:u}=e,g=()=>{this.encode(e,y=>{var b;(b=this.conn)===null||b===void 0||b.send(y)})};this.log("push",`${n} ${r} (${u})`,l),this.isConnected()?g():this.sendBuffer.push(g)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const l={access_token:n,version:GM};n&&r.updateJoinPayload(l),r.joinedOnce&&r._isJoined()&&r._push(Vs.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(YM,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:l,payload:u,ref:g}=n;r==="phoenix"&&l==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),g&&g===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${u.status||""} ${r} ${l} ${g&&"("+g+")"||""}`,u),Array.from(this.channels).filter(y=>y._isMember(r)).forEach(y=>y._trigger(l,u,g)),this.stateChangeCallbacks.message.forEach(y=>y(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vs.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",l=new URLSearchParams(n);return`${e}${r}${l}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([tD],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Zm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function oi(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class iD extends Zm{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class nm extends Zm{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var sD=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(S){try{x(r.next(S))}catch(A){g(A)}}function b(S){try{x(r.throw(S))}catch(A){g(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};const eS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ad(async()=>{const{default:r}=await Promise.resolve().then(()=>Mc);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},rD=()=>sD(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ad(()=>Promise.resolve().then(()=>Mc),void 0)).Response:Response}),im=t=>{if(Array.isArray(t))return t.map(n=>im(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const l=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));e[l]=im(r)}),e};var ll=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(S){try{x(r.next(S))}catch(A){g(A)}}function b(S){try{x(r.throw(S))}catch(A){g(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};const lg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),aD=(t,e,n)=>ll(void 0,void 0,void 0,function*(){const r=yield rD();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(l=>{e(new iD(lg(l),t.status||500))}).catch(l=>{e(new nm(lg(l),l))}):e(new nm(lg(t),t))}),oD=(t,e,n,r)=>{const l={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(l.body=JSON.stringify(r)),Object.assign(Object.assign({},l),n))};function Td(t,e,n,r,l,u){return ll(this,void 0,void 0,function*(){return new Promise((g,y)=>{t(n,oD(e,r,l,u)).then(b=>{if(!b.ok)throw b;return r!=null&&r.noResolveJson?b:b.json()}).then(b=>g(b)).catch(b=>aD(b,y,r))})})}function Ch(t,e,n,r){return ll(this,void 0,void 0,function*(){return Td(t,"GET",e,n,r)})}function Va(t,e,n,r,l){return ll(this,void 0,void 0,function*(){return Td(t,"POST",e,r,l,n)})}function lD(t,e,n,r,l){return ll(this,void 0,void 0,function*(){return Td(t,"PUT",e,r,l,n)})}function cD(t,e,n,r){return ll(this,void 0,void 0,function*(){return Td(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function tS(t,e,n,r,l){return ll(this,void 0,void 0,function*(){return Td(t,"DELETE",e,r,l,n)})}var zi=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(S){try{x(r.next(S))}catch(A){g(A)}}function b(S){try{x(r.throw(S))}catch(A){g(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};const uD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class dD{constructor(e,n={},r,l){this.url=e,this.headers=n,this.bucketId=r,this.fetch=eS(l)}uploadOrUpdate(e,n,r,l){return zi(this,void 0,void 0,function*(){try{let u;const g=Object.assign(Object.assign({},Gb),l);let y=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(g.upsert)});const b=g.metadata;typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",g.cacheControl),b&&u.append("metadata",this.encodeMetadata(b)),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",g.cacheControl),b&&u.append("metadata",this.encodeMetadata(b))):(u=r,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType,b&&(y["x-metadata"]=this.toBase64(this.encodeMetadata(b)))),l!=null&&l.headers&&(y=Object.assign(Object.assign({},y),l.headers));const x=this._removeEmptyFolders(n),S=this._getFinalPath(x),A=yield this.fetch(`${this.url}/object/${S}`,Object.assign({method:e,body:u,headers:y},g!=null&&g.duplex?{duplex:g.duplex}:{})),N=yield A.json();return A.ok?{data:{path:x,id:N.Id,fullPath:N.Key},error:null}:{data:null,error:N}}catch(u){if(oi(u))return{data:null,error:u};throw u}})}upload(e,n,r){return zi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,l){return zi(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(e),g=this._getFinalPath(u),y=new URL(this.url+`/object/upload/sign/${g}`);y.searchParams.set("token",n);try{let b;const x=Object.assign({upsert:Gb.upsert},l),S=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&r instanceof Blob?(b=new FormData,b.append("cacheControl",x.cacheControl),b.append("",r)):typeof FormData<"u"&&r instanceof FormData?(b=r,b.append("cacheControl",x.cacheControl)):(b=r,S["cache-control"]=`max-age=${x.cacheControl}`,S["content-type"]=x.contentType);const A=yield this.fetch(y.toString(),{method:"PUT",body:b,headers:S}),N=yield A.json();return A.ok?{data:{path:u,fullPath:N.Key},error:null}:{data:null,error:N}}catch(b){if(oi(b))return{data:null,error:b};throw b}})}createSignedUploadUrl(e,n){return zi(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const l=Object.assign({},this.headers);n!=null&&n.upsert&&(l["x-upsert"]="true");const u=yield Va(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:l}),g=new URL(this.url+u.url),y=g.searchParams.get("token");if(!y)throw new Zm("No token returned by API");return{data:{signedUrl:g.toString(),path:e,token:y},error:null}}catch(r){if(oi(r))return{data:null,error:r};throw r}})}update(e,n,r){return zi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return zi(this,void 0,void 0,function*(){try{return{data:yield Va(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(oi(l))return{data:null,error:l};throw l}})}copy(e,n,r){return zi(this,void 0,void 0,function*(){try{return{data:{path:(yield Va(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(oi(l))return{data:null,error:l};throw l}})}createSignedUrl(e,n,r){return zi(this,void 0,void 0,function*(){try{let l=this._getFinalPath(e),u=yield Va(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const g=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${g}`)},{data:u,error:null}}catch(l){if(oi(l))return{data:null,error:l};throw l}})}createSignedUrls(e,n,r){return zi(this,void 0,void 0,function*(){try{const l=yield Va(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),u=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:l.map(g=>Object.assign(Object.assign({},g),{signedUrl:g.signedURL?encodeURI(`${this.url}${g.signedURL}${u}`):null})),error:null}}catch(l){if(oi(l))return{data:null,error:l};throw l}})}download(e,n){return zi(this,void 0,void 0,function*(){const l=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),g=u?`?${u}`:"";try{const y=this._getFinalPath(e);return{data:yield(yield Ch(this.fetch,`${this.url}/${l}/${y}${g}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(y){if(oi(y))return{data:null,error:y};throw y}})}info(e){return zi(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ch(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:im(r),error:null}}catch(r){if(oi(r))return{data:null,error:r};throw r}})}exists(e){return zi(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield cD(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(oi(r)&&r instanceof nm){const l=r.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),l=[],u=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&l.push(u);const y=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",b=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});b!==""&&l.push(b);let x=l.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${y}/public/${r}${x}`)}}}remove(e){return zi(this,void 0,void 0,function*(){try{return{data:yield tS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(oi(n))return{data:null,error:n};throw n}})}list(e,n,r){return zi(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},uD),n),{prefix:e||""});return{data:yield Va(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},r),error:null}}catch(l){if(oi(l))return{data:null,error:l};throw l}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const fD="2.7.1",hD={"X-Client-Info":`storage-js/${fD}`};var tc=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(S){try{x(r.next(S))}catch(A){g(A)}}function b(S){try{x(r.throw(S))}catch(A){g(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};class gD{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},hD),n),this.fetch=eS(r)}listBuckets(){return tc(this,void 0,void 0,function*(){try{return{data:yield Ch(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(oi(e))return{data:null,error:e};throw e}})}getBucket(e){return tc(this,void 0,void 0,function*(){try{return{data:yield Ch(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(oi(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return tc(this,void 0,void 0,function*(){try{return{data:yield Va(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(oi(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return tc(this,void 0,void 0,function*(){try{return{data:yield lD(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(oi(r))return{data:null,error:r};throw r}})}emptyBucket(e){return tc(this,void 0,void 0,function*(){try{return{data:yield Va(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(oi(n))return{data:null,error:n};throw n}})}deleteBucket(e){return tc(this,void 0,void 0,function*(){try{return{data:yield tS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(oi(n))return{data:null,error:n};throw n}})}}class mD extends gD{constructor(e,n={},r){super(e,n,r)}from(e){return new dD(this.url,this.headers,e,this.fetch)}}const pD="2.50.3";let Fu="";typeof Deno<"u"?Fu="deno":typeof document<"u"?Fu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fu="react-native":Fu="node";const xD={"X-Client-Info":`supabase-js-${Fu}/${pD}`},yD={headers:xD},bD={schema:"public"},wD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vD={};var SD=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(S){try{x(r.next(S))}catch(A){g(A)}}function b(S){try{x(r.throw(S))}catch(A){g(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};const ED=t=>{let e;return t?e=t:typeof fetch>"u"?e=$3:e=fetch,(...n)=>e(...n)},CD=()=>typeof Headers>"u"?G3:Headers,AD=(t,e,n)=>{const r=ED(n),l=CD();return(u,g)=>SD(void 0,void 0,void 0,function*(){var y;const b=(y=yield e())!==null&&y!==void 0?y:t;let x=new l(g==null?void 0:g.headers);return x.has("apikey")||x.set("apikey",t),x.has("Authorization")||x.set("Authorization",`Bearer ${b}`),r(u,Object.assign(Object.assign({},g),{headers:x}))})};var TD=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(S){try{x(r.next(S))}catch(A){g(A)}}function b(S){try{x(r.throw(S))}catch(A){g(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};function _D(t){return t.endsWith("/")?t:t+"/"}function ND(t,e){var n,r;const{db:l,auth:u,realtime:g,global:y}=t,{db:b,auth:x,realtime:S,global:A}=e,N={db:Object.assign(Object.assign({},b),l),auth:Object.assign(Object.assign({},x),u),realtime:Object.assign(Object.assign({},S),g),global:Object.assign(Object.assign(Object.assign({},A),y),{headers:Object.assign(Object.assign({},(n=A==null?void 0:A.headers)!==null&&n!==void 0?n:{}),(r=y==null?void 0:y.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>TD(this,void 0,void 0,function*(){return""})};return t.accessToken?N.accessToken=t.accessToken:delete N.accessToken,N}const nS="2.70.0",ac=30*1e3,sm=3,cg=sm*ac,RD="http://localhost:9999",OD="supabase.auth.token",ID={"X-Client-Info":`gotrue-js/${nS}`},rm="X-Supabase-Api-Version",iS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},MD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,DD=6e5;class Qm extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function bt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class LD extends Qm{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function kD(t){return bt(t)&&t.name==="AuthApiError"}class sS extends Qm{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class lo extends Qm{constructor(e,n,r,l){super(e,r,l),this.name=n,this.status=r}}class Ua extends lo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jD(t){return bt(t)&&t.name==="AuthSessionMissingError"}class Zf extends lo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Qf extends lo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Jf extends lo{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function BD(t){return bt(t)&&t.name==="AuthImplicitGrantRedirectError"}class qb extends lo{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class am extends lo{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ug(t){return bt(t)&&t.name==="AuthRetryableFetchError"}class Yb extends lo{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Qu extends lo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ah="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xb=` 	
\r=`.split(""),PD=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Xb.length;e+=1)t[Xb[e].charCodeAt(0)]=-2;for(let e=0;e<Ah.length;e+=1)t[Ah[e].charCodeAt(0)]=e;return t})();function Wb(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ah[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ah[r]),e.queuedBits-=6}}function rS(t,e,n){const r=PD[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Kb(t){const e=[],n=g=>{e.push(String.fromCodePoint(g))},r={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=g=>{VD(g,r,n)};for(let g=0;g<t.length;g+=1)rS(t.charCodeAt(g),l,u);return e.join("")}function UD(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function FD(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const l=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|l)+65536,n+=1}UD(r,e)}}function VD(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function HD(t){const e=[],n={queue:0,queuedBits:0},r=l=>{e.push(l)};for(let l=0;l<t.length;l+=1)rS(t.charCodeAt(l),n,r);return new Uint8Array(e)}function zD(t){const e=[];return FD(t,n=>e.push(n)),new Uint8Array(e)}function $D(t){const e=[],n={queue:0,queuedBits:0},r=l=>{e.push(l)};return t.forEach(l=>Wb(l,n,r)),Wb(null,n,r),e.join("")}function GD(t){return Math.round(Date.now()/1e3)+t}function qD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Bs=()=>typeof window<"u"&&typeof document<"u",ko={tested:!1,writable:!1},Ju=()=>{if(!Bs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ko.tested)return ko.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ko.tested=!0,ko.writable=!0}catch{ko.tested=!0,ko.writable=!1}return ko.writable};function YD(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((l,u)=>{e[u]=l})}catch{}return n.searchParams.forEach((r,l)=>{e[l]=r}),e}const aS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ad(async()=>{const{default:r}=await Promise.resolve().then(()=>Mc);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},XD=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",oS=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},eh=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},th=async(t,e)=>{await t.removeItem(e)};class Hh{constructor(){this.promise=new Hh.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Hh.promiseConstructor=Promise;function dg(t){const e=t.split(".");if(e.length!==3)throw new Qu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!MD.test(e[r]))throw new Qu("JWT not in base64url format");return{header:JSON.parse(Kb(e[0])),payload:JSON.parse(Kb(e[1])),signature:HD(e[2]),raw:{header:e[0],payload:e[1]}}}async function WD(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function KD(t,e){return new Promise((r,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const g=await t(u);if(!e(u,null,g)){r(g);return}}catch(g){if(!e(u,g)){l(g);return}}})()})}function ZD(t){return("0"+t.toString(16)).substr(-2)}function QD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let l="";for(let u=0;u<56;u++)l+=n.charAt(Math.floor(Math.random()*r));return l}return crypto.getRandomValues(e),Array.from(e,ZD).join("")}async function JD(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),l=new Uint8Array(r);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function e9(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await JD(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function nc(t,e,n=!1){const r=QD();let l=r;n&&(l+="/PASSWORD_RECOVERY"),await oS(t,`${e}-code-verifier`,l);const u=await e9(r);return[u,r===u?"plain":"s256"]}const t9=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function n9(t){const e=t.headers.get(rm);if(!e||!e.match(t9))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function i9(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function s9(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const r9=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ic(t){if(!r9.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var a9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(t);l<r.length;l++)e.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(t,r[l])&&(n[r[l]]=t[r[l]]);return n};const Bo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),o9=[502,503,504];async function Zb(t){var e;if(!XD(t))throw new am(Bo(t),0);if(o9.includes(t.status))throw new am(Bo(t),t.status);let n;try{n=await t.json()}catch(u){throw new sS(Bo(u),u)}let r;const l=n9(t);if(l&&l.getTime()>=iS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Yb(Bo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ua}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,g)=>u&&typeof g=="string",!0))throw new Yb(Bo(n),t.status,n.weak_password.reasons);throw new LD(Bo(n),t.status||500,r)}const l9=(t,e,n,r)=>{const l={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),l.body=JSON.stringify(r),Object.assign(Object.assign({},l),n))};async function Dt(t,e,n,r){var l;const u=Object.assign({},r==null?void 0:r.headers);u[rm]||(u[rm]=iS["2024-01-01"].name),r!=null&&r.jwt&&(u.Authorization=`Bearer ${r.jwt}`);const g=(l=r==null?void 0:r.query)!==null&&l!==void 0?l:{};r!=null&&r.redirectTo&&(g.redirect_to=r.redirectTo);const y=Object.keys(g).length?"?"+new URLSearchParams(g).toString():"",b=await c9(t,e,n+y,{headers:u,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(b):{data:Object.assign({},b),error:null}}async function c9(t,e,n,r,l,u){const g=l9(e,r,l,u);let y;try{y=await t(n,Object.assign({},g))}catch(b){throw console.error(b),new am(Bo(b),0)}if(y.ok||await Zb(y),r!=null&&r.noResolveJson)return y;try{return await y.json()}catch(b){await Zb(b)}}function Gr(t){var e;let n=null;h9(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=GD(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Qb(t){const e=Gr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ha(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function u9(t){return{data:t,error:null}}function d9(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:l,verification_type:u}=t,g=a9(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),y={action_link:e,email_otp:n,hashed_token:r,redirect_to:l,verification_type:u},b=Object.assign({},g);return{data:{properties:y,user:b},error:null}}function f9(t){return t}function h9(t){return t.access_token&&t.refresh_token&&t.expires_in}const fg=["global","local","others"];var g9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(t);l<r.length;l++)e.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(t,r[l])&&(n[r[l]]=t[r[l]]);return n};class m9{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=aS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=fg[0]){if(fg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fg.join(", ")}`);try{return await Dt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ha})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=g9(e,["options"]),l=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(l.new_email=r==null?void 0:r.newEmail,delete l.newEmail),await Dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:d9,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(bt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Dt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ha})}catch(n){if(bt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,l,u,g,y,b;try{const x={nextPage:null,lastPage:0,total:0},S=await Dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(u=(l=e==null?void 0:e.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:f9});if(S.error)throw S.error;const A=await S.json(),N=(g=S.headers.get("x-total-count"))!==null&&g!==void 0?g:0,I=(b=(y=S.headers.get("link"))===null||y===void 0?void 0:y.split(","))!==null&&b!==void 0?b:[];return I.length>0&&(I.forEach(M=>{const j=parseInt(M.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(M.split(";")[1].split("=")[1]);x[`${U}Page`]=j}),x.total=parseInt(N)),{data:Object.assign(Object.assign({},A),x),error:null}}catch(x){if(bt(x))return{data:{users:[]},error:x};throw x}}async getUserById(e){ic(e);try{return await Dt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ha})}catch(n){if(bt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){ic(e);try{return await Dt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ha})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){ic(e);try{return await Dt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ha})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ic(e.userId);try{const{data:n,error:r}=await Dt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:n,error:r}}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){ic(e.userId),ic(e.id);try{return{data:await Dt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}}}const p9={getItem:t=>Ju()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Ju()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Ju()&&globalThis.localStorage.removeItem(t)}};function Jb(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function x9(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const sc={debug:!!(globalThis&&Ju()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class lS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class y9 extends lS{}async function b9(t,e,n){sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),sc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async l=>{if(l){sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,l.name);try{return await n()}finally{sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,l.name)}}else{if(e===0)throw sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new y9(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(sc.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}x9();const w9={url:RD,storageKey:OD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ID,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ew(t,e,n){return await n()}class dd{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=dd.nextInstanceID,dd.nextInstanceID+=1,this.instanceID>0&&Bs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},w9),e);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new m9({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=aS(l.fetch),this.lock=l.lock||ew,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:Bs()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=b9:this.lock=ew,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?l.storage?this.storage=l.storage:Ju()?this.storage=p9:(this.memoryStorage={},this.storage=Jb(this.memoryStorage)):(this.memoryStorage={},this.storage=Jb(this.memoryStorage)),Bs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${nS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=YD(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Bs()&&this.detectSessionInUrl&&r!=="none"){const{data:l,error:u}=await this._getSessionFromURL(n,r);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),BD(u)){const b=(e=u.details)===null||e===void 0?void 0:e.code;if(b==="identity_already_exists"||b==="identity_not_found"||b==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:g,redirectType:y}=l;return this._debug("#_initialize()","detected session in URL",g,"redirect type",y),await this._saveSession(g),setTimeout(async()=>{y==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",g):await this._notifyAllSubscribers("SIGNED_IN",g)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return bt(n)?{error:n}:{error:new sS("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,l;try{const u=await Dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(l=e==null?void 0:e.options)===null||l===void 0?void 0:l.captchaToken}},xform:Gr}),{data:g,error:y}=u;if(y||!g)return{data:{user:null,session:null},error:y};const b=g.session,x=g.user;return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:x,session:b},error:null}}catch(u){if(bt(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(e){var n,r,l;try{let u;if("email"in e){const{email:S,password:A,options:N}=e;let I=null,M=null;this.flowType==="pkce"&&([I,M]=await nc(this.storage,this.storageKey)),u=await Dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:S,password:A,data:(n=N==null?void 0:N.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:I,code_challenge_method:M},xform:Gr})}else if("phone"in e){const{phone:S,password:A,options:N}=e;u=await Dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:S,password:A,data:(r=N==null?void 0:N.data)!==null&&r!==void 0?r:{},channel:(l=N==null?void 0:N.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:Gr})}else throw new Qf("You must provide either an email or phone number and a password");const{data:g,error:y}=u;if(y||!g)return{data:{user:null,session:null},error:y};const b=g.session,x=g.user;return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:x,session:b},error:null}}catch(u){if(bt(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(e){try{let n;if("email"in e){const{email:u,password:g,options:y}=e;n=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:g,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Qb})}else if("phone"in e){const{phone:u,password:g,options:y}=e;n=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:g,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Qb})}else throw new Qf("You must provide either an email or phone number and a password");const{data:r,error:l}=n;return l?{data:{user:null,session:null},error:l}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Zf}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:l})}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,l,u;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=e.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,l,u,g,y,b,x,S,A,N,I;let M,j;if("message"in e)M=e.message,j=e.signature;else{const{chain:U,wallet:z,statement:q,options:B}=e;let V;if(Bs())if(typeof z=="object")V=z;else{const J=window;if("solana"in J&&typeof J.solana=="object"&&("signIn"in J.solana&&typeof J.solana.signIn=="function"||"signMessage"in J.solana&&typeof J.solana.signMessage=="function"))V=J.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof z!="object"||!(B!=null&&B.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=z}const H=new URL((n=B==null?void 0:B.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in V&&V.signIn){const J=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B==null?void 0:B.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),q?{statement:q}:null));let X;if(Array.isArray(J)&&J[0]&&typeof J[0]=="object")X=J[0];else if(J&&typeof J=="object"&&"signedMessage"in J&&"signature"in J)X=J;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in X&&"signature"in X&&(typeof X.signedMessage=="string"||X.signedMessage instanceof Uint8Array)&&X.signature instanceof Uint8Array)M=typeof X.signedMessage=="string"?X.signedMessage:new TextDecoder().decode(X.signedMessage),j=X.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");M=[`${H.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...q?["",q,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(l=(r=B==null?void 0:B.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=B==null?void 0:B.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((g=B==null?void 0:B.signInWithSolana)===null||g===void 0)&&g.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((y=B==null?void 0:B.signInWithSolana)===null||y===void 0)&&y.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((b=B==null?void 0:B.signInWithSolana)===null||b===void 0)&&b.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((x=B==null?void 0:B.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((A=(S=B==null?void 0:B.signInWithSolana)===null||S===void 0?void 0:S.resources)===null||A===void 0)&&A.length?["Resources",...B.signInWithSolana.resources.map(X=>`- ${X}`)]:[]].join(`
`);const J=await V.signMessage(new TextEncoder().encode(M),"utf8");if(!J||!(J instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=J}}try{const{data:U,error:z}=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:M,signature:$D(j)},!((N=e.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(I=e.options)===null||I===void 0?void 0:I.captchaToken}}:null),xform:Gr});if(z)throw z;return!U||!U.session||!U.user?{data:{user:null,session:null},error:new Zf}:(U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("SIGNED_IN",U.session)),{data:Object.assign({},U),error:z})}catch(U){if(bt(U))return{data:{user:null,session:null},error:U};throw U}}async _exchangeCodeForSession(e){const n=await eh(this.storage,`${this.storageKey}-code-verifier`),[r,l]=(n??"").split("/");try{const{data:u,error:g}=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Gr});if(await th(this.storage,`${this.storageKey}-code-verifier`),g)throw g;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new Zf}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:g})}catch(u){if(bt(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(e){try{const{options:n,provider:r,token:l,access_token:u,nonce:g}=e,y=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:l,access_token:u,nonce:g,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Gr}),{data:b,error:x}=y;return x?{data:{user:null,session:null},error:x}:!b||!b.session||!b.user?{data:{user:null,session:null},error:new Zf}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:b,error:x})}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,l,u,g;try{if("email"in e){const{email:y,options:b}=e;let x=null,S=null;this.flowType==="pkce"&&([x,S]=await nc(this.storage,this.storageKey));const{error:A}=await Dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:y,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},create_user:(r=b==null?void 0:b.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:x,code_challenge_method:S},redirectTo:b==null?void 0:b.emailRedirectTo});return{data:{user:null,session:null},error:A}}if("phone"in e){const{phone:y,options:b}=e,{data:x,error:S}=await Dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:y,data:(l=b==null?void 0:b.data)!==null&&l!==void 0?l:{},create_user:(u=b==null?void 0:b.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},channel:(g=b==null?void 0:b.channel)!==null&&g!==void 0?g:"sms"}});return{data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:S}}throw new Qf("You must provide either an email or phone number.")}catch(y){if(bt(y))return{data:{user:null,session:null},error:y};throw y}}async verifyOtp(e){var n,r;try{let l,u;"options"in e&&(l=(n=e.options)===null||n===void 0?void 0:n.redirectTo,u=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:g,error:y}=await Dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:Gr});if(y)throw y;if(!g)throw new Error("An error occurred on token verification.");const b=g.session,x=g.user;return b!=null&&b.access_token&&(await this._saveSession(b),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",b)),{data:{user:x,session:b},error:null}}catch(l){if(bt(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(e){var n,r,l;try{let u=null,g=null;return this.flowType==="pkce"&&([u,g]=await nc(this.storage,this.storageKey)),await Dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((l=e==null?void 0:e.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:g}),headers:this.headers,xform:u9})}catch(u){if(bt(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ua;const{error:l}=await Dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:l}})}catch(e){if(bt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:l,options:u}=e,{error:g}=await Dt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:g}}else if("phone"in e){const{phone:r,type:l,options:u}=e,{data:g,error:y}=await Dt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return{data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:y}}throw new Qf("You must provide either an email or phone number and a type")}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await eh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<cg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let g=this.suppressGetSessionWarning;e=new Proxy(e,{get:(b,x,S)=>(!g&&x==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),g=!0,this.suppressGetSessionWarning=!0),Reflect.get(b,x,S))})}return{data:{session:e},error:null}}const{session:l,error:u}=await this._callRefreshToken(e.refresh_token);return u?{data:{session:null},error:u}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ha}):await this._useSession(async n=>{var r,l,u;const{data:g,error:y}=n;if(y)throw y;return!(!((r=g.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ua}:await Dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=g.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:Ha})})}catch(n){if(bt(n))return jD(n)&&(await this._removeSession(),await th(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:l,error:u}=r;if(u)throw u;if(!l.session)throw new Ua;const g=l.session;let y=null,b=null;this.flowType==="pkce"&&e.email!=null&&([y,b]=await nc(this.storage,this.storageKey));const{data:x,error:S}=await Dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:y,code_challenge_method:b}),jwt:g.access_token,xform:Ha});if(S)throw S;return g.user=x.user,await this._saveSession(g),await this._notifyAllSubscribers("USER_UPDATED",g),{data:{user:g.user},error:null}})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ua;const n=Date.now()/1e3;let r=n,l=!0,u=null;const{payload:g}=dg(e.access_token);if(g.exp&&(r=g.exp,l=r<=n),l){const{session:y,error:b}=await this._callRefreshToken(e.refresh_token);if(b)return{data:{user:null,session:null},error:b};if(!y)return{data:{user:null,session:null},error:null};u=y}else{const{data:y,error:b}=await this._getUser(e.access_token);if(b)throw b;u={access_token:e.access_token,refresh_token:e.refresh_token,user:y.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(n){if(bt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:g,error:y}=n;if(y)throw y;e=(r=g.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ua;const{session:l,error:u}=await this._callRefreshToken(e.refresh_token);return u?{data:{user:null,session:null},error:u}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Bs())throw new Jf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Jf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new qb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jf("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new qb("No code detected.");const{data:q,error:B}=await this._exchangeCodeForSession(e.code);if(B)throw B;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:q.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:l,access_token:u,refresh_token:g,expires_in:y,expires_at:b,token_type:x}=e;if(!u||!y||!g||!x)throw new Jf("No session defined in URL");const S=Math.round(Date.now()/1e3),A=parseInt(y);let N=S+A;b&&(N=parseInt(b));const I=N-S;I*1e3<=ac&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${I}s, should have been closer to ${A}s`);const M=N-A;S-M>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",M,N,S):S-M<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",M,N,S);const{data:j,error:U}=await this._getUser(u);if(U)throw U;const z={provider_token:r,provider_refresh_token:l,access_token:u,expires_in:A,expires_at:N,refresh_token:g,token_type:x,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:z,redirectType:e.type},error:null}}catch(r){if(bt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await eh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:l,error:u}=n;if(u)return{error:u};const g=(r=l.session)===null||r===void 0?void 0:r.access_token;if(g){const{error:y}=await this.admin.signOut(g,e);if(y&&!(kD(y)&&(y.status===404||y.status===401||y.status===403)))return{error:y}}return e!=="others"&&(await this._removeSession(),await th(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=qD(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,l;try{const{data:{session:u},error:g}=n;if(g)throw g;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",e,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(e))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",u),console.error(u)}})}async resetPasswordForEmail(e,n={}){let r=null,l=null;this.flowType==="pkce"&&([r,l]=await nc(this.storage,this.storageKey,!0));try{return await Dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:l,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(bt(u))return{data:null,error:u};throw u}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:l}=await this._useSession(async u=>{var g,y,b,x,S;const{data:A,error:N}=u;if(N)throw N;const I=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(g=e.options)===null||g===void 0?void 0:g.redirectTo,scopes:(y=e.options)===null||y===void 0?void 0:y.scopes,queryParams:(b=e.options)===null||b===void 0?void 0:b.queryParams,skipBrowserRedirect:!0});return await Dt(this.fetch,"GET",I,{headers:this.headers,jwt:(S=(x=A.session)===null||x===void 0?void 0:x.access_token)!==null&&S!==void 0?S:void 0})});if(l)throw l;return Bs()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(bt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,l;const{data:u,error:g}=n;if(g)throw g;return await Dt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(l=(r=u.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0})})}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await KD(async l=>(l>0&&await WD(200*Math.pow(2,l-1)),this._debug(n,"refreshing attempt",l),await Dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gr})),(l,u)=>{const g=200*Math.pow(2,l);return u&&ug(u)&&Date.now()+g-r<ac})}catch(r){if(this._debug(n,"error",r),bt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Bs()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await eh(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const l=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<cg;if(this._debug(n,`session has${l?"":" not"} expired with margin of ${cg}s`),l){if(this.autoRefreshToken&&r.refresh_token){const{error:u}=await this._callRefreshToken(r.refresh_token);u&&(console.error(u),ug(u)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ua;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Hh;const{data:u,error:g}=await this._refreshAccessToken(e);if(g)throw g;if(!u.session)throw new Ua;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const y={session:u.session,error:null};return this.refreshingDeferred.resolve(y),y}catch(u){if(this._debug(l,"error",u),bt(u)){const g={session:null,error:u};return ug(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(g),g}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(e,n,r=!0){const l=`#_notifyAllSubscribers(${e})`;this._debug(l,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const u=[],g=Array.from(this.stateChangeEmitters.values()).map(async y=>{try{await y.callback(e,n)}catch(b){u.push(b)}});if(await Promise.all(g),u.length>0){for(let y=0;y<u.length;y+=1)console.error(u[y]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await oS(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await th(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Bs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ac);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((r.expires_at*1e3-e)/ac);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${ac}ms, refresh threshold is ${sm} ticks`),l<=sm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof lS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const l=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&l.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&l.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[u,g]=await nc(this.storage,this.storageKey),y=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(g)}`});l.push(y.toString())}if(r!=null&&r.queryParams){const u=new URLSearchParams(r.queryParams);l.push(u.toString())}return r!=null&&r.skipBrowserRedirect&&l.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${l.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:l,error:u}=n;return u?{data:null,error:u}:await Dt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,l;const{data:u,error:g}=n;if(g)return{data:null,error:g};const y=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:b,error:x}=await Dt(this.fetch,"POST",`${this.url}/factors`,{body:y,headers:this.headers,jwt:(r=u==null?void 0:u.session)===null||r===void 0?void 0:r.access_token});return x?{data:null,error:x}:(e.factorType==="totp"&&(!((l=b==null?void 0:b.totp)===null||l===void 0)&&l.qr_code)&&(b.totp.qr_code=`data:image/svg+xml;utf-8,${b.totp.qr_code}`),{data:b,error:null})})}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:l,error:u}=n;if(u)return{data:null,error:u};const{data:g,error:y}=await Dt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});return y?{data:null,error:y}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),{data:g,error:y})})}catch(n){if(bt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:l,error:u}=n;return u?{data:null,error:u}:await Dt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(bt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],l=r.filter(g=>g.factor_type==="totp"&&g.status==="verified"),u=r.filter(g=>g.factor_type==="phone"&&g.status==="verified");return{data:{all:r,totp:l,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:l},error:u}=e;if(u)return{data:null,error:u};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=dg(l.access_token);let y=null;g.aal&&(y=g.aal);let b=y;((r=(n=l.user.factors)===null||n===void 0?void 0:n.filter(A=>A.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(b="aal2");const S=g.amr||[];return{data:{currentLevel:y,nextLevel:b,currentAuthenticationMethods:S},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(g=>g.kid===e);if(r||(r=this.jwks.keys.find(g=>g.kid===e),r&&this.jwks_cached_at+DD>Date.now()))return r;const{data:l,error:u}=await Dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;if(!l.keys||l.keys.length===0)throw new Qu("JWKS is empty");if(this.jwks=l,this.jwks_cached_at=Date.now(),r=l.keys.find(g=>g.kid===e),!r)throw new Qu("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:I,error:M}=await this.getSession();if(M||!I.session)return{data:null,error:M};r=I.session.access_token}const{header:l,payload:u,signature:g,raw:{header:y,payload:b}}=dg(r);if(i9(u.exp),!l.kid||l.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:I}=await this.getUser(r);if(I)throw I;return{data:{claims:u,header:l,signature:g},error:null}}const x=s9(l.alg),S=await this.fetchJwk(l.kid,n),A=await crypto.subtle.importKey("jwk",S,x,!0,["verify"]);if(!await crypto.subtle.verify(x,A,g,zD(`${y}.${b}`)))throw new Qu("Invalid JWT signature");return{data:{claims:u,header:l,signature:g},error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}}}dd.nextInstanceID=0;const v9=dd;class S9 extends v9{constructor(e){super(e)}}var E9=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(S){try{x(r.next(S))}catch(A){g(A)}}function b(S){try{x(r.throw(S))}catch(A){g(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};class C9{constructor(e,n,r){var l,u,g;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const y=_D(e),b=new URL(y);this.realtimeUrl=new URL("realtime/v1",b),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",b),this.storageUrl=new URL("storage/v1",b),this.functionsUrl=new URL("functions/v1",b);const x=`sb-${b.hostname.split(".")[0]}-auth-token`,S={db:bD,realtime:vD,auth:Object.assign(Object.assign({},wD),{storageKey:x}),global:yD},A=ND(r??{},S);this.storageKey=(l=A.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(u=A.global.headers)!==null&&u!==void 0?u:{},A.accessToken?(this.accessToken=A.accessToken,this.auth=new Proxy({},{get:(N,I)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(I)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((g=A.auth)!==null&&g!==void 0?g:{},this.headers,A.global.fetch),this.fetch=AD(n,this._getAccessToken.bind(this),A.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},A.realtime)),this.rest=new VM(new URL("rest/v1",b).href,{headers:this.headers,schema:A.db.schema,fetch:this.fetch}),A.accessToken||this._listenForAuthEvents()}get functions(){return new RM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new mD(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return E9(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:l,storageKey:u,flowType:g,lock:y,debug:b},x,S){const A={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new S9({url:this.authUrl.href,headers:Object.assign(Object.assign({},A),x),storageKey:u,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:l,flowType:g,lock:y,debug:b,fetch:S,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new nD(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const A9=(t,e,n)=>new C9(t,e,n),Be=A9("https://gsicrcogciklihyflhtc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdzaWNyY29nY2lrbGloeWZsaHRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2NjEzOTgsImV4cCI6MjA2NTIzNzM5OH0.RXaJeqWW0e35fsRTtn5RkrcPnI1e7kIIJnBoIanawI0");typeof window<"u"&&(window.supabase=Be);function cS(){const{i18n:t}=Bn(),e=t.language==="th"?"th":"en";function n(){const r=e==="en"?"th":"en";t.changeLanguage(r),localStorage.setItem("lang",r)}return E.jsxs("button",{type:"button",onClick:n,className:"relative w-14 h-8 rounded-full border-2 border-[#6654b3] bg-white flex items-center px-1 transition","aria-label":"Toggle language",style:{minWidth:56},children:[E.jsx("span",{className:`absolute left-1 top-1 w-6 h-6 rounded-full bg-[#6654b3] text-white flex items-center justify-center font-bold text-xs transition-transform duration-300 ${e==="th"?"translate-x-6":"translate-x-0"}`,children:e==="en"?"EN":"TH"}),E.jsxs("span",{className:"w-full flex justify-between text-[#6654b3] font-bold text-xs px-2 select-none",children:[E.jsx("span",{children:"EN"}),E.jsx("span",{children:"TH"})]})]})}function T9(){const{t}=Bn(),e=_s(),[n,r]=R.useState(""),[l,u]=R.useState(""),[g,y]=R.useState(!1),[b,x]=R.useState("");async function S(A){A.preventDefault(),x(""),y(!0);const N=n.trim().toLowerCase(),I=l.trim(),{error:M}=await Be.auth.signInWithPassword({email:N,password:I});M?x(M.message):e("/dashboard"),y(!1)}return E.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 relative",children:[E.jsx("div",{className:"absolute top-6 right-6 z-10",children:E.jsx(cS,{})}),E.jsxs("form",{onSubmit:S,className:"w-full max-w-md bg-white p-8 rounded shadow",children:[E.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:t("signIn")}),E.jsxs("label",{className:"block mb-4",children:[E.jsx("span",{className:"text-sm",children:t("email")}),E.jsx("input",{type:"email",className:"mt-1 block w-full border rounded px-3 py-2",placeholder:"you@example.com",value:n,onChange:A=>r(A.target.value),required:!0,autoFocus:!0})]}),E.jsxs("label",{className:"block mb-6",children:[E.jsx("span",{className:"text-sm",children:t("password")}),E.jsx("input",{type:"password",className:"mt-1 block w-full border rounded px-3 py-2",placeholder:"",value:l,onChange:A=>u(A.target.value),required:!0})]}),E.jsx("button",{type:"submit",disabled:g,className:"w-full bg-[#6654b3] text-white py-2 rounded hover:bg-[#5542a0] disabled:opacity-50 transition",children:t(g?"signingIn":"signIn")}),b&&E.jsx("p",{className:"mt-4 text-red-600 text-center",children:b})]})]})}function _9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const Th=R.forwardRef(_9);function N9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M7.5 3.75A1.5 1.5 0 0 0 6 5.25v13.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5V15a.75.75 0 0 1 1.5 0v3.75a3 3 0 0 1-3 3h-6a3 3 0 0 1-3-3V5.25a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3V9A.75.75 0 0 1 15 9V5.25a1.5 1.5 0 0 0-1.5-1.5h-6Zm10.72 4.72a.75.75 0 0 1 1.06 0l3 3a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 1 1-1.06-1.06l1.72-1.72H9a.75.75 0 0 1 0-1.5h10.94l-1.72-1.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const R9=R.forwardRef(N9);function O9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"}))}const I9=R.forwardRef(O9);function M9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M5.85 3.5a.75.75 0 0 0-1.117-1 9.719 9.719 0 0 0-2.348 4.876.75.75 0 0 0 1.479.248A8.219 8.219 0 0 1 5.85 3.5ZM19.267 2.5a.75.75 0 1 0-1.118 1 8.22 8.22 0 0 1 1.987 4.124.75.75 0 0 0 1.48-.248A9.72 9.72 0 0 0 19.266 2.5Z"}),R.createElement("path",{fillRule:"evenodd",d:"M12 2.25A6.75 6.75 0 0 0 5.25 9v.75a8.217 8.217 0 0 1-2.119 5.52.75.75 0 0 0 .298 1.206c1.544.57 3.16.99 4.831 1.243a3.75 3.75 0 1 0 7.48 0 24.583 24.583 0 0 0 4.83-1.244.75.75 0 0 0 .298-1.205 8.217 8.217 0 0 1-2.118-5.52V9A6.75 6.75 0 0 0 12 2.25ZM9.75 18c0-.034 0-.067.002-.1a25.05 25.05 0 0 0 4.496 0l.002.1a2.25 2.25 0 1 1-4.5 0Z",clipRule:"evenodd"}))}const D9=R.forwardRef(M9);function L9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M5.25 9a6.75 6.75 0 0 1 13.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 0 1-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 1 1-7.48 0 24.585 24.585 0 0 1-4.831-1.244.75.75 0 0 1-.298-1.205A8.217 8.217 0 0 0 5.25 9.75V9Zm4.502 8.9a2.25 2.25 0 1 0 4.496 0 25.057 25.057 0 0 1-4.496 0Z",clipRule:"evenodd"}))}const uS=R.forwardRef(L9);function k9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M11.25 4.533A9.707 9.707 0 0 0 6 3a9.735 9.735 0 0 0-3.25.555.75.75 0 0 0-.5.707v14.25a.75.75 0 0 0 1 .707A8.237 8.237 0 0 1 6 18.75c1.995 0 3.823.707 5.25 1.886V4.533ZM12.75 20.636A8.214 8.214 0 0 1 18 18.75c.966 0 1.89.166 2.75.47a.75.75 0 0 0 1-.708V4.262a.75.75 0 0 0-.5-.707A9.735 9.735 0 0 0 18 3a9.707 9.707 0 0 0-5.25 1.533v16.103Z"}))}const j9=R.forwardRef(k9);function B9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M4.913 2.658c2.075-.27 4.19-.408 6.337-.408 2.147 0 4.262.139 6.337.408 1.922.25 3.291 1.861 3.405 3.727a4.403 4.403 0 0 0-1.032-.211 50.89 50.89 0 0 0-8.42 0c-2.358.196-4.04 2.19-4.04 4.434v4.286a4.47 4.47 0 0 0 2.433 3.984L7.28 21.53A.75.75 0 0 1 6 21v-4.03a48.527 48.527 0 0 1-1.087-.128C2.905 16.58 1.5 14.833 1.5 12.862V6.638c0-1.97 1.405-3.718 3.413-3.979Z"}),R.createElement("path",{d:"M15.75 7.5c-1.376 0-2.739.057-4.086.169C10.124 7.797 9 9.103 9 10.609v4.285c0 1.507 1.128 2.814 2.67 2.94 1.243.102 2.5.157 3.768.165l2.782 2.781a.75.75 0 0 0 1.28-.53v-2.39l.33-.026c1.542-.125 2.67-1.433 2.67-2.94v-4.286c0-1.505-1.125-2.811-2.664-2.94A49.392 49.392 0 0 0 15.75 7.5Z"}))}const P9=R.forwardRef(B9);function U9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"}))}const F9=R.forwardRef(U9);function V9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M7.502 6h7.128A3.375 3.375 0 0 1 18 9.375v9.375a3 3 0 0 0 3-3V6.108c0-1.505-1.125-2.811-2.664-2.94a48.972 48.972 0 0 0-.673-.05A3 3 0 0 0 15 1.5h-1.5a3 3 0 0 0-2.663 1.618c-.225.015-.45.032-.673.05C8.662 3.295 7.554 4.542 7.502 6ZM13.5 3A1.5 1.5 0 0 0 12 4.5h4.5A1.5 1.5 0 0 0 15 3h-1.5Z",clipRule:"evenodd"}),R.createElement("path",{fillRule:"evenodd",d:"M3 9.375C3 8.339 3.84 7.5 4.875 7.5h9.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V9.375Zm9.586 4.594a.75.75 0 0 0-1.172-.938l-2.476 3.096-.908-.907a.75.75 0 0 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.116-.062l3-3.75Z",clipRule:"evenodd"}))}const H9=R.forwardRef(V9);function z9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z",clipRule:"evenodd"}))}const $9=R.forwardRef(z9);function G9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 0 0-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 0 0-2.282.819l-.922 1.597a1.875 1.875 0 0 0 .432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 0 0 0 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 0 0-.432 2.385l.922 1.597a1.875 1.875 0 0 0 2.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 0 0 2.28-.819l.923-1.597a1.875 1.875 0 0 0-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 0 0 0-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 0 0-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 0 0-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 0 0-1.85-1.567h-1.843ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z",clipRule:"evenodd"}))}const q9=R.forwardRef(G9);function Y9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M10.464 8.746c.227-.18.497-.311.786-.394v2.795a2.252 2.252 0 0 1-.786-.393c-.394-.313-.546-.681-.546-1.004 0-.323.152-.691.546-1.004ZM12.75 15.662v-2.824c.347.085.664.228.921.421.427.32.579.686.579.991 0 .305-.152.671-.579.991a2.534 2.534 0 0 1-.921.42Z"}),R.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v.816a3.836 3.836 0 0 0-1.72.756c-.712.566-1.112 1.35-1.112 2.178 0 .829.4 1.612 1.113 2.178.502.4 1.102.647 1.719.756v2.978a2.536 2.536 0 0 1-.921-.421l-.879-.66a.75.75 0 0 0-.9 1.2l.879.66c.533.4 1.169.645 1.821.75V18a.75.75 0 0 0 1.5 0v-.81a4.124 4.124 0 0 0 1.821-.749c.745-.559 1.179-1.344 1.179-2.191 0-.847-.434-1.632-1.179-2.191a4.122 4.122 0 0 0-1.821-.75V8.354c.29.082.559.213.786.393l.415.33a.75.75 0 0 0 .933-1.175l-.415-.33a3.836 3.836 0 0 0-1.719-.755V6Z",clipRule:"evenodd"}))}const X9=R.forwardRef(Y9);function W9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),R.createElement("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}))}const K9=R.forwardRef(W9);function Z9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-2.625 6c-.54 0-.828.419-.936.634a1.96 1.96 0 0 0-.189.866c0 .298.059.605.189.866.108.215.395.634.936.634.54 0 .828-.419.936-.634.13-.26.189-.568.189-.866 0-.298-.059-.605-.189-.866-.108-.215-.395-.634-.936-.634Zm4.314.634c.108-.215.395-.634.936-.634.54 0 .828.419.936.634.13.26.189.568.189.866 0 .298-.059.605-.189.866-.108.215-.395.634-.936.634-.54 0-.828-.419-.936-.634a1.96 1.96 0 0 1-.189-.866c0-.298.059-.605.189-.866Zm2.023 6.828a.75.75 0 1 0-1.06-1.06 3.75 3.75 0 0 1-5.304 0 .75.75 0 0 0-1.06 1.06 5.25 5.25 0 0 0 7.424 0Z",clipRule:"evenodd"}))}const tw=R.forwardRef(Z9);function Q9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),R.createElement("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"}))}const J9=R.forwardRef(Q9);function eL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const tL=R.forwardRef(eL);function nL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z",clipRule:"evenodd"}))}const iL=R.forwardRef(nL);function sL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 9.375v-4.5ZM4.875 4.5a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 0 1-1.875-1.875v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5ZM6 6.75A.75.75 0 0 1 6.75 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75A.75.75 0 0 1 6 7.5v-.75Zm9.75 0A.75.75 0 0 1 16.5 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 19.125v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875-.75a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM6 16.5a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm9.75 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm-3 3a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Z",clipRule:"evenodd"}))}const nw=R.forwardRef(sL);function rL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))}const aL=R.forwardRef(rL);function oL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M5.25 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM2.25 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM18.75 7.5a.75.75 0 0 0-1.5 0v2.25H15a.75.75 0 0 0 0 1.5h2.25v2.25a.75.75 0 0 0 1.5 0v-2.25H21a.75.75 0 0 0 0-1.5h-2.25V7.5Z"}))}const lL=R.forwardRef(oL);function cL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const dS=R.forwardRef(cL),uL="#6654b3",dL="#f6f6f6",nh=82;function fL(){const{t}=Bn(),e=vr(),n=_s(),r=e.pathname==="/dashboard",[l,u]=R.useState(!1),g=[{to:"/dashboard",icon:E.jsx(J9,{className:"w-8 h-8"}),active:e.pathname==="/dashboard",key:"home"},{to:"/reports",icon:E.jsx(K9,{className:"w-8 h-8"}),active:e.pathname.startsWith("/reports"),key:"reports"},{to:"/messaging",icon:E.jsx(P9,{className:"w-8 h-8"}),active:e.pathname.startsWith("/messaging"),key:"messaging"},{to:"/billing",icon:E.jsx(X9,{className:"w-8 h-8"}),active:e.pathname.startsWith("/billing"),key:"billing"}];function y(){return E.jsxs("nav",{style:{width:nh,minWidth:nh,background:uL,color:dL,borderTopRightRadius:"36px",borderBottomRightRadius:"36px",minHeight:"100vh",height:"100vh",boxShadow:"2px 0 20px 0 rgba(102,84,179,0.08)",zIndex:100,display:"flex",flexDirection:"column",alignItems:"center",padding:0,position:"relative"},className:"relative",children:[E.jsxs("div",{style:{height:56,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[E.jsx("button",{className:"md:hidden absolute top-4 left-4 bg-white/90 text-[#6654b3] rounded-full p-1 shadow",style:{display:l?"block":"none"},onClick:()=>u(!1),"aria-label":"Close menu",children:E.jsx(dS,{className:"w-7 h-7"})}),!r&&E.jsx("button",{className:"hidden md:flex w-12 h-12 items-center justify-center rounded-xl bg-white/90 hover:bg-[#edeaf8] text-[#6654b3] shadow transition",onClick:()=>n(-1),"aria-label":t("back"),children:E.jsx(Th,{className:"w-7 h-7"})})]}),E.jsx("div",{className:"flex-1 w-full flex flex-col items-center",style:{overflowY:"auto",gap:0,paddingTop:10,paddingBottom:10,scrollbarWidth:"none",msOverflowStyle:"none"},children:E.jsxs("div",{className:"flex flex-col items-center w-full",style:{gap:24,minHeight:0,flex:1},children:[g.map(b=>E.jsx(vh,{to:b.to,className:`flex items-center justify-center w-12 h-12 rounded-xl transition
                  ${b.active?"bg-white/80 shadow text-[#6654b3]":"text-white hover:bg-white/20"}`,title:t(b.key),onClick:()=>u(!1),tabIndex:0,children:b.icon},b.key)),E.jsx(vh,{to:"/settings",className:`flex items-center justify-center w-12 h-12 rounded-xl transition
                ${e.pathname==="/settings"?"bg-white/80 shadow text-[#6654b3]":"text-white hover:bg-white/20"}`,title:t("settings"),onClick:()=>u(!1),tabIndex:0,children:E.jsx(q9,{className:"w-8 h-8"})})]})}),E.jsxs("div",{className:"w-full flex flex-col items-center gap-2 pb-3",style:{position:"sticky",bottom:0,zIndex:2},children:[E.jsx(cS,{}),E.jsx("button",{type:"button",title:t("logout"),onClick:()=>n("/logout"),className:"flex items-center justify-center w-12 h-12 rounded-xl transition text-white hover:bg-white/20",style:{border:0,background:"none",outline:"none"},tabIndex:0,children:E.jsx(R9,{className:"w-8 h-8"})})]}),E.jsx("style",{children:`
          nav::-webkit-scrollbar { display: none; }
          `})]})}return E.jsxs(E.Fragment,{children:[E.jsx("button",{className:"fixed top-3 left-3 z-50 bg-[#6654b3] text-white p-2 rounded-xl shadow-lg md:hidden",onClick:()=>u(!0),"aria-label":"Open menu",style:{display:l?"none":void 0},children:E.jsx(I9,{className:"w-8 h-8"})}),E.jsx("aside",{className:`
          fixed top-0 left-0 h-full z-50 transition-transform duration-200 ease-in-out
          ${l?"translate-x-0":"-translate-x-full"}
          md:translate-x-0 md:static md:block
        `,style:{width:nh,minWidth:nh,height:"100vh"},children:E.jsx(y,{})}),l&&E.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 md:hidden",onClick:()=>u(!1)})]})}const fS=R.createContext({user:null,setUser:()=>{}});function _d(){return R.useContext(fS)}function hL({children:t}){const[e,n]=R.useState(null);R.useEffect(()=>{Be.auth.getSession().then(({data:u})=>{var g;(g=u.session)!=null&&g.user&&r({id:u.session.user.id,email:u.session.user.email??null})});const{data:l}=Be.auth.onAuthStateChange((u,g)=>{g!=null&&g.user?r({id:g.user.id,email:g.user.email??null}):n(null)});return()=>l.subscription.unsubscribe()},[]);async function r(l){const{data:u,error:g}=await Be.from("profiles").select("role").eq("id",l.id).single();if(g&&g.code!=="PGRST116"){console.error("loadProfile error",g);return}n({id:l.id,email:l.email,role:(u==null?void 0:u.role)??"staff"})}return E.jsx(fS.Provider,{value:{user:e,setUser:n},children:t})}const gL=82;function mL(){const[t,e]=R.useState(0),[n,r]=R.useState(!1),[l,u]=R.useState(!1),[g,y]=R.useState("avatar.png");R.useState(!1);const b=_s(),x=vr(),{user:S}=_d(),A=R.useRef(null),N=x.pathname==="/dashboard";R.useEffect(()=>{async function M(){if(!(S!=null&&S.id))return y("avatar.png");const{data:j,error:U}=await Be.from("profiles").select("avatar_url").eq("id",S.id).single();U||!(j!=null&&j.avatar_url)?y("avatar.png"):y(j.avatar_url)}M()},[S]),R.useEffect(()=>{const M=async()=>{const{count:U}=await Be.from("notifications").select("*",{head:!0,count:"exact"}).eq("read",!1);e(U||0)};M();const j=Be.channel(`notifications_feed_${Date.now()}`).on("postgres_changes",{event:"*",schema:"public",table:"notifications"},M).subscribe();return()=>{j.unsubscribe()}},[]);async function I(M){var J;const j=(J=M.target.files)==null?void 0:J[0];if(!j||!(S!=null&&S.id))return;u(!0);const U=j.name.split(".").pop(),z=`${S.id}-${Date.now()}.${U}`,{error:q}=await Be.storage.from("avatars").upload(z,j,{upsert:!0});if(q){alert("Upload failed: "+q.message),u(!1);return}const{data:B}=Be.storage.from("avatars").getPublicUrl(z),V=B.publicUrl,{error:H}=await Be.from("profiles").update({avatar_url:V}).eq("id",S.id);if(H){alert("Failed to update profile: "+H.message),u(!1);return}y(V),r(!1),u(!1)}return E.jsxs("div",{className:"min-h-screen bg-[#f6f6f6] flex",children:[E.jsx(fL,{}),E.jsxs("div",{className:`
          flex flex-col flex-1 min-h-screen
          transition-all duration-200
          ml-0 md:ml-[${gL}px]
        `,style:{transition:"margin .2s cubic-bezier(.4,0,.2,1)"},children:[E.jsxs("header",{className:"w-full flex items-center px-4 sm:px-8 py-3 shadow-sm",style:{background:"#f6f6f6",borderBottom:"1.5px solid #edeaf8",minHeight:"64px",zIndex:10},children:[E.jsx("div",{className:"flex items-center",style:{minWidth:55,marginLeft:44},children:!N&&E.jsx("button",{className:"md:hidden flex items-center justify-center w-12 h-12 rounded-xl bg-[#6654b3] text-white shadow transition",style:{marginLeft:5},onClick:()=>b(-1),"aria-label":"Back",children:E.jsx(Th,{className:"w-7 h-7"})})}),E.jsx("div",{className:"flex-1 text-center cursor-pointer",onClick:()=>b("/dashboard"),children:E.jsx("span",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight text-[#6654b3] select-none",children:"Wonder Kids"})}),E.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[E.jsxs("button",{onClick:()=>b("/notifications"),className:"relative p-2 rounded-xl hover:bg-[#edeaf8] transition","aria-label":"Notifications",style:{marginLeft:"auto"},children:[E.jsx(uS,{className:"w-7 h-7 text-[#6654b3]"}),t>0&&E.jsx("span",{className:"absolute -top-2 -right-1 bg-[#ec4899] text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-extrabold shadow",children:t})]}),E.jsx("button",{className:"ml-1",style:{background:"none"},onClick:()=>r(!0),"aria-label":"Change profile",children:E.jsx("img",{src:g||"avatar.png",alt:"Profile",className:"w-10 h-10 rounded-full border-2 border-[#c5bdf4] shadow object-cover hover:scale-105 transition"})})]})]}),n&&E.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 max-w-sm w-full flex flex-col items-center",children:[E.jsx("img",{src:g,alt:"Profile preview",className:"w-20 h-20 rounded-full mb-4 border-2 border-[#c5bdf4] shadow object-cover"}),E.jsx("input",{ref:A,type:"file",accept:"image/*",className:"mb-4",onChange:I,disabled:l}),E.jsx("button",{onClick:()=>r(!1),className:"px-5 py-2 rounded-lg bg-[#6654b3] text-white font-bold hover:bg-[#5542a0] transition",disabled:l,children:"Close"})]})}),E.jsx("main",{className:"flex-1 p-0 bg-[#f6f6f6] min-h-[calc(100vh-64px)] transition-all duration-200",children:E.jsx("div",{className:"h-full w-full transition-all",children:E.jsx(cI,{})})})]})]})}function pL({children:t}){return t}function xL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const _h=R.forwardRef(xL);function yL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const om=R.forwardRef(yL);function bL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const wL=R.forwardRef(bL);function vL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const SL=R.forwardRef(vL);function EL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const hS=R.forwardRef(EL);function CL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const gS=R.forwardRef(CL);function AL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const TL=R.forwardRef(AL);function _L({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const NL=R.forwardRef(_L);function RL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const mS=R.forwardRef(RL);function OL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const Jm=R.forwardRef(OL);function IL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const lm=R.forwardRef(IL);function ML({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const DL=R.forwardRef(ML);function LL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const kL=R.forwardRef(LL);function jL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const io=R.forwardRef(jL);function pS(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(n=pS(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Vu(){for(var t,e,n=0,r="",l=arguments.length;n<l;n++)(t=arguments[n])&&(e=pS(t))&&(r&&(r+=" "),r+=e);return r}var BL=Object.defineProperty,PL=(t,e,n)=>e in t?BL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hg=(t,e,n)=>(PL(t,typeof e!="symbol"?e+"":e,n),n);let UL=class{constructor(){hg(this,"current",this.detect()),hg(this,"handoffState","pending"),hg(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},tl=new UL;function zh(t){var e,n;return tl.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(n=(e=t.current)==null?void 0:e.ownerDocument)!=null?n:document:null:document}function $h(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function sa(){let t=[],e={addEventListener(n,r,l,u){return n.addEventListener(r,l,u),e.add(()=>n.removeEventListener(r,l,u))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return $h(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,l){let u=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:l}),this.add(()=>{Object.assign(n.style,{[r]:u})})},group(n){let r=sa();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let l of t.splice(r,1))l()}},dispose(){for(let n of t.splice(0))n()}};return e}function ep(){let[t]=R.useState(sa);return R.useEffect(()=>()=>t.dispose(),[t]),t}let _i=(t,e)=>{tl.isServer?R.useEffect(t,e):R.useLayoutEffect(t,e)};function cl(t){let e=R.useRef(t);return _i(()=>{e.current=t},[t]),e}let on=function(t){let e=cl(t);return lt.useCallback((...n)=>e.current(...n),[e])},FL=R.createContext(void 0);function VL(){return R.useContext(FL)}function cm(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function ta(t,e,...n){if(t in e){let l=e[t];return typeof l=="function"?l(...n):l}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(l=>`"${l}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ta),r}var Nh=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Nh||{}),eo=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(eo||{});function Ns(){let t=zL();return R.useCallback(e=>HL({mergeRefs:t,...e}),[t])}function HL({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:l,visible:u=!0,name:g,mergeRefs:y}){y=y??$L;let b=xS(e,t);if(u)return ih(b,n,r,g,y);let x=l??0;if(x&2){let{static:S=!1,...A}=b;if(S)return ih(A,n,r,g,y)}if(x&1){let{unmount:S=!0,...A}=b;return ta(S?0:1,{0(){return null},1(){return ih({...A,hidden:!0,style:{display:"none"}},n,r,g,y)}})}return ih(b,n,r,g,y)}function ih(t,e={},n,r,l){let{as:u=n,children:g,refName:y="ref",...b}=gg(t,["unmount","static"]),x=t.ref!==void 0?{[y]:t.ref}:{},S=typeof g=="function"?g(e):g;"className"in b&&b.className&&typeof b.className=="function"&&(b.className=b.className(e)),b["aria-labelledby"]&&b["aria-labelledby"]===b.id&&(b["aria-labelledby"]=void 0);let A={};if(e){let N=!1,I=[];for(let[M,j]of Object.entries(e))typeof j=="boolean"&&(N=!0),j===!0&&I.push(M.replace(/([A-Z])/g,U=>`-${U.toLowerCase()}`));if(N){A["data-headlessui-state"]=I.join(" ");for(let M of I)A[`data-${M}`]=""}}if(u===R.Fragment&&(Object.keys(Po(b)).length>0||Object.keys(Po(A)).length>0))if(!R.isValidElement(S)||Array.isArray(S)&&S.length>1){if(Object.keys(Po(b)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Po(b)).concat(Object.keys(Po(A))).map(N=>`  - ${N}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(N=>`  - ${N}`).join(`
`)].join(`
`))}else{let N=S.props,I=N==null?void 0:N.className,M=typeof I=="function"?(...z)=>cm(I(...z),b.className):cm(I,b.className),j=M?{className:M}:{},U=xS(S.props,Po(gg(b,["ref"])));for(let z in A)z in U&&delete A[z];return R.cloneElement(S,Object.assign({},U,A,x,{ref:l(GL(S),x.ref)},j))}return R.createElement(u,Object.assign({},gg(b,["ref"]),u!==R.Fragment&&x,u!==R.Fragment&&A),S)}function zL(){let t=R.useRef([]),e=R.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function $L(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function xS(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let l in r)l.startsWith("on")&&typeof r[l]=="function"?(n[l]!=null||(n[l]=[]),n[l].push(r[l])):e[l]=r[l];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[l=>{var u;return(u=l==null?void 0:l.preventDefault)==null?void 0:u.call(l)}]);for(let r in n)Object.assign(e,{[r](l,...u){let g=n[r];for(let y of g){if((l instanceof Event||(l==null?void 0:l.nativeEvent)instanceof Event)&&l.defaultPrevented)return;y(l,...u)}}});return e}function Xi(t){var e;return Object.assign(R.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function Po(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function gg(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function GL(t){return lt.version.split(".")[0]>="19"?t.props.ref:t.ref}let qL="span";var Rh=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Rh||{});function YL(t,e){var n;let{features:r=1,...l}=t,u={ref:e,"aria-hidden":(r&2)===2?!0:(n=l["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Ns()({ourProps:u,theirProps:l,slot:{},defaultTag:qL,name:"Hidden"})}let um=Xi(YL);function yS(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function so(t){return yS(t)&&"tagName"in t}function al(t){return so(t)&&"accessKey"in t}function to(t){return so(t)&&"tabIndex"in t}function XL(t){return so(t)&&"style"in t}function WL(t){return al(t)&&t.nodeName==="IFRAME"}function KL(t){return al(t)&&t.nodeName==="INPUT"}let bS=Symbol();function ZL(t,e=!0){return Object.assign(t,{[bS]:e})}function Sr(...t){let e=R.useRef(t);R.useEffect(()=>{e.current=t},[t]);let n=on(r=>{for(let l of e.current)l!=null&&(typeof l=="function"?l(r):l.current=r)});return t.every(r=>r==null||(r==null?void 0:r[bS]))?void 0:n}let tp=R.createContext(null);tp.displayName="DescriptionContext";function wS(){let t=R.useContext(tp);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,wS),e}return t}function QL(){let[t,e]=R.useState([]);return[t.length>0?t.join(" "):void 0,R.useMemo(()=>function(n){let r=on(u=>(e(g=>[...g,u]),()=>e(g=>{let y=g.slice(),b=y.indexOf(u);return b!==-1&&y.splice(b,1),y}))),l=R.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return lt.createElement(tp.Provider,{value:l},n.children)},[e])]}let JL="p";function ek(t,e){let n=R.useId(),r=VL(),{id:l=`headlessui-description-${n}`,...u}=t,g=wS(),y=Sr(e);_i(()=>g.register(l),[l,g.register]);let b=r||!1,x=R.useMemo(()=>({...g.slot,disabled:b}),[g.slot,b]),S={ref:y,...g.props,id:l};return Ns()({ourProps:S,theirProps:u,slot:x,defaultTag:JL,name:g.name||"Description"})}let tk=Xi(ek),nk=Object.assign(tk,{});var vS=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(vS||{});let ik=R.createContext(()=>{});function sk({value:t,children:e}){return lt.createElement(ik.Provider,{value:t},e)}let SS=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};var rk=Object.defineProperty,ak=(t,e,n)=>e in t?rk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ok=(t,e,n)=>(ak(t,e+"",n),n),ES=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},bs=(t,e,n)=>(ES(t,e,"read from private field"),n?n.call(t):e.get(t)),mg=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},iw=(t,e,n,r)=>(ES(t,e,"write to private field"),e.set(t,n),n),fr,Hu,zu;let lk=class{constructor(e){mg(this,fr,{}),mg(this,Hu,new SS(()=>new Set)),mg(this,zu,new Set),ok(this,"disposables",sa()),iw(this,fr,e)}dispose(){this.disposables.dispose()}get state(){return bs(this,fr)}subscribe(e,n){let r={selector:e,callback:n,current:e(bs(this,fr))};return bs(this,zu).add(r),this.disposables.add(()=>{bs(this,zu).delete(r)})}on(e,n){return bs(this,Hu).get(e).add(n),this.disposables.add(()=>{bs(this,Hu).get(e).delete(n)})}send(e){let n=this.reduce(bs(this,fr),e);if(n!==bs(this,fr)){iw(this,fr,n);for(let r of bs(this,zu)){let l=r.selector(bs(this,fr));CS(r.current,l)||(r.current=l,r.callback(l))}for(let r of bs(this,Hu).get(e.type))r(bs(this,fr),e)}}};fr=new WeakMap,Hu=new WeakMap,zu=new WeakMap;function CS(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:pg(t[Symbol.iterator](),e[Symbol.iterator]()):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?t.size!==e.size?!1:pg(t.entries(),e.entries()):sw(t)&&sw(e)?pg(Object.entries(t)[Symbol.iterator](),Object.entries(e)[Symbol.iterator]()):!1}function pg(t,e){do{let n=t.next(),r=e.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function sw(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||Object.getPrototypeOf(e)===null}var ck=Object.defineProperty,uk=(t,e,n)=>e in t?ck(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rw=(t,e,n)=>(uk(t,typeof e!="symbol"?e+"":e,n),n),dk=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(dk||{});let fk={0(t,e){let n=e.id,r=t.stack,l=t.stack.indexOf(n);if(l!==-1){let u=t.stack.slice();return u.splice(l,1),u.push(n),r=u,{...t,stack:r}}return{...t,stack:[...t.stack,n]}},1(t,e){let n=e.id,r=t.stack.indexOf(n);if(r===-1)return t;let l=t.stack.slice();return l.splice(r,1),{...t,stack:l}}},hk=class AS extends lk{constructor(){super(...arguments),rw(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),rw(this,"selectors",{isTop:(e,n)=>e.stack[e.stack.length-1]===n,inStack:(e,n)=>e.stack.includes(n)})}static new(){return new AS({stack:[]})}reduce(e,n){return ta(n.type,fk,e,n)}};const TS=new SS(()=>hk.new());var xg={exports:{}},yg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw;function gk(){if(aw)return yg;aw=1;var t=Uh();function e(b,x){return b===x&&(b!==0||1/b===1/x)||b!==b&&x!==x}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,l=t.useRef,u=t.useEffect,g=t.useMemo,y=t.useDebugValue;return yg.useSyncExternalStoreWithSelector=function(b,x,S,A,N){var I=l(null);if(I.current===null){var M={hasValue:!1,value:null};I.current=M}else M=I.current;I=g(function(){function U(H){if(!z){if(z=!0,q=H,H=A(H),N!==void 0&&M.hasValue){var J=M.value;if(N(J,H))return B=J}return B=H}if(J=B,n(q,H))return J;var X=A(H);return N!==void 0&&N(J,X)?(q=H,J):(q=H,B=X)}var z=!1,q,B,V=S===void 0?null:S;return[function(){return U(x())},V===null?void 0:function(){return U(V())}]},[x,S,A,N]);var j=r(b,I[0],I[1]);return u(function(){M.hasValue=!0,M.value=j},[j]),y(j),j},yg}var ow;function mk(){return ow||(ow=1,xg.exports=gk()),xg.exports}var pk=mk();function _S(t,e,n=CS){return pk.useSyncExternalStoreWithSelector(on(r=>t.subscribe(xk,r)),on(()=>t.state),on(()=>t.state),on(e),n)}function xk(t){return t}function Nd(t,e){let n=R.useId(),r=TS.get(e),[l,u]=_S(r,R.useCallback(g=>[r.selectors.isTop(g,n),r.selectors.inStack(g,n)],[r,n]));return _i(()=>{if(t)return r.actions.push(n),()=>r.actions.pop(n)},[r,t,n]),t?u?l:!0:!1}let dm=new Map,ed=new Map;function lw(t){var e;let n=(e=ed.get(t))!=null?e:0;return ed.set(t,n+1),n!==0?()=>cw(t):(dm.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>cw(t))}function cw(t){var e;let n=(e=ed.get(t))!=null?e:1;if(n===1?ed.delete(t):ed.set(t,n-1),n!==1)return;let r=dm.get(t);r&&(r["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",r["aria-hidden"]),t.inert=r.inert,dm.delete(t))}function yk(t,{allowed:e,disallowed:n}={}){let r=Nd(t,"inert-others");_i(()=>{var l,u;if(!r)return;let g=sa();for(let b of(l=n==null?void 0:n())!=null?l:[])b&&g.add(lw(b));let y=(u=e==null?void 0:e())!=null?u:[];for(let b of y){if(!b)continue;let x=zh(b);if(!x)continue;let S=b.parentElement;for(;S&&S!==x.body;){for(let A of S.children)y.some(N=>A.contains(N))||g.add(lw(A));S=S.parentElement}}return g.dispose},[r,e,n])}function bk(t,e,n){let r=cl(l=>{let u=l.getBoundingClientRect();u.x===0&&u.y===0&&u.width===0&&u.height===0&&n()});R.useEffect(()=>{if(!t)return;let l=e===null?null:al(e)?e:e.current;if(!l)return;let u=sa();if(typeof ResizeObserver<"u"){let g=new ResizeObserver(()=>r.current(l));g.observe(l),u.add(()=>g.disconnect())}if(typeof IntersectionObserver<"u"){let g=new IntersectionObserver(()=>r.current(l));g.observe(l),u.add(()=>g.disconnect())}return()=>u.dispose()},[e,r,t])}let Oh=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),wk=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Wr=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(Wr||{}),fm=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(fm||{}),vk=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(vk||{});function Sk(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Oh)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function Ek(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(wk)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var NS=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(NS||{});function Ck(t,e=0){var n;return t===((n=zh(t))==null?void 0:n.body)?!1:ta(e,{0(){return t.matches(Oh)},1(){let r=t;for(;r!==null;){if(r.matches(Oh))return!0;r=r.parentElement}return!1}})}var Ak=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(Ak||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Qr(t){t==null||t.focus({preventScroll:!0})}let Tk=["textarea","input"].join(",");function _k(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,Tk))!=null?n:!1}function Nk(t,e=n=>n){return t.slice().sort((n,r)=>{let l=e(n),u=e(r);if(l===null||u===null)return 0;let g=l.compareDocumentPosition(u);return g&Node.DOCUMENT_POSITION_FOLLOWING?-1:g&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function td(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:l=[]}={}){let u=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,g=Array.isArray(t)?n?Nk(t):t:e&64?Ek(t):Sk(t);l.length>0&&g.length>1&&(g=g.filter(I=>!l.some(M=>M!=null&&"current"in M?(M==null?void 0:M.current)===I:M===I))),r=r??u.activeElement;let y=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),b=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,g.indexOf(r))-1;if(e&4)return Math.max(0,g.indexOf(r))+1;if(e&8)return g.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),x=e&32?{preventScroll:!0}:{},S=0,A=g.length,N;do{if(S>=A||S+A<=0)return 0;let I=b+S;if(e&16)I=(I+A)%A;else{if(I<0)return 3;if(I>=A)return 1}N=g[I],N==null||N.focus(x),S+=y}while(N!==u.activeElement);return e&6&&_k(N)&&N.select(),2}function RS(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Rk(){return/Android/gi.test(window.navigator.userAgent)}function uw(){return RS()||Rk()}function sh(t,e,n,r){let l=cl(n);R.useEffect(()=>{if(!t)return;function u(g){l.current(g)}return document.addEventListener(e,u,r),()=>document.removeEventListener(e,u,r)},[t,e,r])}function OS(t,e,n,r){let l=cl(n);R.useEffect(()=>{if(!t)return;function u(g){l.current(g)}return window.addEventListener(e,u,r),()=>window.removeEventListener(e,u,r)},[t,e,r])}const dw=30;function Ok(t,e,n){let r=cl(n),l=R.useCallback(function(y,b){if(y.defaultPrevented)return;let x=b(y);if(x===null||!x.getRootNode().contains(x)||!x.isConnected)return;let S=function A(N){return typeof N=="function"?A(N()):Array.isArray(N)||N instanceof Set?N:[N]}(e);for(let A of S)if(A!==null&&(A.contains(x)||y.composed&&y.composedPath().includes(A)))return;return!Ck(x,NS.Loose)&&x.tabIndex!==-1&&y.preventDefault(),r.current(y,x)},[r,e]),u=R.useRef(null);sh(t,"pointerdown",y=>{var b,x;uw()||(u.current=((x=(b=y.composedPath)==null?void 0:b.call(y))==null?void 0:x[0])||y.target)},!0),sh(t,"pointerup",y=>{if(uw()||!u.current)return;let b=u.current;return u.current=null,l(y,()=>b)},!0);let g=R.useRef({x:0,y:0});sh(t,"touchstart",y=>{g.current.x=y.touches[0].clientX,g.current.y=y.touches[0].clientY},!0),sh(t,"touchend",y=>{let b={x:y.changedTouches[0].clientX,y:y.changedTouches[0].clientY};if(!(Math.abs(b.x-g.current.x)>=dw||Math.abs(b.y-g.current.y)>=dw))return l(y,()=>to(y.target)?y.target:null)},!0),OS(t,"blur",y=>l(y,()=>WL(window.document.activeElement)?window.document.activeElement:null),!0)}function Gh(...t){return R.useMemo(()=>zh(...t),[...t])}function IS(t,e,n,r){let l=cl(n);R.useEffect(()=>{t=t??window;function u(g){l.current(g)}return t.addEventListener(e,u,r),()=>t.removeEventListener(e,u,r)},[t,e,r])}function Ik(t){return R.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function Mk(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(l){return r.add(l),()=>r.delete(l)},dispatch(l,...u){let g=e[l].call(n,...u);g&&(n=g,r.forEach(y=>y()))}}}function Dk(){let t;return{before({doc:e}){var n;let r=e.documentElement,l=(n=e.defaultView)!=null?n:window;t=Math.max(0,l.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,l=Math.max(0,r.clientWidth-r.offsetWidth),u=Math.max(0,t-l);n.style(r,"paddingRight",`${u}px`)}}}function Lk(){return RS()?{before({doc:t,d:e,meta:n}){function r(l){return n.containers.flatMap(u=>u()).some(u=>u.contains(l))}e.microTask(()=>{var l;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let y=sa();y.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>y.dispose()))}let u=(l=window.scrollY)!=null?l:window.pageYOffset,g=null;e.addEventListener(t,"click",y=>{if(to(y.target))try{let b=y.target.closest("a");if(!b)return;let{hash:x}=new URL(b.href),S=t.querySelector(x);to(S)&&!r(S)&&(g=S)}catch{}},!0),e.addEventListener(t,"touchstart",y=>{if(to(y.target)&&XL(y.target))if(r(y.target)){let b=y.target;for(;b.parentElement&&r(b.parentElement);)b=b.parentElement;e.style(b,"overscrollBehavior","contain")}else e.style(y.target,"touchAction","none")}),e.addEventListener(t,"touchmove",y=>{if(to(y.target)){if(KL(y.target))return;if(r(y.target)){let b=y.target;for(;b.parentElement&&b.dataset.headlessuiPortal!==""&&!(b.scrollHeight>b.clientHeight||b.scrollWidth>b.clientWidth);)b=b.parentElement;b.dataset.headlessuiPortal===""&&y.preventDefault()}else y.preventDefault()}},{passive:!1}),e.add(()=>{var y;let b=(y=window.scrollY)!=null?y:window.pageYOffset;u!==b&&window.scrollTo(0,u),g&&g.isConnected&&(g.scrollIntoView({block:"nearest"}),g=null)})})}}:{}}function kk(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function jk(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let Ho=Mk(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:sa(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:jk(n)},l=[Lk(),Dk(),kk()];l.forEach(({before:u})=>u==null?void 0:u(r)),l.forEach(({after:u})=>u==null?void 0:u(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Ho.subscribe(()=>{let t=Ho.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",l=n.count!==0;(l&&!r||!l&&r)&&Ho.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Ho.dispatch("TEARDOWN",n)}});function Bk(t,e,n=()=>({containers:[]})){let r=Ik(Ho),l=e?r.get(e):void 0,u=l?l.count>0:!1;return _i(()=>{if(!(!e||!t))return Ho.dispatch("PUSH",e,n),()=>Ho.dispatch("POP",e,n)},[t,e]),u}function Pk(t,e,n=()=>[document.body]){let r=Nd(t,"scroll-lock");Bk(r,e,l=>{var u;return{containers:[...(u=l.containers)!=null?u:[],n]}})}function Uk(t=0){let[e,n]=R.useState(t),r=R.useCallback(b=>n(b),[e]),l=R.useCallback(b=>n(x=>x|b),[e]),u=R.useCallback(b=>(e&b)===b,[e]),g=R.useCallback(b=>n(x=>x&~b),[n]),y=R.useCallback(b=>n(x=>x^b),[n]);return{flags:e,setFlag:r,addFlag:l,hasFlag:u,removeFlag:g,toggleFlag:y}}var Fk={},fw,hw;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((fw=process==null?void 0:Fk)==null?void 0:fw.NODE_ENV)==="test"&&typeof((hw=Element==null?void 0:Element.prototype)==null?void 0:hw.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Vk=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(Vk||{});function Hk(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function zk(t,e,n,r){let[l,u]=R.useState(n),{hasFlag:g,addFlag:y,removeFlag:b}=Uk(t&&l?3:0),x=R.useRef(!1),S=R.useRef(!1),A=ep();return _i(()=>{var N;if(t){if(n&&u(!0),!e){n&&y(3);return}return(N=r==null?void 0:r.start)==null||N.call(r,n),$k(e,{inFlight:x,prepare(){S.current?S.current=!1:S.current=x.current,x.current=!0,!S.current&&(n?(y(3),b(4)):(y(4),b(2)))},run(){S.current?n?(b(3),y(4)):(b(4),y(3)):n?b(1):y(1)},done(){var I;S.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(x.current=!1,b(7),n||u(!1),(I=r==null?void 0:r.end)==null||I.call(r,n))}})}},[t,n,e,A]),t?[l,{closed:g(1),enter:g(2),leave:g(4),transition:g(2)||g(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function $k(t,{prepare:e,run:n,done:r,inFlight:l}){let u=sa();return qk(t,{prepare:e,inFlight:l}),u.nextFrame(()=>{n(),u.requestAnimationFrame(()=>{u.add(Gk(t,r))})}),u.dispose}function Gk(t,e){var n,r;let l=sa();if(!t)return l.dispose;let u=!1;l.add(()=>{u=!0});let g=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(y=>y instanceof CSSTransition))!=null?r:[];return g.length===0?(e(),l.dispose):(Promise.allSettled(g.map(y=>y.finished)).then(()=>{u||e()}),l.dispose)}function qk(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function np(t,e){let n=R.useRef([]),r=on(t);R.useEffect(()=>{let l=[...n.current];for(let[u,g]of e.entries())if(n.current[u]!==g){let y=r(e,l);return n.current=e,y}},[r,...e])}let qh=R.createContext(null);qh.displayName="OpenClosedContext";var $s=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))($s||{});function Yh(){return R.useContext(qh)}function Yk({value:t,children:e}){return lt.createElement(qh.Provider,{value:t},e)}function Xk({children:t}){return lt.createElement(qh.Provider,{value:null},t)}function Wk(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let za=[];Wk(()=>{function t(e){if(!to(e.target)||e.target===document.body||za[0]===e.target)return;let n=e.target;n=n.closest(Oh),za.unshift(n??e.target),za=za.filter(r=>r!=null&&r.isConnected),za.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function MS(t){let e=on(t),n=R.useRef(!1);R.useEffect(()=>(n.current=!1,()=>{n.current=!0,$h(()=>{n.current&&e()})}),[e])}function Kk(){let t=typeof document>"u";return"useSyncExternalStore"in tb?(e=>e.useSyncExternalStore)(tb)(()=>()=>{},()=>!1,()=>!t):!1}function Rd(){let t=Kk(),[e,n]=R.useState(tl.isHandoffComplete);return e&&tl.isHandoffComplete===!1&&n(!1),R.useEffect(()=>{e!==!0&&n(!0)},[e]),R.useEffect(()=>tl.handoff(),[]),t?!1:e}let DS=R.createContext(!1);function Zk(){return R.useContext(DS)}function gw(t){return lt.createElement(DS.Provider,{value:t.force},t.children)}function Qk(t){let e=Zk(),n=R.useContext(kS),[r,l]=R.useState(()=>{var u;if(!e&&n!==null)return(u=n.current)!=null?u:null;if(tl.isServer)return null;let g=t==null?void 0:t.getElementById("headlessui-portal-root");if(g)return g;if(t===null)return null;let y=t.createElement("div");return y.setAttribute("id","headlessui-portal-root"),t.body.appendChild(y)});return R.useEffect(()=>{r!==null&&(t!=null&&t.body.contains(r)||t==null||t.body.appendChild(r))},[r,t]),R.useEffect(()=>{e||n!==null&&l(n.current)},[n,l,e]),r}let LS=R.Fragment,Jk=Xi(function(t,e){let{ownerDocument:n=null,...r}=t,l=R.useRef(null),u=Sr(ZL(I=>{l.current=I}),e),g=Gh(l),y=n??g,b=Qk(y),[x]=R.useState(()=>{var I;return tl.isServer?null:(I=y==null?void 0:y.createElement("div"))!=null?I:null}),S=R.useContext(hm),A=Rd();_i(()=>{!b||!x||b.contains(x)||(x.setAttribute("data-headlessui-portal",""),b.appendChild(x))},[b,x]),_i(()=>{if(x&&S)return S.register(x)},[S,x]),MS(()=>{var I;!b||!x||(yS(x)&&b.contains(x)&&b.removeChild(x),b.childNodes.length<=0&&((I=b.parentElement)==null||I.removeChild(b)))});let N=Ns();return A?!b||!x?null:GI.createPortal(N({ourProps:{ref:u},theirProps:r,slot:{},defaultTag:LS,name:"Portal"}),x):null});function ej(t,e){let n=Sr(e),{enabled:r=!0,ownerDocument:l,...u}=t,g=Ns();return r?lt.createElement(Jk,{...u,ownerDocument:l,ref:n}):g({ourProps:{ref:n},theirProps:u,slot:{},defaultTag:LS,name:"Portal"})}let tj=R.Fragment,kS=R.createContext(null);function nj(t,e){let{target:n,...r}=t,l={ref:Sr(e)},u=Ns();return lt.createElement(kS.Provider,{value:n},u({ourProps:l,theirProps:r,defaultTag:tj,name:"Popover.Group"}))}let hm=R.createContext(null);function ij(){let t=R.useContext(hm),e=R.useRef([]),n=on(u=>(e.current.push(u),t&&t.register(u),()=>r(u))),r=on(u=>{let g=e.current.indexOf(u);g!==-1&&e.current.splice(g,1),t&&t.unregister(u)}),l=R.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,R.useMemo(()=>function({children:u}){return lt.createElement(hm.Provider,{value:l},u)},[l])]}let sj=Xi(ej),jS=Xi(nj),rj=Object.assign(sj,{Group:jS});function aj(t,e=typeof document<"u"?document.defaultView:null,n){let r=Nd(t,"escape");IS(e,"keydown",l=>{r&&(l.defaultPrevented||l.key===vS.Escape&&n(l))})}function oj(){var t;let[e]=R.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=R.useState((t=e==null?void 0:e.matches)!=null?t:!1);return _i(()=>{if(!e)return;function l(u){r(u.matches)}return e.addEventListener("change",l),()=>e.removeEventListener("change",l)},[e]),n}function lj({defaultContainers:t=[],portals:e,mainTreeNode:n}={}){let r=Gh(n),l=on(()=>{var u,g;let y=[];for(let b of t)b!==null&&(so(b)?y.push(b):"current"in b&&so(b.current)&&y.push(b.current));if(e!=null&&e.current)for(let b of e.current)y.push(b);for(let b of(u=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?u:[])b!==document.body&&b!==document.head&&so(b)&&b.id!=="headlessui-portal-root"&&(n&&(b.contains(n)||b.contains((g=n==null?void 0:n.getRootNode())==null?void 0:g.host))||y.some(x=>b.contains(x))||y.push(b));return y});return{resolveContainers:l,contains:on(u=>l().some(g=>g.contains(u)))}}let BS=R.createContext(null);function mw({children:t,node:e}){let[n,r]=R.useState(null),l=PS(e??n);return lt.createElement(BS.Provider,{value:l},t,l===null&&lt.createElement(um,{features:Rh.Hidden,ref:u=>{var g,y;if(u){for(let b of(y=(g=zh(u))==null?void 0:g.querySelectorAll("html > *, body > *"))!=null?y:[])if(b!==document.body&&b!==document.head&&so(b)&&b!=null&&b.contains(u)){r(b);break}}}}))}function PS(t=null){var e;return(e=R.useContext(BS))!=null?e:t}function ip(){let t=R.useRef(!1);return _i(()=>(t.current=!0,()=>{t.current=!1}),[]),t}var $u=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))($u||{});function cj(){let t=R.useRef(0);return OS(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function US(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)so(n.current)&&e.add(n.current);return e}let uj="div";var Vo=(t=>(t[t.None=0]="None",t[t.InitialFocus=1]="InitialFocus",t[t.TabLock=2]="TabLock",t[t.FocusLock=4]="FocusLock",t[t.RestoreFocus=8]="RestoreFocus",t[t.AutoFocus=16]="AutoFocus",t))(Vo||{});function dj(t,e){let n=R.useRef(null),r=Sr(n,e),{initialFocus:l,initialFocusFallback:u,containers:g,features:y=15,...b}=t;Rd()||(y=0);let x=Gh(n);mj(y,{ownerDocument:x});let S=pj(y,{ownerDocument:x,container:n,initialFocus:l,initialFocusFallback:u});xj(y,{ownerDocument:x,container:n,containers:g,previousActiveElement:S});let A=cj(),N=on(q=>{if(!al(n.current))return;let B=n.current;(V=>V())(()=>{ta(A.current,{[$u.Forwards]:()=>{td(B,Wr.First,{skipElements:[q.relatedTarget,u]})},[$u.Backwards]:()=>{td(B,Wr.Last,{skipElements:[q.relatedTarget,u]})}})})}),I=Nd(!!(y&2),"focus-trap#tab-lock"),M=ep(),j=R.useRef(!1),U={ref:r,onKeyDown(q){q.key=="Tab"&&(j.current=!0,M.requestAnimationFrame(()=>{j.current=!1}))},onBlur(q){if(!(y&4))return;let B=US(g);al(n.current)&&B.add(n.current);let V=q.relatedTarget;to(V)&&V.dataset.headlessuiFocusGuard!=="true"&&(FS(B,V)||(j.current?td(n.current,ta(A.current,{[$u.Forwards]:()=>Wr.Next,[$u.Backwards]:()=>Wr.Previous})|Wr.WrapAround,{relativeTo:q.target}):to(q.target)&&Qr(q.target)))}},z=Ns();return lt.createElement(lt.Fragment,null,I&&lt.createElement(um,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:N,features:Rh.Focusable}),z({ourProps:U,theirProps:b,defaultTag:uj,name:"FocusTrap"}),I&&lt.createElement(um,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:N,features:Rh.Focusable}))}let fj=Xi(dj),hj=Object.assign(fj,{features:Vo});function gj(t=!0){let e=R.useRef(za.slice());return np(([n],[r])=>{r===!0&&n===!1&&$h(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=za.slice())},[t,za,e]),on(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function mj(t,{ownerDocument:e}){let n=!!(t&8),r=gj(n);np(()=>{n||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&Qr(r())},[n]),MS(()=>{n&&Qr(r())})}function pj(t,{ownerDocument:e,container:n,initialFocus:r,initialFocusFallback:l}){let u=R.useRef(null),g=Nd(!!(t&1),"focus-trap#initial-focus"),y=ip();return np(()=>{if(t===0)return;if(!g){l!=null&&l.current&&Qr(l.current);return}let b=n.current;b&&$h(()=>{if(!y.current)return;let x=e==null?void 0:e.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===x){u.current=x;return}}else if(b.contains(x)){u.current=x;return}if(r!=null&&r.current)Qr(r.current);else{if(t&16){if(td(b,Wr.First|Wr.AutoFocus)!==fm.Error)return}else if(td(b,Wr.First)!==fm.Error)return;if(l!=null&&l.current&&(Qr(l.current),(e==null?void 0:e.activeElement)===l.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}u.current=e==null?void 0:e.activeElement})},[l,g,t]),u}function xj(t,{ownerDocument:e,container:n,containers:r,previousActiveElement:l}){let u=ip(),g=!!(t&4);IS(e==null?void 0:e.defaultView,"focus",y=>{if(!g||!u.current)return;let b=US(r);al(n.current)&&b.add(n.current);let x=l.current;if(!x)return;let S=y.target;al(S)?FS(b,S)?(l.current=S,Qr(S)):(y.preventDefault(),y.stopPropagation(),Qr(x)):Qr(l.current)},!0)}function FS(t,e){for(let n of t)if(n.contains(e))return!0;return!1}function VS(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:zS)!==R.Fragment||lt.Children.count(t.children)===1}let Xh=R.createContext(null);Xh.displayName="TransitionContext";var yj=(t=>(t.Visible="visible",t.Hidden="hidden",t))(yj||{});function bj(){let t=R.useContext(Xh);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function wj(){let t=R.useContext(Wh);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let Wh=R.createContext(null);Wh.displayName="NestingContext";function Kh(t){return"children"in t?Kh(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function HS(t,e){let n=cl(t),r=R.useRef([]),l=ip(),u=ep(),g=on((I,M=eo.Hidden)=>{let j=r.current.findIndex(({el:U})=>U===I);j!==-1&&(ta(M,{[eo.Unmount](){r.current.splice(j,1)},[eo.Hidden](){r.current[j].state="hidden"}}),u.microTask(()=>{var U;!Kh(r)&&l.current&&((U=n.current)==null||U.call(n))}))}),y=on(I=>{let M=r.current.find(({el:j})=>j===I);return M?M.state!=="visible"&&(M.state="visible"):r.current.push({el:I,state:"visible"}),()=>g(I,eo.Unmount)}),b=R.useRef([]),x=R.useRef(Promise.resolve()),S=R.useRef({enter:[],leave:[]}),A=on((I,M,j)=>{b.current.splice(0),e&&(e.chains.current[M]=e.chains.current[M].filter(([U])=>U!==I)),e==null||e.chains.current[M].push([I,new Promise(U=>{b.current.push(U)})]),e==null||e.chains.current[M].push([I,new Promise(U=>{Promise.all(S.current[M].map(([z,q])=>q)).then(()=>U())})]),M==="enter"?x.current=x.current.then(()=>e==null?void 0:e.wait.current).then(()=>j(M)):j(M)}),N=on((I,M,j)=>{Promise.all(S.current[M].splice(0).map(([U,z])=>z)).then(()=>{var U;(U=b.current.shift())==null||U()}).then(()=>j(M))});return R.useMemo(()=>({children:r,register:y,unregister:g,onStart:A,onStop:N,wait:x,chains:S}),[y,g,r,A,N,S,x])}let zS=R.Fragment,$S=Nh.RenderStrategy;function vj(t,e){var n,r;let{transition:l=!0,beforeEnter:u,afterEnter:g,beforeLeave:y,afterLeave:b,enter:x,enterFrom:S,enterTo:A,entered:N,leave:I,leaveFrom:M,leaveTo:j,...U}=t,[z,q]=R.useState(null),B=R.useRef(null),V=VS(t),H=Sr(...V?[B,e,q]:e===null?[]:[e]),J=(n=U.unmount)==null||n?eo.Unmount:eo.Hidden,{show:X,appear:oe,initial:Y}=bj(),[be,Ae]=R.useState(X?"visible":"hidden"),Ee=wj(),{register:de,unregister:Oe}=Ee;_i(()=>de(B),[de,B]),_i(()=>{if(J===eo.Hidden&&B.current){if(X&&be!=="visible"){Ae("visible");return}return ta(be,{hidden:()=>Oe(B),visible:()=>de(B)})}},[be,B,de,Oe,X,J]);let re=Rd();_i(()=>{if(V&&re&&be==="visible"&&B.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[B,be,re,V]);let ie=Y&&!oe,le=oe&&X&&Y,De=R.useRef(!1),$e=HS(()=>{De.current||(Ae("hidden"),Oe(B))},Ee),W=on(ht=>{De.current=!0;let ve=ht?"enter":"leave";$e.onStart(B,ve,He=>{He==="enter"?u==null||u():He==="leave"&&(y==null||y())})}),Z=on(ht=>{let ve=ht?"enter":"leave";De.current=!1,$e.onStop(B,ve,He=>{He==="enter"?g==null||g():He==="leave"&&(b==null||b())}),ve==="leave"&&!Kh($e)&&(Ae("hidden"),Oe(B))});R.useEffect(()=>{V&&l||(W(X),Z(X))},[X,V,l]);let ce=!(!l||!V||!re||ie),[,se]=zk(ce,z,X,{start:W,end:Z}),Ne=Po({ref:H,className:((r=cm(U.className,le&&x,le&&S,se.enter&&x,se.enter&&se.closed&&S,se.enter&&!se.closed&&A,se.leave&&I,se.leave&&!se.closed&&M,se.leave&&se.closed&&j,!se.transition&&X&&N))==null?void 0:r.trim())||void 0,...Hk(se)}),We=0;be==="visible"&&(We|=$s.Open),be==="hidden"&&(We|=$s.Closed),X&&be==="hidden"&&(We|=$s.Opening),!X&&be==="visible"&&(We|=$s.Closing);let Se=Ns();return lt.createElement(Wh.Provider,{value:$e},lt.createElement(Yk,{value:We},Se({ourProps:Ne,theirProps:U,defaultTag:zS,features:$S,visible:be==="visible",name:"Transition.Child"})))}function Sj(t,e){let{show:n,appear:r=!1,unmount:l=!0,...u}=t,g=R.useRef(null),y=VS(t),b=Sr(...y?[g,e]:e===null?[]:[e]);Rd();let x=Yh();if(n===void 0&&x!==null&&(n=(x&$s.Open)===$s.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[S,A]=R.useState(n?"visible":"hidden"),N=HS(()=>{n||A("hidden")}),[I,M]=R.useState(!0),j=R.useRef([n]);_i(()=>{I!==!1&&j.current[j.current.length-1]!==n&&(j.current.push(n),M(!1))},[j,n]);let U=R.useMemo(()=>({show:n,appear:r,initial:I}),[n,r,I]);_i(()=>{n?A("visible"):!Kh(N)&&g.current!==null&&A("hidden")},[n,N]);let z={unmount:l},q=on(()=>{var H;I&&M(!1),(H=t.beforeEnter)==null||H.call(t)}),B=on(()=>{var H;I&&M(!1),(H=t.beforeLeave)==null||H.call(t)}),V=Ns();return lt.createElement(Wh.Provider,{value:N},lt.createElement(Xh.Provider,{value:U},V({ourProps:{...z,as:R.Fragment,children:lt.createElement(GS,{ref:b,...z,...u,beforeEnter:q,beforeLeave:B})},theirProps:{},defaultTag:R.Fragment,features:$S,visible:S==="visible",name:"Transition"})))}function Ej(t,e){let n=R.useContext(Xh)!==null,r=Yh()!==null;return lt.createElement(lt.Fragment,null,!n&&r?lt.createElement(gm,{ref:e,...t}):lt.createElement(GS,{ref:e,...t}))}let gm=Xi(Sj),GS=Xi(vj),sp=Xi(Ej),Cj=Object.assign(gm,{Child:sp,Root:gm});var Aj=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Aj||{}),Tj=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(Tj||{});let _j={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},rp=R.createContext(null);rp.displayName="DialogContext";function Zh(t){let e=R.useContext(rp);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Zh),n}return e}function Nj(t,e){return ta(e.type,_j,t,e)}let pw=Xi(function(t,e){let n=R.useId(),{id:r=`headlessui-dialog-${n}`,open:l,onClose:u,initialFocus:g,role:y="dialog",autoFocus:b=!0,__demoMode:x=!1,unmount:S=!1,...A}=t,N=R.useRef(!1);y=function(){return y==="dialog"||y==="alertdialog"?y:(N.current||(N.current=!0,console.warn(`Invalid role [${y}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let I=Yh();l===void 0&&I!==null&&(l=(I&$s.Open)===$s.Open);let M=R.useRef(null),j=Sr(M,e),U=Gh(M),z=l?0:1,[q,B]=R.useReducer(Nj,{titleId:null,descriptionId:null,panelRef:R.createRef()}),V=on(()=>u(!1)),H=on(se=>B({type:0,id:se})),J=Rd()?z===0:!1,[X,oe]=ij(),Y={get current(){var se;return(se=q.panelRef.current)!=null?se:M.current}},be=PS(),{resolveContainers:Ae}=lj({mainTreeNode:be,portals:X,defaultContainers:[Y]}),Ee=I!==null?(I&$s.Closing)===$s.Closing:!1;yk(x||Ee?!1:J,{allowed:on(()=>{var se,Ne;return[(Ne=(se=M.current)==null?void 0:se.closest("[data-headlessui-portal]"))!=null?Ne:null]}),disallowed:on(()=>{var se;return[(se=be==null?void 0:be.closest("body > *:not(#headlessui-portal-root)"))!=null?se:null]})});let de=TS.get(null);_i(()=>{if(J)return de.actions.push(r),()=>de.actions.pop(r)},[de,r,J]);let Oe=_S(de,R.useCallback(se=>de.selectors.isTop(se,r),[de,r]));Ok(Oe,Ae,se=>{se.preventDefault(),V()}),aj(Oe,U==null?void 0:U.defaultView,se=>{se.preventDefault(),se.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),V()}),Pk(x||Ee?!1:J,U,Ae),bk(J,M,V);let[re,ie]=QL(),le=R.useMemo(()=>[{dialogState:z,close:V,setTitleId:H,unmount:S},q],[z,q,V,H,S]),De=R.useMemo(()=>({open:z===0}),[z]),$e={ref:j,id:r,role:y,tabIndex:-1,"aria-modal":x?void 0:z===0?!0:void 0,"aria-labelledby":q.titleId,"aria-describedby":re,unmount:S},W=!oj(),Z=Vo.None;J&&!x&&(Z|=Vo.RestoreFocus,Z|=Vo.TabLock,b&&(Z|=Vo.AutoFocus),W&&(Z|=Vo.InitialFocus));let ce=Ns();return lt.createElement(Xk,null,lt.createElement(gw,{force:!0},lt.createElement(rj,null,lt.createElement(rp.Provider,{value:le},lt.createElement(jS,{target:M},lt.createElement(gw,{force:!1},lt.createElement(ie,{slot:De},lt.createElement(oe,null,lt.createElement(hj,{initialFocus:g,initialFocusFallback:M,containers:Ae,features:Z},lt.createElement(sk,{value:V},ce({ourProps:$e,theirProps:A,slot:De,defaultTag:Rj,features:Oj,visible:z===0,name:"Dialog"})))))))))))}),Rj="div",Oj=Nh.RenderStrategy|Nh.Static;function Ij(t,e){let{transition:n=!1,open:r,...l}=t,u=Yh(),g=t.hasOwnProperty("open")||u!==null,y=t.hasOwnProperty("onClose");if(!g&&!y)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!g)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!y)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!u&&typeof t.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${t.open}`);if(typeof t.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${t.onClose}`);return(r!==void 0||n)&&!l.static?lt.createElement(mw,null,lt.createElement(Cj,{show:r,transition:n,unmount:l.unmount},lt.createElement(pw,{ref:e,...l}))):lt.createElement(mw,null,lt.createElement(pw,{ref:e,open:r,...l}))}let Mj="div";function Dj(t,e){let n=R.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:l=!1,...u}=t,[{dialogState:g,unmount:y},b]=Zh("Dialog.Panel"),x=Sr(e,b.panelRef),S=R.useMemo(()=>({open:g===0}),[g]),A=on(U=>{U.stopPropagation()}),N={ref:x,id:r,onClick:A},I=l?sp:R.Fragment,M=l?{unmount:y}:{},j=Ns();return lt.createElement(I,{...M},j({ourProps:N,theirProps:u,slot:S,defaultTag:Mj,name:"Dialog.Panel"}))}let Lj="div";function kj(t,e){let{transition:n=!1,...r}=t,[{dialogState:l,unmount:u}]=Zh("Dialog.Backdrop"),g=R.useMemo(()=>({open:l===0}),[l]),y={ref:e,"aria-hidden":!0},b=n?sp:R.Fragment,x=n?{unmount:u}:{},S=Ns();return lt.createElement(b,{...x},S({ourProps:y,theirProps:r,slot:g,defaultTag:Lj,name:"Dialog.Backdrop"}))}let jj="h2";function Bj(t,e){let n=R.useId(),{id:r=`headlessui-dialog-title-${n}`,...l}=t,[{dialogState:u,setTitleId:g}]=Zh("Dialog.Title"),y=Sr(e);R.useEffect(()=>(g(r),()=>g(null)),[r,g]);let b=R.useMemo(()=>({open:u===0}),[u]),x={ref:y,id:r};return Ns()({ourProps:x,theirProps:l,slot:b,defaultTag:jj,name:"Dialog.Title"})}let Pj=Xi(Ij),Uj=Xi(Dj);Xi(kj);let Fj=Xi(Bj),Es=Object.assign(Pj,{Panel:Uj,Title:Fj,Description:nk});function Vj(t,e,n){var u,g;const r=((g=(u=t==null?void 0:t.course_limits)==null?void 0:u[e])==null?void 0:g.legacy_used)||0,l=n.filter(y=>y.student_id===t.id&&y.course_id===e&&y.approved_by).length;return r+l}function Hj(t,e){var n,r;return((r=(n=t==null?void 0:t.course_limits)==null?void 0:n[e])==null?void 0:r.limit)||0}function zj(t,e,n){return Vj(t,e,n)<Hj(t,e)}function $j(t){return t.startsWith("th")?"":"Cannot check in for more hours than purchased for this course."}const li="#6654b3",xw="#f6f6f6",Gj={new_application:{labelKey:"newApplications",color:li,text:"#fff"},renewal:{labelKey:"renewals",color:"#e6e1f7",text:li},edit:{labelKey:"courseChanges",color:"#edeaf7",text:li},cancel:{labelKey:"cancellations",color:"#fce6e6",text:"#b03535"}};function qj({urls:t,open:e,onClose:n}){const{t:r}=Bn();return E.jsx(Es,{open:e,onClose:n,className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:E.jsxs(Es.Panel,{className:"bg-white rounded-2xl p-6 max-w-lg w-full relative",children:[E.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-[#6654b3]",children:E.jsx(io,{className:"w-6 h-6"})}),E.jsx("h2",{className:"text-lg font-bold mb-2",style:{color:li},children:r("receipts")}),E.jsx("div",{className:"space-y-3",children:t.map(l=>E.jsxs("div",{className:"rounded-lg border border-[#e1def5] bg-[#f6f6f6] px-3 py-2 flex items-center gap-3",children:[E.jsx("span",{className:"flex-1 truncate",style:{color:li},children:decodeURIComponent(l.split("/").slice(-1)[0])}),E.jsx("button",{className:"hover:underline text-xs font-bold",style:{color:li},onClick:()=>window.open(l,"_blank"),children:r("open")}),E.jsxs("button",{className:"hover:underline text-xs font-bold flex items-center gap-1",style:{color:li},onClick:async()=>{const g=await(await fetch(l)).blob(),y=document.createElement("a");y.href=URL.createObjectURL(g),y.download=l.split("/").slice(-1)[0],y.click()},children:[E.jsx(TL,{className:"w-4 h-4 inline"})," ",r("download")]}),E.jsxs("button",{className:"hover:underline text-xs font-bold flex items-center gap-1",style:{color:li},onClick:()=>{const u=document.createElement("iframe");u.style.position="fixed",u.style.right="0",u.style.top="0",u.style.width="0",u.style.height="0",u.src=l,document.body.appendChild(u),u.onload=()=>{var g;(g=u.contentWindow)==null||g.print(),setTimeout(()=>document.body.removeChild(u),1e3)}},children:[E.jsx(Jm,{className:"w-4 h-4 inline"})," ",r("print")]})]},l))})]})})}function Yj(t,e){return t.reduce((n,r)=>{const l=e(r);return(n[l]||(n[l]=[])).push(r),n},{})}function yw(){const{t,i18n:e}=Bn(),n=Ic(),[r,l]=R.useState(null),[u,g]=R.useState({}),[y,b]=R.useState({new_application:!1,renewal:!1,edit:!1,cancel:!1}),{data:x=[]}=ci({queryKey:["courses","names"],queryFn:async()=>{const{data:V}=await Be.from("courses").select("id,name,hour_packages");return V||[]},staleTime:5*60*1e3}),{data:S=[],isLoading:A}=ci({queryKey:["reviewHub","pending"],queryFn:async()=>{const[V,H]=await Promise.all([Be.from("applications").select("*").eq("status","pending").order("created_at",{ascending:!0}),Be.from("application_changes").select("*").eq("status","pending").order("created_at",{ascending:!0})]);return[...(V.data||[]).map(J=>({...J,group:"new_application"})),...(H.data||[]).map(J=>({...J,group:J.type}))]},staleTime:20*1e3}),N=R.useMemo(()=>Array.from(new Set((S||[]).map(V=>V.submitted_by).filter(Boolean))),[S]),{data:I={}}=ci({queryKey:["submitters",...N],queryFn:async()=>{const V={};return await Promise.all(N.map(async H=>{const{data:J}=await Be.from("profiles").select("full_name,email").eq("id",H).single();J&&(V[H]=J)})),V},enabled:N.length>0}),M=R.useMemo(()=>Object.fromEntries(x.map(V=>[V.id,V.name])),[x]),j=R.useMemo(()=>Yj(S,V=>V.group),[S]);function U(V,H){g(J=>{var X;return{...J,[V]:new Set([...Array.from(J[V]||[]),...(X=J[V])!=null&&X.has(H)?[]:[H]].filter(oe=>{var Y;return oe!==H||!((Y=J[V])!=null&&Y.has(H))}))}})}function z(V){var J;const H=new Set(((J=j[V])==null?void 0:J.map(X=>X.id))||[]);g(X=>{var oe;return{...X,[V]:((oe=X[V])==null?void 0:oe.size)===H.size?new Set:H}})}async function q(V){var oe,Y,be,Ae,Ee,de;const H=Array.from(u[V]||[]);if(!H.length)return;const J=(j[V]||[]).filter(Oe=>H.includes(Oe.id));Object.fromEntries(x.map(Oe=>[Oe.id,Oe]));for(const Oe of J){let re=Oe,ie=[];if(Oe.group==="new_application")ie=Object.keys(Oe.course_limits||{});else if(Oe.type==="renewal")ie=Object.keys(((oe=Oe.changes)==null?void 0:oe.course_limits)||{}),re={...Oe,course_limits:((Y=Oe.changes)==null?void 0:Y.course_limits)||{},purchased_packages:((be=Oe.changes)==null?void 0:be.purchased_packages)||[]};else if(Oe.type==="edit")ie=Object.keys(((Ae=Oe.changes)==null?void 0:Ae.course_changes)||{}),re={...Oe,course_limits:((Ee=Oe.changes)==null?void 0:Ee.course_limits)||{},purchased_packages:((de=Oe.changes)==null?void 0:de.purchased_packages)||[]};else continue;for(const le of ie)if(!zj(re,le,[])){alert($j(e.language));return}}if(!window.confirm(t("approveConfirm",{count:H.length})))return;let X;V==="new_application"?X=Be.from("applications").update({status:"approved"}).in("id",H):X=Be.from("application_changes").update({status:"approved",reviewed_at:new Date().toISOString()}).in("id",H),await X,n.invalidateQueries({queryKey:["reviewHub","pending"]}),g(Oe=>({...Oe,[V]:new Set}))}async function B(V){const H=Array.from(u[V]||[]);H.length&&window.confirm(t("rejectConfirm",{count:H.length}))&&(V==="new_application"?await Be.from("applications").delete().in("id",H):await Be.from("application_changes").delete().in("id",H),n.invalidateQueries({queryKey:["reviewHub","pending"]}),g(J=>({...J,[V]:new Set})))}return A?E.jsxs("div",{className:"p-10 flex items-center justify-center",style:{background:xw,minHeight:"100vh"},children:[E.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full",style:{background:li,marginRight:8}}),E.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full",style:{background:"#e6e1f7",marginRight:8}}),E.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full",style:{background:"#edeaf7"}})]}):E.jsxs("div",{className:"min-h-screen flex flex-col items-center py-8 px-2 sm:px-6 font-sans",style:{background:xw},children:[E.jsx("div",{className:"w-full max-w-5xl space-y-8",children:Object.entries(Gj).map(([V,H])=>{var J,X,oe,Y,be,Ae,Ee;return E.jsxs("div",{className:"mb-4 border rounded-2xl shadow-sm",style:{borderColor:"#e1def5",background:"#fff"},children:[E.jsx("button",{className:"w-full flex items-center justify-between px-6 py-4 text-lg font-bold focus:outline-none rounded-t-2xl transition-all",style:{background:H.color,color:H.text,borderTopLeftRadius:16,borderTopRightRadius:16},onClick:()=>b(de=>({...de,[V]:!de[V]})),children:E.jsxs("div",{className:"flex items-center gap-2",children:[y[V]?E.jsx(hS,{className:"w-6 h-6"}):E.jsx(gS,{className:"w-6 h-6"}),t(H.labelKey),E.jsx("span",{className:"ml-2 rounded-full px-3 py-1 text-base font-bold border",style:{background:"#fff",color:li,borderColor:"#e1def5"},children:((J=j[V])==null?void 0:J.length)||0})]})}),y[V]&&E.jsxs("div",{className:"px-4 pb-4 pt-2",children:[E.jsxs("div",{className:"flex flex-wrap gap-2 items-center my-3",children:[E.jsx("button",{className:"rounded-full px-3 py-1 border text-xs font-bold transition",style:{borderColor:li,color:li,background:"#f6f6f6"},onClick:()=>z(V),children:((X=u[V])==null?void 0:X.size)===(((oe=j[V])==null?void 0:oe.length)||0)?t("unselectAll"):t("selectAll")}),E.jsxs("button",{className:"px-3 py-1 rounded-full font-bold text-xs transition",style:{background:li,color:"#fff",opacity:(Y=u[V])!=null&&Y.size?1:.5},disabled:!((be=u[V])!=null&&be.size),onClick:()=>q(V),children:[E.jsx(SL,{className:"w-4 h-4 inline"})," ",t("approve")]}),E.jsxs("button",{className:"px-3 py-1 rounded-full font-bold text-xs transition",style:{background:"#ec4899",color:"#fff",opacity:(Ae=u[V])!=null&&Ae.size?1:.5},disabled:!((Ee=u[V])!=null&&Ee.size),onClick:()=>B(V),children:[E.jsx(kL,{className:"w-4 h-4 inline"})," ",t("reject")]})]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(j[V]||[]).map(de=>{var ce,se,Ne,We,Se,ht,ve,He,at,gt;const Oe=de.group==="new_application"?de.payment_receipt_urls||[]:((ce=de.changes)==null?void 0:ce.receipts)||de.receipt_urls||[],re=de.nickname||de.nick_name||de.nick||"",ie=de.first_name||de.first||"",le=de.last_name||de.last||"",De=de.submitted_by?((se=I[de.submitted_by])==null?void 0:se.full_name)||de.submitted_by:"-";let $e=[],W=[],Z=0;return de.group==="new_application"?($e=Object.entries(de.courses||{}).map(([Ve,ue])=>{var Ue;return{cid:Ve,days:ue,hours:((Ue=de.course_limits)==null?void 0:Ue[Ve])||0}}),W=de.purchased_packages||[],Z=de.total_price||0):(de.type==="edit"||de.type==="renewal"||de.type==="cancel")&&($e=[],de.type==="edit"?$e=Object.entries(((Ne=de.changes)==null?void 0:Ne.course_changes)||{}).map(([Ve,ue])=>{var Ue;return{cid:Ve,days:ue,hours:((Ue=de.changes.course_limits)==null?void 0:Ue[Ve])||0}}):de.type==="renewal"?$e=Object.entries(((We=de.changes)==null?void 0:We.course_limits)||{}).map(([Ve,ue])=>({cid:Ve,days:null,hours:ue})):de.type==="cancel"&&($e=Object.keys(((Se=de.changes)==null?void 0:Se.cancel_course_ids)||{}).map(Ve=>({cid:Ve,days:null,hours:0}))),W=((ht=de.changes)==null?void 0:ht.purchased_packages)||[],Z=((ve=de.changes)==null?void 0:ve.total_price)||0),E.jsxs("div",{className:Vu("rounded-2xl border p-4 space-y-2 flex flex-col relative transition",((He=u[V])==null?void 0:He.has(de.id))&&"ring-2"),style:{borderColor:"#edeaf7",background:"#fff",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.03)",...(at=u[V])!=null&&at.has(de.id)?{boxShadow:`0 0 0 3px ${li}40`}:{}},children:[E.jsx("label",{className:"absolute top-3 left-3",children:E.jsx("input",{type:"checkbox",checked:(gt=u[V])==null?void 0:gt.has(de.id),onChange:()=>U(V,de.id),className:"accent-[#6654b3] w-5 h-5"})}),E.jsxs("div",{className:"pl-8",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E.jsx(DL,{className:"w-8 h-8",style:{color:li}}),E.jsxs("div",{children:[E.jsxs("div",{className:"font-bold text-base",style:{color:li},children:[re?`"${re}"`:""," ",ie," ",le]}),E.jsxs("div",{className:"text-xs text-gray-500",children:[E.jsxs("span",{children:[t("submittedBy"),": "]}),E.jsx("span",{children:De})]}),E.jsxs("div",{className:"text-xs text-gray-500",children:[de.parent_phone&&E.jsxs(E.Fragment,{children:[t("phone"),": ",de.parent_phone," "]}),de.parent_line_id&&E.jsxs(E.Fragment,{children:[t("lineId"),": ",de.parent_line_id," "]}),de.dob&&E.jsxs(E.Fragment,{children:[t("dob"),": ",new Date(de.dob).toLocaleDateString("en-GB")]})]})]})]}),E.jsxs("div",{className:"text-xs text-gray-600",children:[t("submittedAt"),": ",new Date(de.created_at).toLocaleString("en-GB")]}),E.jsxs("div",{className:"my-2",children:[$e.map(Ve=>E.jsxs("div",{className:"mb-1",children:[E.jsxs("div",{className:"font-semibold",style:{color:li},children:[t("course"),": ",M[Ve.cid]||Ve.cid]}),Ve.days&&Object.entries(Ve.days).map(([ue,Ue])=>E.jsxs("div",{className:"ml-2 text-sm",children:[E.jsxs("span",{className:"font-semibold",children:[ue,":"]})," ",(Array.isArray(Ue)?Ue:[]).join(", ")]},ue)),typeof Ve.hours=="number"&&E.jsxs("div",{className:"ml-2 text-sm",children:[E.jsxs("span",{className:"font-semibold",children:[t("hours"),":"]})," ",Ve.hours]})]},Ve.cid)),W.length>0&&E.jsxs("div",{className:"mb-2",children:[E.jsx("div",{className:"font-bold text-[#6654b3] mb-1",children:t("purchasedPackages")}),E.jsx("ul",{children:W.map(Ve=>{var ue;return E.jsxs("li",{children:[M[Ve.course_id]||Ve.course_name,": ",Ve.hours," ",t("hoursLabel",{count:Ve.hours}),"  ",(ue=Ve.price)==null?void 0:ue.toLocaleString()," ",t("baht")]},Ve.course_id+Ve.hours)})}),E.jsxs("div",{className:"mt-1 font-semibold",children:[t("totalPrice"),": ",Z==null?void 0:Z.toLocaleString()," ",t("baht")]})]})]}),Oe&&Oe.length>0&&E.jsx("div",{className:"mb-2"}),Oe&&Oe.length>0&&E.jsx("button",{className:"rounded-full px-3 py-1 text-xs font-bold",style:{background:"#e6e1f7",color:li},onClick:()=>l(Oe),children:t("viewReceipts",{count:Oe.length})}),Array.isArray(Oe)&&Oe.length===0&&E.jsx("div",{className:"text-gray-300 text-xs",children:t("noReceipt")})]})]},de.id)})})]})]},V)})}),r&&E.jsx(qj,{urls:r,open:!!r,onClose:()=>l(null)}),E.jsx("style",{children:`
        @keyframes fadein { from { opacity:0; transform: scale(0.98);} to { opacity:1; transform: scale(1);} }
      `})]})}const ap=R.createContext({});function op(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const lp=typeof window<"u",qS=lp?R.useLayoutEffect:R.useEffect,Qh=R.createContext(null);function cp(t,e){t.indexOf(e)===-1&&t.push(e)}function up(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const na=(t,e,n)=>n>e?e:n<t?t:n;let dp=()=>{};const ia={},YS=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function XS(t){return typeof t=="object"&&t!==null}const WS=t=>/^0[^.\s]+$/u.test(t);function fp(t){let e;return()=>(e===void 0&&(e=t()),e)}const Cs=t=>t,Xj=(t,e)=>n=>e(t(n)),Od=(...t)=>t.reduce(Xj),fd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class hp{constructor(){this.subscriptions=[]}add(e){return cp(this.subscriptions,e),()=>up(this.subscriptions,e)}notify(e,n,r){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](e,n,r);else for(let u=0;u<l;u++){const g=this.subscriptions[u];g&&g(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const yr=t=>t*1e3,br=t=>t/1e3;function KS(t,e){return e?t*(1e3/e):0}const ZS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Wj=1e-7,Kj=12;function Zj(t,e,n,r,l){let u,g,y=0;do g=e+(n-e)/2,u=ZS(g,r,l)-t,u>0?n=g:e=g;while(Math.abs(u)>Wj&&++y<Kj);return g}function Id(t,e,n,r){if(t===e&&n===r)return Cs;const l=u=>Zj(u,0,1,t,n);return u=>u===0||u===1?u:ZS(l(u),e,r)}const QS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,JS=t=>e=>1-t(1-e),eE=Id(.33,1.53,.69,.99),gp=JS(eE),tE=QS(gp),nE=t=>(t*=2)<1?.5*gp(t):.5*(2-Math.pow(2,-10*(t-1))),mp=t=>1-Math.sin(Math.acos(t)),iE=JS(mp),sE=QS(mp),Qj=Id(.42,0,1,1),Jj=Id(0,0,.58,1),rE=Id(.42,0,.58,1),eB=t=>Array.isArray(t)&&typeof t[0]!="number",aE=t=>Array.isArray(t)&&typeof t[0]=="number",tB={linear:Cs,easeIn:Qj,easeInOut:rE,easeOut:Jj,circIn:mp,circInOut:sE,circOut:iE,backIn:gp,backInOut:tE,backOut:eE,anticipate:nE},nB=t=>typeof t=="string",bw=t=>{if(aE(t)){dp(t.length===4);const[e,n,r,l]=t;return Id(e,n,r,l)}else if(nB(t))return tB[t];return t},rh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],ww={value:null};function iB(t,e){let n=new Set,r=new Set,l=!1,u=!1;const g=new WeakSet;let y={delta:0,timestamp:0,isProcessing:!1},b=0;function x(A){g.has(A)&&(S.schedule(A),t()),b++,A(y)}const S={schedule:(A,N=!1,I=!1)=>{const j=I&&l?n:r;return N&&g.add(A),j.has(A)||j.add(A),A},cancel:A=>{r.delete(A),g.delete(A)},process:A=>{if(y=A,l){u=!0;return}l=!0,[n,r]=[r,n],n.forEach(x),e&&ww.value&&ww.value.frameloop[e].push(b),b=0,n.clear(),l=!1,u&&(u=!1,S.process(A))}};return S}const sB=40;function oE(t,e){let n=!1,r=!0;const l={delta:0,timestamp:0,isProcessing:!1},u=()=>n=!0,g=rh.reduce((B,V)=>(B[V]=iB(u,e?V:void 0),B),{}),{setup:y,read:b,resolveKeyframes:x,preUpdate:S,update:A,preRender:N,render:I,postRender:M}=g,j=()=>{const B=ia.useManualTiming?l.timestamp:performance.now();n=!1,ia.useManualTiming||(l.delta=r?1e3/60:Math.max(Math.min(B-l.timestamp,sB),1)),l.timestamp=B,l.isProcessing=!0,y.process(l),b.process(l),x.process(l),S.process(l),A.process(l),N.process(l),I.process(l),M.process(l),l.isProcessing=!1,n&&e&&(r=!1,t(j))},U=()=>{n=!0,r=!0,l.isProcessing||t(j)};return{schedule:rh.reduce((B,V)=>{const H=g[V];return B[V]=(J,X=!1,oe=!1)=>(n||U(),H.schedule(J,X,oe)),B},{}),cancel:B=>{for(let V=0;V<rh.length;V++)g[rh[V]].cancel(B)},state:l,steps:g}}const{schedule:pn,cancel:ro,state:gi,steps:bg}=oE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Cs,!0);let hh;function rB(){hh=void 0}const Yi={now:()=>(hh===void 0&&Yi.set(gi.isProcessing||ia.useManualTiming?gi.timestamp:performance.now()),hh),set:t=>{hh=t,queueMicrotask(rB)}},lE=t=>e=>typeof e=="string"&&e.startsWith(t),pp=lE("--"),aB=lE("var(--"),xp=t=>aB(t)?oB.test(t.split("/*")[0].trim()):!1,oB=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Dc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},hd={...Dc,transform:t=>na(0,1,t)},ah={...Dc,default:1},nd=t=>Math.round(t*1e5)/1e5,yp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function lB(t){return t==null}const cB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,bp=(t,e)=>n=>!!(typeof n=="string"&&cB.test(n)&&n.startsWith(t)||e&&!lB(n)&&Object.prototype.hasOwnProperty.call(n,e)),cE=(t,e,n)=>r=>{if(typeof r!="string")return r;const[l,u,g,y]=r.match(yp);return{[t]:parseFloat(l),[e]:parseFloat(u),[n]:parseFloat(g),alpha:y!==void 0?parseFloat(y):1}},uB=t=>na(0,255,t),wg={...Dc,transform:t=>Math.round(uB(t))},zo={test:bp("rgb","red"),parse:cE("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+wg.transform(t)+", "+wg.transform(e)+", "+wg.transform(n)+", "+nd(hd.transform(r))+")"};function dB(t){let e="",n="",r="",l="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),l=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),l=t.substring(4,5),e+=e,n+=n,r+=r,l+=l),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:l?parseInt(l,16)/255:1}}const mm={test:bp("#"),parse:dB,transform:zo.transform},Md=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Fa=Md("deg"),wr=Md("%"),ut=Md("px"),fB=Md("vh"),hB=Md("vw"),vw={...wr,parse:t=>wr.parse(t)/100,transform:t=>wr.transform(t*100)},oc={test:bp("hsl","hue"),parse:cE("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+wr.transform(nd(e))+", "+wr.transform(nd(n))+", "+nd(hd.transform(r))+")"},Hn={test:t=>zo.test(t)||mm.test(t)||oc.test(t),parse:t=>zo.test(t)?zo.parse(t):oc.test(t)?oc.parse(t):mm.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?zo.transform(t):oc.transform(t),getAnimatableNone:t=>{const e=Hn.parse(t);return e.alpha=0,Hn.transform(e)}},gB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function mB(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(yp))==null?void 0:e.length)||0)+(((n=t.match(gB))==null?void 0:n.length)||0)>0}const uE="number",dE="color",pB="var",xB="var(",Sw="${}",yB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},l=[];let u=0;const y=e.replace(yB,b=>(Hn.test(b)?(r.color.push(u),l.push(dE),n.push(Hn.parse(b))):b.startsWith(xB)?(r.var.push(u),l.push(pB),n.push(b)):(r.number.push(u),l.push(uE),n.push(parseFloat(b))),++u,Sw)).split(Sw);return{values:n,split:y,indexes:r,types:l}}function fE(t){return gd(t).values}function hE(t){const{split:e,types:n}=gd(t),r=e.length;return l=>{let u="";for(let g=0;g<r;g++)if(u+=e[g],l[g]!==void 0){const y=n[g];y===uE?u+=nd(l[g]):y===dE?u+=Hn.transform(l[g]):u+=l[g]}return u}}const bB=t=>typeof t=="number"?0:Hn.test(t)?Hn.getAnimatableNone(t):t;function wB(t){const e=fE(t);return hE(t)(e.map(bB))}const ao={test:mB,parse:fE,createTransformer:hE,getAnimatableNone:wB};function vg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function vB({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let l=0,u=0,g=0;if(!e)l=u=g=n;else{const y=n<.5?n*(1+e):n+e-n*e,b=2*n-y;l=vg(b,y,t+1/3),u=vg(b,y,t),g=vg(b,y,t-1/3)}return{red:Math.round(l*255),green:Math.round(u*255),blue:Math.round(g*255),alpha:r}}function Ih(t,e){return n=>n>0?e:t}const wn=(t,e,n)=>t+(e-t)*n,Sg=(t,e,n)=>{const r=t*t,l=n*(e*e-r)+r;return l<0?0:Math.sqrt(l)},SB=[mm,zo,oc],EB=t=>SB.find(e=>e.test(t));function Ew(t){const e=EB(t);if(!e)return!1;let n=e.parse(t);return e===oc&&(n=vB(n)),n}const Cw=(t,e)=>{const n=Ew(t),r=Ew(e);if(!n||!r)return Ih(t,e);const l={...n};return u=>(l.red=Sg(n.red,r.red,u),l.green=Sg(n.green,r.green,u),l.blue=Sg(n.blue,r.blue,u),l.alpha=wn(n.alpha,r.alpha,u),zo.transform(l))},pm=new Set(["none","hidden"]);function CB(t,e){return pm.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function AB(t,e){return n=>wn(t,e,n)}function wp(t){return typeof t=="number"?AB:typeof t=="string"?xp(t)?Ih:Hn.test(t)?Cw:NB:Array.isArray(t)?gE:typeof t=="object"?Hn.test(t)?Cw:TB:Ih}function gE(t,e){const n=[...t],r=n.length,l=t.map((u,g)=>wp(u)(u,e[g]));return u=>{for(let g=0;g<r;g++)n[g]=l[g](u);return n}}function TB(t,e){const n={...t,...e},r={};for(const l in n)t[l]!==void 0&&e[l]!==void 0&&(r[l]=wp(t[l])(t[l],e[l]));return l=>{for(const u in r)n[u]=r[u](l);return n}}function _B(t,e){const n=[],r={color:0,var:0,number:0};for(let l=0;l<e.values.length;l++){const u=e.types[l],g=t.indexes[u][r[u]],y=t.values[g]??0;n[l]=y,r[u]++}return n}const NB=(t,e)=>{const n=ao.createTransformer(e),r=gd(t),l=gd(e);return r.indexes.var.length===l.indexes.var.length&&r.indexes.color.length===l.indexes.color.length&&r.indexes.number.length>=l.indexes.number.length?pm.has(t)&&!l.values.length||pm.has(e)&&!r.values.length?CB(t,e):Od(gE(_B(r,l),l.values),n):Ih(t,e)};function mE(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?wn(t,e,n):wp(t)(t,e)}const RB=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>pn.update(e,n),stop:()=>ro(e),now:()=>gi.isProcessing?gi.timestamp:Yi.now()}},pE=(t,e,n=10)=>{let r="";const l=Math.max(Math.round(e/n),2);for(let u=0;u<l;u++)r+=Math.round(t(u/(l-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Mh=2e4;function vp(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Mh;)e+=n,r=t.next(e);return e>=Mh?1/0:e}function OB(t,e=100,n){const r=n({...t,keyframes:[0,e]}),l=Math.min(vp(r),Mh);return{type:"keyframes",ease:u=>r.next(l*u).value/e,duration:br(l)}}const IB=5;function xE(t,e,n){const r=Math.max(e-IB,0);return KS(n-t(r),e-r)}const Nn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Eg=.001;function MB({duration:t=Nn.duration,bounce:e=Nn.bounce,velocity:n=Nn.velocity,mass:r=Nn.mass}){let l,u,g=1-e;g=na(Nn.minDamping,Nn.maxDamping,g),t=na(Nn.minDuration,Nn.maxDuration,br(t)),g<1?(l=x=>{const S=x*g,A=S*t,N=S-n,I=xm(x,g),M=Math.exp(-A);return Eg-N/I*M},u=x=>{const A=x*g*t,N=A*n+n,I=Math.pow(g,2)*Math.pow(x,2)*t,M=Math.exp(-A),j=xm(Math.pow(x,2),g);return(-l(x)+Eg>0?-1:1)*((N-I)*M)/j}):(l=x=>{const S=Math.exp(-x*t),A=(x-n)*t+1;return-Eg+S*A},u=x=>{const S=Math.exp(-x*t),A=(n-x)*(t*t);return S*A});const y=5/t,b=LB(l,u,y);if(t=yr(t),isNaN(b))return{stiffness:Nn.stiffness,damping:Nn.damping,duration:t};{const x=Math.pow(b,2)*r;return{stiffness:x,damping:g*2*Math.sqrt(r*x),duration:t}}}const DB=12;function LB(t,e,n){let r=n;for(let l=1;l<DB;l++)r=r-t(r)/e(r);return r}function xm(t,e){return t*Math.sqrt(1-e*e)}const kB=["duration","bounce"],jB=["stiffness","damping","mass"];function Aw(t,e){return e.some(n=>t[n]!==void 0)}function BB(t){let e={velocity:Nn.velocity,stiffness:Nn.stiffness,damping:Nn.damping,mass:Nn.mass,isResolvedFromDuration:!1,...t};if(!Aw(t,jB)&&Aw(t,kB))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),l=r*r,u=2*na(.05,1,1-(t.bounce||0))*Math.sqrt(l);e={...e,mass:Nn.mass,stiffness:l,damping:u}}else{const n=MB(t);e={...e,...n,mass:Nn.mass},e.isResolvedFromDuration=!0}return e}function Dh(t=Nn.visualDuration,e=Nn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:l}=n;const u=n.keyframes[0],g=n.keyframes[n.keyframes.length-1],y={done:!1,value:u},{stiffness:b,damping:x,mass:S,duration:A,velocity:N,isResolvedFromDuration:I}=BB({...n,velocity:-br(n.velocity||0)}),M=N||0,j=x/(2*Math.sqrt(b*S)),U=g-u,z=br(Math.sqrt(b/S)),q=Math.abs(U)<5;r||(r=q?Nn.restSpeed.granular:Nn.restSpeed.default),l||(l=q?Nn.restDelta.granular:Nn.restDelta.default);let B;if(j<1){const H=xm(z,j);B=J=>{const X=Math.exp(-j*z*J);return g-X*((M+j*z*U)/H*Math.sin(H*J)+U*Math.cos(H*J))}}else if(j===1)B=H=>g-Math.exp(-z*H)*(U+(M+z*U)*H);else{const H=z*Math.sqrt(j*j-1);B=J=>{const X=Math.exp(-j*z*J),oe=Math.min(H*J,300);return g-X*((M+j*z*U)*Math.sinh(oe)+H*U*Math.cosh(oe))/H}}const V={calculatedDuration:I&&A||null,next:H=>{const J=B(H);if(I)y.done=H>=A;else{let X=H===0?M:0;j<1&&(X=H===0?yr(M):xE(B,H,J));const oe=Math.abs(X)<=r,Y=Math.abs(g-J)<=l;y.done=oe&&Y}return y.value=y.done?g:J,y},toString:()=>{const H=Math.min(vp(V),Mh),J=pE(X=>V.next(H*X).value,H,30);return H+"ms "+J},toTransition:()=>{}};return V}Dh.applyToOptions=t=>{const e=OB(t,100,Dh);return t.ease=e.ease,t.duration=yr(e.duration),t.type="keyframes",t};function ym({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:l=10,bounceStiffness:u=500,modifyTarget:g,min:y,max:b,restDelta:x=.5,restSpeed:S}){const A=t[0],N={done:!1,value:A},I=oe=>y!==void 0&&oe<y||b!==void 0&&oe>b,M=oe=>y===void 0?b:b===void 0||Math.abs(y-oe)<Math.abs(b-oe)?y:b;let j=n*e;const U=A+j,z=g===void 0?U:g(U);z!==U&&(j=z-A);const q=oe=>-j*Math.exp(-oe/r),B=oe=>z+q(oe),V=oe=>{const Y=q(oe),be=B(oe);N.done=Math.abs(Y)<=x,N.value=N.done?z:be};let H,J;const X=oe=>{I(N.value)&&(H=oe,J=Dh({keyframes:[N.value,M(N.value)],velocity:xE(B,oe,N.value),damping:l,stiffness:u,restDelta:x,restSpeed:S}))};return X(0),{calculatedDuration:null,next:oe=>{let Y=!1;return!J&&H===void 0&&(Y=!0,V(oe),X(oe)),H!==void 0&&oe>=H?J.next(oe-H):(!Y&&V(oe),N)}}}function PB(t,e,n){const r=[],l=n||ia.mix||mE,u=t.length-1;for(let g=0;g<u;g++){let y=l(t[g],t[g+1]);if(e){const b=Array.isArray(e)?e[g]||Cs:e;y=Od(b,y)}r.push(y)}return r}function UB(t,e,{clamp:n=!0,ease:r,mixer:l}={}){const u=t.length;if(dp(u===e.length),u===1)return()=>e[0];if(u===2&&e[0]===e[1])return()=>e[1];const g=t[0]===t[1];t[0]>t[u-1]&&(t=[...t].reverse(),e=[...e].reverse());const y=PB(e,r,l),b=y.length,x=S=>{if(g&&S<t[0])return e[0];let A=0;if(b>1)for(;A<t.length-2&&!(S<t[A+1]);A++);const N=fd(t[A],t[A+1],S);return y[A](N)};return n?S=>x(na(t[0],t[u-1],S)):x}function FB(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const l=fd(0,e,r);t.push(wn(n,1,l))}}function VB(t){const e=[0];return FB(e,t.length-1),e}function HB(t,e){return t.map(n=>n*e)}function zB(t,e){return t.map(()=>e||rE).splice(0,t.length-1)}function id({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const l=eB(r)?r.map(bw):bw(r),u={done:!1,value:e[0]},g=HB(n&&n.length===e.length?n:VB(e),t),y=UB(g,e,{ease:Array.isArray(l)?l:zB(e,l)});return{calculatedDuration:t,next:b=>(u.value=y(b),u.done=b>=t,u)}}const $B=t=>t!==null;function Sp(t,{repeat:e,repeatType:n="loop"},r,l=1){const u=t.filter($B),y=l<0||e&&n!=="loop"&&e%2===1?0:u.length-1;return!y||r===void 0?u[y]:r}const GB={decay:ym,inertia:ym,tween:id,keyframes:id,spring:Dh};function yE(t){typeof t.type=="string"&&(t.type=GB[t.type])}class Ep{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const qB=t=>t/100;class Cp extends Ep{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,l;const{motionValue:n}=this.options;n&&n.updatedAt!==Yi.now()&&this.tick(Yi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(l=(r=this.options).onStop)==null||l.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;yE(e);const{type:n=id,repeat:r=0,repeatDelay:l=0,repeatType:u,velocity:g=0}=e;let{keyframes:y}=e;const b=n||id;b!==id&&typeof y[0]!="number"&&(this.mixKeyframes=Od(qB,mE(y[0],y[1])),y=[0,100]);const x=b({...e,keyframes:y});u==="mirror"&&(this.mirroredGenerator=b({...e,keyframes:[...y].reverse(),velocity:-g})),x.calculatedDuration===null&&(x.calculatedDuration=vp(x));const{calculatedDuration:S}=x;this.calculatedDuration=S,this.resolvedDuration=S+l,this.totalDuration=this.resolvedDuration*(r+1)-l,this.generator=x}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:l,mixKeyframes:u,mirroredGenerator:g,resolvedDuration:y,calculatedDuration:b}=this;if(this.startTime===null)return r.next(0);const{delay:x=0,keyframes:S,repeat:A,repeatType:N,repeatDelay:I,type:M,onUpdate:j,finalKeyframe:U}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-l/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const z=this.currentTime-x*(this.playbackSpeed>=0?1:-1),q=this.playbackSpeed>=0?z<0:z>l;this.currentTime=Math.max(z,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let B=this.currentTime,V=r;if(A){const oe=Math.min(this.currentTime,l)/y;let Y=Math.floor(oe),be=oe%1;!be&&oe>=1&&(be=1),be===1&&Y--,Y=Math.min(Y,A+1),!!(Y%2)&&(N==="reverse"?(be=1-be,I&&(be-=I/y)):N==="mirror"&&(V=g)),B=na(0,1,be)*y}const H=q?{done:!1,value:S[0]}:V.next(B);u&&(H.value=u(H.value));let{done:J}=H;!q&&b!==null&&(J=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const X=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&J);return X&&M!==ym&&(H.value=Sp(S,this.options,U,this.speed)),j&&j(H.value),X&&this.finish(),H}then(e,n){return this.finished.then(e,n)}get duration(){return br(this.calculatedDuration)}get time(){return br(this.currentTime)}set time(e){var n;e=yr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Yi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=br(this.currentTime))}play(){var l,u;if(this.isStopped)return;const{driver:e=RB,startTime:n}=this.options;this.driver||(this.driver=e(g=>this.tick(g))),(u=(l=this.options).onPlay)==null||u.call(l);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Yi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function YB(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const $o=t=>t*180/Math.PI,bm=t=>{const e=$o(Math.atan2(t[1],t[0]));return wm(e)},XB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:bm,rotateZ:bm,skewX:t=>$o(Math.atan(t[1])),skewY:t=>$o(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},wm=t=>(t=t%360,t<0&&(t+=360),t),Tw=bm,_w=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Nw=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),WB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:_w,scaleY:Nw,scale:t=>(_w(t)+Nw(t))/2,rotateX:t=>wm($o(Math.atan2(t[6],t[5]))),rotateY:t=>wm($o(Math.atan2(-t[2],t[0]))),rotateZ:Tw,rotate:Tw,skewX:t=>$o(Math.atan(t[4])),skewY:t=>$o(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function vm(t){return t.includes("scale")?1:0}function Sm(t,e){if(!t||t==="none")return vm(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,l;if(n)r=WB,l=n;else{const y=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=XB,l=y}if(!l)return vm(e);const u=r[e],g=l[1].split(",").map(ZB);return typeof u=="function"?u(g):g[u]}const KB=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Sm(n,e)};function ZB(t){return parseFloat(t.trim())}const Lc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kc=new Set(Lc),Rw=t=>t===Dc||t===ut,QB=new Set(["x","y","z"]),JB=Lc.filter(t=>!QB.has(t));function eP(t){const e=[];return JB.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const nl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Sm(e,"x"),y:(t,{transform:e})=>Sm(e,"y")};nl.translateX=nl.x;nl.translateY=nl.y;const il=new Set;let Em=!1,Cm=!1,Am=!1;function bE(){if(Cm){const t=Array.from(il).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const l=eP(r);l.length&&(n.set(r,l),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const l=n.get(r);l&&l.forEach(([u,g])=>{var y;(y=r.getValue(u))==null||y.set(g)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Cm=!1,Em=!1,il.forEach(t=>t.complete(Am)),il.clear()}function wE(){il.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Cm=!0)})}function tP(){Am=!0,wE(),bE(),Am=!1}class Ap{constructor(e,n,r,l,u,g=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=l,this.element=u,this.isAsync=g}scheduleResolve(){this.state="scheduled",this.isAsync?(il.add(this),Em||(Em=!0,pn.read(wE),pn.resolveKeyframes(bE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:l}=this;if(e[0]===null){const u=l==null?void 0:l.get(),g=e[e.length-1];if(u!==void 0)e[0]=u;else if(r&&n){const y=r.readValue(n,g);y!=null&&(e[0]=y)}e[0]===void 0&&(e[0]=g),l&&u===void 0&&l.set(e[0])}YB(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),il.delete(this)}cancel(){this.state==="scheduled"&&(il.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const nP=t=>t.startsWith("--");function iP(t,e,n){nP(e)?t.style.setProperty(e,n):t.style[e]=n}const sP=fp(()=>window.ScrollTimeline!==void 0),rP={};function aP(t,e){const n=fp(t);return()=>rP[e]??n()}const vE=aP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Gu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Ow={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gu([0,.65,.55,1]),circOut:Gu([.55,0,1,.45]),backIn:Gu([.31,.01,.66,-.59]),backOut:Gu([.33,1.53,.69,.99])};function SE(t,e){if(t)return typeof t=="function"?vE()?pE(t,e):"ease-out":aE(t)?Gu(t):Array.isArray(t)?t.map(n=>SE(n,e)||Ow.easeOut):Ow[t]}function oP(t,e,n,{delay:r=0,duration:l=300,repeat:u=0,repeatType:g="loop",ease:y="easeOut",times:b}={},x=void 0){const S={[e]:n};b&&(S.offset=b);const A=SE(y,l);Array.isArray(A)&&(S.easing=A);const N={delay:r,duration:l,easing:Array.isArray(A)?"linear":A,fill:"both",iterations:u+1,direction:g==="reverse"?"alternate":"normal"};return x&&(N.pseudoElement=x),t.animate(S,N)}function EE(t){return typeof t=="function"&&"applyToOptions"in t}function lP({type:t,...e}){return EE(t)&&vE()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class cP extends Ep{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:l,pseudoElement:u,allowFlatten:g=!1,finalKeyframe:y,onComplete:b}=e;this.isPseudoElement=!!u,this.allowFlatten=g,this.options=e,dp(typeof e.type!="string");const x=lP(e);this.animation=oP(n,r,l,x,u),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const S=Sp(l,this.options,y,this.speed);this.updateMotionValue?this.updateMotionValue(S):iP(n,r,S),this.animation.cancel()}b==null||b(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return br(Number(e))}get time(){return br(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=yr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&sP()?(this.animation.timeline=e,Cs):n(this)}}const CE={anticipate:nE,backInOut:tE,circInOut:sE};function uP(t){return t in CE}function dP(t){typeof t.ease=="string"&&uP(t.ease)&&(t.ease=CE[t.ease])}const Iw=10;class fP extends cP{constructor(e){dP(e),yE(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:l,element:u,...g}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const y=new Cp({...g,autoplay:!1}),b=yr(this.finishedTime??this.time);n.setWithVelocity(y.sample(b-Iw).value,y.sample(b).value,Iw),y.stop()}}const Mw=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ao.test(t)||t==="0")&&!t.startsWith("url("));function hP(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function gP(t,e,n,r){const l=t[0];if(l===null)return!1;if(e==="display"||e==="visibility")return!0;const u=t[t.length-1],g=Mw(l,e),y=Mw(u,e);return!g||!y?!1:hP(t)||(n==="spring"||EE(n))&&r}function Tp(t){return XS(t)&&"offsetHeight"in t}const mP=new Set(["opacity","clipPath","filter","transform"]),pP=fp(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function xP(t){var x;const{motionValue:e,name:n,repeatDelay:r,repeatType:l,damping:u,type:g}=t;if(!Tp((x=e==null?void 0:e.owner)==null?void 0:x.current))return!1;const{onUpdate:y,transformTemplate:b}=e.owner.getProps();return pP()&&n&&mP.has(n)&&(n!=="transform"||!b)&&!y&&!r&&l!=="mirror"&&u!==0&&g!=="inertia"}const yP=40;class bP extends Ep{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:l=0,repeatDelay:u=0,repeatType:g="loop",keyframes:y,name:b,motionValue:x,element:S,...A}){var M;super(),this.stop=()=>{var j,U;this._animation&&(this._animation.stop(),(j=this.stopTimeline)==null||j.call(this)),(U=this.keyframeResolver)==null||U.cancel()},this.createdAt=Yi.now();const N={autoplay:e,delay:n,type:r,repeat:l,repeatDelay:u,repeatType:g,name:b,motionValue:x,element:S,...A},I=(S==null?void 0:S.KeyframeResolver)||Ap;this.keyframeResolver=new I(y,(j,U,z)=>this.onKeyframesResolved(j,U,N,!z),b,x,S),(M=this.keyframeResolver)==null||M.scheduleResolve()}onKeyframesResolved(e,n,r,l){this.keyframeResolver=void 0;const{name:u,type:g,velocity:y,delay:b,isHandoff:x,onUpdate:S}=r;this.resolvedAt=Yi.now(),gP(e,u,g,y)||((ia.instantAnimations||!b)&&(S==null||S(Sp(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const N={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>yP?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},I=!x&&xP(N)?new fP({...N,element:N.motionValue.owner.current}):new Cp(N);I.finished.then(()=>this.notifyFinished()).catch(Cs),this.pendingTimeline&&(this.stopTimeline=I.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=I}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),tP()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const wP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function vP(t){const e=wP.exec(t);if(!e)return[,];const[,n,r,l]=e;return[`--${n??r}`,l]}function AE(t,e,n=1){const[r,l]=vP(t);if(!r)return;const u=window.getComputedStyle(e).getPropertyValue(r);if(u){const g=u.trim();return YS(g)?parseFloat(g):g}return xp(l)?AE(l,e,n+1):l}function _p(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const TE=new Set(["width","height","top","left","right","bottom",...Lc]),SP={test:t=>t==="auto",parse:t=>t},_E=t=>e=>e.test(t),NE=[Dc,ut,wr,Fa,hB,fB,SP],Dw=t=>NE.find(_E(t));function EP(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||WS(t):!0}const CP=new Set(["brightness","contrast","saturate","opacity"]);function AP(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(yp)||[];if(!r)return t;const l=n.replace(r,"");let u=CP.has(e)?1:0;return r!==n&&(u*=100),e+"("+u+l+")"}const TP=/\b([a-z-]*)\(.*?\)/gu,Tm={...ao,getAnimatableNone:t=>{const e=t.match(TP);return e?e.map(AP).join(" "):t}},Lw={...Dc,transform:Math.round},_P={rotate:Fa,rotateX:Fa,rotateY:Fa,rotateZ:Fa,scale:ah,scaleX:ah,scaleY:ah,scaleZ:ah,skew:Fa,skewX:Fa,skewY:Fa,distance:ut,translateX:ut,translateY:ut,translateZ:ut,x:ut,y:ut,z:ut,perspective:ut,transformPerspective:ut,opacity:hd,originX:vw,originY:vw,originZ:ut},Np={borderWidth:ut,borderTopWidth:ut,borderRightWidth:ut,borderBottomWidth:ut,borderLeftWidth:ut,borderRadius:ut,radius:ut,borderTopLeftRadius:ut,borderTopRightRadius:ut,borderBottomRightRadius:ut,borderBottomLeftRadius:ut,width:ut,maxWidth:ut,height:ut,maxHeight:ut,top:ut,right:ut,bottom:ut,left:ut,padding:ut,paddingTop:ut,paddingRight:ut,paddingBottom:ut,paddingLeft:ut,margin:ut,marginTop:ut,marginRight:ut,marginBottom:ut,marginLeft:ut,backgroundPositionX:ut,backgroundPositionY:ut,..._P,zIndex:Lw,fillOpacity:hd,strokeOpacity:hd,numOctaves:Lw},NP={...Np,color:Hn,backgroundColor:Hn,outlineColor:Hn,fill:Hn,stroke:Hn,borderColor:Hn,borderTopColor:Hn,borderRightColor:Hn,borderBottomColor:Hn,borderLeftColor:Hn,filter:Tm,WebkitFilter:Tm},RE=t=>NP[t];function OE(t,e){let n=RE(t);return n!==Tm&&(n=ao),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const RP=new Set(["auto","none","0"]);function OP(t,e,n){let r=0,l;for(;r<t.length&&!l;){const u=t[r];typeof u=="string"&&!RP.has(u)&&gd(u).values.length&&(l=t[r]),r++}if(l&&n)for(const u of e)t[u]=OE(n,l)}class IP extends Ap{constructor(e,n,r,l,u){super(e,n,r,l,u,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let b=0;b<e.length;b++){let x=e[b];if(typeof x=="string"&&(x=x.trim(),xp(x))){const S=AE(x,n.current);S!==void 0&&(e[b]=S),b===e.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!TE.has(r)||e.length!==2)return;const[l,u]=e,g=Dw(l),y=Dw(u);if(g!==y)if(Rw(g)&&Rw(y))for(let b=0;b<e.length;b++){const x=e[b];typeof x=="string"&&(e[b]=parseFloat(x))}else nl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let l=0;l<e.length;l++)(e[l]===null||EP(e[l]))&&r.push(l);r.length&&OP(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=nl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const l=n[n.length-1];l!==void 0&&e.getValue(r,l).jump(l,!1)}measureEndState(){var y;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const l=e.getValue(n);l&&l.jump(this.measuredOrigin,!1);const u=r.length-1,g=r[u];r[u]=nl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),g!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=g),(y=this.removedTransforms)!=null&&y.length&&this.removedTransforms.forEach(([b,x])=>{e.getValue(b).set(x)}),this.resolveNoneKeyframes()}}function MP(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const l=(n==null?void 0:n[t])??r.querySelectorAll(t);return l?Array.from(l):[]}return Array.from(t)}const IE=(t,e)=>e&&typeof t=="number"?e.transform(t):t,kw=30,DP=t=>!isNaN(parseFloat(t));class LP{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,l=!0)=>{var g,y;const u=Yi.now();if(this.updatedAt!==u&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((g=this.events.change)==null||g.notify(this.current),this.dependents))for(const b of this.dependents)b.dirty();l&&((y=this.events.renderRequest)==null||y.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Yi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=DP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new hp);const r=this.events[e].add(n);return e==="change"?()=>{r(),pn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Yi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>kw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,kw);return KS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Tc(t,e){return new LP(t,e)}const{schedule:Rp}=oE(queueMicrotask,!1),Ps={x:!1,y:!1};function ME(){return Ps.x||Ps.y}function kP(t){return t==="x"||t==="y"?Ps[t]?null:(Ps[t]=!0,()=>{Ps[t]=!1}):Ps.x||Ps.y?null:(Ps.x=Ps.y=!0,()=>{Ps.x=Ps.y=!1})}function DE(t,e){const n=MP(t),r=new AbortController,l={passive:!0,...e,signal:r.signal};return[n,l,()=>r.abort()]}function jw(t){return!(t.pointerType==="touch"||ME())}function jP(t,e,n={}){const[r,l,u]=DE(t,n),g=y=>{if(!jw(y))return;const{target:b}=y,x=e(b,y);if(typeof x!="function"||!b)return;const S=A=>{jw(A)&&(x(A),b.removeEventListener("pointerleave",S))};b.addEventListener("pointerleave",S,l)};return r.forEach(y=>{y.addEventListener("pointerenter",g,l)}),u}const LE=(t,e)=>e?t===e?!0:LE(t,e.parentElement):!1,Op=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,BP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function PP(t){return BP.has(t.tagName)||t.tabIndex!==-1}const gh=new WeakSet;function Bw(t){return e=>{e.key==="Enter"&&t(e)}}function Cg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const UP=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Bw(()=>{if(gh.has(n))return;Cg(n,"down");const l=Bw(()=>{Cg(n,"up")}),u=()=>Cg(n,"cancel");n.addEventListener("keyup",l,e),n.addEventListener("blur",u,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Pw(t){return Op(t)&&!ME()}function FP(t,e,n={}){const[r,l,u]=DE(t,n),g=y=>{const b=y.currentTarget;if(!Pw(y))return;gh.add(b);const x=e(b,y),S=(I,M)=>{window.removeEventListener("pointerup",A),window.removeEventListener("pointercancel",N),gh.has(b)&&gh.delete(b),Pw(I)&&typeof x=="function"&&x(I,{success:M})},A=I=>{S(I,b===window||b===document||n.useGlobalTarget||LE(b,I.target))},N=I=>{S(I,!1)};window.addEventListener("pointerup",A,l),window.addEventListener("pointercancel",N,l)};return r.forEach(y=>{(n.useGlobalTarget?window:y).addEventListener("pointerdown",g,l),Tp(y)&&(y.addEventListener("focus",x=>UP(x,l)),!PP(y)&&!y.hasAttribute("tabindex")&&(y.tabIndex=0))}),u}function kE(t){return XS(t)&&"ownerSVGElement"in t}function VP(t){return kE(t)&&t.tagName==="svg"}const Ti=t=>!!(t&&t.getVelocity),HP=[...NE,Hn,ao],zP=t=>HP.find(_E(t)),Ip=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class $P extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,l=Tp(r)&&r.offsetWidth||0,u=this.props.sizeRef.current;u.height=n.offsetHeight||0,u.width=n.offsetWidth||0,u.top=n.offsetTop,u.left=n.offsetLeft,u.right=l-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function GP({children:t,isPresent:e,anchorX:n,root:r}){const l=R.useId(),u=R.useRef(null),g=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=R.useContext(Ip);return R.useInsertionEffect(()=>{const{width:b,height:x,top:S,left:A,right:N}=g.current;if(e||!u.current||!b||!x)return;const I=n==="left"?`left: ${A}`:`right: ${N}`;u.current.dataset.motionPopId=l;const M=document.createElement("style");y&&(M.nonce=y);const j=r??document.head;return j.appendChild(M),M.sheet&&M.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${b}px !important;
            height: ${x}px !important;
            ${I}px !important;
            top: ${S}px !important;
          }
        `),()=>{j.removeChild(M),j.contains(M)&&j.removeChild(M)}},[e]),E.jsx($P,{isPresent:e,childRef:u,sizeRef:g,children:R.cloneElement(t,{ref:u})})}const qP=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:l,presenceAffectsLayout:u,mode:g,anchorX:y,root:b})=>{const x=op(YP),S=R.useId();let A=!0,N=R.useMemo(()=>(A=!1,{id:S,initial:e,isPresent:n,custom:l,onExitComplete:I=>{x.set(I,!0);for(const M of x.values())if(!M)return;r&&r()},register:I=>(x.set(I,!1),()=>x.delete(I))}),[n,x,r]);return u&&A&&(N={...N}),R.useMemo(()=>{x.forEach((I,M)=>x.set(M,!1))},[n]),R.useEffect(()=>{!n&&!x.size&&r&&r()},[n]),g==="popLayout"&&(t=E.jsx(GP,{isPresent:n,anchorX:y,root:b,children:t})),E.jsx(Qh.Provider,{value:N,children:t})};function YP(){return new Map}function jE(t=!0){const e=R.useContext(Qh);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:l}=e,u=R.useId();R.useEffect(()=>{if(t)return l(u)},[t]);const g=R.useCallback(()=>t&&r&&r(u),[u,r,t]);return!n&&r?[!1,g]:[!0]}const oh=t=>t.key||"";function Uw(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const Bu=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:l=!0,mode:u="sync",propagate:g=!1,anchorX:y="left",root:b})=>{const[x,S]=jE(g),A=R.useMemo(()=>Uw(t),[t]),N=g&&!x?[]:A.map(oh),I=R.useRef(!0),M=R.useRef(A),j=op(()=>new Map),[U,z]=R.useState(A),[q,B]=R.useState(A);qS(()=>{I.current=!1,M.current=A;for(let J=0;J<q.length;J++){const X=oh(q[J]);N.includes(X)?j.delete(X):j.get(X)!==!0&&j.set(X,!1)}},[q,N.length,N.join("-")]);const V=[];if(A!==U){let J=[...A];for(let X=0;X<q.length;X++){const oe=q[X],Y=oh(oe);N.includes(Y)||(J.splice(X,0,oe),V.push(oe))}return u==="wait"&&V.length&&(J=V),B(Uw(J)),z(A),null}const{forceRender:H}=R.useContext(ap);return E.jsx(E.Fragment,{children:q.map(J=>{const X=oh(J),oe=g&&!x?!1:A===q||N.includes(X),Y=()=>{if(j.has(X))j.set(X,!0);else return;let be=!0;j.forEach(Ae=>{Ae||(be=!1)}),be&&(H==null||H(),B(M.current),g&&(S==null||S()),r&&r())};return E.jsx(qP,{isPresent:oe,initial:!I.current||n?void 0:!1,custom:e,presenceAffectsLayout:l,mode:u,root:b,onExitComplete:oe?void 0:Y,anchorX:y,children:J},X)})})},BE=R.createContext({strict:!1}),Fw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_c={};for(const t in Fw)_c[t]={isEnabled:e=>Fw[t].some(n=>!!e[n])};function XP(t){for(const e in t)_c[e]={..._c[e],...t[e]}}const WP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||WP.has(t)}let PE=t=>!Lh(t);function KP(t){typeof t=="function"&&(PE=e=>e.startsWith("on")?!Lh(e):t(e))}try{KP(require("@emotion/is-prop-valid").default)}catch{}function ZP(t,e,n){const r={};for(const l in t)l==="values"&&typeof t.values=="object"||(PE(l)||n===!0&&Lh(l)||!e&&!Lh(l)||t.draggable&&l.startsWith("onDrag"))&&(r[l]=t[l]);return r}function QP(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,l)=>l==="create"?t:(e.has(l)||e.set(l,t(l)),e.get(l))})}const Jh=R.createContext({});function e0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function md(t){return typeof t=="string"||Array.isArray(t)}const Mp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Dp=["initial",...Mp];function t0(t){return e0(t.animate)||Dp.some(e=>md(t[e]))}function UE(t){return!!(t0(t)||t.variants)}function JP(t,e){if(t0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||md(n)?n:void 0,animate:md(r)?r:void 0}}return t.inherit!==!1?e:{}}function eU(t){const{initial:e,animate:n}=JP(t,R.useContext(Jh));return R.useMemo(()=>({initial:e,animate:n}),[Vw(e),Vw(n)])}function Vw(t){return Array.isArray(t)?t.join(" "):t}const tU=Symbol.for("motionComponentSymbol");function lc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function nU(t,e,n){return R.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):lc(n)&&(n.current=r))},[e])}const Lp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),iU="framerAppearId",FE="data-"+Lp(iU),VE=R.createContext({});function sU(t,e,n,r,l){var j,U;const{visualElement:u}=R.useContext(Jh),g=R.useContext(BE),y=R.useContext(Qh),b=R.useContext(Ip).reducedMotion,x=R.useRef(null);r=r||g.renderer,!x.current&&r&&(x.current=r(t,{visualState:e,parent:u,props:n,presenceContext:y,blockInitialAnimation:y?y.initial===!1:!1,reducedMotionConfig:b}));const S=x.current,A=R.useContext(VE);S&&!S.projection&&l&&(S.type==="html"||S.type==="svg")&&rU(x.current,n,l,A);const N=R.useRef(!1);R.useInsertionEffect(()=>{S&&N.current&&S.update(n,y)});const I=n[FE],M=R.useRef(!!I&&!((j=window.MotionHandoffIsComplete)!=null&&j.call(window,I))&&((U=window.MotionHasOptimisedAnimation)==null?void 0:U.call(window,I)));return qS(()=>{S&&(N.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),Rp.render(S.render),M.current&&S.animationState&&S.animationState.animateChanges())}),R.useEffect(()=>{S&&(!M.current&&S.animationState&&S.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var z;(z=window.MotionHandoffMarkAsComplete)==null||z.call(window,I)}),M.current=!1))}),S}function rU(t,e,n,r){const{layoutId:l,layout:u,drag:g,dragConstraints:y,layoutScroll:b,layoutRoot:x,layoutCrossfade:S}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:HE(t.parent)),t.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!g||y&&lc(y),visualElement:t,animationType:typeof u=="string"?u:"both",initialPromotionConfig:r,crossfade:S,layoutScroll:b,layoutRoot:x})}function HE(t){if(t)return t.options.allowProjection!==!1?t.projection:HE(t.parent)}function aU({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:l}){t&&XP(t);function u(y,b){let x;const S={...R.useContext(Ip),...y,layoutId:oU(y)},{isStatic:A}=S,N=eU(y),I=r(y,A);if(!A&&lp){lU();const M=cU(S);x=M.MeasureLayout,N.visualElement=sU(l,I,S,e,M.ProjectionNode)}return E.jsxs(Jh.Provider,{value:N,children:[x&&N.visualElement?E.jsx(x,{visualElement:N.visualElement,...S}):null,n(l,y,nU(I,N.visualElement,b),I,A,N.visualElement)]})}u.displayName=`motion.${typeof l=="string"?l:`create(${l.displayName??l.name??""})`}`;const g=R.forwardRef(u);return g[tU]=l,g}function oU({layoutId:t}){const e=R.useContext(ap).id;return e&&t!==void 0?e+"-"+t:t}function lU(t,e){R.useContext(BE).strict}function cU(t){const{drag:e,layout:n}=_c;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const pd={};function uU(t){for(const e in t)pd[e]=t[e],pp(e)&&(pd[e].isCSSVariable=!0)}function zE(t,{layout:e,layoutId:n}){return kc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!pd[t]||t==="opacity")}const dU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fU=Lc.length;function hU(t,e,n){let r="",l=!0;for(let u=0;u<fU;u++){const g=Lc[u],y=t[g];if(y===void 0)continue;let b=!0;if(typeof y=="number"?b=y===(g.startsWith("scale")?1:0):b=parseFloat(y)===0,!b||n){const x=IE(y,Np[g]);if(!b){l=!1;const S=dU[g]||g;r+=`${S}(${x}) `}n&&(e[g]=x)}}return r=r.trim(),n?r=n(e,l?"":r):l&&(r="none"),r}function kp(t,e,n){const{style:r,vars:l,transformOrigin:u}=t;let g=!1,y=!1;for(const b in e){const x=e[b];if(kc.has(b)){g=!0;continue}else if(pp(b)){l[b]=x;continue}else{const S=IE(x,Np[b]);b.startsWith("origin")?(y=!0,u[b]=S):r[b]=S}}if(e.transform||(g||n?r.transform=hU(e,t.transform,n):r.transform&&(r.transform="none")),y){const{originX:b="50%",originY:x="50%",originZ:S=0}=u;r.transformOrigin=`${b} ${x} ${S}`}}const jp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $E(t,e,n){for(const r in e)!Ti(e[r])&&!zE(r,n)&&(t[r]=e[r])}function gU({transformTemplate:t},e){return R.useMemo(()=>{const n=jp();return kp(n,e,t),Object.assign({},n.vars,n.style)},[e])}function mU(t,e){const n=t.style||{},r={};return $E(r,n,t),Object.assign(r,gU(t,e)),r}function pU(t,e){const n={},r=mU(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const xU={offset:"stroke-dashoffset",array:"stroke-dasharray"},yU={offset:"strokeDashoffset",array:"strokeDasharray"};function bU(t,e,n=1,r=0,l=!0){t.pathLength=1;const u=l?xU:yU;t[u.offset]=ut.transform(-r);const g=ut.transform(e),y=ut.transform(n);t[u.array]=`${g} ${y}`}function GE(t,{attrX:e,attrY:n,attrScale:r,pathLength:l,pathSpacing:u=1,pathOffset:g=0,...y},b,x,S){if(kp(t,y,x),b){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:A,style:N}=t;A.transform&&(N.transform=A.transform,delete A.transform),(N.transform||A.transformOrigin)&&(N.transformOrigin=A.transformOrigin??"50% 50%",delete A.transformOrigin),N.transform&&(N.transformBox=(S==null?void 0:S.transformBox)??"fill-box",delete A.transformBox),e!==void 0&&(A.x=e),n!==void 0&&(A.y=n),r!==void 0&&(A.scale=r),l!==void 0&&bU(A,l,u,g,!1)}const qE=()=>({...jp(),attrs:{}}),YE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function wU(t,e,n,r){const l=R.useMemo(()=>{const u=qE();return GE(u,e,YE(r),t.transformTemplate,t.style),{...u.attrs,style:{...u.style}}},[e]);if(t.style){const u={};$E(u,t.style,t),l.style={...u,...l.style}}return l}const vU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Bp(t){return typeof t!="string"||t.includes("-")?!1:!!(vU.indexOf(t)>-1||/[A-Z]/u.test(t))}function SU(t=!1){return(n,r,l,{latestValues:u},g)=>{const b=(Bp(n)?wU:pU)(r,u,g,n),x=ZP(r,typeof n=="string",t),S=n!==R.Fragment?{...x,...b,ref:l}:{},{children:A}=r,N=R.useMemo(()=>Ti(A)?A.get():A,[A]);return R.createElement(n,{...S,children:N})}}function Hw(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Pp(t,e,n,r){if(typeof e=="function"){const[l,u]=Hw(r);e=e(n!==void 0?n:t.custom,l,u)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[l,u]=Hw(r);e=e(n!==void 0?n:t.custom,l,u)}return e}function mh(t){return Ti(t)?t.get():t}function EU({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,l){return{latestValues:CU(n,r,l,t),renderState:e()}}const XE=t=>(e,n)=>{const r=R.useContext(Jh),l=R.useContext(Qh),u=()=>EU(t,e,r,l);return n?u():op(u)};function CU(t,e,n,r){const l={},u=r(t,{});for(const N in u)l[N]=mh(u[N]);let{initial:g,animate:y}=t;const b=t0(t),x=UE(t);e&&x&&!b&&t.inherit!==!1&&(g===void 0&&(g=e.initial),y===void 0&&(y=e.animate));let S=n?n.initial===!1:!1;S=S||g===!1;const A=S?y:g;if(A&&typeof A!="boolean"&&!e0(A)){const N=Array.isArray(A)?A:[A];for(let I=0;I<N.length;I++){const M=Pp(t,N[I]);if(M){const{transitionEnd:j,transition:U,...z}=M;for(const q in z){let B=z[q];if(Array.isArray(B)){const V=S?B.length-1:0;B=B[V]}B!==null&&(l[q]=B)}for(const q in j)l[q]=j[q]}}}return l}function Up(t,e,n){var u;const{style:r}=t,l={};for(const g in r)(Ti(r[g])||e.style&&Ti(e.style[g])||zE(g,t)||((u=n==null?void 0:n.getValue(g))==null?void 0:u.liveStyle)!==void 0)&&(l[g]=r[g]);return l}const AU={useVisualState:XE({scrapeMotionValuesFromProps:Up,createRenderState:jp})};function WE(t,e,n){const r=Up(t,e,n);for(const l in t)if(Ti(t[l])||Ti(e[l])){const u=Lc.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;r[u]=t[l]}return r}const TU={useVisualState:XE({scrapeMotionValuesFromProps:WE,createRenderState:qE})};function _U(t,e){return function(r,{forwardMotionProps:l}={forwardMotionProps:!1}){const g={...Bp(r)?TU:AU,preloadedFeatures:t,useRender:SU(l),createVisualElement:e,Component:r};return aU(g)}}function xd(t,e,n){const r=t.getProps();return Pp(r,e,n!==void 0?n:r.custom,t)}const _m=t=>Array.isArray(t);function NU(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Tc(n))}function RU(t){return _m(t)?t[t.length-1]||0:t}function OU(t,e){const n=xd(t,e);let{transitionEnd:r={},transition:l={},...u}=n||{};u={...u,...r};for(const g in u){const y=RU(u[g]);NU(t,g,y)}}function IU(t){return!!(Ti(t)&&t.add)}function Nm(t,e){const n=t.getValue("willChange");if(IU(n))return n.add(e);if(!n&&ia.WillChange){const r=new ia.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function KE(t){return t.props[FE]}const MU=t=>t!==null;function DU(t,{repeat:e,repeatType:n="loop"},r){const l=t.filter(MU),u=e&&n!=="loop"&&e%2===1?0:l.length-1;return l[u]}const LU={type:"spring",stiffness:500,damping:25,restSpeed:10},kU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),jU={type:"keyframes",duration:.8},BU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PU=(t,{keyframes:e})=>e.length>2?jU:kc.has(t)?t.startsWith("scale")?kU(e[1]):LU:BU;function UU({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:l,repeat:u,repeatType:g,repeatDelay:y,from:b,elapsed:x,...S}){return!!Object.keys(S).length}const Fp=(t,e,n,r={},l,u)=>g=>{const y=_p(r,t)||{},b=y.delay||r.delay||0;let{elapsed:x=0}=r;x=x-yr(b);const S={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...y,delay:-x,onUpdate:N=>{e.set(N),y.onUpdate&&y.onUpdate(N)},onComplete:()=>{g(),y.onComplete&&y.onComplete()},name:t,motionValue:e,element:u?void 0:l};UU(y)||Object.assign(S,PU(t,S)),S.duration&&(S.duration=yr(S.duration)),S.repeatDelay&&(S.repeatDelay=yr(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let A=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(S.duration=0,S.delay===0&&(A=!0)),(ia.instantAnimations||ia.skipAnimations)&&(A=!0,S.duration=0,S.delay=0),S.allowFlatten=!y.type&&!y.ease,A&&!u&&e.get()!==void 0){const N=DU(S.keyframes,y);if(N!==void 0){pn.update(()=>{S.onUpdate(N),S.onComplete()});return}}return y.isSync?new Cp(S):new bP(S)};function FU({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function ZE(t,e,{delay:n=0,transitionOverride:r,type:l}={}){let{transition:u=t.getDefaultTransition(),transitionEnd:g,...y}=e;r&&(u=r);const b=[],x=l&&t.animationState&&t.animationState.getState()[l];for(const S in y){const A=t.getValue(S,t.latestValues[S]??null),N=y[S];if(N===void 0||x&&FU(x,S))continue;const I={delay:n,..._p(u||{},S)},M=A.get();if(M!==void 0&&!A.isAnimating&&!Array.isArray(N)&&N===M&&!I.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const z=KE(t);if(z){const q=window.MotionHandoffAnimation(z,S,pn);q!==null&&(I.startTime=q,j=!0)}}Nm(t,S),A.start(Fp(S,A,N,t.shouldReduceMotion&&TE.has(S)?{type:!1}:I,t,j));const U=A.animation;U&&b.push(U)}return g&&Promise.all(b).then(()=>{pn.update(()=>{g&&OU(t,g)})}),b}function Rm(t,e,n={}){var b;const r=xd(t,e,n.type==="exit"?(b=t.presenceContext)==null?void 0:b.custom:void 0);let{transition:l=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(l=n.transitionOverride);const u=r?()=>Promise.all(ZE(t,r,n)):()=>Promise.resolve(),g=t.variantChildren&&t.variantChildren.size?(x=0)=>{const{delayChildren:S=0,staggerChildren:A,staggerDirection:N}=l;return VU(t,e,x,S,A,N,n)}:()=>Promise.resolve(),{when:y}=l;if(y){const[x,S]=y==="beforeChildren"?[u,g]:[g,u];return x().then(()=>S())}else return Promise.all([u(),g(n.delay)])}function VU(t,e,n=0,r=0,l=0,u=1,g){const y=[],b=t.variantChildren.size,x=(b-1)*l,S=typeof r=="function",A=S?N=>r(N,b):u===1?(N=0)=>N*l:(N=0)=>x-N*l;return Array.from(t.variantChildren).sort(HU).forEach((N,I)=>{N.notify("AnimationStart",e),y.push(Rm(N,e,{...g,delay:n+(S?0:r)+A(I)}).then(()=>N.notify("AnimationComplete",e)))}),Promise.all(y)}function HU(t,e){return t.sortNodePosition(e)}function zU(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const l=e.map(u=>Rm(t,u,n));r=Promise.all(l)}else if(typeof e=="string")r=Rm(t,e,n);else{const l=typeof e=="function"?xd(t,e,n.custom):e;r=Promise.all(ZE(t,l,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function QE(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const $U=Dp.length;function JE(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?JE(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<$U;n++){const r=Dp[n],l=t.props[r];(md(l)||l===!1)&&(e[r]=l)}return e}const GU=[...Mp].reverse(),qU=Mp.length;function YU(t){return e=>Promise.all(e.map(({animation:n,options:r})=>zU(t,n,r)))}function XU(t){let e=YU(t),n=zw(),r=!0;const l=b=>(x,S)=>{var N;const A=xd(t,S,b==="exit"?(N=t.presenceContext)==null?void 0:N.custom:void 0);if(A){const{transition:I,transitionEnd:M,...j}=A;x={...x,...j,...M}}return x};function u(b){e=b(t)}function g(b){const{props:x}=t,S=JE(t.parent)||{},A=[],N=new Set;let I={},M=1/0;for(let U=0;U<qU;U++){const z=GU[U],q=n[z],B=x[z]!==void 0?x[z]:S[z],V=md(B),H=z===b?q.isActive:null;H===!1&&(M=U);let J=B===S[z]&&B!==x[z]&&V;if(J&&r&&t.manuallyAnimateOnMount&&(J=!1),q.protectedKeys={...I},!q.isActive&&H===null||!B&&!q.prevProp||e0(B)||typeof B=="boolean")continue;const X=WU(q.prevProp,B);let oe=X||z===b&&q.isActive&&!J&&V||U>M&&V,Y=!1;const be=Array.isArray(B)?B:[B];let Ae=be.reduce(l(z),{});H===!1&&(Ae={});const{prevResolvedValues:Ee={}}=q,de={...Ee,...Ae},Oe=le=>{oe=!0,N.has(le)&&(Y=!0,N.delete(le)),q.needsAnimating[le]=!0;const De=t.getValue(le);De&&(De.liveStyle=!1)};for(const le in de){const De=Ae[le],$e=Ee[le];if(I.hasOwnProperty(le))continue;let W=!1;_m(De)&&_m($e)?W=!QE(De,$e):W=De!==$e,W?De!=null?Oe(le):N.add(le):De!==void 0&&N.has(le)?Oe(le):q.protectedKeys[le]=!0}q.prevProp=B,q.prevResolvedValues=Ae,q.isActive&&(I={...I,...Ae}),r&&t.blockInitialAnimation&&(oe=!1),oe&&(!(J&&X)||Y)&&A.push(...be.map(le=>({animation:le,options:{type:z}})))}if(N.size){const U={};if(typeof x.initial!="boolean"){const z=xd(t,Array.isArray(x.initial)?x.initial[0]:x.initial);z&&z.transition&&(U.transition=z.transition)}N.forEach(z=>{const q=t.getBaseTarget(z),B=t.getValue(z);B&&(B.liveStyle=!0),U[z]=q??null}),A.push({animation:U})}let j=!!A.length;return r&&(x.initial===!1||x.initial===x.animate)&&!t.manuallyAnimateOnMount&&(j=!1),r=!1,j?e(A):Promise.resolve()}function y(b,x){var A;if(n[b].isActive===x)return Promise.resolve();(A=t.variantChildren)==null||A.forEach(N=>{var I;return(I=N.animationState)==null?void 0:I.setActive(b,x)}),n[b].isActive=x;const S=g(b);for(const N in n)n[N].protectedKeys={};return S}return{animateChanges:g,setActive:y,setAnimateFunction:u,getState:()=>n,reset:()=>{n=zw(),r=!0}}}function WU(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!QE(e,t):!1}function jo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zw(){return{animate:jo(!0),whileInView:jo(),whileHover:jo(),whileTap:jo(),whileDrag:jo(),whileFocus:jo(),exit:jo()}}class co{constructor(e){this.isMounted=!1,this.node=e}update(){}}class KU extends co{constructor(e){super(e),e.animationState||(e.animationState=XU(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();e0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let ZU=0;class QU extends co{constructor(){super(...arguments),this.id=ZU++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const l=this.node.animationState.setActive("exit",!e);n&&!e&&l.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const JU={animation:{Feature:KU},exit:{Feature:QU}};function yd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Dd(t){return{point:{x:t.pageX,y:t.pageY}}}const eF=t=>e=>Op(e)&&t(e,Dd(e));function sd(t,e,n,r){return yd(t,e,eF(n),r)}function eC({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function tF({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function nF(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const tC=1e-4,iF=1-tC,sF=1+tC,nC=.01,rF=0-nC,aF=0+nC;function Li(t){return t.max-t.min}function oF(t,e,n){return Math.abs(t-e)<=n}function $w(t,e,n,r=.5){t.origin=r,t.originPoint=wn(e.min,e.max,t.origin),t.scale=Li(n)/Li(e),t.translate=wn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=iF&&t.scale<=sF||isNaN(t.scale))&&(t.scale=1),(t.translate>=rF&&t.translate<=aF||isNaN(t.translate))&&(t.translate=0)}function rd(t,e,n,r){$w(t.x,e.x,n.x,r?r.originX:void 0),$w(t.y,e.y,n.y,r?r.originY:void 0)}function Gw(t,e,n){t.min=n.min+e.min,t.max=t.min+Li(e)}function lF(t,e,n){Gw(t.x,e.x,n.x),Gw(t.y,e.y,n.y)}function qw(t,e,n){t.min=e.min-n.min,t.max=t.min+Li(e)}function ad(t,e,n){qw(t.x,e.x,n.x),qw(t.y,e.y,n.y)}const Yw=()=>({translate:0,scale:1,origin:0,originPoint:0}),cc=()=>({x:Yw(),y:Yw()}),Xw=()=>({min:0,max:0}),jn=()=>({x:Xw(),y:Xw()});function vs(t){return[t("x"),t("y")]}function Ag(t){return t===void 0||t===1}function Om({scale:t,scaleX:e,scaleY:n}){return!Ag(t)||!Ag(e)||!Ag(n)}function Uo(t){return Om(t)||iC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function iC(t){return Ww(t.x)||Ww(t.y)}function Ww(t){return t&&t!=="0%"}function kh(t,e,n){const r=t-n,l=e*r;return n+l}function Kw(t,e,n,r,l){return l!==void 0&&(t=kh(t,l,r)),kh(t,n,r)+e}function Im(t,e=0,n=1,r,l){t.min=Kw(t.min,e,n,r,l),t.max=Kw(t.max,e,n,r,l)}function sC(t,{x:e,y:n}){Im(t.x,e.translate,e.scale,e.originPoint),Im(t.y,n.translate,n.scale,n.originPoint)}const Zw=.999999999999,Qw=1.0000000000001;function cF(t,e,n,r=!1){const l=n.length;if(!l)return;e.x=e.y=1;let u,g;for(let y=0;y<l;y++){u=n[y],g=u.projectionDelta;const{visualElement:b}=u.options;b&&b.props.style&&b.props.style.display==="contents"||(r&&u.options.layoutScroll&&u.scroll&&u!==u.root&&dc(t,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),g&&(e.x*=g.x.scale,e.y*=g.y.scale,sC(t,g)),r&&Uo(u.latestValues)&&dc(t,u.latestValues))}e.x<Qw&&e.x>Zw&&(e.x=1),e.y<Qw&&e.y>Zw&&(e.y=1)}function uc(t,e){t.min=t.min+e,t.max=t.max+e}function Jw(t,e,n,r,l=.5){const u=wn(t.min,t.max,l);Im(t,e,n,u,r)}function dc(t,e){Jw(t.x,e.x,e.scaleX,e.scale,e.originX),Jw(t.y,e.y,e.scaleY,e.scale,e.originY)}function rC(t,e){return eC(nF(t.getBoundingClientRect(),e))}function uF(t,e,n){const r=rC(t,n),{scroll:l}=e;return l&&(uc(r.x,l.offset.x),uc(r.y,l.offset.y)),r}const aC=({current:t})=>t?t.ownerDocument.defaultView:null,ev=(t,e)=>Math.abs(t-e);function dF(t,e){const n=ev(t.x,e.x),r=ev(t.y,e.y);return Math.sqrt(n**2+r**2)}class oC{constructor(e,n,{transformPagePoint:r,contextWindow:l=window,dragSnapToOrigin:u=!1,distanceThreshold:g=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=_g(this.lastMoveEventInfo,this.history),I=this.startEvent!==null,M=dF(N.offset,{x:0,y:0})>=this.distanceThreshold;if(!I&&!M)return;const{point:j}=N,{timestamp:U}=gi;this.history.push({...j,timestamp:U});const{onStart:z,onMove:q}=this.handlers;I||(z&&z(this.lastMoveEvent,N),this.startEvent=this.lastMoveEvent),q&&q(this.lastMoveEvent,N)},this.handlePointerMove=(N,I)=>{this.lastMoveEvent=N,this.lastMoveEventInfo=Tg(I,this.transformPagePoint),pn.update(this.updatePoint,!0)},this.handlePointerUp=(N,I)=>{this.end();const{onEnd:M,onSessionEnd:j,resumeAnimation:U}=this.handlers;if(this.dragSnapToOrigin&&U&&U(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const z=_g(N.type==="pointercancel"?this.lastMoveEventInfo:Tg(I,this.transformPagePoint),this.history);this.startEvent&&M&&M(N,z),j&&j(N,z)},!Op(e))return;this.dragSnapToOrigin=u,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=g,this.contextWindow=l||window;const y=Dd(e),b=Tg(y,this.transformPagePoint),{point:x}=b,{timestamp:S}=gi;this.history=[{...x,timestamp:S}];const{onSessionStart:A}=n;A&&A(e,_g(b,this.history)),this.removeListeners=Od(sd(this.contextWindow,"pointermove",this.handlePointerMove),sd(this.contextWindow,"pointerup",this.handlePointerUp),sd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ro(this.updatePoint)}}function Tg(t,e){return e?{point:e(t.point)}:t}function tv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function _g({point:t},e){return{point:t,delta:tv(t,lC(e)),offset:tv(t,fF(e)),velocity:hF(e,.1)}}function fF(t){return t[0]}function lC(t){return t[t.length-1]}function hF(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const l=lC(t);for(;n>=0&&(r=t[n],!(l.timestamp-r.timestamp>yr(e)));)n--;if(!r)return{x:0,y:0};const u=br(l.timestamp-r.timestamp);if(u===0)return{x:0,y:0};const g={x:(l.x-r.x)/u,y:(l.y-r.y)/u};return g.x===1/0&&(g.x=0),g.y===1/0&&(g.y=0),g}function gF(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?wn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?wn(n,t,r.max):Math.min(t,n)),t}function nv(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function mF(t,{top:e,left:n,bottom:r,right:l}){return{x:nv(t.x,n,l),y:nv(t.y,e,r)}}function iv(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function pF(t,e){return{x:iv(t.x,e.x),y:iv(t.y,e.y)}}function xF(t,e){let n=.5;const r=Li(t),l=Li(e);return l>r?n=fd(e.min,e.max-r,t.min):r>l&&(n=fd(t.min,t.max-l,e.min)),na(0,1,n)}function yF(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Mm=.35;function bF(t=Mm){return t===!1?t=0:t===!0&&(t=Mm),{x:sv(t,"left","right"),y:sv(t,"top","bottom")}}function sv(t,e,n){return{min:rv(t,e),max:rv(t,n)}}function rv(t,e){return typeof t=="number"?t:t[e]||0}const wF=new WeakMap;class vF{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const u=A=>{const{dragSnapToOrigin:N}=this.getProps();N?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Dd(A).point)},g=(A,N)=>{const{drag:I,dragPropagation:M,onDragStart:j}=this.getProps();if(I&&!M&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kP(I),!this.openDragLock))return;this.latestPointerEvent=A,this.latestPanInfo=N,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vs(z=>{let q=this.getAxisMotionValue(z).get()||0;if(wr.test(q)){const{projection:B}=this.visualElement;if(B&&B.layout){const V=B.layout.layoutBox[z];V&&(q=Li(V)*(parseFloat(q)/100))}}this.originPoint[z]=q}),j&&pn.postRender(()=>j(A,N)),Nm(this.visualElement,"transform");const{animationState:U}=this.visualElement;U&&U.setActive("whileDrag",!0)},y=(A,N)=>{this.latestPointerEvent=A,this.latestPanInfo=N;const{dragPropagation:I,dragDirectionLock:M,onDirectionLock:j,onDrag:U}=this.getProps();if(!I&&!this.openDragLock)return;const{offset:z}=N;if(M&&this.currentDirection===null){this.currentDirection=SF(z),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",N.point,z),this.updateAxis("y",N.point,z),this.visualElement.render(),U&&U(A,N)},b=(A,N)=>{this.latestPointerEvent=A,this.latestPanInfo=N,this.stop(A,N),this.latestPointerEvent=null,this.latestPanInfo=null},x=()=>vs(A=>{var N;return this.getAnimationState(A)==="paused"&&((N=this.getAxisMotionValue(A).animation)==null?void 0:N.play())}),{dragSnapToOrigin:S}=this.getProps();this.panSession=new oC(e,{onSessionStart:u,onStart:g,onMove:y,onSessionEnd:b,resumeAnimation:x},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:S,distanceThreshold:r,contextWindow:aC(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,l=n||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!l||!r)return;const{velocity:g}=l;this.startAnimation(g);const{onDragEnd:y}=this.getProps();y&&pn.postRender(()=>y(r,l))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:l}=this.getProps();if(!r||!lh(e,l,this.currentDirection))return;const u=this.getAxisMotionValue(e);let g=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(g=gF(g,this.constraints[e],this.elastic[e])),u.set(g)}resolveConstraints(){var u;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(u=this.visualElement.projection)==null?void 0:u.layout,l=this.constraints;e&&lc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=mF(r.layoutBox,e):this.constraints=!1,this.elastic=bF(n),l!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&vs(g=>{this.constraints!==!1&&this.getAxisMotionValue(g)&&(this.constraints[g]=yF(r.layoutBox[g],this.constraints[g]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!lc(e))return!1;const r=e.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const u=uF(r,l.root,this.visualElement.getTransformPagePoint());let g=pF(l.layout.layoutBox,u);if(n){const y=n(tF(g));this.hasMutatedConstraints=!!y,y&&(g=eC(y))}return g}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:l,dragTransition:u,dragSnapToOrigin:g,onDragTransitionEnd:y}=this.getProps(),b=this.constraints||{},x=vs(S=>{if(!lh(S,n,this.currentDirection))return;let A=b&&b[S]||{};g&&(A={min:0,max:0});const N=l?200:1e6,I=l?40:1e7,M={type:"inertia",velocity:r?e[S]:0,bounceStiffness:N,bounceDamping:I,timeConstant:750,restDelta:1,restSpeed:10,...u,...A};return this.startAxisValueAnimation(S,M)});return Promise.all(x).then(y)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Nm(this.visualElement,e),r.start(Fp(e,r,0,n,this.visualElement,!1))}stopAnimation(){vs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vs(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),l=r[n];return l||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){vs(n=>{const{drag:r}=this.getProps();if(!lh(n,r,this.currentDirection))return;const{projection:l}=this.visualElement,u=this.getAxisMotionValue(n);if(l&&l.layout){const{min:g,max:y}=l.layout.layoutBox[n];u.set(e[n]-wn(g,y,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!lc(n)||!r||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};vs(g=>{const y=this.getAxisMotionValue(g);if(y&&this.constraints!==!1){const b=y.get();l[g]=xF({min:b,max:b},this.constraints[g])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),vs(g=>{if(!lh(g,e,null))return;const y=this.getAxisMotionValue(g),{min:b,max:x}=this.constraints[g];y.set(wn(b,x,l[g]))})}addListeners(){if(!this.visualElement.current)return;wF.set(this.visualElement,this);const e=this.visualElement.current,n=sd(e,"pointerdown",b=>{const{drag:x,dragListener:S=!0}=this.getProps();x&&S&&this.start(b)}),r=()=>{const{dragConstraints:b}=this.getProps();lc(b)&&b.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,u=l.addEventListener("measure",r);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),pn.read(r);const g=yd(window,"resize",()=>this.scalePositionWithinConstraints()),y=l.addEventListener("didUpdate",({delta:b,hasLayoutChanged:x})=>{this.isDragging&&x&&(vs(S=>{const A=this.getAxisMotionValue(S);A&&(this.originPoint[S]+=b[S].translate,A.set(A.get()+b[S].translate))}),this.visualElement.render())});return()=>{g(),n(),u(),y&&y()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:l=!1,dragConstraints:u=!1,dragElastic:g=Mm,dragMomentum:y=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:l,dragConstraints:u,dragElastic:g,dragMomentum:y}}}function lh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function SF(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class EF extends co{constructor(e){super(e),this.removeGroupControls=Cs,this.removeListeners=Cs,this.controls=new vF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Cs}unmount(){this.removeGroupControls(),this.removeListeners()}}const av=t=>(e,n)=>{t&&pn.postRender(()=>t(e,n))};class CF extends co{constructor(){super(...arguments),this.removePointerDownListener=Cs}onPointerDown(e){this.session=new oC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:l}=this.node.getProps();return{onSessionStart:av(e),onStart:av(n),onMove:r,onEnd:(u,g)=>{delete this.session,l&&pn.postRender(()=>l(u,g))}}}mount(){this.removePointerDownListener=sd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ph={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ov(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Pu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ut.test(t))t=parseFloat(t);else return t;const n=ov(t,e.target.x),r=ov(t,e.target.y);return`${n}% ${r}%`}},AF={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,l=ao.parse(t);if(l.length>5)return r;const u=ao.createTransformer(t),g=typeof l[0]!="number"?1:0,y=n.x.scale*e.x,b=n.y.scale*e.y;l[0+g]/=y,l[1+g]/=b;const x=wn(y,b,.5);return typeof l[2+g]=="number"&&(l[2+g]/=x),typeof l[3+g]=="number"&&(l[3+g]/=x),u(l)}};let lv=!1;class TF extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:l}=this.props,{projection:u}=e;uU(_F),u&&(n.group&&n.group.add(u),r&&r.register&&l&&r.register(u),lv&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),ph.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:l,isPresent:u}=this.props,{projection:g}=r;return g&&(g.isPresent=u,lv=!0,l||e.layoutDependency!==n||n===void 0||e.isPresent!==u?g.willUpdate():this.safeToRemove(),e.isPresent!==u&&(u?g.promote():g.relegate()||pn.postRender(()=>{const y=g.getStack();(!y||!y.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Rp.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:l}=e;l&&(l.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(l),r&&r.deregister&&r.deregister(l))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function cC(t){const[e,n]=jE(),r=R.useContext(ap);return E.jsx(TF,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(VE),isPresent:e,safeToRemove:n})}const _F={borderRadius:{...Pu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pu,borderTopRightRadius:Pu,borderBottomLeftRadius:Pu,borderBottomRightRadius:Pu,boxShadow:AF};function NF(t,e,n){const r=Ti(t)?t:Tc(t);return r.start(Fp("",r,e,n)),r.animation}const RF=(t,e)=>t.depth-e.depth;class OF{constructor(){this.children=[],this.isDirty=!1}add(e){cp(this.children,e),this.isDirty=!0}remove(e){up(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(RF),this.isDirty=!1,this.children.forEach(e)}}function IF(t,e){const n=Yi.now(),r=({timestamp:l})=>{const u=l-n;u>=e&&(ro(r),t(u-e))};return pn.setup(r,!0),()=>ro(r)}const uC=["TopLeft","TopRight","BottomLeft","BottomRight"],MF=uC.length,cv=t=>typeof t=="string"?parseFloat(t):t,uv=t=>typeof t=="number"||ut.test(t);function DF(t,e,n,r,l,u){l?(t.opacity=wn(0,n.opacity??1,LF(r)),t.opacityExit=wn(e.opacity??1,0,kF(r))):u&&(t.opacity=wn(e.opacity??1,n.opacity??1,r));for(let g=0;g<MF;g++){const y=`border${uC[g]}Radius`;let b=dv(e,y),x=dv(n,y);if(b===void 0&&x===void 0)continue;b||(b=0),x||(x=0),b===0||x===0||uv(b)===uv(x)?(t[y]=Math.max(wn(cv(b),cv(x),r),0),(wr.test(x)||wr.test(b))&&(t[y]+="%")):t[y]=x}(e.rotate||n.rotate)&&(t.rotate=wn(e.rotate||0,n.rotate||0,r))}function dv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const LF=dC(0,.5,iE),kF=dC(.5,.95,Cs);function dC(t,e,n){return r=>r<t?0:r>e?1:n(fd(t,e,r))}function fv(t,e){t.min=e.min,t.max=e.max}function ws(t,e){fv(t.x,e.x),fv(t.y,e.y)}function hv(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function gv(t,e,n,r,l){return t-=e,t=kh(t,1/n,r),l!==void 0&&(t=kh(t,1/l,r)),t}function jF(t,e=0,n=1,r=.5,l,u=t,g=t){if(wr.test(e)&&(e=parseFloat(e),e=wn(g.min,g.max,e/100)-g.min),typeof e!="number")return;let y=wn(u.min,u.max,r);t===u&&(y-=e),t.min=gv(t.min,e,n,y,l),t.max=gv(t.max,e,n,y,l)}function mv(t,e,[n,r,l],u,g){jF(t,e[n],e[r],e[l],e.scale,u,g)}const BF=["x","scaleX","originX"],PF=["y","scaleY","originY"];function pv(t,e,n,r){mv(t.x,e,BF,n?n.x:void 0,r?r.x:void 0),mv(t.y,e,PF,n?n.y:void 0,r?r.y:void 0)}function xv(t){return t.translate===0&&t.scale===1}function fC(t){return xv(t.x)&&xv(t.y)}function yv(t,e){return t.min===e.min&&t.max===e.max}function UF(t,e){return yv(t.x,e.x)&&yv(t.y,e.y)}function bv(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function hC(t,e){return bv(t.x,e.x)&&bv(t.y,e.y)}function wv(t){return Li(t.x)/Li(t.y)}function vv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class FF{constructor(){this.members=[]}add(e){cp(this.members,e),e.scheduleRender()}remove(e){if(up(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(l=>e===l);if(n===0)return!1;let r;for(let l=n;l>=0;l--){const u=this.members[l];if(u.isPresent!==!1){r=u;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:l}=e.options;l===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function VF(t,e,n){let r="";const l=t.x.translate/e.x,u=t.y.translate/e.y,g=(n==null?void 0:n.z)||0;if((l||u||g)&&(r=`translate3d(${l}px, ${u}px, ${g}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:x,rotate:S,rotateX:A,rotateY:N,skewX:I,skewY:M}=n;x&&(r=`perspective(${x}px) ${r}`),S&&(r+=`rotate(${S}deg) `),A&&(r+=`rotateX(${A}deg) `),N&&(r+=`rotateY(${N}deg) `),I&&(r+=`skewX(${I}deg) `),M&&(r+=`skewY(${M}deg) `)}const y=t.x.scale*e.x,b=t.y.scale*e.y;return(y!==1||b!==1)&&(r+=`scale(${y}, ${b})`),r||"none"}const Ng=["","X","Y","Z"],HF=1e3;let zF=0;function Rg(t,e,n,r){const{latestValues:l}=e;l[t]&&(n[t]=l[t],e.setStaticValue(t,0),r&&(r[t]=0))}function gC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=KE(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:l,layoutId:u}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",pn,!(l||u))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&gC(r)}function mC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:l}){return class{constructor(g={},y=e==null?void 0:e()){this.id=zF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(qF),this.nodes.forEach(KF),this.nodes.forEach(ZF),this.nodes.forEach(YF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=g,this.root=y?y.root||y:this,this.path=y?[...y.path,y]:[],this.parent=y,this.depth=y?y.depth+1:0;for(let b=0;b<this.path.length;b++)this.path[b].shouldResetTransform=!0;this.root===this&&(this.nodes=new OF)}addEventListener(g,y){return this.eventHandlers.has(g)||this.eventHandlers.set(g,new hp),this.eventHandlers.get(g).add(y)}notifyListeners(g,...y){const b=this.eventHandlers.get(g);b&&b.notify(...y)}hasListeners(g){return this.eventHandlers.has(g)}mount(g){if(this.instance)return;this.isSVG=kE(g)&&!VP(g),this.instance=g;const{layoutId:y,layout:b,visualElement:x}=this.options;if(x&&!x.current&&x.mount(g),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(b||y)&&(this.isLayoutDirty=!0),t){let S,A=0;const N=()=>this.root.updateBlockedByResize=!1;pn.read(()=>{A=window.innerWidth}),t(g,()=>{const I=window.innerWidth;I!==A&&(A=I,this.root.updateBlockedByResize=!0,S&&S(),S=IF(N,250),ph.hasAnimatedSinceResize&&(ph.hasAnimatedSinceResize=!1,this.nodes.forEach(Cv)))})}y&&this.root.registerSharedNode(y,this),this.options.animate!==!1&&x&&(y||b)&&this.addEventListener("didUpdate",({delta:S,hasLayoutChanged:A,hasRelativeLayoutChanged:N,layout:I})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||x.getDefaultTransition()||nV,{onLayoutAnimationStart:j,onLayoutAnimationComplete:U}=x.getProps(),z=!this.targetLayout||!hC(this.targetLayout,I),q=!A&&N;if(this.options.layoutRoot||this.resumeFrom||q||A&&(z||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const B={..._p(M,"layout"),onPlay:j,onComplete:U};(x.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B),this.setAnimationOrigin(S,q)}else A||Cv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=I})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const g=this.getStack();g&&g.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ro(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(QF),this.animationId++)}getTransformTemplate(){const{visualElement:g}=this.options;return g&&g.getProps().transformTemplate}willUpdate(g=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const A=this.path[S];A.shouldResetTransform=!0,A.updateScroll("snapshot"),A.options.layoutRoot&&A.willUpdate(!1)}const{layoutId:y,layout:b}=this.options;if(y===void 0&&!b)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),g&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Sv);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ev);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(WF),this.nodes.forEach($F),this.nodes.forEach(GF)):this.nodes.forEach(Ev),this.clearAllSnapshots();const y=Yi.now();gi.delta=na(0,1e3/60,y-gi.timestamp),gi.timestamp=y,gi.isProcessing=!0,bg.update.process(gi),bg.preRender.process(gi),bg.render.process(gi),gi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Rp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(XF),this.sharedNodes.forEach(JF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,pn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){pn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Li(this.snapshot.measuredBox.x)&&!Li(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let b=0;b<this.path.length;b++)this.path[b].updateScroll();const g=this.layout;this.layout=this.measure(!1),this.layoutCorrected=jn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:y}=this.options;y&&y.notify("LayoutMeasure",this.layout.layoutBox,g?g.layoutBox:void 0)}updateScroll(g="measure"){let y=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===g&&(y=!1),y&&this.instance){const b=r(this.instance);this.scroll={animationId:this.root.animationId,phase:g,isRoot:b,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:b}}}resetTransform(){if(!l)return;const g=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,y=this.projectionDelta&&!fC(this.projectionDelta),b=this.getTransformTemplate(),x=b?b(this.latestValues,""):void 0,S=x!==this.prevTransformTemplateValue;g&&this.instance&&(y||Uo(this.latestValues)||S)&&(l(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(g=!0){const y=this.measurePageBox();let b=this.removeElementScroll(y);return g&&(b=this.removeTransform(b)),iV(b),{animationId:this.root.animationId,measuredBox:y,layoutBox:b,latestValues:{},source:this.id}}measurePageBox(){var x;const{visualElement:g}=this.options;if(!g)return jn();const y=g.measureViewportBox();if(!(((x=this.scroll)==null?void 0:x.wasRoot)||this.path.some(sV))){const{scroll:S}=this.root;S&&(uc(y.x,S.offset.x),uc(y.y,S.offset.y))}return y}removeElementScroll(g){var b;const y=jn();if(ws(y,g),(b=this.scroll)!=null&&b.wasRoot)return y;for(let x=0;x<this.path.length;x++){const S=this.path[x],{scroll:A,options:N}=S;S!==this.root&&A&&N.layoutScroll&&(A.wasRoot&&ws(y,g),uc(y.x,A.offset.x),uc(y.y,A.offset.y))}return y}applyTransform(g,y=!1){const b=jn();ws(b,g);for(let x=0;x<this.path.length;x++){const S=this.path[x];!y&&S.options.layoutScroll&&S.scroll&&S!==S.root&&dc(b,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),Uo(S.latestValues)&&dc(b,S.latestValues)}return Uo(this.latestValues)&&dc(b,this.latestValues),b}removeTransform(g){const y=jn();ws(y,g);for(let b=0;b<this.path.length;b++){const x=this.path[b];if(!x.instance||!Uo(x.latestValues))continue;Om(x.latestValues)&&x.updateSnapshot();const S=jn(),A=x.measurePageBox();ws(S,A),pv(y,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,S)}return Uo(this.latestValues)&&pv(y,this.latestValues),y}setTargetDelta(g){this.targetDelta=g,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(g){this.options={...this.options,...g,crossfade:g.crossfade!==void 0?g.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(g=!1){var N;const y=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=y.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=y.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=y.isSharedProjectionDirty);const b=!!this.resumingFrom||this!==y;if(!(g||b&&this.isSharedProjectionDirty||this.isProjectionDirty||(N=this.parent)!=null&&N.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:A}=this.options;if(!(!this.layout||!(S||A))){if(this.resolvedRelativeTargetAt=gi.timestamp,!this.targetDelta&&!this.relativeTarget){const I=this.getClosestProjectingParent();I&&I.layout&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jn(),this.relativeTargetOrigin=jn(),ad(this.relativeTargetOrigin,this.layout.layoutBox,I.layout.layoutBox),ws(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=jn(),this.targetWithTransforms=jn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),lF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ws(this.target,this.layout.layoutBox),sC(this.target,this.targetDelta)):ws(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const I=this.getClosestProjectingParent();I&&!!I.resumingFrom==!!this.resumingFrom&&!I.options.layoutScroll&&I.target&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jn(),this.relativeTargetOrigin=jn(),ad(this.relativeTargetOrigin,this.target,I.target),ws(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Om(this.parent.latestValues)||iC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var M;const g=this.getLead(),y=!!this.resumingFrom||this!==g;let b=!0;if((this.isProjectionDirty||(M=this.parent)!=null&&M.isProjectionDirty)&&(b=!1),y&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(b=!1),this.resolvedRelativeTargetAt===gi.timestamp&&(b=!1),b)return;const{layout:x,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||S))return;ws(this.layoutCorrected,this.layout.layoutBox);const A=this.treeScale.x,N=this.treeScale.y;cF(this.layoutCorrected,this.treeScale,this.path,y),g.layout&&!g.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(g.target=g.layout.layoutBox,g.targetWithTransforms=jn());const{target:I}=g;if(!I){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hv(this.prevProjectionDelta.x,this.projectionDelta.x),hv(this.prevProjectionDelta.y,this.projectionDelta.y)),rd(this.projectionDelta,this.layoutCorrected,I,this.latestValues),(this.treeScale.x!==A||this.treeScale.y!==N||!vv(this.projectionDelta.x,this.prevProjectionDelta.x)||!vv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",I))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(g=!0){var y;if((y=this.options.visualElement)==null||y.scheduleRender(),g){const b=this.getStack();b&&b.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=cc(),this.projectionDelta=cc(),this.projectionDeltaWithTransform=cc()}setAnimationOrigin(g,y=!1){const b=this.snapshot,x=b?b.latestValues:{},S={...this.latestValues},A=cc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!y;const N=jn(),I=b?b.source:void 0,M=this.layout?this.layout.source:void 0,j=I!==M,U=this.getStack(),z=!U||U.members.length<=1,q=!!(j&&!z&&this.options.crossfade===!0&&!this.path.some(tV));this.animationProgress=0;let B;this.mixTargetDelta=V=>{const H=V/1e3;Av(A.x,g.x,H),Av(A.y,g.y,H),this.setTargetDelta(A),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ad(N,this.layout.layoutBox,this.relativeParent.layout.layoutBox),eV(this.relativeTarget,this.relativeTargetOrigin,N,H),B&&UF(this.relativeTarget,B)&&(this.isProjectionDirty=!1),B||(B=jn()),ws(B,this.relativeTarget)),j&&(this.animationValues=S,DF(S,x,this.latestValues,H,q,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(g){var y,b,x;this.notifyListeners("animationStart"),(y=this.currentAnimation)==null||y.stop(),(x=(b=this.resumingFrom)==null?void 0:b.currentAnimation)==null||x.stop(),this.pendingAnimation&&(ro(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pn.update(()=>{ph.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Tc(0)),this.currentAnimation=NF(this.motionValue,[0,1e3],{...g,velocity:0,isSync:!0,onUpdate:S=>{this.mixTargetDelta(S),g.onUpdate&&g.onUpdate(S)},onStop:()=>{},onComplete:()=>{g.onComplete&&g.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const g=this.getStack();g&&g.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(HF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const g=this.getLead();let{targetWithTransforms:y,target:b,layout:x,latestValues:S}=g;if(!(!y||!b||!x)){if(this!==g&&this.layout&&x&&pC(this.options.animationType,this.layout.layoutBox,x.layoutBox)){b=this.target||jn();const A=Li(this.layout.layoutBox.x);b.x.min=g.target.x.min,b.x.max=b.x.min+A;const N=Li(this.layout.layoutBox.y);b.y.min=g.target.y.min,b.y.max=b.y.min+N}ws(y,b),dc(y,S),rd(this.projectionDeltaWithTransform,this.layoutCorrected,y,S)}}registerSharedNode(g,y){this.sharedNodes.has(g)||this.sharedNodes.set(g,new FF),this.sharedNodes.get(g).add(y);const x=y.options.initialPromotionConfig;y.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(y):void 0})}isLead(){const g=this.getStack();return g?g.lead===this:!0}getLead(){var y;const{layoutId:g}=this.options;return g?((y=this.getStack())==null?void 0:y.lead)||this:this}getPrevLead(){var y;const{layoutId:g}=this.options;return g?(y=this.getStack())==null?void 0:y.prevLead:void 0}getStack(){const{layoutId:g}=this.options;if(g)return this.root.sharedNodes.get(g)}promote({needsReset:g,transition:y,preserveFollowOpacity:b}={}){const x=this.getStack();x&&x.promote(this,b),g&&(this.projectionDelta=void 0,this.needsReset=!0),y&&this.setOptions({transition:y})}relegate(){const g=this.getStack();return g?g.relegate(this):!1}resetSkewAndRotation(){const{visualElement:g}=this.options;if(!g)return;let y=!1;const{latestValues:b}=g;if((b.z||b.rotate||b.rotateX||b.rotateY||b.rotateZ||b.skewX||b.skewY)&&(y=!0),!y)return;const x={};b.z&&Rg("z",g,x,this.animationValues);for(let S=0;S<Ng.length;S++)Rg(`rotate${Ng[S]}`,g,x,this.animationValues),Rg(`skew${Ng[S]}`,g,x,this.animationValues);g.render();for(const S in x)g.setStaticValue(S,x[S]),this.animationValues&&(this.animationValues[S]=x[S]);g.scheduleRender()}applyProjectionStyles(g,y){if(!this.instance||this.isSVG)return;if(!this.isVisible){g.visibility="hidden";return}const b=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,g.visibility="",g.opacity="",g.pointerEvents=mh(y==null?void 0:y.pointerEvents)||"",g.transform=b?b(this.latestValues,""):"none";return}const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=mh(y==null?void 0:y.pointerEvents)||""),this.hasProjected&&!Uo(this.latestValues)&&(g.transform=b?b({},""):"none",this.hasProjected=!1);return}g.visibility="";const S=x.animationValues||x.latestValues;this.applyTransformsToTarget();let A=VF(this.projectionDeltaWithTransform,this.treeScale,S);b&&(A=b(S,A)),g.transform=A;const{x:N,y:I}=this.projectionDelta;g.transformOrigin=`${N.origin*100}% ${I.origin*100}% 0`,x.animationValues?g.opacity=x===this?S.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:g.opacity=x===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const M in pd){if(S[M]===void 0)continue;const{correct:j,applyTo:U,isCSSVariable:z}=pd[M],q=A==="none"?S[M]:j(S[M],x);if(U){const B=U.length;for(let V=0;V<B;V++)g[U[V]]=q}else z?this.options.visualElement.renderState.vars[M]=q:g[M]=q}this.options.layoutId&&(g.pointerEvents=x===this?mh(y==null?void 0:y.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(g=>{var y;return(y=g.currentAnimation)==null?void 0:y.stop()}),this.root.nodes.forEach(Sv),this.root.sharedNodes.clear()}}}function $F(t){t.updateLayout()}function GF(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:l}=t.layout,{animationType:u}=t.options,g=e.source!==t.layout.source;u==="size"?vs(A=>{const N=g?e.measuredBox[A]:e.layoutBox[A],I=Li(N);N.min=r[A].min,N.max=N.min+I}):pC(u,e.layoutBox,r)&&vs(A=>{const N=g?e.measuredBox[A]:e.layoutBox[A],I=Li(r[A]);N.max=N.min+I,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[A].max=t.relativeTarget[A].min+I)});const y=cc();rd(y,r,e.layoutBox);const b=cc();g?rd(b,t.applyTransform(l,!0),e.measuredBox):rd(b,r,e.layoutBox);const x=!fC(y);let S=!1;if(!t.resumeFrom){const A=t.getClosestProjectingParent();if(A&&!A.resumeFrom){const{snapshot:N,layout:I}=A;if(N&&I){const M=jn();ad(M,e.layoutBox,N.layoutBox);const j=jn();ad(j,r,I.layoutBox),hC(M,j)||(S=!0),A.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=M,t.relativeParent=A)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:b,layoutDelta:y,hasLayoutChanged:x,hasRelativeLayoutChanged:S})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function qF(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function YF(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function XF(t){t.clearSnapshot()}function Sv(t){t.clearMeasurements()}function Ev(t){t.isLayoutDirty=!1}function WF(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Cv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function KF(t){t.resolveTargetDelta()}function ZF(t){t.calcProjection()}function QF(t){t.resetSkewAndRotation()}function JF(t){t.removeLeadSnapshot()}function Av(t,e,n){t.translate=wn(e.translate,0,n),t.scale=wn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Tv(t,e,n,r){t.min=wn(e.min,n.min,r),t.max=wn(e.max,n.max,r)}function eV(t,e,n,r){Tv(t.x,e.x,n.x,r),Tv(t.y,e.y,n.y,r)}function tV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const nV={duration:.45,ease:[.4,0,.1,1]},_v=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Nv=_v("applewebkit/")&&!_v("chrome/")?Math.round:Cs;function Rv(t){t.min=Nv(t.min),t.max=Nv(t.max)}function iV(t){Rv(t.x),Rv(t.y)}function pC(t,e,n){return t==="position"||t==="preserve-aspect"&&!oF(wv(e),wv(n),.2)}function sV(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const rV=mC({attachResizeListener:(t,e)=>yd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Og={current:void 0},xC=mC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Og.current){const t=new rV({});t.mount(window),t.setOptions({layoutScroll:!0}),Og.current=t}return Og.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),aV={pan:{Feature:CF},drag:{Feature:EF,ProjectionNode:xC,MeasureLayout:cC}};function Ov(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const l="onHover"+n,u=r[l];u&&pn.postRender(()=>u(e,Dd(e)))}class oV extends co{mount(){const{current:e}=this.node;e&&(this.unmount=jP(e,(n,r)=>(Ov(this.node,r,"Start"),l=>Ov(this.node,l,"End"))))}unmount(){}}class lV extends co{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Od(yd(this.node.current,"focus",()=>this.onFocus()),yd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Iv(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const l="onTap"+(n==="End"?"":n),u=r[l];u&&pn.postRender(()=>u(e,Dd(e)))}class cV extends co{mount(){const{current:e}=this.node;e&&(this.unmount=FP(e,(n,r)=>(Iv(this.node,r,"Start"),(l,{success:u})=>Iv(this.node,l,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Dm=new WeakMap,Ig=new WeakMap,uV=t=>{const e=Dm.get(t.target);e&&e(t)},dV=t=>{t.forEach(uV)};function fV({root:t,...e}){const n=t||document;Ig.has(n)||Ig.set(n,{});const r=Ig.get(n),l=JSON.stringify(e);return r[l]||(r[l]=new IntersectionObserver(dV,{root:t,...e})),r[l]}function hV(t,e,n){const r=fV(e);return Dm.set(t,n),r.observe(t),()=>{Dm.delete(t),r.unobserve(t)}}const gV={some:0,all:1};class mV extends co{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:l="some",once:u}=e,g={root:n?n.current:void 0,rootMargin:r,threshold:typeof l=="number"?l:gV[l]},y=b=>{const{isIntersecting:x}=b;if(this.isInView===x||(this.isInView=x,u&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:S,onViewportLeave:A}=this.node.getProps(),N=x?S:A;N&&N(b)};return hV(this.node.current,g,y)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(pV(e,n))&&this.startObserver()}unmount(){}}function pV({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const xV={inView:{Feature:mV},tap:{Feature:cV},focus:{Feature:lV},hover:{Feature:oV}},yV={layout:{ProjectionNode:xC,MeasureLayout:cC}},Lm={current:null},yC={current:!1};function bV(){if(yC.current=!0,!!lp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Lm.current=t.matches;t.addEventListener("change",e),e()}else Lm.current=!1}const wV=new WeakMap;function vV(t,e,n){for(const r in e){const l=e[r],u=n[r];if(Ti(l))t.addValue(r,l);else if(Ti(u))t.addValue(r,Tc(l,{owner:t}));else if(u!==l)if(t.hasValue(r)){const g=t.getValue(r);g.liveStyle===!0?g.jump(l):g.hasAnimated||g.set(l)}else{const g=t.getStaticValue(r);t.addValue(r,Tc(g!==void 0?g:l,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Mv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class SV{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:l,blockInitialAnimation:u,visualState:g},y={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ap,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const N=Yi.now();this.renderScheduledAt<N&&(this.renderScheduledAt=N,pn.render(this.render,!1,!0))};const{latestValues:b,renderState:x}=g;this.latestValues=b,this.baseTarget={...b},this.initialValues=n.initial?{...b}:{},this.renderState=x,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=l,this.options=y,this.blockInitialAnimation=!!u,this.isControllingVariants=t0(n),this.isVariantNode=UE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:S,...A}=this.scrapeMotionValuesFromProps(n,{},this);for(const N in A){const I=A[N];b[N]!==void 0&&Ti(I)&&I.set(b[N],!1)}}mount(e){this.current=e,wV.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),yC.current||bV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Lm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ro(this.notifyUpdate),ro(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=kc.has(e);r&&this.onBindTransform&&this.onBindTransform();const l=n.on("change",y=>{this.latestValues[e]=y,this.props.onUpdate&&pn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),u=n.on("renderRequest",this.scheduleRender);let g;window.MotionCheckAppearSync&&(g=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{l(),u(),g&&g(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in _c){const n=_c[e];if(!n)continue;const{isEnabled:r,Feature:l}=n;if(!this.features[e]&&l&&r(this.props)&&(this.features[e]=new l(this)),this.features[e]){const u=this.features[e];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Mv.length;r++){const l=Mv[r];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const u="on"+l,g=e[u];g&&(this.propEventSubscriptions[l]=this.on(l,g))}this.prevMotionValues=vV(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Tc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(YS(r)||WS(r))?r=parseFloat(r):!zP(r)&&ao.test(n)&&(r=OE(e,n)),this.setBaseTarget(e,Ti(r)?r.get():r)),Ti(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var u;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const g=Pp(this.props,n,(u=this.presenceContext)==null?void 0:u.custom);g&&(r=g[e])}if(n&&r!==void 0)return r;const l=this.getBaseTargetFromProps(this.props,e);return l!==void 0&&!Ti(l)?l:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new hp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class bC extends SV{constructor(){super(...arguments),this.KeyframeResolver=IP}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ti(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function wC(t,{style:e,vars:n},r,l){const u=t.style;let g;for(g in e)u[g]=e[g];l==null||l.applyProjectionStyles(u,r);for(g in n)u.setProperty(g,n[g])}function EV(t){return window.getComputedStyle(t)}class CV extends bC{constructor(){super(...arguments),this.type="html",this.renderInstance=wC}readValueFromInstance(e,n){var r;if(kc.has(n))return(r=this.projection)!=null&&r.isProjecting?vm(n):KB(e,n);{const l=EV(e),u=(pp(n)?l.getPropertyValue(n):l[n])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(e,{transformPagePoint:n}){return rC(e,n)}build(e,n,r){kp(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Up(e,n,r)}}const vC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function AV(t,e,n,r){wC(t,e,void 0,r);for(const l in e.attrs)t.setAttribute(vC.has(l)?l:Lp(l),e.attrs[l])}class TV extends bC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=jn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(kc.has(n)){const r=RE(n);return r&&r.default||0}return n=vC.has(n)?n:Lp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return WE(e,n,r)}build(e,n,r){GE(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,l){AV(e,n,r,l)}mount(e){this.isSVGTag=YE(e.tagName),super.mount(e)}}const _V=(t,e)=>Bp(t)?new TV(e):new CV(e,{allowProjection:t!==R.Fragment}),NV=_U({...JU,...xV,...aV,...yV},_V),qi=QP(NV);function RV(t){return ci({queryKey:["review_count"],queryFn:async()=>{const[{data:e,error:n},{data:r,error:l}]=await Promise.all([Be.from("applications").select("id",{count:"exact"}).eq("status","pending"),Be.from("application_changes").select("id",{count:"exact"}).eq("status","pending")]);if(n||l)throw new Error((n==null?void 0:n.message)||(l==null?void 0:l.message)||"Failed to count reviews");return((e==null?void 0:e.length)||0)+((r==null?void 0:r.length)||0)},staleTime:1e4,enabled:t,initialData:0})}function OV({label:t,icon:e,color:n,onClick:r,badge:l}){return E.jsxs(qi.button,{onClick:r,className:`relative ${n} text-white font-bold text-lg p-8
                  flex flex-col items-center gap-3 rounded-2xl shadow-lg
                  w-full min-w-[220px] min-h-[150px] transition-all`,whileHover:{scale:1.05},whileTap:{scale:.97},style:{boxShadow:"0 2px 20px 0 rgba(102,84,179,0.08)"},children:[e,E.jsx("span",{className:"mt-2",children:t}),l?E.jsx("span",{className:"absolute top-2 right-4 bg-red-500 text-white rounded-full text-base font-extrabold px-4 py-2 shadow-lg border-2 border-white",style:{minWidth:36,minHeight:36,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",lineHeight:1},children:l}):null]})}function IV(){const{t}=Bn(),e=_s(),{user:n}=_d(),r=(n==null?void 0:n.role)==="admin",{data:l}=RV(r),u=[{label:t("addNewStudent"),icon:E.jsx(lL,{className:"w-12 h-12"}),color:"bg-green-500 hover:bg-green-600",onClick:()=>e("/admissions")},{label:t("takeAttendance"),icon:E.jsx(H9,{className:"w-12 h-12"}),color:"bg-blue-500 hover:bg-blue-600",onClick:()=>e("/attendance")},{label:t("studentsActive"),icon:E.jsx(tw,{className:"w-14 h-14"}),color:"bg-[#6654b3] hover:bg-[#5542a0]",onClick:()=>e("/myschool/students")},{label:t("studentsInactive"),icon:E.jsx(tw,{className:"w-14 h-14"}),color:"bg-pink-400 hover:bg-pink-500",onClick:()=>e("/myschool/students/inactive")},{label:t("courses"),icon:E.jsx(j9,{className:"w-12 h-12"}),color:"bg-teal-500 hover:bg-teal-600",onClick:()=>e("/myschool/courses")},...r?[{label:t("review"),icon:E.jsx(D9,{className:"w-12 h-12"}),color:"bg-yellow-500 hover:bg-yellow-600",onClick:()=>e("/review"),badge:l&&l>0?l:null}]:[]];return E.jsxs("main",{className:"min-h-screen flex flex-col bg-[#f6f6f6]",children:[E.jsx("div",{className:"flex flex-col items-center pt-10 pb-6",children:E.jsx("p",{className:"text-lg text-[#6654b3] font-medium mb-6 text-center",children:t("homepageSlogan")})}),E.jsx("div",{className:"flex-1 flex flex-col items-center w-full",children:E.jsx("div",{className:"w-full max-w-5xl grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-7 p-5 sm:p-6",children:u.map(g=>E.jsx(OV,{...g},g.label))})})]})}function MV(t,e){switch(t.type){case"new_application":return e("newApplication",{name:t.payload.name||`${t.payload.first} ${t.payload.last}`});case"course_limit":return e("courseLimitReached",{name:t.payload.student_name});case"edit_request":return e("editRequestFrom",{name:t.payload.student_name});default:return e(t.type.replace(/_/g,""),t.payload)||t.type.replace(/_/g," ")}}function Dv(t){const e=new Set,n=[];for(const r of t){const l=`${r.type}_${r.payload.application_id??""}_${r.created_at}`;e.has(l)||(e.add(l),n.push(r))}return n}function DV(){const{t}=Bn(),e=_s(),[n,r]=R.useState([]),[l,u]=R.useState(!0),g=R.useRef(null);R.useEffect(()=>{(async()=>{const{data:S,error:A}=await Be.from("notifications").select("*").order("created_at",{ascending:!1}).limit(200);A?console.error(A):r(Dv(S)),u(!1)})()},[]),R.useEffect(()=>{if(!g.current)return g.current=Be.channel("notifications_live").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications"},({new:S})=>r(A=>Dv([S,...A]))).subscribe(),()=>{g.current&&(Be.removeChannel(g.current),g.current=null)}},[]);const y=async(S,A)=>{A==null||A.stopPropagation(),!S.read&&(r(N=>N.map(I=>I.id===S.id?{...I,read:!0}:I)),await Be.from("notifications").update({read:!0}).eq("id",S.id))},b=S=>{switch(S.type){case"new_application":e(`/admissions?view=review&app=${S.payload.application_id}`);break;case"course_limit":case"edit_request":e(`/myschool/student/${S.student_id}`);break;default:return}y(S)};if(l)return E.jsx("p",{className:"p-8",children:t("loading")});const x=n.filter(S=>!S.read).length;return E.jsxs("div",{className:"p-4 sm:p-8 space-y-6 max-w-3xl mx-auto",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[E.jsx(uS,{className:"w-6 h-6 text-[#6654b3]"}),E.jsxs("h1",{className:"text-2xl font-bold text-[#6654b3]",children:[t("notifications")," ",x>0&&E.jsxs("span",{className:"text-[#ec4899]",children:["(",x,")"]})]})]}),n.length===0?E.jsx("p",{className:"text-gray-600",children:t("noNotifications")}):E.jsx("ul",{className:"space-y-4",children:n.map(S=>E.jsx("li",{onClick:()=>b(S),className:`border rounded-xl p-4 cursor-pointer hover:bg-[#ede9fe] transition
                          ${S.read?"bg-white":"bg-purple-50"}`,children:E.jsxs("div",{className:"flex justify-between items-start gap-3",children:[E.jsxs("div",{children:[E.jsx("p",{className:"font-medium",children:MV(S,t)}),E.jsx("p",{className:"text-xs text-gray-500",children:new Date(S.created_at).toLocaleString()})]}),!S.read&&E.jsxs("button",{type:"button",onClick:A=>y(S,A),className:"text-[#6654b3] hover:underline text-xs flex items-center gap-1",children:[E.jsx(F9,{className:"w-4 h-4"})," ",t("markRead")]})]})},S.id))})]})}const LV=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],SC=[];for(let t=6;t<23;++t)SC.push(`${String(t).padStart(2,"0")}:00-${String(t+1).padStart(2,"0")}:00`);function kV(){return ci({queryKey:["courses_full"],queryFn:async()=>{const{data:t,error:e}=await Be.from("courses").select("id,name,weekdays,times,capacity,hour_packages").order("name");if(e)throw new Error(e.message);return t||[]},staleTime:12e4})}function jV(){return ci({queryKey:["courseFilters"],queryFn:async()=>{const{data:t,error:e}=await Be.from("courses").select("id,name,weekdays,times").order("name");if(e)throw new Error(e.message);return t||[]},staleTime:12e4})}function BV(t,e,n){return ci({queryKey:["students",t,e,n],queryFn:async()=>{if(!t)return[];const{data:r,error:l}=await Be.from("students").select("id,first_name,last_name,nick_name,courses");if(l)throw new Error(l.message);return r?e?n?r.filter(u=>{var y,b;return(((b=(y=u.courses)==null?void 0:y[t])==null?void 0:b[e])||[]).some(x=>x===n||x.startsWith(n.split("-")[0]))}):r.filter(u=>{var g,y;return(y=(g=u.courses)==null?void 0:g[t])==null?void 0:y[e]}):r.filter(u=>{var g;return(g=u.courses)==null?void 0:g[t]}):[]},enabled:!!t,staleTime:3e4})}function PV(){const{t}=Bn(),[e,n]=R.useState("check"),[r,l]=R.useState(""),[u,g]=R.useState(""),[y,b]=R.useState(""),{data:x=[],isLoading:S}=jV(),{data:A=[],isLoading:N}=BV(r,u,y);return E.jsx("div",{className:"min-h-screen bg-[#f6f6f6] flex flex-col items-center py-8 px-2",children:E.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[E.jsxs("div",{className:"flex mb-6 border-b border-purple-200",children:[E.jsx("button",{className:`px-5 py-3 font-bold rounded-t-2xl transition ${e==="check"?"bg-white text-[#6654b3] border-x border-t border-purple-200 border-b-0 shadow":"text-gray-400 hover:text-[#6654b3]"}`,onClick:()=>n("check"),children:t("checkCourses")}),E.jsx("button",{className:`ml-3 px-5 py-3 font-bold rounded-t-2xl transition ${e==="manage"?"bg-white text-[#6654b3] border-x border-t border-purple-200 border-b-0 shadow":"text-gray-400 hover:text-[#6654b3]"}`,onClick:()=>n("manage"),children:t("manageCourses")})]}),e==="check"?E.jsx(UV,{courseFilters:x,loadingCourses:S,courseId:r,setCourseId:l,day:u,setDay:g,time:y,setTime:b,filteredStudents:A,loadingStudents:N}):E.jsx(FV,{})]})})}function UV({courseFilters:t,courseId:e,setCourseId:n,day:r,setDay:l,time:u,setTime:g,filteredStudents:y,loadingStudents:b}){const{t:x}=Bn(),S=_s(),A=t==null?void 0:t.find(M=>M.id===e),N=(A==null?void 0:A.weekdays)||[];let I=[];if(A&&r&&A.times&&A.times[r]){const j=(A.times[r]||[]).map(U=>{if(U.includes("-"))return U;const z=Number(U.slice(0,2));return!isNaN(z)&&z>=6&&z<23?`${U}-${String(z+1).padStart(2,"0")}:00`:U});I=Array.from(new Set(j)).sort()}return E.jsxs("div",{className:"w-full",children:[E.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[E.jsxs("select",{className:"px-4 py-2 rounded-xl border border-purple-200 text-[#6654b3] bg-white",value:e,onChange:M=>{n(M.target.value),l(""),g("")},children:[E.jsx("option",{value:"",children:x("selectCourse")}),t==null?void 0:t.map(M=>E.jsx("option",{value:M.id,children:M.name},M.id))]}),E.jsxs("select",{className:"px-4 py-2 rounded-xl border border-purple-200 text-[#6654b3] bg-white",value:r,onChange:M=>{l(M.target.value),g("")},disabled:!e,children:[E.jsx("option",{value:"",children:x("selectDay")}),N.map(M=>E.jsx("option",{children:M},M))]}),E.jsxs("select",{className:"px-4 py-2 rounded-xl border border-purple-200 text-[#6654b3] bg-white",value:u,onChange:M=>g(M.target.value),disabled:!e||!r,children:[E.jsx("option",{value:"",children:x("selectTime")}),I.map(M=>E.jsx("option",{children:M},M))]})]}),E.jsx("div",{children:e?b?E.jsx("div",{className:"text-center text-gray-400 py-8",children:x("loadingStudents")}):E.jsxs("table",{className:"w-full bg-white border border-purple-200 rounded-2xl",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{className:"py-3 px-2 text-left font-semibold text-[#6654b3]",children:"#"}),E.jsx("th",{className:"py-3 px-2 text-left font-semibold text-[#6654b3]",children:x("nickName")}),E.jsx("th",{className:"py-3 px-2 text-left font-semibold text-[#6654b3]",children:x("fullName")})]})}),E.jsx("tbody",{children:!y||y.length===0?E.jsx("tr",{children:E.jsx("td",{colSpan:3,className:"text-center text-gray-300 py-8",children:x("noStudentsFound")})}):y.map((M,j)=>E.jsxs("tr",{className:"hover:bg-purple-50 transition",children:[E.jsx("td",{className:"py-2 px-2",children:j+1}),E.jsx("td",{className:"py-2 px-2 text-[#6654b3] font-bold",children:M.nick_name||""}),E.jsxs("td",{className:"py-2 px-2 text-blue-700 font-semibold cursor-pointer hover:underline",onClick:()=>S(`/myschool/student/${M.id}`),children:[M.first_name," ",M.last_name]})]},M.id))})]}):E.jsx("div",{className:"text-center text-gray-400 py-8",children:x("Choose a course to see students")})})]})}function FV(){const{t}=Bn(),e=Ic(),{data:n=[],isLoading:r}=kV(),[l,u]=R.useState(null),[g,y]=R.useState(""),b=_b({mutationFn:async B=>{const V={name:B.name,weekdays:B.weekdays,times:B.times,capacity:B.capacity,hour_packages:B.hour_packages};if(B.id){const{error:H}=await Be.from("courses").update(V).eq("id",B.id);if(H)throw H}else{const{error:H}=await Be.from("courses").insert([V]);if(H)throw H}},onSuccess:()=>{u(null),e.invalidateQueries({queryKey:["courses_full"]})},onError:B=>y(B.message)}),x=_b({mutationFn:async B=>{if(!window.confirm(t("deleteCourseConfirm")))return;const{error:V}=await Be.from("courses").delete().eq("id",B);if(V)throw V},onSuccess:()=>{e.invalidateQueries({queryKey:["courses_full"]})},onError:B=>y(B.message)});function S(B){u(B||{name:"",weekdays:[],times:{},capacity:0,hour_packages:[]}),y("")}function A(B){u(V=>{if(!V)return V;const H=V.weekdays.includes(B)?V.weekdays.filter(X=>X!==B):[...V.weekdays,B],J={...V.times};return H.includes(B)||delete J[B],{...V,weekdays:H,times:J}})}function N(B,V){u(H=>H&&{...H,times:{...H.times,[B]:[...H.times[B]||[],V]}})}function I(B,V){u(H=>H&&{...H,times:{...H.times,[B]:H.times[B].filter((J,X)=>X!==V)}})}function M(){u(B=>B&&{...B,hour_packages:[...B.hour_packages||[],{hours:1,price:0}]})}function j(B,V,H){u(J=>{if(!J)return J;const X=[...J.hour_packages||[]];return X[B][V]=H,{...J,hour_packages:X}})}function U(B){u(V=>{if(!V)return V;const H=[...V.hour_packages||[]];return H.splice(B,1),{...V,hour_packages:H}})}function z(){if(!l||!l.name)return y(t("enterCourseName"));b.mutate(l)}function q(B){x.mutate(B)}return E.jsxs("div",{className:"relative bg-white rounded-3xl p-6",children:[E.jsx("h2",{className:"text-xl font-bold mb-4 text-[#6654b3]",children:t("manageCourses")}),r?E.jsx("p",{children:t("loadingCourses")}):E.jsxs(E.Fragment,{children:[E.jsxs("table",{className:"w-full mb-4 border border-purple-200 rounded-lg",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("course")}),E.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("days")}),E.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("times")}),E.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("capacity")}),E.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("hourPackages")}),E.jsx("th",{className:"px-4 py-2"})]})}),E.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:n.map(B=>E.jsxs("tr",{className:"hover:bg-purple-50 transition",children:[E.jsx("td",{className:"px-4 py-2",children:B.name}),E.jsx("td",{className:"px-4 py-2",children:(B.weekdays||[]).join(", ")}),E.jsx("td",{className:"px-4 py-2",children:Object.entries(B.times||{}).map(([V,H])=>H.length?E.jsxs("div",{children:[V,": ",H.join(", ")]},V):null)}),E.jsx("td",{className:"px-4 py-2",children:B.capacity}),E.jsx("td",{className:"px-4 py-2",children:(B.hour_packages||[]).map((V,H)=>E.jsxs("div",{children:[V.hours," hours - ",V.price.toLocaleString()," THB"]},H))}),E.jsxs("td",{className:"px-4 py-2 space-x-2",children:[E.jsx("button",{onClick:()=>S(B),className:"bg-gray-100 hover:bg-gray-200 text-blue-600 px-3 py-1 rounded-full text-sm",children:t("edit")}),E.jsx("button",{onClick:()=>q(B.id),className:"bg-gray-100 hover:bg-gray-200 text-red-600 px-3 py-1 rounded-full text-sm",children:t("delete")})]})]},B.id))})]}),E.jsx("button",{onClick:()=>S(null),className:"bg-[#6654b3] hover:bg-purple-700 text-white px-4 py-2 rounded-full",children:t("addCourse")})]}),l&&E.jsxs("div",{className:"absolute inset-0 bg-white bg-opacity-95 rounded-3xl flex flex-col p-0",style:{minHeight:480,maxHeight:"92vh"},children:[E.jsxs("div",{className:"flex-1 flex flex-col px-6 py-6 overflow-y-auto",style:{minHeight:380,maxHeight:560},children:[E.jsx("h3",{className:"text-lg font-bold mb-3 text-[#6654b3]",children:l.id?t("editCourse"):t("newCourse")}),E.jsxs("label",{className:"block mb-2",children:[t("courseName"),E.jsx("input",{className:"border rounded px-2 py-1 ml-2 w-full",value:l.name,onChange:B=>u(V=>V&&{...V,name:B.target.value})})]}),E.jsxs("label",{className:"block mb-2",children:[t("capacity"),E.jsx("input",{type:"number",min:0,className:"border rounded px-2 py-1 ml-2 w-24",value:l.capacity||0,onChange:B=>u(V=>V&&{...V,capacity:Number(B.target.value)})})]}),E.jsxs("div",{className:"mb-2",children:[E.jsxs("span",{className:"font-semibold",children:[t("days"),":"]}),E.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:LV.map(B=>E.jsxs("label",{className:`border rounded-full px-3 py-1 cursor-pointer ${l.weekdays.includes(B)?"bg-[#6654b3] text-white border-[#6654b3]":"border-gray-300"}`,children:[E.jsx("input",{type:"checkbox",className:"hidden",checked:l.weekdays.includes(B),onChange:()=>A(B)}),B]},B))})]}),l.weekdays.map(B=>E.jsxs("div",{className:"mb-2 ml-4",children:[E.jsx("span",{className:"font-semibold",children:t("timesForDay",{day:B})}),E.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[(l.times[B]||[]).map((V,H)=>E.jsxs("span",{className:"inline-flex items-center bg-gray-200 rounded-full px-3 py-1 mr-2",children:[V,E.jsx("button",{onClick:()=>I(B,H),className:"ml-1 text-red-500",children:""})]},H)),E.jsxs("select",{className:"border rounded px-2 py-1 max-h-40 overflow-y-auto",defaultValue:"",onChange:V=>{V.target.value&&(N(B,V.target.value),V.target.value="")},children:[E.jsx("option",{value:"",children:t("addTime")}),SC.filter(V=>!(l.times[B]||[]).includes(V)).map(V=>E.jsx("option",{children:V},V))]})]})]},B)),E.jsxs("div",{className:"mb-2 mt-4",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:t("hourPackages")}),(l.hour_packages||[]).length===0&&E.jsx("div",{className:"text-gray-400 text-sm mt-1",children:t("noPackagesDefined")}),(l.hour_packages||[]).map((B,V)=>E.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[E.jsx("span",{className:"text-sm",children:t("hours")}),E.jsx("input",{type:"number",min:1,className:"border rounded px-2 py-1 w-20",value:B.hours,onChange:H=>j(V,"hours",Number(H.target.value)),placeholder:"Hours"}),E.jsx("span",{className:"text-sm",children:t("price")}),E.jsx("input",{type:"number",min:0,className:"border rounded px-2 py-1 w-24",value:B.price,onChange:H=>j(V,"price",Number(H.target.value)),placeholder:"Price"}),E.jsx("span",{className:"text-xs",children:"THB"}),E.jsx("button",{type:"button",className:"ml-2 text-red-500 font-bold",onClick:()=>U(V),children:""})]},V)),E.jsx("button",{type:"button",className:"mt-2 bg-gray-100 px-2 py-1 rounded",onClick:M,children:t("addPackage")})]}),g&&E.jsx("p",{className:"text-red-600",children:g})]}),E.jsxs("div",{className:"flex gap-2 px-6 py-4 border-t bg-white rounded-b-3xl",children:[E.jsx("button",{onClick:z,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-full",disabled:b.status==="pending",children:t("save")}),E.jsx("button",{onClick:()=>u(null),className:"bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-full",children:t("cancel")})]})]})]})}function VV(t,e,n=new Date){var g,y;if(!t||!t.courses||!t.course_limits)return"inactive";let r=!1,l=null;const u={};for(const b of e)u[b.course_id]||(u[b.course_id]=[]),u[b.course_id].push(b);for(const b of Object.keys(t.courses)){const x=t.course_limits[b];if(!x||typeof x!="object")continue;const S=typeof x.limit=="number"?x.limit:0,N=(typeof x.legacy_used=="number"?x.legacy_used:0)+(((g=u[b])==null?void 0:g.filter(I=>I.approved_by).length)||0);if(S>N){r=!0;break}else{const M=(((y=u[b])==null?void 0:y.filter(j=>j.approved_by))||[]).sort((j,U)=>U.attended_at_ts.localeCompare(j.attended_at_ts))[0];M&&(!l||M.attended_at_ts>l)&&(l=M.attended_at_ts)}}if(r)return"active";if(l){const b=new Date(l);if((n.getTime()-b.getTime())/(1e3*60*60*24)>30)return"inactive"}return"needs_renewal"}const rs="#6654b3",HV="#f6f6f6";function zV(){return Be.from("students").select("id,first_name,last_name,nick_name,parent_phone,parent_line_id,joined_at,courses,course_limits").order("joined_at",{ascending:!1})}function $V(){return Be.from("attendance").select("student_id,course_id,attended_at_ts,approved_by")}function GV(){const{t}=Bn(),e=_s(),[n,r]=R.useState(""),[l,u]=R.useState(new Set),[g,y]=R.useState(!1),{data:b,isLoading:x,error:S}=ci({queryKey:["students","withCourses"],queryFn:zV,staleTime:1e3*60*10,refetchOnWindowFocus:!1}),{data:A,isLoading:N,error:I}=ci({queryKey:["attendance","all"],queryFn:$V,staleTime:1e3*60*10,refetchOnWindowFocus:!1}),M=b&&"data"in b&&Array.isArray(b.data)?b.data:[],j=A&&"data"in A&&Array.isArray(A.data)?A.data:[],U=R.useMemo(()=>{const H={};return j.forEach(J=>{H[J.student_id]||(H[J.student_id]=[]),H[J.student_id].push(J)}),H},[j]),z=R.useMemo(()=>M.map(H=>({...H,status:VV(H,U[H.id]||[])})),[M,U]),q=R.useMemo(()=>{const H=n.trim().toLowerCase(),J=z.filter(X=>X.status==="active");return H?J.filter(X=>(X.nick_name||"").toLowerCase().includes(H)||X.first_name.toLowerCase().includes(H)||X.last_name.toLowerCase().includes(H)||X.parent_phone.includes(H)||(X.parent_line_id||"").toLowerCase().includes(H)):J},[z,n]),B=x||N,V=S||I;return E.jsxs("div",{className:"min-h-screen flex flex-col items-center py-8 px-2 sm:px-6 font-sans",style:{background:HV},children:[E.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-3 pb-4",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("h1",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight",style:{color:rs},children:t("students")}),E.jsx("span",{className:"ml-2 px-3 py-1 rounded-full text-lg font-semibold",style:{background:"#ebe7f7",color:rs,border:"1px solid #e1def5"},children:q.length})]}),E.jsxs("div",{className:"flex gap-2 mt-3 sm:mt-0",children:[E.jsx("input",{type:"text",placeholder:t("searchStudents"),value:n,onChange:H=>r(H.target.value),className:"rounded-2xl border border-[#e1def5] px-4 py-2 bg-white shadow focus:outline-none focus:ring-2 focus:ring-[#6654b3] transition w-56",style:{color:rs}}),E.jsxs("button",{onClick:()=>e("/students/add-existing"),className:"flex items-center gap-1 font-semibold px-4 py-2 rounded-2xl transition active:scale-95",style:{background:rs,color:"#fff",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.06)"},children:[E.jsx(mS,{className:"w-5 h-5"})," ",t("addStudent")]}),E.jsxs("button",{onClick:()=>y(!0),disabled:!l.size,className:"flex items-center gap-1 font-semibold px-4 py-2 rounded-2xl transition active:scale-95 disabled:opacity-60",style:{background:"#ec4899",color:"#fff",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.02)"},children:[E.jsx(_h,{className:"w-5 h-5"})," ",t("export")]})]})]}),E.jsx("div",{className:"w-full max-w-6xl mx-auto overflow-x-auto",children:B?E.jsx("div",{className:"text-center text-[#a7a3c0] py-10",children:t("loading")}):V?E.jsx("div",{className:"text-red-500 py-10 text-center",children:V.message||V.toString()}):E.jsxs("table",{className:"w-full min-w-[650px] rounded-2xl",style:{background:"#fff",borderCollapse:"separate",borderSpacing:0,boxShadow:"0 2px 18px 0 rgba(102,84,179,0.05)",border:"1.5px solid #e1def5"},children:[E.jsx("thead",{style:{background:"#f6f6f6"},children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-2 py-3 rounded-l-2xl",children:E.jsx("input",{type:"checkbox",className:"accent-[#6654b3]",checked:q.length>0&&q.every(H=>l.has(H.id)),onChange:H=>{const J=new Set(l);H.target.checked?q.forEach(X=>J.add(X.id)):q.forEach(X=>J.delete(X.id)),u(J)}})}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:rs},children:"#"}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:rs},children:t("nickName")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:rs},children:t("firstName")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:rs},children:t("lastName")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:rs},children:t("parentPhone")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:rs},children:t("lineID")})]})}),E.jsx("tbody",{children:q.length===0?E.jsx("tr",{children:E.jsx("td",{colSpan:7,className:"text-center text-[#b0b0b0] py-8",children:t("noStudentsFound")})}):q.map((H,J)=>E.jsxs("tr",{className:"transition",style:{animation:"fadein 0.3s",background:l.has(H.id)?"#f6e6fa":"inherit"},children:[E.jsx("td",{className:"px-2 py-2 text-center align-middle",children:E.jsx("input",{type:"checkbox",className:"accent-[#6654b3]",checked:l.has(H.id),onChange:X=>{const oe=new Set(l);X.target.checked?oe.add(H.id):oe.delete(H.id),u(oe)}})}),E.jsx("td",{className:"px-2 py-2 align-middle",children:J+1}),E.jsx("td",{className:"px-2 py-2 align-middle font-semibold",style:{color:rs},children:H.nick_name||E.jsx("span",{className:"text-[#d3d3e0]",children:""})}),E.jsx("td",{className:"px-2 py-2 align-middle font-semibold cursor-pointer hover:underline",style:{color:"#3a38a0"},onClick:()=>e(`/myschool/student/${H.id}`),children:H.first_name}),E.jsx("td",{className:"px-2 py-2 align-middle",children:H.last_name}),E.jsx("td",{className:"px-2 py-2 align-middle font-mono",children:H.parent_phone}),E.jsx("td",{className:"px-2 py-2 align-middle",children:E.jsx("span",{className:"rounded-xl px-2 py-1 text-xs font-semibold",style:{background:"#ebe7f7",color:rs,border:"1px solid #e1def5"},children:H.parent_line_id||""})})]},H.id))})]})}),g&&E.jsx("div",{className:"fixed z-50 inset-0 bg-black/40 flex items-center justify-center",children:E.jsxs("div",{className:"rounded-2xl shadow-lg p-6 max-w-md w-full relative",style:{background:"#fff"},children:[E.jsx("button",{className:"absolute right-4 top-4 text-[#c2bce5] hover:text-[#ec4899]",onClick:()=>y(!1),children:E.jsx(io,{className:"w-6 h-6"})}),E.jsx("h2",{className:"text-lg font-bold mb-3",style:{color:"#ec4899"},children:t("exportStudents",{count:l.size})}),E.jsxs("div",{className:"flex gap-2 justify-between",children:[E.jsxs("button",{onClick:()=>{const H=q.filter(Ee=>l.has(Ee.id)),J=[t("no"),t("nickName"),t("firstName"),t("lastName"),t("parentPhone"),t("lineID")],X=H.map((Ee,de)=>[de+1,`"${Ee.nick_name||""}"`,`"${Ee.first_name}"`,`"${Ee.last_name}"`,`"${Ee.parent_phone}"`,`"${Ee.parent_line_id||""}"`]),oe=[J,...X].map(Ee=>Ee.join(",")).join(`
`),Y=new Blob([oe],{type:"text/csv"}),be=URL.createObjectURL(Y),Ae=document.createElement("a");Ae.href=be,Ae.download=`students_export_${Date.now()}.csv`,Ae.click(),URL.revokeObjectURL(be),y(!1)},className:"rounded-xl px-4 py-2 font-semibold flex items-center gap-1",style:{background:"#34d399",color:"#fff"},children:[E.jsx(_h,{className:"w-5 h-5"})," ",t("exportCSV")]}),E.jsxs("button",{onClick:()=>{window.print(),y(!1)},className:"rounded-xl px-4 py-2 font-semibold flex items-center gap-1",style:{background:rs,color:"#fff"},children:[E.jsx(Jm,{className:"w-5 h-5"})," ",t("print")]})]})]})}),E.jsx("style",{children:`
        @keyframes fadein { from { opacity:0; transform: scale(0.98);} to { opacity:1; transform: scale(1);} }
      `})]})}const Lv=["bg-pink-50","bg-blue-50","bg-yellow-50","bg-purple-50","bg-green-50","bg-indigo-50"];function qV(t){return Lv[t%Lv.length]}async function YV(){const{data:{user:t}}=await Be.auth.getUser();if(!t)return{id:null,role:null};const{data:e}=await Be.from("profiles").select("role").eq("id",t.id).single();return{id:t.id,role:(e==null?void 0:e.role)||null}}function XV(t){return ci({queryKey:["student",t],queryFn:async()=>{const{data:e}=await Be.from("students").select("*").eq("id",t).single();return e},enabled:!!t,staleTime:3e5})}function WV(){return ci({queryKey:["courses"],queryFn:async()=>{const{data:t}=await Be.from("courses").select("*").order("name");return t??[]},staleTime:3e5})}function KV(t){return ci({queryKey:["attendance",t],queryFn:async()=>{const{data:e}=await Be.from("attendance").select("*").eq("student_id",t);return e||[]},enabled:!!t,staleTime:12e4})}function ZV(t){return ci({queryKey:["appchanges",t],queryFn:async()=>{const{data:e}=await Be.from("application_changes").select("*").eq("student_id",t);return e||[]},enabled:!!t,staleTime:12e4})}function QV(){return ci({queryKey:["profile"],queryFn:YV,staleTime:12e4})}function JV(t,e){var r;const n=(r=t.course_limits)==null?void 0:r[e];return n?typeof n.used=="number"?n.used:n.legacy_used??0:0}function eH(t,e){var n,r;return((r=(n=t.course_limits)==null?void 0:n[e])==null?void 0:r.limit)??0}function tH(t){return t.filter(e=>e.approved_by).length}function nH(t,e,n){return JV(t,e)+tH(n)}function iH({msg:t,onClear:e}){return lt.useEffect(()=>{if(!t)return;const n=setTimeout(e,3500);return()=>clearTimeout(n)},[t,e]),t?E.jsx("div",{className:"fixed left-1/2 -translate-x-1/2 bottom-8 z-50 bg-[#6654b3] text-white rounded-2xl px-8 py-3 shadow-xl text-lg font-semibold fade-in",children:t}):null}function sH(){var Fe,mt,ze,dt,Pe,ki,qs;const{t,i18n:e}=Bn(),{id:n}=WO(),r=_s(),l=Ic(),{data:u}=QV(),{data:g,isLoading:y}=XV(n),{data:b}=WV(),{data:x}=KV(n),{data:S}=ZV(n),[A,N]=R.useState(!1),[I,M]=R.useState(null),[j,U]=R.useState(null),[z,q]=R.useState(null),[B,V]=R.useState(null),[H,J]=R.useState(null),[X,oe]=R.useState(!1),[Y,be]=R.useState(null),[Ae,Ee]=R.useState(null),[de,Oe]=R.useState(null),[re,ie]=R.useState(!1),[le,De]=R.useState(null),[$e,W]=R.useState(null),[Z,ce]=R.useState(""),se=R.useMemo(()=>Object.fromEntries((b||[]).map(je=>[je.id,je])),[b]);function Ne(){return g!=null&&g.courses?Object.keys(g.courses).map((je,Rt)=>{var wt,Lt;const Ct=se[je];return{cid:je,idx:Rt,course:Ct,days:g.courses[je],cancelled_at:((wt=g.cancelled_at)==null?void 0:wt[je])||null,cancelled_by:((Lt=g.cancelled_by)==null?void 0:Lt[je])||null}}):[]}function We(je){var Lt;const Rt=Array.isArray(g==null?void 0:g.payment_receipt_urls)?g.payment_receipt_urls:[],Ct=((Lt=g==null?void 0:g.receipts)==null?void 0:Lt[je])||[],wt=(S||[]).filter(tt=>{var Jn,mi,cs,$t,ke,Vt,At;return(((mi=(Jn=tt.changes)==null?void 0:Jn.course_limits)==null?void 0:mi[je])||(($t=(cs=tt.changes)==null?void 0:cs.course_changes)==null?void 0:$t[je]))&&(((Vt=(ke=tt.changes)==null?void 0:ke.receipts)==null?void 0:Vt.length)||((At=tt.receipt_urls)==null?void 0:At.length))}).flatMap(tt=>{var Jn,mi,cs;return(mi=(Jn=tt.changes)==null?void 0:Jn.receipts)!=null&&mi.length?tt.changes.receipts:(cs=tt.receipt_urls)!=null&&cs.length?tt.receipt_urls:[]});return[...Rt,...Ct,...wt]}function Se(je){return(x||[]).filter(Rt=>Rt.course_id===je&&Rt.approved_by)}async function ht(je){if(!g||!u||!u.id){ce(e.language.startsWith("th")?" ":"Unable to cancel course. Profile missing.");return}await Be.from("application_changes").insert([{student_id:g.id,type:"cancel",status:"pending",changes:{cancel_course:je}}]),ce(e.language.startsWith("th")?" ":"Course cancellation request submitted for review."),l.invalidateQueries({queryKey:["appchanges",n]})}const ve=I&&se[I]?se[I].hour_packages:[],He=B!==null?ve[B]:void 0,at=He?He.price:0;async function gt(){if(!I||!j||!z||B==null||!H){ce(e.language.startsWith("th")?"":"Please upload payment receipt");return}if(!g){ce(e.language.startsWith("th")?"":"Student not loaded");return}const je=H,Rt=`${Date.now()}-${je.name}`,{data:Ct,error:wt}=await Be.storage.from("receipts").upload(Rt,je);if(wt){ce(wt.message);return}const{data:Lt}=Be.storage.from("receipts").getPublicUrl(Ct.path),tt=He,Jn=[{course_id:I,course_name:se[I].name,hours:tt.hours,price:tt.price,day:j,time:z}];await Be.from("application_changes").insert([{student_id:g.id,type:"edit",status:"pending",changes:{course_changes:{[I]:{[j]:[z]}},course_limits:{[I]:{limit:tt.hours,legacy_used:0}},purchased_packages:Jn,total_price:tt.price,receipts:[Lt.publicUrl]}}]),N(!1),M(null),U(null),q(null),V(null),J(null),oe(!1),ce(e.language.startsWith("th")?" ":"Add course request submitted for review."),l.invalidateQueries({queryKey:["appchanges",n]})}const Ve=Y&&se[Y]?se[Y].hour_packages:[],ue=Ae!==null?Ve[Ae]:void 0,Ue=ue?ue.price:0;async function Ke(){if(!Y||Ae==null||!de){ce(e.language.startsWith("th")?"":"Please upload payment receipt");return}if(!g){ce(e.language.startsWith("th")?"":"Student not loaded");return}const je=de,Rt=`${Date.now()}-${je.name}`,{data:Ct,error:wt}=await Be.storage.from("receipts").upload(Rt,je);if(wt){ce(wt.message);return}const{data:Lt}=Be.storage.from("receipts").getPublicUrl(Ct.path),tt=ue,Jn=[{course_id:Y,course_name:se[Y].name,hours:tt.hours,price:tt.price}];await Be.from("application_changes").insert([{student_id:g.id,type:"renewal",status:"pending",changes:{course_limits:{[Y]:{limit:tt.hours,legacy_used:0}},purchased_packages:Jn,total_price:tt.price,receipts:[Lt.publicUrl]}}]),be(null),Ee(null),Oe(null),ie(!1),ce(e.language.startsWith("th")?"":"Renewal request submitted."),l.invalidateQueries({queryKey:["appchanges",n]})}function Ze({urls:je,title:Rt}){return E.jsx(Es,{open:!!je,onClose:()=>De(null),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:E.jsxs(Es.Panel,{className:"bg-white rounded-2xl p-6 max-w-lg w-full shadow-2xl relative",children:[E.jsx("button",{type:"button",onClick:()=>De(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:E.jsx(io,{className:"w-6 h-6"})}),E.jsxs("h2",{className:"text-lg font-bold mb-2",children:[Rt," ",t("receipt")]}),E.jsx("div",{className:"space-y-3",children:je.map(Ct=>E.jsxs("div",{className:"rounded-lg border bg-gray-50 px-3 py-2 flex items-center gap-3",children:[E.jsx("span",{className:"flex-1 truncate",children:Ct.split("/").slice(-1)[0]}),E.jsx("button",{type:"button",className:"text-blue-600 hover:underline text-sm",onClick:()=>window.open(Ct,"_blank"),children:t("open")}),E.jsx("button",{type:"button",className:"text-green-600 hover:underline text-sm",onClick:async()=>{const Lt=await(await fetch(Ct)).blob(),tt=document.createElement("a");tt.href=URL.createObjectURL(Lt),tt.download=Ct.split("/").slice(-1)[0],tt.click()},children:t("download")}),E.jsx("button",{type:"button",className:"text-pink-600 hover:underline text-sm",onClick:()=>{const wt=document.createElement("iframe");wt.style.position="fixed",wt.style.right="0",wt.style.top="0",wt.style.width="0",wt.style.height="0",wt.src=Ct,document.body.appendChild(wt),wt.onload=()=>{var Lt;(Lt=wt.contentWindow)==null||Lt.print(),setTimeout(()=>document.body.removeChild(wt),1e3)}},children:t("print")})]},Ct))})]})})}return y||!u||!b||!x||!S?E.jsxs("div",{className:"min-h-[300px] flex items-center justify-center",children:[E.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full bg-pink-300 mr-2"}),E.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full bg-blue-200 mr-2"}),E.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full bg-yellow-200"})]}):g?E.jsx("div",{className:"p-0 min-h-screen",style:{background:"#f6f6f6"},children:E.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-2 sm:px-10 space-y-8",children:[E.jsx(iH,{msg:Z,onClear:()=>ce("")}),E.jsx("div",{className:"flex justify-end w-full",children:(u==null?void 0:u.role)==="admin"&&E.jsxs("button",{type:"button",onClick:async()=>{window.confirm(t("deleteStudentConfirm"))&&(await Be.from("students").delete().eq("id",g.id),r("/myschool/students"))},className:"rounded-full px-3 py-2 bg-red-50 border border-red-200 text-red-600 hover:bg-red-100 flex items-center gap-1",children:[E.jsx(lm,{className:"w-5 h-5"})," ",t("deleteStudent")]})}),E.jsxs("div",{className:"bg-white rounded-2xl px-6 py-4 flex flex-col gap-2 border border-[#ece6fc]",children:[E.jsxs("div",{className:"font-bold text-2xl text-[#6654b3] mb-1",children:[g.first_name," ",g.last_name]}),E.jsxs("div",{className:"flex flex-wrap gap-x-8 gap-y-1 text-gray-700 text-sm",children:[E.jsxs("div",{children:[E.jsxs("span",{className:"font-semibold text-gray-900",children:[t("dob"),":"]})," ",g.dob?new Date(g.dob).toLocaleDateString("en-GB"):""]}),E.jsxs("div",{children:[E.jsxs("span",{className:"font-semibold text-gray-900",children:[t("phone"),":"]})," ",g.parent_phone]}),E.jsxs("div",{children:[E.jsxs("span",{className:"font-semibold text-gray-900",children:[t("lineId"),":"]})," ",g.parent_line_id]}),E.jsxs("div",{children:[E.jsxs("span",{className:"font-semibold text-gray-900",children:[t("joined"),":"]})," ",g.joined_at?new Date(g.joined_at).toLocaleDateString("en-GB"):""]})]})]}),Array.isArray(g==null?void 0:g.purchased_packages)&&g.purchased_packages.length>0&&E.jsxs("div",{className:"mb-2",children:[E.jsx("div",{className:"font-bold text-[#6654b3] mb-1",children:t("purchasedPackages")}),E.jsx("ul",{children:g.purchased_packages.map(je=>E.jsxs("li",{children:[je.course_name,": ",je.hours," ",t("hoursLabel",{count:je.hours}),"  ",je.price.toLocaleString()," ",t("baht")]},je.course_id+je.hours))}),E.jsxs("div",{className:"mt-1 font-semibold",children:[t("totalPrice"),": ",(Fe=g.total_price)==null?void 0:Fe.toLocaleString()," ",t("baht")]})]}),E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsx("div",{className:"text-lg font-semibold text-[#6654b3]",children:t("enrolledCourses")}),E.jsxs("button",{type:"button",onClick:()=>N(!0),className:"rounded-full bg-[#ece6fc] text-[#6654b3] border border-[#6654b3] px-3 py-2 hover:bg-[#e4d8fd] flex items-center gap-1 transition",children:[E.jsx(mS,{className:"w-5 h-5"})," ",t("addCourse")]})]}),E.jsx("div",{className:"rounded-3xl overflow-x-auto border border-[#ece6fc] bg-white",children:E.jsxs("table",{className:"w-full min-w-[700px] text-sm",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"bg-white",children:[E.jsx("th",{className:"px-4 py-3 text-left font-semibold text-[#6654b3] rounded-tl-3xl",children:"#"}),E.jsx("th",{className:"px-4 py-3 text-left font-semibold text-[#6654b3]",children:t("course")}),E.jsx("th",{className:"px-4 py-3 text-left font-semibold text-[#6654b3]",children:t("daysTimes")}),E.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("hoursLeft")}),E.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("status")}),E.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("receipt")}),E.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("actions")}),E.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3] rounded-tr-3xl",children:t("attendance")})]})}),E.jsx("tbody",{children:Ne().map(({cid:je,idx:Rt,course:Ct,days:wt,cancelled_at:Lt})=>{const tt=qV(Rt),Jn=We(je),mi=Se(je),cs=nH(g,je,mi),$t=eH(g,je),ke=Math.max(0,$t-cs),Vt=ke>0?t("ongoing"):t("renewalNeeded"),At=!!Lt;return E.jsxs(lt.Fragment,{children:[E.jsxs("tr",{className:Vu(tt,"transition",At?"bg-red-100/70 text-red-600 opacity-80":"hover:bg-[#ece6fc]/70"),children:[E.jsx("td",{className:"px-4 py-3 text-center",children:Rt+1}),E.jsx("td",{className:"px-4 py-3",children:(Ct==null?void 0:Ct.name)||je}),E.jsx("td",{className:"px-4 py-3",children:Object.entries(wt).map(([jt,Ys])=>E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"font-bold",children:jt}),Array.isArray(Ys)&&Ys.map(Er=>E.jsx("span",{className:"inline-flex items-center ml-2",children:Er},Er))]},jt))}),E.jsxs("td",{className:"px-4 py-3 text-center font-mono font-semibold",children:[cs," / ",$t," ",E.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",t("hoursLeft"),": ",ke,")"]})]}),E.jsx("td",{className:"px-4 py-3 text-center",children:Vt===t("ongoing")?E.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-50 text-green-600 text-xs font-semibold",children:[E.jsx(wL,{className:"w-4 h-4"})," ",t("ongoing")]}):E.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-50 text-yellow-600 text-xs font-semibold",children:[E.jsx(NL,{className:"w-4 h-4"})," ",t("renewalNeeded")]})}),E.jsx("td",{className:"px-4 py-3 text-center",children:Jn.length>0?E.jsx("button",{type:"button",className:"rounded-full px-2 py-1 bg-[#f6d6ec] text-[#b03580] hover:bg-pink-200 text-xs",onClick:()=>De({urls:Jn,title:(Ct==null?void 0:Ct.name)||""}),children:t("viewReceipts",{count:Jn.length})}):E.jsx("span",{className:"text-gray-300 text-xs",children:""})}),E.jsx("td",{className:"px-4 py-3 text-center",children:E.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[E.jsx("button",{type:"button",className:Vu("rounded-full px-2 py-1 text-xs","bg-[#ece6fc] text-[#6654b3] hover:bg-purple-100",Vt!==t("renewalNeeded")&&"opacity-50 pointer-events-none"),onClick:()=>be(je),children:t("renew")}),!At&&E.jsx("button",{type:"button",className:"rounded-full px-2 py-1 bg-red-50 text-red-700 hover:bg-red-100 text-xs",onClick:()=>ht(je),children:t("cancel")}),At&&E.jsxs("span",{className:"block text-xs mt-1 text-red-400",children:[t("cancelled"),E.jsx("br",{}),Lt?new Date(Lt).toLocaleDateString("en-GB"):""]})]})}),E.jsx("td",{className:"px-4 py-3 text-center",children:E.jsx("button",{type:"button",className:"rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 text-xs px-2 py-1 flex items-center gap-1",onClick:()=>W($e===je?null:je),children:$e===je?E.jsxs(E.Fragment,{children:[E.jsx(hS,{className:"w-4 h-4"})," ",t("hide")]}):E.jsxs(E.Fragment,{children:[E.jsx(gS,{className:"w-4 h-4"})," ",t("view")]})})})]}),$e===je&&E.jsx("tr",{children:E.jsx("td",{colSpan:8,className:"bg-white/90",children:E.jsxs("div",{className:"px-4 py-2 text-sm",children:[E.jsx("div",{className:"font-bold text-gray-700 mb-1",children:t("attendanceHistory")}),E.jsxs("div",{className:"flex flex-col gap-1",children:[mi.map(jt=>E.jsxs("div",{className:"flex items-center justify-between border-b last:border-0 border-dashed border-gray-200 py-1 px-2",children:[E.jsx("span",{children:new Date(jt.attended_at_ts).toLocaleString("en-GB",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),E.jsx("button",{type:"button",className:"rounded-full px-2 py-0.5 bg-gray-100 text-gray-600 text-xs hover:bg-blue-50",onClick:()=>navigator.clipboard.writeText(jt.attended_at_ts),children:t("copy")})]},jt.id)),mi.length===0&&E.jsx("div",{className:"text-gray-400",children:t("noRecords")})]})]})})})]},je)})})]})})]}),E.jsx(Es,{open:A,onClose:()=>N(!1),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:E.jsxs(Es.Panel,{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[E.jsx("button",{type:"button",onClick:()=>N(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:E.jsx(io,{className:"w-6 h-6"})}),E.jsx("h2",{className:"font-bold text-lg mb-3",children:t("addNewCourse")}),E.jsxs("div",{className:"space-y-2",children:[E.jsxs("label",{className:"block",children:[E.jsx("span",{className:"font-semibold",children:t("course")}),E.jsxs("select",{className:"w-full rounded border px-2 py-1",value:I||"",onChange:je=>{M(je.target.value),U(null),q(null),V(null),oe(!1)},children:[E.jsx("option",{value:"",children:t("select")}),b.filter(je=>!(g.courses||{})[je.id]).map(je=>E.jsx("option",{value:je.id,children:je.name},je.id))]})]}),I&&E.jsxs("label",{className:"block",children:[E.jsx("span",{className:"font-semibold",children:t("day")}),E.jsxs("select",{className:"w-full rounded border px-2 py-1",value:j||"",onChange:je=>{U(je.target.value),q(null)},children:[E.jsx("option",{value:"",children:t("select")}),(((mt=se[I])==null?void 0:mt.weekdays)||[]).map(je=>E.jsx("option",{children:je},je))]})]}),j&&I&&E.jsxs("label",{className:"block",children:[E.jsx("span",{className:"font-semibold",children:t("timeSlot")}),E.jsxs("select",{className:"w-full rounded border px-2 py-1",value:z||"",onChange:je=>q(je.target.value),children:[E.jsx("option",{value:"",children:t("select")}),(((dt=(ze=se[I])==null?void 0:ze.times)==null?void 0:dt[j])||[]).map(je=>E.jsx("option",{children:je},je))]})]}),I&&E.jsxs("label",{className:"block",children:[E.jsx("span",{className:"font-semibold",children:t("chooseHourPackage")}),E.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:ve.map((je,Rt)=>E.jsxs("label",{className:Vu("cursor-pointer border rounded-full px-4 py-2 text-sm font-semibold transition",B===Rt?"bg-[#6654b3] text-white border-[#6654b3]":"bg-white border-gray-300 text-[#6654b3] hover:bg-purple-50"),children:[E.jsx("input",{type:"radio",name:"add-package",className:"hidden",checked:B===Rt,onChange:()=>{V(Rt),oe(!1)}}),je.hours," ",t("hoursLabel",{count:je.hours}),"  ",je.price.toLocaleString()," ",t("baht")]},Rt))}),B!=null&&E.jsxs(E.Fragment,{children:[E.jsx("button",{type:"button",onClick:()=>oe(!X),className:"mt-2 text-sm text-[#6654b3] underline",children:t(X?"hideDetail":"showDetail")}),X&&E.jsxs("div",{className:"border rounded-xl bg-purple-50 px-4 py-2 mt-2 text-sm",children:[E.jsx("div",{className:"font-semibold mb-1",children:(Pe=se[I])==null?void 0:Pe.name}),E.jsxs("div",{children:[t("hoursLabel",{count:ve[B].hours}),"  ",ve[B].price.toLocaleString()," ",t("baht")]}),E.jsxs("div",{children:[t("day"),": ",j]}),E.jsxs("div",{children:[t("timeSlot"),": ",z]})]})]})]}),E.jsxs("label",{className:"block",children:[E.jsx("span",{className:"font-semibold",children:t("uploadReceipt")}),E.jsx("input",{type:"file",className:"block",accept:"image/*,application/pdf",onChange:je=>{var Rt;return J(((Rt=je.target.files)==null?void 0:Rt[0])??null)}}),H&&E.jsx("span",{className:"text-xs text-gray-500",children:H.name})]}),B!=null&&E.jsxs("div",{className:"text-right font-bold text-lg text-[#6654b3] mt-2",children:[t("totalPrice"),": ",at.toLocaleString()," ",t("baht")]})]}),E.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[E.jsx("button",{type:"button",onClick:()=>N(!1),className:"rounded-full px-4 py-2 border hover:bg-gray-100",children:t("cancel")}),E.jsxs("button",{type:"button",onClick:gt,className:"rounded-full px-4 py-2 bg-green-500 text-white hover:bg-green-600 flex items-center gap-1",children:[E.jsx(om,{className:"w-5 h-5"})," ",t("submit")]})]})]})}),E.jsx(Es,{open:!!Y,onClose:()=>be(null),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:E.jsxs(Es.Panel,{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[E.jsx("button",{type:"button",onClick:()=>be(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:E.jsx(io,{className:"w-6 h-6"})}),E.jsx("h2",{className:"font-bold text-lg mb-3",children:t("submitRenew",{course:((ki=se[Y||""])==null?void 0:ki.name)||""})}),Y&&E.jsxs("label",{className:"block",children:[E.jsx("span",{className:"font-semibold",children:t("chooseHourPackage")}),E.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:Ve.map((je,Rt)=>E.jsxs("label",{className:Vu("cursor-pointer border rounded-full px-4 py-2 text-sm font-semibold transition",Ae===Rt?"bg-[#6654b3] text-white border-[#6654b3]":"bg-white border-gray-300 text-[#6654b3] hover:bg-purple-50"),children:[E.jsx("input",{type:"radio",name:"renew-package",className:"hidden",checked:Ae===Rt,onChange:()=>{Ee(Rt),ie(!1)}}),je.hours," ",t("hoursLabel",{count:je.hours}),"  ",je.price.toLocaleString()," ",t("baht")]},Rt))}),Ae!=null&&E.jsxs(E.Fragment,{children:[E.jsx("button",{type:"button",onClick:()=>ie(!re),className:"mt-2 text-sm text-[#6654b3] underline",children:t(re?"hideDetail":"showDetail")}),re&&E.jsxs("div",{className:"border rounded-xl bg-purple-50 px-4 py-2 mt-2 text-sm",children:[E.jsx("div",{className:"font-semibold mb-1",children:(qs=se[Y])==null?void 0:qs.name}),E.jsxs("div",{children:[t("hoursLabel",{count:Ve[Ae].hours}),"  ",Ve[Ae].price.toLocaleString()," ",t("baht")]})]})]})]}),E.jsxs("label",{className:"block",children:[E.jsx("span",{className:"font-semibold",children:t("uploadReceipt")}),E.jsx("input",{type:"file",className:"block",accept:"image/*,application/pdf",onChange:je=>{var Rt;return Oe(((Rt=je.target.files)==null?void 0:Rt[0])??null)}}),de&&E.jsx("span",{className:"text-xs text-gray-500",children:de.name})]}),Ae!=null&&E.jsxs("div",{className:"text-right font-bold text-lg text-[#6654b3] mt-2",children:[t("totalPrice"),": ",Ue.toLocaleString()," ",t("baht")]}),E.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[E.jsx("button",{type:"button",onClick:()=>be(null),className:"rounded-full px-4 py-2 border hover:bg-gray-100",children:t("cancel")}),E.jsxs("button",{type:"button",onClick:Ke,className:"rounded-full px-4 py-2 bg-green-500 text-white hover:bg-green-600 flex items-center gap-1",children:[E.jsx(om,{className:"w-5 h-5"})," ",t("submit")]})]})]})}),le&&E.jsx(Ze,{...le})]})}):E.jsx("div",{className:"p-8 text-pink-500",children:t("studentNotFound")})}const Ei="#6654b3",rH="#f6f6f6";function aH(t){const e=["#f6e6fa","#e5f6fb","#faf6e6","#f1e6fa","#e6faea","#e6ebfa"];return e[t%e.length]}async function oH(){const{data:t}=await Be.from("students").select("id,first_name,last_name,nick_name,courses,course_limits,cancelled_at,parent_phone,parent_line_id,joined_at"),{data:e}=await Be.from("attendance").select("student_id,course_id,approved_by"),{data:n}=await Be.from("courses").select("id,name,hour_packages");if(!t||!e||!n)return[];let r=[];return t.forEach(l=>{var u;if(!(!l.courses||!l.course_limits))for(const g of Object.keys(l.courses)){const y=((u=l.course_limits)==null?void 0:u[g])||0,b=e.filter(A=>A.student_id===l.id&&A.course_id===g&&A.approved_by),x=b.length,S=!!(l.cancelled_at&&l.cancelled_at[g]);y>0&&x>=y&&!S&&r.push({stu:l,cid:g,used:x,purchased:y,attendance:b,course:n.find(A=>A.id===g)||{name:g}})}}),r}function lH(){const{t}=Bn(),e=_s(),n=Ic(),[r,l]=R.useState(""),[u,g]=R.useState(new Set),[y,b]=R.useState(!1),[x,S]=R.useState(null),[A,N]=R.useState(1),[I,M]=R.useState(null),[j,U]=R.useState(null),{data:z=[],isLoading:q,error:B}=ci({queryKey:["students","inactive","rows"],queryFn:oH,staleTime:12e4}),V=R.useMemo(()=>{const Y=r.trim().toLowerCase();return Y?z.filter(({stu:be,course:Ae})=>[be.nick_name||"",be.first_name,be.last_name,be.parent_phone,be.parent_line_id||"",(Ae==null?void 0:Ae.name)||""].map(Ee=>(""+Ee).toLowerCase()).some(Ee=>Ee.includes(Y))):z},[z,r]);function H(Y){return`${Y.stu.id}-${Y.cid}`}function J(){const Y=V.filter(ie=>u.has(H(ie))),be=[t("no"),t("nickName"),t("firstName"),t("lastName"),t("parentPhone"),t("lineID"),t("course"),E.jsxs("th",{children:[t("used"),"/",t("purchased")]}),t("status")],Ae=Y.map((ie,le)=>{var De;return[le+1,`"${ie.stu.nick_name||""}"`,`"${ie.stu.first_name}"`,`"${ie.stu.last_name}"`,`"${ie.stu.parent_phone}"`,`"${ie.stu.parent_line_id||""}"`,`"${((De=ie.course)==null?void 0:De.name)||ie.cid}"`,`"${ie.used}/${ie.purchased}"`,t("renewalNeeded")]}),Ee=[be,...Ae].map(ie=>ie.join(",")).join(`
`),de=new Blob([Ee],{type:"text/csv"}),Oe=URL.createObjectURL(de),re=document.createElement("a");re.href=Oe,re.download=`students_renewal_export_${Date.now()}.csv`,re.click(),URL.revokeObjectURL(Oe),b(!1)}async function X(){if(!(x!=null&&x.stu)||!x.cid||!I||A<1)return;const Y=I,be=`${Date.now()}-${Y.name}`,{data:Ae,error:Ee}=await Be.storage.from("receipts").upload(be,Y);if(Ee){alert(Ee.message);return}const{data:de}=Be.storage.from("receipts").getPublicUrl(Ae.path);await Be.from("application_changes").insert([{student_id:x.stu.id,type:"renewal",status:"pending",changes:{course_limits:{[x.cid]:A},receipts:[de.publicUrl]}}]),S(null),N(1),M(null),alert(t("submitRenewal")),n.invalidateQueries({queryKey:["students","inactive","rows"]})}async function oe(Y,be){const{data:Ae}=await Be.auth.getUser();if(!(Ae!=null&&Ae.user)){alert(t("profileMissingError"));return}const Ee={...Y.cancelled_at||{}};Ee[be]=new Date().toISOString(),await Be.from("students").update({cancelled_at:Ee}).eq("id",Y.id),n.invalidateQueries({queryKey:["students","inactive","rows"]}),U(null)}return E.jsxs("div",{className:"min-h-screen flex flex-col items-center py-8 px-2 sm:px-6 font-sans",style:{background:rH},children:[E.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-3 pb-4",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsxs("h1",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight",style:{color:Ei},children:[t("students")," (",t("inactive"),")"]}),E.jsx("span",{className:"ml-2 px-3 py-1 rounded-full text-lg font-semibold",style:{background:"#ebe7f7",color:Ei,border:"1px solid #e1def5"},children:V.length})]}),E.jsxs("div",{className:"flex gap-2 mt-3 sm:mt-0",children:[E.jsx("input",{type:"text",placeholder:t("searchStudents"),value:r,onChange:Y=>l(Y.target.value),className:"rounded-2xl border border-[#e1def5] px-4 py-2 bg-white shadow focus:outline-none focus:ring-2 focus:ring-[#6654b3] transition w-56",style:{color:Ei}}),E.jsxs("button",{onClick:()=>b(!0),disabled:!u.size,className:"flex items-center gap-1 font-semibold px-4 py-2 rounded-2xl transition active:scale-95 disabled:opacity-60",style:{background:"#ec4899",color:"#fff",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.02)"},children:[E.jsx(_h,{className:"w-5 h-5"})," ",t("export")]})]})]}),E.jsx("div",{className:"w-full max-w-6xl mx-auto overflow-x-auto",children:q?E.jsx("div",{className:"text-center text-[#a7a3c0] py-10",children:t("loading")}):B?E.jsx("div",{className:"text-red-500 py-10 text-center",children:B.message||B.toString()}):E.jsxs("table",{className:"w-full min-w-[900px] rounded-2xl",style:{background:"#fff",borderCollapse:"separate",borderSpacing:0,boxShadow:"0 2px 18px 0 rgba(102,84,179,0.05)",border:"1.5px solid #e1def5"},children:[E.jsx("thead",{style:{background:"#f6f6f6"},children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-2 py-3 rounded-l-2xl",children:E.jsx("input",{type:"checkbox",className:"accent-[#6654b3]",checked:V.length>0&&V.every(Y=>u.has(H(Y))),onChange:Y=>{const be=new Set(u);Y.target.checked?V.forEach(Ae=>be.add(H(Ae))):V.forEach(Ae=>be.delete(H(Ae))),g(be)}})}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Ei},children:"#"}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Ei},children:t("nickName")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Ei},children:t("firstName")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Ei},children:t("lastName")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Ei},children:t("parentPhone")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Ei},children:t("lineID")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Ei},children:t("course")}),E.jsxs("th",{className:"px-2 py-3 text-center font-semibold",style:{color:Ei},children:[t("used"),"/",t("purchased")]}),E.jsx("th",{className:"px-2 py-3 text-center font-semibold",style:{color:Ei},children:t("status")}),E.jsx("th",{className:"px-2 py-3 text-center font-semibold rounded-r-2xl",style:{color:Ei},children:t("actions")})]})}),E.jsx("tbody",{children:V.length===0?E.jsx("tr",{children:E.jsx("td",{colSpan:11,className:"text-center text-[#b0b0b0] py-8",children:t("noStudentsFound")})}):V.map((Y,be)=>{var Ae;return E.jsxs("tr",{className:"transition",style:{animation:"fadein 0.3s",background:u.has(H(Y))?aH(be):"inherit"},children:[E.jsx("td",{className:"px-2 py-2 text-center align-middle",children:E.jsx("input",{type:"checkbox",className:"accent-[#6654b3]",checked:u.has(H(Y)),onChange:Ee=>{const de=new Set(u);Ee.target.checked?de.add(H(Y)):de.delete(H(Y)),g(de)}})}),E.jsx("td",{className:"px-2 py-2 align-middle",children:be+1}),E.jsx("td",{className:"px-2 py-2 align-middle font-semibold",style:{color:Ei},children:Y.stu.nick_name||E.jsx("span",{className:"text-[#d3d3e0]",children:""})}),E.jsx("td",{className:"px-2 py-2 align-middle font-semibold cursor-pointer hover:underline",style:{color:"#3a38a0"},onClick:()=>e(`/myschool/student/${Y.stu.id}`),children:Y.stu.first_name}),E.jsx("td",{className:"px-2 py-2 align-middle",children:Y.stu.last_name}),E.jsx("td",{className:"px-2 py-2 align-middle font-mono",children:Y.stu.parent_phone}),E.jsx("td",{className:"px-2 py-2 align-middle",children:E.jsx("span",{className:"rounded-xl px-2 py-1 text-xs font-semibold",style:{background:"#ebe7f7",color:Ei,border:"1px solid #e1def5"},children:Y.stu.parent_line_id||""})}),E.jsx("td",{className:"px-2 py-2 align-middle",children:((Ae=Y.course)==null?void 0:Ae.name)||Y.cid}),E.jsxs("td",{className:"px-2 py-2 align-middle text-center font-mono",children:[Y.used," / ",Y.purchased]}),E.jsx("td",{className:"px-2 py-2 align-middle text-center",children:E.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold",style:{background:"#fffbe5",color:"#bfa700",border:"1px solid #f6e38d"},children:t("renewalNeeded")})}),E.jsxs("td",{className:"px-2 py-2 align-middle text-center flex gap-1 justify-center",children:[E.jsx("button",{className:"rounded-full px-3 py-1 bg-[#ece6fc] text-[#6654b3] border border-[#6654b3] hover:bg-[#e4d8fd] text-xs font-semibold",onClick:()=>{S({stu:Y.stu,cid:Y.cid}),N(1),M(null)},children:t("renew")}),E.jsxs("button",{className:"rounded-full px-3 py-1 bg-red-50 text-red-700 border border-red-300 hover:bg-red-100 text-xs font-semibold flex items-center gap-1",onClick:()=>U({stu:Y.stu,cid:Y.cid}),children:[E.jsx(lm,{className:"w-4 h-4"}),t("cancelled")]})]})]},H(Y))})})]})}),y&&E.jsx("div",{className:"fixed z-50 inset-0 bg-black/40 flex items-center justify-center",children:E.jsxs("div",{className:"rounded-2xl shadow-lg p-6 max-w-md w-full relative",style:{background:"#fff"},children:[E.jsx("button",{className:"absolute right-4 top-4 text-[#c2bce5] hover:text-[#ec4899]",onClick:()=>b(!1),children:E.jsx(io,{className:"w-6 h-6"})}),E.jsx("h2",{className:"text-lg font-bold mb-3",style:{color:"#ec4899"},children:t("exportStudents",{count:u.size})}),E.jsxs("div",{className:"flex gap-2 justify-between",children:[E.jsxs("button",{onClick:J,className:"rounded-xl px-4 py-2 font-semibold flex items-center gap-1",style:{background:"#34d399",color:"#fff"},children:[E.jsx(_h,{className:"w-5 h-5"})," ",t("exportCSV")]}),E.jsxs("button",{onClick:()=>{window.print(),b(!1)},className:"rounded-xl px-4 py-2 font-semibold flex items-center gap-1",style:{background:Ei,color:"#fff"},children:[E.jsx(Jm,{className:"w-5 h-5"})," ",t("print")]})]})]})}),E.jsx(Es,{open:!!x,onClose:()=>S(null),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:E.jsxs(Es.Panel,{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[E.jsx("button",{type:"button",onClick:()=>S(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:E.jsx(io,{className:"w-6 h-6"})}),E.jsx("h2",{className:"font-bold text-lg mb-3",children:t("submitRenew")}),E.jsxs("label",{className:"block mb-3",children:[E.jsx("span",{className:"font-semibold",children:t("hoursToPurchase")}),E.jsx("input",{type:"number",className:"w-full rounded border px-2 py-1",min:1,value:A,onChange:Y=>N(Number(Y.target.value))})]}),E.jsxs("label",{className:"block mb-3",children:[E.jsx("span",{className:"font-semibold",children:t("uploadReceipt")}),E.jsx("input",{type:"file",className:"block",accept:"image/*,application/pdf",onChange:Y=>M(Y.target.files?Y.target.files[0]:null)}),I&&E.jsx("span",{className:"text-xs text-gray-500",children:I.name})]}),E.jsxs("div",{className:"flex justify-end gap-3 mt-2",children:[E.jsx("button",{type:"button",onClick:()=>S(null),className:"rounded-full px-4 py-2 border hover:bg-gray-100",children:t("cancel")}),E.jsxs("button",{type:"button",onClick:X,className:"rounded-full px-4 py-2 bg-[#6654b3] text-white hover:bg-purple-700 flex items-center gap-1",children:[E.jsx(om,{className:"w-5 h-5"})," ",t("submit")]})]})]})}),E.jsx(Es,{open:!!j,onClose:()=>U(null),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:E.jsxs(Es.Panel,{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl",children:[E.jsx("button",{type:"button",onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:E.jsx(io,{className:"w-6 h-6"})}),E.jsx("h2",{className:"font-bold text-lg mb-4 text-red-500",children:t("cancelCourse")}),E.jsx("div",{className:"mb-6",children:t("cancelCourseConfirm")}),E.jsxs("div",{className:"flex justify-end gap-3",children:[E.jsx("button",{type:"button",onClick:()=>U(null),className:"rounded-full px-4 py-2 border hover:bg-gray-100",children:t("cancel")}),E.jsxs("button",{type:"button",onClick:()=>oe(j.stu,j.cid),className:"rounded-full px-4 py-2 bg-red-500 text-white hover:bg-red-600 flex items-center gap-1",children:[E.jsx(lm,{className:"w-5 h-5"})," ",t("confirm")]})]})]})}),E.jsx("style",{children:`
        @keyframes fadein { from { opacity:0; transform: scale(0.98);} to { opacity:1; transform: scale(1);} }
      `})]})}function cH(){return ci({queryKey:["courses"],queryFn:async()=>{const{data:t}=await Be.from("courses").select("id,name,weekdays,times,capacity,hour_packages").order("name");return t??[]},staleTime:3e5})}function uH({msg:t,onClear:e}){return lt.useEffect(()=>{if(!t)return;const n=setTimeout(e,3500);return()=>clearTimeout(n)},[t,e]),t?E.jsx("div",{className:"fixed left-1/2 -translate-x-1/2 bottom-8 z-50 bg-[#6654b3] text-white rounded-2xl px-8 py-3 shadow-xl text-lg font-semibold fade-in",children:t}):null}function dH({onDone:t}){const{t:e}=Bn(),{user:n}=_d(),[r,l]=R.useState(""),[u,g]=R.useState(""),[y,b]=R.useState(""),[x,S]=R.useState(""),[A,N]=R.useState(""),[I,M]=R.useState(""),[j,U]=R.useState({}),[z,q]=R.useState({}),[B,V]=R.useState({}),[H,J]=R.useState({}),[X,oe]=R.useState([]),Y=R.useRef(null),[be,Ae]=R.useState(!1),[Ee,de]=R.useState(!1),[Oe,re]=R.useState(""),[ie,le]=R.useState(""),[De,$e]=R.useState(!1),{data:W=[],isLoading:Z}=cH();function ce(ue){U(Ue=>{const Ke={...Ue};return Ke[ue]?(delete Ke[ue],V(Ze=>{const{[ue]:Fe,...mt}=Ze;return mt}),q(Ze=>{const Fe={...Ze};return delete Fe[ue],Fe}),J(Ze=>{const Fe={...Ze};return delete Fe[ue],Fe})):Ke[ue]={},Ke})}function se(ue,Ue){U(Ke=>{const Ze={...Ke},Fe={...Ze[ue]||{}};return Fe[Ue]?delete Fe[Ue]:Fe[Ue]=[],Object.keys(Fe).length?Ze[ue]=Fe:delete Ze[ue],Ze}),q(Ke=>{const Ze={...Ke};return Ze[ue]||(Ze[ue]={}),Ze[ue][Ue]=!1,Ze})}function Ne(ue,Ue,Ke){q(Ze=>{const Fe={...Ze};return Fe[ue]||(Fe[ue]={}),Fe[ue][Ue]=Ke,Fe}),U(Ze=>{const Fe={...Ze};return Fe[ue]=Fe[ue]||{},Fe[ue][Ue]=Ke?[]:[],Fe})}function We(ue,Ue,Ke){U(Ze=>{const Fe={...Ze};return Fe[ue]=Fe[ue]||{},Fe[ue][Ue]=Fe[ue][Ue]||[],Fe[ue][Ue].includes(Ke)||Fe[ue][Ue].push(Ke),Fe})}function Se(ue,Ue,Ke){U(Ze=>{const Fe={...Ze};return Fe[ue][Ue].splice(Ke,1),Fe[ue][Ue].length||delete Fe[ue][Ue],Object.keys(Fe[ue]).length||delete Fe[ue],Fe})}const ht=ue=>oe(Ue=>[...Ue,...ue]),ve=ue=>oe(Ue=>Ue.filter((Ke,Ze)=>Ze!==ue)),He=Object.entries(B).reduce((ue,[Ue,Ke])=>{var mt;const Ze=W.find(ze=>ze.id===Ue),Fe=(mt=Ze==null?void 0:Ze.hour_packages)==null?void 0:mt[Ke];return Fe?ue+Fe.price:ue},0);function at(ue){const Ue=B[ue],Ke=W.find(Ze=>Ze.id===ue);return!Ke||!Ke.hour_packages||Ue===void 0?0:Ke.hour_packages[Ue].hours}function gt(ue){const Ue=at(ue),Ke=H[ue]||0;return Math.max(Ue-Ke,0)}async function Ve(ue){if(ue.preventDefault(),le(""),!Object.keys(j).length)return le(e("selectCourseError"));if(!r.trim())return le(e("enterNickError"));for(const ze of Object.keys(j)){const dt=W.find(Pe=>Pe.id===ze);if(!dt||!dt.hour_packages||B[ze]===void 0)return le(e("selectHourPackageError"))}for(const ze of Object.keys(B)){const dt=at(ze),Pe=H[ze]||0;if(Pe<0||Pe>dt)return le(e("usedHoursInvalid",{max:dt}))}Ae(!0);const Ue=[];for(const ze of X){const dt=`${Date.now()}-${Math.random().toString(36).slice(2)}.${ze.name.split(".").pop()}`,{data:Pe,error:ki}=await Be.storage.from("receipts").upload(dt,ze,{cacheControl:"3600"});if(ki){le(ki.message),Ae(!1);return}const{data:qs}=Be.storage.from("receipts").getPublicUrl(Pe.path);Ue.push(qs.publicUrl)}const Ke={},Ze={};for(const ze of Object.keys(j)){const dt=W.find(ki=>ki.id===ze);if(!dt||!dt.hour_packages||B[ze]===void 0)continue;const Pe=dt.hour_packages[B[ze]];Ke[ze]=Pe,Ze[ze]={limit:Pe.hours,used:H[ze]||0}}Object.keys(Ze).forEach(ze=>{const dt=Ze[ze];(!dt||typeof dt.limit!="number"||typeof dt.used!="number")&&delete Ze[ze]}),Object.keys(Ke).forEach(ze=>{const dt=Ke[ze];(!dt||typeof dt!="object")&&delete Ke[ze]});const Fe={nick_name:r,first_name:u,last_name:y,dob:x,parent_line_id:A,parent_phone:I,courses:j,purchased_packages:Ke,course_limits:Ze,total_price:He,payment_receipt_urls:Ue,joined_at:new Date().toISOString()},{error:mt}=await Be.from("students").insert([Fe]);if(mt){le(mt.message),Ae(!1);return}re(e("studentAdded",{nick:r})),de(!0),Ae(!1),t&&t()}return Ee?E.jsx("div",{className:"min-h-[60vh] flex flex-col justify-center items-center bg-[#f6f6f6]",children:E.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-green-50 to-yellow-50 shadow-xl rounded-3xl px-8 py-12 max-w-md w-full flex flex-col items-center",children:[E.jsx("div",{className:"text-3xl font-extrabold mb-3 text-[#6654b3]",children:e("thankYou")}),E.jsx("div",{className:"text-lg text-gray-700 mb-4 text-center",children:e("studentAdded",{nick:r})})]})}):E.jsx("div",{className:"flex flex-col gap-8 py-10 px-2 sm:px-6 max-w-3xl mx-auto",style:{background:"#f6f6f6"},children:E.jsxs("form",{onSubmit:Ve,className:"space-y-8",children:[E.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("studentInfo")}),E.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("nickName")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:r,onChange:ue=>l(ue.target.value),maxLength:40,pattern:".*"})]}),E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("firstName")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:u,onChange:ue=>g(ue.target.value),maxLength:40,pattern:".*"})]}),E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("lastName")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:y,onChange:ue=>b(ue.target.value),maxLength:40,pattern:".*"})]})]}),E.jsxs("label",{className:"flex flex-col gap-1 mt-4 w-full md:w-1/2",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("dob")}),E.jsx("input",{required:!0,type:"date",className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:x,onChange:ue=>S(ue.target.value)})]})]}),E.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("guardian")}),E.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("lineAppId")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:A,onChange:ue=>N(ue.target.value)})]}),E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("phone")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:I,onChange:ue=>M(ue.target.value)})]})]})]}),E.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("courses")}),Z?E.jsx("div",{className:"text-gray-400",children:e("loadingCourses")}):W.length===0?E.jsx("div",{className:"text-gray-400",children:e("noCourses")}):W.map(ue=>E.jsxs("div",{className:`mb-2 border ${j[ue.id]?"border-[#6654b3] bg-purple-50":"border-gray-200 bg-white"} rounded-xl p-3 transition-all`,children:[E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[E.jsx("input",{type:"checkbox",checked:!!j[ue.id],onChange:()=>ce(ue.id)}),E.jsx("span",{className:"text-lg",children:ue.name}),E.jsx("span",{className:"text-xs text-gray-400",children:e("seats",{count:ue.capacity})})]}),j[ue.id]&&E.jsxs("div",{className:"ml-8 mt-2 mb-2",children:[ue.weekdays.map(Ue=>{var Ke,Ze,Fe,mt,ze;return E.jsxs("div",{className:"mb-1",children:[E.jsxs("label",{className:"font-semibold mr-2",children:[E.jsx("input",{type:"checkbox",className:"mr-1",checked:!!((Ke=j[ue.id])!=null&&Ke[Ue]),onChange:()=>se(ue.id,Ue)}),Ue]}),!!((Ze=j[ue.id])!=null&&Ze[Ue])&&E.jsxs(E.Fragment,{children:[E.jsxs("label",{className:"inline-flex items-center gap-1 font-medium text-[#6654b3] text-sm mb-1 ml-6",children:[E.jsx("input",{type:"checkbox",checked:!!((Fe=z[ue.id])!=null&&Fe[Ue]),onChange:dt=>Ne(ue.id,Ue,dt.target.checked)}),e("fullDay")]}),!((mt=z[ue.id])!=null&&mt[Ue])&&E.jsxs("div",{className:"flex flex-wrap gap-1 items-center ml-6",children:[(j[ue.id][Ue]||[]).map((dt,Pe)=>E.jsxs("span",{className:"inline-flex items-center bg-[#ece6fc] rounded-full px-3 py-1 text-xs mr-2 mt-1",children:[dt,E.jsx("button",{type:"button",className:"ml-1 text-red-500 font-bold",onClick:()=>Se(ue.id,Ue,Pe),children:""})]},Pe)),E.jsxs("select",{className:"border rounded px-2 py-1 text-sm ml-2",defaultValue:"",onChange:dt=>{dt.target.value&&(We(ue.id,Ue,dt.target.value),dt.target.value="")},children:[E.jsx("option",{value:"",children:e("addTime")}),(((ze=ue.times)==null?void 0:ze[Ue])||[]).filter(dt=>!(j[ue.id][Ue]||[]).includes(dt)).map(dt=>E.jsx("option",{children:dt},dt))]})]})]})]},Ue)}),Array.isArray(ue.hour_packages)&&ue.hour_packages.length>0&&E.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("chooseHourPackage")}),E.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:ue.hour_packages.map((Ue,Ke)=>E.jsxs("label",{className:`cursor-pointer border rounded-full px-4 py-2 text-sm font-semibold transition
                              ${B[ue.id]===Ke?"bg-[#6654b3] text-white border-[#6654b3]":"bg-white border-gray-300 text-[#6654b3] hover:bg-purple-50"}`,children:[E.jsx("input",{type:"radio",name:`hour-package-${ue.id}`,className:"hidden",checked:B[ue.id]===Ke,onChange:()=>V(Ze=>({...Ze,[ue.id]:Ke}))}),e("hoursLabel",{count:Ue.hours}),"  ",Ue.price.toLocaleString()," ",e("baht")]},Ke))}),B[ue.id]!==void 0&&E.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[E.jsxs("span",{className:"ml-3 text-sm font-medium text-green-700 bg-green-100 rounded-full px-3 py-1",children:[e("maxHours"),": ",at(ue.id)]}),E.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e("usedHours"),":",E.jsx("input",{type:"number",min:0,max:at(ue.id),value:H[ue.id]??0,onChange:Ue=>{const Ke=Number(Ue.target.value);J(Ze=>({...Ze,[ue.id]:Ke}))},className:"w-20 border rounded px-2 py-1 ml-1",required:!0})]}),E.jsxs("span",{className:"text-sm font-medium text-blue-700 bg-blue-100 rounded-full px-3 py-1",children:[e("hoursRemaining"),": ",gt(ue.id)]})]})]})]})]},ue.id))]}),E.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("paymentReceipt")}),E.jsxs("div",{className:"mb-4 flex flex-col items-end",children:[E.jsxs("div",{className:"text-lg font-bold text-[#6654b3] mb-1",children:[e("totalPrice"),": ",He.toLocaleString()," ",e("baht")]}),He>0&&E.jsx("button",{type:"button",onClick:()=>$e(ue=>!ue),className:"text-sm text-[#6654b3] underline hover:opacity-70 transition px-2",children:e(De?"hideDetail":"showDetail")})]}),De&&He>0&&E.jsx("div",{className:"mb-4 bg-[#f9f5ff] p-4 rounded-xl shadow-inner text-sm text-[#6654b3]",children:Object.entries(B).map(([ue,Ue])=>{var mt;const Ke=W.find(ze=>ze.id===ue),Ze=(mt=Ke==null?void 0:Ke.hour_packages)==null?void 0:mt[Ue];if(!Ke||!Ze)return null;const Fe=j[ue];return E.jsxs("div",{className:"mb-3",children:[E.jsxs("div",{className:"font-semibold",children:[Ke.name,": ",e("hoursLabel",{count:Ze.hours}),"  ",Ze.price.toLocaleString()," ",e("baht")]}),E.jsx("ul",{className:"ml-4 mt-1 list-disc",children:Object.entries(Fe||{}).map(([ze,dt])=>E.jsxs("li",{children:[E.jsx("span",{className:"font-medium",children:ze}),!dt||dt.length===0?E.jsx("span",{className:"ml-2 text-xs text-gray-500",children:e("fullDay")}):E.jsx("span",{className:"ml-2",children:dt.join(", ")})]},ze))}),E.jsxs("div",{className:"ml-4 mt-1 text-sm",children:[e("usedHours"),": ",H[ue]??0," / ",Ze.hours,"  ",e("hoursRemaining"),": ",gt(ue)]})]},ue)})}),E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx("button",{type:"button",onClick:()=>{var ue;return(ue=Y.current)==null?void 0:ue.click()},className:"rounded-full border border-[#ece6fc] bg-purple-50 text-[#6654b3] px-5 py-2 font-semibold hover:bg-purple-100 transition",children:e("chooseFiles")}),E.jsx("input",{ref:Y,type:"file",multiple:!0,accept:"image/*,application/pdf",className:"hidden",onChange:ue=>ue.target.files&&ht(Array.from(ue.target.files))}),X.length>0&&E.jsx("ul",{className:"mt-2 space-y-1",children:X.map((ue,Ue)=>E.jsxs("li",{className:"flex items-center bg-[#ece6fc] rounded-full px-3 py-1 text-sm",children:[E.jsx("span",{className:"truncate max-w-[180px]",children:ue.name}),E.jsx("button",{type:"button",className:"ml-2 text-red-500 font-bold",onClick:()=>ve(Ue),children:""})]},Ue))})]})]}),E.jsx(uH,{msg:Oe||ie,onClear:()=>{re(""),le("")}}),E.jsx("div",{className:"flex justify-end",children:E.jsx("button",{type:"submit",disabled:be,className:"bg-[#6654b3] hover:bg-purple-700 text-white font-bold px-8 py-3 rounded-xl shadow disabled:opacity-50 transition",children:e(be?"adding":"addStudent")})})]})})}function fH(){return ci({queryKey:["courses"],queryFn:async()=>{const{data:t}=await Be.from("courses").select("id,name,weekdays,times,capacity").order("name");return t??[]},staleTime:3e5})}function hH(t){return ci({queryKey:["public-admissions-link"],queryFn:async()=>{const{data:e}=await Be.from("application_links").select("*").order("created_at",{ascending:!1}).limit(1);let n=e&&e[0]&&new Date(e[0].expires_at)>new Date?e[0]:null;if(!n){await Be.from("application_links").update({expires_at:new Date(Date.now()-60*1e3)}).neq("expires_at",null);const{data:r}=await Be.from("application_links").insert([{expires_at:new Date(Date.now()+7*24*3600*1e3)}]).select("*").single();n=r}return`${window.location.origin}/apply/${n.id}`},enabled:t,refetchOnWindowFocus:!1})}function gH({msg:t,onClear:e}){return lt.useEffect(()=>{if(!t)return;const n=setTimeout(e,3500);return()=>clearTimeout(n)},[t,e]),t?E.jsx("div",{className:"fixed left-1/2 -translate-x-1/2 bottom-8 z-50 bg-[#6654b3] text-white rounded-2xl px-8 py-3 shadow-xl text-lg font-semibold fade-in",children:t}):null}function kv({publicMode:t=!1}){const{t:e}=Bn(),{user:n}=_d(),r=(n==null?void 0:n.role)??null,[l,u]=R.useState(""),[g,y]=R.useState(""),[b,x]=R.useState(""),[S,A]=R.useState(""),[N,I]=R.useState(""),[M,j]=R.useState(""),[U,z]=R.useState({}),[q,B]=R.useState({}),[V,H]=R.useState([]),J=R.useRef(null),[X,oe]=R.useState(!1),[Y,be]=R.useState(!1),[Ae,Ee]=R.useState(""),[de,Oe]=R.useState(""),[re,ie]=R.useState(!1),{data:le,refetch:De}=hH(re&&(r==="admin"||r==="staff")),{data:$e=[],isLoading:W}=fH();function Z(ve){z(He=>{const at={...He};return at[ve]?(delete at[ve],B(gt=>{const{[ve]:Ve,...ue}=gt;return ue})):at[ve]={},at})}function ce(ve,He){z(at=>{const gt={...at},Ve={...gt[ve]||{}};return Ve[He]?delete Ve[He]:Ve[He]=[],Object.keys(Ve).length?gt[ve]=Ve:delete gt[ve],gt})}function se(ve,He,at){z(gt=>{const Ve={...gt};return Ve[ve]=Ve[ve]||{},Ve[ve][He]=Ve[ve][He]||[],Ve[ve][He].includes(at)||Ve[ve][He].push(at),Ve})}function Ne(ve,He,at){z(gt=>{const Ve={...gt};return Ve[ve][He].splice(at,1),Ve[ve][He].length||delete Ve[ve][He],Object.keys(Ve[ve]).length||delete Ve[ve],Ve})}const We=ve=>H(He=>[...He,...ve]),Se=ve=>H(He=>He.filter((at,gt)=>gt!==ve));async function ht(ve){if(ve.preventDefault(),Oe(""),!Object.keys(U).length)return Oe(e("selectCourseError"));if(!l.trim())return Oe(e("enterNickError"));oe(!0);const He=[];for(const at of V){const gt=`${Date.now()}-${Math.random().toString(36).slice(2)}.${at.name.split(".").pop()}`,{data:Ve,error:ue}=await Be.storage.from("receipts").upload(gt,at,{cacheControl:"3600"});if(ue){Oe(ue.message),oe(!1);return}const{data:Ue}=Be.storage.from("receipts").getPublicUrl(Ve.path);He.push(Ue.publicUrl)}if(r==="admin"){const{error:at}=await Be.from("students").insert([{nick_name:l,first_name:g,last_name:b,dob:S,parent_line_id:N,parent_phone:M,courses:U,course_limits:q,payment_receipt_urls:He,joined_at:new Date().toISOString()}]);if(at){Oe(at.message),oe(!1);return}Ee(e("studentAdded",{nick:l})),be(!0)}else{const{error:at}=await Be.from("applications").insert([{nick_name:l,first_name:g,last_name:b,dob:S,parent_line_id:N,parent_phone:M,courses:U,course_limits:q,payment_receipt_urls:He,status:"pending"}]);if(at){Oe(at.message),oe(!1);return}Ee(e("applicationSubmitted")),be(!0)}oe(!1)}return lt.useEffect(()=>{if(!t&&Y){const ve=setTimeout(()=>be(!1),1200);return()=>clearTimeout(ve)}},[t,Y]),t&&Y?E.jsx("div",{className:"min-h-[60vh] flex flex-col justify-center items-center bg-[#f6f6f6]",children:E.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-green-50 to-yellow-50 shadow-xl rounded-3xl px-8 py-12 max-w-md w-full flex flex-col items-center",children:[E.jsx("div",{className:"text-3xl font-extrabold mb-3 text-[#6654b3]",children:e("thankYou")}),E.jsxs("div",{className:"text-lg text-gray-700 mb-4 text-center",children:[e("applicationReceived"),E.jsx("br",{}),e("staffWillContact"),E.jsx("br",{}),e("youMayClose")]})]})}):E.jsxs("div",{className:"flex flex-col gap-8 py-10 px-2 sm:px-6 max-w-3xl mx-auto",style:{background:"#f6f6f6"},children:[E.jsxs("header",{className:"mb-4",children:[E.jsx("h1",{className:"text-3xl font-extrabold text-[#6654b3]",children:e("admissionsTitle")}),E.jsx("p",{className:"text-lg text-[#6654b3] mt-2",children:e("admissionsIntro",{staffMsg:e(r==="admin"?"enrollInstant":"contactToConfirm")})})]}),E.jsxs("form",{onSubmit:ht,className:"space-y-8",children:[E.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("studentInfo")}),E.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("nickName")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:l,onChange:ve=>u(ve.target.value),maxLength:40,pattern:".*"})]}),E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("firstName")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:g,onChange:ve=>y(ve.target.value),maxLength:40,pattern:".*"})]}),E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("lastName")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:b,onChange:ve=>x(ve.target.value),maxLength:40,pattern:".*"})]})]}),E.jsxs("label",{className:"flex flex-col gap-1 mt-4 w-full md:w-1/2",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("dob")}),E.jsx("input",{required:!0,type:"date",className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:S,onChange:ve=>A(ve.target.value)})]})]}),E.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("guardian")}),E.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("lineAppId")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:N,onChange:ve=>I(ve.target.value)})]}),E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("phone")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:M,onChange:ve=>j(ve.target.value)})]})]})]}),E.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("courses")}),W?E.jsx("div",{className:"text-gray-400",children:e("loadingCourses")}):$e.length===0?E.jsx("div",{className:"text-gray-400",children:e("noCourses")}):$e.map(ve=>E.jsxs("div",{className:`mb-2 border ${U[ve.id]?"border-[#6654b3] bg-purple-50":"border-gray-200 bg-white"} rounded-xl p-3 transition-all`,children:[E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[E.jsx("input",{type:"checkbox",checked:!!U[ve.id],onChange:()=>Z(ve.id)}),E.jsx("span",{className:"text-lg",children:ve.name}),E.jsx("span",{className:"text-xs text-gray-400",children:e("seats",{count:ve.capacity})})]}),U[ve.id]&&E.jsxs("div",{className:"ml-8 mt-2 mb-2",children:[ve.weekdays.map(He=>{var at,gt;return E.jsxs("div",{className:"mb-1",children:[E.jsxs("label",{className:"font-semibold mr-2",children:[E.jsx("input",{type:"checkbox",className:"mr-1",checked:!!((at=U[ve.id])!=null&&at[He]),onChange:()=>ce(ve.id,He)}),He]}),!!((gt=U[ve.id])!=null&&gt[He])&&E.jsxs(E.Fragment,{children:[U[ve.id][He].map((Ve,ue)=>E.jsxs("span",{className:"inline-flex items-center bg-[#ece6fc] rounded-full px-3 py-0.5 text-xs mr-2 mt-1",children:[Ve,E.jsx("button",{type:"button",className:"ml-1 text-red-500 font-bold",onClick:()=>Ne(ve.id,He,ue),children:""})]},ue)),E.jsxs("select",{className:"border rounded px-2 py-1 text-sm ml-2",defaultValue:"",onChange:Ve=>{Ve.target.value&&(se(ve.id,He,Ve.target.value),Ve.target.value="")},children:[E.jsx("option",{value:"",children:e("addTime")}),(ve.times[He]||[]).filter(Ve=>{var ue;return!((ue=U[ve.id][He])!=null&&ue.includes(Ve))}).map(Ve=>E.jsx("option",{children:Ve},Ve))]})]})]},He)}),E.jsx("div",{className:"mt-2",children:E.jsxs("label",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("hoursPurchased")}),E.jsx("input",{type:"number",min:1,className:"w-20 border rounded px-2 py-1 bg-purple-50",value:q[ve.id]??"",onChange:He=>B(at=>({...at,[ve.id]:Number(He.target.value)})),required:!!U[ve.id]})]})})]})]},ve.id))]}),E.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("paymentReceipt")}),E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx("button",{type:"button",onClick:()=>{var ve;return(ve=J.current)==null?void 0:ve.click()},className:"rounded-full border border-[#ece6fc] bg-purple-50 text-[#6654b3] px-5 py-2 font-semibold hover:bg-purple-100 transition",children:e("chooseFiles")}),E.jsx("input",{ref:J,type:"file",multiple:!0,accept:"image/*,application/pdf",className:"hidden",onChange:ve=>ve.target.files&&We(Array.from(ve.target.files))}),V.length>0&&E.jsx("ul",{className:"mt-2 space-y-1",children:V.map((ve,He)=>E.jsxs("li",{className:"flex items-center bg-[#ece6fc] rounded-full px-3 py-1 text-sm",children:[E.jsx("span",{className:"truncate max-w-[180px]",children:ve.name}),E.jsx("button",{type:"button",className:"ml-2 text-red-500 font-bold",onClick:()=>Se(He),children:""})]},He))})]})]}),E.jsx(gH,{msg:Ae||de,onClear:()=>{Ee(""),Oe("")}}),E.jsx("div",{className:"flex justify-end",children:E.jsx("button",{type:"submit",disabled:X,className:"bg-[#6654b3] hover:bg-purple-700 text-white font-bold px-8 py-3 rounded-xl shadow disabled:opacity-50 transition",children:e(r==="admin"?X?"adding":"addStudent":X?"submitting":"submitApplication")})}),!t&&(r==="admin"||r==="staff")&&E.jsxs("div",{className:"mt-12 flex flex-col items-center gap-2",children:[E.jsx("button",{type:"button",onClick:()=>{ie(!0),De()},className:"px-5 py-2 rounded-full font-semibold border bg-[#f6f6f6] text-[#6654b3] border-[#ece6fc] hover:bg-[#ece6fc] transition",children:e(le?"refreshPublicAdmissionsLink":"showPublicAdmissionsLink")}),re&&le&&E.jsxs("div",{className:"flex items-center gap-2 mt-2 bg-[#ece6fc] px-4 py-2 rounded-xl w-full max-w-lg",children:[E.jsx("input",{readOnly:!0,className:"flex-1 bg-transparent outline-none",value:le}),E.jsx("button",{onClick:()=>navigator.clipboard.writeText(le),className:"text-[#6654b3] hover:underline font-bold px-2",children:e("copy")})]})]})]})]})}var Ye;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ye||(Ye={}));var jv=new Map([[Ye.QR_CODE,"QR_CODE"],[Ye.AZTEC,"AZTEC"],[Ye.CODABAR,"CODABAR"],[Ye.CODE_39,"CODE_39"],[Ye.CODE_93,"CODE_93"],[Ye.CODE_128,"CODE_128"],[Ye.DATA_MATRIX,"DATA_MATRIX"],[Ye.MAXICODE,"MAXICODE"],[Ye.ITF,"ITF"],[Ye.EAN_13,"EAN_13"],[Ye.EAN_8,"EAN_8"],[Ye.PDF_417,"PDF_417"],[Ye.RSS_14,"RSS_14"],[Ye.RSS_EXPANDED,"RSS_EXPANDED"],[Ye.UPC_A,"UPC_A"],[Ye.UPC_E,"UPC_E"],[Ye.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Bv;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Bv||(Bv={}));function mH(t){return Object.values(Ye).includes(t)}var oo;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(oo||(oo={}));var Hs=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[oo.SCAN_TYPE_CAMERA,oo.SCAN_TYPE_FILE],t}(),EC=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!jv.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,jv.get(e))},t}(),Pv=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),km;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(km||(km={}));var CC=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:km.UNKWOWN_ERROR}},t}(),AC=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function hr(t){return typeof t>"u"||t===null}function pH(t,e,n){return t>n?n:t<e?e:t}var fc=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),en=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),Uv=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),TC=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],u=new Set(l),g=Object.keys(e),y=0,b=g;y<b.length;y++){var x=b[y];if(u.has(x))return n.logError("".concat(x," is not supported videoConstaints."),!0),!1}return!0},t}(),qu={exports:{}},xH=qu.exports,Fv;function yH(){return Fv||(Fv=1,function(t,e){(function(n,r){r(e)})(xH,function(n){function r(L){return L==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,s){L.__proto__=s}||function(L,s){for(var o in s)s.hasOwnProperty(o)&&(L[o]=s[o])};function u(L,s){l(L,s);function o(){this.constructor=L}L.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}function g(L,s){var o=Object.setPrototypeOf;o?o(L,s):L.__proto__=s}function y(L,s){s===void 0&&(s=L.constructor);var o=Error.captureStackTrace;o&&o(L,s)}var b=function(L){u(s,L);function s(o){var c=this.constructor,f=L.call(this,o)||this;return Object.defineProperty(f,"name",{value:c.name,enumerable:!1}),g(f,c.prototype),y(f),f}return s}(Error);class x extends b{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}x.kind="Exception";class S extends x{}S.kind="ArgumentException";class A extends x{}A.kind="IllegalArgumentException";class N{constructor(s){if(this.binarizer=s,s===null)throw new A("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,o){return this.binarizer.getBlackRow(s,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,o,c,f){const h=this.binarizer.getLuminanceSource().crop(s,o,c,f);return new N(this.binarizer.createBinarizer(h))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new N(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new N(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class I extends x{static getChecksumInstance(){return new I}}I.kind="ChecksumException";class M{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class j{static arraycopy(s,o,c,f,h){for(;h--;)c[f++]=s[o++]}static currentTimeMillis(){return Date.now()}}class U extends x{}U.kind="IndexOutOfBoundsException";class z extends U{constructor(s=void 0,o=void 0){super(o),this.index=s,this.message=o}}z.kind="ArrayIndexOutOfBoundsException";class q{static fill(s,o){for(let c=0,f=s.length;c<f;c++)s[c]=o}static fillWithin(s,o,c,f){q.rangeCheck(s.length,o,c);for(let h=o;h<c;h++)s[h]=f}static rangeCheck(s,o,c){if(o>c)throw new A("fromIndex("+o+") > toIndex("+c+")");if(o<0)throw new z(o);if(c>s)throw new z(c)}static asList(...s){return s}static create(s,o,c){return Array.from({length:s}).map(h=>Array.from({length:o}).fill(c))}static createInt32Array(s,o,c){return Array.from({length:s}).map(h=>Int32Array.from({length:o}).fill(c))}static equals(s,o){if(!s||!o||!s.length||!o.length||s.length!==o.length)return!1;for(let c=0,f=s.length;c<f;c++)if(s[c]!==o[c])return!1;return!0}static hashCode(s){if(s===null)return 0;let o=1;for(const c of s)o=31*o+c;return o}static fillUint8Array(s,o){for(let c=0;c!==s.length;c++)s[c]=o}static copyOf(s,o){return s.slice(0,o)}static copyOfUint8Array(s,o){if(s.length<=o){const c=new Uint8Array(o);return c.set(s),c}return s.slice(0,o)}static copyOfRange(s,o,c){const f=c-o,h=new Int32Array(f);return j.arraycopy(s,o,h,0,f),h}static binarySearch(s,o,c){c===void 0&&(c=q.numberComparator);let f=0,h=s.length-1;for(;f<=h;){const p=h+f>>1,w=c(o,s[p]);if(w>0)f=p+1;else if(w<0)h=p-1;else return p}return-f-1}static numberComparator(s,o){return s-o}}class B{static numberOfTrailingZeros(s){let o;if(s===0)return 32;let c=31;return o=s<<16,o!==0&&(c-=16,s=o),o=s<<8,o!==0&&(c-=8,s=o),o=s<<4,o!==0&&(c-=4,s=o),o=s<<2,o!==0&&(c-=2,s=o),c-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let o=1;return s>>>16||(o+=16,s<<=16),s>>>24||(o+=8,s<<=8),s>>>28||(o+=4,s<<=4),s>>>30||(o+=2,s<<=2),o-=s>>>31,o}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,o){return Math.trunc(s/o)}static parseInt(s,o=void 0){return parseInt(s,o)}}B.MIN_VALUE_32_BITS=-2147483648,B.MAX_VALUE=Number.MAX_SAFE_INTEGER;class V{constructor(s,o){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,o==null?this.bits=V.makeArray(s):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const o=V.makeArray(s);j.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const o=this.size;if(s>=o)return o;const c=this.bits;let f=Math.floor(s/32),h=c[f];h&=~((1<<(s&31))-1);const p=c.length;for(;h===0;){if(++f===p)return o;h=c[f]}const w=f*32+B.numberOfTrailingZeros(h);return w>o?o:w}getNextUnset(s){const o=this.size;if(s>=o)return o;const c=this.bits;let f=Math.floor(s/32),h=~c[f];h&=~((1<<(s&31))-1);const p=c.length;for(;h===0;){if(++f===p)return o;h=~c[f]}const w=f*32+B.numberOfTrailingZeros(h);return w>o?o:w}setBulk(s,o){this.bits[Math.floor(s/32)]=o}setRange(s,o){if(o<s||s<0||o>this.size)throw new A;if(o===s)return;o--;const c=Math.floor(s/32),f=Math.floor(o/32),h=this.bits;for(let p=c;p<=f;p++){const w=p>c?0:s&31,_=(2<<(p<f?31:o&31))-(1<<w);h[p]|=_}}clear(){const s=this.bits.length,o=this.bits;for(let c=0;c<s;c++)o[c]=0}isRange(s,o,c){if(o<s||s<0||o>this.size)throw new A;if(o===s)return!0;o--;const f=Math.floor(s/32),h=Math.floor(o/32),p=this.bits;for(let w=f;w<=h;w++){const C=w>f?0:s&31,O=(2<<(w<h?31:o&31))-(1<<C)&4294967295;if((p[w]&O)!==(c?O:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,o){if(o<0||o>32)throw new A("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let c=o;c>0;c--)this.appendBit((s>>c-1&1)===1)}appendBitArray(s){const o=s.size;this.ensureCapacity(this.size+o);for(let c=0;c<o;c++)this.appendBit(s.get(c))}xor(s){if(this.size!==s.size)throw new A("Sizes don't match");const o=this.bits;for(let c=0,f=o.length;c<f;c++)o[c]^=s.bits[c]}toBytes(s,o,c,f){for(let h=0;h<f;h++){let p=0;for(let w=0;w<8;w++)this.get(s)&&(p|=1<<7-w),s++;o[c+h]=p}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),c=o+1,f=this.bits;for(let h=0;h<c;h++){let p=f[h];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,s[o-h]=p}if(this.size!==c*32){const h=c*32-this.size;let p=s[0]>>>h;for(let w=1;w<c;w++){const C=s[w];p|=C<<32-h,s[w-1]=p,p=C>>>h}s[c-1]=p}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof V))return!1;const o=s;return this.size===o.size&&q.equals(this.bits,o.bits)}hashCode(){return 31*this.size+q.hashCode(this.bits)}toString(){let s="";for(let o=0,c=this.size;o<c;o++)(o&7)===0&&(s+=" "),s+=this.get(o)?"X":".";return s}clone(){return new V(this.size,this.bits.slice())}}var H;(function(L){L[L.OTHER=0]="OTHER",L[L.PURE_BARCODE=1]="PURE_BARCODE",L[L.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",L[L.TRY_HARDER=3]="TRY_HARDER",L[L.CHARACTER_SET=4]="CHARACTER_SET",L[L.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",L[L.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",L[L.ASSUME_GS1=7]="ASSUME_GS1",L[L.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",L[L.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",L[L.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(H||(H={}));var J=H;class X extends x{static getFormatInstance(){return new X}}X.kind="FormatException";var oe;(function(L){L[L.Cp437=0]="Cp437",L[L.ISO8859_1=1]="ISO8859_1",L[L.ISO8859_2=2]="ISO8859_2",L[L.ISO8859_3=3]="ISO8859_3",L[L.ISO8859_4=4]="ISO8859_4",L[L.ISO8859_5=5]="ISO8859_5",L[L.ISO8859_6=6]="ISO8859_6",L[L.ISO8859_7=7]="ISO8859_7",L[L.ISO8859_8=8]="ISO8859_8",L[L.ISO8859_9=9]="ISO8859_9",L[L.ISO8859_10=10]="ISO8859_10",L[L.ISO8859_11=11]="ISO8859_11",L[L.ISO8859_13=12]="ISO8859_13",L[L.ISO8859_14=13]="ISO8859_14",L[L.ISO8859_15=14]="ISO8859_15",L[L.ISO8859_16=15]="ISO8859_16",L[L.SJIS=16]="SJIS",L[L.Cp1250=17]="Cp1250",L[L.Cp1251=18]="Cp1251",L[L.Cp1252=19]="Cp1252",L[L.Cp1256=20]="Cp1256",L[L.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",L[L.UTF8=22]="UTF8",L[L.ASCII=23]="ASCII",L[L.Big5=24]="Big5",L[L.GB18030=25]="GB18030",L[L.EUC_KR=26]="EUC_KR"})(oe||(oe={}));class Y{constructor(s,o,c,...f){this.valueIdentifier=s,this.name=c,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=f,Y.VALUE_IDENTIFIER_TO_ECI.set(s,this),Y.NAME_TO_ECI.set(c,this);const h=this.values;for(let p=0,w=h.length;p!==w;p++){const C=h[p];Y.VALUES_TO_ECI.set(C,this)}for(const p of f)Y.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new X("incorect value");const o=Y.VALUES_TO_ECI.get(s);if(o===void 0)throw new X("incorect value");return o}static getCharacterSetECIByName(s){const o=Y.NAME_TO_ECI.get(s);if(o===void 0)throw new X("incorect value");return o}equals(s){if(!(s instanceof Y))return!1;const o=s;return this.getName()===o.getName()}}Y.VALUE_IDENTIFIER_TO_ECI=new Map,Y.VALUES_TO_ECI=new Map,Y.NAME_TO_ECI=new Map,Y.Cp437=new Y(oe.Cp437,Int32Array.from([0,2]),"Cp437"),Y.ISO8859_1=new Y(oe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Y.ISO8859_2=new Y(oe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Y.ISO8859_3=new Y(oe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Y.ISO8859_4=new Y(oe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Y.ISO8859_5=new Y(oe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Y.ISO8859_6=new Y(oe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Y.ISO8859_7=new Y(oe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Y.ISO8859_8=new Y(oe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Y.ISO8859_9=new Y(oe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Y.ISO8859_10=new Y(oe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Y.ISO8859_11=new Y(oe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Y.ISO8859_13=new Y(oe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Y.ISO8859_14=new Y(oe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Y.ISO8859_15=new Y(oe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Y.ISO8859_16=new Y(oe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Y.SJIS=new Y(oe.SJIS,20,"SJIS","Shift_JIS"),Y.Cp1250=new Y(oe.Cp1250,21,"Cp1250","windows-1250"),Y.Cp1251=new Y(oe.Cp1251,22,"Cp1251","windows-1251"),Y.Cp1252=new Y(oe.Cp1252,23,"Cp1252","windows-1252"),Y.Cp1256=new Y(oe.Cp1256,24,"Cp1256","windows-1256"),Y.UnicodeBigUnmarked=new Y(oe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Y.UTF8=new Y(oe.UTF8,26,"UTF8","UTF-8"),Y.ASCII=new Y(oe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Y.Big5=new Y(oe.Big5,28,"Big5"),Y.GB18030=new Y(oe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Y.EUC_KR=new Y(oe.EUC_KR,30,"EUC_KR","EUC-KR");class be extends x{}be.kind="UnsupportedOperationException";class Ae{static decode(s,o){const c=this.encodingName(o);return this.customDecoder?this.customDecoder(s,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(s,c):new TextDecoder(c).decode(s)}static shouldDecodeOnFallback(s){return!Ae.isBrowser()&&s==="ISO-8859-1"}static encode(s,o){const c=this.encodingName(o);return this.customEncoder?this.customEncoder(s,c):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof Y?s:Y.getCharacterSetECIByName(s)}static decodeFallback(s,o){const c=this.encodingCharacterSet(o);if(Ae.isDecodeFallbackSupported(c)){let f="";for(let h=0,p=s.length;h<p;h++){let w=s[h].toString(16);w.length<2&&(w="0"+w),f+="%"+w}return decodeURIComponent(f)}if(c.equals(Y.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new be(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(Y.UTF8)||s.equals(Y.ISO8859_1)||s.equals(Y.ASCII)}static encodeFallback(s){const c=btoa(unescape(encodeURIComponent(s))).split(""),f=[];for(let h=0;h<c.length;h++)f.push(c[h].charCodeAt(0));return new Uint8Array(f)}}class Ee{static castAsNonUtf8Char(s,o=null){const c=o?o.getName():this.ISO88591;return Ae.decode(new Uint8Array([s]),c)}static guessEncoding(s,o){if(o!=null&&o.get(J.CHARACTER_SET)!==void 0)return o.get(J.CHARACTER_SET).toString();const c=s.length;let f=!0,h=!0,p=!0,w=0,C=0,_=0,O=0,k=0,P=0,G=0,Q=0,te=0,fe=0,xe=0;const Me=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let Le=0;Le<c&&(f||h||p);Le++){const Ie=s[Le]&255;p&&(w>0?(Ie&128)===0?p=!1:w--:(Ie&128)!==0&&((Ie&64)===0?p=!1:(w++,(Ie&32)===0?C++:(w++,(Ie&16)===0?_++:(w++,(Ie&8)===0?O++:p=!1))))),f&&(Ie>127&&Ie<160?f=!1:Ie>159&&(Ie<192||Ie===215||Ie===247)&&xe++),h&&(k>0?Ie<64||Ie===127||Ie>252?h=!1:k--:Ie===128||Ie===160||Ie>239?h=!1:Ie>160&&Ie<224?(P++,Q=0,G++,G>te&&(te=G)):Ie>127?(k++,G=0,Q++,Q>fe&&(fe=Q)):(G=0,Q=0))}return p&&w>0&&(p=!1),h&&k>0&&(h=!1),p&&(Me||C+_+O>0)?Ee.UTF8:h&&(Ee.ASSUME_SHIFT_JIS||te>=3||fe>=3)?Ee.SHIFT_JIS:f&&h?te===2&&P===2||xe*10>=c?Ee.SHIFT_JIS:Ee.ISO88591:f?Ee.ISO88591:h?Ee.SHIFT_JIS:p?Ee.UTF8:Ee.PLATFORM_DEFAULT_ENCODING}static format(s,...o){let c=-1;function f(p,w,C,_,O,k){if(p==="%%")return"%";if(o[++c]===void 0)return;p=_?parseInt(_.substr(1)):void 0;let P=O?parseInt(O.substr(1)):void 0,G;switch(k){case"s":G=o[c];break;case"c":G=o[c][0];break;case"f":G=parseFloat(o[c]).toFixed(p);break;case"p":G=parseFloat(o[c]).toPrecision(p);break;case"e":G=parseFloat(o[c]).toExponential(p);break;case"x":G=parseInt(o[c]).toString(P||16);break;case"d":G=parseFloat(parseInt(o[c],P||10).toPrecision(p)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(P);let Q=parseInt(C),te=C&&C[0]+""=="0"?"0":" ";for(;G.length<Q;)G=w!==void 0?G+te:te+G;return G}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(h,f)}static getBytes(s,o){return Ae.encode(s,o)}static getCharCode(s,o=0){return s.charCodeAt(o)}static getCharAt(s){return String.fromCharCode(s)}}Ee.SHIFT_JIS=Y.SJIS.getName(),Ee.GB2312="GB2312",Ee.ISO88591=Y.ISO8859_1.getName(),Ee.EUC_JP="EUC_JP",Ee.UTF8=Y.UTF8.getName(),Ee.PLATFORM_DEFAULT_ENCODING=Ee.UTF8,Ee.ASSUME_SHIFT_JIS=!1;class de{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=Ee.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,o,c){for(let f=o;o<o+c;f++)this.append(s[f]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,o){this.value=this.value.substr(0,s)+o+this.value.substr(s+1)}substring(s,o){return this.value.substring(s,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,o){this.value=this.value.substr(0,s)+o+this.value.substr(s+o.length)}}class Oe{constructor(s,o,c,f){if(this.width=s,this.height=o,this.rowSize=c,this.bits=f,o==null&&(o=s),this.height=o,s<1||o<1)throw new A("Both dimensions must be greater than 0");c==null&&(c=Math.floor((s+31)/32)),this.rowSize=c,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const o=s.length,c=s[0].length,f=new Oe(c,o);for(let h=0;h<o;h++){const p=s[h];for(let w=0;w<c;w++)p[w]&&f.set(w,h)}return f}static parseFromString(s,o,c){if(s===null)throw new A("stringRepresentation cannot be null");const f=new Array(s.length);let h=0,p=0,w=-1,C=0,_=0;for(;_<s.length;)if(s.charAt(_)===`
`||s.charAt(_)==="\r"){if(h>p){if(w===-1)w=h-p;else if(h-p!==w)throw new A("row lengths do not match");p=h,C++}_++}else if(s.substring(_,_+o.length)===o)_+=o.length,f[h]=!0,h++;else if(s.substring(_,_+c.length)===c)_+=c.length,f[h]=!1,h++;else throw new A("illegal character encountered: "+s.substring(_));if(h>p){if(w===-1)w=h-p;else if(h-p!==w)throw new A("row lengths do not match");C++}const O=new Oe(w,C);for(let k=0;k<h;k++)f[k]&&O.set(Math.floor(k%w),Math.floor(k/w));return O}get(s,o){const c=o*this.rowSize+Math.floor(s/32);return(this.bits[c]>>>(s&31)&1)!==0}set(s,o){const c=o*this.rowSize+Math.floor(s/32);this.bits[c]|=1<<(s&31)&4294967295}unset(s,o){const c=o*this.rowSize+Math.floor(s/32);this.bits[c]&=~(1<<(s&31)&4294967295)}flip(s,o){const c=o*this.rowSize+Math.floor(s/32);this.bits[c]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new A("input matrix dimensions do not match");const o=new V(Math.floor(this.width/32)+1),c=this.rowSize,f=this.bits;for(let h=0,p=this.height;h<p;h++){const w=h*c,C=s.getRow(h,o).getBitArray();for(let _=0;_<c;_++)f[w+_]^=C[_]}}clear(){const s=this.bits,o=s.length;for(let c=0;c<o;c++)s[c]=0}setRegion(s,o,c,f){if(o<0||s<0)throw new A("Left and top must be nonnegative");if(f<1||c<1)throw new A("Height and width must be at least 1");const h=s+c,p=o+f;if(p>this.height||h>this.width)throw new A("The region must fit inside the matrix");const w=this.rowSize,C=this.bits;for(let _=o;_<p;_++){const O=_*w;for(let k=s;k<h;k++)C[O+Math.floor(k/32)]|=1<<(k&31)&4294967295}}getRow(s,o){o==null||o.getSize()<this.width?o=new V(this.width):o.clear();const c=this.rowSize,f=this.bits,h=s*c;for(let p=0;p<c;p++)o.setBulk(p*32,f[h+p]);return o}setRow(s,o){j.arraycopy(o.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),o=this.getHeight();let c=new V(s),f=new V(s);for(let h=0,p=Math.floor((o+1)/2);h<p;h++)c=this.getRow(h,c),f=this.getRow(o-1-h,f),c.reverse(),f.reverse(),this.setRow(h,f),this.setRow(o-1-h,c)}getEnclosingRectangle(){const s=this.width,o=this.height,c=this.rowSize,f=this.bits;let h=s,p=o,w=-1,C=-1;for(let _=0;_<o;_++)for(let O=0;O<c;O++){const k=f[_*c+O];if(k!==0){if(_<p&&(p=_),_>C&&(C=_),O*32<h){let P=0;for(;(k<<31-P&4294967295)===0;)P++;O*32+P<h&&(h=O*32+P)}if(O*32+31>w){let P=31;for(;!(k>>>P);)P--;O*32+P>w&&(w=O*32+P)}}}return w<h||C<p?null:Int32Array.from([h,p,w-h+1,C-p+1])}getTopLeftOnBit(){const s=this.rowSize,o=this.bits;let c=0;for(;c<o.length&&o[c]===0;)c++;if(c===o.length)return null;const f=c/s;let h=c%s*32;const p=o[c];let w=0;for(;(p<<31-w&4294967295)===0;)w++;return h+=w,Int32Array.from([h,f])}getBottomRightOnBit(){const s=this.rowSize,o=this.bits;let c=o.length-1;for(;c>=0&&o[c]===0;)c--;if(c<0)return null;const f=Math.floor(c/s);let h=Math.floor(c%s)*32;const p=o[c];let w=31;for(;!(p>>>w);)w--;return h+=w,Int32Array.from([h,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof Oe))return!1;const o=s;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&q.equals(this.bits,o.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+q.hashCode(this.bits),s}toString(s="X ",o="  ",c=`
`){return this.buildToString(s,o,c)}buildToString(s,o,c){let f=new de;for(let h=0,p=this.height;h<p;h++){for(let w=0,C=this.width;w<C;w++)f.append(this.get(w,h)?s:o);f.append(c)}return f.toString()}clone(){return new Oe(this.width,this.height,this.rowSize,this.bits.slice())}}class re extends x{static getNotFoundInstance(){return new re}}re.kind="NotFoundException";class ie extends M{constructor(s){super(s),this.luminances=ie.EMPTY,this.buckets=new Int32Array(ie.LUMINANCE_BUCKETS)}getBlackRow(s,o){const c=this.getLuminanceSource(),f=c.getWidth();o==null||o.getSize()<f?o=new V(f):o.clear(),this.initArrays(f);const h=c.getRow(s,this.luminances),p=this.buckets;for(let C=0;C<f;C++)p[(h[C]&255)>>ie.LUMINANCE_SHIFT]++;const w=ie.estimateBlackPoint(p);if(f<3)for(let C=0;C<f;C++)(h[C]&255)<w&&o.set(C);else{let C=h[0]&255,_=h[1]&255;for(let O=1;O<f-1;O++){const k=h[O+1]&255;(_*4-C-k)/2<w&&o.set(O),C=_,_=k}}return o}getBlackMatrix(){const s=this.getLuminanceSource(),o=s.getWidth(),c=s.getHeight(),f=new Oe(o,c);this.initArrays(o);const h=this.buckets;for(let C=1;C<5;C++){const _=Math.floor(c*C/5),O=s.getRow(_,this.luminances),k=Math.floor(o*4/5);for(let P=Math.floor(o/5);P<k;P++){const G=O[P]&255;h[G>>ie.LUMINANCE_SHIFT]++}}const p=ie.estimateBlackPoint(h),w=s.getMatrix();for(let C=0;C<c;C++){const _=C*o;for(let O=0;O<o;O++)(w[_+O]&255)<p&&f.set(O,C)}return f}createBinarizer(s){return new ie(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const o=this.buckets;for(let c=0;c<ie.LUMINANCE_BUCKETS;c++)o[c]=0}static estimateBlackPoint(s){const o=s.length;let c=0,f=0,h=0;for(let O=0;O<o;O++)s[O]>h&&(f=O,h=s[O]),s[O]>c&&(c=s[O]);let p=0,w=0;for(let O=0;O<o;O++){const k=O-f,P=s[O]*k*k;P>w&&(p=O,w=P)}if(f>p){const O=f;f=p,p=O}if(p-f<=o/16)throw new re;let C=p-1,_=-1;for(let O=p-1;O>f;O--){const k=O-f,P=k*k*(p-O)*(c-s[O]);P>_&&(C=O,_=P)}return C<<ie.LUMINANCE_SHIFT}}ie.LUMINANCE_BITS=5,ie.LUMINANCE_SHIFT=8-ie.LUMINANCE_BITS,ie.LUMINANCE_BUCKETS=1<<ie.LUMINANCE_BITS,ie.EMPTY=Uint8ClampedArray.from([0]);class le extends ie{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),o=s.getWidth(),c=s.getHeight();if(o>=le.MINIMUM_DIMENSION&&c>=le.MINIMUM_DIMENSION){const f=s.getMatrix();let h=o>>le.BLOCK_SIZE_POWER;(o&le.BLOCK_SIZE_MASK)!==0&&h++;let p=c>>le.BLOCK_SIZE_POWER;(c&le.BLOCK_SIZE_MASK)!==0&&p++;const w=le.calculateBlackPoints(f,h,p,o,c),C=new Oe(o,c);le.calculateThresholdForBlock(f,h,p,o,c,w,C),this.matrix=C}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new le(s)}static calculateThresholdForBlock(s,o,c,f,h,p,w){const C=h-le.BLOCK_SIZE,_=f-le.BLOCK_SIZE;for(let O=0;O<c;O++){let k=O<<le.BLOCK_SIZE_POWER;k>C&&(k=C);const P=le.cap(O,2,c-3);for(let G=0;G<o;G++){let Q=G<<le.BLOCK_SIZE_POWER;Q>_&&(Q=_);const te=le.cap(G,2,o-3);let fe=0;for(let Me=-2;Me<=2;Me++){const Le=p[P+Me];fe+=Le[te-2]+Le[te-1]+Le[te]+Le[te+1]+Le[te+2]}const xe=fe/25;le.thresholdBlock(s,Q,k,xe,f,w)}}}static cap(s,o,c){return s<o?o:s>c?c:s}static thresholdBlock(s,o,c,f,h,p){for(let w=0,C=c*h+o;w<le.BLOCK_SIZE;w++,C+=h)for(let _=0;_<le.BLOCK_SIZE;_++)(s[C+_]&255)<=f&&p.set(o+_,c+w)}static calculateBlackPoints(s,o,c,f,h){const p=h-le.BLOCK_SIZE,w=f-le.BLOCK_SIZE,C=new Array(c);for(let _=0;_<c;_++){C[_]=new Int32Array(o);let O=_<<le.BLOCK_SIZE_POWER;O>p&&(O=p);for(let k=0;k<o;k++){let P=k<<le.BLOCK_SIZE_POWER;P>w&&(P=w);let G=0,Q=255,te=0;for(let xe=0,Me=O*f+P;xe<le.BLOCK_SIZE;xe++,Me+=f){for(let Le=0;Le<le.BLOCK_SIZE;Le++){const Ie=s[Me+Le]&255;G+=Ie,Ie<Q&&(Q=Ie),Ie>te&&(te=Ie)}if(te-Q>le.MIN_DYNAMIC_RANGE)for(xe++,Me+=f;xe<le.BLOCK_SIZE;xe++,Me+=f)for(let Le=0;Le<le.BLOCK_SIZE;Le++)G+=s[Me+Le]&255}let fe=G>>le.BLOCK_SIZE_POWER*2;if(te-Q<=le.MIN_DYNAMIC_RANGE&&(fe=Q/2,_>0&&k>0)){const xe=(C[_-1][k]+2*C[_][k-1]+C[_-1][k-1])/4;Q<xe&&(fe=xe)}C[_][k]=fe}}return C}}le.BLOCK_SIZE_POWER=3,le.BLOCK_SIZE=1<<le.BLOCK_SIZE_POWER,le.BLOCK_SIZE_MASK=le.BLOCK_SIZE-1,le.MINIMUM_DIMENSION=le.BLOCK_SIZE*5,le.MIN_DYNAMIC_RANGE=24;class De{constructor(s,o){this.width=s,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,o,c,f){throw new be("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new be("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new be("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let o=new de;for(let c=0;c<this.height;c++){const f=this.getRow(c,s);for(let h=0;h<this.width;h++){const p=f[h]&255;let w;p<64?w="#":p<128?w="+":p<192?w=".":w=" ",o.append(w)}o.append(`
`)}return o.toString()}}class $e extends De{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,o){const c=this.delegate.getRow(s,o),f=this.getWidth();for(let h=0;h<f;h++)c[h]=255-(c[h]&255);return c}getMatrix(){const s=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(o);for(let f=0;f<o;f++)c[f]=255-(s[f]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(s,o,c,f){return new $e(this.delegate.crop(s,o,c,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new $e(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new $e(this.delegate.rotateCounterClockwise45())}}class W extends De{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=W.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const o=s.getContext("2d").getImageData(0,0,s.width,s.height);return W.toGrayscaleBuffer(o.data,s.width,s.height)}static toGrayscaleBuffer(s,o,c){const f=new Uint8ClampedArray(o*c);for(let h=0,p=0,w=s.length;h<w;h+=4,p++){let C;if(s[h+3]===0)C=255;else{const O=s[h],k=s[h+1],P=s[h+2];C=306*O+601*k+117*P+512>>10}f[p]=C}return f}getRow(s,o){if(s<0||s>=this.getHeight())throw new A("Requested row is outside the image: "+s);const c=this.getWidth(),f=s*c;return o===null?o=this.buffer.slice(f,f+c):(o.length<c&&(o=new Uint8ClampedArray(c)),o.set(this.buffer.slice(f,f+c))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,o,c,f){return super.crop(s,o,c,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const o=this.getTempCanvasElement(),c=o.getContext("2d"),f=s*W.DEGREE_TO_RADIANS,h=this.canvas.width,p=this.canvas.height,w=Math.ceil(Math.abs(Math.cos(f))*h+Math.abs(Math.sin(f))*p),C=Math.ceil(Math.abs(Math.sin(f))*h+Math.abs(Math.cos(f))*p);return o.width=w,o.height=C,c.translate(w/2,C/2),c.rotate(f),c.drawImage(this.canvas,h/-2,p/-2),this.buffer=W.makeBufferFromCanvasImageData(o),this}invert(){return new $e(this)}}W.DEGREE_TO_RADIANS=Math.PI/180;class Z{constructor(s,o,c){this.deviceId=s,this.label=o,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ce=(globalThis||qf||self||window||void 0)&&(globalThis||qf||self||window||void 0).__awaiter||function(L,s,o,c){function f(h){return h instanceof o?h:new o(function(p){p(h)})}return new(o||(o=Promise))(function(h,p){function w(O){try{_(c.next(O))}catch(k){p(k)}}function C(O){try{_(c.throw(O))}catch(k){p(k)}}function _(O){O.done?h(O.value):f(O.value).then(w,C)}_((c=c.apply(L,s||[])).next())})};class se{constructor(s,o=500,c){this.reader=s,this.timeBetweenScansMillis=o,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return ce(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const c of s){const f=c.kind==="video"?"videoinput":c.kind;if(f!=="videoinput")continue;const h=c.deviceId||c.id,p=c.label||`Video device ${o.length+1}`,w=c.groupId,C={deviceId:h,label:p,kind:f,groupId:w};o.push(C)}return o})}getVideoInputDevices(){return ce(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new Z(o.deviceId,o.label))})}findDeviceById(s){return ce(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(c=>c.deviceId===s):null})}decodeFromInputVideoDevice(s,o){return ce(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,o)})}decodeOnceFromVideoDevice(s,o){return ce(this,void 0,void 0,function*(){this.reset();let c;s?c={deviceId:{exact:s}}:c={facingMode:"environment"};const f={video:c};return yield this.decodeOnceFromConstraints(f,o)})}decodeOnceFromConstraints(s,o){return ce(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(c,o)})}decodeOnceFromStream(s,o){return ce(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(s,o);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(s,o,c){return ce(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,o,c)})}decodeFromVideoDevice(s,o,c){return ce(this,void 0,void 0,function*(){let f;s?f={deviceId:{exact:s}}:f={facingMode:"environment"};const h={video:f};return yield this.decodeFromConstraints(h,o,c)})}decodeFromConstraints(s,o,c){return ce(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(f,o,c)})}decodeFromStream(s,o,c){return ce(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(s,o);return yield this.decodeContinuously(f,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,o){return ce(this,void 0,void 0,function*(){const c=this.prepareVideoElement(o);return this.addVideoSource(c,s),this.videoElement=c,this.stream=s,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(s){return new Promise((o,c)=>this.playVideoOnLoad(s,()=>o()))}playVideoOnLoad(s,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",o),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return ce(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,o){const c=document.getElementById(s);if(!c)throw new S(`element with id '${s}' not found`);if(c.nodeName.toLowerCase()!==o.toLowerCase())throw new S(`element with id '${s}' must be an ${o} element`);return c}decodeFromImage(s,o){if(!s&&!o)throw new S("either imageElement with a src set or an url must be provided");return o&&!s?this.decodeFromImageUrl(o):this.decodeFromImageElement(s)}decodeFromVideo(s,o){if(!s&&!o)throw new S("Either an element with a src set or an URL must be provided");return o&&!s?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,o,c){if(s===void 0&&o===void 0)throw new S("Either an element with a src set or an URL must be provided");return o&&!s?this.decodeFromVideoUrlContinuously(o,c):this.decodeFromVideoElementContinuously(s,c)}decodeFromImageElement(s){if(!s)throw new S("An image element must be provided.");this.reset();const o=this.prepareImageElement(s);this.imageElement=o;let c;return this.isImageLoaded(o)?c=this.decodeOnce(o,!1,!0):c=this._decodeOnLoadImage(o),c}decodeFromVideoElement(s){const o=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(s,o){const c=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(c,o)}_decodeFromVideoElementSetup(s){if(!s)throw new S("A video element must be provided.");this.reset();const o=this.prepareVideoElement(s);return this.videoElement=o,o}decodeFromImageUrl(s){if(!s)throw new S("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const c=this._decodeOnLoadImage(o);return o.src=s,c}decodeFromVideoUrl(s){if(!s)throw new S("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),c=this.decodeFromVideoElement(o);return o.src=s,c}decodeFromVideoUrlContinuously(s,o){if(!s)throw new S("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(c,o);return c.src=s,f}_decodeOnLoadImage(s){return new Promise((o,c)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(o,c),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return ce(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,o){return ce(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,o)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let o;return typeof s>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof s=="string"&&(o=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(o=s),o}prepareVideoElement(s){let o;return!s&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof s=="string"&&(o=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(o=s),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(s,o=!0,c=!0){this._stopAsyncDecode=!1;const f=(h,p)=>{if(this._stopAsyncDecode){p(new re("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const w=this.decode(s);h(w)}catch(w){const C=o&&w instanceof re,O=(w instanceof I||w instanceof X)&&c;if(C||O)return setTimeout(f,this._timeBetweenDecodingAttempts,h,p);p(w)}};return new Promise((h,p)=>f(h,p))}decodeContinuously(s,o){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(s);o(f,null),setTimeout(c,this.timeBetweenScansMillis)}catch(f){o(null,f);const h=f instanceof I||f instanceof X,p=f instanceof re;(h||p)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(s){const o=this.createBinaryBitmap(s);return this.decodeBitmap(o)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,o,c){o||(o={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(s,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(s,o,c=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(s,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const o=this.getCaptureCanvas(s),c=new W(o),f=new le(c);return new N(f)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const o=this.createCaptureCanvas(s);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let c,f;return typeof s<"u"&&(s instanceof HTMLVideoElement?(c=s.videoWidth,f=s.videoHeight):s instanceof HTMLImageElement&&(c=s.naturalWidth||s.width,f=s.naturalHeight||s.height)),o.style.width=c+"px",o.style.height=f+"px",o.width=c,o.height=f,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,o){try{s.srcObject=o}catch{s.src=URL.createObjectURL(o)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Ne{constructor(s,o,c=o==null?0:8*o.length,f,h,p=j.currentTimeMillis()){this.text=s,this.rawBytes=o,this.numBits=c,this.resultPoints=f,this.format=h,this.timestamp=p,this.text=s,this.rawBytes=o,c==null?this.numBits=o==null?0:8*o.length:this.numBits=c,this.resultPoints=f,this.format=h,this.resultMetadata=null,p==null?this.timestamp=j.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,o)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const o=this.resultPoints;if(o===null)this.resultPoints=s;else if(s!==null&&s.length>0){const c=new Array(o.length+s.length);j.arraycopy(o,0,c,0,o.length),j.arraycopy(s,0,c,o.length,s.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var We;(function(L){L[L.AZTEC=0]="AZTEC",L[L.CODABAR=1]="CODABAR",L[L.CODE_39=2]="CODE_39",L[L.CODE_93=3]="CODE_93",L[L.CODE_128=4]="CODE_128",L[L.DATA_MATRIX=5]="DATA_MATRIX",L[L.EAN_8=6]="EAN_8",L[L.EAN_13=7]="EAN_13",L[L.ITF=8]="ITF",L[L.MAXICODE=9]="MAXICODE",L[L.PDF_417=10]="PDF_417",L[L.QR_CODE=11]="QR_CODE",L[L.RSS_14=12]="RSS_14",L[L.RSS_EXPANDED=13]="RSS_EXPANDED",L[L.UPC_A=14]="UPC_A",L[L.UPC_E=15]="UPC_E",L[L.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(We||(We={}));var Se=We,ht;(function(L){L[L.OTHER=0]="OTHER",L[L.ORIENTATION=1]="ORIENTATION",L[L.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",L[L.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",L[L.ISSUE_NUMBER=4]="ISSUE_NUMBER",L[L.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",L[L.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",L[L.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",L[L.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",L[L.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",L[L.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ht||(ht={}));var ve=ht;class He{constructor(s,o,c,f,h=-1,p=-1){this.rawBytes=s,this.text=o,this.byteSegments=c,this.ecLevel=f,this.structuredAppendSequenceNumber=h,this.structuredAppendParity=p,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class at{exp(s){return this.expTable[s]}log(s){if(s===0)throw new A;return this.logTable[s]}static addOrSubtract(s,o){return s^o}}class gt{constructor(s,o){if(o.length===0)throw new A;this.field=s;const c=o.length;if(c>1&&o[0]===0){let f=1;for(;f<c&&o[f]===0;)f++;f===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-f),j.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const o=this.coefficients;let c;if(s===1){c=0;for(let p=0,w=o.length;p!==w;p++){const C=o[p];c=at.addOrSubtract(c,C)}return c}c=o[0];const f=o.length,h=this.field;for(let p=1;p<f;p++)c=at.addOrSubtract(h.multiply(s,c),o[p]);return c}addOrSubtract(s){if(!this.field.equals(s.field))throw new A("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let o=this.coefficients,c=s.coefficients;if(o.length>c.length){const p=o;o=c,c=p}let f=new Int32Array(c.length);const h=c.length-o.length;j.arraycopy(c,0,f,0,h);for(let p=h;p<c.length;p++)f[p]=at.addOrSubtract(o[p-h],c[p]);return new gt(this.field,f)}multiply(s){if(!this.field.equals(s.field))throw new A("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const o=this.coefficients,c=o.length,f=s.coefficients,h=f.length,p=new Int32Array(c+h-1),w=this.field;for(let C=0;C<c;C++){const _=o[C];for(let O=0;O<h;O++)p[C+O]=at.addOrSubtract(p[C+O],w.multiply(_,f[O]))}return new gt(w,p)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const o=this.coefficients.length,c=this.field,f=new Int32Array(o),h=this.coefficients;for(let p=0;p<o;p++)f[p]=c.multiply(h[p],s);return new gt(c,f)}multiplyByMonomial(s,o){if(s<0)throw new A;if(o===0)return this.field.getZero();const c=this.coefficients,f=c.length,h=new Int32Array(f+s),p=this.field;for(let w=0;w<f;w++)h[w]=p.multiply(c[w],o);return new gt(p,h)}divide(s){if(!this.field.equals(s.field))throw new A("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new A("Divide by 0");const o=this.field;let c=o.getZero(),f=this;const h=s.getCoefficient(s.getDegree()),p=o.inverse(h);for(;f.getDegree()>=s.getDegree()&&!f.isZero();){const w=f.getDegree()-s.getDegree(),C=o.multiply(f.getCoefficient(f.getDegree()),p),_=s.multiplyByMonomial(w,C),O=o.buildMonomial(w,C);c=c.addOrSubtract(O),f=f.addOrSubtract(_)}return[c,f]}toString(){let s="";for(let o=this.getDegree();o>=0;o--){let c=this.getCoefficient(o);if(c!==0){if(c<0?(s+=" - ",c=-c):s.length>0&&(s+=" + "),o===0||c!==1){const f=this.field.log(c);f===0?s+="1":f===1?s+="a":(s+="a^",s+=f)}o!==0&&(o===1?s+="x":(s+="x^",s+=o))}}return s}}class Ve extends x{}Ve.kind="ArithmeticException";class ue extends at{constructor(s,o,c){super(),this.primitive=s,this.size=o,this.generatorBase=c;const f=new Int32Array(o);let h=1;for(let w=0;w<o;w++)f[w]=h,h*=2,h>=o&&(h^=s,h&=o-1);this.expTable=f;const p=new Int32Array(o);for(let w=0;w<o-1;w++)p[f[w]]=w;this.logTable=p,this.zero=new gt(this,Int32Array.from([0])),this.one=new gt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,o){if(s<0)throw new A;if(o===0)return this.zero;const c=new Int32Array(s+1);return c[0]=o,new gt(this,c)}inverse(s){if(s===0)throw new Ve;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,o){return s===0||o===0?0:this.expTable[(this.logTable[s]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+B.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}ue.AZTEC_DATA_12=new ue(4201,4096,1),ue.AZTEC_DATA_10=new ue(1033,1024,1),ue.AZTEC_DATA_6=new ue(67,64,1),ue.AZTEC_PARAM=new ue(19,16,1),ue.QR_CODE_FIELD_256=new ue(285,256,0),ue.DATA_MATRIX_FIELD_256=new ue(301,256,1),ue.AZTEC_DATA_8=ue.DATA_MATRIX_FIELD_256,ue.MAXICODE_FIELD_64=ue.AZTEC_DATA_6;class Ue extends x{}Ue.kind="ReedSolomonException";class Ke extends x{}Ke.kind="IllegalStateException";class Ze{constructor(s){this.field=s}decode(s,o){const c=this.field,f=new gt(c,s),h=new Int32Array(o);let p=!0;for(let G=0;G<o;G++){const Q=f.evaluateAt(c.exp(G+c.getGeneratorBase()));h[h.length-1-G]=Q,Q!==0&&(p=!1)}if(p)return;const w=new gt(c,h),C=this.runEuclideanAlgorithm(c.buildMonomial(o,1),w,o),_=C[0],O=C[1],k=this.findErrorLocations(_),P=this.findErrorMagnitudes(O,k);for(let G=0;G<k.length;G++){const Q=s.length-1-c.log(k[G]);if(Q<0)throw new Ue("Bad error location");s[Q]=ue.addOrSubtract(s[Q],P[G])}}runEuclideanAlgorithm(s,o,c){if(s.getDegree()<o.getDegree()){const G=s;s=o,o=G}const f=this.field;let h=s,p=o,w=f.getZero(),C=f.getOne();for(;p.getDegree()>=(c/2|0);){let G=h,Q=w;if(h=p,w=C,h.isZero())throw new Ue("r_{i-1} was zero");p=G;let te=f.getZero();const fe=h.getCoefficient(h.getDegree()),xe=f.inverse(fe);for(;p.getDegree()>=h.getDegree()&&!p.isZero();){const Me=p.getDegree()-h.getDegree(),Le=f.multiply(p.getCoefficient(p.getDegree()),xe);te=te.addOrSubtract(f.buildMonomial(Me,Le)),p=p.addOrSubtract(h.multiplyByMonomial(Me,Le))}if(C=te.multiply(w).addOrSubtract(Q),p.getDegree()>=h.getDegree())throw new Ke("Division algorithm failed to reduce polynomial?")}const _=C.getCoefficient(0);if(_===0)throw new Ue("sigmaTilde(0) was zero");const O=f.inverse(_),k=C.multiplyScalar(O),P=p.multiplyScalar(O);return[k,P]}findErrorLocations(s){const o=s.getDegree();if(o===1)return Int32Array.from([s.getCoefficient(1)]);const c=new Int32Array(o);let f=0;const h=this.field;for(let p=1;p<h.getSize()&&f<o;p++)s.evaluateAt(p)===0&&(c[f]=h.inverse(p),f++);if(f!==o)throw new Ue("Error locator degree does not match number of roots");return c}findErrorMagnitudes(s,o){const c=o.length,f=new Int32Array(c),h=this.field;for(let p=0;p<c;p++){const w=h.inverse(o[p]);let C=1;for(let _=0;_<c;_++)if(p!==_){const O=h.multiply(o[_],w),k=(O&1)===0?O|1:O&-2;C=h.multiply(C,k)}f[p]=h.multiply(s.evaluateAt(w),h.inverse(C)),h.getGeneratorBase()!==0&&(f[p]=h.multiply(f[p],w))}return f}}var Fe;(function(L){L[L.UPPER=0]="UPPER",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.DIGIT=3]="DIGIT",L[L.PUNCT=4]="PUNCT",L[L.BINARY=5]="BINARY"})(Fe||(Fe={}));class mt{decode(s){this.ddata=s;let o=s.getBits(),c=this.extractBits(o),f=this.correctBits(c),h=mt.convertBoolArrayToByteArray(f),p=mt.getEncodedData(f),w=new He(h,p,null,null);return w.setNumBits(f.length),w}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let o=s.length,c=Fe.UPPER,f=Fe.UPPER,h="",p=0;for(;p<o;)if(f===Fe.BINARY){if(o-p<5)break;let w=mt.readCode(s,p,5);if(p+=5,w===0){if(o-p<11)break;w=mt.readCode(s,p,11)+31,p+=11}for(let C=0;C<w;C++){if(o-p<8){p=o;break}const _=mt.readCode(s,p,8);h+=Ee.castAsNonUtf8Char(_),p+=8}f=c}else{let w=f===Fe.DIGIT?4:5;if(o-p<w)break;let C=mt.readCode(s,p,w);p+=w;let _=mt.getCharacter(f,C);_.startsWith("CTRL_")?(c=f,f=mt.getTable(_.charAt(5)),_.charAt(6)==="L"&&(c=f)):(h+=_,f=c)}return h}static getTable(s){switch(s){case"L":return Fe.LOWER;case"P":return Fe.PUNCT;case"M":return Fe.MIXED;case"D":return Fe.DIGIT;case"B":return Fe.BINARY;case"U":default:return Fe.UPPER}}static getCharacter(s,o){switch(s){case Fe.UPPER:return mt.UPPER_TABLE[o];case Fe.LOWER:return mt.LOWER_TABLE[o];case Fe.MIXED:return mt.MIXED_TABLE[o];case Fe.PUNCT:return mt.PUNCT_TABLE[o];case Fe.DIGIT:return mt.DIGIT_TABLE[o];default:throw new Ke("Bad table")}}correctBits(s){let o,c;this.ddata.getNbLayers()<=2?(c=6,o=ue.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,o=ue.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,o=ue.AZTEC_DATA_10):(c=12,o=ue.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),h=s.length/c;if(h<f)throw new X;let p=s.length%c,w=new Int32Array(h);for(let P=0;P<h;P++,p+=c)w[P]=mt.readCode(s,p,c);try{new Ze(o).decode(w,h-f)}catch(P){throw new X(P)}let C=(1<<c)-1,_=0;for(let P=0;P<f;P++){let G=w[P];if(G===0||G===C)throw new X;(G===1||G===C-1)&&_++}let O=new Array(f*c-_),k=0;for(let P=0;P<f;P++){let G=w[P];if(G===1||G===C-1)O.fill(G>1,k,k+c-1),k+=c-1;else for(let Q=c-1;Q>=0;--Q)O[k++]=(G&1<<Q)!==0}return O}extractBits(s){let o=this.ddata.isCompact(),c=this.ddata.getNbLayers(),f=(o?11:14)+c*4,h=new Int32Array(f),p=new Array(this.totalBitsInLayer(c,o));if(o)for(let w=0;w<h.length;w++)h[w]=w;else{let w=f+1+2*B.truncDivision(B.truncDivision(f,2)-1,15),C=f/2,_=B.truncDivision(w,2);for(let O=0;O<C;O++){let k=O+B.truncDivision(O,15);h[C-O-1]=_-k-1,h[C+O]=_+k+1}}for(let w=0,C=0;w<c;w++){let _=(c-w)*4+(o?9:12),O=w*2,k=f-1-O;for(let P=0;P<_;P++){let G=P*2;for(let Q=0;Q<2;Q++)p[C+G+Q]=s.get(h[O+Q],h[O+P]),p[C+2*_+G+Q]=s.get(h[O+P],h[k-Q]),p[C+4*_+G+Q]=s.get(h[k-Q],h[k-P]),p[C+6*_+G+Q]=s.get(h[k-P],h[O+Q])}C+=_*8}return p}static readCode(s,o,c){let f=0;for(let h=o;h<o+c;h++)f<<=1,s[h]&&(f|=1);return f}static readByte(s,o){let c=s.length-o;return c>=8?mt.readCode(s,o,8):mt.readCode(s,o,c)<<8-c}static convertBoolArrayToByteArray(s){let o=new Uint8Array((s.length+7)/8);for(let c=0;c<o.length;c++)o[c]=mt.readByte(s,8*c);return o}totalBitsInLayer(s,o){return((o?88:112)+16*s)*s}}mt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],mt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],mt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],mt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],mt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ze{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,o,c,f){const h=s-c,p=o-f;return Math.sqrt(h*h+p*p)}static sum(s){let o=0;for(let c=0,f=s.length;c!==f;c++){const h=s[c];o+=h}return o}}class dt{static floatToIntBits(s){return s}}dt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Pe{constructor(s,o){this.x=s,this.y=o}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof Pe){const o=s;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*dt.floatToIntBits(this.x)+dt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const o=this.distance(s[0],s[1]),c=this.distance(s[1],s[2]),f=this.distance(s[0],s[2]);let h,p,w;if(c>=o&&c>=f?(p=s[0],h=s[1],w=s[2]):f>=c&&f>=o?(p=s[1],h=s[0],w=s[2]):(p=s[2],h=s[0],w=s[1]),this.crossProductZ(h,p,w)<0){const C=h;h=w,w=C}s[0]=h,s[1]=p,s[2]=w}static distance(s,o){return ze.distance(s.x,s.y,o.x,o.y)}static crossProductZ(s,o,c){const f=o.x,h=o.y;return(c.x-f)*(s.y-h)-(c.y-h)*(s.x-f)}}class ki{constructor(s,o){this.bits=s,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class qs extends ki{constructor(s,o,c,f,h){super(s,o),this.compact=c,this.nbDatablocks=f,this.nbLayers=h}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class je{constructor(s,o,c,f){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),o==null&&(o=je.INIT_SIZE),c==null&&(c=s.getWidth()/2|0),f==null&&(f=s.getHeight()/2|0);const h=o/2|0;if(this.leftInit=c-h,this.rightInit=c+h,this.upInit=f-h,this.downInit=f+h,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new re}detect(){let s=this.leftInit,o=this.rightInit,c=this.upInit,f=this.downInit,h=!1,p=!0,w=!1,C=!1,_=!1,O=!1,k=!1;const P=this.width,G=this.height;for(;p;){p=!1;let Q=!0;for(;(Q||!C)&&o<P;)Q=this.containsBlackPoint(c,f,o,!1),Q?(o++,p=!0,C=!0):C||o++;if(o>=P){h=!0;break}let te=!0;for(;(te||!_)&&f<G;)te=this.containsBlackPoint(s,o,f,!0),te?(f++,p=!0,_=!0):_||f++;if(f>=G){h=!0;break}let fe=!0;for(;(fe||!O)&&s>=0;)fe=this.containsBlackPoint(c,f,s,!1),fe?(s--,p=!0,O=!0):O||s--;if(s<0){h=!0;break}let xe=!0;for(;(xe||!k)&&c>=0;)xe=this.containsBlackPoint(s,o,c,!0),xe?(c--,p=!0,k=!0):k||c--;if(c<0){h=!0;break}p&&(w=!0)}if(!h&&w){const Q=o-s;let te=null;for(let Le=1;te===null&&Le<Q;Le++)te=this.getBlackPointOnSegment(s,f-Le,s+Le,f);if(te==null)throw new re;let fe=null;for(let Le=1;fe===null&&Le<Q;Le++)fe=this.getBlackPointOnSegment(s,c+Le,s+Le,c);if(fe==null)throw new re;let xe=null;for(let Le=1;xe===null&&Le<Q;Le++)xe=this.getBlackPointOnSegment(o,c+Le,o-Le,c);if(xe==null)throw new re;let Me=null;for(let Le=1;Me===null&&Le<Q;Le++)Me=this.getBlackPointOnSegment(o,f-Le,o-Le,f);if(Me==null)throw new re;return this.centerEdges(Me,te,xe,fe)}else throw new re}getBlackPointOnSegment(s,o,c,f){const h=ze.round(ze.distance(s,o,c,f)),p=(c-s)/h,w=(f-o)/h,C=this.image;for(let _=0;_<h;_++){const O=ze.round(s+_*p),k=ze.round(o+_*w);if(C.get(O,k))return new Pe(O,k)}return null}centerEdges(s,o,c,f){const h=s.getX(),p=s.getY(),w=o.getX(),C=o.getY(),_=c.getX(),O=c.getY(),k=f.getX(),P=f.getY(),G=je.CORR;return h<this.width/2?[new Pe(k-G,P+G),new Pe(w+G,C+G),new Pe(_-G,O-G),new Pe(h+G,p-G)]:[new Pe(k+G,P+G),new Pe(w+G,C-G),new Pe(_-G,O+G),new Pe(h-G,p-G)]}containsBlackPoint(s,o,c,f){const h=this.image;if(f){for(let p=s;p<=o;p++)if(h.get(p,c))return!0}else for(let p=s;p<=o;p++)if(h.get(c,p))return!0;return!1}}je.INIT_SIZE=10,je.CORR=1;class Rt{static checkAndNudgePoints(s,o){const c=s.getWidth(),f=s.getHeight();let h=!0;for(let p=0;p<o.length&&h;p+=2){const w=Math.floor(o[p]),C=Math.floor(o[p+1]);if(w<-1||w>c||C<-1||C>f)throw new re;h=!1,w===-1?(o[p]=0,h=!0):w===c&&(o[p]=c-1,h=!0),C===-1?(o[p+1]=0,h=!0):C===f&&(o[p+1]=f-1,h=!0)}h=!0;for(let p=o.length-2;p>=0&&h;p-=2){const w=Math.floor(o[p]),C=Math.floor(o[p+1]);if(w<-1||w>c||C<-1||C>f)throw new re;h=!1,w===-1?(o[p]=0,h=!0):w===c&&(o[p]=c-1,h=!0),C===-1?(o[p+1]=0,h=!0):C===f&&(o[p+1]=f-1,h=!0)}}}class Ct{constructor(s,o,c,f,h,p,w,C,_){this.a11=s,this.a21=o,this.a31=c,this.a12=f,this.a22=h,this.a32=p,this.a13=w,this.a23=C,this.a33=_}static quadrilateralToQuadrilateral(s,o,c,f,h,p,w,C,_,O,k,P,G,Q,te,fe){const xe=Ct.quadrilateralToSquare(s,o,c,f,h,p,w,C);return Ct.squareToQuadrilateral(_,O,k,P,G,Q,te,fe).times(xe)}transformPoints(s){const o=s.length,c=this.a11,f=this.a12,h=this.a13,p=this.a21,w=this.a22,C=this.a23,_=this.a31,O=this.a32,k=this.a33;for(let P=0;P<o;P+=2){const G=s[P],Q=s[P+1],te=h*G+C*Q+k;s[P]=(c*G+p*Q+_)/te,s[P+1]=(f*G+w*Q+O)/te}}transformPointsWithValues(s,o){const c=this.a11,f=this.a12,h=this.a13,p=this.a21,w=this.a22,C=this.a23,_=this.a31,O=this.a32,k=this.a33,P=s.length;for(let G=0;G<P;G++){const Q=s[G],te=o[G],fe=h*Q+C*te+k;s[G]=(c*Q+p*te+_)/fe,o[G]=(f*Q+w*te+O)/fe}}static squareToQuadrilateral(s,o,c,f,h,p,w,C){const _=s-c+h-w,O=o-f+p-C;if(_===0&&O===0)return new Ct(c-s,h-c,s,f-o,p-f,o,0,0,1);{const k=c-h,P=w-h,G=f-p,Q=C-p,te=k*Q-P*G,fe=(_*Q-P*O)/te,xe=(k*O-_*G)/te;return new Ct(c-s+fe*c,w-s+xe*w,s,f-o+fe*f,C-o+xe*C,o,fe,xe,1)}}static quadrilateralToSquare(s,o,c,f,h,p,w,C){return Ct.squareToQuadrilateral(s,o,c,f,h,p,w,C).buildAdjoint()}buildAdjoint(){return new Ct(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new Ct(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class wt extends Rt{sampleGrid(s,o,c,f,h,p,w,C,_,O,k,P,G,Q,te,fe,xe,Me,Le){const Ie=Ct.quadrilateralToQuadrilateral(f,h,p,w,C,_,O,k,P,G,Q,te,fe,xe,Me,Le);return this.sampleGridWithTransform(s,o,c,Ie)}sampleGridWithTransform(s,o,c,f){if(o<=0||c<=0)throw new re;const h=new Oe(o,c),p=new Float32Array(2*o);for(let w=0;w<c;w++){const C=p.length,_=w+.5;for(let O=0;O<C;O+=2)p[O]=O/2+.5,p[O+1]=_;f.transformPoints(p),Rt.checkAndNudgePoints(s,p);try{for(let O=0;O<C;O+=2)s.get(Math.floor(p[O]),Math.floor(p[O+1]))&&h.set(O/2,w)}catch{throw new re}}return h}}class Lt{static setGridSampler(s){Lt.gridSampler=s}static getInstance(){return Lt.gridSampler}}Lt.gridSampler=new wt;class tt{constructor(s,o){this.x=s,this.y=o}toResultPoint(){return new Pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Jn{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let o=this.getMatrixCenter(),c=this.getBullsEyeCorners(o);if(s){let p=c[0];c[0]=c[2],c[2]=p}this.extractParameters(c);let f=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),h=this.getMatrixCornerPoints(c);return new qs(f,h,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new re;let o=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(s[0],s[1],o),this.sampleLine(s[1],s[2],o),this.sampleLine(s[2],s[3],o),this.sampleLine(s[3],s[0],o)]);this.shift=this.getRotation(c,o);let f=0;for(let p=0;p<4;p++){let w=c[(this.shift+p)%4];this.compact?(f<<=7,f+=w>>1&127):(f<<=10,f+=(w>>2&992)+(w>>1&31))}let h=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(h>>6)+1,this.nbDataBlocks=(h&63)+1):(this.nbLayers=(h>>11)+1,this.nbDataBlocks=(h&2047)+1)}getRotation(s,o){let c=0;s.forEach((f,h,p)=>{let w=(f>>o-2<<1)+(f&1);c=(c<<3)+w}),c=((c&1)<<11)+(c>>1);for(let f=0;f<4;f++)if(B.bitCount(c^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new re}getCorrectedParameterData(s,o){let c,f;o?(c=7,f=2):(c=10,f=4);let h=c-f,p=new Int32Array(c);for(let C=c-1;C>=0;--C)p[C]=s&15,s>>=4;try{new Ze(ue.AZTEC_PARAM).decode(p,h)}catch{throw new re}let w=0;for(let C=0;C<f;C++)w=(w<<4)+p[C];return w}getBullsEyeCorners(s){let o=s,c=s,f=s,h=s,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let k=this.getFirstDifferent(o,p,1,-1),P=this.getFirstDifferent(c,p,1,1),G=this.getFirstDifferent(f,p,-1,1),Q=this.getFirstDifferent(h,p,-1,-1);if(this.nbCenterLayers>2){let te=this.distancePoint(Q,k)*this.nbCenterLayers/(this.distancePoint(h,o)*(this.nbCenterLayers+2));if(te<.75||te>1.25||!this.isWhiteOrBlackRectangle(k,P,G,Q))break}o=k,c=P,f=G,h=Q,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new re;this.compact=this.nbCenterLayers===5;let w=new Pe(o.getX()+.5,o.getY()-.5),C=new Pe(c.getX()+.5,c.getY()+.5),_=new Pe(f.getX()-.5,f.getY()+.5),O=new Pe(h.getX()-.5,h.getY()-.5);return this.expandSquare([w,C,_,O],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,o,c,f;try{let w=new je(this.image).detect();s=w[0],o=w[1],c=w[2],f=w[3]}catch{let C=this.image.getWidth()/2,_=this.image.getHeight()/2;s=this.getFirstDifferent(new tt(C+7,_-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new tt(C+7,_+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new tt(C-7,_+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new tt(C-7,_-7),!1,-1,-1).toResultPoint()}let h=ze.round((s.getX()+f.getX()+o.getX()+c.getX())/4),p=ze.round((s.getY()+f.getY()+o.getY()+c.getY())/4);try{let w=new je(this.image,15,h,p).detect();s=w[0],o=w[1],c=w[2],f=w[3]}catch{s=this.getFirstDifferent(new tt(h+7,p-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new tt(h+7,p+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new tt(h-7,p+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new tt(h-7,p-7),!1,-1,-1).toResultPoint()}return h=ze.round((s.getX()+f.getX()+o.getX()+c.getX())/4),p=ze.round((s.getY()+f.getY()+o.getY()+c.getY())/4),new tt(h,p)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,o,c,f,h){let p=Lt.getInstance(),w=this.getDimension(),C=w/2-this.nbCenterLayers,_=w/2+this.nbCenterLayers;return p.sampleGrid(s,w,w,C,C,_,C,_,_,C,_,o.getX(),o.getY(),c.getX(),c.getY(),f.getX(),f.getY(),h.getX(),h.getY())}sampleLine(s,o,c){let f=0,h=this.distanceResultPoint(s,o),p=h/c,w=s.getX(),C=s.getY(),_=p*(o.getX()-s.getX())/h,O=p*(o.getY()-s.getY())/h;for(let k=0;k<c;k++)this.image.get(ze.round(w+k*_),ze.round(C+k*O))&&(f|=1<<c-k-1);return f}isWhiteOrBlackRectangle(s,o,c,f){let h=3;s=new tt(s.getX()-h,s.getY()+h),o=new tt(o.getX()-h,o.getY()-h),c=new tt(c.getX()+h,c.getY()-h),f=new tt(f.getX()+h,f.getY()+h);let p=this.getColor(f,s);if(p===0)return!1;let w=this.getColor(s,o);return w!==p||(w=this.getColor(o,c),w!==p)?!1:(w=this.getColor(c,f),w===p)}getColor(s,o){let c=this.distancePoint(s,o),f=(o.getX()-s.getX())/c,h=(o.getY()-s.getY())/c,p=0,w=s.getX(),C=s.getY(),_=this.image.get(s.getX(),s.getY()),O=Math.ceil(c);for(let P=0;P<O;P++)w+=f,C+=h,this.image.get(ze.round(w),ze.round(C))!==_&&p++;let k=p/c;return k>.1&&k<.9?0:k<=.1===_?1:-1}getFirstDifferent(s,o,c,f){let h=s.getX()+c,p=s.getY()+f;for(;this.isValid(h,p)&&this.image.get(h,p)===o;)h+=c,p+=f;for(h-=c,p-=f;this.isValid(h,p)&&this.image.get(h,p)===o;)h+=c;for(h-=c;this.isValid(h,p)&&this.image.get(h,p)===o;)p+=f;return p-=f,new tt(h,p)}expandSquare(s,o,c){let f=c/(2*o),h=s[0].getX()-s[2].getX(),p=s[0].getY()-s[2].getY(),w=(s[0].getX()+s[2].getX())/2,C=(s[0].getY()+s[2].getY())/2,_=new Pe(w+f*h,C+f*p),O=new Pe(w-f*h,C-f*p);h=s[1].getX()-s[3].getX(),p=s[1].getY()-s[3].getY(),w=(s[1].getX()+s[3].getX())/2,C=(s[1].getY()+s[3].getY())/2;let k=new Pe(w+f*h,C+f*p),P=new Pe(w-f*h,C-f*p);return[_,k,O,P]}isValid(s,o){return s>=0&&s<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(s){let o=ze.round(s.getX()),c=ze.round(s.getY());return this.isValid(o,c)}distancePoint(s,o){return ze.distance(s.getX(),s.getY(),o.getX(),o.getY())}distanceResultPoint(s,o){return ze.distance(s.getX(),s.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(B.truncDivision(this.nbLayers-4,8)+1)+15}}class mi{decode(s,o=null){let c=null,f=new Jn(s.getBlackMatrix()),h=null,p=null;try{let O=f.detectMirror(!1);h=O.getPoints(),this.reportFoundResultPoints(o,h),p=new mt().decode(O)}catch(O){c=O}if(p==null)try{let O=f.detectMirror(!0);h=O.getPoints(),this.reportFoundResultPoints(o,h),p=new mt().decode(O)}catch(O){throw c??O}let w=new Ne(p.getText(),p.getRawBytes(),p.getNumBits(),h,Se.AZTEC,j.currentTimeMillis()),C=p.getByteSegments();C!=null&&w.putMetadata(ve.BYTE_SEGMENTS,C);let _=p.getECLevel();return _!=null&&w.putMetadata(ve.ERROR_CORRECTION_LEVEL,_),w}reportFoundResultPoints(s,o){if(s!=null){let c=s.get(J.NEED_RESULT_POINT_CALLBACK);c!=null&&o.forEach((f,h,p)=>{c.foundPossibleResultPoint(f)})}}reset(){}}class cs extends se{constructor(s=500){super(new mi,s)}}class $t{decode(s,o){try{return this.doDecode(s,o)}catch{if(o&&o.get(J.TRY_HARDER)===!0&&s.isRotateSupported()){const h=s.rotateCounterClockwise(),p=this.doDecode(h,o),w=p.getResultMetadata();let C=270;w!==null&&w.get(ve.ORIENTATION)===!0&&(C=C+w.get(ve.ORIENTATION)%360),p.putMetadata(ve.ORIENTATION,C);const _=p.getResultPoints();if(_!==null){const O=h.getHeight();for(let k=0;k<_.length;k++)_[k]=new Pe(O-_[k].getY()-1,_[k].getX())}return p}else throw new re}}reset(){}doDecode(s,o){const c=s.getWidth(),f=s.getHeight();let h=new V(c);const p=o&&o.get(J.TRY_HARDER)===!0,w=Math.max(1,f>>(p?8:5));let C;p?C=f:C=15;const _=Math.trunc(f/2);for(let O=0;O<C;O++){const k=Math.trunc((O+1)/2),P=(O&1)===0,G=_+w*(P?k:-k);if(G<0||G>=f)break;try{h=s.getBlackRow(G,h)}catch{continue}for(let Q=0;Q<2;Q++){if(Q===1&&(h.reverse(),o&&o.get(J.NEED_RESULT_POINT_CALLBACK)===!0)){const te=new Map;o.forEach((fe,xe)=>te.set(xe,fe)),te.delete(J.NEED_RESULT_POINT_CALLBACK),o=te}try{const te=this.decodeRow(G,h,o);if(Q===1){te.putMetadata(ve.ORIENTATION,180);const fe=te.getResultPoints();fe!==null&&(fe[0]=new Pe(c-fe[0].getX()-1,fe[0].getY()),fe[1]=new Pe(c-fe[1].getX()-1,fe[1].getY()))}return te}catch{}}}throw new re}static recordPattern(s,o,c){const f=c.length;for(let _=0;_<f;_++)c[_]=0;const h=s.getSize();if(o>=h)throw new re;let p=!s.get(o),w=0,C=o;for(;C<h;){if(s.get(C)!==p)c[w]++;else{if(++w===f)break;c[w]=1,p=!p}C++}if(!(w===f||w===f-1&&C===h))throw new re}static recordPatternInReverse(s,o,c){let f=c.length,h=s.get(o);for(;o>0&&f>=0;)s.get(--o)!==h&&(f--,h=!h);if(f>=0)throw new re;$t.recordPattern(s,o+1,c)}static patternMatchVariance(s,o,c){const f=s.length;let h=0,p=0;for(let _=0;_<f;_++)h+=s[_],p+=o[_];if(h<p)return Number.POSITIVE_INFINITY;const w=h/p;c*=w;let C=0;for(let _=0;_<f;_++){const O=s[_],k=o[_]*w,P=O>k?O-k:k-O;if(P>c)return Number.POSITIVE_INFINITY;C+=P}return C/h}}class ke extends $t{static findStartPattern(s){const o=s.getSize(),c=s.getNextSet(0);let f=0,h=Int32Array.from([0,0,0,0,0,0]),p=c,w=!1;const C=6;for(let _=c;_<o;_++)if(s.get(_)!==w)h[f]++;else{if(f===C-1){let O=ke.MAX_AVG_VARIANCE,k=-1;for(let P=ke.CODE_START_A;P<=ke.CODE_START_C;P++){const G=$t.patternMatchVariance(h,ke.CODE_PATTERNS[P],ke.MAX_INDIVIDUAL_VARIANCE);G<O&&(O=G,k=P)}if(k>=0&&s.isRange(Math.max(0,p-(_-p)/2),p,!1))return Int32Array.from([p,_,k]);p+=h[0]+h[1],h=h.slice(2,h.length-1),h[f-1]=0,h[f]=0,f--}else f++;h[f]=1,w=!w}throw new re}static decodeCode(s,o,c){$t.recordPattern(s,c,o);let f=ke.MAX_AVG_VARIANCE,h=-1;for(let p=0;p<ke.CODE_PATTERNS.length;p++){const w=ke.CODE_PATTERNS[p],C=this.patternMatchVariance(o,w,ke.MAX_INDIVIDUAL_VARIANCE);C<f&&(f=C,h=p)}if(h>=0)return h;throw new re}decodeRow(s,o,c){const f=c&&c.get(J.ASSUME_GS1)===!0,h=ke.findStartPattern(o),p=h[2];let w=0;const C=new Uint8Array(20);C[w++]=p;let _;switch(p){case ke.CODE_START_A:_=ke.CODE_CODE_A;break;case ke.CODE_START_B:_=ke.CODE_CODE_B;break;case ke.CODE_START_C:_=ke.CODE_CODE_C;break;default:throw new X}let O=!1,k=!1,P="",G=h[0],Q=h[1];const te=Int32Array.from([0,0,0,0,0,0]);let fe=0,xe=0,Me=p,Le=0,Ie=!0,yt=!1,pt=!1;for(;!O;){const ar=k;switch(k=!1,fe=xe,xe=ke.decodeCode(o,te,Q),C[w++]=xe,xe!==ke.CODE_STOP&&(Ie=!0),xe!==ke.CODE_STOP&&(Le++,Me+=Le*xe),G=Q,Q+=te.reduce((Qi,$d)=>Qi+$d,0),xe){case ke.CODE_START_A:case ke.CODE_START_B:case ke.CODE_START_C:throw new X}switch(_){case ke.CODE_CODE_A:if(xe<64)pt===yt?P+=String.fromCharCode(32+xe):P+=String.fromCharCode(32+xe+128),pt=!1;else if(xe<96)pt===yt?P+=String.fromCharCode(xe-64):P+=String.fromCharCode(xe+64),pt=!1;else switch(xe!==ke.CODE_STOP&&(Ie=!1),xe){case ke.CODE_FNC_1:f&&(P.length===0?P+="]C1":P+="");break;case ke.CODE_FNC_2:case ke.CODE_FNC_3:break;case ke.CODE_FNC_4_A:!yt&&pt?(yt=!0,pt=!1):yt&&pt?(yt=!1,pt=!1):pt=!0;break;case ke.CODE_SHIFT:k=!0,_=ke.CODE_CODE_B;break;case ke.CODE_CODE_B:_=ke.CODE_CODE_B;break;case ke.CODE_CODE_C:_=ke.CODE_CODE_C;break;case ke.CODE_STOP:O=!0;break}break;case ke.CODE_CODE_B:if(xe<96)pt===yt?P+=String.fromCharCode(32+xe):P+=String.fromCharCode(32+xe+128),pt=!1;else switch(xe!==ke.CODE_STOP&&(Ie=!1),xe){case ke.CODE_FNC_1:f&&(P.length===0?P+="]C1":P+="");break;case ke.CODE_FNC_2:case ke.CODE_FNC_3:break;case ke.CODE_FNC_4_B:!yt&&pt?(yt=!0,pt=!1):yt&&pt?(yt=!1,pt=!1):pt=!0;break;case ke.CODE_SHIFT:k=!0,_=ke.CODE_CODE_A;break;case ke.CODE_CODE_A:_=ke.CODE_CODE_A;break;case ke.CODE_CODE_C:_=ke.CODE_CODE_C;break;case ke.CODE_STOP:O=!0;break}break;case ke.CODE_CODE_C:if(xe<100)xe<10&&(P+="0"),P+=xe;else switch(xe!==ke.CODE_STOP&&(Ie=!1),xe){case ke.CODE_FNC_1:f&&(P.length===0?P+="]C1":P+="");break;case ke.CODE_CODE_A:_=ke.CODE_CODE_A;break;case ke.CODE_CODE_B:_=ke.CODE_CODE_B;break;case ke.CODE_STOP:O=!0;break}break}ar&&(_=_===ke.CODE_CODE_A?ke.CODE_CODE_B:ke.CODE_CODE_A)}const ui=Q-G;if(Q=o.getNextUnset(Q),!o.isRange(Q,Math.min(o.getSize(),Q+(Q-G)/2),!1))throw new re;if(Me-=Le*fe,Me%103!==fe)throw new I;const Ui=P.length;if(Ui===0)throw new re;Ui>0&&Ie&&(_===ke.CODE_CODE_C?P=P.substring(0,Ui-2):P=P.substring(0,Ui-1));const bi=(h[1]+h[0])/2,Zt=G+ui/2,Xn=C.length,wi=new Uint8Array(Xn);for(let ar=0;ar<Xn;ar++)wi[ar]=C[ar];const Or=[new Pe(bi,s),new Pe(Zt,s)];return new Ne(P,wi,0,Or,Se.CODE_128,new Date().getTime())}}ke.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ke.MAX_AVG_VARIANCE=.25,ke.MAX_INDIVIDUAL_VARIANCE=.7,ke.CODE_SHIFT=98,ke.CODE_CODE_C=99,ke.CODE_CODE_B=100,ke.CODE_CODE_A=101,ke.CODE_FNC_1=102,ke.CODE_FNC_2=97,ke.CODE_FNC_3=96,ke.CODE_FNC_4_A=101,ke.CODE_FNC_4_B=100,ke.CODE_START_A=103,ke.CODE_START_B=104,ke.CODE_START_C=105,ke.CODE_STOP=106;class Vt extends $t{constructor(s=!1,o=!1){super(),this.usingCheckDigit=s,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,o,c){let f=this.counters;f.fill(0),this.decodeRowResult="";let h=Vt.findAsteriskPattern(o,f),p=o.getNextSet(h[1]),w=o.getSize(),C,_;do{Vt.recordPattern(o,p,f);let te=Vt.toNarrowWidePattern(f);if(te<0)throw new re;C=Vt.patternToChar(te),this.decodeRowResult+=C,_=p;for(let fe of f)p+=fe;p=o.getNextSet(p)}while(C!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let O=0;for(let te of f)O+=te;let k=p-_-O;if(p!==w&&k*2<O)throw new re;if(this.usingCheckDigit){let te=this.decodeRowResult.length-1,fe=0;for(let xe=0;xe<te;xe++)fe+=Vt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(xe));if(this.decodeRowResult.charAt(te)!==Vt.ALPHABET_STRING.charAt(fe%43))throw new I;this.decodeRowResult=this.decodeRowResult.substring(0,te)}if(this.decodeRowResult.length===0)throw new re;let P;this.extendedMode?P=Vt.decodeExtended(this.decodeRowResult):P=this.decodeRowResult;let G=(h[1]+h[0])/2,Q=_+O/2;return new Ne(P,null,0,[new Pe(G,s),new Pe(Q,s)],Se.CODE_39,new Date().getTime())}static findAsteriskPattern(s,o){let c=s.getSize(),f=s.getNextSet(0),h=0,p=f,w=!1,C=o.length;for(let _=f;_<c;_++)if(s.get(_)!==w)o[h]++;else{if(h===C-1){if(this.toNarrowWidePattern(o)===Vt.ASTERISK_ENCODING&&s.isRange(Math.max(0,p-Math.floor((_-p)/2)),p,!1))return[p,_];p+=o[0]+o[1],o.copyWithin(0,2,2+h-1),o[h-1]=0,o[h]=0,h--}else h++;o[h]=1,w=!w}throw new re}static toNarrowWidePattern(s){let o=s.length,c=0,f;do{let h=2147483647;for(let C of s)C<h&&C>c&&(h=C);c=h,f=0;let p=0,w=0;for(let C=0;C<o;C++){let _=s[C];_>c&&(w|=1<<o-1-C,f++,p+=_)}if(f===3){for(let C=0;C<o&&f>0;C++){let _=s[C];if(_>c&&(f--,_*2>=p))return-1}return w}}while(f>3);return-1}static patternToChar(s){for(let o=0;o<Vt.CHARACTER_ENCODINGS.length;o++)if(Vt.CHARACTER_ENCODINGS[o]===s)return Vt.ALPHABET_STRING.charAt(o);if(s===Vt.ASTERISK_ENCODING)return"*";throw new re}static decodeExtended(s){let o=s.length,c="";for(let f=0;f<o;f++){let h=s.charAt(f);if(h==="+"||h==="$"||h==="%"||h==="/"){let p=s.charAt(f+1),w="\0";switch(h){case"+":if(p>="A"&&p<="Z")w=String.fromCharCode(p.charCodeAt(0)+32);else throw new X;break;case"$":if(p>="A"&&p<="Z")w=String.fromCharCode(p.charCodeAt(0)-64);else throw new X;break;case"%":if(p>="A"&&p<="E")w=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")w=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")w=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")w=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")w="\0";else if(p==="V")w="@";else if(p==="W")w="`";else if(p==="X"||p==="Y"||p==="Z")w="";else throw new X;break;case"/":if(p>="A"&&p<="O")w=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")w=":";else throw new X;break}c+=w,f++}else c+=h}return c}}Vt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Vt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Vt.ASTERISK_ENCODING=148;class At extends $t{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,o,c){let f=this.decodeStart(o),h=this.decodeEnd(o),p=new de;At.decodeMiddle(o,f[1],h[0],p);let w=p.toString(),C=null;c!=null&&(C=c.get(J.ALLOWED_LENGTHS)),C==null&&(C=At.DEFAULT_ALLOWED_LENGTHS);let _=w.length,O=!1,k=0;for(let Q of C){if(_===Q){O=!0;break}Q>k&&(k=Q)}if(!O&&_>k&&(O=!0),!O)throw new X;const P=[new Pe(f[1],s),new Pe(h[0],s)];return new Ne(w,null,0,P,Se.ITF,new Date().getTime())}static decodeMiddle(s,o,c,f){let h=new Int32Array(10),p=new Int32Array(5),w=new Int32Array(5);for(h.fill(0),p.fill(0),w.fill(0);o<c;){$t.recordPattern(s,o,h);for(let _=0;_<5;_++){let O=2*_;p[_]=h[O],w[_]=h[O+1]}let C=At.decodeDigit(p);f.append(C.toString()),C=this.decodeDigit(w),f.append(C.toString()),h.forEach(function(_){o+=_})}}decodeStart(s){let o=At.skipWhiteSpace(s),c=At.findGuardPattern(s,o,At.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(s,c[0]),c}validateQuietZone(s,o){let c=this.narrowLineWidth*10;c=c<o?c:o;for(let f=o-1;c>0&&f>=0&&!s.get(f);f--)c--;if(c!==0)throw new re}static skipWhiteSpace(s){const o=s.getSize(),c=s.getNextSet(0);if(c===o)throw new re;return c}decodeEnd(s){s.reverse();try{let o=At.skipWhiteSpace(s),c;try{c=At.findGuardPattern(s,o,At.END_PATTERN_REVERSED[0])}catch(h){h instanceof re&&(c=At.findGuardPattern(s,o,At.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,c[0]);let f=c[0];return c[0]=s.getSize()-c[1],c[1]=s.getSize()-f,c}finally{s.reverse()}}static findGuardPattern(s,o,c){let f=c.length,h=new Int32Array(f),p=s.getSize(),w=!1,C=0,_=o;h.fill(0);for(let O=o;O<p;O++)if(s.get(O)!==w)h[C]++;else{if(C===f-1){if($t.patternMatchVariance(h,c,At.MAX_INDIVIDUAL_VARIANCE)<At.MAX_AVG_VARIANCE)return[_,O];_+=h[0]+h[1],j.arraycopy(h,2,h,0,C-1),h[C-1]=0,h[C]=0,C--}else C++;h[C]=1,w=!w}throw new re}static decodeDigit(s){let o=At.MAX_AVG_VARIANCE,c=-1,f=At.PATTERNS.length;for(let h=0;h<f;h++){let p=At.PATTERNS[h],w=$t.patternMatchVariance(s,p,At.MAX_INDIVIDUAL_VARIANCE);w<o?(o=w,c=h):w===o&&(c=-1)}if(c>=0)return c%10;throw new re}}At.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],At.MAX_AVG_VARIANCE=.38,At.MAX_INDIVIDUAL_VARIANCE=.5,At.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],At.START_PATTERN=Int32Array.from([1,1,1,1]),At.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class jt extends $t{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let o=!1,c,f=0,h=Int32Array.from([0,0,0]);for(;!o;){h=Int32Array.from([0,0,0]),c=jt.findGuardPattern(s,f,!1,this.START_END_PATTERN,h);let p=c[0];f=c[1];let w=p-(f-p);w>=0&&(o=s.isRange(w,p,!1))}return c}static checkChecksum(s){return jt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let o=s.length;if(o===0)return!1;let c=parseInt(s.charAt(o-1),10);return jt.getStandardUPCEANChecksum(s.substring(0,o-1))===c}static getStandardUPCEANChecksum(s){let o=s.length,c=0;for(let f=o-1;f>=0;f-=2){let h=s.charAt(f).charCodeAt(0)-48;if(h<0||h>9)throw new X;c+=h}c*=3;for(let f=o-2;f>=0;f-=2){let h=s.charAt(f).charCodeAt(0)-48;if(h<0||h>9)throw new X;c+=h}return(1e3-c)%10}static decodeEnd(s,o){return jt.findGuardPattern(s,o,!1,jt.START_END_PATTERN,new Int32Array(jt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,o,c,f){return this.findGuardPattern(s,o,c,f,new Int32Array(f.length))}static findGuardPattern(s,o,c,f,h){let p=s.getSize();o=c?s.getNextUnset(o):s.getNextSet(o);let w=0,C=o,_=f.length,O=c;for(let k=o;k<p;k++)if(s.get(k)!==O)h[w]++;else{if(w===_-1){if($t.patternMatchVariance(h,f,jt.MAX_INDIVIDUAL_VARIANCE)<jt.MAX_AVG_VARIANCE)return Int32Array.from([C,k]);C+=h[0]+h[1];let P=h.slice(2,h.length-1);for(let G=0;G<w-1;G++)h[G]=P[G];h[w-1]=0,h[w]=0,w--}else w++;h[w]=1,O=!O}throw new re}static decodeDigit(s,o,c,f){this.recordPattern(s,c,o);let h=this.MAX_AVG_VARIANCE,p=-1,w=f.length;for(let C=0;C<w;C++){let _=f[C],O=$t.patternMatchVariance(o,_,jt.MAX_INDIVIDUAL_VARIANCE);O<h&&(h=O,p=C)}if(p>=0)return p;throw new re}}jt.MAX_AVG_VARIANCE=.48,jt.MAX_INDIVIDUAL_VARIANCE=.7,jt.START_END_PATTERN=Int32Array.from([1,1,1]),jt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),jt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),jt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ys{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,o,c){let f=this.decodeRowStringBuffer,h=this.decodeMiddle(o,c,f),p=f.toString(),w=Ys.parseExtensionString(p),C=[new Pe((c[0]+c[1])/2,s),new Pe(h,s)],_=new Ne(p,null,0,C,Se.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&_.putAllMetadata(w),_}decodeMiddle(s,o,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let h=s.getSize(),p=o[1],w=0;for(let _=0;_<5&&p<h;_++){let O=jt.decodeDigit(s,f,p,jt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+O%10);for(let k of f)p+=k;O>=10&&(w|=1<<4-_),_!==4&&(p=s.getNextSet(p),p=s.getNextUnset(p))}if(c.length!==5)throw new re;let C=this.determineCheckDigit(w);if(Ys.extensionChecksum(c.toString())!==C)throw new re;return p}static extensionChecksum(s){let o=s.length,c=0;for(let f=o-2;f>=0;f-=2)c+=s.charAt(f).charCodeAt(0)-48;c*=3;for(let f=o-1;f>=0;f-=2)c+=s.charAt(f).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(s){for(let o=0;o<10;o++)if(s===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new re}static parseExtensionString(s){if(s.length!==5)return null;let o=Ys.parseExtension5String(s);return o==null?null:new Map([[ve.SUGGESTED_PRICE,o]])}static parseExtension5String(s){let o;switch(s.charAt(0)){case"0":o="";break;case"5":o="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let c=parseInt(s.substring(1)),f=(c/100).toString(),h=c%100,p=h<10?"0"+h:h.toString();return o+f+"."+p}}class Er{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,o,c){let f=this.decodeRowStringBuffer,h=this.decodeMiddle(o,c,f),p=f.toString(),w=Er.parseExtensionString(p),C=[new Pe((c[0]+c[1])/2,s),new Pe(h,s)],_=new Ne(p,null,0,C,Se.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&_.putAllMetadata(w),_}decodeMiddle(s,o,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let h=s.getSize(),p=o[1],w=0;for(let C=0;C<2&&p<h;C++){let _=jt.decodeDigit(s,f,p,jt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+_%10);for(let O of f)p+=O;_>=10&&(w|=1<<1-C),C!==1&&(p=s.getNextSet(p),p=s.getNextUnset(p))}if(c.length!==2)throw new re;if(parseInt(c.toString())%4!==w)throw new re;return p}static parseExtensionString(s){return s.length!==2?null:new Map([[ve.ISSUE_NUMBER,parseInt(s)]])}}class jc{static decodeRow(s,o,c){let f=jt.findGuardPattern(o,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ys().decodeRow(s,o,f)}catch{return new Er().decodeRow(s,o,f)}}}jc.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Bt extends jt{constructor(){super(),this.decodeRowStringBuffer="",Bt.L_AND_G_PATTERNS=Bt.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let o=Bt.L_PATTERNS[s-10],c=new Int32Array(o.length);for(let f=0;f<o.length;f++)c[f]=o[o.length-f-1];Bt.L_AND_G_PATTERNS[s]=c}}decodeRow(s,o,c){let f=Bt.findStartGuardPattern(o),h=c==null?null:c.get(J.NEED_RESULT_POINT_CALLBACK);if(h!=null){const Ie=new Pe((f[0]+f[1])/2,s);h.foundPossibleResultPoint(Ie)}let p=this.decodeMiddle(o,f,this.decodeRowStringBuffer),w=p.rowOffset,C=p.resultString;if(h!=null){const Ie=new Pe(w,s);h.foundPossibleResultPoint(Ie)}let _=this.decodeEnd(o,w);if(h!=null){const Ie=new Pe((_[0]+_[1])/2,s);h.foundPossibleResultPoint(Ie)}let O=_[1],k=O+(O-_[0]);if(k>=o.getSize()||!o.isRange(O,k,!1))throw new re;let P=C.toString();if(P.length<8)throw new X;if(!Bt.checkChecksum(P))throw new I;let G=(f[1]+f[0])/2,Q=(_[1]+_[0])/2,te=this.getBarcodeFormat(),fe=[new Pe(G,s),new Pe(Q,s)],xe=new Ne(P,null,0,fe,te,new Date().getTime()),Me=0;try{let Ie=jc.decodeRow(s,o,_[1]);xe.putMetadata(ve.UPC_EAN_EXTENSION,Ie.getText()),xe.putAllMetadata(Ie.getResultMetadata()),xe.addResultPoints(Ie.getResultPoints()),Me=Ie.getText().length}catch{}let Le=c==null?null:c.get(J.ALLOWED_EAN_EXTENSIONS);if(Le!=null){let Ie=!1;for(let yt in Le)if(Me.toString()===yt){Ie=!0;break}if(!Ie)throw new re}return xe}decodeEnd(s,o){return Bt.findGuardPattern(s,o,!1,Bt.START_END_PATTERN,new Int32Array(Bt.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return Bt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let o=s.length;if(o===0)return!1;let c=parseInt(s.charAt(o-1),10);return Bt.getStandardUPCEANChecksum(s.substring(0,o-1))===c}static getStandardUPCEANChecksum(s){let o=s.length,c=0;for(let f=o-1;f>=0;f-=2){let h=s.charAt(f).charCodeAt(0)-48;if(h<0||h>9)throw new X;c+=h}c*=3;for(let f=o-2;f>=0;f-=2){let h=s.charAt(f).charCodeAt(0)-48;if(h<0||h>9)throw new X;c+=h}return(1e3-c)%10}}class Wi extends Bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,o,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let h=s.getSize(),p=o[1],w=0;for(let _=0;_<6&&p<h;_++){let O=Bt.decodeDigit(s,f,p,Bt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+O%10);for(let k of f)p+=k;O>=10&&(w|=1<<5-_)}c=Wi.determineFirstDigit(c,w),p=Bt.findGuardPattern(s,p,!0,Bt.MIDDLE_PATTERN,new Int32Array(Bt.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<6&&p<h;_++){let O=Bt.decodeDigit(s,f,p,Bt.L_PATTERNS);c+=String.fromCharCode(48+O);for(let k of f)p+=k}return{rowOffset:p,resultString:c}}getBarcodeFormat(){return Se.EAN_13}static determineFirstDigit(s,o){for(let c=0;c<10;c++)if(o===this.FIRST_DIGIT_ENCODINGS[c])return s=String.fromCharCode(48+c)+s,s;throw new re}}Wi.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ld extends Bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,o,c){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let h=s.getSize(),p=o[1];for(let C=0;C<4&&p<h;C++){let _=Bt.decodeDigit(s,f,p,Bt.L_PATTERNS);c+=String.fromCharCode(48+_);for(let O of f)p+=O}p=Bt.findGuardPattern(s,p,!0,Bt.MIDDLE_PATTERN,new Int32Array(Bt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<4&&p<h;C++){let _=Bt.decodeDigit(s,f,p,Bt.L_PATTERNS);c+=String.fromCharCode(48+_);for(let O of f)p+=O}return{rowOffset:p,resultString:c}}getBarcodeFormat(){return Se.EAN_8}}class Bc extends Bt{constructor(){super(...arguments),this.ean13Reader=new Wi}getBarcodeFormat(){return Se.UPC_A}decode(s,o){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,o,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,o,c))}decodeMiddle(s,o,c){return this.ean13Reader.decodeMiddle(s,o,c)}maybeReturnResult(s){let o=s.getText();if(o.charAt(0)==="0"){let c=new Ne(o.substring(1),null,null,s.getResultPoints(),Se.UPC_A);return s.getResultMetadata()!=null&&c.putAllMetadata(s.getResultMetadata()),c}else throw new re}reset(){this.ean13Reader.reset()}}class ji extends Bt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,o,c){const f=this.decodeMiddleCounters.map(_=>_);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const h=s.getSize();let p=o[1],w=0;for(let _=0;_<6&&p<h;_++){const O=ji.decodeDigit(s,f,p,ji.L_AND_G_PATTERNS);c+=String.fromCharCode(48+O%10);for(let k of f)p+=k;O>=10&&(w|=1<<5-_)}let C=ji.determineNumSysAndCheckDigit(c,w);return{rowOffset:p,resultString:C}}decodeEnd(s,o){return ji.findGuardPatternWithoutCounters(s,o,!0,ji.MIDDLE_END_PATTERN)}checkChecksum(s){return Bt.checkChecksum(ji.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,o){for(let c=0;c<=1;c++)for(let f=0;f<10;f++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][f]){let h=String.fromCharCode(48+c),p=String.fromCharCode(48+f);return h+s+p}throw re.getNotFoundInstance()}getBarcodeFormat(){return Se.UPC_E}static convertUPCEtoUPCA(s){const o=s.slice(1,7).split("").map(h=>h.charCodeAt(0)),c=new de;c.append(s.charAt(0));let f=o[5];switch(f){case 0:case 1:case 2:c.appendChars(o,0,2),c.append(f),c.append("0000"),c.appendChars(o,2,3);break;case 3:c.appendChars(o,0,3),c.append("00000"),c.appendChars(o,3,2);break;case 4:c.appendChars(o,0,4),c.append("00000"),c.append(o[4]);break;default:c.appendChars(o,0,5),c.append("0000"),c.append(f);break}return s.length>=8&&c.append(s.charAt(7)),c.toString()}}ji.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ji.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class uo extends $t{constructor(s){super();let o=s==null?null:s.get(J.POSSIBLE_FORMATS),c=[];r(o)?(c.push(new Wi),c.push(new Bc),c.push(new Ld),c.push(new ji)):(o.indexOf(Se.EAN_13)>-1&&c.push(new Wi),o.indexOf(Se.UPC_A)>-1&&c.push(new Bc),o.indexOf(Se.EAN_8)>-1&&c.push(new Ld),o.indexOf(Se.UPC_E)>-1&&c.push(new ji)),this.readers=c}decodeRow(s,o,c){for(let f of this.readers)try{const h=f.decodeRow(s,o,c),p=h.getBarcodeFormat()===Se.EAN_13&&h.getText().charAt(0)==="0",w=c==null?null:c.get(J.POSSIBLE_FORMATS),C=w==null||w.includes(Se.UPC_A);if(p&&C){const _=h.getRawBytes(),O=new Ne(h.getText().substring(1),_,_?_.length:null,h.getResultPoints(),Se.UPC_A);return O.putAllMetadata(h.getResultMetadata()),O}return h}catch{}throw new re}reset(){for(let s of this.readers)s.reset()}}class Pn extends $t{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,o){for(let c=0;c<o.length;c++)if($t.patternMatchVariance(s,o[c],Pn.MAX_INDIVIDUAL_VARIANCE)<Pn.MAX_AVG_VARIANCE)return c;throw new re}static count(s){return ze.sum(new Int32Array(s))}static increment(s,o){let c=0,f=o[0];for(let h=1;h<s.length;h++)o[h]>f&&(f=o[h],c=h);s[c]++}static decrement(s,o){let c=0,f=o[0];for(let h=1;h<s.length;h++)o[h]<f&&(f=o[h],c=h);s[c]--}static isFinderPattern(s){let o=s[0]+s[1],c=o+s[2]+s[3],f=o/c;if(f>=Pn.MIN_FINDER_PATTERN_RATIO&&f<=Pn.MAX_FINDER_PATTERN_RATIO){let h=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let w of s)w>p&&(p=w),w<h&&(h=w);return p<10*h}return!1}}Pn.MAX_AVG_VARIANCE=.2,Pn.MAX_INDIVIDUAL_VARIANCE=.45,Pn.MIN_FINDER_PATTERN_RATIO=9.5/12,Pn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Cr{constructor(s,o){this.value=s,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Cr))return!1;const o=s;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ul{constructor(s,o,c,f,h){this.value=s,this.startEnd=o,this.value=s,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new Pe(c,h)),this.resultPoints.push(new Pe(f,h))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof ul))return!1;const o=s;return this.value===o.value}hashCode(){return this.value}}class zn{constructor(){}static getRSSvalue(s,o,c){let f=0;for(let C of s)f+=C;let h=0,p=0,w=s.length;for(let C=0;C<w-1;C++){let _;for(_=1,p|=1<<C;_<s[C];_++,p&=~(1<<C)){let O=zn.combins(f-_-1,w-C-2);if(c&&p===0&&f-_-(w-C-1)>=w-C-1&&(O-=zn.combins(f-_-(w-C),w-C-2)),w-C-1>1){let k=0;for(let P=f-_-(w-C-2);P>o;P--)k+=zn.combins(f-_-P-1,w-C-3);O-=k*(w-1-C)}else f-_>o&&O--;h+=O}f-=_}return h}static combins(s,o){let c,f;s-o>o?(f=o,c=s-o):(f=s-o,c=o);let h=1,p=1;for(let w=s;w>c;w--)h*=w,p<=f&&(h/=p,p++);for(;p<=f;)h/=p,p++;return h}}class ei{static buildBitArray(s){let o=s.length*2-1;s[s.length-1].getRightChar()==null&&(o-=1);let c=12*o,f=new V(c),h=0,w=s[0].getRightChar().getValue();for(let C=11;C>=0;--C)(w&1<<C)!=0&&f.set(h),h++;for(let C=1;C<s.length;++C){let _=s[C],O=_.getLeftChar().getValue();for(let k=11;k>=0;--k)(O&1<<k)!=0&&f.set(h),h++;if(_.getRightChar()!=null){let k=_.getRightChar().getValue();for(let P=11;P>=0;--P)(k&1<<P)!=0&&f.set(h),h++}}return f}}class vn{constructor(s,o){o?this.decodedInformation=null:(this.finished=s,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Xs{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class ti extends Xs{constructor(s,o){super(s),this.value=o}getValue(){return this.value}isFNC1(){return this.value===ti.FNC1}}ti.FNC1="$";class Ar extends Xs{constructor(s,o,c){super(s),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Bi extends Xs{constructor(s,o,c){if(super(s),o<0||o>10||c<0||c>10)throw new X;this.firstDigit=o,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Bi.FNC1}isSecondDigitFNC1(){return this.secondDigit===Bi.FNC1}isAnyFNC1(){return this.firstDigit===Bi.FNC1||this.secondDigit===Bi.FNC1}}Bi.FNC1=10;class Ge{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new re;let o=s.substring(0,2);for(let h of Ge.TWO_DIGIT_DATA_LENGTH)if(h[0]===o)return h[1]===Ge.VARIABLE_LENGTH?Ge.processVariableAI(2,h[2],s):Ge.processFixedAI(2,h[1],s);if(s.length<3)throw new re;let c=s.substring(0,3);for(let h of Ge.THREE_DIGIT_DATA_LENGTH)if(h[0]===c)return h[1]===Ge.VARIABLE_LENGTH?Ge.processVariableAI(3,h[2],s):Ge.processFixedAI(3,h[1],s);for(let h of Ge.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(h[0]===c)return h[1]===Ge.VARIABLE_LENGTH?Ge.processVariableAI(4,h[2],s):Ge.processFixedAI(4,h[1],s);if(s.length<4)throw new re;let f=s.substring(0,4);for(let h of Ge.FOUR_DIGIT_DATA_LENGTH)if(h[0]===f)return h[1]===Ge.VARIABLE_LENGTH?Ge.processVariableAI(4,h[2],s):Ge.processFixedAI(4,h[1],s);throw new re}static processFixedAI(s,o,c){if(c.length<s)throw new re;let f=c.substring(0,s);if(c.length<s+o)throw new re;let h=c.substring(s,s+o),p=c.substring(s+o),w="("+f+")"+h,C=Ge.parseFieldsInGeneralPurpose(p);return C==null?w:w+C}static processVariableAI(s,o,c){let f=c.substring(0,s),h;c.length<s+o?h=c.length:h=s+o;let p=c.substring(s,h),w=c.substring(h),C="("+f+")"+p,_=Ge.parseFieldsInGeneralPurpose(w);return _==null?C:C+_}}Ge.VARIABLE_LENGTH=[],Ge.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ge.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ge.VARIABLE_LENGTH,20],["22",Ge.VARIABLE_LENGTH,29],["30",Ge.VARIABLE_LENGTH,8],["37",Ge.VARIABLE_LENGTH,8],["90",Ge.VARIABLE_LENGTH,30],["91",Ge.VARIABLE_LENGTH,30],["92",Ge.VARIABLE_LENGTH,30],["93",Ge.VARIABLE_LENGTH,30],["94",Ge.VARIABLE_LENGTH,30],["95",Ge.VARIABLE_LENGTH,30],["96",Ge.VARIABLE_LENGTH,30],["97",Ge.VARIABLE_LENGTH,3],["98",Ge.VARIABLE_LENGTH,30],["99",Ge.VARIABLE_LENGTH,30]],Ge.THREE_DIGIT_DATA_LENGTH=[["240",Ge.VARIABLE_LENGTH,30],["241",Ge.VARIABLE_LENGTH,30],["242",Ge.VARIABLE_LENGTH,6],["250",Ge.VARIABLE_LENGTH,30],["251",Ge.VARIABLE_LENGTH,30],["253",Ge.VARIABLE_LENGTH,17],["254",Ge.VARIABLE_LENGTH,20],["400",Ge.VARIABLE_LENGTH,30],["401",Ge.VARIABLE_LENGTH,30],["402",17],["403",Ge.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ge.VARIABLE_LENGTH,20],["421",Ge.VARIABLE_LENGTH,15],["422",3],["423",Ge.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ge.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ge.VARIABLE_LENGTH,15],["391",Ge.VARIABLE_LENGTH,18],["392",Ge.VARIABLE_LENGTH,15],["393",Ge.VARIABLE_LENGTH,18],["703",Ge.VARIABLE_LENGTH,30]],Ge.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ge.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ge.VARIABLE_LENGTH,20],["8003",Ge.VARIABLE_LENGTH,30],["8004",Ge.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ge.VARIABLE_LENGTH,30],["8008",Ge.VARIABLE_LENGTH,12],["8018",18],["8020",Ge.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ge.VARIABLE_LENGTH,70],["8200",Ge.VARIABLE_LENGTH,70]];class us{constructor(s){this.buffer=new de,this.information=s}decodeAllCodes(s,o){let c=o,f=null;do{let h=this.decodeGeneralPurposeField(c,f),p=Ge.parseFieldsInGeneralPurpose(h.getNewString());if(p!=null&&s.append(p),h.isRemaining()?f=""+h.getRemainingValue():f=null,c===h.getNewPosition())break;c=h.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let o=s;o<s+3;++o)if(this.information.get(o))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let h=this.extractNumericValueFromBitArray(s,4);return h===0?new Bi(this.information.getSize(),Bi.FNC1,Bi.FNC1):new Bi(this.information.getSize(),h-1,Bi.FNC1)}let o=this.extractNumericValueFromBitArray(s,7),c=(o-8)/11,f=(o-8)%11;return new Bi(s+7,c,f)}extractNumericValueFromBitArray(s,o){return us.extractNumericValueFromBitArray(this.information,s,o)}static extractNumericValueFromBitArray(s,o,c){let f=0;for(let h=0;h<c;++h)s.get(o+h)&&(f|=1<<c-h-1);return f}decodeGeneralPurposeField(s,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(s);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new Ar(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new Ar(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,o;do{let c=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),s=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),s=o.isFinished()):(o=this.parseNumericBlock(),s=o.isFinished()),!(c!==this.current.getPosition())&&!s)break}while(!s);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let o;return s.isSecondDigitFNC1()?o=new Ar(this.current.getPosition(),this.buffer.toString()):o=new Ar(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new vn(!0,o)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let o=new Ar(this.current.getPosition(),this.buffer.toString());return new vn(!0,o)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new vn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let o=new Ar(this.current.getPosition(),this.buffer.toString());return new vn(!0,o)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new vn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let o=new Ar(this.current.getPosition(),this.buffer.toString());return new vn(!0,o)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new vn(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(s,5);if(o>=5&&o<16)return!0;if(s+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(s,7);if(c>=64&&c<116)return!0;if(s+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(s,8);return f>=232&&f<253}decodeIsoIec646(s){let o=this.extractNumericValueFromBitArray(s,5);if(o===15)return new ti(s+5,ti.FNC1);if(o>=5&&o<15)return new ti(s+5,"0"+(o-5));let c=this.extractNumericValueFromBitArray(s,7);if(c>=64&&c<90)return new ti(s+7,""+(c+1));if(c>=90&&c<116)return new ti(s+7,""+(c+7));let f=this.extractNumericValueFromBitArray(s,8),h;switch(f){case 232:h="!";break;case 233:h='"';break;case 234:h="%";break;case 235:h="&";break;case 236:h="'";break;case 237:h="(";break;case 238:h=")";break;case 239:h="*";break;case 240:h="+";break;case 241:h=",";break;case 242:h="-";break;case 243:h=".";break;case 244:h="/";break;case 245:h=":";break;case 246:h=";";break;case 247:h="<";break;case 248:h="=";break;case 249:h=">";break;case 250:h="?";break;case 251:h="_";break;case 252:h=" ";break;default:throw new X}return new ti(s+8,h)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(s,5);if(o>=5&&o<16)return!0;if(s+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(s,6);return c>=16&&c<63}decodeAlphanumeric(s){let o=this.extractNumericValueFromBitArray(s,5);if(o===15)return new ti(s+5,ti.FNC1);if(o>=5&&o<15)return new ti(s+5,"0"+(o-5));let c=this.extractNumericValueFromBitArray(s,6);if(c>=32&&c<58)return new ti(s+6,""+(c+33));let f;switch(c){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new Ke("Decoding invalid alphanumeric value: "+c)}return new ti(s+6,f)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let o=0;o<5&&o+s<this.information.getSize();++o)if(o===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+o))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let o=s;o<s+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let o=0;o<4&&o+s<this.information.getSize();++o)if(this.information.get(s+o))return!1;return!0}}class fo{constructor(s){this.information=s,this.generalDecoder=new us(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Rn extends fo{constructor(s){super(s)}encodeCompressedGtin(s,o){s.append("(01)");let c=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,o,c)}encodeCompressedGtinWithoutAI(s,o,c){for(let f=0;f<4;++f){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*f,10);h/100===0&&s.append("0"),h/10===0&&s.append("0"),s.append(h)}Rn.appendCheckDigit(s,c)}static appendCheckDigit(s,o){let c=0;for(let f=0;f<13;f++){let h=s.charAt(f+o).charCodeAt(0)-48;c+=(f&1)===0?3*h:h}c=10-c%10,c===10&&(c=0),s.append(c)}}Rn.GTIN_SIZE=40;class Ki extends Rn{constructor(s){super(s)}parseInformation(){let s=new de;s.append("(01)");let o=s.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(Ki.HEADER_SIZE,4);return s.append(c),this.encodeCompressedGtinWithoutAI(s,Ki.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(s,Ki.HEADER_SIZE+44)}}Ki.HEADER_SIZE=4;class Ws extends fo{constructor(s){super(s)}parseInformation(){let s=new de;return this.getGeneralDecoder().decodeAllCodes(s,Ws.HEADER_SIZE)}}Ws.HEADER_SIZE=5;class Rs extends Rn{constructor(s){super(s)}encodeCompressedWeight(s,o,c){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(o,c);this.addWeightCode(s,f);let h=this.checkWeight(f),p=1e5;for(let w=0;w<5;++w)h/p===0&&s.append("0"),p/=10;s.append(h)}}class Wt extends Rs{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=Wt.HEADER_SIZE+Rs.GTIN_SIZE+Wt.WEIGHT_SIZE)throw new re;let s=new de;return this.encodeCompressedGtin(s,Wt.HEADER_SIZE),this.encodeCompressedWeight(s,Wt.HEADER_SIZE+Rs.GTIN_SIZE,Wt.WEIGHT_SIZE),s.toString()}}Wt.HEADER_SIZE=5,Wt.WEIGHT_SIZE=15;class kd extends Wt{constructor(s){super(s)}addWeightCode(s,o){s.append("(3103)")}checkWeight(s){return s}}class jd extends Wt{constructor(s){super(s)}addWeightCode(s,o){o<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class ni extends Rn{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<ni.HEADER_SIZE+Rn.GTIN_SIZE)throw new re;let s=new de;this.encodeCompressedGtin(s,ni.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(ni.HEADER_SIZE+Rn.GTIN_SIZE,ni.LAST_DIGIT_SIZE);s.append("(392"),s.append(o),s.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(ni.HEADER_SIZE+Rn.GTIN_SIZE+ni.LAST_DIGIT_SIZE,null);return s.append(c.getNewString()),s.toString()}}ni.HEADER_SIZE=8,ni.LAST_DIGIT_SIZE=2;class Sn extends Rn{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Sn.HEADER_SIZE+Rn.GTIN_SIZE)throw new re;let s=new de;this.encodeCompressedGtin(s,Sn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Sn.HEADER_SIZE+Rn.GTIN_SIZE,Sn.LAST_DIGIT_SIZE);s.append("(393"),s.append(o),s.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(Sn.HEADER_SIZE+Rn.GTIN_SIZE+Sn.LAST_DIGIT_SIZE,Sn.FIRST_THREE_DIGITS_SIZE);c/100==0&&s.append("0"),c/10==0&&s.append("0"),s.append(c);let f=this.getGeneralDecoder().decodeGeneralPurposeField(Sn.HEADER_SIZE+Rn.GTIN_SIZE+Sn.LAST_DIGIT_SIZE+Sn.FIRST_THREE_DIGITS_SIZE,null);return s.append(f.getNewString()),s.toString()}}Sn.HEADER_SIZE=8,Sn.LAST_DIGIT_SIZE=2,Sn.FIRST_THREE_DIGITS_SIZE=10;class ln extends Rs{constructor(s,o,c){super(s),this.dateCode=c,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=ln.HEADER_SIZE+ln.GTIN_SIZE+ln.WEIGHT_SIZE+ln.DATE_SIZE)throw new re;let s=new de;return this.encodeCompressedGtin(s,ln.HEADER_SIZE),this.encodeCompressedWeight(s,ln.HEADER_SIZE+ln.GTIN_SIZE,ln.WEIGHT_SIZE),this.encodeCompressedDate(s,ln.HEADER_SIZE+ln.GTIN_SIZE+ln.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,o){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(o,ln.DATE_SIZE);if(c==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let f=c%32;c/=32;let h=c%12+1;c/=12;let p=c;p/10==0&&s.append("0"),s.append(p),h/10==0&&s.append("0"),s.append(h),f/10==0&&s.append("0"),s.append(f)}addWeightCode(s,o){s.append("("),s.append(this.firstAIdigits),s.append(o/1e5),s.append(")")}checkWeight(s){return s%1e5}}ln.HEADER_SIZE=8,ln.WEIGHT_SIZE=20,ln.DATE_SIZE=16;function Pc(L){try{if(L.get(1))return new Ki(L);if(!L.get(2))return new Ws(L);switch(us.extractNumericValueFromBitArray(L,1,4)){case 4:return new kd(L);case 5:return new jd(L)}switch(us.extractNumericValueFromBitArray(L,1,5)){case 12:return new ni(L);case 13:return new Sn(L)}switch(us.extractNumericValueFromBitArray(L,1,7)){case 56:return new ln(L,"310","11");case 57:return new ln(L,"320","11");case 58:return new ln(L,"310","13");case 59:return new ln(L,"320","13");case 60:return new ln(L,"310","15");case 61:return new ln(L,"320","15");case 62:return new ln(L,"310","17");case 63:return new ln(L,"320","17")}}catch(s){throw console.log(s),new Ke("unknown decoder: "+L)}}class Os{constructor(s,o,c,f){this.leftchar=s,this.rightchar=o,this.finderpattern=c,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,o){return s instanceof Os?Os.equalsOrNull(s.leftchar,o.leftchar)&&Os.equalsOrNull(s.rightchar,o.rightchar)&&Os.equalsOrNull(s.finderpattern,o.finderpattern):!1}static equalsOrNull(s,o){return s===null?o===null:Os.equals(s,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Uc{constructor(s,o,c){this.pairs=s,this.rowNumber=o,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,o){return s instanceof Uc?this.checkEqualitity(s,o)&&s.wasReversed===o.wasReversed:!1}checkEqualitity(s,o){if(!s||!o)return;let c;return s.forEach((f,h)=>{o.forEach(p=>{f.getLeftChar().getValue()===p.getLeftChar().getValue()&&f.getRightChar().getValue()===p.getRightChar().getValue()&&f.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(c=!0)})}),c}}class Re extends Pn{constructor(s){super(...arguments),this.pairs=new Array(Re.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,o,c){this.pairs.length=0,this.startFromEven=!1;try{return Re.constructResult(this.decodeRow2pairs(s,o))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,Re.constructResult(this.decodeRow2pairs(s,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,o){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,s))}catch(h){if(h instanceof re){if(!this.pairs.length)throw new re;c=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(s,!1),f){let h=this.checkRowsBoolean(!1);if(h!=null||(h=this.checkRowsBoolean(!0),h!=null))return h}throw new re}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return s&&(this.rows=this.rows.reverse()),o}checkRows(s,o){for(let c=o;c<this.rows.length;c++){let f=this.rows[c];this.pairs.length=0;for(let p of s)this.pairs.push(p.getPairs());if(this.pairs.push(f.getPairs()),!Re.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let h=new Array(s);h.push(f);try{return this.checkRows(h,c+1)}catch(p){this.verbose&&console.log(p)}}throw new re}static isValidSequence(s){for(let o of Re.FINDER_PATTERN_SEQUENCES){if(s.length>o.length)continue;let c=!0;for(let f=0;f<s.length;f++)if(s[f].getFinderPattern().getValue()!=o[f]){c=!1;break}if(c)return!0}return!1}storeRow(s,o){let c=0,f=!1,h=!1;for(;c<this.rows.length;){let p=this.rows[c];if(p.getRowNumber()>s){h=p.isEquivalent(this.pairs);break}f=p.isEquivalent(this.pairs),c++}h||f||Re.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new Uc(this.pairs,s,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,o){for(let c of o)if(c.getPairs().length!==s.length){for(let f of c.getPairs())for(let h of s)if(Os.equals(f,h))break}}static isPartialRow(s,o){for(let c of o){let f=!0;for(let h of s){let p=!1;for(let w of c.getPairs())if(h.equals(w)){p=!0;break}if(!p){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(s){let o=ei.buildBitArray(s),f=Pc(o).parseInformation(),h=s[0].getFinderPattern().getResultPoints(),p=s[s.length-1].getFinderPattern().getResultPoints(),w=[h[0],h[1],p[0],p[1]];return new Ne(f,null,null,w,Se.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),o=s.getLeftChar(),c=s.getRightChar();if(c==null)return!1;let f=c.getChecksumPortion(),h=2;for(let w=1;w<this.pairs.size();++w){let C=this.pairs.get(w);f+=C.getLeftChar().getChecksumPortion(),h++;let _=C.getRightChar();_!=null&&(f+=_.getChecksumPortion(),h++)}return f%=211,211*(h-4)+f==o.getValue()}static getNextSecondBar(s,o){let c;return s.get(o)?(c=s.getNextUnset(o),c=s.getNextSet(c)):(c=s.getNextSet(o),c=s.getNextUnset(c)),c}retrieveNextPair(s,o,c){let f=o.length%2==0;this.startFromEven&&(f=!f);let h,p=!0,w=-1;do this.findNextPair(s,o,w),h=this.parseFoundFinderPattern(s,c,f),h==null?w=Re.getNextSecondBar(s,this.startEnd[0]):p=!1;while(p);let C=this.decodeDataCharacter(s,h,f,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new re;let _;try{_=this.decodeDataCharacter(s,h,f,!1)}catch(O){_=null,this.verbose&&console.log(O)}return new Os(C,_,h,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,o,c){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let h=s.getSize(),p;c>=0?p=c:this.isEmptyPair(o)?p=0:p=o[o.length-1].getFinderPattern().getStartEnd()[1];let w=o.length%2!=0;this.startFromEven&&(w=!w);let C=!1;for(;p<h&&(C=!s.get(p),!!C);)p++;let _=0,O=p;for(let k=p;k<h;k++)if(s.get(k)!=C)f[_]++;else{if(_==3){if(w&&Re.reverseCounters(f),Re.isFinderPattern(f)){this.startEnd[0]=O,this.startEnd[1]=k;return}w&&Re.reverseCounters(f),O+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,_--}else _++;f[_]=1,C=!C}throw new re}static reverseCounters(s){let o=s.length;for(let c=0;c<o/2;++c){let f=s[c];s[c]=s[o-c-1],s[o-c-1]=f}}parseFoundFinderPattern(s,o,c){let f,h,p;if(c){let _=this.startEnd[0]-1;for(;_>=0&&!s.get(_);)_--;_++,f=this.startEnd[0]-_,h=_,p=this.startEnd[1]}else h=this.startEnd[0],p=s.getNextUnset(this.startEnd[1]+1),f=p-this.startEnd[1];let w=this.getDecodeFinderCounters();j.arraycopy(w,0,w,1,w.length-1),w[0]=f;let C;try{C=this.parseFinderValue(w,Re.FINDER_PATTERNS)}catch{return null}return new ul(C,[h,p],h,p,o)}decodeDataCharacter(s,o,c,f){let h=this.getDataCharacterCounters();for(let Zt=0;Zt<h.length;Zt++)h[Zt]=0;if(f)Re.recordPatternInReverse(s,o.getStartEnd()[0],h);else{Re.recordPattern(s,o.getStartEnd()[1],h);for(let Zt=0,Xn=h.length-1;Zt<Xn;Zt++,Xn--){let wi=h[Zt];h[Zt]=h[Xn],h[Xn]=wi}}let p=17,w=ze.sum(new Int32Array(h))/p,C=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(w-C)/C>.3)throw new re;let _=this.getOddCounts(),O=this.getEvenCounts(),k=this.getOddRoundingErrors(),P=this.getEvenRoundingErrors();for(let Zt=0;Zt<h.length;Zt++){let Xn=1*h[Zt]/w,wi=Xn+.5;if(wi<1){if(Xn<.3)throw new re;wi=1}else if(wi>8){if(Xn>8.7)throw new re;wi=8}let Or=Zt/2;(Zt&1)==0?(_[Or]=wi,k[Or]=Xn-wi):(O[Or]=wi,P[Or]=Xn-wi)}this.adjustOddEvenCounts(p);let G=4*o.getValue()+(c?0:2)+(f?0:1)-1,Q=0,te=0;for(let Zt=_.length-1;Zt>=0;Zt--){if(Re.isNotA1left(o,c,f)){let Xn=Re.WEIGHTS[G][2*Zt];te+=_[Zt]*Xn}Q+=_[Zt]}let fe=0;for(let Zt=O.length-1;Zt>=0;Zt--)if(Re.isNotA1left(o,c,f)){let Xn=Re.WEIGHTS[G][2*Zt+1];fe+=O[Zt]*Xn}let xe=te+fe;if((Q&1)!=0||Q>13||Q<4)throw new re;let Me=(13-Q)/2,Le=Re.SYMBOL_WIDEST[Me],Ie=9-Le,yt=zn.getRSSvalue(_,Le,!0),pt=zn.getRSSvalue(O,Ie,!1),ui=Re.EVEN_TOTAL_SUBSET[Me],Ui=Re.GSUM[Me],bi=yt*ui+pt+Ui;return new Cr(bi,xe)}static isNotA1left(s,o,c){return!(s.getValue()==0&&o&&c)}adjustOddEvenCounts(s){let o=ze.sum(new Int32Array(this.getOddCounts())),c=ze.sum(new Int32Array(this.getEvenCounts())),f=!1,h=!1;o>13?h=!0:o<4&&(f=!0);let p=!1,w=!1;c>13?w=!0:c<4&&(p=!0);let C=o+c-s,_=(o&1)==1,O=(c&1)==0;if(C==1)if(_){if(O)throw new re;h=!0}else{if(!O)throw new re;w=!0}else if(C==-1)if(_){if(O)throw new re;f=!0}else{if(!O)throw new re;p=!0}else if(C==0){if(_){if(!O)throw new re;o<c?(f=!0,w=!0):(h=!0,p=!0)}else if(O)throw new re}else throw new re;if(f){if(h)throw new re;Re.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&Re.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(w)throw new re;Re.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Re.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Re.SYMBOL_WIDEST=[7,5,4,3,1],Re.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Re.GSUM=[0,348,1388,2948,3988],Re.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Re.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Re.FINDER_PAT_A=0,Re.FINDER_PAT_B=1,Re.FINDER_PAT_C=2,Re.FINDER_PAT_D=3,Re.FINDER_PAT_E=4,Re.FINDER_PAT_F=5,Re.FINDER_PATTERN_SEQUENCES=[[Re.FINDER_PAT_A,Re.FINDER_PAT_A],[Re.FINDER_PAT_A,Re.FINDER_PAT_B,Re.FINDER_PAT_B],[Re.FINDER_PAT_A,Re.FINDER_PAT_C,Re.FINDER_PAT_B,Re.FINDER_PAT_D],[Re.FINDER_PAT_A,Re.FINDER_PAT_E,Re.FINDER_PAT_B,Re.FINDER_PAT_D,Re.FINDER_PAT_C],[Re.FINDER_PAT_A,Re.FINDER_PAT_E,Re.FINDER_PAT_B,Re.FINDER_PAT_D,Re.FINDER_PAT_D,Re.FINDER_PAT_F],[Re.FINDER_PAT_A,Re.FINDER_PAT_E,Re.FINDER_PAT_B,Re.FINDER_PAT_D,Re.FINDER_PAT_E,Re.FINDER_PAT_F,Re.FINDER_PAT_F],[Re.FINDER_PAT_A,Re.FINDER_PAT_A,Re.FINDER_PAT_B,Re.FINDER_PAT_B,Re.FINDER_PAT_C,Re.FINDER_PAT_C,Re.FINDER_PAT_D,Re.FINDER_PAT_D],[Re.FINDER_PAT_A,Re.FINDER_PAT_A,Re.FINDER_PAT_B,Re.FINDER_PAT_B,Re.FINDER_PAT_C,Re.FINDER_PAT_C,Re.FINDER_PAT_D,Re.FINDER_PAT_E,Re.FINDER_PAT_E],[Re.FINDER_PAT_A,Re.FINDER_PAT_A,Re.FINDER_PAT_B,Re.FINDER_PAT_B,Re.FINDER_PAT_C,Re.FINDER_PAT_C,Re.FINDER_PAT_D,Re.FINDER_PAT_E,Re.FINDER_PAT_F,Re.FINDER_PAT_F],[Re.FINDER_PAT_A,Re.FINDER_PAT_A,Re.FINDER_PAT_B,Re.FINDER_PAT_B,Re.FINDER_PAT_C,Re.FINDER_PAT_D,Re.FINDER_PAT_D,Re.FINDER_PAT_E,Re.FINDER_PAT_E,Re.FINDER_PAT_F,Re.FINDER_PAT_F]],Re.MAX_PAIRS=11;class dl extends Cr{constructor(s,o,c){super(s,o),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ht extends Pn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,o,c){const f=this.decodePair(o,!1,s,c);Ht.addOrTally(this.possibleLeftPairs,f),o.reverse();let h=this.decodePair(o,!0,s,c);Ht.addOrTally(this.possibleRightPairs,h),o.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let w of this.possibleRightPairs)if(w.getCount()>1&&Ht.checkChecksum(p,w))return Ht.constructResult(p,w)}throw new re}static addOrTally(s,o){if(o==null)return;let c=!1;for(let f of s)if(f.getValue()===o.getValue()){f.incrementCount(),c=!0;break}c||s.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,o){let c=4537077*s.getValue()+o.getValue(),f=new String(c).toString(),h=new de;for(let _=13-f.length;_>0;_--)h.append("0");h.append(f);let p=0;for(let _=0;_<13;_++){let O=h.charAt(_).charCodeAt(0)-48;p+=(_&1)===0?3*O:O}p=10-p%10,p===10&&(p=0),h.append(p.toString());let w=s.getFinderPattern().getResultPoints(),C=o.getFinderPattern().getResultPoints();return new Ne(h.toString(),null,0,[w[0],w[1],C[0],C[1]],Se.RSS_14,new Date().getTime())}static checkChecksum(s,o){let c=(s.getChecksumPortion()+16*o.getChecksumPortion())%79,f=9*s.getFinderPattern().getValue()+o.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,c===f}decodePair(s,o,c,f){try{let h=this.findFinderPattern(s,o),p=this.parseFoundFinderPattern(s,c,o,h),w=f==null?null:f.get(J.NEED_RESULT_POINT_CALLBACK);if(w!=null){let O=(h[0]+h[1])/2;o&&(O=s.getSize()-1-O),w.foundPossibleResultPoint(new Pe(O,c))}let C=this.decodeDataCharacter(s,p,!0),_=this.decodeDataCharacter(s,p,!1);return new dl(1597*C.getValue()+_.getValue(),C.getChecksumPortion()+4*_.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(s,o,c){let f=this.getDataCharacterCounters();for(let fe=0;fe<f.length;fe++)f[fe]=0;if(c)$t.recordPatternInReverse(s,o.getStartEnd()[0],f);else{$t.recordPattern(s,o.getStartEnd()[1]+1,f);for(let fe=0,xe=f.length-1;fe<xe;fe++,xe--){let Me=f[fe];f[fe]=f[xe],f[xe]=Me}}let h=c?16:15,p=ze.sum(new Int32Array(f))/h,w=this.getOddCounts(),C=this.getEvenCounts(),_=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors();for(let fe=0;fe<f.length;fe++){let xe=f[fe]/p,Me=Math.floor(xe+.5);Me<1?Me=1:Me>8&&(Me=8);let Le=Math.floor(fe/2);(fe&1)===0?(w[Le]=Me,_[Le]=xe-Me):(C[Le]=Me,O[Le]=xe-Me)}this.adjustOddEvenCounts(c,h);let k=0,P=0;for(let fe=w.length-1;fe>=0;fe--)P*=9,P+=w[fe],k+=w[fe];let G=0,Q=0;for(let fe=C.length-1;fe>=0;fe--)G*=9,G+=C[fe],Q+=C[fe];let te=P+3*G;if(c){if((k&1)!==0||k>12||k<4)throw new re;let fe=(12-k)/2,xe=Ht.OUTSIDE_ODD_WIDEST[fe],Me=9-xe,Le=zn.getRSSvalue(w,xe,!1),Ie=zn.getRSSvalue(C,Me,!0),yt=Ht.OUTSIDE_EVEN_TOTAL_SUBSET[fe],pt=Ht.OUTSIDE_GSUM[fe];return new Cr(Le*yt+Ie+pt,te)}else{if((Q&1)!==0||Q>10||Q<4)throw new re;let fe=(10-Q)/2,xe=Ht.INSIDE_ODD_WIDEST[fe],Me=9-xe,Le=zn.getRSSvalue(w,xe,!0),Ie=zn.getRSSvalue(C,Me,!1),yt=Ht.INSIDE_ODD_TOTAL_SUBSET[fe],pt=Ht.INSIDE_GSUM[fe];return new Cr(Ie*yt+Le+pt,te)}}findFinderPattern(s,o){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let f=s.getSize(),h=!1,p=0;for(;p<f&&(h=!s.get(p),o!==h);)p++;let w=0,C=p;for(let _=p;_<f;_++)if(s.get(_)!==h)c[w]++;else{if(w===3){if(Pn.isFinderPattern(c))return[C,_];C+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,h=!h}throw new re}parseFoundFinderPattern(s,o,c,f){let h=s.get(f[0]),p=f[0]-1;for(;p>=0&&h!==s.get(p);)p--;p++;const w=f[0]-p,C=this.getDecodeFinderCounters(),_=new Int32Array(C.length);j.arraycopy(C,0,_,1,C.length-1),_[0]=w;const O=this.parseFinderValue(_,Ht.FINDER_PATTERNS);let k=p,P=f[1];return c&&(k=s.getSize()-1-k,P=s.getSize()-1-P),new ul(O,[p,f[1]],k,P,o)}adjustOddEvenCounts(s,o){let c=ze.sum(new Int32Array(this.getOddCounts())),f=ze.sum(new Int32Array(this.getEvenCounts())),h=!1,p=!1,w=!1,C=!1;s?(c>12?p=!0:c<4&&(h=!0),f>12?C=!0:f<4&&(w=!0)):(c>11?p=!0:c<5&&(h=!0),f>10?C=!0:f<4&&(w=!0));let _=c+f-o,O=(c&1)===(s?1:0),k=(f&1)===1;if(_===1)if(O){if(k)throw new re;p=!0}else{if(!k)throw new re;C=!0}else if(_===-1)if(O){if(k)throw new re;h=!0}else{if(!k)throw new re;w=!0}else if(_===0){if(O){if(!k)throw new re;c<f?(h=!0,C=!0):(p=!0,w=!0)}else if(k)throw new re}else throw new re;if(h){if(p)throw new re;Pn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&Pn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),w){if(C)throw new re;Pn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}C&&Pn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ht.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ht.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ht.OUTSIDE_GSUM=[0,161,961,2015,2715],Ht.INSIDE_GSUM=[0,336,1036,1516],Ht.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ht.INSIDE_ODD_WIDEST=[2,4,6,8],Ht.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ks extends $t{constructor(s,o){super(),this.readers=[],this.verbose=o===!0;const c=s?s.get(J.POSSIBLE_FORMATS):null,f=s&&s.get(J.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(Se.EAN_13)||c.includes(Se.UPC_A)||c.includes(Se.EAN_8)||c.includes(Se.UPC_E))&&this.readers.push(new uo(s)),c.includes(Se.CODE_39)&&this.readers.push(new Vt(f)),c.includes(Se.CODE_128)&&this.readers.push(new ke),c.includes(Se.ITF)&&this.readers.push(new At),c.includes(Se.RSS_14)&&this.readers.push(new Ht),c.includes(Se.RSS_EXPANDED)&&this.readers.push(new Re(this.verbose))):(this.readers.push(new uo(s)),this.readers.push(new Vt),this.readers.push(new uo(s)),this.readers.push(new ke),this.readers.push(new At),this.readers.push(new Ht),this.readers.push(new Re(this.verbose)))}decodeRow(s,o,c){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(s,o,c)}catch{}throw new re}reset(){this.readers.forEach(s=>s.reset())}}class Bd extends se{constructor(s=500,o){super(new Ks(o),s,o)}}class Ot{constructor(s,o,c){this.ecCodewords=s,this.ecBlocks=[o],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Pt{constructor(s,o){this.count=s,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Tt{constructor(s,o,c,f,h,p){this.versionNumber=s,this.symbolSizeRows=o,this.symbolSizeColumns=c,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=h,this.ecBlocks=p;let w=0;const C=p.getECCodewords(),_=p.getECBlocks();for(let O of _)w+=O.getCount()*(O.getDataCodewords()+C);this.totalCodewords=w}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,o){if((s&1)!==0||(o&1)!==0)throw new X;for(let c of Tt.VERSIONS)if(c.symbolSizeRows===s&&c.symbolSizeColumns===o)return c;throw new X}toString(){return""+this.versionNumber}static buildVersions(){return[new Tt(1,10,10,8,8,new Ot(5,new Pt(1,3))),new Tt(2,12,12,10,10,new Ot(7,new Pt(1,5))),new Tt(3,14,14,12,12,new Ot(10,new Pt(1,8))),new Tt(4,16,16,14,14,new Ot(12,new Pt(1,12))),new Tt(5,18,18,16,16,new Ot(14,new Pt(1,18))),new Tt(6,20,20,18,18,new Ot(18,new Pt(1,22))),new Tt(7,22,22,20,20,new Ot(20,new Pt(1,30))),new Tt(8,24,24,22,22,new Ot(24,new Pt(1,36))),new Tt(9,26,26,24,24,new Ot(28,new Pt(1,44))),new Tt(10,32,32,14,14,new Ot(36,new Pt(1,62))),new Tt(11,36,36,16,16,new Ot(42,new Pt(1,86))),new Tt(12,40,40,18,18,new Ot(48,new Pt(1,114))),new Tt(13,44,44,20,20,new Ot(56,new Pt(1,144))),new Tt(14,48,48,22,22,new Ot(68,new Pt(1,174))),new Tt(15,52,52,24,24,new Ot(42,new Pt(2,102))),new Tt(16,64,64,14,14,new Ot(56,new Pt(2,140))),new Tt(17,72,72,16,16,new Ot(36,new Pt(4,92))),new Tt(18,80,80,18,18,new Ot(48,new Pt(4,114))),new Tt(19,88,88,20,20,new Ot(56,new Pt(4,144))),new Tt(20,96,96,22,22,new Ot(68,new Pt(4,174))),new Tt(21,104,104,24,24,new Ot(56,new Pt(6,136))),new Tt(22,120,120,18,18,new Ot(68,new Pt(6,175))),new Tt(23,132,132,20,20,new Ot(62,new Pt(8,163))),new Tt(24,144,144,22,22,new Ot(62,new Pt(8,156),new Pt(2,155))),new Tt(25,8,18,6,16,new Ot(7,new Pt(1,5))),new Tt(26,8,32,6,14,new Ot(11,new Pt(1,10))),new Tt(27,12,26,10,24,new Ot(14,new Pt(1,16))),new Tt(28,12,36,10,16,new Ot(18,new Pt(1,22))),new Tt(29,16,36,14,16,new Ot(24,new Pt(1,32))),new Tt(30,16,48,14,22,new Ot(28,new Pt(1,49)))]}}Tt.VERSIONS=Tt.buildVersions();class Fc{constructor(s){const o=s.getHeight();if(o<8||o>144||(o&1)!==0)throw new X;this.version=Fc.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new Oe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const o=s.getHeight(),c=s.getWidth();return Tt.getVersionForDimensions(o,c)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let o=0,c=4,f=0;const h=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let w=!1,C=!1,_=!1,O=!1;do if(c===h&&f===0&&!w)s[o++]=this.readCorner1(h,p)&255,c-=2,f+=2,w=!0;else if(c===h-2&&f===0&&(p&3)!==0&&!C)s[o++]=this.readCorner2(h,p)&255,c-=2,f+=2,C=!0;else if(c===h+4&&f===2&&(p&7)===0&&!_)s[o++]=this.readCorner3(h,p)&255,c-=2,f+=2,_=!0;else if(c===h-2&&f===0&&(p&7)===4&&!O)s[o++]=this.readCorner4(h,p)&255,c-=2,f+=2,O=!0;else{do c<h&&f>=0&&!this.readMappingMatrix.get(f,c)&&(s[o++]=this.readUtah(c,f,h,p)&255),c-=2,f+=2;while(c>=0&&f<p);c+=1,f+=3;do c>=0&&f<p&&!this.readMappingMatrix.get(f,c)&&(s[o++]=this.readUtah(c,f,h,p)&255),c+=2,f-=2;while(c<h&&f>=0);c+=3,f+=1}while(c<h||f<p);if(o!==this.version.getTotalCodewords())throw new X;return s}readModule(s,o,c,f){return s<0&&(s+=c,o+=4-(c+4&7)),o<0&&(o+=f,s+=4-(f+4&7)),this.readMappingMatrix.set(o,s),this.mappingBitMatrix.get(o,s)}readUtah(s,o,c,f){let h=0;return this.readModule(s-2,o-2,c,f)&&(h|=1),h<<=1,this.readModule(s-2,o-1,c,f)&&(h|=1),h<<=1,this.readModule(s-1,o-2,c,f)&&(h|=1),h<<=1,this.readModule(s-1,o-1,c,f)&&(h|=1),h<<=1,this.readModule(s-1,o,c,f)&&(h|=1),h<<=1,this.readModule(s,o-2,c,f)&&(h|=1),h<<=1,this.readModule(s,o-1,c,f)&&(h|=1),h<<=1,this.readModule(s,o,c,f)&&(h|=1),h}readCorner1(s,o){let c=0;return this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,1,s,o)&&(c|=1),c<<=1,this.readModule(s-1,2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c<<=1,this.readModule(2,o-1,s,o)&&(c|=1),c<<=1,this.readModule(3,o-1,s,o)&&(c|=1),c}readCorner2(s,o){let c=0;return this.readModule(s-3,0,s,o)&&(c|=1),c<<=1,this.readModule(s-2,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(0,o-4,s,o)&&(c|=1),c<<=1,this.readModule(0,o-3,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c}readCorner3(s,o){let c=0;return this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,o-1,s,o)&&(c|=1),c<<=1,this.readModule(0,o-3,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-3,s,o)&&(c|=1),c<<=1,this.readModule(1,o-2,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c}readCorner4(s,o){let c=0;return this.readModule(s-3,0,s,o)&&(c|=1),c<<=1,this.readModule(s-2,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c<<=1,this.readModule(2,o-1,s,o)&&(c|=1),c<<=1,this.readModule(3,o-1,s,o)&&(c|=1),c}extractDataRegion(s){const o=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(s.getHeight()!==o)throw new A("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),h=this.version.getDataRegionSizeColumns(),p=o/f|0,w=c/h|0,C=p*f,_=w*h,O=new Oe(_,C);for(let k=0;k<p;++k){const P=k*f;for(let G=0;G<w;++G){const Q=G*h;for(let te=0;te<f;++te){const fe=k*(f+2)+1+te,xe=P+te;for(let Me=0;Me<h;++Me){const Le=G*(h+2)+1+Me;if(s.get(Le,fe)){const Ie=Q+Me;O.set(Ie,xe)}}}}}return O}}class fl{constructor(s,o){this.numDataCodewords=s,this.codewords=o}static getDataBlocks(s,o){const c=o.getECBlocks();let f=0;const h=c.getECBlocks();for(let te of h)f+=te.getCount();const p=new Array(f);let w=0;for(let te of h)for(let fe=0;fe<te.getCount();fe++){const xe=te.getDataCodewords(),Me=c.getECCodewords()+xe;p[w++]=new fl(xe,new Uint8Array(Me))}const _=p[0].codewords.length-c.getECCodewords(),O=_-1;let k=0;for(let te=0;te<O;te++)for(let fe=0;fe<w;fe++)p[fe].codewords[te]=s[k++];const P=o.getVersionNumber()===24,G=P?8:w;for(let te=0;te<G;te++)p[te].codewords[_-1]=s[k++];const Q=p[0].codewords.length;for(let te=_;te<Q;te++)for(let fe=0;fe<w;fe++){const xe=P?(fe+8)%w:fe,Me=P&&xe>7?te-1:te;p[xe].codewords[Me]=s[k++]}if(k!==s.length)throw new A;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class pi{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new A(""+s);let o=0,c=this.bitOffset,f=this.byteOffset;const h=this.bytes;if(c>0){const p=8-c,w=s<p?s:p,C=p-w,_=255>>8-w<<C;o=(h[f]&_)>>C,s-=w,c+=w,c===8&&(c=0,f++)}if(s>0){for(;s>=8;)o=o<<8|h[f]&255,f++,s-=8;if(s>0){const p=8-s,w=255>>p<<p;o=o<<s|(h[f]&w)>>p,c+=s}}return this.bitOffset=c,this.byteOffset=f,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var En;(function(L){L[L.PAD_ENCODE=0]="PAD_ENCODE",L[L.ASCII_ENCODE=1]="ASCII_ENCODE",L[L.C40_ENCODE=2]="C40_ENCODE",L[L.TEXT_ENCODE=3]="TEXT_ENCODE",L[L.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",L[L.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",L[L.BASE256_ENCODE=6]="BASE256_ENCODE"})(En||(En={}));class Zs{static decode(s){const o=new pi(s),c=new de,f=new de,h=new Array;let p=En.ASCII_ENCODE;do if(p===En.ASCII_ENCODE)p=this.decodeAsciiSegment(o,c,f);else{switch(p){case En.C40_ENCODE:this.decodeC40Segment(o,c);break;case En.TEXT_ENCODE:this.decodeTextSegment(o,c);break;case En.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,c);break;case En.EDIFACT_ENCODE:this.decodeEdifactSegment(o,c);break;case En.BASE256_ENCODE:this.decodeBase256Segment(o,c,h);break;default:throw new X}p=En.ASCII_ENCODE}while(p!==En.PAD_ENCODE&&o.available()>0);return f.length()>0&&c.append(f.toString()),new He(s,c.toString(),h.length===0?null:h,null)}static decodeAsciiSegment(s,o,c){let f=!1;do{let h=s.readBits(8);if(h===0)throw new X;if(h<=128)return f&&(h+=128),o.append(String.fromCharCode(h-1)),En.ASCII_ENCODE;if(h===129)return En.PAD_ENCODE;if(h<=229){const p=h-130;p<10&&o.append("0"),o.append(""+p)}else switch(h){case 230:return En.C40_ENCODE;case 231:return En.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:o.append("[)>05"),c.insert(0,"");break;case 237:o.append("[)>06"),c.insert(0,"");break;case 238:return En.ANSIX12_ENCODE;case 239:return En.TEXT_ENCODE;case 240:return En.EDIFACT_ENCODE;case 241:break;default:if(h!==254||s.available()!==0)throw new X;break}}while(s.available()>0);return En.ASCII_ENCODE}static decodeC40Segment(s,o){let c=!1;const f=[];let h=0;do{if(s.available()===8)return;const p=s.readBits(8);if(p===254)return;this.parseTwoBytes(p,s.readBits(8),f);for(let w=0;w<3;w++){const C=f[w];switch(h){case 0:if(C<3)h=C+1;else if(C<this.C40_BASIC_SET_CHARS.length){const _=this.C40_BASIC_SET_CHARS[C];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_)}else throw new X;break;case 1:c?(o.append(String.fromCharCode(C+128)),c=!1):o.append(String.fromCharCode(C)),h=0;break;case 2:if(C<this.C40_SHIFT2_SET_CHARS.length){const _=this.C40_SHIFT2_SET_CHARS[C];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_)}else switch(C){case 27:o.append("");break;case 30:c=!0;break;default:throw new X}h=0;break;case 3:c?(o.append(String.fromCharCode(C+224)),c=!1):o.append(String.fromCharCode(C+96)),h=0;break;default:throw new X}}}while(s.available()>0)}static decodeTextSegment(s,o){let c=!1,f=[],h=0;do{if(s.available()===8)return;const p=s.readBits(8);if(p===254)return;this.parseTwoBytes(p,s.readBits(8),f);for(let w=0;w<3;w++){const C=f[w];switch(h){case 0:if(C<3)h=C+1;else if(C<this.TEXT_BASIC_SET_CHARS.length){const _=this.TEXT_BASIC_SET_CHARS[C];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_)}else throw new X;break;case 1:c?(o.append(String.fromCharCode(C+128)),c=!1):o.append(String.fromCharCode(C)),h=0;break;case 2:if(C<this.TEXT_SHIFT2_SET_CHARS.length){const _=this.TEXT_SHIFT2_SET_CHARS[C];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_)}else switch(C){case 27:o.append("");break;case 30:c=!0;break;default:throw new X}h=0;break;case 3:if(C<this.TEXT_SHIFT3_SET_CHARS.length){const _=this.TEXT_SHIFT3_SET_CHARS[C];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_),h=0}else throw new X;break;default:throw new X}}}while(s.available()>0)}static decodeAnsiX12Segment(s,o){const c=[];do{if(s.available()===8)return;const f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),c);for(let h=0;h<3;h++){const p=c[h];switch(p){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(p<14)o.append(String.fromCharCode(p+44));else if(p<40)o.append(String.fromCharCode(p+51));else throw new X;break}}}while(s.available()>0)}static parseTwoBytes(s,o,c){let f=(s<<8)+o-1,h=Math.floor(f/1600);c[0]=h,f-=h*1600,h=Math.floor(f/40),c[1]=h,c[2]=f-h*40}static decodeEdifactSegment(s,o){do{if(s.available()<=16)return;for(let c=0;c<4;c++){let f=s.readBits(6);if(f===31){const h=8-s.getBitOffset();h!==8&&s.readBits(h);return}(f&32)===0&&(f|=64),o.append(String.fromCharCode(f))}}while(s.available()>0)}static decodeBase256Segment(s,o,c){let f=1+s.getByteOffset();const h=this.unrandomize255State(s.readBits(8),f++);let p;if(h===0?p=s.available()/8|0:h<250?p=h:p=250*(h-249)+this.unrandomize255State(s.readBits(8),f++),p<0)throw new X;const w=new Uint8Array(p);for(let C=0;C<p;C++){if(s.available()<8)throw new X;w[C]=this.unrandomize255State(s.readBits(8),f++)}c.push(w);try{o.append(Ae.decode(w,Ee.ISO88591))}catch(C){throw new Ke("Platform does not support required encoding: "+C.message)}}static unrandomize255State(s,o){const c=149*o%255+1,f=s-c;return f>=0?f:f+256}}Zs.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Zs.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Zs.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Zs.TEXT_SHIFT2_SET_CHARS=Zs.C40_SHIFT2_SET_CHARS,Zs.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class hl{constructor(){this.rsDecoder=new Ze(ue.DATA_MATRIX_FIELD_256)}decode(s){const o=new Fc(s),c=o.getVersion(),f=o.readCodewords(),h=fl.getDataBlocks(f,c);let p=0;for(let _ of h)p+=_.getNumDataCodewords();const w=new Uint8Array(p),C=h.length;for(let _=0;_<C;_++){const O=h[_],k=O.getCodewords(),P=O.getNumDataCodewords();this.correctErrors(k,P);for(let G=0;G<P;G++)w[G*C+_]=k[G]}return Zs.decode(w)}correctErrors(s,o){const c=new Int32Array(s);try{this.rsDecoder.decode(c,s.length-o)}catch{throw new I}for(let f=0;f<o;f++)s[f]=c[f]}}class hn{constructor(s){this.image=s,this.rectangleDetector=new je(this.image)}detect(){const s=this.rectangleDetector.detect();let o=this.detectSolid1(s);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new re;o=this.shiftToModuleCenter(o);const c=o[0],f=o[1],h=o[2],p=o[3];let w=this.transitionsBetween(c,p)+1,C=this.transitionsBetween(h,p)+1;(w&1)===1&&(w+=1),(C&1)===1&&(C+=1),4*w<7*C&&4*C<7*w&&(w=C=Math.max(w,C));let _=hn.sampleGrid(this.image,c,f,h,p,w,C);return new ki(_,[c,f,h,p])}static shiftPoint(s,o,c){let f=(o.getX()-s.getX())/(c+1),h=(o.getY()-s.getY())/(c+1);return new Pe(s.getX()+f,s.getY()+h)}static moveAway(s,o,c){let f=s.getX(),h=s.getY();return f<o?f-=1:f+=1,h<c?h-=1:h+=1,new Pe(f,h)}detectSolid1(s){let o=s[0],c=s[1],f=s[3],h=s[2],p=this.transitionsBetween(o,c),w=this.transitionsBetween(c,f),C=this.transitionsBetween(f,h),_=this.transitionsBetween(h,o),O=p,k=[h,o,c,f];return O>w&&(O=w,k[0]=o,k[1]=c,k[2]=f,k[3]=h),O>C&&(O=C,k[0]=c,k[1]=f,k[2]=h,k[3]=o),O>_&&(k[0]=f,k[1]=h,k[2]=o,k[3]=c),k}detectSolid2(s){let o=s[0],c=s[1],f=s[2],h=s[3],p=this.transitionsBetween(o,h),w=hn.shiftPoint(c,f,(p+1)*4),C=hn.shiftPoint(f,c,(p+1)*4),_=this.transitionsBetween(w,o),O=this.transitionsBetween(C,h);return _<O?(s[0]=o,s[1]=c,s[2]=f,s[3]=h):(s[0]=c,s[1]=f,s[2]=h,s[3]=o),s}correctTopRight(s){let o=s[0],c=s[1],f=s[2],h=s[3],p=this.transitionsBetween(o,h),w=this.transitionsBetween(c,h),C=hn.shiftPoint(o,c,(w+1)*4),_=hn.shiftPoint(f,c,(p+1)*4);p=this.transitionsBetween(C,h),w=this.transitionsBetween(_,h);let O=new Pe(h.getX()+(f.getX()-c.getX())/(p+1),h.getY()+(f.getY()-c.getY())/(p+1)),k=new Pe(h.getX()+(o.getX()-c.getX())/(w+1),h.getY()+(o.getY()-c.getY())/(w+1));if(!this.isValid(O))return this.isValid(k)?k:null;if(!this.isValid(k))return O;let P=this.transitionsBetween(C,O)+this.transitionsBetween(_,O),G=this.transitionsBetween(C,k)+this.transitionsBetween(_,k);return P>G?O:k}shiftToModuleCenter(s){let o=s[0],c=s[1],f=s[2],h=s[3],p=this.transitionsBetween(o,h)+1,w=this.transitionsBetween(f,h)+1,C=hn.shiftPoint(o,c,w*4),_=hn.shiftPoint(f,c,p*4);p=this.transitionsBetween(C,h)+1,w=this.transitionsBetween(_,h)+1,(p&1)===1&&(p+=1),(w&1)===1&&(w+=1);let O=(o.getX()+c.getX()+f.getX()+h.getX())/4,k=(o.getY()+c.getY()+f.getY()+h.getY())/4;o=hn.moveAway(o,O,k),c=hn.moveAway(c,O,k),f=hn.moveAway(f,O,k),h=hn.moveAway(h,O,k);let P,G;return C=hn.shiftPoint(o,c,w*4),C=hn.shiftPoint(C,h,p*4),P=hn.shiftPoint(c,o,w*4),P=hn.shiftPoint(P,f,p*4),_=hn.shiftPoint(f,h,w*4),_=hn.shiftPoint(_,c,p*4),G=hn.shiftPoint(h,f,w*4),G=hn.shiftPoint(G,o,p*4),[C,P,_,G]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,o,c,f,h,p,w){return Lt.getInstance().sampleGrid(s,p,w,.5,.5,p-.5,.5,p-.5,w-.5,.5,w-.5,o.getX(),o.getY(),h.getX(),h.getY(),f.getX(),f.getY(),c.getX(),c.getY())}transitionsBetween(s,o){let c=Math.trunc(s.getX()),f=Math.trunc(s.getY()),h=Math.trunc(o.getX()),p=Math.trunc(o.getY()),w=Math.abs(p-f)>Math.abs(h-c);if(w){let te=c;c=f,f=te,te=h,h=p,p=te}let C=Math.abs(h-c),_=Math.abs(p-f),O=-C/2,k=f<p?1:-1,P=c<h?1:-1,G=0,Q=this.image.get(w?f:c,w?c:f);for(let te=c,fe=f;te!==h;te+=P){let xe=this.image.get(w?fe:te,w?te:fe);if(xe!==Q&&(G++,Q=xe),O+=_,O>0){if(fe===p)break;fe+=k,O-=C}}return G}}class Zi{constructor(){this.decoder=new hl}decode(s,o=null){let c,f;if(o!=null&&o.has(J.PURE_BARCODE)){const _=Zi.extractPureBits(s.getBlackMatrix());c=this.decoder.decode(_),f=Zi.NO_POINTS}else{const _=new hn(s.getBlackMatrix()).detect();c=this.decoder.decode(_.getBits()),f=_.getPoints()}const h=c.getRawBytes(),p=new Ne(c.getText(),h,8*h.length,f,Se.DATA_MATRIX,j.currentTimeMillis()),w=c.getByteSegments();w!=null&&p.putMetadata(ve.BYTE_SEGMENTS,w);const C=c.getECLevel();return C!=null&&p.putMetadata(ve.ERROR_CORRECTION_LEVEL,C),p}reset(){}static extractPureBits(s){const o=s.getTopLeftOnBit(),c=s.getBottomRightOnBit();if(o==null||c==null)throw new re;const f=this.moduleSize(o,s);let h=o[1];const p=c[1];let w=o[0];const _=(c[0]-w+1)/f,O=(p-h+1)/f;if(_<=0||O<=0)throw new re;const k=f/2;h+=k,w+=k;const P=new Oe(_,O);for(let G=0;G<O;G++){const Q=h+G*f;for(let te=0;te<_;te++)s.get(w+te*f,Q)&&P.set(te,G)}return P}static moduleSize(s,o){const c=o.getWidth();let f=s[0];const h=s[1];for(;f<c&&o.get(f,h);)f++;if(f===c)throw new re;const p=f-s[0];if(p===0)throw new re;return p}}Zi.NO_POINTS=[];class n0 extends se{constructor(s=500){super(new Zi,s)}}var $n;(function(L){L[L.L=0]="L",L[L.M=1]="M",L[L.Q=2]="Q",L[L.H=3]="H"})($n||($n={}));class qt{constructor(s,o,c){this.value=s,this.stringValue=o,this.bits=c,qt.FOR_BITS.set(c,this),qt.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return qt.L;case"M":return qt.M;case"Q":return qt.Q;case"H":return qt.H;default:throw new S(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof qt))return!1;const o=s;return this.value===o.value}static forBits(s){if(s<0||s>=qt.FOR_BITS.size)throw new A;return qt.FOR_BITS.get(s)}}qt.FOR_BITS=new Map,qt.FOR_VALUE=new Map,qt.L=new qt($n.L,"L",1),qt.M=new qt($n.M,"M",0),qt.Q=new qt($n.Q,"Q",3),qt.H=new qt($n.H,"H",2);class Gn{constructor(s){this.errorCorrectionLevel=qt.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,o){return B.bitCount(s^o)}static decodeFormatInformation(s,o){const c=Gn.doDecodeFormatInformation(s,o);return c!==null?c:Gn.doDecodeFormatInformation(s^Gn.FORMAT_INFO_MASK_QR,o^Gn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,o){let c=Number.MAX_SAFE_INTEGER,f=0;for(const h of Gn.FORMAT_INFO_DECODE_LOOKUP){const p=h[0];if(p===s||p===o)return new Gn(h[1]);let w=Gn.numBitsDiffering(s,p);w<c&&(f=h[1],c=w),s!==o&&(w=Gn.numBitsDiffering(o,p),w<c&&(f=h[1],c=w))}return c<=3?new Gn(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof Gn))return!1;const o=s;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Gn.FORMAT_INFO_MASK_QR=21522,Gn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class he{constructor(s,...o){this.ecCodewordsPerBlock=s,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const o=this.ecBlocks;for(const c of o)s+=c.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ${constructor(s,o){this.count=s,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Qe{constructor(s,o,...c){this.versionNumber=s,this.alignmentPatternCenters=o,this.ecBlocks=c;let f=0;const h=c[0].getECCodewordsPerBlock(),p=c[0].getECBlocks();for(const w of p)f+=w.getCount()*(w.getDataCodewords()+h);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new X;try{return this.getVersionForNumber((s-17)/4)}catch{throw new X}}static getVersionForNumber(s){if(s<1||s>40)throw new A;return Qe.VERSIONS[s-1]}static decodeVersionInformation(s){let o=Number.MAX_SAFE_INTEGER,c=0;for(let f=0;f<Qe.VERSION_DECODE_INFO.length;f++){const h=Qe.VERSION_DECODE_INFO[f];if(h===s)return Qe.getVersionForNumber(f+7);const p=Gn.numBitsDiffering(s,h);p<o&&(c=f+7,o=p)}return o<=3?Qe.getVersionForNumber(c):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),o=new Oe(s);o.setRegion(0,0,9,9),o.setRegion(s-8,0,8,9),o.setRegion(0,s-8,9,8);const c=this.alignmentPatternCenters.length;for(let f=0;f<c;f++){const h=this.alignmentPatternCenters[f]-2;for(let p=0;p<c;p++)f===0&&(p===0||p===c-1)||f===c-1&&p===0||o.setRegion(this.alignmentPatternCenters[p]-2,h,5,5)}return o.setRegion(6,9,1,s-17),o.setRegion(9,6,s-17,1),this.versionNumber>6&&(o.setRegion(s-11,0,3,6),o.setRegion(0,s-11,6,3)),o}toString(){return""+this.versionNumber}}Qe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Qe.VERSIONS=[new Qe(1,new Int32Array(0),new he(7,new $(1,19)),new he(10,new $(1,16)),new he(13,new $(1,13)),new he(17,new $(1,9))),new Qe(2,Int32Array.from([6,18]),new he(10,new $(1,34)),new he(16,new $(1,28)),new he(22,new $(1,22)),new he(28,new $(1,16))),new Qe(3,Int32Array.from([6,22]),new he(15,new $(1,55)),new he(26,new $(1,44)),new he(18,new $(2,17)),new he(22,new $(2,13))),new Qe(4,Int32Array.from([6,26]),new he(20,new $(1,80)),new he(18,new $(2,32)),new he(26,new $(2,24)),new he(16,new $(4,9))),new Qe(5,Int32Array.from([6,30]),new he(26,new $(1,108)),new he(24,new $(2,43)),new he(18,new $(2,15),new $(2,16)),new he(22,new $(2,11),new $(2,12))),new Qe(6,Int32Array.from([6,34]),new he(18,new $(2,68)),new he(16,new $(4,27)),new he(24,new $(4,19)),new he(28,new $(4,15))),new Qe(7,Int32Array.from([6,22,38]),new he(20,new $(2,78)),new he(18,new $(4,31)),new he(18,new $(2,14),new $(4,15)),new he(26,new $(4,13),new $(1,14))),new Qe(8,Int32Array.from([6,24,42]),new he(24,new $(2,97)),new he(22,new $(2,38),new $(2,39)),new he(22,new $(4,18),new $(2,19)),new he(26,new $(4,14),new $(2,15))),new Qe(9,Int32Array.from([6,26,46]),new he(30,new $(2,116)),new he(22,new $(3,36),new $(2,37)),new he(20,new $(4,16),new $(4,17)),new he(24,new $(4,12),new $(4,13))),new Qe(10,Int32Array.from([6,28,50]),new he(18,new $(2,68),new $(2,69)),new he(26,new $(4,43),new $(1,44)),new he(24,new $(6,19),new $(2,20)),new he(28,new $(6,15),new $(2,16))),new Qe(11,Int32Array.from([6,30,54]),new he(20,new $(4,81)),new he(30,new $(1,50),new $(4,51)),new he(28,new $(4,22),new $(4,23)),new he(24,new $(3,12),new $(8,13))),new Qe(12,Int32Array.from([6,32,58]),new he(24,new $(2,92),new $(2,93)),new he(22,new $(6,36),new $(2,37)),new he(26,new $(4,20),new $(6,21)),new he(28,new $(7,14),new $(4,15))),new Qe(13,Int32Array.from([6,34,62]),new he(26,new $(4,107)),new he(22,new $(8,37),new $(1,38)),new he(24,new $(8,20),new $(4,21)),new he(22,new $(12,11),new $(4,12))),new Qe(14,Int32Array.from([6,26,46,66]),new he(30,new $(3,115),new $(1,116)),new he(24,new $(4,40),new $(5,41)),new he(20,new $(11,16),new $(5,17)),new he(24,new $(11,12),new $(5,13))),new Qe(15,Int32Array.from([6,26,48,70]),new he(22,new $(5,87),new $(1,88)),new he(24,new $(5,41),new $(5,42)),new he(30,new $(5,24),new $(7,25)),new he(24,new $(11,12),new $(7,13))),new Qe(16,Int32Array.from([6,26,50,74]),new he(24,new $(5,98),new $(1,99)),new he(28,new $(7,45),new $(3,46)),new he(24,new $(15,19),new $(2,20)),new he(30,new $(3,15),new $(13,16))),new Qe(17,Int32Array.from([6,30,54,78]),new he(28,new $(1,107),new $(5,108)),new he(28,new $(10,46),new $(1,47)),new he(28,new $(1,22),new $(15,23)),new he(28,new $(2,14),new $(17,15))),new Qe(18,Int32Array.from([6,30,56,82]),new he(30,new $(5,120),new $(1,121)),new he(26,new $(9,43),new $(4,44)),new he(28,new $(17,22),new $(1,23)),new he(28,new $(2,14),new $(19,15))),new Qe(19,Int32Array.from([6,30,58,86]),new he(28,new $(3,113),new $(4,114)),new he(26,new $(3,44),new $(11,45)),new he(26,new $(17,21),new $(4,22)),new he(26,new $(9,13),new $(16,14))),new Qe(20,Int32Array.from([6,34,62,90]),new he(28,new $(3,107),new $(5,108)),new he(26,new $(3,41),new $(13,42)),new he(30,new $(15,24),new $(5,25)),new he(28,new $(15,15),new $(10,16))),new Qe(21,Int32Array.from([6,28,50,72,94]),new he(28,new $(4,116),new $(4,117)),new he(26,new $(17,42)),new he(28,new $(17,22),new $(6,23)),new he(30,new $(19,16),new $(6,17))),new Qe(22,Int32Array.from([6,26,50,74,98]),new he(28,new $(2,111),new $(7,112)),new he(28,new $(17,46)),new he(30,new $(7,24),new $(16,25)),new he(24,new $(34,13))),new Qe(23,Int32Array.from([6,30,54,78,102]),new he(30,new $(4,121),new $(5,122)),new he(28,new $(4,47),new $(14,48)),new he(30,new $(11,24),new $(14,25)),new he(30,new $(16,15),new $(14,16))),new Qe(24,Int32Array.from([6,28,54,80,106]),new he(30,new $(6,117),new $(4,118)),new he(28,new $(6,45),new $(14,46)),new he(30,new $(11,24),new $(16,25)),new he(30,new $(30,16),new $(2,17))),new Qe(25,Int32Array.from([6,32,58,84,110]),new he(26,new $(8,106),new $(4,107)),new he(28,new $(8,47),new $(13,48)),new he(30,new $(7,24),new $(22,25)),new he(30,new $(22,15),new $(13,16))),new Qe(26,Int32Array.from([6,30,58,86,114]),new he(28,new $(10,114),new $(2,115)),new he(28,new $(19,46),new $(4,47)),new he(28,new $(28,22),new $(6,23)),new he(30,new $(33,16),new $(4,17))),new Qe(27,Int32Array.from([6,34,62,90,118]),new he(30,new $(8,122),new $(4,123)),new he(28,new $(22,45),new $(3,46)),new he(30,new $(8,23),new $(26,24)),new he(30,new $(12,15),new $(28,16))),new Qe(28,Int32Array.from([6,26,50,74,98,122]),new he(30,new $(3,117),new $(10,118)),new he(28,new $(3,45),new $(23,46)),new he(30,new $(4,24),new $(31,25)),new he(30,new $(11,15),new $(31,16))),new Qe(29,Int32Array.from([6,30,54,78,102,126]),new he(30,new $(7,116),new $(7,117)),new he(28,new $(21,45),new $(7,46)),new he(30,new $(1,23),new $(37,24)),new he(30,new $(19,15),new $(26,16))),new Qe(30,Int32Array.from([6,26,52,78,104,130]),new he(30,new $(5,115),new $(10,116)),new he(28,new $(19,47),new $(10,48)),new he(30,new $(15,24),new $(25,25)),new he(30,new $(23,15),new $(25,16))),new Qe(31,Int32Array.from([6,30,56,82,108,134]),new he(30,new $(13,115),new $(3,116)),new he(28,new $(2,46),new $(29,47)),new he(30,new $(42,24),new $(1,25)),new he(30,new $(23,15),new $(28,16))),new Qe(32,Int32Array.from([6,34,60,86,112,138]),new he(30,new $(17,115)),new he(28,new $(10,46),new $(23,47)),new he(30,new $(10,24),new $(35,25)),new he(30,new $(19,15),new $(35,16))),new Qe(33,Int32Array.from([6,30,58,86,114,142]),new he(30,new $(17,115),new $(1,116)),new he(28,new $(14,46),new $(21,47)),new he(30,new $(29,24),new $(19,25)),new he(30,new $(11,15),new $(46,16))),new Qe(34,Int32Array.from([6,34,62,90,118,146]),new he(30,new $(13,115),new $(6,116)),new he(28,new $(14,46),new $(23,47)),new he(30,new $(44,24),new $(7,25)),new he(30,new $(59,16),new $(1,17))),new Qe(35,Int32Array.from([6,30,54,78,102,126,150]),new he(30,new $(12,121),new $(7,122)),new he(28,new $(12,47),new $(26,48)),new he(30,new $(39,24),new $(14,25)),new he(30,new $(22,15),new $(41,16))),new Qe(36,Int32Array.from([6,24,50,76,102,128,154]),new he(30,new $(6,121),new $(14,122)),new he(28,new $(6,47),new $(34,48)),new he(30,new $(46,24),new $(10,25)),new he(30,new $(2,15),new $(64,16))),new Qe(37,Int32Array.from([6,28,54,80,106,132,158]),new he(30,new $(17,122),new $(4,123)),new he(28,new $(29,46),new $(14,47)),new he(30,new $(49,24),new $(10,25)),new he(30,new $(24,15),new $(46,16))),new Qe(38,Int32Array.from([6,32,58,84,110,136,162]),new he(30,new $(4,122),new $(18,123)),new he(28,new $(13,46),new $(32,47)),new he(30,new $(48,24),new $(14,25)),new he(30,new $(42,15),new $(32,16))),new Qe(39,Int32Array.from([6,26,54,82,110,138,166]),new he(30,new $(20,117),new $(4,118)),new he(28,new $(40,47),new $(7,48)),new he(30,new $(43,24),new $(22,25)),new he(30,new $(10,15),new $(67,16))),new Qe(40,Int32Array.from([6,30,58,86,114,142,170]),new he(30,new $(19,118),new $(6,119)),new he(28,new $(18,47),new $(31,48)),new he(30,new $(34,24),new $(34,25)),new he(30,new $(20,15),new $(61,16)))];var On;(function(L){L[L.DATA_MASK_000=0]="DATA_MASK_000",L[L.DATA_MASK_001=1]="DATA_MASK_001",L[L.DATA_MASK_010=2]="DATA_MASK_010",L[L.DATA_MASK_011=3]="DATA_MASK_011",L[L.DATA_MASK_100=4]="DATA_MASK_100",L[L.DATA_MASK_101=5]="DATA_MASK_101",L[L.DATA_MASK_110=6]="DATA_MASK_110",L[L.DATA_MASK_111=7]="DATA_MASK_111"})(On||(On={}));class qn{constructor(s,o){this.value=s,this.isMasked=o}unmaskBitMatrix(s,o){for(let c=0;c<o;c++)for(let f=0;f<o;f++)this.isMasked(c,f)&&s.flip(f,c)}}qn.values=new Map([[On.DATA_MASK_000,new qn(On.DATA_MASK_000,(L,s)=>(L+s&1)===0)],[On.DATA_MASK_001,new qn(On.DATA_MASK_001,(L,s)=>(L&1)===0)],[On.DATA_MASK_010,new qn(On.DATA_MASK_010,(L,s)=>s%3===0)],[On.DATA_MASK_011,new qn(On.DATA_MASK_011,(L,s)=>(L+s)%3===0)],[On.DATA_MASK_100,new qn(On.DATA_MASK_100,(L,s)=>(Math.floor(L/2)+Math.floor(s/3)&1)===0)],[On.DATA_MASK_101,new qn(On.DATA_MASK_101,(L,s)=>L*s%6===0)],[On.DATA_MASK_110,new qn(On.DATA_MASK_110,(L,s)=>L*s%6<3)],[On.DATA_MASK_111,new qn(On.DATA_MASK_111,(L,s)=>(L+s+L*s%3&1)===0)]]);class i0{constructor(s){const o=s.getHeight();if(o<21||(o&3)!==1)throw new X;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let h=0;h<6;h++)s=this.copyBit(h,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let h=5;h>=0;h--)s=this.copyBit(8,h,s);const o=this.bitMatrix.getHeight();let c=0;const f=o-7;for(let h=o-1;h>=f;h--)c=this.copyBit(8,h,c);for(let h=o-8;h<o;h++)c=this.copyBit(h,8,c);if(this.parsedFormatInfo=Gn.decodeFormatInformation(s,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new X}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),o=Math.floor((s-17)/4);if(o<=6)return Qe.getVersionForNumber(o);let c=0;const f=s-11;for(let p=5;p>=0;p--)for(let w=s-9;w>=f;w--)c=this.copyBit(w,p,c);let h=Qe.decodeVersionInformation(c);if(h!==null&&h.getDimensionForVersion()===s)return this.parsedVersion=h,h;c=0;for(let p=5;p>=0;p--)for(let w=s-9;w>=f;w--)c=this.copyBit(p,w,c);if(h=Qe.decodeVersionInformation(c),h!==null&&h.getDimensionForVersion()===s)return this.parsedVersion=h,h;throw new X}copyBit(s,o,c){return(this.isMirror?this.bitMatrix.get(o,s):this.bitMatrix.get(s,o))?c<<1|1:c<<1}readCodewords(){const s=this.readFormatInformation(),o=this.readVersion(),c=qn.values.get(s.getDataMask()),f=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,f);const h=o.buildFunctionPattern();let p=!0;const w=new Uint8Array(o.getTotalCodewords());let C=0,_=0,O=0;for(let k=f-1;k>0;k-=2){k===6&&k--;for(let P=0;P<f;P++){const G=p?f-1-P:P;for(let Q=0;Q<2;Q++)h.get(k-Q,G)||(O++,_<<=1,this.bitMatrix.get(k-Q,G)&&(_|=1),O===8&&(w[C++]=_,O=0,_=0))}p=!p}if(C!==o.getTotalCodewords())throw new X;return w}remask(){if(this.parsedFormatInfo===null)return;const s=qn.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,o)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let o=0,c=s.getWidth();o<c;o++)for(let f=o+1,h=s.getHeight();f<h;f++)s.get(o,f)!==s.get(f,o)&&(s.flip(f,o),s.flip(o,f))}}class gl{constructor(s,o){this.numDataCodewords=s,this.codewords=o}static getDataBlocks(s,o,c){if(s.length!==o.getTotalCodewords())throw new A;const f=o.getECBlocksForLevel(c);let h=0;const p=f.getECBlocks();for(const Q of p)h+=Q.getCount();const w=new Array(h);let C=0;for(const Q of p)for(let te=0;te<Q.getCount();te++){const fe=Q.getDataCodewords(),xe=f.getECCodewordsPerBlock()+fe;w[C++]=new gl(fe,new Uint8Array(xe))}const _=w[0].codewords.length;let O=w.length-1;for(;O>=0&&w[O].codewords.length!==_;)O--;O++;const k=_-f.getECCodewordsPerBlock();let P=0;for(let Q=0;Q<k;Q++)for(let te=0;te<C;te++)w[te].codewords[Q]=s[P++];for(let Q=O;Q<C;Q++)w[Q].codewords[k]=s[P++];const G=w[0].codewords.length;for(let Q=k;Q<G;Q++)for(let te=0;te<C;te++){const fe=te<O?Q:Q+1;w[te].codewords[fe]=s[P++]}return w}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ni;(function(L){L[L.TERMINATOR=0]="TERMINATOR",L[L.NUMERIC=1]="NUMERIC",L[L.ALPHANUMERIC=2]="ALPHANUMERIC",L[L.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",L[L.BYTE=4]="BYTE",L[L.ECI=5]="ECI",L[L.KANJI=6]="KANJI",L[L.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",L[L.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",L[L.HANZI=9]="HANZI"})(Ni||(Ni={}));class Je{constructor(s,o,c,f){this.value=s,this.stringValue=o,this.characterCountBitsForVersions=c,this.bits=f,Je.FOR_BITS.set(f,this),Je.FOR_VALUE.set(s,this)}static forBits(s){const o=Je.FOR_BITS.get(s);if(o===void 0)throw new A;return o}getCharacterCountBits(s){const o=s.getVersionNumber();let c;return o<=9?c=0:o<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof Je))return!1;const o=s;return this.value===o.value}toString(){return this.stringValue}}Je.FOR_BITS=new Map,Je.FOR_VALUE=new Map,Je.TERMINATOR=new Je(Ni.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Je.NUMERIC=new Je(Ni.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Je.ALPHANUMERIC=new Je(Ni.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Je.STRUCTURED_APPEND=new Je(Ni.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Je.BYTE=new Je(Ni.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Je.ECI=new Je(Ni.ECI,"ECI",Int32Array.from([0,0,0]),7),Je.KANJI=new Je(Ni.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Je.FNC1_FIRST_POSITION=new Je(Ni.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Je.FNC1_SECOND_POSITION=new Je(Ni.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Je.HANZI=new Je(Ni.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class dn{static decode(s,o,c,f){const h=new pi(s);let p=new de;const w=new Array;let C=-1,_=-1;try{let O=null,k=!1,P;do{if(h.available()<4)P=Je.TERMINATOR;else{const G=h.readBits(4);P=Je.forBits(G)}switch(P){case Je.TERMINATOR:break;case Je.FNC1_FIRST_POSITION:case Je.FNC1_SECOND_POSITION:k=!0;break;case Je.STRUCTURED_APPEND:if(h.available()<16)throw new X;C=h.readBits(8),_=h.readBits(8);break;case Je.ECI:const G=dn.parseECIValue(h);if(O=Y.getCharacterSetECIByValue(G),O===null)throw new X;break;case Je.HANZI:const Q=h.readBits(4),te=h.readBits(P.getCharacterCountBits(o));Q===dn.GB2312_SUBSET&&dn.decodeHanziSegment(h,p,te);break;default:const fe=h.readBits(P.getCharacterCountBits(o));switch(P){case Je.NUMERIC:dn.decodeNumericSegment(h,p,fe);break;case Je.ALPHANUMERIC:dn.decodeAlphanumericSegment(h,p,fe,k);break;case Je.BYTE:dn.decodeByteSegment(h,p,fe,O,w,f);break;case Je.KANJI:dn.decodeKanjiSegment(h,p,fe);break;default:throw new X}break}}while(P!==Je.TERMINATOR)}catch{throw new X}return new He(s,p.toString(),w.length===0?null:w,c===null?null:c.toString(),C,_)}static decodeHanziSegment(s,o,c){if(c*13>s.available())throw new X;const f=new Uint8Array(2*c);let h=0;for(;c>0;){const p=s.readBits(13);let w=p/96<<8&4294967295|p%96;w<959?w+=41377:w+=42657,f[h]=w>>8&255,f[h+1]=w&255,h+=2,c--}try{o.append(Ae.decode(f,Ee.GB2312))}catch(p){throw new X(p)}}static decodeKanjiSegment(s,o,c){if(c*13>s.available())throw new X;const f=new Uint8Array(2*c);let h=0;for(;c>0;){const p=s.readBits(13);let w=p/192<<8&4294967295|p%192;w<7936?w+=33088:w+=49472,f[h]=w>>8,f[h+1]=w,h+=2,c--}try{o.append(Ae.decode(f,Ee.SHIFT_JIS))}catch(p){throw new X(p)}}static decodeByteSegment(s,o,c,f,h,p){if(8*c>s.available())throw new X;const w=new Uint8Array(c);for(let _=0;_<c;_++)w[_]=s.readBits(8);let C;f===null?C=Ee.guessEncoding(w,p):C=f.getName();try{o.append(Ae.decode(w,C))}catch(_){throw new X(_)}h.push(w)}static toAlphaNumericChar(s){if(s>=dn.ALPHANUMERIC_CHARS.length)throw new X;return dn.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,o,c,f){const h=o.length();for(;c>1;){if(s.available()<11)throw new X;const p=s.readBits(11);o.append(dn.toAlphaNumericChar(Math.floor(p/45))),o.append(dn.toAlphaNumericChar(p%45)),c-=2}if(c===1){if(s.available()<6)throw new X;o.append(dn.toAlphaNumericChar(s.readBits(6)))}if(f)for(let p=h;p<o.length();p++)o.charAt(p)==="%"&&(p<o.length()-1&&o.charAt(p+1)==="%"?o.deleteCharAt(p+1):o.setCharAt(p,""))}static decodeNumericSegment(s,o,c){for(;c>=3;){if(s.available()<10)throw new X;const f=s.readBits(10);if(f>=1e3)throw new X;o.append(dn.toAlphaNumericChar(Math.floor(f/100))),o.append(dn.toAlphaNumericChar(Math.floor(f/10)%10)),o.append(dn.toAlphaNumericChar(f%10)),c-=3}if(c===2){if(s.available()<7)throw new X;const f=s.readBits(7);if(f>=100)throw new X;o.append(dn.toAlphaNumericChar(Math.floor(f/10))),o.append(dn.toAlphaNumericChar(f%10))}else if(c===1){if(s.available()<4)throw new X;const f=s.readBits(4);if(f>=10)throw new X;o.append(dn.toAlphaNumericChar(f))}}static parseECIValue(s){const o=s.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){const c=s.readBits(8);return(o&63)<<8&4294967295|c}if((o&224)===192){const c=s.readBits(16);return(o&31)<<16&4294967295|c}throw new X}}dn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",dn.GB2312_SUBSET=1;class Pd{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const o=s[0];s[0]=s[2],s[2]=o}}class ml{constructor(){this.rsDecoder=new Ze(ue.QR_CODE_FIELD_256)}decodeBooleanArray(s,o){return this.decodeBitMatrix(Oe.parseFromBooleanArray(s),o)}decodeBitMatrix(s,o){const c=new i0(s);let f=null;try{return this.decodeBitMatrixParser(c,o)}catch(h){f=h}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const h=this.decodeBitMatrixParser(c,o);return h.setOther(new Pd(!0)),h}catch(h){throw f!==null?f:h}}decodeBitMatrixParser(s,o){const c=s.readVersion(),f=s.readFormatInformation().getErrorCorrectionLevel(),h=s.readCodewords(),p=gl.getDataBlocks(h,c,f);let w=0;for(const O of p)w+=O.getNumDataCodewords();const C=new Uint8Array(w);let _=0;for(const O of p){const k=O.getCodewords(),P=O.getNumDataCodewords();this.correctErrors(k,P);for(let G=0;G<P;G++)C[_++]=k[G]}return dn.decode(C,c,f,o)}correctErrors(s,o){const c=new Int32Array(s);try{this.rsDecoder.decode(c,s.length-o)}catch{throw new I}for(let f=0;f<o;f++)s[f]=c[f]}}class ho extends Pe{constructor(s,o,c){super(s,o),this.estimatedModuleSize=c}aboutEquals(s,o,c){if(Math.abs(o-this.getY())<=s&&Math.abs(c-this.getX())<=s){const f=Math.abs(s-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(s,o,c){const f=(this.getX()+o)/2,h=(this.getY()+s)/2,p=(this.estimatedModuleSize+c)/2;return new ho(f,h,p)}}class ra{constructor(s,o,c,f,h,p,w){this.image=s,this.startX=o,this.startY=c,this.width=f,this.height=h,this.moduleSize=p,this.resultPointCallback=w,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,o=this.height,c=this.width,f=s+c,h=this.startY+o/2,p=new Int32Array(3),w=this.image;for(let C=0;C<o;C++){const _=h+((C&1)===0?Math.floor((C+1)/2):-Math.floor((C+1)/2));p[0]=0,p[1]=0,p[2]=0;let O=s;for(;O<f&&!w.get(O,_);)O++;let k=0;for(;O<f;){if(w.get(O,_))if(k===1)p[1]++;else if(k===2){if(this.foundPatternCross(p)){const P=this.handlePossibleCenter(p,_,O);if(P!==null)return P}p[0]=p[2],p[1]=1,p[2]=0,k=1}else p[++k]++;else k===1&&k++,p[k]++;O++}if(this.foundPatternCross(p)){const P=this.handlePossibleCenter(p,_,f);if(P!==null)return P}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new re}static centerFromEnd(s,o){return o-s[2]-s[1]/2}foundPatternCross(s){const o=this.moduleSize,c=o/2;for(let f=0;f<3;f++)if(Math.abs(o-s[f])>=c)return!1;return!0}crossCheckVertical(s,o,c,f){const h=this.image,p=h.getHeight(),w=this.crossCheckStateCount;w[0]=0,w[1]=0,w[2]=0;let C=s;for(;C>=0&&h.get(o,C)&&w[1]<=c;)w[1]++,C--;if(C<0||w[1]>c)return NaN;for(;C>=0&&!h.get(o,C)&&w[0]<=c;)w[0]++,C--;if(w[0]>c)return NaN;for(C=s+1;C<p&&h.get(o,C)&&w[1]<=c;)w[1]++,C++;if(C===p||w[1]>c)return NaN;for(;C<p&&!h.get(o,C)&&w[2]<=c;)w[2]++,C++;if(w[2]>c)return NaN;const _=w[0]+w[1]+w[2];return 5*Math.abs(_-f)>=2*f?NaN:this.foundPatternCross(w)?ra.centerFromEnd(w,C):NaN}handlePossibleCenter(s,o,c){const f=s[0]+s[1]+s[2],h=ra.centerFromEnd(s,c),p=this.crossCheckVertical(o,h,2*s[1],f);if(!isNaN(p)){const w=(s[0]+s[1]+s[2])/3;for(const _ of this.possibleCenters)if(_.aboutEquals(w,p,h))return _.combineEstimate(p,h,w);const C=new ho(h,p,w);this.possibleCenters.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return null}}class Qs extends Pe{constructor(s,o,c,f){super(s,o),this.estimatedModuleSize=c,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,o,c){if(Math.abs(o-this.getY())<=s&&Math.abs(c-this.getX())<=s){const f=Math.abs(s-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(s,o,c){const f=this.count+1,h=(this.count*this.getX()+o)/f,p=(this.count*this.getY()+s)/f,w=(this.count*this.estimatedModuleSize+c)/f;return new Qs(h,p,w,f)}}class aa{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class In{constructor(s,o){this.image=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const o=s!=null&&s.get(J.TRY_HARDER)!==void 0,c=s!=null&&s.get(J.PURE_BARCODE)!==void 0,f=this.image,h=f.getHeight(),p=f.getWidth();let w=Math.floor(3*h/(4*In.MAX_MODULES));(w<In.MIN_SKIP||o)&&(w=In.MIN_SKIP);let C=!1;const _=new Int32Array(5);for(let k=w-1;k<h&&!C;k+=w){_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0;let P=0;for(let G=0;G<p;G++)if(f.get(G,k))(P&1)===1&&P++,_[P]++;else if((P&1)===0)if(P===4)if(In.foundPatternCross(_)){if(this.handlePossibleCenter(_,k,G,c)===!0)if(w=2,this.hasSkipped===!0)C=this.haveMultiplyConfirmedCenters();else{const te=this.findRowSkip();te>_[2]&&(k+=te-_[2]-w,G=p-1)}else{_[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,P=3;continue}P=0,_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0}else _[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,P=3;else _[++P]++;else _[P]++;In.foundPatternCross(_)&&this.handlePossibleCenter(_,k,p,c)===!0&&(w=_[0],this.hasSkipped&&(C=this.haveMultiplyConfirmedCenters()))}const O=this.selectBestPatterns();return Pe.orderBestPatterns(O),new aa(O)}static centerFromEnd(s,o){return o-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let o=0;for(let h=0;h<5;h++){const p=s[h];if(p===0)return!1;o+=p}if(o<7)return!1;const c=o/7,f=c/2;return Math.abs(c-s[0])<f&&Math.abs(c-s[1])<f&&Math.abs(3*c-s[2])<3*f&&Math.abs(c-s[3])<f&&Math.abs(c-s[4])<f}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,o,c,f){const h=this.getCrossCheckStateCount();let p=0;const w=this.image;for(;s>=p&&o>=p&&w.get(o-p,s-p);)h[2]++,p++;if(s<p||o<p)return!1;for(;s>=p&&o>=p&&!w.get(o-p,s-p)&&h[1]<=c;)h[1]++,p++;if(s<p||o<p||h[1]>c)return!1;for(;s>=p&&o>=p&&w.get(o-p,s-p)&&h[0]<=c;)h[0]++,p++;if(h[0]>c)return!1;const C=w.getHeight(),_=w.getWidth();for(p=1;s+p<C&&o+p<_&&w.get(o+p,s+p);)h[2]++,p++;if(s+p>=C||o+p>=_)return!1;for(;s+p<C&&o+p<_&&!w.get(o+p,s+p)&&h[3]<c;)h[3]++,p++;if(s+p>=C||o+p>=_||h[3]>=c)return!1;for(;s+p<C&&o+p<_&&w.get(o+p,s+p)&&h[4]<c;)h[4]++,p++;if(h[4]>=c)return!1;const O=h[0]+h[1]+h[2]+h[3]+h[4];return Math.abs(O-f)<2*f&&In.foundPatternCross(h)}crossCheckVertical(s,o,c,f){const h=this.image,p=h.getHeight(),w=this.getCrossCheckStateCount();let C=s;for(;C>=0&&h.get(o,C);)w[2]++,C--;if(C<0)return NaN;for(;C>=0&&!h.get(o,C)&&w[1]<=c;)w[1]++,C--;if(C<0||w[1]>c)return NaN;for(;C>=0&&h.get(o,C)&&w[0]<=c;)w[0]++,C--;if(w[0]>c)return NaN;for(C=s+1;C<p&&h.get(o,C);)w[2]++,C++;if(C===p)return NaN;for(;C<p&&!h.get(o,C)&&w[3]<c;)w[3]++,C++;if(C===p||w[3]>=c)return NaN;for(;C<p&&h.get(o,C)&&w[4]<c;)w[4]++,C++;if(w[4]>=c)return NaN;const _=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(_-f)>=2*f?NaN:In.foundPatternCross(w)?In.centerFromEnd(w,C):NaN}crossCheckHorizontal(s,o,c,f){const h=this.image,p=h.getWidth(),w=this.getCrossCheckStateCount();let C=s;for(;C>=0&&h.get(C,o);)w[2]++,C--;if(C<0)return NaN;for(;C>=0&&!h.get(C,o)&&w[1]<=c;)w[1]++,C--;if(C<0||w[1]>c)return NaN;for(;C>=0&&h.get(C,o)&&w[0]<=c;)w[0]++,C--;if(w[0]>c)return NaN;for(C=s+1;C<p&&h.get(C,o);)w[2]++,C++;if(C===p)return NaN;for(;C<p&&!h.get(C,o)&&w[3]<c;)w[3]++,C++;if(C===p||w[3]>=c)return NaN;for(;C<p&&h.get(C,o)&&w[4]<c;)w[4]++,C++;if(w[4]>=c)return NaN;const _=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(_-f)>=f?NaN:In.foundPatternCross(w)?In.centerFromEnd(w,C):NaN}handlePossibleCenter(s,o,c,f){const h=s[0]+s[1]+s[2]+s[3]+s[4];let p=In.centerFromEnd(s,c),w=this.crossCheckVertical(o,Math.floor(p),s[2],h);if(!isNaN(w)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(w),s[2],h),!isNaN(p)&&(!f||this.crossCheckDiagonal(Math.floor(w),Math.floor(p),s[2],h)))){const C=h/7;let _=!1;const O=this.possibleCenters;for(let k=0,P=O.length;k<P;k++){const G=O[k];if(G.aboutEquals(C,w,p)){O[k]=G.combineEstimate(w,p,C),_=!0;break}}if(!_){const k=new Qs(p,w,C);O.push(k),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(k)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const c of this.possibleCenters)if(c.getCount()>=In.CENTER_QUORUM)if(o==null)o=c;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-c.getX())-Math.abs(o.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,o=0;const c=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=In.CENTER_QUORUM&&(s++,o+=p.getEstimatedModuleSize());if(s<3)return!1;const f=o/c;let h=0;for(const p of this.possibleCenters)h+=Math.abs(p.getEstimatedModuleSize()-f);return h<=.05*o}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new re;const o=this.possibleCenters;let c;if(s>3){let f=0,h=0;for(const C of this.possibleCenters){const _=C.getEstimatedModuleSize();f+=_,h+=_*_}c=f/s;let p=Math.sqrt(h/s-c*c);o.sort((C,_)=>{const O=Math.abs(_.getEstimatedModuleSize()-c),k=Math.abs(C.getEstimatedModuleSize()-c);return O<k?-1:O>k?1:0});const w=Math.max(.2*c,p);for(let C=0;C<o.length&&o.length>3;C++){const _=o[C];Math.abs(_.getEstimatedModuleSize()-c)>w&&(o.splice(C,1),C--)}}if(o.length>3){let f=0;for(const h of o)f+=h.getEstimatedModuleSize();c=f/o.length,o.sort((h,p)=>{if(p.getCount()===h.getCount()){const w=Math.abs(p.getEstimatedModuleSize()-c),C=Math.abs(h.getEstimatedModuleSize()-c);return w<C?1:w>C?-1:0}else return p.getCount()-h.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}In.CENTER_QUORUM=2,In.MIN_SKIP=3,In.MAX_MODULES=57;class Tr{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(J.NEED_RESULT_POINT_CALLBACK);const c=new In(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(c)}processFinderPatternInfo(s){const o=s.getTopLeft(),c=s.getTopRight(),f=s.getBottomLeft(),h=this.calculateModuleSize(o,c,f);if(h<1)throw new re("No pattern found in proccess finder.");const p=Tr.computeDimension(o,c,f,h),w=Qe.getProvisionalVersionForDimension(p),C=w.getDimensionForVersion()-7;let _=null;if(w.getAlignmentPatternCenters().length>0){const G=c.getX()-o.getX()+f.getX(),Q=c.getY()-o.getY()+f.getY(),te=1-3/C,fe=Math.floor(o.getX()+te*(G-o.getX())),xe=Math.floor(o.getY()+te*(Q-o.getY()));for(let Me=4;Me<=16;Me<<=1)try{_=this.findAlignmentInRegion(h,fe,xe,Me);break}catch(Le){if(!(Le instanceof re))throw Le}}const O=Tr.createTransform(o,c,f,_,p),k=Tr.sampleGrid(this.image,O,p);let P;return _===null?P=[f,o,c]:P=[f,o,c,_],new ki(k,P)}static createTransform(s,o,c,f,h){const p=h-3.5;let w,C,_,O;return f!==null?(w=f.getX(),C=f.getY(),_=p-3,O=_):(w=o.getX()-s.getX()+c.getX(),C=o.getY()-s.getY()+c.getY(),_=p,O=p),Ct.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,_,O,3.5,p,s.getX(),s.getY(),o.getX(),o.getY(),w,C,c.getX(),c.getY())}static sampleGrid(s,o,c){return Lt.getInstance().sampleGridWithTransform(s,c,c,o)}static computeDimension(s,o,c,f){const h=ze.round(Pe.distance(s,o)/f),p=ze.round(Pe.distance(s,c)/f);let w=Math.floor((h+p)/2)+7;switch(w&3){case 0:w++;break;case 2:w--;break;case 3:throw new re("Dimensions could be not found.")}return w}calculateModuleSize(s,o,c){return(this.calculateModuleSizeOneWay(s,o)+this.calculateModuleSizeOneWay(s,c))/2}calculateModuleSizeOneWay(s,o){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(o.getX()),Math.floor(o.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(c)?f/7:isNaN(f)?c/7:(c+f)/14}sizeOfBlackWhiteBlackRunBothWays(s,o,c,f){let h=this.sizeOfBlackWhiteBlackRun(s,o,c,f),p=1,w=s-(c-s);w<0?(p=s/(s-w),w=0):w>=this.image.getWidth()&&(p=(this.image.getWidth()-1-s)/(w-s),w=this.image.getWidth()-1);let C=Math.floor(o-(f-o)*p);return p=1,C<0?(p=o/(o-C),C=0):C>=this.image.getHeight()&&(p=(this.image.getHeight()-1-o)/(C-o),C=this.image.getHeight()-1),w=Math.floor(s+(w-s)*p),h+=this.sizeOfBlackWhiteBlackRun(s,o,w,C),h-1}sizeOfBlackWhiteBlackRun(s,o,c,f){const h=Math.abs(f-o)>Math.abs(c-s);if(h){let G=s;s=o,o=G,G=c,c=f,f=G}const p=Math.abs(c-s),w=Math.abs(f-o);let C=-p/2;const _=s<c?1:-1,O=o<f?1:-1;let k=0;const P=c+_;for(let G=s,Q=o;G!==P;G+=_){const te=h?Q:G,fe=h?G:Q;if(k===1===this.image.get(te,fe)){if(k===2)return ze.distance(G,Q,s,o);k++}if(C+=w,C>0){if(Q===f)break;Q+=O,C-=p}}return k===2?ze.distance(c+_,f,s,o):NaN}findAlignmentInRegion(s,o,c,f){const h=Math.floor(f*s),p=Math.max(0,o-h),w=Math.min(this.image.getWidth()-1,o+h);if(w-p<s*3)throw new re("Alignment top exceeds estimated module size.");const C=Math.max(0,c-h),_=Math.min(this.image.getHeight()-1,c+h);if(_-C<s*3)throw new re("Alignment bottom exceeds estimated module size.");return new ra(this.image,p,C,w-p,_-C,s,this.resultPointCallback).find()}}class Is{constructor(){this.decoder=new ml}getDecoder(){return this.decoder}decode(s,o){let c,f;if(o!=null&&o.get(J.PURE_BARCODE)!==void 0){const C=Is.extractPureBits(s.getBlackMatrix());c=this.decoder.decodeBitMatrix(C,o),f=Is.NO_POINTS}else{const C=new Tr(s.getBlackMatrix()).detect(o);c=this.decoder.decodeBitMatrix(C.getBits(),o),f=C.getPoints()}c.getOther()instanceof Pd&&c.getOther().applyMirroredCorrection(f);const h=new Ne(c.getText(),c.getRawBytes(),void 0,f,Se.QR_CODE,void 0),p=c.getByteSegments();p!==null&&h.putMetadata(ve.BYTE_SEGMENTS,p);const w=c.getECLevel();return w!==null&&h.putMetadata(ve.ERROR_CORRECTION_LEVEL,w),c.hasStructuredAppend()&&(h.putMetadata(ve.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),h.putMetadata(ve.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),h}reset(){}static extractPureBits(s){const o=s.getTopLeftOnBit(),c=s.getBottomRightOnBit();if(o===null||c===null)throw new re;const f=this.moduleSize(o,s);let h=o[1],p=c[1],w=o[0],C=c[0];if(w>=C||h>=p)throw new re;if(p-h!==C-w&&(C=w+(p-h),C>=s.getWidth()))throw new re;const _=Math.round((C-w+1)/f),O=Math.round((p-h+1)/f);if(_<=0||O<=0)throw new re;if(O!==_)throw new re;const k=Math.floor(f/2);h+=k,w+=k;const P=w+Math.floor((_-1)*f)-C;if(P>0){if(P>k)throw new re;w-=P}const G=h+Math.floor((O-1)*f)-p;if(G>0){if(G>k)throw new re;h-=G}const Q=new Oe(_,O);for(let te=0;te<O;te++){const fe=h+Math.floor(te*f);for(let xe=0;xe<_;xe++)s.get(w+Math.floor(xe*f),fe)&&Q.set(xe,te)}return Q}static moduleSize(s,o){const c=o.getHeight(),f=o.getWidth();let h=s[0],p=s[1],w=!0,C=0;for(;h<f&&p<c;){if(w!==o.get(h,p)){if(++C===5)break;w=!w}h++,p++}if(h===f||p===c)throw new re;return(h-s[0])/7}}Is.NO_POINTS=new Array;class nt{PDF417Common(){}static getBitCountSum(s){return ze.sum(s)}static toIntArray(s){if(s==null||!s.length)return nt.EMPTY_INT_ARRAY;const o=new Int32Array(s.length);let c=0;for(const f of s)o[c++]=f;return o}static getCodeword(s){const o=q.binarySearch(nt.SYMBOL_TABLE,s&262143);return o<0?-1:(nt.CODEWORD_TABLE[o]-1)%nt.NUMBER_OF_CODEWORDS}}nt.NUMBER_OF_CODEWORDS=929,nt.MAX_CODEWORDS_IN_BARCODE=nt.NUMBER_OF_CODEWORDS-1,nt.MIN_ROWS_IN_BARCODE=3,nt.MAX_ROWS_IN_BARCODE=90,nt.MODULES_IN_CODEWORD=17,nt.MODULES_IN_STOP_PATTERN=18,nt.BARS_IN_MODULE=8,nt.EMPTY_INT_ARRAY=new Int32Array([]),nt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),nt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ms{constructor(s,o){this.bits=s,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class xt{static detectMultiple(s,o,c){let f=s.getBlackMatrix(),h=xt.detect(c,f);return h.length||(f=f.clone(),f.rotate180(),h=xt.detect(c,f)),new Ms(f,h)}static detect(s,o){const c=new Array;let f=0,h=0,p=!1;for(;f<o.getHeight();){const w=xt.findVertices(o,f,h);if(w[0]==null&&w[3]==null){if(!p)break;p=!1,h=0;for(const C of c)C[1]!=null&&(f=Math.trunc(Math.max(f,C[1].getY()))),C[3]!=null&&(f=Math.max(f,Math.trunc(C[3].getY())));f+=xt.ROW_STEP;continue}if(p=!0,c.push(w),!s)break;w[2]!=null?(h=Math.trunc(w[2].getX()),f=Math.trunc(w[2].getY())):(h=Math.trunc(w[4].getX()),f=Math.trunc(w[4].getY()))}return c}static findVertices(s,o,c){const f=s.getHeight(),h=s.getWidth(),p=new Array(8);return xt.copyToResult(p,xt.findRowsWithPattern(s,f,h,o,c,xt.START_PATTERN),xt.INDEXES_START_PATTERN),p[4]!=null&&(c=Math.trunc(p[4].getX()),o=Math.trunc(p[4].getY())),xt.copyToResult(p,xt.findRowsWithPattern(s,f,h,o,c,xt.STOP_PATTERN),xt.INDEXES_STOP_PATTERN),p}static copyToResult(s,o,c){for(let f=0;f<c.length;f++)s[c[f]]=o[f]}static findRowsWithPattern(s,o,c,f,h,p){const w=new Array(4);let C=!1;const _=new Int32Array(p.length);for(;f<o;f+=xt.ROW_STEP){let k=xt.findGuardPattern(s,h,f,c,!1,p,_);if(k!=null){for(;f>0;){const P=xt.findGuardPattern(s,h,--f,c,!1,p,_);if(P!=null)k=P;else{f++;break}}w[0]=new Pe(k[0],f),w[1]=new Pe(k[1],f),C=!0;break}}let O=f+1;if(C){let k=0,P=Int32Array.from([Math.trunc(w[0].getX()),Math.trunc(w[1].getX())]);for(;O<o;O++){const G=xt.findGuardPattern(s,P[0],O,c,!1,p,_);if(G!=null&&Math.abs(P[0]-G[0])<xt.MAX_PATTERN_DRIFT&&Math.abs(P[1]-G[1])<xt.MAX_PATTERN_DRIFT)P=G,k=0;else{if(k>xt.SKIPPED_ROW_COUNT_MAX)break;k++}}O-=k+1,w[2]=new Pe(P[0],O),w[3]=new Pe(P[1],O)}return O-f<xt.BARCODE_MIN_HEIGHT&&q.fill(w,null),w}static findGuardPattern(s,o,c,f,h,p,w){q.fillWithin(w,0,w.length,0);let C=o,_=0;for(;s.get(C,c)&&C>0&&_++<xt.MAX_PIXEL_DRIFT;)C--;let O=C,k=0,P=p.length;for(let G=h;O<f;O++)if(s.get(O,c)!==G)w[k]++;else{if(k===P-1){if(xt.patternMatchVariance(w,p,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return new Int32Array([C,O]);C+=w[0]+w[1],j.arraycopy(w,2,w,0,k-1),w[k-1]=0,w[k]=0,k--}else k++;w[k]=1,G=!G}return k===P-1&&xt.patternMatchVariance(w,p,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE?new Int32Array([C,O-1]):null}static patternMatchVariance(s,o,c){let f=s.length,h=0,p=0;for(let _=0;_<f;_++)h+=s[_],p+=o[_];if(h<p)return 1/0;let w=h/p;c*=w;let C=0;for(let _=0;_<f;_++){let O=s[_],k=o[_]*w,P=O>k?O-k:k-O;if(P>c)return 1/0;C+=P}return C/h}}xt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),xt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),xt.MAX_AVG_VARIANCE=.42,xt.MAX_INDIVIDUAL_VARIANCE=.8,xt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),xt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),xt.MAX_PIXEL_DRIFT=3,xt.MAX_PATTERN_DRIFT=5,xt.SKIPPED_ROW_COUNT_MAX=25,xt.ROW_STEP=5,xt.BARCODE_MIN_HEIGHT=10;class yn{constructor(s,o){if(o.length===0)throw new A;this.field=s;let c=o.length;if(c>1&&o[0]===0){let f=1;for(;f<c&&o[f]===0;)f++;f===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-f),j.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let f=0;for(let h of this.coefficients)f=this.field.add(f,h);return f}let o=this.coefficients[0],c=this.coefficients.length;for(let f=1;f<c;f++)o=this.field.add(this.field.multiply(s,o),this.coefficients[f]);return o}add(s){if(!this.field.equals(s.field))throw new A("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let o=this.coefficients,c=s.coefficients;if(o.length>c.length){let p=o;o=c,c=p}let f=new Int32Array(c.length),h=c.length-o.length;j.arraycopy(c,0,f,0,h);for(let p=h;p<c.length;p++)f[p]=this.field.add(o[p-h],c[p]);return new yn(this.field,f)}subtract(s){if(!this.field.equals(s.field))throw new A("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof yn?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new A("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new yn(this.field,new Int32Array([0]));let o=this.coefficients,c=o.length,f=s.coefficients,h=f.length,p=new Int32Array(c+h-1);for(let w=0;w<c;w++){let C=o[w];for(let _=0;_<h;_++)p[w+_]=this.field.add(p[w+_],this.field.multiply(C,f[_]))}return new yn(this.field,p)}negative(){let s=this.coefficients.length,o=new Int32Array(s);for(let c=0;c<s;c++)o[c]=this.field.subtract(0,this.coefficients[c]);return new yn(this.field,o)}multiplyScalar(s){if(s===0)return new yn(this.field,new Int32Array([0]));if(s===1)return this;let o=this.coefficients.length,c=new Int32Array(o);for(let f=0;f<o;f++)c[f]=this.field.multiply(this.coefficients[f],s);return new yn(this.field,c)}multiplyByMonomial(s,o){if(s<0)throw new A;if(o===0)return new yn(this.field,new Int32Array([0]));let c=this.coefficients.length,f=new Int32Array(c+s);for(let h=0;h<c;h++)f[h]=this.field.multiply(this.coefficients[h],o);return new yn(this.field,f)}toString(){let s=new de;for(let o=this.getDegree();o>=0;o--){let c=this.getCoefficient(o);c!==0&&(c<0?(s.append(" - "),c=-c):s.length()>0&&s.append(" + "),(o===0||c!==1)&&s.append(c),o!==0&&(o===1?s.append("x"):(s.append("x^"),s.append(o))))}return s.toString()}}class Js{add(s,o){return(s+o)%this.modulus}subtract(s,o){return(this.modulus+s-o)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new A;return this.logTable[s]}inverse(s){if(s===0)throw new Ve;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,o){return s===0||o===0?0:this.expTable[(this.logTable[s]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class go extends Js{constructor(s,o){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let c=1;for(let f=0;f<s;f++)this.expTable[f]=c,c=c*o%s;for(let f=0;f<s-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new yn(this,new Int32Array([0])),this.one=new yn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,o){if(s<0)throw new A;if(o===0)return this.zero;let c=new Int32Array(s+1);return c[0]=o,new yn(this,c)}}go.PDF417_GF=new go(nt.NUMBER_OF_CODEWORDS,3);class mo{constructor(){this.field=go.PDF417_GF}decode(s,o,c){let f=new yn(this.field,s),h=new Int32Array(o),p=!1;for(let Q=o;Q>0;Q--){let te=f.evaluateAt(this.field.exp(Q));h[o-Q]=te,te!==0&&(p=!0)}if(!p)return 0;let w=this.field.getOne();if(c!=null)for(const Q of c){let te=this.field.exp(s.length-1-Q),fe=new yn(this.field,new Int32Array([this.field.subtract(0,te),1]));w=w.multiply(fe)}let C=new yn(this.field,h),_=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),C,o),O=_[0],k=_[1],P=this.findErrorLocations(O),G=this.findErrorMagnitudes(k,O,P);for(let Q=0;Q<P.length;Q++){let te=s.length-1-this.field.log(P[Q]);if(te<0)throw I.getChecksumInstance();s[te]=this.field.subtract(s[te],G[Q])}return P.length}runEuclideanAlgorithm(s,o,c){if(s.getDegree()<o.getDegree()){let P=s;s=o,o=P}let f=s,h=o,p=this.field.getZero(),w=this.field.getOne();for(;h.getDegree()>=Math.round(c/2);){let P=f,G=p;if(f=h,p=w,f.isZero())throw I.getChecksumInstance();h=P;let Q=this.field.getZero(),te=f.getCoefficient(f.getDegree()),fe=this.field.inverse(te);for(;h.getDegree()>=f.getDegree()&&!h.isZero();){let xe=h.getDegree()-f.getDegree(),Me=this.field.multiply(h.getCoefficient(h.getDegree()),fe);Q=Q.add(this.field.buildMonomial(xe,Me)),h=h.subtract(f.multiplyByMonomial(xe,Me))}w=Q.multiply(p).subtract(G).negative()}let C=w.getCoefficient(0);if(C===0)throw I.getChecksumInstance();let _=this.field.inverse(C),O=w.multiply(_),k=h.multiply(_);return[O,k]}findErrorLocations(s){let o=s.getDegree(),c=new Int32Array(o),f=0;for(let h=1;h<this.field.getSize()&&f<o;h++)s.evaluateAt(h)===0&&(c[f]=this.field.inverse(h),f++);if(f!==o)throw I.getChecksumInstance();return c}findErrorMagnitudes(s,o,c){let f=o.getDegree(),h=new Int32Array(f);for(let _=1;_<=f;_++)h[f-_]=this.field.multiply(_,o.getCoefficient(_));let p=new yn(this.field,h),w=c.length,C=new Int32Array(w);for(let _=0;_<w;_++){let O=this.field.inverse(c[_]),k=this.field.subtract(0,s.evaluateAt(O)),P=this.field.inverse(p.evaluateAt(O));C[_]=this.field.multiply(k,P)}return C}}class er{constructor(s,o,c,f,h){s instanceof er?this.constructor_2(s):this.constructor_1(s,o,c,f,h)}constructor_1(s,o,c,f,h){const p=o==null||c==null,w=f==null||h==null;if(p&&w)throw new re;p?(o=new Pe(0,f.getY()),c=new Pe(0,h.getY())):w&&(f=new Pe(s.getWidth()-1,o.getY()),h=new Pe(s.getWidth()-1,c.getY())),this.image=s,this.topLeft=o,this.bottomLeft=c,this.topRight=f,this.bottomRight=h,this.minX=Math.trunc(Math.min(o.getX(),c.getX())),this.maxX=Math.trunc(Math.max(f.getX(),h.getX())),this.minY=Math.trunc(Math.min(o.getY(),f.getY())),this.maxY=Math.trunc(Math.max(c.getY(),h.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,o){return s==null?o:o==null?s:new er(s.image,s.topLeft,s.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(s,o,c){let f=this.topLeft,h=this.bottomLeft,p=this.topRight,w=this.bottomRight;if(s>0){let C=c?this.topLeft:this.topRight,_=Math.trunc(C.getY()-s);_<0&&(_=0);let O=new Pe(C.getX(),_);c?f=O:p=O}if(o>0){let C=c?this.bottomLeft:this.bottomRight,_=Math.trunc(C.getY()+o);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);let O=new Pe(C.getX(),_);c?h=O:w=O}return new er(this.image,f,h,p,w)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class pl{constructor(s,o,c,f){this.columnCount=s,this.errorCorrectionLevel=f,this.rowCountUpperPart=o,this.rowCountLowerPart=c,this.rowCount=o+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class tr{constructor(){this.buffer=""}static form(s,o){let c=-1;function f(p,w,C,_,O,k){if(p==="%%")return"%";if(o[++c]===void 0)return;p=_?parseInt(_.substr(1)):void 0;let P=O?parseInt(O.substr(1)):void 0,G;switch(k){case"s":G=o[c];break;case"c":G=o[c][0];break;case"f":G=parseFloat(o[c]).toFixed(p);break;case"p":G=parseFloat(o[c]).toPrecision(p);break;case"e":G=parseFloat(o[c]).toExponential(p);break;case"x":G=parseInt(o[c]).toString(P||16);break;case"d":G=parseFloat(parseInt(o[c],P||10).toPrecision(p)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(P);let Q=parseInt(C),te=C&&C[0]+""=="0"?"0":" ";for(;G.length<Q;)G=w!==void 0?G+te:te+G;return G}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(h,f)}format(s,...o){this.buffer+=tr.form(s,o)}toString(){return this.buffer}}class oa{constructor(s){this.boundingBox=new er(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let o=this.getCodeword(s);if(o!=null)return o;for(let c=1;c<oa.MAX_NEARBY_DISTANCE;c++){let f=this.imageRowToCodewordIndex(s)-c;if(f>=0&&(o=this.codewords[f],o!=null)||(f=this.imageRowToCodewordIndex(s)+c,f<this.codewords.length&&(o=this.codewords[f],o!=null)))return o}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,o){this.codewords[this.imageRowToCodewordIndex(s)]=o}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new tr;let o=0;for(const c of this.codewords){if(c==null){s.format("%3d:    |   %n",o++);continue}s.format("%3d: %3d|%3d%n",o++,c.getRowNumber(),c.getValue())}return s.toString()}}oa.MAX_NEARBY_DISTANCE=5;class Un{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let o=this.values.get(s);o==null&&(o=0),o++,this.values.set(s,o)}getValue(){let s=-1,o=new Array;for(const[c,f]of this.values.entries()){const h={getKey:()=>c,getValue:()=>f};h.getValue()>s?(s=h.getValue(),o=[],o.push(h.getKey())):h.getValue()===s&&o.push(h.getKey())}return nt.toIntArray(o)}getConfidence(s){return this.values.get(s)}}class nr extends oa{constructor(s,o){super(s),this._isLeft=o}setRowNumbers(){for(let s of this.getCodewords())s!=null&&s.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,s);let c=this.getBoundingBox(),f=this._isLeft?c.getTopLeft():c.getTopRight(),h=this._isLeft?c.getBottomLeft():c.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),w=this.imageRowToCodewordIndex(Math.trunc(h.getY())),C=-1,_=1,O=0;for(let k=p;k<w;k++){if(o[k]==null)continue;let P=o[k],G=P.getRowNumber()-C;if(G===0)O++;else if(G===1)_=Math.max(_,O),O=1,C=P.getRowNumber();else if(G<0||P.getRowNumber()>=s.getRowCount()||G>k)o[k]=null;else{let Q;_>2?Q=(_-2)*G:Q=G;let te=Q>=k;for(let fe=1;fe<=Q&&!te;fe++)te=o[k-fe]!=null;te?o[k]=null:(C=P.getRowNumber(),O=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let o=new Int32Array(s.getRowCount());for(let c of this.getCodewords())if(c!=null){let f=c.getRowNumber();if(f>=o.length)continue;o[f]++}return o}adjustIncompleteIndicatorColumnRowNumbers(s){let o=this.getBoundingBox(),c=this._isLeft?o.getTopLeft():o.getTopRight(),f=this._isLeft?o.getBottomLeft():o.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),w=this.getCodewords(),C=-1;for(let _=h;_<p;_++){if(w[_]==null)continue;let O=w[_];O.setRowNumberAsRowIndicatorColumn();let k=O.getRowNumber()-C;k===0||(k===1?C=O.getRowNumber():O.getRowNumber()>=s.getRowCount()?w[_]=null:C=O.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),o=new Un,c=new Un,f=new Un,h=new Un;for(let w of s){if(w==null)continue;w.setRowNumberAsRowIndicatorColumn();let C=w.getValue()%30,_=w.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:c.setValue(C*3+1);break;case 1:h.setValue(C/3),f.setValue(C%3);break;case 2:o.setValue(C+1);break}}if(o.getValue().length===0||c.getValue().length===0||f.getValue().length===0||h.getValue().length===0||o.getValue()[0]<1||c.getValue()[0]+f.getValue()[0]<nt.MIN_ROWS_IN_BARCODE||c.getValue()[0]+f.getValue()[0]>nt.MAX_ROWS_IN_BARCODE)return null;let p=new pl(o.getValue()[0],c.getValue()[0],f.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(s,p),p}removeIncorrectCodewords(s,o){for(let c=0;c<s.length;c++){let f=s[c];if(s[c]==null)continue;let h=f.getValue()%30,p=f.getRowNumber();if(p>o.getRowCount()){s[c]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:h*3+1!==o.getRowCountUpperPart()&&(s[c]=null);break;case 1:(Math.trunc(h/3)!==o.getErrorCorrectionLevel()||h%3!==o.getRowCountLowerPart())&&(s[c]=null);break;case 2:h+1!==o.getColumnCount()&&(s[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ir{constructor(s,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=nt.MAX_CODEWORDS_IN_BARCODE,o;do o=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s!=null&&s.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let c=this.detectionResultColumns[o].getCodewords();for(let f=0;f<c.length;f++)c[f]!=null&&(c[f].hasValidRowNumber()||this.adjustRowNumbers(o,f,c))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<s.length;c++)if(s[c]!=null&&o[c]!=null&&s[c].getRowNumber()===o[c].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let h=this.detectionResultColumns[f].getCodewords()[c];h!=null&&(h.setRowNumber(s[c].getRowNumber()),h.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<o.length;c++){if(o[c]==null)continue;let f=o[c].getRowNumber(),h=0;for(let p=this.barcodeColumnCount+1;p>0&&h<this.ADJUST_ROW_NUMBER_SKIP;p--){let w=this.detectionResultColumns[p].getCodewords()[c];w!=null&&(h=ir.adjustRowNumberIfValid(f,h,w),w.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,o=this.detectionResultColumns[0].getCodewords();for(let c=0;c<o.length;c++){if(o[c]==null)continue;let f=o[c].getRowNumber(),h=0;for(let p=1;p<this.barcodeColumnCount+1&&h<this.ADJUST_ROW_NUMBER_SKIP;p++){let w=this.detectionResultColumns[p].getCodewords()[c];w!=null&&(h=ir.adjustRowNumberIfValid(f,h,w),w.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,o,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(s)?(c.setRowNumber(s),o=0):++o),o}adjustRowNumbers(s,o,c){if(!this.detectionResultColumns[s-1])return;let f=c[o],h=this.detectionResultColumns[s-1].getCodewords(),p=h;this.detectionResultColumns[s+1]!=null&&(p=this.detectionResultColumns[s+1].getCodewords());let w=new Array(14);w[2]=h[o],w[3]=p[o],o>0&&(w[0]=c[o-1],w[4]=h[o-1],w[5]=p[o-1]),o>1&&(w[8]=c[o-2],w[10]=h[o-2],w[11]=p[o-2]),o<c.length-1&&(w[1]=c[o+1],w[6]=h[o+1],w[7]=p[o+1]),o<c.length-2&&(w[9]=c[o+2],w[12]=h[o+2],w[13]=p[o+2]);for(let C of w)if(ir.adjustRowNumber(f,C))return}static adjustRowNumber(s,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===s.getBucket()?(s.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,o){this.detectionResultColumns[s]=o}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new tr;for(let c=0;c<s.getCodewords().length;c++){o.format("CW %3d:",c);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){o.format("    |   ");continue}let h=this.detectionResultColumns[f].getCodewords()[c];if(h==null){o.format("    |   ");continue}o.format(" %3d|%3d",h.getRowNumber(),h.getValue())}o.format("%n")}return o.toString()}}class Ds{constructor(s,o,c,f){this.rowNumber=Ds.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(o),this.bucket=Math.trunc(c),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==Ds.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}Ds.BARCODE_ROW_UNKNOWN=-1;class xi{static initialize(){for(let s=0;s<nt.SYMBOL_TABLE.length;s++){let o=nt.SYMBOL_TABLE[s],c=o&1;for(let f=0;f<nt.BARS_IN_MODULE;f++){let h=0;for(;(o&1)===c;)h+=1,o>>=1;c=o&1,xi.RATIOS_TABLE[s]||(xi.RATIOS_TABLE[s]=new Array(nt.BARS_IN_MODULE)),xi.RATIOS_TABLE[s][nt.BARS_IN_MODULE-f-1]=Math.fround(h/nt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let o=xi.getDecodedCodewordValue(xi.sampleBitCounts(s));return o!==-1?o:xi.getClosestDecodedValue(s)}static sampleBitCounts(s){let o=ze.sum(s),c=new Int32Array(nt.BARS_IN_MODULE),f=0,h=0;for(let p=0;p<nt.MODULES_IN_CODEWORD;p++){let w=o/(2*nt.MODULES_IN_CODEWORD)+p*o/nt.MODULES_IN_CODEWORD;h+s[f]<=w&&(h+=s[f],f++),c[f]++}return c}static getDecodedCodewordValue(s){let o=xi.getBitValue(s);return nt.getCodeword(o)===-1?-1:o}static getBitValue(s){let o=0;for(let c=0;c<s.length;c++)for(let f=0;f<s[c];f++)o=o<<1|(c%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(s){let o=ze.sum(s),c=new Array(nt.BARS_IN_MODULE);if(o>1)for(let p=0;p<c.length;p++)c[p]=Math.fround(s[p]/o);let f=dt.MAX_VALUE,h=-1;this.bSymbolTableReady||xi.initialize();for(let p=0;p<xi.RATIOS_TABLE.length;p++){let w=0,C=xi.RATIOS_TABLE[p];for(let _=0;_<nt.BARS_IN_MODULE;_++){let O=Math.fround(C[_]-c[_]);if(w+=Math.fround(O*O),w>=f)break}w<f&&(f=w,h=nt.SYMBOL_TABLE[p])}return h}}xi.bSymbolTableReady=!1,xi.RATIOS_TABLE=new Array(nt.SYMBOL_TABLE.length).map(L=>new Array(nt.BARS_IN_MODULE));class xl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class yl{static parseLong(s,o=void 0){return parseInt(s,o)}}class la extends x{}la.kind="NullPointerException";class bl{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,o,c){if(s==null)throw new la;if(o<0||o>s.length||c<0||o+c>s.length||o+c<0)throw new U;if(c===0)return;for(let f=0;f<c;f++)this.write(s[o+f])}flush(){}close(){}}class Ud extends x{}class s0 extends bl{constructor(s=32){if(super(),this.count=0,s<0)throw new A("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let c=this.buf.length<<1;if(c-s<0&&(c=s),c<0){if(s<0)throw new Ud;c=B.MAX_VALUE}this.buf=q.copyOfUint8Array(this.buf,c)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,o,c){if(o<0||o>s.length||c<0||o+c-s.length>0)throw new U;this.ensureCapacity(this.count+c),j.arraycopy(s,o,this.buf,this.count,c),this.count+=c}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return q.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var Yt;(function(L){L[L.ALPHA=0]="ALPHA",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.PUNCT=3]="PUNCT",L[L.ALPHA_SHIFT=4]="ALPHA_SHIFT",L[L.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Yt||(Yt={}));function Fd(){if(typeof window<"u")return window.BigInt||null;if(typeof qf<"u")return qf.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ca;function sr(L){if(typeof ca>"u"&&(ca=Fd()),ca===null)throw new Error("BigInt is not supported!");return ca(L)}function r0(){let L=[];L[0]=sr(1);let s=sr(900);L[1]=s;for(let o=2;o<16;o++)L[o]=L[o-1]*s;return L}class we{static decode(s,o){let c=new de(""),f=Y.ISO8859_1;c.enableDecoding(f);let h=1,p=s[h++],w=new xl;for(;h<s[0];){switch(p){case we.TEXT_COMPACTION_MODE_LATCH:h=we.textCompaction(s,h,c);break;case we.BYTE_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH_6:h=we.byteCompaction(p,s,f,h,c);break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h++]);break;case we.NUMERIC_COMPACTION_MODE_LATCH:h=we.numericCompaction(s,h,c);break;case we.ECI_CHARSET:Y.getCharacterSetECIByValue(s[h++]);break;case we.ECI_GENERAL_PURPOSE:h+=2;break;case we.ECI_USER_DEFINED:h++;break;case we.BEGIN_MACRO_PDF417_CONTROL_BLOCK:h=we.decodeMacroBlock(s,h,w);break;case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case we.MACRO_PDF417_TERMINATOR:throw new X;default:h--,h=we.textCompaction(s,h,c);break}if(h<s.length)p=s[h++];else throw X.getFormatInstance()}if(c.length()===0)throw X.getFormatInstance();let C=new He(null,c.toString(),null,o);return C.setOther(w),C}static decodeMacroBlock(s,o,c){if(o+we.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw X.getFormatInstance();let f=new Int32Array(we.NUMBER_OF_SEQUENCE_CODEWORDS);for(let w=0;w<we.NUMBER_OF_SEQUENCE_CODEWORDS;w++,o++)f[w]=s[o];c.setSegmentIndex(B.parseInt(we.decodeBase900toBase10(f,we.NUMBER_OF_SEQUENCE_CODEWORDS)));let h=new de;o=we.textCompaction(s,o,h),c.setFileId(h.toString());let p=-1;for(s[o]===we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=o+1);o<s[0];)switch(s[o]){case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,s[o]){case we.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let w=new de;o=we.textCompaction(s,o+1,w),c.setFileName(w.toString());break;case we.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let C=new de;o=we.textCompaction(s,o+1,C),c.setSender(C.toString());break;case we.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let _=new de;o=we.textCompaction(s,o+1,_),c.setAddressee(_.toString());break;case we.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let O=new de;o=we.numericCompaction(s,o+1,O),c.setSegmentCount(B.parseInt(O.toString()));break;case we.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let k=new de;o=we.numericCompaction(s,o+1,k),c.setTimestamp(yl.parseLong(k.toString()));break;case we.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let P=new de;o=we.numericCompaction(s,o+1,P),c.setChecksum(B.parseInt(P.toString()));break;case we.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let G=new de;o=we.numericCompaction(s,o+1,G),c.setFileSize(yl.parseLong(G.toString()));break;default:throw X.getFormatInstance()}break;case we.MACRO_PDF417_TERMINATOR:o++,c.setLastSegment(!0);break;default:throw X.getFormatInstance()}if(p!==-1){let w=o-p;c.isLastSegment()&&w--,c.setOptionalData(q.copyOfRange(s,p,p+w))}return o}static textCompaction(s,o,c){let f=new Int32Array((s[0]-o)*2),h=new Int32Array((s[0]-o)*2),p=0,w=!1;for(;o<s[0]&&!w;){let C=s[o++];if(C<we.TEXT_COMPACTION_MODE_LATCH)f[p]=C/30,f[p+1]=C%30,p+=2;else switch(C){case we.TEXT_COMPACTION_MODE_LATCH:f[p++]=we.TEXT_COMPACTION_MODE_LATCH;break;case we.BYTE_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH_6:case we.NUMERIC_COMPACTION_MODE_LATCH:case we.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case we.MACRO_PDF417_TERMINATOR:o--,w=!0;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[p]=we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,C=s[o++],h[p]=C,p++;break}}return we.decodeTextCompaction(f,h,p,c),o}static decodeTextCompaction(s,o,c,f){let h=Yt.ALPHA,p=Yt.ALPHA,w=0;for(;w<c;){let C=s[w],_="";switch(h){case Yt.ALPHA:if(C<26)_=String.fromCharCode(65+C);else switch(C){case 26:_=" ";break;case we.LL:h=Yt.LOWER;break;case we.ML:h=Yt.MIXED;break;case we.PS:p=h,h=Yt.PUNCT_SHIFT;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[w]);break;case we.TEXT_COMPACTION_MODE_LATCH:h=Yt.ALPHA;break}break;case Yt.LOWER:if(C<26)_=String.fromCharCode(97+C);else switch(C){case 26:_=" ";break;case we.AS:p=h,h=Yt.ALPHA_SHIFT;break;case we.ML:h=Yt.MIXED;break;case we.PS:p=h,h=Yt.PUNCT_SHIFT;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[w]);break;case we.TEXT_COMPACTION_MODE_LATCH:h=Yt.ALPHA;break}break;case Yt.MIXED:if(C<we.PL)_=we.MIXED_CHARS[C];else switch(C){case we.PL:h=Yt.PUNCT;break;case 26:_=" ";break;case we.LL:h=Yt.LOWER;break;case we.AL:h=Yt.ALPHA;break;case we.PS:p=h,h=Yt.PUNCT_SHIFT;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[w]);break;case we.TEXT_COMPACTION_MODE_LATCH:h=Yt.ALPHA;break}break;case Yt.PUNCT:if(C<we.PAL)_=we.PUNCT_CHARS[C];else switch(C){case we.PAL:h=Yt.ALPHA;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[w]);break;case we.TEXT_COMPACTION_MODE_LATCH:h=Yt.ALPHA;break}break;case Yt.ALPHA_SHIFT:if(h=p,C<26)_=String.fromCharCode(65+C);else switch(C){case 26:_=" ";break;case we.TEXT_COMPACTION_MODE_LATCH:h=Yt.ALPHA;break}break;case Yt.PUNCT_SHIFT:if(h=p,C<we.PAL)_=we.PUNCT_CHARS[C];else switch(C){case we.PAL:h=Yt.ALPHA;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[w]);break;case we.TEXT_COMPACTION_MODE_LATCH:h=Yt.ALPHA;break}break}_!==""&&f.append(_),w++}}static byteCompaction(s,o,c,f,h){let p=new s0,w=0,C=0,_=!1;switch(s){case we.BYTE_COMPACTION_MODE_LATCH:let O=new Int32Array(6),k=o[f++];for(;f<o[0]&&!_;)switch(O[w++]=k,C=900*C+k,k=o[f++],k){case we.TEXT_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH:case we.NUMERIC_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH_6:case we.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case we.MACRO_PDF417_TERMINATOR:f--,_=!0;break;default:if(w%5===0&&w>0){for(let P=0;P<6;++P)p.write(Number(sr(C)>>sr(8*(5-P))));C=0,w=0}break}f===o[0]&&k<we.TEXT_COMPACTION_MODE_LATCH&&(O[w++]=k);for(let P=0;P<w;P++)p.write(O[P]);break;case we.BYTE_COMPACTION_MODE_LATCH_6:for(;f<o[0]&&!_;){let P=o[f++];if(P<we.TEXT_COMPACTION_MODE_LATCH)w++,C=900*C+P;else switch(P){case we.TEXT_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH:case we.NUMERIC_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH_6:case we.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case we.MACRO_PDF417_TERMINATOR:f--,_=!0;break}if(w%5===0&&w>0){for(let G=0;G<6;++G)p.write(Number(sr(C)>>sr(8*(5-G))));C=0,w=0}}break}return h.append(Ae.decode(p.toByteArray(),c)),f}static numericCompaction(s,o,c){let f=0,h=!1,p=new Int32Array(we.MAX_NUMERIC_CODEWORDS);for(;o<s[0]&&!h;){let w=s[o++];if(o===s[0]&&(h=!0),w<we.TEXT_COMPACTION_MODE_LATCH)p[f]=w,f++;else switch(w){case we.TEXT_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH_6:case we.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case we.MACRO_PDF417_TERMINATOR:o--,h=!0;break}(f%we.MAX_NUMERIC_CODEWORDS===0||w===we.NUMERIC_COMPACTION_MODE_LATCH||h)&&f>0&&(c.append(we.decodeBase900toBase10(p,f)),f=0)}return o}static decodeBase900toBase10(s,o){let c=sr(0);for(let h=0;h<o;h++)c+=we.EXP900[o-h-1]*sr(s[h]);let f=c.toString();if(f.charAt(0)!=="1")throw new X;return f.substring(1)}}we.TEXT_COMPACTION_MODE_LATCH=900,we.BYTE_COMPACTION_MODE_LATCH=901,we.NUMERIC_COMPACTION_MODE_LATCH=902,we.BYTE_COMPACTION_MODE_LATCH_6=924,we.ECI_USER_DEFINED=925,we.ECI_GENERAL_PURPOSE=926,we.ECI_CHARSET=927,we.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,we.MACRO_PDF417_TERMINATOR=922,we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,we.MAX_NUMERIC_CODEWORDS=15,we.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,we.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,we.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,we.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,we.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,we.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,we.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,we.PL=25,we.LL=27,we.AS=27,we.ML=28,we.AL=28,we.PS=29,we.PAL=29,we.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,we.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",we.EXP900=Fd()?r0():[],we.NUMBER_OF_SEQUENCE_CODEWORDS=2;class vt{constructor(){}static decode(s,o,c,f,h,p,w){let C=new er(s,o,c,f,h),_=null,O=null,k;for(let Q=!0;;Q=!1){if(o!=null&&(_=vt.getRowIndicatorColumn(s,C,o,!0,p,w)),f!=null&&(O=vt.getRowIndicatorColumn(s,C,f,!1,p,w)),k=vt.merge(_,O),k==null)throw re.getNotFoundInstance();let te=k.getBoundingBox();if(Q&&te!=null&&(te.getMinY()<C.getMinY()||te.getMaxY()>C.getMaxY()))C=te;else break}k.setBoundingBox(C);let P=k.getBarcodeColumnCount()+1;k.setDetectionResultColumn(0,_),k.setDetectionResultColumn(P,O);let G=_!=null;for(let Q=1;Q<=P;Q++){let te=G?Q:P-Q;if(k.getDetectionResultColumn(te)!==void 0)continue;let fe;te===0||te===P?fe=new nr(C,te===0):fe=new oa(C),k.setDetectionResultColumn(te,fe);let xe=-1,Me=xe;for(let Le=C.getMinY();Le<=C.getMaxY();Le++){if(xe=vt.getStartColumn(k,te,Le,G),xe<0||xe>C.getMaxX()){if(Me===-1)continue;xe=Me}let Ie=vt.detectCodeword(s,C.getMinX(),C.getMaxX(),G,xe,Le,p,w);Ie!=null&&(fe.setCodeword(Le,Ie),Me=xe,p=Math.min(p,Ie.getWidth()),w=Math.max(w,Ie.getWidth()))}}return vt.createDecoderResult(k)}static merge(s,o){if(s==null&&o==null)return null;let c=vt.getBarcodeMetadata(s,o);if(c==null)return null;let f=er.merge(vt.adjustBoundingBox(s),vt.adjustBoundingBox(o));return new ir(c,f)}static adjustBoundingBox(s){if(s==null)return null;let o=s.getRowHeights();if(o==null)return null;let c=vt.getMax(o),f=0;for(let w of o)if(f+=c-w,w>0)break;let h=s.getCodewords();for(let w=0;f>0&&h[w]==null;w++)f--;let p=0;for(let w=o.length-1;w>=0&&(p+=c-o[w],!(o[w]>0));w--);for(let w=h.length-1;p>0&&h[w]==null;w--)p--;return s.getBoundingBox().addMissingRows(f,p,s.isLeft())}static getMax(s){let o=-1;for(let c of s)o=Math.max(o,c);return o}static getBarcodeMetadata(s,o){let c;if(s==null||(c=s.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let f;return o==null||(f=o.getBarcodeMetadata())==null?c:c.getColumnCount()!==f.getColumnCount()&&c.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&c.getRowCount()!==f.getRowCount()?null:c}static getRowIndicatorColumn(s,o,c,f,h,p){let w=new nr(o,f);for(let C=0;C<2;C++){let _=C===0?1:-1,O=Math.trunc(Math.trunc(c.getX()));for(let k=Math.trunc(Math.trunc(c.getY()));k<=o.getMaxY()&&k>=o.getMinY();k+=_){let P=vt.detectCodeword(s,0,s.getWidth(),f,O,k,h,p);P!=null&&(w.setCodeword(k,P),f?O=P.getStartX():O=P.getEndX())}}return w}static adjustCodewordCount(s,o){let c=o[0][1],f=c.getValue(),h=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-vt.getNumberOfECCodeWords(s.getBarcodeECLevel());if(f.length===0){if(h<1||h>nt.MAX_CODEWORDS_IN_BARCODE)throw re.getNotFoundInstance();c.setValue(h)}else f[0]!==h&&c.setValue(h)}static createDecoderResult(s){let o=vt.createBarcodeMatrix(s);vt.adjustCodewordCount(s,o);let c=new Array,f=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),h=[],p=new Array;for(let C=0;C<s.getBarcodeRowCount();C++)for(let _=0;_<s.getBarcodeColumnCount();_++){let O=o[C][_+1].getValue(),k=C*s.getBarcodeColumnCount()+_;O.length===0?c.push(k):O.length===1?f[k]=O[0]:(p.push(k),h.push(O))}let w=new Array(h.length);for(let C=0;C<w.length;C++)w[C]=h[C];return vt.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),f,nt.toIntArray(c),nt.toIntArray(p),w)}static createDecoderResultFromAmbiguousValues(s,o,c,f,h){let p=new Int32Array(f.length),w=100;for(;w-- >0;){for(let C=0;C<p.length;C++)o[f[C]]=h[C][p[C]];try{return vt.decodeCodewords(o,s,c)}catch(C){if(!(C instanceof I))throw C}if(p.length===0)throw I.getChecksumInstance();for(let C=0;C<p.length;C++)if(p[C]<h[C].length-1){p[C]++;break}else if(p[C]=0,C===p.length-1)throw I.getChecksumInstance()}throw I.getChecksumInstance()}static createBarcodeMatrix(s){let o=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let f=0;f<o.length;f++)for(let h=0;h<o[f].length;h++)o[f][h]=new Un;let c=0;for(let f of s.getDetectionResultColumns()){if(f!=null){for(let h of f.getCodewords())if(h!=null){let p=h.getRowNumber();if(p>=0){if(p>=o.length)continue;o[p][c].setValue(h.getValue())}}}c++}return o}static isValidBarcodeColumn(s,o){return o>=0&&o<=s.getBarcodeColumnCount()+1}static getStartColumn(s,o,c,f){let h=f?1:-1,p=null;if(vt.isValidBarcodeColumn(s,o-h)&&(p=s.getDetectionResultColumn(o-h).getCodeword(c)),p!=null)return f?p.getEndX():p.getStartX();if(p=s.getDetectionResultColumn(o).getCodewordNearby(c),p!=null)return f?p.getStartX():p.getEndX();if(vt.isValidBarcodeColumn(s,o-h)&&(p=s.getDetectionResultColumn(o-h).getCodewordNearby(c)),p!=null)return f?p.getEndX():p.getStartX();let w=0;for(;vt.isValidBarcodeColumn(s,o-h);){o-=h;for(let C of s.getDetectionResultColumn(o).getCodewords())if(C!=null)return(f?C.getEndX():C.getStartX())+h*w*(C.getEndX()-C.getStartX());w++}return f?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,o,c,f,h,p,w,C){h=vt.adjustCodewordStartColumn(s,o,c,f,h,p);let _=vt.getModuleBitCount(s,o,c,f,h,p);if(_==null)return null;let O,k=ze.sum(_);if(f)O=h+k;else{for(let Q=0;Q<_.length/2;Q++){let te=_[Q];_[Q]=_[_.length-1-Q],_[_.length-1-Q]=te}O=h,h=O-k}if(!vt.checkCodewordSkew(k,w,C))return null;let P=xi.getDecodedValue(_),G=nt.getCodeword(P);return G===-1?null:new Ds(h,O,vt.getCodewordBucketNumber(P),G)}static getModuleBitCount(s,o,c,f,h,p){let w=h,C=new Int32Array(8),_=0,O=f?1:-1,k=f;for(;(f?w<c:w>=o)&&_<C.length;)s.get(w,p)===k?(C[_]++,w+=O):(_++,k=!k);return _===C.length||w===(f?c:o)&&_===C.length-1?C:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,o,c,f,h,p){let w=h,C=f?-1:1;for(let _=0;_<2;_++){for(;(f?w>=o:w<c)&&f===s.get(w,p);){if(Math.abs(h-w)>vt.CODEWORD_SKEW_SIZE)return h;w+=C}C=-C,f=!f}return w}static checkCodewordSkew(s,o,c){return o-vt.CODEWORD_SKEW_SIZE<=s&&s<=c+vt.CODEWORD_SKEW_SIZE}static decodeCodewords(s,o,c){if(s.length===0)throw X.getFormatInstance();let f=1<<o+1,h=vt.correctErrors(s,c,f);vt.verifyCodewordCount(s,f);let p=we.decode(s,""+o);return p.setErrorsCorrected(h),p.setErasures(c.length),p}static correctErrors(s,o,c){if(o!=null&&o.length>c/2+vt.MAX_ERRORS||c<0||c>vt.MAX_EC_CODEWORDS)throw I.getChecksumInstance();return vt.errorCorrection.decode(s,c,o)}static verifyCodewordCount(s,o){if(s.length<4)throw X.getFormatInstance();let c=s[0];if(c>s.length)throw X.getFormatInstance();if(c===0)if(o<s.length)s[0]=s.length-o;else throw X.getFormatInstance()}static getBitCountForCodeword(s){let o=new Int32Array(8),c=0,f=o.length-1;for(;!((s&1)!==c&&(c=s&1,f--,f<0));)o[f]++,s>>=1;return o}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return vt.getCodewordBucketNumber(vt.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let o=new tr;for(let c=0;c<s.length;c++){o.format("Row %2d: ",c);for(let f=0;f<s[c].length;f++){let h=s[c][f];h.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",h.getValue()[0],h.getConfidence(h.getValue()[0]))}o.format("%n")}return o.toString()}}vt.CODEWORD_SKEW_SIZE=2,vt.MAX_ERRORS=3,vt.MAX_EC_CODEWORDS=512,vt.errorCorrection=new mo;class Yn{decode(s,o=null){let c=Yn.decode(s,o,!1);if(c==null||c.length===0||c[0]==null)throw re.getNotFoundInstance();return c[0]}decodeMultiple(s,o=null){try{return Yn.decode(s,o,!0)}catch(c){throw c instanceof X||c instanceof I?re.getNotFoundInstance():c}}static decode(s,o,c){const f=new Array,h=xt.detectMultiple(s,o,c);for(const p of h.getPoints()){const w=vt.decode(h.getBits(),p[4],p[5],p[6],p[7],Yn.getMinCodewordWidth(p),Yn.getMaxCodewordWidth(p)),C=new Ne(w.getText(),w.getRawBytes(),void 0,p,Se.PDF_417);C.putMetadata(ve.ERROR_CORRECTION_LEVEL,w.getECLevel());const _=w.getOther();_!=null&&C.putMetadata(ve.PDF417_EXTRA_METADATA,_),f.push(C)}return f.map(p=>p)}static getMaxWidth(s,o){return s==null||o==null?0:Math.trunc(Math.abs(s.getX()-o.getX()))}static getMinWidth(s,o){return s==null||o==null?B.MAX_VALUE:Math.trunc(Math.abs(s.getX()-o.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(Yn.getMaxWidth(s[0],s[4]),Yn.getMaxWidth(s[6],s[2])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN),Math.max(Yn.getMaxWidth(s[1],s[5]),Yn.getMaxWidth(s[7],s[3])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(Yn.getMinWidth(s[0],s[4]),Yn.getMinWidth(s[6],s[2])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN),Math.min(Yn.getMinWidth(s[1],s[5]),Yn.getMinWidth(s[7],s[3])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN)))}reset(){}}class po extends x{}po.kind="ReaderException";class Vd{constructor(s,o){this.verbose=s===!0,o&&this.setHints(o)}decode(s,o){return o&&this.setHints(o),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const o=!r(s)&&s.get(J.TRY_HARDER)===!0,c=r(s)?null:s.get(J.POSSIBLE_FORMATS),f=new Array;if(!r(c)){const h=c.some(p=>p===Se.UPC_A||p===Se.UPC_E||p===Se.EAN_13||p===Se.EAN_8||p===Se.CODABAR||p===Se.CODE_39||p===Se.CODE_93||p===Se.CODE_128||p===Se.ITF||p===Se.RSS_14||p===Se.RSS_EXPANDED);h&&!o&&f.push(new Ks(s,this.verbose)),c.includes(Se.QR_CODE)&&f.push(new Is),c.includes(Se.DATA_MATRIX)&&f.push(new Zi),c.includes(Se.AZTEC)&&f.push(new mi),c.includes(Se.PDF_417)&&f.push(new Yn),h&&o&&f.push(new Ks(s,this.verbose))}f.length===0&&(o||f.push(new Ks(s,this.verbose)),f.push(new Is),f.push(new Zi),f.push(new mi),f.push(new Yn),o&&f.push(new Ks(s,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new po("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(s,this.hints)}catch(c){if(c instanceof po)continue}throw new re("No MultiFormat Readers were able to detect the code.")}}class a0 extends se{constructor(s=null,o=500){const c=new Vd;c.setHints(s),super(c,o)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class o0 extends se{constructor(s=500){super(new Yn,s)}}class l0 extends se{constructor(s=500){super(new Is,s)}}var xo;(function(L){L[L.ERROR_CORRECTION=0]="ERROR_CORRECTION",L[L.CHARACTER_SET=1]="CHARACTER_SET",L[L.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",L[L.MIN_SIZE=3]="MIN_SIZE",L[L.MAX_SIZE=4]="MAX_SIZE",L[L.MARGIN=5]="MARGIN",L[L.PDF417_COMPACT=6]="PDF417_COMPACT",L[L.PDF417_COMPACTION=7]="PDF417_COMPACTION",L[L.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",L[L.AZTEC_LAYERS=9]="AZTEC_LAYERS",L[L.QR_VERSION=10]="QR_VERSION"})(xo||(xo={}));var Mn=xo;class Vc{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new gt(s,Int32Array.from([1])))}buildGenerator(s){const o=this.cachedGenerators;if(s>=o.length){let c=o[o.length-1];const f=this.field;for(let h=o.length;h<=s;h++){const p=c.multiply(new gt(f,Int32Array.from([1,f.exp(h-1+f.getGeneratorBase())])));o.push(p),c=p}}return o[s]}encode(s,o){if(o===0)throw new A("No error correction bytes");const c=s.length-o;if(c<=0)throw new A("No data bytes provided");const f=this.buildGenerator(o),h=new Int32Array(c);j.arraycopy(s,0,h,0,c);let p=new gt(this.field,h);p=p.multiplyByMonomial(o,1);const C=p.divide(f)[1].getCoefficients(),_=o-C.length;for(let O=0;O<_;O++)s[c+O]=0;j.arraycopy(C,0,s,c+_,C.length)}}class gn{constructor(){}static applyMaskPenaltyRule1(s){return gn.applyMaskPenaltyRule1Internal(s,!0)+gn.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let o=0;const c=s.getArray(),f=s.getWidth(),h=s.getHeight();for(let p=0;p<h-1;p++){const w=c[p];for(let C=0;C<f-1;C++){const _=w[C];_===w[C+1]&&_===c[p+1][C]&&_===c[p+1][C+1]&&o++}}return gn.N2*o}static applyMaskPenaltyRule3(s){let o=0;const c=s.getArray(),f=s.getWidth(),h=s.getHeight();for(let p=0;p<h;p++)for(let w=0;w<f;w++){const C=c[p];w+6<f&&C[w]===1&&C[w+1]===0&&C[w+2]===1&&C[w+3]===1&&C[w+4]===1&&C[w+5]===0&&C[w+6]===1&&(gn.isWhiteHorizontal(C,w-4,w)||gn.isWhiteHorizontal(C,w+7,w+11))&&o++,p+6<h&&c[p][w]===1&&c[p+1][w]===0&&c[p+2][w]===1&&c[p+3][w]===1&&c[p+4][w]===1&&c[p+5][w]===0&&c[p+6][w]===1&&(gn.isWhiteVertical(c,w,p-4,p)||gn.isWhiteVertical(c,w,p+7,p+11))&&o++}return o*gn.N3}static isWhiteHorizontal(s,o,c){o=Math.max(o,0),c=Math.min(c,s.length);for(let f=o;f<c;f++)if(s[f]===1)return!1;return!0}static isWhiteVertical(s,o,c,f){c=Math.max(c,0),f=Math.min(f,s.length);for(let h=c;h<f;h++)if(s[h][o]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let o=0;const c=s.getArray(),f=s.getWidth(),h=s.getHeight();for(let C=0;C<h;C++){const _=c[C];for(let O=0;O<f;O++)_[O]===1&&o++}const p=s.getHeight()*s.getWidth();return Math.floor(Math.abs(o*2-p)*10/p)*gn.N4}static getDataMaskBit(s,o,c){let f,h;switch(s){case 0:f=c+o&1;break;case 1:f=c&1;break;case 2:f=o%3;break;case 3:f=(c+o)%3;break;case 4:f=Math.floor(c/2)+Math.floor(o/3)&1;break;case 5:h=c*o,f=(h&1)+h%3;break;case 6:h=c*o,f=(h&1)+h%3&1;break;case 7:h=c*o,f=h%3+(c+o&1)&1;break;default:throw new A("Invalid mask pattern: "+s)}return f===0}static applyMaskPenaltyRule1Internal(s,o){let c=0;const f=o?s.getHeight():s.getWidth(),h=o?s.getWidth():s.getHeight(),p=s.getArray();for(let w=0;w<f;w++){let C=0,_=-1;for(let O=0;O<h;O++){const k=o?p[w][O]:p[O][w];k===_?C++:(C>=5&&(c+=gn.N1+(C-5)),C=1,_=k)}C>=5&&(c+=gn.N1+(C-5))}return c}}gn.N1=3,gn.N2=3,gn.N3=40,gn.N4=10;class yo{constructor(s,o){this.width=s,this.height=o;const c=new Array(o);for(let f=0;f!==o;f++)c[f]=new Uint8Array(s);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(s,o){return this.bytes[o][s]}getArray(){return this.bytes}setNumber(s,o,c){this.bytes[o][s]=c}setBoolean(s,o,c){this.bytes[o][s]=c?1:0}clear(s){for(const o of this.bytes)q.fill(o,s)}equals(s){if(!(s instanceof yo))return!1;const o=s;if(this.width!==o.width||this.height!==o.height)return!1;for(let c=0,f=this.height;c<f;++c){const h=this.bytes[c],p=o.bytes[c];for(let w=0,C=this.width;w<C;++w)if(h[w]!==p[w])return!1}return!0}toString(){const s=new de;for(let o=0,c=this.height;o<c;++o){const f=this.bytes[o];for(let h=0,p=this.width;h<p;++h)switch(f[h]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class _r{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new de;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<_r.NUM_MASK_PATTERNS}}_r.NUM_MASK_PATTERNS=8;class Kt extends x{}Kt.kind="WriterException";class it{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,o,c,f,h){it.clearMatrix(h),it.embedBasicPatterns(c,h),it.embedTypeInfo(o,f,h),it.maybeEmbedVersionInfo(c,h),it.embedDataBits(s,f,h)}static embedBasicPatterns(s,o){it.embedPositionDetectionPatternsAndSeparators(o),it.embedDarkDotAtLeftBottomCorner(o),it.maybeEmbedPositionAdjustmentPatterns(s,o),it.embedTimingPatterns(o)}static embedTypeInfo(s,o,c){const f=new V;it.makeTypeInfoBits(s,o,f);for(let h=0,p=f.getSize();h<p;++h){const w=f.get(f.getSize()-1-h),C=it.TYPE_INFO_COORDINATES[h],_=C[0],O=C[1];if(c.setBoolean(_,O,w),h<8){const k=c.getWidth()-h-1;c.setBoolean(k,8,w)}else{const P=c.getHeight()-7+(h-8);c.setBoolean(8,P,w)}}}static maybeEmbedVersionInfo(s,o){if(s.getVersionNumber()<7)return;const c=new V;it.makeVersionInfoBits(s,c);let f=6*3-1;for(let h=0;h<6;++h)for(let p=0;p<3;++p){const w=c.get(f);f--,o.setBoolean(h,o.getHeight()-11+p,w),o.setBoolean(o.getHeight()-11+p,h,w)}}static embedDataBits(s,o,c){let f=0,h=-1,p=c.getWidth()-1,w=c.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);w>=0&&w<c.getHeight();){for(let C=0;C<2;++C){const _=p-C;if(!it.isEmpty(c.get(_,w)))continue;let O;f<s.getSize()?(O=s.get(f),++f):O=!1,o!==255&&gn.getDataMaskBit(o,_,w)&&(O=!O),c.setBoolean(_,w,O)}w+=h}h=-h,w+=h,p-=2}if(f!==s.getSize())throw new Kt("Not all bits consumed: "+f+"/"+s.getSize())}static findMSBSet(s){return 32-B.numberOfLeadingZeros(s)}static calculateBCHCode(s,o){if(o===0)throw new A("0 polynomial");const c=it.findMSBSet(o);for(s<<=c-1;it.findMSBSet(s)>=c;)s^=o<<it.findMSBSet(s)-c;return s}static makeTypeInfoBits(s,o,c){if(!_r.isValidMaskPattern(o))throw new Kt("Invalid mask pattern");const f=s.getBits()<<3|o;c.appendBits(f,5);const h=it.calculateBCHCode(f,it.TYPE_INFO_POLY);c.appendBits(h,10);const p=new V;if(p.appendBits(it.TYPE_INFO_MASK_PATTERN,15),c.xor(p),c.getSize()!==15)throw new Kt("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(s,o){o.appendBits(s.getVersionNumber(),6);const c=it.calculateBCHCode(s.getVersionNumber(),it.VERSION_INFO_POLY);if(o.appendBits(c,12),o.getSize()!==18)throw new Kt("should not happen but we got: "+o.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let o=8;o<s.getWidth()-8;++o){const c=(o+1)%2;it.isEmpty(s.get(o,6))&&s.setNumber(o,6,c),it.isEmpty(s.get(6,o))&&s.setNumber(6,o,c)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new Kt;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,o,c){for(let f=0;f<8;++f){if(!it.isEmpty(c.get(s+f,o)))throw new Kt;c.setNumber(s+f,o,0)}}static embedVerticalSeparationPattern(s,o,c){for(let f=0;f<7;++f){if(!it.isEmpty(c.get(s,o+f)))throw new Kt;c.setNumber(s,o+f,0)}}static embedPositionAdjustmentPattern(s,o,c){for(let f=0;f<5;++f){const h=it.POSITION_ADJUSTMENT_PATTERN[f];for(let p=0;p<5;++p)c.setNumber(s+p,o+f,h[p])}}static embedPositionDetectionPattern(s,o,c){for(let f=0;f<7;++f){const h=it.POSITION_DETECTION_PATTERN[f];for(let p=0;p<7;++p)c.setNumber(s+p,o+f,h[p])}}static embedPositionDetectionPatternsAndSeparators(s){const o=it.POSITION_DETECTION_PATTERN[0].length;it.embedPositionDetectionPattern(0,0,s),it.embedPositionDetectionPattern(s.getWidth()-o,0,s),it.embedPositionDetectionPattern(0,s.getWidth()-o,s);const c=8;it.embedHorizontalSeparationPattern(0,c-1,s),it.embedHorizontalSeparationPattern(s.getWidth()-c,c-1,s),it.embedHorizontalSeparationPattern(0,s.getWidth()-c,s);const f=7;it.embedVerticalSeparationPattern(f,0,s),it.embedVerticalSeparationPattern(s.getHeight()-f-1,0,s),it.embedVerticalSeparationPattern(f,s.getHeight()-f,s)}static maybeEmbedPositionAdjustmentPatterns(s,o){if(s.getVersionNumber()<2)return;const c=s.getVersionNumber()-1,f=it.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let h=0,p=f.length;h!==p;h++){const w=f[h];if(w>=0)for(let C=0;C!==p;C++){const _=f[C];_>=0&&it.isEmpty(o.get(_,w))&&it.embedPositionAdjustmentPattern(_-2,w-2,o)}}}}it.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),it.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),it.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),it.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),it.VERSION_INFO_POLY=7973,it.TYPE_INFO_POLY=1335,it.TYPE_INFO_MASK_PATTERN=21522;class c0{constructor(s,o){this.dataBytes=s,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class rn{constructor(){}static calculateMaskPenalty(s){return gn.applyMaskPenaltyRule1(s)+gn.applyMaskPenaltyRule2(s)+gn.applyMaskPenaltyRule3(s)+gn.applyMaskPenaltyRule4(s)}static encode(s,o,c=null){let f=rn.DEFAULT_BYTE_MODE_ENCODING;const h=c!==null&&c.get(Mn.CHARACTER_SET)!==void 0;h&&(f=c.get(Mn.CHARACTER_SET).toString());const p=this.chooseMode(s,f),w=new V;if(p===Je.BYTE&&(h||rn.DEFAULT_BYTE_MODE_ENCODING!==f)){const Le=Y.getCharacterSetECIByName(f);Le!==void 0&&this.appendECI(Le,w)}this.appendModeInfo(p,w);const C=new V;this.appendBytes(s,p,C,f);let _;if(c!==null&&c.get(Mn.QR_VERSION)!==void 0){const Le=Number.parseInt(c.get(Mn.QR_VERSION).toString(),10);_=Qe.getVersionForNumber(Le);const Ie=this.calculateBitsNeeded(p,w,C,_);if(!this.willFit(Ie,_,o))throw new Kt("Data too big for requested version")}else _=this.recommendVersion(o,p,w,C);const O=new V;O.appendBitArray(w);const k=p===Je.BYTE?C.getSizeInBytes():s.length;this.appendLengthInfo(k,_,p,O),O.appendBitArray(C);const P=_.getECBlocksForLevel(o),G=_.getTotalCodewords()-P.getTotalECCodewords();this.terminateBits(G,O);const Q=this.interleaveWithECBytes(O,_.getTotalCodewords(),G,P.getNumBlocks()),te=new _r;te.setECLevel(o),te.setMode(p),te.setVersion(_);const fe=_.getDimensionForVersion(),xe=new yo(fe,fe),Me=this.chooseMaskPattern(Q,o,_,xe);return te.setMaskPattern(Me),it.buildMatrix(Q,o,_,Me,xe),te.setMatrix(xe),te}static recommendVersion(s,o,c,f){const h=this.calculateBitsNeeded(o,c,f,Qe.getVersionForNumber(1)),p=this.chooseVersion(h,s),w=this.calculateBitsNeeded(o,c,f,p);return this.chooseVersion(w,s)}static calculateBitsNeeded(s,o,c,f){return o.getSize()+s.getCharacterCountBits(f)+c.getSize()}static getAlphanumericCode(s){return s<rn.ALPHANUMERIC_TABLE.length?rn.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,o=null){if(Y.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(s))return Je.KANJI;let c=!1,f=!1;for(let h=0,p=s.length;h<p;++h){const w=s.charAt(h);if(rn.isDigit(w))c=!0;else if(this.getAlphanumericCode(w.charCodeAt(0))!==-1)f=!0;else return Je.BYTE}return f?Je.ALPHANUMERIC:c?Je.NUMERIC:Je.BYTE}static isOnlyDoubleByteKanji(s){let o;try{o=Ae.encode(s,Y.SJIS)}catch{return!1}const c=o.length;if(c%2!==0)return!1;for(let f=0;f<c;f+=2){const h=o[f]&255;if((h<129||h>159)&&(h<224||h>235))return!1}return!0}static chooseMaskPattern(s,o,c,f){let h=Number.MAX_SAFE_INTEGER,p=-1;for(let w=0;w<_r.NUM_MASK_PATTERNS;w++){it.buildMatrix(s,o,c,w,f);let C=this.calculateMaskPenalty(f);C<h&&(h=C,p=w)}return p}static chooseVersion(s,o){for(let c=1;c<=40;c++){const f=Qe.getVersionForNumber(c);if(rn.willFit(s,f,o))return f}throw new Kt("Data too big")}static willFit(s,o,c){const f=o.getTotalCodewords(),p=o.getECBlocksForLevel(c).getTotalECCodewords(),w=f-p,C=(s+7)/8;return w>=C}static terminateBits(s,o){const c=s*8;if(o.getSize()>c)throw new Kt("data bits cannot fit in the QR Code"+o.getSize()+" > "+c);for(let p=0;p<4&&o.getSize()<c;++p)o.appendBit(!1);const f=o.getSize()&7;if(f>0)for(let p=f;p<8;p++)o.appendBit(!1);const h=s-o.getSizeInBytes();for(let p=0;p<h;++p)o.appendBits((p&1)===0?236:17,8);if(o.getSize()!==c)throw new Kt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,o,c,f,h,p){if(f>=c)throw new Kt("Block ID too large");const w=s%c,C=c-w,_=Math.floor(s/c),O=_+1,k=Math.floor(o/c),P=k+1,G=_-k,Q=O-P;if(G!==Q)throw new Kt("EC bytes mismatch");if(c!==C+w)throw new Kt("RS blocks mismatch");if(s!==(k+G)*C+(P+Q)*w)throw new Kt("Total bytes mismatch");f<C?(h[0]=k,p[0]=G):(h[0]=P,p[0]=Q)}static interleaveWithECBytes(s,o,c,f){if(s.getSizeInBytes()!==c)throw new Kt("Number of bits and data bytes does not match");let h=0,p=0,w=0;const C=new Array;for(let O=0;O<f;++O){const k=new Int32Array(1),P=new Int32Array(1);rn.getNumDataBytesAndNumECBytesForBlockID(o,c,f,O,k,P);const G=k[0],Q=new Uint8Array(G);s.toBytes(8*h,Q,0,G);const te=rn.generateECBytes(Q,P[0]);C.push(new c0(Q,te)),p=Math.max(p,G),w=Math.max(w,te.length),h+=k[0]}if(c!==h)throw new Kt("Data bytes does not match offset");const _=new V;for(let O=0;O<p;++O)for(const k of C){const P=k.getDataBytes();O<P.length&&_.appendBits(P[O],8)}for(let O=0;O<w;++O)for(const k of C){const P=k.getErrorCorrectionBytes();O<P.length&&_.appendBits(P[O],8)}if(o!==_.getSizeInBytes())throw new Kt("Interleaving error: "+o+" and "+_.getSizeInBytes()+" differ.");return _}static generateECBytes(s,o){const c=s.length,f=new Int32Array(c+o);for(let p=0;p<c;p++)f[p]=s[p]&255;new Vc(ue.QR_CODE_FIELD_256).encode(f,o);const h=new Uint8Array(o);for(let p=0;p<o;p++)h[p]=f[c+p];return h}static appendModeInfo(s,o){o.appendBits(s.getBits(),4)}static appendLengthInfo(s,o,c,f){const h=c.getCharacterCountBits(o);if(s>=1<<h)throw new Kt(s+" is bigger than "+((1<<h)-1));f.appendBits(s,h)}static appendBytes(s,o,c,f){switch(o){case Je.NUMERIC:rn.appendNumericBytes(s,c);break;case Je.ALPHANUMERIC:rn.appendAlphanumericBytes(s,c);break;case Je.BYTE:rn.append8BitBytes(s,c,f);break;case Je.KANJI:rn.appendKanjiBytes(s,c);break;default:throw new Kt("Invalid mode: "+o)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const o=rn.getDigit(s);return o>=0&&o<=9}static appendNumericBytes(s,o){const c=s.length;let f=0;for(;f<c;){const h=rn.getDigit(s.charAt(f));if(f+2<c){const p=rn.getDigit(s.charAt(f+1)),w=rn.getDigit(s.charAt(f+2));o.appendBits(h*100+p*10+w,10),f+=3}else if(f+1<c){const p=rn.getDigit(s.charAt(f+1));o.appendBits(h*10+p,7),f+=2}else o.appendBits(h,4),f++}}static appendAlphanumericBytes(s,o){const c=s.length;let f=0;for(;f<c;){const h=rn.getAlphanumericCode(s.charCodeAt(f));if(h===-1)throw new Kt;if(f+1<c){const p=rn.getAlphanumericCode(s.charCodeAt(f+1));if(p===-1)throw new Kt;o.appendBits(h*45+p,11),f+=2}else o.appendBits(h,6),f++}}static append8BitBytes(s,o,c){let f;try{f=Ae.encode(s,c)}catch(h){throw new Kt(h)}for(let h=0,p=f.length;h!==p;h++){const w=f[h];o.appendBits(w,8)}}static appendKanjiBytes(s,o){let c;try{c=Ae.encode(s,Y.SJIS)}catch(h){throw new Kt(h)}const f=c.length;for(let h=0;h<f;h+=2){const p=c[h]&255,w=c[h+1]&255,C=p<<8&4294967295|w;let _=-1;if(C>=33088&&C<=40956?_=C-33088:C>=57408&&C<=60351&&(_=C-49472),_===-1)throw new Kt("Invalid byte sequence");const O=(_>>8)*192+(_&255);o.appendBits(O,13)}}static appendECI(s,o){o.appendBits(Je.ECI.getBits(),4),o.appendBits(s.getValue(),8)}}rn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),rn.DEFAULT_BYTE_MODE_ENCODING=Y.UTF8.getName();class Nr{write(s,o,c,f=null){if(s.length===0)throw new A("Found empty contents");if(o<0||c<0)throw new A("Requested dimensions are too small: "+o+"x"+c);let h=qt.L,p=Nr.QUIET_ZONE_SIZE;f!==null&&(f.get(Mn.ERROR_CORRECTION)!==void 0&&(h=qt.fromString(f.get(Mn.ERROR_CORRECTION).toString())),f.get(Mn.MARGIN)!==void 0&&(p=Number.parseInt(f.get(Mn.MARGIN).toString(),10)));const w=rn.encode(s,h,f);return this.renderResult(w,o,c,p)}writeToDom(s,o,c,f,h=null){typeof s=="string"&&(s=document.querySelector(s));const p=this.write(o,c,f,h);s&&s.appendChild(p)}renderResult(s,o,c,f){const h=s.getMatrix();if(h===null)throw new Ke;const p=h.getWidth(),w=h.getHeight(),C=p+f*2,_=w+f*2,O=Math.max(o,C),k=Math.max(c,_),P=Math.min(Math.floor(O/C),Math.floor(k/_)),G=Math.floor((O-p*P)/2),Q=Math.floor((k-w*P)/2),te=this.createSVGElement(O,k);for(let fe=0,xe=Q;fe<w;fe++,xe+=P)for(let Me=0,Le=G;Me<p;Me++,Le+=P)if(h.get(Me,fe)===1){const Ie=this.createSvgRectElement(Le,xe,P,P);te.appendChild(Ie)}return te}createSVGElement(s,o){const c=document.createElementNS(Nr.SVG_NS,"svg");return c.setAttributeNS(null,"height",s.toString()),c.setAttributeNS(null,"width",o.toString()),c}createSvgRectElement(s,o,c,f){const h=document.createElementNS(Nr.SVG_NS,"rect");return h.setAttributeNS(null,"x",s.toString()),h.setAttributeNS(null,"y",o.toString()),h.setAttributeNS(null,"height",c.toString()),h.setAttributeNS(null,"width",f.toString()),h.setAttributeNS(null,"fill","#000000"),h}}Nr.QUIET_ZONE_SIZE=4,Nr.SVG_NS="http://www.w3.org/2000/svg";class ua{encode(s,o,c,f,h){if(s.length===0)throw new A("Found empty contents");if(o!==Se.QR_CODE)throw new A("Can only encode QR_CODE, but got "+o);if(c<0||f<0)throw new A(`Requested dimensions are too small: ${c}x${f}`);let p=qt.L,w=ua.QUIET_ZONE_SIZE;h!==null&&(h.get(Mn.ERROR_CORRECTION)!==void 0&&(p=qt.fromString(h.get(Mn.ERROR_CORRECTION).toString())),h.get(Mn.MARGIN)!==void 0&&(w=Number.parseInt(h.get(Mn.MARGIN).toString(),10)));const C=rn.encode(s,p,h);return ua.renderResult(C,c,f,w)}static renderResult(s,o,c,f){const h=s.getMatrix();if(h===null)throw new Ke;const p=h.getWidth(),w=h.getHeight(),C=p+f*2,_=w+f*2,O=Math.max(o,C),k=Math.max(c,_),P=Math.min(Math.floor(O/C),Math.floor(k/_)),G=Math.floor((O-p*P)/2),Q=Math.floor((k-w*P)/2),te=new Oe(O,k);for(let fe=0,xe=Q;fe<w;fe++,xe+=P)for(let Me=0,Le=G;Me<p;Me++,Le+=P)h.get(Me,fe)===1&&te.setRegion(Le,xe,P,P);return te}}ua.QUIET_ZONE_SIZE=4;class u0{encode(s,o,c,f,h){let p;switch(o){case Se.QR_CODE:p=new ua;break;default:throw new A("No encoder available for format "+o)}return p.encode(s,o,c,f,h)}}class ds extends De{constructor(s,o,c,f,h,p,w,C){if(super(p,w),this.yuvData=s,this.dataWidth=o,this.dataHeight=c,this.left=f,this.top=h,f+p>o||h+w>c)throw new A("Crop rectangle does not fit within image data.");C&&this.reverseHorizontal(p,w)}getRow(s,o){if(s<0||s>=this.getHeight())throw new A("Requested row is outside the image: "+s);const c=this.getWidth();(o==null||o.length<c)&&(o=new Uint8ClampedArray(c));const f=(s+this.top)*this.dataWidth+this.left;return j.arraycopy(this.yuvData,f,o,0,c),o}getMatrix(){const s=this.getWidth(),o=this.getHeight();if(s===this.dataWidth&&o===this.dataHeight)return this.yuvData;const c=s*o,f=new Uint8ClampedArray(c);let h=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return j.arraycopy(this.yuvData,h,f,0,c),f;for(let p=0;p<o;p++){const w=p*s;j.arraycopy(this.yuvData,h,f,w,s),h+=this.dataWidth}return f}isCropSupported(){return!0}crop(s,o,c,f){return new ds(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+o,c,f,!1)}renderThumbnail(){const s=this.getWidth()/ds.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/ds.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(s*o),f=this.yuvData;let h=this.top*this.dataWidth+this.left;for(let p=0;p<o;p++){const w=p*s;for(let C=0;C<s;C++){const _=f[h+C*ds.THUMBNAIL_SCALE_FACTOR]&255;c[w+C]=4278190080|_*65793}h+=this.dataWidth*ds.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/ds.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ds.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,o){const c=this.yuvData;for(let f=0,h=this.top*this.dataWidth+this.left;f<o;f++,h+=this.dataWidth){const p=h+s/2;for(let w=h,C=h+s-1;w<p;w++,C--){const _=c[w];c[w]=c[C],c[C]=_}}}invert(){return new $e(this)}}ds.THUMBNAIL_SCALE_FACTOR=2;class bo extends De{constructor(s,o,c,f,h,p,w){if(super(o,c),this.dataWidth=f,this.dataHeight=h,this.left=p,this.top=w,s.BYTES_PER_ELEMENT===4){const C=o*c,_=new Uint8ClampedArray(C);for(let O=0;O<C;O++){const k=s[O],P=k>>16&255,G=k>>7&510,Q=k&255;_[O]=(P+G+Q)/4&255}this.luminances=_}else this.luminances=s;if(f===void 0&&(this.dataWidth=o),h===void 0&&(this.dataHeight=c),p===void 0&&(this.left=0),w===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+c>this.dataHeight)throw new A("Crop rectangle does not fit within image data.")}getRow(s,o){if(s<0||s>=this.getHeight())throw new A("Requested row is outside the image: "+s);const c=this.getWidth();(o==null||o.length<c)&&(o=new Uint8ClampedArray(c));const f=(s+this.top)*this.dataWidth+this.left;return j.arraycopy(this.luminances,f,o,0,c),o}getMatrix(){const s=this.getWidth(),o=this.getHeight();if(s===this.dataWidth&&o===this.dataHeight)return this.luminances;const c=s*o,f=new Uint8ClampedArray(c);let h=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return j.arraycopy(this.luminances,h,f,0,c),f;for(let p=0;p<o;p++){const w=p*s;j.arraycopy(this.luminances,h,f,w,s),h+=this.dataWidth}return f}isCropSupported(){return!0}crop(s,o,c,f){return new bo(this.luminances,c,f,this.dataWidth,this.dataHeight,this.left+s,this.top+o)}invert(){return new $e(this)}}class da extends Y{static forName(s){return this.getCharacterSetECIByName(s)}}class Hc{}Hc.ISO_8859_1=Y.ISO8859_1;class zc{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class $c{static singletonList(s){return[s]}static min(s,o){return s.sort(o)[0]}}class Hd{constructor(s){this.previous=s}getPrevious(){return this.previous}}class Rr extends Hd{constructor(s,o,c){super(s),this.value=o,this.bitCount=c}appendTo(s,o){s.appendBits(this.value,this.bitCount)}add(s,o){return new Rr(this,s,o)}addBinaryShift(s,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Rr(this,s,o)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+B.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class wl extends Rr{constructor(s,o,c){super(s,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=c}appendTo(s,o){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):c===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(o[this.binaryShiftStart+c],8)}addBinaryShift(s,o){return new wl(this,s,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function fa(L,s,o){return new wl(L,s,o)}function wo(L,s,o){return new Rr(L,s,o)}const d0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],rr=0,vo=1,Ri=2,ha=3,yi=4,f0=new Rr(null,0,0),ga=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function zd(L){for(let s of L)q.fill(s,-1);return L[rr][yi]=0,L[vo][yi]=0,L[vo][rr]=28,L[ha][yi]=0,L[Ri][yi]=0,L[Ri][rr]=15,L}const Gc=zd(q.createInt32Array(6,6));class Pi{constructor(s,o,c,f){this.token=s,this.mode=o,this.binaryShiftByteCount=c,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,o){let c=this.bitCount,f=this.token;if(s!==this.mode){let p=ga[this.mode][s];f=wo(f,p&65535,p>>16),c+=p>>16}let h=s===Ri?4:5;return f=wo(f,o,h),new Pi(f,s,0,c+h)}shiftAndAppend(s,o){let c=this.token,f=this.mode===Ri?4:5;return c=wo(c,Gc[this.mode][s],f),c=wo(c,o,5),new Pi(c,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(s){let o=this.token,c=this.mode,f=this.bitCount;if(this.mode===yi||this.mode===Ri){let w=ga[c][rr];o=wo(o,w&65535,w>>16),f+=w>>16,c=rr}let h=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new Pi(o,c,this.binaryShiftByteCount+1,f+h);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(s+1)),p}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=fa(o,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new Pi(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let o=this.bitCount+(ga[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?o+=Pi.calculateBinaryShiftCost(s)-Pi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(o+=10),o<=s.bitCount}toBitArray(s){let o=[];for(let f=this.endBinaryShift(s.length).token;f!==null;f=f.getPrevious())o.unshift(f);let c=new V;for(const f of o)f.appendTo(c,s);return c}toString(){return Ee.format("%s bits=%d bytes=%d",d0[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}Pi.INITIAL_STATE=new Pi(f0,rr,0,0);function qc(L){const s=Ee.getCharCode(" "),o=Ee.getCharCode("."),c=Ee.getCharCode(",");L[rr][s]=1;const f=Ee.getCharCode("Z"),h=Ee.getCharCode("A");for(let P=h;P<=f;P++)L[rr][P]=P-h+2;L[vo][s]=1;const p=Ee.getCharCode("z"),w=Ee.getCharCode("a");for(let P=w;P<=p;P++)L[vo][P]=P-w+2;L[Ri][s]=1;const C=Ee.getCharCode("9"),_=Ee.getCharCode("0");for(let P=_;P<=C;P++)L[Ri][P]=P-_+2;L[Ri][c]=12,L[Ri][o]=13;const O=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let P=0;P<O.length;P++)L[ha][Ee.getCharCode(O[P])]=P;const k=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let P=0;P<k.length;P++)Ee.getCharCode(k[P])>0&&(L[yi][Ee.getCharCode(k[P])]=P);return L}const vl=qc(q.createInt32Array(5,256));class ma{constructor(s){this.text=s}encode(){const s=Ee.getCharCode(" "),o=Ee.getCharCode(`
`);let c=$c.singletonList(Pi.INITIAL_STATE);for(let h=0;h<this.text.length;h++){let p,w=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case Ee.getCharCode("\r"):p=w===o?2:0;break;case Ee.getCharCode("."):p=w===s?3:0;break;case Ee.getCharCode(","):p=w===s?4:0;break;case Ee.getCharCode(":"):p=w===s?5:0;break;default:p=0}p>0?(c=ma.updateStateListForPair(c,h,p),h++):c=this.updateStateListForChar(c,h)}return $c.min(c,(h,p)=>h.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,o){const c=[];for(let f of s)this.updateStateForChar(f,o,c);return ma.simplifyStates(c)}updateStateForChar(s,o,c){let f=this.text[o]&255,h=vl[s.getMode()][f]>0,p=null;for(let w=0;w<=yi;w++){let C=vl[w][f];if(C>0){if(p==null&&(p=s.endBinaryShift(o)),!h||w===s.getMode()||w===Ri){const _=p.latchAndAppend(w,C);c.push(_)}if(!h&&Gc[s.getMode()][w]>=0){const _=p.shiftAndAppend(w,C);c.push(_)}}}if(s.getBinaryShiftByteCount()>0||vl[s.getMode()][f]===0){let w=s.addBinaryShiftChar(o);c.push(w)}}static updateStateListForPair(s,o,c){const f=[];for(let h of s)this.updateStateForPair(h,o,c,f);return this.simplifyStates(f)}static updateStateForPair(s,o,c,f){let h=s.endBinaryShift(o);if(f.push(h.latchAndAppend(yi,c)),s.getMode()!==yi&&f.push(h.shiftAndAppend(yi,c)),c===3||c===4){let p=h.latchAndAppend(Ri,16-c).latchAndAppend(Ri,1);f.push(p)}if(s.getBinaryShiftByteCount()>0){let p=s.addBinaryShiftChar(o).addBinaryShiftChar(o+1);f.push(p)}}static simplifyStates(s){let o=[];for(const c of s){let f=!0;for(const h of o){if(h.isBetterThanOrEqualTo(c)){f=!1;break}c.isBetterThanOrEqualTo(h)&&(o=o.filter(p=>p!==h))}f&&o.push(c)}return o}}class kt{constructor(){}static encodeBytes(s){return kt.encode(s,kt.DEFAULT_EC_PERCENT,kt.DEFAULT_AZTEC_LAYERS)}static encode(s,o,c){let f=new ma(s).encode(),h=B.truncDivision(f.getSize()*o,100)+11,p=f.getSize()+h,w,C,_,O,k;if(c!==kt.DEFAULT_AZTEC_LAYERS){if(w=c<0,C=Math.abs(c),C>(w?kt.MAX_NB_BITS_COMPACT:kt.MAX_NB_BITS))throw new A(Ee.format("Illegal value %s for layers",c));_=kt.totalBitsInLayer(C,w),O=kt.WORD_SIZE[C];let Ie=_-_%O;if(k=kt.stuffBits(f,O),k.getSize()+h>Ie)throw new A("Data to large for user specified layer");if(w&&k.getSize()>O*64)throw new A("Data to large for user specified layer")}else{O=0,k=null;for(let Ie=0;;Ie++){if(Ie>kt.MAX_NB_BITS)throw new A("Data too large for an Aztec code");if(w=Ie<=3,C=w?Ie+1:Ie,_=kt.totalBitsInLayer(C,w),p>_)continue;(k==null||O!==kt.WORD_SIZE[C])&&(O=kt.WORD_SIZE[C],k=kt.stuffBits(f,O));let yt=_-_%O;if(!(w&&k.getSize()>O*64)&&k.getSize()+h<=yt)break}}let P=kt.generateCheckWords(k,_,O),G=k.getSize()/O,Q=kt.generateModeMessage(w,C,G),te=(w?11:14)+C*4,fe=new Int32Array(te),xe;if(w){xe=te;for(let Ie=0;Ie<fe.length;Ie++)fe[Ie]=Ie}else{xe=te+1+2*B.truncDivision(B.truncDivision(te,2)-1,15);let Ie=B.truncDivision(te,2),yt=B.truncDivision(xe,2);for(let pt=0;pt<Ie;pt++){let ui=pt+B.truncDivision(pt,15);fe[Ie-pt-1]=yt-ui-1,fe[Ie+pt]=yt+ui+1}}let Me=new Oe(xe);for(let Ie=0,yt=0;Ie<C;Ie++){let pt=(C-Ie)*4+(w?9:12);for(let ui=0;ui<pt;ui++){let Ui=ui*2;for(let bi=0;bi<2;bi++)P.get(yt+Ui+bi)&&Me.set(fe[Ie*2+bi],fe[Ie*2+ui]),P.get(yt+pt*2+Ui+bi)&&Me.set(fe[Ie*2+ui],fe[te-1-Ie*2-bi]),P.get(yt+pt*4+Ui+bi)&&Me.set(fe[te-1-Ie*2-bi],fe[te-1-Ie*2-ui]),P.get(yt+pt*6+Ui+bi)&&Me.set(fe[te-1-Ie*2-ui],fe[Ie*2+bi])}yt+=pt*8}if(kt.drawModeMessage(Me,w,xe,Q),w)kt.drawBullsEye(Me,B.truncDivision(xe,2),5);else{kt.drawBullsEye(Me,B.truncDivision(xe,2),7);for(let Ie=0,yt=0;Ie<B.truncDivision(te,2)-1;Ie+=15,yt+=16)for(let pt=B.truncDivision(xe,2)&1;pt<xe;pt+=2)Me.set(B.truncDivision(xe,2)-yt,pt),Me.set(B.truncDivision(xe,2)+yt,pt),Me.set(pt,B.truncDivision(xe,2)-yt),Me.set(pt,B.truncDivision(xe,2)+yt)}let Le=new zc;return Le.setCompact(w),Le.setSize(xe),Le.setLayers(C),Le.setCodeWords(G),Le.setMatrix(Me),Le}static drawBullsEye(s,o,c){for(let f=0;f<c;f+=2)for(let h=o-f;h<=o+f;h++)s.set(h,o-f),s.set(h,o+f),s.set(o-f,h),s.set(o+f,h);s.set(o-c,o-c),s.set(o-c+1,o-c),s.set(o-c,o-c+1),s.set(o+c,o-c),s.set(o+c,o-c+1),s.set(o+c,o+c-1)}static generateModeMessage(s,o,c){let f=new V;return s?(f.appendBits(o-1,2),f.appendBits(c-1,6),f=kt.generateCheckWords(f,28,4)):(f.appendBits(o-1,5),f.appendBits(c-1,11),f=kt.generateCheckWords(f,40,4)),f}static drawModeMessage(s,o,c,f){let h=B.truncDivision(c,2);if(o)for(let p=0;p<7;p++){let w=h-3+p;f.get(p)&&s.set(w,h-5),f.get(p+7)&&s.set(h+5,w),f.get(20-p)&&s.set(w,h+5),f.get(27-p)&&s.set(h-5,w)}else for(let p=0;p<10;p++){let w=h-5+p+B.truncDivision(p,5);f.get(p)&&s.set(w,h-7),f.get(p+10)&&s.set(h+7,w),f.get(29-p)&&s.set(w,h+7),f.get(39-p)&&s.set(h-7,w)}}static generateCheckWords(s,o,c){let f=s.getSize()/c,h=new Vc(kt.getGF(c)),p=B.truncDivision(o,c),w=kt.bitsToWords(s,c,p);h.encode(w,p-f);let C=o%c,_=new V;_.appendBits(0,C);for(const O of Array.from(w))_.appendBits(O,c);return _}static bitsToWords(s,o,c){let f=new Int32Array(c),h,p;for(h=0,p=s.getSize()/o;h<p;h++){let w=0;for(let C=0;C<o;C++)w|=s.get(h*o+C)?1<<o-C-1:0;f[h]=w}return f}static getGF(s){switch(s){case 4:return ue.AZTEC_PARAM;case 6:return ue.AZTEC_DATA_6;case 8:return ue.AZTEC_DATA_8;case 10:return ue.AZTEC_DATA_10;case 12:return ue.AZTEC_DATA_12;default:throw new A("Unsupported word size "+s)}}static stuffBits(s,o){let c=new V,f=s.getSize(),h=(1<<o)-2;for(let p=0;p<f;p+=o){let w=0;for(let C=0;C<o;C++)(p+C>=f||s.get(p+C))&&(w|=1<<o-1-C);(w&h)===h?(c.appendBits(w&h,o),p--):(w&h)===0?(c.appendBits(w|1,o),p--):c.appendBits(w,o)}return c}static totalBitsInLayer(s,o){return((o?88:112)+16*s)*s}}kt.DEFAULT_EC_PERCENT=33,kt.DEFAULT_AZTEC_LAYERS=0,kt.MAX_NB_BITS=32,kt.MAX_NB_BITS_COMPACT=4,kt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Sl{encode(s,o,c,f){return this.encodeWithHints(s,o,c,f,null)}encodeWithHints(s,o,c,f,h){let p=Hc.ISO_8859_1,w=kt.DEFAULT_EC_PERCENT,C=kt.DEFAULT_AZTEC_LAYERS;return h!=null&&(h.has(Mn.CHARACTER_SET)&&(p=da.forName(h.get(Mn.CHARACTER_SET).toString())),h.has(Mn.ERROR_CORRECTION)&&(w=B.parseInt(h.get(Mn.ERROR_CORRECTION).toString())),h.has(Mn.AZTEC_LAYERS)&&(C=B.parseInt(h.get(Mn.AZTEC_LAYERS).toString()))),Sl.encodeLayers(s,o,c,f,p,w,C)}static encodeLayers(s,o,c,f,h,p,w){if(o!==Se.AZTEC)throw new A("Can only encode AZTEC, but got "+o);let C=kt.encode(Ee.getBytes(s,h),p,w);return Sl.renderResult(C,c,f)}static renderResult(s,o,c){let f=s.getMatrix();if(f==null)throw new Ke;let h=f.getWidth(),p=f.getHeight(),w=Math.max(o,h),C=Math.max(c,p),_=Math.min(w/h,C/p),O=(w-h*_)/2,k=(C-p*_)/2,P=new Oe(w,C);for(let G=0,Q=k;G<p;G++,Q+=_)for(let te=0,fe=O;te<h;te++,fe+=_)f.get(te,G)&&P.setRegion(fe,Q,_,_);return P}}n.AbstractExpandedDecoder=fo,n.ArgumentException=S,n.ArithmeticException=Ve,n.AztecCode=zc,n.AztecCodeReader=mi,n.AztecCodeWriter=Sl,n.AztecDecoder=mt,n.AztecDetector=Jn,n.AztecDetectorResult=qs,n.AztecEncoder=kt,n.AztecHighLevelEncoder=ma,n.AztecPoint=tt,n.BarcodeFormat=Se,n.Binarizer=M,n.BinaryBitmap=N,n.BitArray=V,n.BitMatrix=Oe,n.BitSource=pi,n.BrowserAztecCodeReader=cs,n.BrowserBarcodeReader=Bd,n.BrowserCodeReader=se,n.BrowserDatamatrixCodeReader=n0,n.BrowserMultiFormatReader=a0,n.BrowserPDF417Reader=o0,n.BrowserQRCodeReader=l0,n.BrowserQRCodeSvgWriter=Nr,n.CharacterSetECI=Y,n.ChecksumException=I,n.Code128Reader=ke,n.Code39Reader=Vt,n.DataMatrixDecodedBitStreamParser=Zs,n.DataMatrixReader=Zi,n.DecodeHintType=J,n.DecoderResult=He,n.DefaultGridSampler=wt,n.DetectorResult=ki,n.EAN13Reader=Wi,n.EncodeHintType=Mn,n.Exception=x,n.FormatException=X,n.GenericGF=ue,n.GenericGFPoly=gt,n.GlobalHistogramBinarizer=ie,n.GridSampler=Rt,n.GridSamplerInstance=Lt,n.HTMLCanvasElementLuminanceSource=W,n.HybridBinarizer=le,n.ITFReader=At,n.IllegalArgumentException=A,n.IllegalStateException=Ke,n.InvertedLuminanceSource=$e,n.LuminanceSource=De,n.MathUtils=ze,n.MultiFormatOneDReader=Ks,n.MultiFormatReader=Vd,n.MultiFormatWriter=u0,n.NotFoundException=re,n.OneDReader=$t,n.PDF417DecodedBitStreamParser=we,n.PDF417DecoderErrorCorrection=mo,n.PDF417Reader=Yn,n.PDF417ResultMetadata=xl,n.PerspectiveTransform=Ct,n.PlanarYUVLuminanceSource=ds,n.QRCodeByteMatrix=yo,n.QRCodeDataMask=qn,n.QRCodeDecodedBitStreamParser=dn,n.QRCodeDecoderErrorCorrectionLevel=qt,n.QRCodeDecoderFormatInformation=Gn,n.QRCodeEncoder=rn,n.QRCodeEncoderQRCode=_r,n.QRCodeMaskUtil=gn,n.QRCodeMatrixUtil=it,n.QRCodeMode=Je,n.QRCodeReader=Is,n.QRCodeVersion=Qe,n.QRCodeWriter=ua,n.RGBLuminanceSource=bo,n.RSS14Reader=Ht,n.RSSExpandedReader=Re,n.ReaderException=po,n.ReedSolomonDecoder=Ze,n.ReedSolomonEncoder=Vc,n.ReedSolomonException=Ue,n.Result=Ne,n.ResultMetadataType=ve,n.ResultPoint=Pe,n.StringUtils=Ee,n.UnsupportedOperationException=be,n.VideoInputDevice=Z,n.WhiteRectangleDetector=je,n.WriterException=Kt,n.ZXingArrays=q,n.ZXingCharset=da,n.ZXingInteger=B,n.ZXingStandardCharsets=Hc,n.ZXingStringBuilder=de,n.ZXingStringEncoding=Ae,n.ZXingSystem=j,n.createAbstractExpandedDecoder=Pc,Object.defineProperty(n,"__esModule",{value:!0})})}(qu,qu.exports)),qu.exports}var fn=yH();const bH=jm(fn),wH=u3({__proto__:null,default:bH},[fn]);var Vv=function(){function t(e,n,r){if(this.formatMap=new Map([[Ye.QR_CODE,fn.BarcodeFormat.QR_CODE],[Ye.AZTEC,fn.BarcodeFormat.AZTEC],[Ye.CODABAR,fn.BarcodeFormat.CODABAR],[Ye.CODE_39,fn.BarcodeFormat.CODE_39],[Ye.CODE_93,fn.BarcodeFormat.CODE_93],[Ye.CODE_128,fn.BarcodeFormat.CODE_128],[Ye.DATA_MATRIX,fn.BarcodeFormat.DATA_MATRIX],[Ye.MAXICODE,fn.BarcodeFormat.MAXICODE],[Ye.ITF,fn.BarcodeFormat.ITF],[Ye.EAN_13,fn.BarcodeFormat.EAN_13],[Ye.EAN_8,fn.BarcodeFormat.EAN_8],[Ye.PDF_417,fn.BarcodeFormat.PDF_417],[Ye.RSS_14,fn.BarcodeFormat.RSS_14],[Ye.RSS_EXPANDED,fn.BarcodeFormat.RSS_EXPANDED],[Ye.UPC_A,fn.BarcodeFormat.UPC_A],[Ye.UPC_E,fn.BarcodeFormat.UPC_E],[Ye.UPC_EAN_EXTENSION,fn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!wH)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var l=this.createZXingFormats(e),u=new Map;u.set(fn.DecodeHintType.POSSIBLE_FORMATS,l),u.set(fn.DecodeHintType.TRY_HARDER,!1),this.hints=u}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,l){try{r(n.decode(e))}catch(u){l(u)}})},t.prototype.decode=function(e){var n=new fn.MultiFormatReader(this.verbose,this.hints),r=new fn.HTMLCanvasElementLuminanceSource(e),l=new fn.BinaryBitmap(new fn.HybridBinarizer(r)),u=n.decode(l);return{text:u.text,format:EC.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,l){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,l=e;r<l.length;r++){var u=l[r];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.logError("".concat(u," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),vH=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(S){try{x(r.next(S))}catch(A){g(A)}}function b(S){try{x(r.throw(S))}catch(A){g(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},SH=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(x){return function(S){return b([x,S])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(S){x=[6,S],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Hv=function(){function t(e,n,r){if(this.formatMap=new Map([[Ye.QR_CODE,"qr_code"],[Ye.AZTEC,"aztec"],[Ye.CODABAR,"codabar"],[Ye.CODE_39,"code_39"],[Ye.CODE_93,"code_93"],[Ye.CODE_128,"code_128"],[Ye.DATA_MATRIX,"data_matrix"],[Ye.ITF,"itf"],[Ye.EAN_13,"ean_13"],[Ye.EAN_8,"ean_8"],[Ye.PDF_417,"pdf417"],[Ye.UPC_A,"upc_a"],[Ye.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var l=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return vH(this,void 0,void 0,function(){var n,r;return SH(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=l.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:EC.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,l=0,u=e;l<u.length;l++){var g=u[l],y=g.boundingBox.width*g.boundingBox.height;y>r&&(r=y,n=g)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,l=e;r<l.length;r++){var u=l[r];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.warn("".concat(u," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,l){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),zv=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(S){try{x(r.next(S))}catch(A){g(A)}}function b(S){try{x(r.throw(S))}catch(A){g(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},$v=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(x){return function(S){return b([x,S])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(S){x=[6,S],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},EH=function(){function t(e,n,r,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&Hv.isSupported()?(this.primaryDecoder=new Hv(e,r,l),this.secondaryDecoder=new Vv(e,r,l)):this.primaryDecoder=new Vv(e,r,l)}return t.prototype.decodeAsync=function(e){return zv(this,void 0,void 0,function(){var n;return $v(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return zv(this,void 0,void 0,function(){var n,r;return $v(this,function(l){switch(l.label){case 0:n=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,l.sent()];case 3:if(r=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var l=r[n];e+=l}var u=e/this.executionResults.length;console.log("".concat(u," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Vp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,l){r.__proto__=l}||function(r,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(r[u]=l[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jh=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(S){try{x(r.next(S))}catch(A){g(A)}}function b(S){try{x(r.throw(S))}catch(A){g(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},Bh=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(x){return function(S){return b([x,S])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(S){x=[6,S],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},_C=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),CH=function(t){Vp(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var l={advanced:[r]};return this.track.applyConstraints(l)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(_C),AH=function(t){Vp(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(CH),TH=function(t){Vp(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(_C),_H=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new AH(this.track)},t.prototype.torchFeature=function(){return new TH(this.track)},t}(),NH=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,l=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,l),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,l){return jh(this,void 0,void 0,function(){var u,g;return Bh(this,function(y){switch(y.label){case 0:return u=new t(e,n,l),r.aspectRatio?(g={aspectRatio:r.aspectRatio},[4,u.getFirstTrackOrFail().applyConstraints(g)]):[3,2];case 1:y.sent(),y.label=2;case 2:return u.setupSurface(),[2,u]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return jh(this,void 0,void 0,function(){return Bh(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var l=e.mediaStream.getVideoTracks(),u=l.length,g=0;e.mediaStream.getVideoTracks().forEach(function(y){e.mediaStream.removeTrack(y),y.stop(),++g,g>=u&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new _H(this.getFirstTrackOrFail())},t}(),RH=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return jh(this,void 0,void 0,function(){return Bh(this,function(l){return[2,NH.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return jh(this,void 0,void 0,function(){var n,r;return Bh(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=l.sent(),[2,new t(r)]}})})},t}(),Gv=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(S){try{x(r.next(S))}catch(A){g(A)}}function b(S){try{x(r.throw(S))}catch(A){g(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},qv=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(x){return function(S){return b([x,S])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(S){x=[6,S],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},OH=function(){function t(){}return t.failIfNotSupported=function(){return Gv(this,void 0,void 0,function(){return qv(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Gv(this,void 0,void 0,function(){return qv(this,function(n){return[2,RH.create(e)]})})},t}(),IH=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(S){try{x(r.next(S))}catch(A){g(A)}}function b(S){try{x(r.throw(S))}catch(A){g(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},MH=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(x){return function(S){return b([x,S])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(S){x=[6,S],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},DH=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=fc.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=fc.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return IH(this,void 0,void 0,function(){var e,n,r,l,u,g,y;return MH(this,function(b){switch(b.label){case 0:return e=function(x){for(var S=x.getVideoTracks(),A=0,N=S;A<N.length;A++){var I=N[A];I.enabled=!1,I.stop(),x.removeTrack(I)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=b.sent(),l=[],u=0,g=r;u<g.length;u++)y=g[u],y.kind==="videoinput"&&l.push({id:y.deviceId,label:y.label});return e(n),[2,l]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(u){for(var g=[],y=0,b=u;y<b.length;y++){var x=b[y];x.kind==="video"&&g.push({id:x.id,label:x.label})}e(g)},l=MediaStreamTrack;l.getSources(r)})},t}(),_n;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(_n||(_n={}));var LH=function(){function t(){this.state=_n.NOT_STARTED,this.onGoingTransactionNewState=_n.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===_n.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=_n.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===_n.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=_n.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==_n.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case _n.UNKNOWN:throw"Transition from unknown is not allowed";case _n.NOT_STARTED:this.failIfNewStateIs(e,[_n.PAUSED]);break;case _n.SCANNING:break;case _n.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,l=n;r<l.length;r++){var u=l[r];if(e===u)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),kH=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===_n.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==_n.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===_n.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===_n.PAUSED},t}(),jH=function(){function t(){}return t.create=function(){return new kH(new LH)},t}(),BH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,l){r.__proto__=l}||function(r,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(r[u]=l[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),as=function(t){BH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Hs),PH=function(){function t(e,n){this.logger=n,this.fps=as.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=as.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?TC.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!hr(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),Yv=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new AC(this.verbose),this.qrcode=new EH(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=jH.create()}return t.prototype.start=function(e,n,r,l){var u=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var g;l?g=l:g=this.verbose?this.logger.log:function(){};var y=PH.create(n,this.logger);this.clearElement();var b=!1;y.videoConstraints&&(y.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var x=b,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:as.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var A=this,N=this.stateManagerProxy.startTransition(_n.SCANNING);return new Promise(function(I,M){var j=x?y.videoConstraints:A.createVideoConstraints(e);if(!j){N.cancel(),M("videoConstraints should be defined");return}var U={};(!x||y.aspectRatio)&&(U.aspectRatio=y.aspectRatio);var z={onRenderSurfaceReady:function(q,B){A.setupUi(q,B,y),A.isScanning=!0,A.foreverScan(y,r,g)}};OH.failIfNotSupported().then(function(q){q.create(j).then(function(B){return B.render(u.element,U,z).then(function(V){A.renderedCamera=V,N.execute(),I(null)}).catch(function(V){N.cancel(),M(V)})}).catch(function(B){N.cancel(),M(fc.errorGettingUserMedia(B))})}).catch(function(q){N.cancel(),M(fc.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(_n.PAUSED),this.showPausedState(),(hr(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(_n.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(_n.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var u=document.getElementById(as.SHADED_REGION_ELEMENT_ID);u&&e.element.removeChild(u)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),r(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),n.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(hr(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,u){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var g=new Image;g.onload=function(){var y=g.width,b=g.height,x=document.getElementById(r.elementId),S=x.clientWidth?x.clientWidth:as.DEFAULT_WIDTH,A=Math.max(x.clientHeight?x.clientHeight:b,as.FILE_SCAN_MIN_HEIGHT),N=r.computeCanvasDrawConfig(y,b,S,A);if(n){var I=r.createCanvasElement(S,A,"qr-canvas-visible");I.style.display="inline-block",x.appendChild(I);var M=I.getContext("2d");if(!M)throw"Unable to get 2d context from canvas";M.canvas.width=S,M.canvas.height=A,M.drawImage(g,0,0,y,b,N.x,N.y,N.width,N.height)}var j=as.FILE_SCAN_HIDDEN_CANVAS_PADDING,U=Math.max(g.width,N.width),z=Math.max(g.height,N.height),q=U+2*j,B=z+2*j,V=r.createCanvasElement(q,B);x.appendChild(V);var H=V.getContext("2d");if(!H)throw"Unable to get 2d context from canvas";H.canvas.width=q,H.canvas.height=B,H.drawImage(g,0,0,y,b,j,j,U,z);try{r.qrcode.decodeRobustlyAsync(V).then(function(J){l(Pv.createFromQrcodeResult(J))}).catch(u)}catch(J){u("QR code parse error, error = ".concat(J))}},g.onerror=u,g.onabort=u,g.onstalled=u,g.onsuspend=u,g.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return DH.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!TC.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[Ye.QR_CODE,Ye.AZTEC,Ye.CODABAR,Ye.CODE_39,Ye.CODE_93,Ye.CODE_128,Ye.DATA_MATRIX,Ye.MAXICODE,Ye.ITF,Ye.EAN_13,Ye.EAN_8,Ye.PDF_417,Ye.RSS_14,Ye.RSS_EXPANDED,Ye.UPC_A,Ye.UPC_E,Ye.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],l=0,u=e.formatsToSupport;l<u.length;l++){var g=u[l];mH(g)?r.push(g):this.logger.warn("Invalid format: ".concat(g," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(hr(e))return!0;if(!hr(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(hr(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return hr(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var l=this,u=r.qrbox;this.validateQrboxConfig(u);var g=this.toQrdimensions(e,n,u),y=function(x){if(x<as.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(as.MIN_QR_BOX_SIZE,"px.")},b=function(x){return x>e&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),x=e),x};y(g.width),y(g.height),g.width=b(g.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var l=hr(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(l);var u=this.toQrdimensions(e,n,l);u.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var g=r.isShadedBoxEnabled()&&u.height<=n,y={x:0,y:0,width:e,height:n},b=g?this.getShadedRegionBounds(e,n,u):y,x=this.createCanvasElement(b.width,b.height),S={willReadFrequently:!0},A=x.getContext("2d",S);A.canvas.width=b.width,A.canvas.height=b.height,this.element.append(x),g&&this.possiblyInsertShadingElement(this.element,e,n,u),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=A,this.canvasElement=x},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=fc.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return e(l.text,Pv.createFromQrcodeResult(l)),r.possiblyUpdateShaders(!0),!0}).catch(function(l){r.possiblyUpdateShaders(!1);var u=fc.codeParseError(l);return n(u,CC.createFrom(u)),!1})},t.prototype.foreverScan=function(e,n,r){var l=this;if(this.shouldScan&&this.renderedCamera){var u=this.renderedCamera.getSurface(),g=u.videoWidth/u.clientWidth,y=u.videoHeight/u.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*g,x=this.qrRegion.height*y,S=this.qrRegion.x*g,A=this.qrRegion.y*y;this.context.drawImage(u,S,A,b,x,0,0,this.qrRegion.width,this.qrRegion.height);var N=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(e,n,r)},l.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(I){!I&&e.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(n,r).finally(function(){N()})):N()}).catch(function(I){l.logger.logError("Error happend while scanning context",I),N()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",l={user:!0,environment:!0},u="exact",g=function(M){if(M in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(M,"'")},y=Object.keys(e);if(y.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(y.length," keys");var b=Object.keys(e)[0];if(b!==n&&b!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(b===n){var x=e.facingMode;if(typeof x=="string"){if(g(x))return{facingMode:x}}else if(typeof x=="object")if(u in x){if(g(x["".concat(u)]))return{facingMode:{exact:x["".concat(u)]}}}else throw"'facingMode' should be string or object with"+" ".concat(u," as key.");else{var S=typeof x;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var A=e.deviceId;if(typeof A=="string")return{deviceId:A};if(typeof A=="object"){if(u in A)return{deviceId:{exact:A["".concat(u)]}};throw"'deviceId' should be string or object with"+" ".concat(u," as key.")}else{var N=typeof A;throw"Invalid type of 'deviceId' = ".concat(N)}}}var I=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(I)},t.prototype.computeCanvasDrawConfig=function(e,n,r,l){if(e<=r&&n<=l){var u=(r-e)/2,g=(l-n)/2;return{x:u,y:g,width:e,height:n}}else{var y=e,b=n;return e>r&&(n=r/e*n,e=r),n>l&&(e=l/n*e,n=l),this.logger.log("Image downsampled from "+"".concat(y,"X").concat(b)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,l)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?as.BORDER_SHADER_MATCH_COLOR:as.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var l=e,u=n,g=document.createElement("canvas");return g.style.width="".concat(l,"px"),g.style.height="".concat(u,"px"),g.style.display="none",g.id=hr(r)?"qr-canvas":r,g},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,l){if(!(n-l.width<1||r-l.height<1)){var u=document.createElement("div");u.style.position="absolute";var g=(n-l.width)/2,y=(r-l.height)/2;if(u.style.borderLeft="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderRight="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderTop="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderBottom="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),u.style.boxSizing="border-box",u.style.top="0px",u.style.bottom="0px",u.style.left="0px",u.style.right="0px",u.id="".concat(as.SHADED_REGION_ELEMENT_ID),n-l.width<11||r-l.height<11)this.hasBorderShaders=!1;else{var b=5,x=40;this.insertShaderBorders(u,x,b,-b,null,0,!0),this.insertShaderBorders(u,x,b,-b,null,0,!1),this.insertShaderBorders(u,x,b,null,-b,0,!0),this.insertShaderBorders(u,x,b,null,-b,0,!1),this.insertShaderBorders(u,b,x+b,-b,null,-b,!0),this.insertShaderBorders(u,b,x+b,null,-b,-b,!0),this.insertShaderBorders(u,b,x+b,-b,null,-b,!1),this.insertShaderBorders(u,b,x+b,null,-b,-b,!1),this.hasBorderShaders=!0}e.append(u)}},t.prototype.insertShaderBorders=function(e,n,r,l,u,g,y){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=as.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(n,"px"),b.style.height="".concat(r,"px"),l!==null&&(b.style.top="".concat(l,"px")),u!==null&&(b.style.bottom="".concat(u,"px")),y?b.style.left="".concat(g,"px"):b.style.right="".concat(g,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),e.appendChild(b)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Hp="data:image/svg+xml;base64,",UH=Hp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",FH=Hp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Xv=Hp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",VH="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Wv=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),HH=function(){function t(){this.data=Wv.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=Wv.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),zH=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Uv.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),l=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(l);var u=document.createElement("a");u.innerText=Uv.reportIssues(),u.href="https://github.com/mebjas/html5-qrcode/issues",u.target="new",u.style.color="white",this.infoDiv.appendChild(u),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),$H=function(){function t(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Xv,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=VH,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Xv,this.infoIcon.style.opacity="0.6")},t}(),GH=function(){function t(){var e=this;this.infoDiv=new zH,this.infoIcon=new $H(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),qH=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(S){try{x(r.next(S))}catch(A){g(A)}}function b(S){try{x(r.throw(S))}catch(A){g(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},YH=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(x){return function(S){return b([x,S])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(S){x=[6,S],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Kv=function(){function t(){}return t.hasPermissions=function(){return qH(this,void 0,void 0,function(){var e,n,r,l;return YH(this,function(u){switch(u.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=u.sent(),n=0,r=e;n<r.length;n++)if(l=r[n],l.kind==="videoinput"&&l.label)return[2,!0];return[2,!1]}})})},t}(),Ba=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var r=n[e];if(t.isCameraScanType(r))return!0}return!1},t.isCameraScanType=function(e){return e===oo.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===oo.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Hs.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Hs.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,l=e;r<l.length;r++){var u=l[r];if(!Hs.DEFAULT_SUPPORTED_SCAN_TYPE.includes(u))throw"Unsupported scan type ".concat(u)}return e},t}(),ls=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),Kr=function(){function t(){}return t.createElement=function(e,n){var r=document.createElement(e);return r.id=n,r.classList.add(ls.ALL_ELEMENT_CLASS),e==="button"&&r.setAttribute("type","button"),r},t}(),NC=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(S){try{x(r.next(S))}catch(A){g(A)}}function b(S){try{x(r.throw(S))}catch(A){g(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},RC=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(x){return function(S){return b([x,S])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(S){x=[6,S],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Zv=function(){function t(e,n,r){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=r}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return NC(this,void 0,void 0,function(){var e,n;return RC(this,function(r){switch(r.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=r.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?en.torchOffButton():en.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(e,n){var r=e?en.torchOnFailedMessage():en.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),XH=function(){function t(e,n){this.onTorchActionFailureCallback=n,this.torchButton=Kr.createElement("button",ls.TORCH_BUTTON_ID),this.torchController=new Zv(e,this,n)}return t.prototype.render=function(e,n){var r=this;this.torchButton.innerText=en.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var l=this;this.torchButton.addEventListener("click",function(u){return NC(r,void 0,void 0,function(){return RC(this,function(g){switch(g.label){case 0:return[4,l.torchController.flipState()];case 1:return g.sent(),l.torchController.isTorchEnabled()?(l.torchButton.classList.remove(ls.TORCH_BUTTON_CLASS_TORCH_OFF),l.torchButton.classList.add(ls.TORCH_BUTTON_CLASS_TORCH_ON)):(l.torchButton.classList.remove(ls.TORCH_BUTTON_CLASS_TORCH_ON),l.torchButton.classList.add(ls.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new Zv(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=en.torchOnButton(),this.torchController.reset()},t.create=function(e,n,r,l){var u=new t(n,l);return u.render(e,r),u},t}(),WH=function(){function t(e,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var l=document.createElement("label");l.setAttribute("for",this.getFileScanInputId()),l.style.display="inline-block",this.fileBasedScanRegion.appendChild(l),this.fileSelectionButton=Kr.createElement("button",ls.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(y){l.click()}),l.append(this.fileSelectionButton),this.fileScanInput=Kr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",l.appendChild(this.fileScanInput);var u=this;this.fileScanInput.addEventListener("change",function(y){if(!(y==null||y.target==null)){var b=y.target;if(!(b.files&&b.files.length===0)){var x=b.files,S=x[0],A=S.name;u.setImageNameToButton(A),r(S)}}});var g=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(g),this.fileBasedScanRegion.addEventListener("dragenter",function(y){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionActiveBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(y){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionDefaultBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(y){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionActiveBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(y){y.stopPropagation(),y.preventDefault(),u.fileBasedScanRegion.style.border=u.fileBasedScanRegionDefaultBorder();var b=y.dataTransfer;if(b){var x=b.files;if(!x||x.length===0)return;for(var S=!1,A=0;A<x.length;++A){var N=x.item(A);if(N){var I=/image.*/;if(N.type.match(I)){S=!0;var M=N.name;u.setImageNameToButton(M),r(N),g.innerText=en.dragAndDropMessage();break}}}S||(g.innerText=en.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=en.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var r=e.substring(0,8),l=e.length,u=e.substring(l-8,l);e="".concat(r,"....").concat(u)}var g=en.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=g},t.prototype.setInitialValueToButton=function(){var e=en.fileSelectionChooseImage()+" - "+en.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,r){var l=new t(e,n,r);return l},t}(),KH=function(){function t(e){this.selectElement=Kr.createElement("select",ls.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var l=en.selectCamera();n.innerText="".concat(l," (").concat(this.cameras.length,")  ")}for(var u=1,g=0,y=this.cameras;g<y.length;g++){var b=y[g],x=b.id,S=b.label==null?x:b.label;(!S||S==="")&&(S=[en.anonymousCameraPrefix(),u++].join(" "));var A=document.createElement("option");A.value=x,A.innerText=S,this.options.push(A),this.selectElement.appendChild(A)}n.appendChild(this.selectElement),e.appendChild(n)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var n=0,r=this.options;n<r.length;n++){var l=r[n];if(l.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var r=new t(n);return r.render(e),r},t}(),ZH=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Kr.createElement("input",ls.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=en.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var l=this;this.rangeInput.addEventListener("input",function(){return l.onValueChange()}),this.rangeInput.addEventListener("change",function(){return l.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=en.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,n,r,l){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=l.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var r=new t;return r.render(e,n),r},t}(),os;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(os||(os={}));function QH(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function JH(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var ez=function(){function t(e,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Ba(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new AC(this.verbose),this.persistedDataManager=new HH,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(u,g){if(e)e(u,g);else{if(r.lastMatchFound===u)return;r.lastMatchFound=u,r.setHeaderMessage(en.lastMatch(u),os.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(u,g){n&&n(u,g)};var l=document.getElementById(this.elementId);if(!l)throw"HTML Element with id=".concat(this.elementId," not found");l.innerHTML="",this.createBasicLayout(l),this.html5Qrcode=new Yv(this.getScanRegionId(),JH(this.config,this.verbose))},t.prototype.pause=function(e){(hr(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,n=function(){var r=document.getElementById(e.elementId);r&&(r.innerHTML="",e.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,l){if(!e.html5Qrcode){r();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(u){if(!e.html5Qrcode){r();return}e.html5Qrcode.clear(),n(),r()}).catch(function(u){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",u),l(u)}):(e.html5Qrcode.clear(),n(),r())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Hs.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Hs.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Hs.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Hs.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Hs.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Hs.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Hs.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),Ba.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var l=document.createElement("div"),u=this.getDashboardId();l.id=u,l.style.width="100%",e.appendChild(l),this.setupInitialDashboard(l)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var r=new GH;r.renderInto(n);var l=document.createElement("div");l.id=this.getHeaderMessageContainerId(),l.style.display="none",l.style.textAlign="center",l.style.fontSize="14px",l.style.padding="2px 10px",l.style.margin="4px",l.style.borderTop="1px solid #f6f6f6",n.appendChild(l)},t.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},t.prototype.createCameraListUi=function(e,n,r){var l=this;l.showHideScanTypeSwapLink(!1),l.setHeaderMessage(en.cameraPermissionRequesting());var u=function(){r||l.createPermissionButton(e,n)};Yv.getCameras().then(function(g){l.persistedDataManager.setHasPermission(!0),l.showHideScanTypeSwapLink(!0),l.resetHeaderMessage(),g&&g.length>0?(e.removeChild(n),l.renderCameraSelection(g)):(l.setHeaderMessage(en.noCameraFound(),os.STATUS_WARNING),u())}).catch(function(g){l.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:u(),l.setHeaderMessage(g,os.STATUS_WARNING),l.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,n){var r=this,l=Kr.createElement("button",this.getCameraPermissionButtonId());l.innerText=en.cameraPermissionTitle(),l.addEventListener("click",function(){l.disabled=!0,r.createCameraListUi(e,n,l)}),n.appendChild(l)},t.prototype.createPermissionsUi=function(e,n){var r=this;if(Ba.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Kv.hasPermissions().then(function(l){l?r.createCameraListUi(e,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n))}).catch(function(l){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Ba.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var l=document.createElement("div");l.style.textAlign="center",r.appendChild(l),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,l),this.renderFileScanUi(n)},t.prototype.renderFileScanUi=function(e){var n=Ba.isFileScanType(this.currentScanType),r=this,l=function(u){if(!r.html5Qrcode)throw"html5Qrcode not defined";Ba.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(en.loadingImage()),r.html5Qrcode.scanFileV2(u,!0).then(function(g){r.resetHeaderMessage(),r.qrCodeSuccessCallback(g.decodedText,g)}).catch(function(g){r.setHeaderMessage(g,os.STATUS_WARNING),r.qrCodeErrorCallback(g,CC.createFrom(g))}))};this.fileSelectionUi=WH.create(e,n,l)},t.prototype.renderCameraSelection=function(e){var n=this,r=this,l=document.getElementById(this.getDashboardSectionCameraScanRegionId());l.style.textAlign="center";var u=ZH.create(l,!1),g=function(j){var U=j.zoomFeature();if(U.isSupported()){u.setOnCameraZoomValueChangeCallback(function(q){U.apply(q)});var z=1;n.config.defaultZoomValueIfSupported&&(z=n.config.defaultZoomValueIfSupported),z=pH(z,U.min(),U.max()),u.setValues(U.min(),U.max(),z,U.step()),u.show()}},y=KH.create(l,e),b=document.createElement("span"),x=Kr.createElement("button",ls.CAMERA_START_BUTTON_ID);x.innerText=en.scanButtonStartScanningText(),b.appendChild(x);var S=Kr.createElement("button",ls.CAMERA_STOP_BUTTON_ID);S.innerText=en.scanButtonStopScanningText(),S.style.display="none",S.disabled=!0,b.appendChild(S);var A,N=function(j){if(!j.torchFeature().isSupported()){A&&A.hide();return}A?A.updateTorchCapability(j.torchFeature()):A=XH.create(b,j.torchFeature(),{display:"none",marginLeft:"5px"},function(U){r.setHeaderMessage(U,os.STATUS_WARNING)}),A.show()};l.appendChild(b);var I=function(j){j||(x.style.display="none"),x.innerText=en.scanButtonStartScanningText(),x.style.opacity="1",x.disabled=!1,j&&(x.style.display="inline-block")};if(x.addEventListener("click",function(j){x.innerText=en.scanButtonScanningStarting(),y.disable(),x.disabled=!0,x.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var U=y.getValue();r.persistedDataManager.setLastUsedCameraId(U),r.html5Qrcode.start(U,QH(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(z){S.disabled=!1,S.style.display="inline-block",I(!1);var q=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&N(q),n.config.showZoomSliderIfSupported===!0&&g(q)}).catch(function(z){r.showHideScanTypeSwapLink(!0),y.enable(),I(!0),r.setHeaderMessage(z,os.STATUS_WARNING)})}),y.hasSingleItem()&&x.click(),S.addEventListener("click",function(j){if(!r.html5Qrcode)throw"html5Qrcode not defined";S.disabled=!0,r.html5Qrcode.stop().then(function(U){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),y.enable(),x.disabled=!1,S.style.display="none",x.style.display="inline-block",A&&(A.reset(),A.hide()),u.removeOnCameraZoomValueChangeCallback(),u.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(U){S.disabled=!1,r.setHeaderMessage(U,os.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var M=r.persistedDataManager.getLastUsedCameraId();y.hasValue(M)?(y.setValue(M),x.click()):r.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,n=en.textIfCameraScanSelected(),r=en.textIfFileScanSelected(),l=document.getElementById(this.getDashboardSectionId()),u=document.createElement("div");u.style.textAlign="center";var g=Kr.createElement("span",this.getDashboardSectionSwapLinkId());g.style.textDecoration="underline",g.style.cursor="pointer",g.innerText=Ba.isCameraScanType(this.currentScanType)?n:r,g.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Ba.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),g.innerText=r,e.currentScanType=oo.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),g.innerText=n,e.currentScanType=oo.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),u.appendChild(g),l.appendChild(u)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Kv.hasPermissions().then(function(r){if(r){var l=document.getElementById(n.getCameraPermissionButtonId());if(!l)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";l.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,n){n||(n=os.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=e,r.style.display="block",n){case os.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case os.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case os.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=UH,this.cameraScanImage.alt=en.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=FH,this.fileScanImage.alt=en.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return ls.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return ls.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();function Qv({onScan:t,onClose:e}){const{t:n}=Bn(),r=R.useRef(`qr-reader-${Math.random().toString(36).substr(2,9)}`),l=R.useRef(null),[u,g]=R.useState(!1);R.useEffect(()=>{g(!1);const b={fps:10,qrbox:250,rememberLastUsedCamera:!0},x=new ez(r.current,b,!1);l.current=x;const S=N=>{u||(g(!0),x.clear().catch(()=>{}).finally(()=>{t(N)}))},A=N=>{`${N}`.includes("No MultiFormat Readers")||console.error("QR scan error:",N)};return x.render(S,A),()=>{var N;(N=l.current)==null||N.clear().catch(()=>{})}},[t,u]);const y=()=>{var b;g(!1),(b=l.current)==null||b.clear().catch(()=>{}).then(()=>{l.current&&l.current.render(x=>{u||(g(!0),l.current.clear().catch(()=>{}).finally(()=>t(x)))},x=>{`${x}`.includes("No MultiFormat Readers")||console.error("QR scan error:",x)})})};return E.jsx(qi.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",damping:20},className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:E.jsxs(qi.div,{initial:{y:-20},animate:{y:0},exit:{y:20},className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-sm",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("h3",{className:"text-lg font-bold",children:n("scanStudentQr")}),E.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-800",children:""})]}),E.jsx("div",{id:r.current,style:{width:"100%",height:"300px"},className:"mb-4 bg-gray-50"}),E.jsxs("div",{className:"flex justify-between gap-2",children:[u&&E.jsx("button",{onClick:y,className:"flex-1 px-4 py-2 bg-blue-100 hover:bg-blue-200 rounded-lg",children:n("scanAnother")}),E.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg",children:n("cancel")})]})]})})}const Jv=["bg-pink-300","bg-orange-300","bg-yellow-300","bg-lime-300","bg-emerald-300","bg-cyan-300","bg-purple-300","bg-rose-300"],Mg="#f6f6f6",js="#6654b3",rc=()=>new Date().toISOString().slice(0,10);let Yu=null,Xu=null;try{Yu=new Audio("ding.wav"),Xu=new Audio("wrongbeep.wav")}catch{}const Dg=()=>{try{Yu&&(Yu.pause(),Yu.currentTime=0,Yu.play())}catch{}},ch=()=>{try{Xu&&(Xu.pause(),Xu.currentTime=0,Xu.play())}catch{}};function tz(t){if(!t||typeof t!="object")return{};if(typeof t=="string")try{t=JSON.parse(t)}catch{return{}}const e={};for(const[n,r]of Object.entries(t))typeof r=="object"&&r!==null&&"limit"in r&&"used"in r?e[n]={used:Number(r.used)||0,limit:Number(r.limit)||0}:typeof r=="number"&&(e[n]={used:0,limit:r});return e}function nz(t,e){if(!t||!e)return!1;let n=t.purchased_packages;if(typeof n=="string")try{n=JSON.parse(n)}catch{n=null}return Array.isArray(n)?n.some(r=>r&&r.course_id===e):!1}function iz(t,e){var n;return!t||!e?!1:!!(t.courses&&typeof t.courses=="object"&&t.courses[e]||t.course_limits&&((n=t.course_limits[e])==null?void 0:n.limit)>0||nz(t,e))}function sz(){const{t}=Bn(),e=_s(),[n,r]=R.useState(null),[l,u]=R.useState(!1),[g,y]=R.useState(!1),[b,x]=R.useState(null),[S,A]=R.useState(null);R.useEffect(()=>{if(!b)return;const Z=setTimeout(()=>x(null),4e3);return()=>clearTimeout(Z)},[b]);const[N,I]=R.useState(!0),[M,j]=R.useState(!0),[U,z]=R.useState(""),[q,B]=R.useState([]),[V,H]=R.useState([]),[J,X]=R.useState([]);R.useEffect(()=>{(async()=>{const{data:Z}=await Be.from("courses").select("id,name").order("name");B(Z||[]),I(!1);const[ce,se]=await Promise.all([Be.from("students").select("id,first_name,last_name,courses,course_limits,qr_code_url,purchased_packages"),Be.from("attendance").select("*").gte("attended_at_ts",rc())]);H((ce.data||[]).map(Ne=>({...Ne,course_limits:tz(Ne.course_limits)}))),X(se.data||[]),j(!1)})()},[]);const oe=J.filter(Z=>Z.approved_by),Y=R.useMemo(()=>{const Z={};return oe.forEach(ce=>{var se;ce.course_id&&(Z[se=ce.student_id]??(Z[se]={}),Z[ce.student_id][ce.course_id]=(Z[ce.student_id][ce.course_id]||0)+1)}),Z},[oe]),be=R.useMemo(()=>{const Z={};return oe.forEach(ce=>{var se;ce.course_id&&ce.attended_at_ts.slice(0,10)===rc()&&(Z[se=ce.course_id]??(Z[se]=new Set),Z[ce.course_id].add(ce.student_id))}),Z},[oe]),Ae=J.filter(Z=>!Z.approved_by),Ee=(Z,ce)=>{var se,Ne;return((Ne=(se=Z.course_limits)==null?void 0:se[ce])==null?void 0:Ne.used)||0},de=(Z,ce,se)=>{var Ne;return Ee(se,ce)+(((Ne=Y[Z])==null?void 0:Ne[ce])||0)},Oe=(Z,ce)=>{var se,Ne;return((Ne=(se=Z.course_limits)==null?void 0:se[ce])==null?void 0:Ne.limit)||0},re=(Z,ce)=>{var se;return(se=be[ce])==null?void 0:se.has(Z)};async function ie(Z){await Be.from("attendance").delete().eq("id",Z.id),X(ce=>ce.filter(se=>se.id!==Z.id))}async function le(Z,ce){const se=`${Z.id}|${ce}`;if(U===se)return;z(se);const{data:{user:Ne}}=await Be.auth.getUser(),We=Ne==null?void 0:Ne.id;try{if(re(Z.id,ce)){const Se=J.find(ht=>ht.student_id===Z.id&&ht.course_id===ce&&ht.attended_at_ts.slice(0,10)===rc());Se&&(await Be.from("attendance").delete().eq("id",Se.id),X(ht=>ht.filter(ve=>ve.id!==Se.id))),x({message:t("uncheckedStudent",{first:Z.first_name,last:Z.last_name}),type:"error"})}else{if(Oe(Z,ce)&&de(Z.id,ce,Z)>=Oe(Z,ce)){x({message:t("overLimit",{first:Z.first_name,last:Z.last_name}),type:"error"}),ch();return}const{data:Se,error:ht}=await Be.from("attendance").insert({student_id:Z.id,course_id:ce,attended_at_ts:rc(),approved_by:We}).select();if(ht)throw ht;X(ve=>[...ve,Se[0]]),x({message:t("checkedInStudent",{first:Z.first_name,last:Z.last_name}),type:"success"}),Dg()}}finally{z(""),y(!1)}}async function De(Z){const ce=Z.trim(),se=V.find(Se=>Se.id===ce);if(y(!1),!se){ch(),x({message:t("unknownCode"),type:"error"});return}if(J.some(Se=>Se.student_id===ce&&Se.attended_at_ts.slice(0,10)===rc())){ch(),x({message:t("alreadyScanned",{first:se.first_name,last:se.last_name}),type:"error"});return}const{data:Ne,error:We}=await Be.from("attendance").insert({student_id:ce,course_id:null,attended_at_ts:rc()}).select();We?(ch(),x({message:t("scanFailed"),type:"error"})):(X(Se=>[...Se,Ne[0]]),Dg(),x({message:t("pendingStudent",{first:se.first_name,last:se.last_name}),type:"success"}))}async function $e(Z,ce){if(!ce.length)return;const{data:{user:se}}=await Be.auth.getUser(),Ne=se==null?void 0:se.id,We=V.find(Se=>Se.id===Z.student_id);if(await Be.from("attendance").update({course_id:ce[0],approved_by:Ne}).eq("id",Z.id),ce.length>1){const Se=ce.slice(1).map(ht=>({student_id:Z.student_id,course_id:ht,attended_at_ts:Z.attended_at_ts,approved_by:Ne}));await Be.from("attendance").insert(Se)}X(Se=>{const ht=Se.filter(at=>at.id!==Z.id),ve={...Z,course_id:ce[0],approved_by:Ne},He=[...ht,ve];return ce.length>1&&ce.slice(1).forEach(at=>He.push({...Z,id:crypto.randomUUID(),course_id:at,approved_by:Ne})),He}),Dg(),x({message:t("checkedInStudent",{first:We.first_name,last:We.last_name}),type:"success"})}const W=E.jsx(Bu,{children:b&&E.jsxs(qi.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",stiffness:300},className:`fixed bottom-4 left-1/2 transform -translate-x-1/2 
                      max-w-md w-full px-4 py-3 rounded-xl shadow-lg flex 
                      justify-between items-center z-50 ${b.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[E.jsx("span",{children:b.message}),E.jsx("button",{onClick:()=>x(null),className:"text-xl font-bold leading-none",children:""})]},"banner")});return l?M?E.jsx("div",{className:"p-6 text-center",children:t("loadingPending")}):E.jsxs(E.Fragment,{children:[W,E.jsxs("main",{style:{background:Mg},className:"min-h-screen p-6",children:[E.jsxs("header",{className:"flex items-center gap-4 mb-4",children:[E.jsx("button",{onClick:()=>u(!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 shadow",children:E.jsx(Th,{className:"w-6 h-6 text-gray-700"})}),E.jsx("h2",{className:"text-2xl font-bold",style:{color:js},children:t("pendingCheckins")})]}),Ae.length===0?E.jsx("p",{className:"text-gray-500",children:t("noPendingCheckins")}):Ae.map(Z=>{const ce=V.find(se=>se.id===Z.student_id);return ce?E.jsx(rz,{row:Z,student:ce,courses:q,onApprove:$e,onDelete:ie},Z.id):null})]})]}):E.jsxs("div",{style:{background:Mg},className:"min-h-screen",children:[W,E.jsx(Bu,{mode:"wait",children:n==null?E.jsxs("main",{className:"min-h-screen p-6 flex flex-col items-center gap-8",style:{background:Mg},children:[E.jsxs("div",{className:"w-full max-w-5xl flex justify-between items-center mb-6",children:[E.jsx("h1",{className:"text-3xl font-extrabold",style:{color:js},children:t("takeAttendance")}),E.jsxs("div",{className:"flex gap-3",children:[E.jsxs("button",{onClick:()=>u(!0),className:"relative p-2 bg-yellow-400 text-white rounded-full shadow",children:[E.jsx($9,{className:"w-5 h-5"}),Ae.length>0&&E.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-[10px] px-1 rounded-full",children:Ae.length})]}),E.jsx(qi.button,{whileTap:{scale:.92},onClick:()=>y(!0),className:"p-2",style:{background:js,color:"#fff",borderRadius:"9999px",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.12)"},children:E.jsx(nw,{className:"w-6 h-6"})})]})]}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-7 w-full max-w-4xl",children:N?Array(6).fill(0).map((Z,ce)=>E.jsx(qi.div,{initial:{opacity:.3},animate:{opacity:1},className:"w-32 h-32 bg-gray-200 rounded-2xl"},ce)):q.map((Z,ce)=>E.jsx(qi.button,{whileHover:{scale:1.06},whileTap:{scale:.95},onClick:()=>r(Z),className:`${Jv[ce%Jv.length]} w-32 h-32 md:w-40 md:h-40 rounded-2xl shadow-lg
                                 flex items-center justify-center text-white font-bold text-lg transition-all duration-150`,style:{boxShadow:"0 3px 16px 0 rgba(102,84,179,0.06)"},children:Z.name},Z.id))}),E.jsx(Bu,{children:g&&E.jsx(Qv,{onScan:De,onClose:()=>y(!1)},"scanner-grid")})]}):M?E.jsx("div",{className:"p-6 text-center",children:t("loadingStudents")}):E.jsxs(qi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-6 space-y-6",children:[E.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[E.jsx("button",{onClick:()=>r(null),className:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 shadow",children:E.jsx(Th,{className:"w-6 h-6 text-gray-700"})}),E.jsx("h2",{className:"text-2xl font-bold",style:{color:js},children:n.name}),E.jsx(qi.button,{whileTap:{scale:.92},onClick:()=>y(!0),className:"ml-auto p-2",style:{background:js,color:"#fff",borderRadius:"9999px",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.12)"},children:E.jsx(nw,{className:"w-6 h-6"})})]}),E.jsxs("table",{className:"min-w-full bg-white rounded-xl shadow",style:{boxShadow:"0 2px 12px 0 rgba(102,84,179,0.05)"},children:[E.jsx("thead",{style:{background:"#ede9fe"},children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-3 py-2 text-left font-semibold",style:{color:js},children:t("student")}),E.jsx("th",{className:"px-3 py-2 font-semibold",style:{color:js},children:t("slots")}),E.jsx("th",{className:"px-3 py-2 font-semibold",style:{color:js},children:t("usedLimit")}),E.jsx("th",{className:"px-3 py-2 font-semibold",style:{color:js},children:t("check")}),E.jsx("th",{className:"px-3 py-2 font-semibold",style:{color:js},children:"QR"})]})}),E.jsx("tbody",{children:V.filter(Z=>iz(Z,n.id)).map(Z=>{const ce=de(Z.id,n.id,Z),se=Oe(Z,n.id);se>0||t("unlimited");const Ne=re(Z.id,n.id),We=U===`${Z.id}|${n.id}`;return E.jsxs(qi.tr,{whileHover:{backgroundColor:"#f3f4f6"},className:"border-t transition",children:[E.jsxs("td",{onClick:()=>e(`/myschool/student/${Z.id}`),className:"px-3 py-1 text-blue-700 font-semibold hover:underline cursor-pointer",children:[Z.first_name," ",Z.last_name]}),E.jsx("td",{className:"px-3 py-1 text-gray-700",children:Z.courses&&Z.courses[n.id]?Object.entries(Z.courses[n.id]).flatMap(([Se,ht])=>ht.map(ve=>`${Se} ${ve}`)).join(", "):""}),E.jsxs("td",{className:"px-3 py-1 text-center",children:[ce,"/",se]}),E.jsx("td",{className:"px-3 py-1 text-center",children:E.jsx(qi.button,{whileTap:{scale:.82},disabled:We,onClick:()=>le(Z,n.id),className:`w-9 h-9 rounded-full transition font-bold ${Ne?"bg-green-500 text-white":se>0&&ce>=se?"bg-gray-200 text-gray-400":"bg-gray-300 text-gray-700 hover:bg-gray-400"}`,children:""})}),E.jsx("td",{className:"px-3 py-1 text-center",children:E.jsx("button",{onClick:()=>A(Z.qr_code_url),disabled:!Z.qr_code_url,className:"px-3 py-1 bg-purple-100 hover:bg-purple-200 rounded-full text-xs text-[#6654b3] font-bold disabled:opacity-50",children:"QR"})})]},Z.id)})})]}),E.jsx(Bu,{children:g&&E.jsx(Qv,{onScan:Z=>{const ce=Z.trim(),se=V.find(Ne=>Ne.id===ce);se&&le(se,n.id)},onClose:()=>y(!1)},"scanner-detail")})]},"detail")}),E.jsx(Bu,{children:S&&E.jsx(qi.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20},className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:E.jsxs(qi.div,{initial:{y:-20},animate:{y:0},exit:{y:20},className:"bg-white p-6 rounded-xl shadow-lg text-center",children:[E.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:js},children:t("studentQrCode")}),E.jsx("img",{src:S,alt:"QR",className:"mx-auto max-w-xs mb-4"}),E.jsxs("div",{className:"flex justify-center gap-4",children:[E.jsx("a",{href:S,download:!0,className:"px-4 py-2 bg-blue-100 hover:bg-blue-200 rounded-lg",children:t("download")}),E.jsx("button",{onClick:()=>{const Z=window.open("");Z&&(Z.document.write(`<img src="${S}" onload="window.print();window.close()" />`),Z.document.close())},className:"px-4 py-2 bg-green-100 hover:bg-green-200 rounded-lg",children:t("print")}),E.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg",children:t("close")})]})]})},"qrModal")})]})}function rz({row:t,student:e,courses:n,onApprove:r,onDelete:l}){const{t:u}=Bn(),[g,y]=R.useState([]),b=Object.keys(e.courses||{});return E.jsxs(qi.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},exit:{opacity:0,y:16},className:"border border-gray-100 bg-white p-4 mb-4 rounded-2xl shadow",style:{boxShadow:"0 2px 10px 0 rgba(102,84,179,0.04)"},children:[E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[E.jsxs("h3",{className:"font-semibold text-[#6654b3]",children:[e.first_name," ",e.last_name]}),E.jsx("button",{onClick:()=>l(t),className:"text-gray-400 hover:text-red-500 text-lg px-2 font-bold",children:""})]}),E.jsx("div",{className:"flex flex-wrap gap-3 mb-3",children:b.map(x=>{var S;return E.jsxs("label",{className:"inline-flex items-center gap-2 px-2 py-1 rounded-lg bg-[#ede9fe] text-[#6654b3] font-semibold cursor-pointer",children:[E.jsx("input",{type:"checkbox",checked:g.includes(x),onChange:A=>y(N=>A.target.checked?[...N,x]:N.filter(I=>I!==x)),className:"accent-[#6654b3]"}),(S=n.find(A=>A.id===x))==null?void 0:S.name]},x)})}),E.jsx("button",{disabled:!g.length,onClick:()=>r(t,g),className:"px-5 py-2 bg-green-600 hover:bg-green-700 text-white rounded-full font-bold disabled:opacity-50 transition",children:u("approve")})]})}function az(){const{t}=Bn();return E.jsx("div",{className:"text-2xl font-bold",children:t("billingComingSoon")},Qn.language)}function oz(){return E.jsx("div",{className:"text-2xl font-bold",children:"Reports Page (coming soon)"})}function lz(){const{t}=Bn();return E.jsx("div",{className:"text-2xl font-bold",children:t("Messaging Page (coming soon)")},Qn.language)}const cz="#f6f6f6";function uz(){const{t}=Bn(),{user:e}=_d(),n=(e==null?void 0:e.role)==="admin",[r,l]=R.useState([]),[u,g]=R.useState(!1),[y,b]=R.useState(null),[x,S]=R.useState(!1),[A,N]=R.useState(""),[I,M]=R.useState(""),[j,U]=R.useState(""),[z,q]=R.useState("staff"),[B,V]=R.useState(!1),[H,J]=R.useState(null),[X,oe]=R.useState(!1);R.useEffect(()=>{Y()},[]);async function Y(){g(!0),b(null);const{data:de,error:Oe}=await Be.from("profiles").select("*").order("role",{ascending:!1});if(Oe)b(Oe.message);else{const re=de;l(n?re:re.filter(ie=>ie.id===(e==null?void 0:e.id)))}g(!1)}async function be(de){var De;de.preventDefault(),V(!0),b(null);const{data:Oe,error:re}=await Be.auth.admin.createUser({email:A.trim().toLowerCase(),password:j,email_confirm:!0});if(re){b(re.message),V(!1);return}const ie=(De=Oe.user)==null?void 0:De.id;if(!ie){b(t("noUserIdError")),V(!1);return}const{error:le}=await Be.from("profiles").insert([{id:ie,email:A.trim().toLowerCase(),full_name:I.trim()||null,role:z}]);le?b(le.message):(N(""),M(""),U(""),q("staff"),Y()),V(!1)}async function Ae(){if(!H)return;oe(!0);const{error:de}=await Be.from("profiles").update({full_name:H.full_name,role:H.role}).eq("id",H.id);de?alert(de.message):(J(null),Y()),oe(!1)}async function Ee(de){de.role!=="admin"&&window.confirm(t("confirmRemoveStaff"))&&(await Be.from("profiles").delete().eq("id",de.id),Y())}return E.jsxs("div",{className:"py-8 px-2 min-h-screen",style:{background:cz},children:[E.jsxs("div",{className:"max-w-5xl mx-auto flex justify-between items-center mb-8",children:[E.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-[#6654b3]",children:t("settingsTitle")}),n&&E.jsx("button",{onClick:()=>S(de=>!de),className:"flex items-center gap-2 bg-[#6654b3] hover:bg-[#5542a0] text-white px-5 py-2 rounded-full transition font-semibold shadow",children:x?E.jsxs(E.Fragment,{children:[E.jsx(dS,{className:"w-5 h-5"}),t("closeInvite")]}):E.jsxs(E.Fragment,{children:[E.jsx(iL,{className:"w-5 h-5"}),t("inviteUser")]})})]}),x&&n&&E.jsxs("div",{className:"bg-white shadow rounded-2xl p-6 max-w-xl mx-auto mb-8 border border-purple-100",children:[y&&E.jsx("p",{className:"text-red-600 mb-3",children:y}),E.jsxs("form",{onSubmit:be,className:"grid gap-4 sm:grid-cols-2",children:[E.jsx("input",{type:"email",required:!0,placeholder:t("email"),value:A,onChange:de=>N(de.target.value),className:"border rounded px-3 py-2",autoFocus:!0}),E.jsx("input",{type:"text",required:!0,placeholder:t("fullName"),value:I,onChange:de=>M(de.target.value),className:"border rounded px-3 py-2"}),E.jsx("input",{type:"password",required:!0,placeholder:t("tempPassword"),value:j,onChange:de=>U(de.target.value),className:"border rounded px-3 py-2"}),E.jsxs("select",{value:z,onChange:de=>q(de.target.value),className:"border rounded px-3 py-2",children:[E.jsx("option",{value:"staff",children:t("roleStaff")}),E.jsx("option",{value:"admin",children:t("roleAdmin")})]}),E.jsx("div",{className:"sm:col-span-2 flex justify-end mt-2",children:E.jsx("button",{disabled:B,className:"bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-full font-bold transition disabled:opacity-60",children:t(B?"inviting":"sendInvite")})})]})]}),E.jsxs("div",{className:"max-w-5xl mx-auto",children:[E.jsx("h2",{className:"text-2xl font-bold text-[#6654b3] mb-5",children:t("teamMembers")}),u?E.jsx("p",{children:t("loading")}):r.length===0?E.jsx("p",{className:"text-gray-500",children:t("noUsers")}):E.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:r.map(de=>E.jsxs("div",{className:"bg-white rounded-2xl border border-purple-100 shadow p-6 flex flex-col justify-between",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-bold text-[#6654b3]",children:de.full_name??""}),E.jsx("p",{className:"text-sm text-gray-500 mt-1",children:de.email}),E.jsx("span",{className:"inline-block mt-2 text-xs font-medium bg-[#f6f6f6] px-3 py-1 rounded-full text-[#6654b3] border border-purple-100",children:t("role_"+de.role)})]}),E.jsxs("div",{className:"mt-6 flex gap-2",children:[E.jsxs("button",{onClick:()=>n&&J(de),disabled:!n,className:`flex-1 flex items-center justify-center gap-1 border rounded-full py-2 transition font-semibold
                      ${n?"border-purple-200 hover:bg-[#f6f6f6]":"opacity-50 cursor-not-allowed"}`,children:[E.jsx(tL,{className:"w-5 h-5"}),t("edit")]}),n&&de.role==="staff"&&E.jsxs("button",{onClick:()=>Ee(de),className:"flex-1 flex items-center justify-center gap-1 border border-red-200 text-red-600 rounded-full py-2 hover:bg-red-50 font-semibold",children:[E.jsx(aL,{className:"w-5 h-5"}),t("delete")]})]})]},de.id))})]}),H&&E.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md space-y-4 border border-purple-100",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3]",children:t("editUser")}),E.jsxs("label",{className:"block text-sm font-semibold text-[#6654b3]",children:[t("fullName"),E.jsx("input",{value:H.full_name??"",onChange:de=>J({...H,full_name:de.target.value}),className:"w-full border rounded px-3 py-2 mt-1"})]}),E.jsxs("label",{className:"block text-sm font-semibold text-[#6654b3]",children:[t("emailReadOnly"),E.jsx("input",{value:H.email??"",disabled:!0,className:"w-full border rounded px-3 py-2 mt-1 bg-gray-100"})]}),(e==null?void 0:e.id)!==H.id&&E.jsxs("label",{className:"block text-sm font-semibold text-[#6654b3]",children:[t("role"),E.jsxs("select",{value:H.role,onChange:de=>J({...H,role:de.target.value}),className:"w-full border rounded px-3 py-2 mt-1",children:[E.jsx("option",{value:"staff",children:t("roleStaff")}),E.jsx("option",{value:"admin",children:t("roleAdmin")})]})]}),E.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[E.jsx("button",{onClick:()=>J(null),className:"px-4 py-2 rounded-full border border-purple-200 hover:bg-[#f6f6f6] text-[#6654b3] font-semibold",children:t("cancel")}),E.jsx("button",{onClick:Ae,disabled:X,className:"bg-[#6654b3] text-white px-4 py-2 rounded-full font-semibold disabled:opacity-50",children:t(X?"saving":"save")})]})]})})]})}const dz=new oM;function fz(){return E.jsx(fM,{client:dz,children:E.jsx(kI,{children:E.jsxs(dI,{children:[E.jsx(kn,{path:"/login",element:E.jsx(T9,{})}),E.jsxs(kn,{element:E.jsx(pL,{children:E.jsx(mL,{})}),children:[E.jsx(kn,{path:"/dashboard",element:E.jsx(IV,{})}),E.jsx(kn,{path:"/myschool/students",element:E.jsx(GV,{})}),E.jsx(kn,{path:"/myschool/student/:id",element:E.jsx(sH,{})}),E.jsx(kn,{path:"/students/add-existing",element:E.jsx(dH,{})}),E.jsx(kn,{path:"/admissions",element:E.jsx(kv,{})}),E.jsx(kn,{path:"/apply/:token",element:E.jsx(kv,{publicMode:!0})}),E.jsx(kn,{path:"/attendance",element:E.jsx(sz,{})}),E.jsx(kn,{path:"/billing",element:E.jsx(az,{})}),E.jsx(kn,{path:"/reports",element:E.jsx(oz,{})}),E.jsx(kn,{path:"/messaging",element:E.jsx(lz,{})}),E.jsx(kn,{path:"/settings",element:E.jsx(uz,{})}),E.jsx(kn,{path:"/review",element:E.jsx(yw,{})}),E.jsx(kn,{path:"/myschool/courses",element:E.jsx(PV,{})}),E.jsx(kn,{path:"/myschool/students/inactive",element:E.jsx(lH,{})}),E.jsx(kn,{path:"/notifications",element:E.jsx(DV,{})}),E.jsx(kn,{path:"/review-hub",element:E.jsx(yw,{})}),E.jsx(kn,{index:!0,element:E.jsx(pb,{to:"/dashboard",replace:!0})})]}),E.jsx(kn,{path:"*",element:E.jsx(pb,{to:"/login",replace:!0})})]})})})}pO.createRoot(document.getElementById("root")).render(E.jsx(R.StrictMode,{children:E.jsx(hL,{children:E.jsx(fz,{})})}));
