var L2=t=>{throw TypeError(t)};var Y1=(t,e,n)=>e.has(t)||L2("Cannot "+n);var J=(t,e,n)=>(Y1(t,e,"read from private field"),n?n.call(t):e.get(t)),st=(t,e,n)=>e.has(t)?L2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),He=(t,e,n,r)=>(Y1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Nt=(t,e,n)=>(Y1(t,e,"access private method"),n);var Hd=(t,e,n,r)=>({set _(l){He(t,e,l,n)},get _(){return J(t,e,r)}});function d3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const l in r)if(l!=="default"&&!(l in t)){const u=Object.getOwnPropertyDescriptor(r,l);u&&Object.defineProperty(t,l,u.get?u:{enumerable:!0,get:()=>r[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const g of u.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&r(g)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var $d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function WA(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var l=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,l.get?l:{enumerable:!0,get:function(){return t[r]}})}),n}var X1={exports:{}},Ou={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k2;function KA(){if(k2)return Ou;k2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,u){var g=null;if(u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),"key"in l){u={};for(var y in l)y!=="key"&&(u[y]=l[y])}else u=l;return l=u.ref,{$$typeof:t,type:r,key:g,ref:l!==void 0?l:null,props:u}}return Ou.Fragment=e,Ou.jsx=n,Ou.jsxs=n,Ou}var j2;function ZA(){return j2||(j2=1,X1.exports=KA()),X1.exports}var C=ZA();const gt=t=>typeof t=="string",Iu=()=>{let t,e;const n=new Promise((r,l)=>{t=r,e=l});return n.resolve=t,n.reject=e,n},B2=t=>t==null?"":""+t,QA=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},JA=/###/g,P2=t=>t&&t.indexOf("###")>-1?t.replace(JA,"."):t,U2=t=>!t||gt(t),Xu=(t,e,n)=>{const r=gt(e)?e.split("."):e;let l=0;for(;l<r.length-1;){if(U2(t))return{};const u=P2(r[l]);!t[u]&&n&&(t[u]=new n),Object.prototype.hasOwnProperty.call(t,u)?t=t[u]:t={},++l}return U2(t)?{}:{obj:t,k:P2(r[l])}},F2=(t,e,n)=>{const{obj:r,k:l}=Xu(t,e,Object);if(r!==void 0||e.length===1){r[l]=n;return}let u=e[e.length-1],g=e.slice(0,e.length-1),y=Xu(t,g,Object);for(;y.obj===void 0&&g.length;)u=`${g[g.length-1]}.${u}`,g=g.slice(0,g.length-1),y=Xu(t,g,Object),y!=null&&y.obj&&typeof y.obj[`${y.k}.${u}`]<"u"&&(y.obj=void 0);y.obj[`${y.k}.${u}`]=n},e4=(t,e,n,r)=>{const{obj:l,k:u}=Xu(t,e,Object);l[u]=l[u]||[],l[u].push(n)},gh=(t,e)=>{const{obj:n,k:r}=Xu(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},t4=(t,e,n)=>{const r=gh(t,n);return r!==void 0?r:gh(e,n)},h3=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?gt(t[r])||t[r]instanceof String||gt(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):h3(t[r],e[r],n):t[r]=e[r]);return t},Wl=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var n4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const i4=t=>gt(t)?t.replace(/[&<>"'\/]/g,e=>n4[e]):t;class s4{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const r4=[" ",",","?","!",";"],a4=new s4(20),o4=(t,e,n)=>{e=e||"",n=n||"";const r=r4.filter(g=>e.indexOf(g)<0&&n.indexOf(g)<0);if(r.length===0)return!0;const l=a4.getRegExp(`(${r.map(g=>g==="?"?"\\?":g).join("|")})`);let u=!l.test(t);if(!u){const g=t.indexOf(n);g>0&&!l.test(t.substring(0,g))&&(u=!0)}return u},Ig=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let l=t;for(let u=0;u<r.length;){if(!l||typeof l!="object")return;let g,y="";for(let b=u;b<r.length;++b)if(b!==u&&(y+=n),y+=r[b],g=l[y],g!==void 0){if(["string","number","boolean"].indexOf(typeof g)>-1&&b<r.length-1)continue;u+=b-u+1;break}l=g}return l},of=t=>t==null?void 0:t.replace("_","-"),l4={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class mh{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||l4,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,l){return l&&!this.debug?null:(gt(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new mh(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new mh(this.logger,e)}}var xr=new mh;class Lh{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const l=this.observers[r].get(n)||0;this.observers[r].set(n,l+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([l,u])=>{for(let g=0;g<u;g++)l(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([l,u])=>{for(let g=0;g<u;g++)l.apply(l,[e,...n])})}}class V2 extends Lh{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,l={}){var x,E;const u=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,g=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure;let y;e.indexOf(".")>-1?y=e.split("."):(y=[e,n],r&&(Array.isArray(r)?y.push(...r):gt(r)&&u?y.push(...r.split(u)):y.push(r)));const b=gh(this.data,y);return!b&&!n&&!r&&e.indexOf(".")>-1&&(e=y[0],n=y[1],r=y.slice(2).join(".")),b||!g||!gt(r)?b:Ig((E=(x=this.data)==null?void 0:x[e])==null?void 0:E[n],r,u)}addResource(e,n,r,l,u={silent:!1}){const g=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator;let y=[e,n];r&&(y=y.concat(g?r.split(g):r)),e.indexOf(".")>-1&&(y=e.split("."),l=n,n=y[1]),this.addNamespaces(n),F2(this.data,y,l),u.silent||this.emit("added",e,n,r,l)}addResources(e,n,r,l={silent:!1}){for(const u in r)(gt(r[u])||Array.isArray(r[u]))&&this.addResource(e,n,u,r[u],{silent:!0});l.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,l,u,g={silent:!1,skipCopy:!1}){let y=[e,n];e.indexOf(".")>-1&&(y=e.split("."),l=r,r=n,n=y[1]),this.addNamespaces(n);let b=gh(this.data,y)||{};g.skipCopy||(r=JSON.parse(JSON.stringify(r))),l?h3(b,r,u):b={...b,...r},F2(this.data,y,b),g.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(l=>n[l]&&Object.keys(n[l]).length>0)}toJSON(){return this.data}}var g3={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,l){return t.forEach(u=>{var g;e=((g=this.processors[u])==null?void 0:g.process(e,n,r,l))??e}),e}};const z2={},H2=t=>!gt(t)&&typeof t!="boolean"&&typeof t!="number";class ph extends Lh{constructor(e,n={}){super(),QA(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=xr.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const l=this.resolve(e,r);return(l==null?void 0:l.res)!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const l=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let u=n.ns||this.options.defaultNS||[];const g=r&&e.indexOf(r)>-1,y=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!o4(e,r,l);if(g&&!y){const b=e.match(this.interpolator.nestingRegexp);if(b&&b.length>0)return{key:e,namespaces:gt(u)?[u]:u};const x=e.split(r);(r!==l||r===l&&this.options.ns.indexOf(x[0])>-1)&&(u=x.shift()),e=x.join(l)}return{key:e,namespaces:gt(u)?[u]:u}}translate(e,n,r){let l=typeof n=="object"?{...n}:n;if(typeof l!="object"&&this.options.overloadTranslationOptionHandler&&(l=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(l={...l}),l||(l={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const u=l.returnDetails!==void 0?l.returnDetails:this.options.returnDetails,g=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,{key:y,namespaces:b}=this.extractFromKey(e[e.length-1],l),x=b[b.length-1];let E=l.nsSeparator!==void 0?l.nsSeparator:this.options.nsSeparator;E===void 0&&(E=":");const A=l.lng||this.language,N=l.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((A==null?void 0:A.toLowerCase())==="cimode")return N?u?{res:`${x}${E}${y}`,usedKey:y,exactUsedKey:y,usedLng:A,usedNS:x,usedParams:this.getUsedParamsDetails(l)}:`${x}${E}${y}`:u?{res:y,usedKey:y,exactUsedKey:y,usedLng:A,usedNS:x,usedParams:this.getUsedParamsDetails(l)}:y;const O=this.resolve(e,l);let M=O==null?void 0:O.res;const j=(O==null?void 0:O.usedKey)||y,U=(O==null?void 0:O.exactUsedKey)||y,H=["[object Number]","[object Function]","[object RegExp]"],q=l.joinArrays!==void 0?l.joinArrays:this.options.joinArrays,B=!this.i18nFormat||this.i18nFormat.handleAsObject,V=l.count!==void 0&&!gt(l.count),G=ph.hasDefaultValue(l),ne=V?this.pluralResolver.getSuffix(A,l.count,l):"",K=l.ordinal&&V?this.pluralResolver.getSuffix(A,l.count,{ordinal:!1}):"",ae=V&&!l.ordinal&&l.count===0,Q=ae&&l[`defaultValue${this.options.pluralSeparator}zero`]||l[`defaultValue${ne}`]||l[`defaultValue${K}`]||l.defaultValue;let we=M;B&&!M&&G&&(we=Q);const je=H2(we),_e=Object.prototype.toString.apply(we);if(B&&we&&je&&H.indexOf(_e)<0&&!(gt(q)&&Array.isArray(we))){if(!l.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const he=this.options.returnedObjectHandler?this.options.returnedObjectHandler(j,we,{...l,ns:b}):`key '${y} (${this.language})' returned an object instead of string.`;return u?(O.res=he,O.usedParams=this.getUsedParamsDetails(l),O):he}if(g){const he=Array.isArray(we),Ue=he?[]:{},ie=he?U:j;for(const se in we)if(Object.prototype.hasOwnProperty.call(we,se)){const ce=`${ie}${g}${se}`;G&&!M?Ue[se]=this.translate(ce,{...l,defaultValue:H2(Q)?Q[se]:void 0,joinArrays:!1,ns:b}):Ue[se]=this.translate(ce,{...l,joinArrays:!1,ns:b}),Ue[se]===ce&&(Ue[se]=we[se])}M=Ue}}else if(B&&gt(q)&&Array.isArray(M))M=M.join(q),M&&(M=this.extendTranslation(M,e,l,r));else{let he=!1,Ue=!1;!this.isValidLookup(M)&&G&&(he=!0,M=Q),this.isValidLookup(M)||(Ue=!0,M=y);const se=(l.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Ue?void 0:M,ce=G&&Q!==M&&this.options.updateMissing;if(Ue||he||ce){if(this.logger.log(ce?"updateKey":"missingKey",A,x,y,ce?Q:M),g){const X=this.resolve(y,{...l,keySeparator:!1});X&&X.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Le=[];const Ve=this.languageUtils.getFallbackCodes(this.options.fallbackLng,l.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ve&&Ve[0])for(let X=0;X<Ve.length;X++)Le.push(Ve[X]);else this.options.saveMissingTo==="all"?Le=this.languageUtils.toResolveHierarchy(l.lng||this.language):Le.push(l.lng||this.language);const Y=(X,le,oe)=>{var Ye;const Ne=G&&oe!==M?oe:se;this.options.missingKeyHandler?this.options.missingKeyHandler(X,x,le,Ne,ce,l):(Ye=this.backendConnector)!=null&&Ye.saveMissing&&this.backendConnector.saveMissing(X,x,le,Ne,ce,l),this.emit("missingKey",X,x,le,M)};this.options.saveMissing&&(this.options.saveMissingPlurals&&V?Le.forEach(X=>{const le=this.pluralResolver.getSuffixes(X,l);ae&&l[`defaultValue${this.options.pluralSeparator}zero`]&&le.indexOf(`${this.options.pluralSeparator}zero`)<0&&le.push(`${this.options.pluralSeparator}zero`),le.forEach(oe=>{Y([X],y+oe,l[`defaultValue${oe}`]||Q)})}):Y(Le,y,Q))}M=this.extendTranslation(M,e,l,O,r),Ue&&M===y&&this.options.appendNamespaceToMissingKey&&(M=`${x}${E}${y}`),(Ue||he)&&this.options.parseMissingKeyHandler&&(M=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${x}${E}${y}`:y,he?M:void 0,l))}return u?(O.res=M,O.usedParams=this.getUsedParamsDetails(l),O):M}extendTranslation(e,n,r,l,u){var b,x;if((b=this.i18nFormat)!=null&&b.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const E=gt(e)&&(((x=r==null?void 0:r.interpolation)==null?void 0:x.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let A;if(E){const O=e.match(this.interpolator.nestingRegexp);A=O&&O.length}let N=r.replace&&!gt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(N={...this.options.interpolation.defaultVariables,...N}),e=this.interpolator.interpolate(e,N,r.lng||this.language||l.usedLng,r),E){const O=e.match(this.interpolator.nestingRegexp),M=O&&O.length;A<M&&(r.nest=!1)}!r.lng&&l&&l.res&&(r.lng=this.language||l.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...O)=>(u==null?void 0:u[0])===O[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${O[0]} in key: ${n[0]}`),null):this.translate(...O,n),r)),r.interpolation&&this.interpolator.reset()}const g=r.postProcess||this.options.postProcess,y=gt(g)?[g]:g;return e!=null&&(y!=null&&y.length)&&r.applyPostProcessor!==!1&&(e=g3.handle(y,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...l,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,l,u,g,y;return gt(e)&&(e=[e]),e.forEach(b=>{if(this.isValidLookup(r))return;const x=this.extractFromKey(b,n),E=x.key;l=E;let A=x.namespaces;this.options.fallbackNS&&(A=A.concat(this.options.fallbackNS));const N=n.count!==void 0&&!gt(n.count),O=N&&!n.ordinal&&n.count===0,M=n.context!==void 0&&(gt(n.context)||typeof n.context=="number")&&n.context!=="",j=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);A.forEach(U=>{var H,q;this.isValidLookup(r)||(y=U,!z2[`${j[0]}-${U}`]&&((H=this.utils)!=null&&H.hasLoadedNamespace)&&!((q=this.utils)!=null&&q.hasLoadedNamespace(y))&&(z2[`${j[0]}-${U}`]=!0,this.logger.warn(`key "${l}" for languages "${j.join(", ")}" won't get resolved as namespace "${y}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),j.forEach(B=>{var ne;if(this.isValidLookup(r))return;g=B;const V=[E];if((ne=this.i18nFormat)!=null&&ne.addLookupKeys)this.i18nFormat.addLookupKeys(V,E,B,U,n);else{let K;N&&(K=this.pluralResolver.getSuffix(B,n.count,n));const ae=`${this.options.pluralSeparator}zero`,Q=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(N&&(V.push(E+K),n.ordinal&&K.indexOf(Q)===0&&V.push(E+K.replace(Q,this.options.pluralSeparator)),O&&V.push(E+ae)),M){const we=`${E}${this.options.contextSeparator}${n.context}`;V.push(we),N&&(V.push(we+K),n.ordinal&&K.indexOf(Q)===0&&V.push(we+K.replace(Q,this.options.pluralSeparator)),O&&V.push(we+ae))}}let G;for(;G=V.pop();)this.isValidLookup(r)||(u=G,r=this.getResource(B,U,G,n))}))})}),{res:r,usedKey:l,exactUsedKey:u,usedLng:g,usedNS:y}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,l={}){var u;return(u=this.i18nFormat)!=null&&u.getResource?this.i18nFormat.getResource(e,n,r,l):this.resourceStore.getResource(e,n,r,l)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!gt(e.replace);let l=r?e.replace:e;if(r&&typeof e.count<"u"&&(l.count=e.count),this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),!r){l={...l};for(const u of n)delete l[u]}return l}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class $2{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=xr.create("languageUtils")}getScriptPartFromCode(e){if(e=of(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=of(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(gt(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const l=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(l))&&(n=l)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const l=this.getScriptPartFromCode(r);if(this.isSupportedCode(l))return n=l;const u=this.getLanguagePartFromCode(r);if(this.isSupportedCode(u))return n=u;n=this.options.supportedLngs.find(g=>{if(g===u)return g;if(!(g.indexOf("-")<0&&u.indexOf("-")<0)&&(g.indexOf("-")>0&&u.indexOf("-")<0&&g.substring(0,g.indexOf("-"))===u||g.indexOf(u)===0&&u.length>1))return g})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),gt(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),l=[],u=g=>{g&&(this.isSupportedCode(g)?l.push(g):this.logger.warn(`rejecting language code not found in supportedLngs: ${g}`))};return gt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&u(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&u(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&u(this.getLanguagePartFromCode(e))):gt(e)&&u(this.formatLanguageCode(e)),r.forEach(g=>{l.indexOf(g)<0&&u(this.formatLanguageCode(g))}),l}}const G2={zero:0,one:1,two:2,few:3,many:4,other:5},q2={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class c4{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=xr.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=of(e==="dev"?"en":e),l=n.ordinal?"ordinal":"cardinal",u=JSON.stringify({cleanedCode:r,type:l});if(u in this.pluralRulesCache)return this.pluralRulesCache[u];let g;try{g=new Intl.PluralRules(r,{type:l})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),q2;if(!e.match(/-|_/))return q2;const b=this.languageUtils.getLanguagePartFromCode(e);g=this.getRule(b,n)}return this.pluralRulesCache[u]=g,g}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(l=>`${n}${l}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((l,u)=>G2[l]-G2[u]).map(l=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${l}`):[]}getSuffix(e,n,r={}){const l=this.getRule(e,r);return l?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${l.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const Y2=(t,e,n,r=".",l=!0)=>{let u=t4(t,e,n);return!u&&l&&gt(n)&&(u=Ig(t,n,r),u===void 0&&(u=Ig(e,n,r))),u},W1=t=>t.replace(/\$/g,"$$$$");class u4{constructor(e={}){var n;this.logger=xr.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:l,prefix:u,prefixEscaped:g,suffix:y,suffixEscaped:b,formatSeparator:x,unescapeSuffix:E,unescapePrefix:A,nestingPrefix:N,nestingPrefixEscaped:O,nestingSuffix:M,nestingSuffixEscaped:j,nestingOptionsSeparator:U,maxReplaces:H,alwaysFormat:q}=e.interpolation;this.escape=n!==void 0?n:i4,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=l!==void 0?l:!1,this.prefix=u?Wl(u):g||"{{",this.suffix=y?Wl(y):b||"}}",this.formatSeparator=x||",",this.unescapePrefix=E?"":A||"-",this.unescapeSuffix=this.unescapePrefix?"":E||"",this.nestingPrefix=N?Wl(N):O||Wl("$t("),this.nestingSuffix=M?Wl(M):j||Wl(")"),this.nestingOptionsSeparator=U||",",this.maxReplaces=H||1e3,this.alwaysFormat=q!==void 0?q:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,l){var O;let u,g,y;const b=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},x=M=>{if(M.indexOf(this.formatSeparator)<0){const q=Y2(n,b,M,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(q,void 0,r,{...l,...n,interpolationkey:M}):q}const j=M.split(this.formatSeparator),U=j.shift().trim(),H=j.join(this.formatSeparator).trim();return this.format(Y2(n,b,U,this.options.keySeparator,this.options.ignoreJSONStructure),H,r,{...l,...n,interpolationkey:U})};this.resetRegExp();const E=(l==null?void 0:l.missingInterpolationHandler)||this.options.missingInterpolationHandler,A=((O=l==null?void 0:l.interpolation)==null?void 0:O.skipOnVariables)!==void 0?l.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:M=>W1(M)},{regex:this.regexp,safeValue:M=>this.escapeValue?W1(this.escape(M)):W1(M)}].forEach(M=>{for(y=0;u=M.regex.exec(e);){const j=u[1].trim();if(g=x(j),g===void 0)if(typeof E=="function"){const H=E(e,u,l);g=gt(H)?H:""}else if(l&&Object.prototype.hasOwnProperty.call(l,j))g="";else if(A){g=u[0];continue}else this.logger.warn(`missed to pass in variable ${j} for interpolating ${e}`),g="";else!gt(g)&&!this.useRawValueToEscape&&(g=B2(g));const U=M.safeValue(g);if(e=e.replace(u[0],U),A?(M.regex.lastIndex+=g.length,M.regex.lastIndex-=u[0].length):M.regex.lastIndex=0,y++,y>=this.maxReplaces)break}}),e}nest(e,n,r={}){let l,u,g;const y=(b,x)=>{const E=this.nestingOptionsSeparator;if(b.indexOf(E)<0)return b;const A=b.split(new RegExp(`${E}[ ]*{`));let N=`{${A[1]}`;b=A[0],N=this.interpolate(N,g);const O=N.match(/'/g),M=N.match(/"/g);(((O==null?void 0:O.length)??0)%2===0&&!M||M.length%2!==0)&&(N=N.replace(/'/g,'"'));try{g=JSON.parse(N),x&&(g={...x,...g})}catch(j){return this.logger.warn(`failed parsing options string in nesting for key ${b}`,j),`${b}${E}${N}`}return g.defaultValue&&g.defaultValue.indexOf(this.prefix)>-1&&delete g.defaultValue,b};for(;l=this.nestingRegexp.exec(e);){let b=[];g={...r},g=g.replace&&!gt(g.replace)?g.replace:g,g.applyPostProcessor=!1,delete g.defaultValue;const x=/{.*}/.test(l[1])?l[1].lastIndexOf("}")+1:l[1].indexOf(this.formatSeparator);if(x!==-1&&(b=l[1].slice(x).split(this.formatSeparator).map(E=>E.trim()).filter(Boolean),l[1]=l[1].slice(0,x)),u=n(y.call(this,l[1].trim(),g),g),u&&l[0]===e&&!gt(u))return u;gt(u)||(u=B2(u)),u||(this.logger.warn(`missed to resolve ${l[1]} for nesting ${e}`),u=""),b.length&&(u=b.reduce((E,A)=>this.format(E,A,r.lng,{...r,interpolationkey:l[1].trim()}),u.trim())),e=e.replace(l[0],u),this.regexp.lastIndex=0}return e}}const f4=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const l=r[1].substring(0,r[1].length-1);e==="currency"&&l.indexOf(":")<0?n.currency||(n.currency=l.trim()):e==="relativetime"&&l.indexOf(":")<0?n.range||(n.range=l.trim()):l.split(";").forEach(g=>{if(g){const[y,...b]=g.split(":"),x=b.join(":").trim().replace(/^'+|'+$/g,""),E=y.trim();n[E]||(n[E]=x),x==="false"&&(n[E]=!1),x==="true"&&(n[E]=!0),isNaN(x)||(n[E]=parseInt(x,10))}})}return{formatName:e,formatOptions:n}},X2=t=>{const e={};return(n,r,l)=>{let u=l;l&&l.interpolationkey&&l.formatParams&&l.formatParams[l.interpolationkey]&&l[l.interpolationkey]&&(u={...u,[l.interpolationkey]:void 0});const g=r+JSON.stringify(u);let y=e[g];return y||(y=t(of(r),l),e[g]=y),y(n)}},d4=t=>(e,n,r)=>t(of(n),r)(e);class h4{constructor(e={}){this.logger=xr.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?X2:d4;this.formats={number:r((l,u)=>{const g=new Intl.NumberFormat(l,{...u});return y=>g.format(y)}),currency:r((l,u)=>{const g=new Intl.NumberFormat(l,{...u,style:"currency"});return y=>g.format(y)}),datetime:r((l,u)=>{const g=new Intl.DateTimeFormat(l,{...u});return y=>g.format(y)}),relativetime:r((l,u)=>{const g=new Intl.RelativeTimeFormat(l,{...u});return y=>g.format(y,u.range||"day")}),list:r((l,u)=>{const g=new Intl.ListFormat(l,{...u});return y=>g.format(y)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=X2(n)}format(e,n,r,l={}){const u=n.split(this.formatSeparator);if(u.length>1&&u[0].indexOf("(")>1&&u[0].indexOf(")")<0&&u.find(y=>y.indexOf(")")>-1)){const y=u.findIndex(b=>b.indexOf(")")>-1);u[0]=[u[0],...u.splice(1,y)].join(this.formatSeparator)}return u.reduce((y,b)=>{var A;const{formatName:x,formatOptions:E}=f4(b);if(this.formats[x]){let N=y;try{const O=((A=l==null?void 0:l.formatParams)==null?void 0:A[l.interpolationkey])||{},M=O.locale||O.lng||l.locale||l.lng||r;N=this.formats[x](y,M,{...E,...l,...O})}catch(O){this.logger.warn(O)}return N}else this.logger.warn(`there was no format function for ${x}`);return y},e)}}const g4=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class m4 extends Lh{constructor(e,n,r,l={}){var u,g;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=l,this.logger=xr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=l.maxParallelReads||10,this.readingCalls=0,this.maxRetries=l.maxRetries>=0?l.maxRetries:5,this.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,this.state={},this.queue=[],(g=(u=this.backend)==null?void 0:u.init)==null||g.call(u,r,l.backend,l)}queueLoad(e,n,r,l){const u={},g={},y={},b={};return e.forEach(x=>{let E=!0;n.forEach(A=>{const N=`${x}|${A}`;!r.reload&&this.store.hasResourceBundle(x,A)?this.state[N]=2:this.state[N]<0||(this.state[N]===1?g[N]===void 0&&(g[N]=!0):(this.state[N]=1,E=!1,g[N]===void 0&&(g[N]=!0),u[N]===void 0&&(u[N]=!0),b[A]===void 0&&(b[A]=!0)))}),E||(y[x]=!0)}),(Object.keys(u).length||Object.keys(g).length)&&this.queue.push({pending:g,pendingCount:Object.keys(g).length,loaded:{},errors:[],callback:l}),{toLoad:Object.keys(u),pending:Object.keys(g),toLoadLanguages:Object.keys(y),toLoadNamespaces:Object.keys(b)}}loaded(e,n,r){const l=e.split("|"),u=l[0],g=l[1];n&&this.emit("failedLoading",u,g,n),!n&&r&&this.store.addResourceBundle(u,g,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const y={};this.queue.forEach(b=>{e4(b.loaded,[u],g),g4(b,e),n&&b.errors.push(n),b.pendingCount===0&&!b.done&&(Object.keys(b.loaded).forEach(x=>{y[x]||(y[x]={});const E=b.loaded[x];E.length&&E.forEach(A=>{y[x][A]===void 0&&(y[x][A]=!0)})}),b.done=!0,b.errors.length?b.callback(b.errors):b.callback())}),this.emit("loaded",y),this.queue=this.queue.filter(b=>!b.done)}read(e,n,r,l=0,u=this.retryTimeout,g){if(!e.length)return g(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:l,wait:u,callback:g});return}this.readingCalls++;const y=(x,E)=>{if(this.readingCalls--,this.waitingReads.length>0){const A=this.waitingReads.shift();this.read(A.lng,A.ns,A.fcName,A.tried,A.wait,A.callback)}if(x&&E&&l<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,l+1,u*2,g)},u);return}g(x,E)},b=this.backend[r].bind(this.backend);if(b.length===2){try{const x=b(e,n);x&&typeof x.then=="function"?x.then(E=>y(null,E)).catch(y):y(null,x)}catch(x){y(x)}return}return b(e,n,y)}prepareLoading(e,n,r={},l){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();gt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),gt(n)&&(n=[n]);const u=this.queueLoad(e,n,r,l);if(!u.toLoad.length)return u.pending.length||l(),null;u.toLoad.forEach(g=>{this.loadOne(g)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),l=r[0],u=r[1];this.read(l,u,"read",void 0,void 0,(g,y)=>{g&&this.logger.warn(`${n}loading namespace ${u} for language ${l} failed`,g),!g&&y&&this.logger.log(`${n}loaded namespace ${u} for language ${l}`,y),this.loaded(e,g,y)})}saveMissing(e,n,r,l,u,g={},y=()=>{}){var b,x,E,A,N;if((x=(b=this.services)==null?void 0:b.utils)!=null&&x.hasLoadedNamespace&&!((A=(E=this.services)==null?void 0:E.utils)!=null&&A.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((N=this.backend)!=null&&N.create){const O={...g,isUpdate:u},M=this.backend.create.bind(this.backend);if(M.length<6)try{let j;M.length===5?j=M(e,n,r,l,O):j=M(e,n,r,l),j&&typeof j.then=="function"?j.then(U=>y(null,U)).catch(y):y(null,j)}catch(j){y(j)}else M(e,n,r,l,y,O)}!e||!e[0]||this.store.addResource(e[0],n,r,l)}}}const W2=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),gt(t[1])&&(e.defaultValue=t[1]),gt(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),K2=t=>{var e,n;return gt(t.ns)&&(t.ns=[t.ns]),gt(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),gt(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Gd=()=>{},p4=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class lf extends Lh{constructor(e={},n){if(super(),this.options=K2(e),this.services={},this.logger=xr,this.modules={external:[]},p4(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(gt(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=W2();this.options={...r,...this.options,...K2(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const l=x=>x?typeof x=="function"?new x:x:null;if(!this.options.isClone){this.modules.logger?xr.init(l(this.modules.logger),this.options):xr.init(null,this.options);let x;this.modules.formatter?x=this.modules.formatter:x=h4;const E=new $2(this.options);this.store=new V2(this.options.resources,this.options);const A=this.services;A.logger=xr,A.resourceStore=this.store,A.languageUtils=E,A.pluralResolver=new c4(E,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),x&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(A.formatter=l(x),A.formatter.init&&A.formatter.init(A,this.options),this.options.interpolation.format=A.formatter.format.bind(A.formatter)),A.interpolator=new u4(this.options),A.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},A.backendConnector=new m4(l(this.modules.backend),A.resourceStore,A,this.options),A.backendConnector.on("*",(O,...M)=>{this.emit(O,...M)}),this.modules.languageDetector&&(A.languageDetector=l(this.modules.languageDetector),A.languageDetector.init&&A.languageDetector.init(A,this.options.detection,this.options)),this.modules.i18nFormat&&(A.i18nFormat=l(this.modules.i18nFormat),A.i18nFormat.init&&A.i18nFormat.init(this)),this.translator=new ph(this.services,this.options),this.translator.on("*",(O,...M)=>{this.emit(O,...M)}),this.modules.external.forEach(O=>{O.init&&O.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Gd),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const x=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);x.length>0&&x[0]!=="dev"&&(this.options.lng=x[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(x=>{this[x]=(...E)=>this.store[x](...E)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(x=>{this[x]=(...E)=>(this.store[x](...E),this)});const y=Iu(),b=()=>{const x=(E,A)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),y.resolve(A),n(E,A)};if(this.languages&&!this.isInitialized)return x(null,this.t.bind(this));this.changeLanguage(this.options.lng,x)};return this.options.resources||!this.options.initAsync?b():setTimeout(b,0),y}loadResources(e,n=Gd){var u,g;let r=n;const l=gt(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((l==null?void 0:l.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const y=[],b=x=>{if(!x||x==="cimode")return;this.services.languageUtils.toResolveHierarchy(x).forEach(A=>{A!=="cimode"&&y.indexOf(A)<0&&y.push(A)})};l?b(l):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(E=>b(E)),(g=(u=this.options.preload)==null?void 0:u.forEach)==null||g.call(u,x=>b(x)),this.services.backendConnector.load(y,this.options.ns,x=>{!x&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(x)})}else r(null)}reloadResources(e,n,r){const l=Iu();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Gd),this.services.backendConnector.reload(e,n,u=>{l.resolve(),r(u)}),l}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&g3.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Iu();this.emit("languageChanging",e);const l=y=>{this.language=y,this.languages=this.services.languageUtils.toResolveHierarchy(y),this.resolvedLanguage=void 0,this.setResolvedLanguage(y)},u=(y,b)=>{b?this.isLanguageChangingTo===e&&(l(b),this.translator.changeLanguage(b),this.isLanguageChangingTo=void 0,this.emit("languageChanged",b),this.logger.log("languageChanged",b)):this.isLanguageChangingTo=void 0,r.resolve((...x)=>this.t(...x)),n&&n(y,(...x)=>this.t(...x))},g=y=>{var E,A;!e&&!y&&this.services.languageDetector&&(y=[]);const b=gt(y)?y:y&&y[0],x=this.store.hasLanguageSomeTranslations(b)?b:this.services.languageUtils.getBestMatchFromCodes(gt(y)?[y]:y);x&&(this.language||l(x),this.translator.language||this.translator.changeLanguage(x),(A=(E=this.services.languageDetector)==null?void 0:E.cacheUserLanguage)==null||A.call(E,x)),this.loadResources(x,N=>{u(N,x)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?g(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(g):this.services.languageDetector.detect(g):g(e),r}getFixedT(e,n,r){const l=(u,g,...y)=>{let b;typeof g!="object"?b=this.options.overloadTranslationOptionHandler([u,g].concat(y)):b={...g},b.lng=b.lng||l.lng,b.lngs=b.lngs||l.lngs,b.ns=b.ns||l.ns,b.keyPrefix!==""&&(b.keyPrefix=b.keyPrefix||r||l.keyPrefix);const x=this.options.keySeparator||".";let E;return b.keyPrefix&&Array.isArray(u)?E=u.map(A=>`${b.keyPrefix}${x}${A}`):E=b.keyPrefix?`${b.keyPrefix}${x}${u}`:u,this.t(E,b)};return gt(e)?l.lng=e:l.lngs=e,l.ns=n,l.keyPrefix=r,l}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,u=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const g=(y,b)=>{const x=this.services.backendConnector.state[`${y}|${b}`];return x===-1||x===0||x===2};if(n.precheck){const y=n.precheck(this,g);if(y!==void 0)return y}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||g(r,e)&&(!l||g(u,e)))}loadNamespaces(e,n){const r=Iu();return this.options.ns?(gt(e)&&(e=[e]),e.forEach(l=>{this.options.ns.indexOf(l)<0&&this.options.ns.push(l)}),this.loadResources(l=>{r.resolve(),n&&n(l)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Iu();gt(e)&&(e=[e]);const l=this.options.preload||[],u=e.filter(g=>l.indexOf(g)<0&&this.services.languageUtils.isSupportedCode(g));return u.length?(this.options.preload=l.concat(u),this.loadResources(g=>{r.resolve(),n&&n(g)}),r):(n&&n(),Promise.resolve())}dir(e){var l,u;if(e||(e=this.resolvedLanguage||(((l=this.languages)==null?void 0:l.length)>0?this.languages[0]:this.language)),!e)return"rtl";if(Intl.Locale){const g=new Intl.Locale(e);if(g&&g.getTextInfo){const y=g.getTextInfo();if(y&&y.direction)return y.direction}}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((u=this.services)==null?void 0:u.languageUtils)||new $2(W2());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new lf(e,n)}cloneInstance(e={},n=Gd){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const l={...this.options,...e,isClone:!0},u=new lf(l);if((e.debug!==void 0||e.prefix!==void 0)&&(u.logger=u.logger.clone(e)),["store","services","language"].forEach(y=>{u[y]=this[y]}),u.services={...this.services},u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},r){const y=Object.keys(this.store.data).reduce((b,x)=>(b[x]={...this.store.data[x]},b[x]=Object.keys(b[x]).reduce((E,A)=>(E[A]={...b[x][A]},E),b[x]),b),{});u.store=new V2(y,l),u.services.resourceStore=u.store}return u.translator=new ph(u.services,l),u.translator.on("*",(y,...b)=>{u.emit(y,...b)}),u.init(l,n),u.translator.options=l,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const si=lf.createInstance();si.createInstance=lf.createInstance;si.createInstance;si.dir;si.init;si.loadResources;si.reloadResources;si.use;si.changeLanguage;si.getFixedT;si.t;si.exists;si.setDefaultNamespace;si.hasLoadedNamespace;si.loadNamespaces;si.loadLanguages;var K1={exports:{}},Tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z2;function x4(){if(Z2)return Tt;Z2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function N(Y){return Y===null||typeof Y!="object"?null:(Y=A&&Y[A]||Y["@@iterator"],typeof Y=="function"?Y:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,j={};function U(Y,X,le){this.props=Y,this.context=X,this.refs=j,this.updater=le||O}U.prototype.isReactComponent={},U.prototype.setState=function(Y,X){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,X,"setState")},U.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function H(){}H.prototype=U.prototype;function q(Y,X,le){this.props=Y,this.context=X,this.refs=j,this.updater=le||O}var B=q.prototype=new H;B.constructor=q,M(B,U.prototype),B.isPureReactComponent=!0;var V=Array.isArray,G={H:null,A:null,T:null,S:null,V:null},ne=Object.prototype.hasOwnProperty;function K(Y,X,le,oe,Ne,Ye){return le=Ye.ref,{$$typeof:t,type:Y,key:X,ref:le!==void 0?le:null,props:Ye}}function ae(Y,X){return K(Y.type,X,void 0,void 0,void 0,Y.props)}function Q(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function we(Y){var X={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(le){return X[le]})}var je=/\/+/g;function _e(Y,X){return typeof Y=="object"&&Y!==null&&Y.key!=null?we(""+Y.key):X.toString(36)}function he(){}function Ue(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(he,he):(Y.status="pending",Y.then(function(X){Y.status==="pending"&&(Y.status="fulfilled",Y.value=X)},function(X){Y.status==="pending"&&(Y.status="rejected",Y.reason=X)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function ie(Y,X,le,oe,Ne){var Ye=typeof Y;(Ye==="undefined"||Ye==="boolean")&&(Y=null);var be=!1;if(Y===null)be=!0;else switch(Ye){case"bigint":case"string":case"number":be=!0;break;case"object":switch(Y.$$typeof){case t:case e:be=!0;break;case E:return be=Y._init,ie(be(Y._payload),X,le,oe,Ne)}}if(be)return Ne=Ne(Y),be=oe===""?"."+_e(Y,0):oe,V(Ne)?(le="",be!=null&&(le=be.replace(je,"$&/")+"/"),ie(Ne,X,le,"",function(Mt){return Mt})):Ne!=null&&(Q(Ne)&&(Ne=ae(Ne,le+(Ne.key==null||Y&&Y.key===Ne.key?"":(""+Ne.key).replace(je,"$&/")+"/")+be)),X.push(Ne)),1;be=0;var ht=oe===""?".":oe+":";if(V(Y))for(var Ge=0;Ge<Y.length;Ge++)oe=Y[Ge],Ye=ht+_e(oe,Ge),be+=ie(oe,X,le,Ye,Ne);else if(Ge=N(Y),typeof Ge=="function")for(Y=Ge.call(Y),Ge=0;!(oe=Y.next()).done;)oe=oe.value,Ye=ht+_e(oe,Ge++),be+=ie(oe,X,le,Ye,Ne);else if(Ye==="object"){if(typeof Y.then=="function")return ie(Ue(Y),X,le,oe,Ne);throw X=String(Y),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return be}function se(Y,X,le){if(Y==null)return Y;var oe=[],Ne=0;return ie(Y,oe,"","",function(Ye){return X.call(le,Ye,Ne++)}),oe}function ce(Y){if(Y._status===-1){var X=Y._result;X=X(),X.then(function(le){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=le)},function(le){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=le)}),Y._status===-1&&(Y._status=0,Y._result=X)}if(Y._status===1)return Y._result.default;throw Y._result}var Le=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function Ve(){}return Tt.Children={map:se,forEach:function(Y,X,le){se(Y,function(){X.apply(this,arguments)},le)},count:function(Y){var X=0;return se(Y,function(){X++}),X},toArray:function(Y){return se(Y,function(X){return X})||[]},only:function(Y){if(!Q(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},Tt.Component=U,Tt.Fragment=n,Tt.Profiler=l,Tt.PureComponent=q,Tt.StrictMode=r,Tt.Suspense=b,Tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,Tt.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return G.H.useMemoCache(Y)}},Tt.cache=function(Y){return function(){return Y.apply(null,arguments)}},Tt.cloneElement=function(Y,X,le){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var oe=M({},Y.props),Ne=Y.key,Ye=void 0;if(X!=null)for(be in X.ref!==void 0&&(Ye=void 0),X.key!==void 0&&(Ne=""+X.key),X)!ne.call(X,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&X.ref===void 0||(oe[be]=X[be]);var be=arguments.length-2;if(be===1)oe.children=le;else if(1<be){for(var ht=Array(be),Ge=0;Ge<be;Ge++)ht[Ge]=arguments[Ge+2];oe.children=ht}return K(Y.type,Ne,void 0,void 0,Ye,oe)},Tt.createContext=function(Y){return Y={$$typeof:g,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:u,_context:Y},Y},Tt.createElement=function(Y,X,le){var oe,Ne={},Ye=null;if(X!=null)for(oe in X.key!==void 0&&(Ye=""+X.key),X)ne.call(X,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(Ne[oe]=X[oe]);var be=arguments.length-2;if(be===1)Ne.children=le;else if(1<be){for(var ht=Array(be),Ge=0;Ge<be;Ge++)ht[Ge]=arguments[Ge+2];Ne.children=ht}if(Y&&Y.defaultProps)for(oe in be=Y.defaultProps,be)Ne[oe]===void 0&&(Ne[oe]=be[oe]);return K(Y,Ye,void 0,void 0,null,Ne)},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(Y){return{$$typeof:y,render:Y}},Tt.isValidElement=Q,Tt.lazy=function(Y){return{$$typeof:E,_payload:{_status:-1,_result:Y},_init:ce}},Tt.memo=function(Y,X){return{$$typeof:x,type:Y,compare:X===void 0?null:X}},Tt.startTransition=function(Y){var X=G.T,le={};G.T=le;try{var oe=Y(),Ne=G.S;Ne!==null&&Ne(le,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(Ve,Le)}catch(Ye){Le(Ye)}finally{G.T=X}},Tt.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},Tt.use=function(Y){return G.H.use(Y)},Tt.useActionState=function(Y,X,le){return G.H.useActionState(Y,X,le)},Tt.useCallback=function(Y,X){return G.H.useCallback(Y,X)},Tt.useContext=function(Y){return G.H.useContext(Y)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(Y,X){return G.H.useDeferredValue(Y,X)},Tt.useEffect=function(Y,X,le){var oe=G.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(Y,X)},Tt.useId=function(){return G.H.useId()},Tt.useImperativeHandle=function(Y,X,le){return G.H.useImperativeHandle(Y,X,le)},Tt.useInsertionEffect=function(Y,X){return G.H.useInsertionEffect(Y,X)},Tt.useLayoutEffect=function(Y,X){return G.H.useLayoutEffect(Y,X)},Tt.useMemo=function(Y,X){return G.H.useMemo(Y,X)},Tt.useOptimistic=function(Y,X){return G.H.useOptimistic(Y,X)},Tt.useReducer=function(Y,X,le){return G.H.useReducer(Y,X,le)},Tt.useRef=function(Y){return G.H.useRef(Y)},Tt.useState=function(Y){return G.H.useState(Y)},Tt.useSyncExternalStore=function(Y,X,le){return G.H.useSyncExternalStore(Y,X,le)},Tt.useTransition=function(){return G.H.useTransition()},Tt.version="19.1.0",Tt}var Q2;function kh(){return Q2||(Q2=1,K1.exports=x4()),K1.exports}var R=kh();const ut=Mm(R),J2=d3({__proto__:null,default:ut},[R]),y4=(t,e,n,r)=>{var u,g,y,b;const l=[n,{code:e,...r||{}}];if((g=(u=t==null?void 0:t.services)==null?void 0:u.logger)!=null&&g.forward)return t.services.logger.forward(l,"warn","react-i18next::",!0);tl(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),(b=(y=t==null?void 0:t.services)==null?void 0:y.logger)!=null&&b.warn?t.services.logger.warn(...l):console!=null&&console.warn&&console.warn(...l)},eb={},Mg=(t,e,n,r)=>{tl(n)&&eb[n]||(tl(n)&&(eb[n]=new Date),y4(t,e,n,r))},m3=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},Dg=(t,e,n)=>{t.loadNamespaces(e,m3(t,n))},tb=(t,e,n,r)=>{if(tl(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Dg(t,n,r);n.forEach(l=>{t.options.ns.indexOf(l)<0&&t.options.ns.push(l)}),t.loadLanguages(e,m3(t,r))},b4=(t,e,n={})=>!e.languages||!e.languages.length?(Mg(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,l)=>{var u;if(((u=n.bindI18n)==null?void 0:u.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!l(r.isLanguageChangingTo,t))return!1}}),tl=t=>typeof t=="string",w4=t=>typeof t=="object"&&t!==null,v4=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,E4={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},S4=t=>E4[t],C4=t=>t.replace(v4,S4);let Lg={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:C4};const A4=(t={})=>{Lg={...Lg,...t}},T4=()=>Lg;let p3;const _4=t=>{p3=t},N4=()=>p3,R4={type:"3rdParty",init(t){A4(t.options.react),_4(t)}},O4=R.createContext();class I4{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const M4=(t,e)=>{const n=R.useRef();return R.useEffect(()=>{n.current=t},[t,e]),n.current},x3=(t,e,n,r)=>t.getFixedT(e,n,r),D4=(t,e,n,r)=>R.useCallback(x3(t,e,n,r),[t,e,n,r]),Xn=(t,e={})=>{var V,G,ne,K;const{i18n:n}=e,{i18n:r,defaultNS:l}=R.useContext(O4)||{},u=n||r||N4();if(u&&!u.reportNamespaces&&(u.reportNamespaces=new I4),!u){Mg(u,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const ae=(we,je)=>tl(je)?je:w4(je)&&tl(je.defaultValue)?je.defaultValue:Array.isArray(we)?we[we.length-1]:we,Q=[ae,{},!1];return Q.t=ae,Q.i18n={},Q.ready=!1,Q}(V=u.options.react)!=null&&V.wait&&Mg(u,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const g={...T4(),...u.options.react,...e},{useSuspense:y,keyPrefix:b}=g;let x=l||((G=u.options)==null?void 0:G.defaultNS);x=tl(x)?[x]:x||["translation"],(K=(ne=u.reportNamespaces).addUsedNamespaces)==null||K.call(ne,x);const E=(u.isInitialized||u.initializedStoreOnce)&&x.every(ae=>b4(ae,u,g)),A=D4(u,e.lng||null,g.nsMode==="fallback"?x:x[0],b),N=()=>A,O=()=>x3(u,e.lng||null,g.nsMode==="fallback"?x:x[0],b),[M,j]=R.useState(N);let U=x.join();e.lng&&(U=`${e.lng}${U}`);const H=M4(U),q=R.useRef(!0);R.useEffect(()=>{const{bindI18n:ae,bindI18nStore:Q}=g;q.current=!0,!E&&!y&&(e.lng?tb(u,e.lng,x,()=>{q.current&&j(O)}):Dg(u,x,()=>{q.current&&j(O)})),E&&H&&H!==U&&q.current&&j(O);const we=()=>{q.current&&j(O)};return ae&&(u==null||u.on(ae,we)),Q&&(u==null||u.store.on(Q,we)),()=>{q.current=!1,u&&(ae==null||ae.split(" ").forEach(je=>u.off(je,we))),Q&&u&&Q.split(" ").forEach(je=>u.store.off(je,we))}},[u,U]),R.useEffect(()=>{q.current&&E&&j(N)},[u,b,E]);const B=[M,u,E];if(B.t=M,B.i18n=u,B.ready=E,E||!E&&!y)return B;throw new Promise(ae=>{e.lng?tb(u,e.lng,x,()=>ae()):Dg(u,x,()=>ae())})},L4="Welcome",k4="Login",j4="Logout",B4="Select at least one course.",P4="Please enter a nick name.",U4="Student {{nick}} added!",F4="Application submitted!",V4="Thank you!",z4="Your application has been received.",H4="Our staff will contact you via LINE or phone.",$4="You may close this page.",G4="Wonder Kids Admissions",q4="Fill out the application form below. {{staffMsg}}",Y4="Students will be enrolled instantly.",X4="Our staff will contact you to confirm your admission.",W4="Student Info",K4="Nick Name",Z4="First Name",Q4="Last Name",J4="Date of Birth",e5="Parent / Guardian",t5="Line App ID",n5="Phone",i5="Courses",s5="Loading courses…",r5="No courses available.",a5="({{count}} seats)",o5="+ Time",l5="Hours Purchased:",c5="Payment Receipt",u5="Choose Files",f5="Adding…",d5="Add Student",h5="Submitting…",g5="Submit Application",m5="Refresh Public Admissions Link",p5="Show Public Admissions Link",x5="Copy",y5="Loading pending…",b5="Pending Check-ins",w5="No pending check-ins.",v5="Take Attendance",E5="Loading students…",S5="Student",C5="Slots",A5="Used / Limit",T5="Check",_5="∞",N5="Student QR Code",R5="Download",O5="Print",I5="Close",M5="Approve",D5="Unchecked {{first}} {{last}}",L5="Over limit for {{first}} {{last}}",k5="Checked in {{first}} {{last}}",j5="Unknown code",B5="{{first}} {{last}} already scanned",P5="Scan failed",U5="Pending: {{first}} {{last}}",F5="Billing Page (coming soon)",V5="Check Courses",z5="Manage Courses",H5="Select Course",$5="Select Day",G5="Select Time",q5="Loading…",Y5="No students found.",X5="Nick name",W5="Full name",K5="Course",Z5="Days",Q5="Times",J5="Capacity",eT="Edit",tT="+ Add Course",nT="Edit Course",iT="New Course",sT="Name",rT="Days:",aT="{{day}} Times:",oT="Save",lT="Cancel",cT="Enter a name",uT="Delete this course?",fT="Monday",dT="Tuesday",hT="Wednesday",gT="Thursday",mT="Friday",pT="Saturday",xT="Sunday",yT="Add New Student",bT="Students (active)",wT="Students (inactive)",vT="Review",ET="Fast, beautiful, mobile-friendly management for your school.",ST="Scan Student QR",CT="Scan another",AT="Sign In",TT="Signing In…",_T="Email",NT="Password",RT="you@example.com",OT="No notifications.",IT="Read",MT="New application · {{name}}",DT="Course limit reached · {{name}}",LT="Edit request from {{name}}",kT="New Applications",jT="Renewals",BT="Course Changes",PT="Select All",UT="Unselect All",FT="Reject",VT="Approve {{count}} item(s)?",zT="Reject (delete) {{count}} item(s)?",HT="Submitted by",$T="Line ID",GT="Submitted at",qT="Hours",YT="Open",XT="Receipts",WT="View Receipts ({{count}})",KT="Settings",ZT="Close",QT="Invite User",JT="Temp password",e6="Role",t6="Staff",n6="Admin",i6="Send Invite",s6="Inviting…",r6="Team Members",a6="No users.",o6="Edit User",l6="E-mail (read-only)",c6="Saving…",u6="Auth returned no user id",f6="Remove this staff account?",d6="Staff",h6="Admin",g6="Home",m6="Reports",p6="Messaging",x6="Billing",y6="Settings",b6="Back",w6="Delete Student",v6="Add New Course",E6="Select...",S6="Day",C6="Time Slot",A6="Hours to Purchase",T6="Upload Receipt",_6="Submit",N6="Not found.",R6="Joined",O6="Enrolled Courses",I6="Days & Times",M6="Hours Left",D6="Status",L6="Receipt",k6="Actions",j6="Attendance",B6="Ongoing",P6="Renewal Needed",U6="View",F6="Hide",V6="Renew",z6="Delete student?",H6="Attendance History",$6="No records",G6="Renew {{course}}",q6="Add-course request submitted.",Y6="Renewal request submitted.",X6="Cancelled",W6="Edit Day",K6="Edit Time",Z6="Profile information missing. Please reload and try again.",Q6="Students (Inactive)",J6="Search students…",e8="Parent Phone",t8="Line ID",n8="Action",i8="Renew Enrollment",s8="All fields are required.",r8="Failed to upload the file.",a8="Renew Now",o8="Submit Renewal Request",l8="Export Students ({{count}})",c8="Export CSV",u8="Students",f8="No.",d8="{{count}} hours",h8="Select hour package",g8="Please select an hour package for each course.",m8="Total",p8="Show details",x8="Hide details",y8="baht",b8="Cancellations",w8="No receipt uploaded",v8="Cancel course",E8="Course cancellation request submitted for review.",S8="Cancel this course?",C8="Submit cancellation",A8="Cancellation pending approval",T8="Course cancelled",_8="Cancellation request rejected",N8="Purchased Packages",R8="Price",O8="Hour Packages",I8="No packages defined",M8="+ Add Package",D8="Times for {{day}}",L8="Course Name",k8="Choose a course to see students",j8={welcome:L4,login:k4,logout:j4,selectCourseError:B4,enterNickError:P4,studentAdded:U4,applicationSubmitted:F4,thankYou:V4,applicationReceived:z4,staffWillContact:H4,youMayClose:$4,admissionsTitle:G4,admissionsIntro:q4,enrollInstant:Y4,contactToConfirm:X4,studentInfo:W4,nickName:K4,firstName:Z4,lastName:Q4,dob:J4,guardian:e5,lineAppId:t5,phone:n5,courses:i5,loadingCourses:s5,noCourses:r5,seats:a5,addTime:o5,hoursPurchased:l5,paymentReceipt:c5,chooseFiles:u5,adding:f5,addStudent:d5,submitting:h5,submitApplication:g5,refreshPublicAdmissionsLink:m5,showPublicAdmissionsLink:p5,copy:x5,loadingPending:y5,pendingCheckins:b5,noPendingCheckins:w5,takeAttendance:v5,loadingStudents:E5,student:S5,slots:C5,usedLimit:A5,check:T5,unlimited:_5,studentQrCode:N5,download:R5,print:O5,close:I5,approve:M5,uncheckedStudent:D5,overLimit:L5,checkedInStudent:k5,unknownCode:j5,alreadyScanned:B5,scanFailed:P5,pendingStudent:U5,billingComingSoon:F5,checkCourses:V5,manageCourses:z5,selectCourse:H5,selectDay:$5,selectTime:G5,loading:q5,noStudentsFound:Y5,nickname:X5,fullName:W5,course:K5,days:Z5,times:Q5,capacity:J5,edit:eT,delete:"Delete",addCourse:tT,editCourse:nT,newCourse:iT,name:sT,daysColon:rT,timesColon:aT,save:oT,cancel:lT,enterName:cT,deleteThisCourse:uT,monday:fT,tuesday:dT,wednesday:hT,thursday:gT,friday:mT,saturday:pT,sunday:xT,addNewStudent:yT,studentsActive:bT,studentsInactive:wT,review:vT,homepageSlogan:ET,scanStudentQr:ST,scanAnother:CT,signIn:AT,signingIn:TT,email:_T,password:NT,emailPlaceholder:RT,noNotifications:OT,markRead:IT,newApplication:MT,courseLimitReached:DT,editRequestFrom:LT,newApplications:kT,renewals:jT,courseChanges:BT,selectAll:PT,unselectAll:UT,reject:FT,approveConfirm:VT,rejectConfirm:zT,submittedBy:HT,lineId:$T,submittedAt:GT,hours:qT,open:YT,receipts:XT,viewReceipts:WT,settingsTitle:KT,closeInvite:ZT,inviteUser:QT,tempPassword:JT,role:e6,roleStaff:t6,roleAdmin:n6,sendInvite:i6,inviting:s6,teamMembers:r6,noUsers:a6,editUser:o6,emailReadOnly:l6,saving:c6,noUserIdError:u6,confirmRemoveStaff:f6,role_staff:d6,role_admin:h6,home:g6,reports:m6,messaging:p6,billing:x6,settings:y6,back:b6,deleteStudent:w6,addNewCourse:v6,select:E6,day:S6,timeSlot:C6,hoursToPurchase:A6,uploadReceipt:T6,submit:_6,studentNotFound:N6,joined:R6,enrolledCourses:O6,daysTimes:I6,hoursLeft:M6,status:D6,receipt:L6,actions:k6,attendance:j6,ongoing:B6,renewalNeeded:P6,view:U6,hide:F6,renew:V6,deleteStudentConfirm:z6,attendanceHistory:H6,noRecords:$6,submitRenew:G6,submitAdd:q6,submitRenewal:Y6,cancelled:X6,editDay:W6,editTime:K6,profileMissingError:Z6,inactiveStudents:Q6,searchStudents:J6,export:"Export",parentPhone:e8,lineID:t8,action:n8,renewEnrollment:i8,allFieldsRequired:s8,uploadError:r8,renewNow:a8,submitRenewalRequest:o8,exportStudents:l8,exportCSV:c8,students:u8,no:f8,hoursLabel:d8,chooseHourPackage:h8,selectHourPackageError:g8,totalPrice:m8,showDetail:p8,hideDetail:x8,baht:y8,cancellations:b8,noReceipt:w8,cancelCourse:v8,cancelRequest:E8,cancelConfirm:S8,cancelSubmit:C8,cancelPending:A8,cancelApproved:T8,cancelRejected:_8,purchasedPackages:N8,price:R8,hourPackages:O8,noPackagesDefined:I8,addPackage:M8,timesForDay:D8,courseName:L8,chooseCourseToSeeStudents:k8},B8="ยินดีต้อนรับ",P8="เข้าสู่ระบบ",U8="ออกจากระบบ",F8="กรุณาเลือกอย่างน้อย 1 หลักสูตร",V8="กรุณากรอกชื่อเล่น",z8="เพิ่มนักเรียน {{nick}} เรียบร้อยแล้ว!",H8="ส่งใบสมัครเรียบร้อยแล้ว!",$8="ขอบคุณค่ะ!",G8="เราได้รับใบสมัครของคุณแล้ว",q8="เจ้าหน้าที่จะติดต่อคุณผ่าน LINE หรือโทรศัพท์",Y8="คุณสามารถปิดหน้านี้ได้",X8="สมัครเรียนวันเดอร์คิดส์",W8="กรุณากรอกใบสมัครด้านล่าง {{staffMsg}}",K8="นักเรียนจะถูกเพิ่มเข้าเรียนทันที",Z8="เจ้าหน้าที่จะติดต่อยืนยันการสมัครกับคุณ",Q8="ข้อมูลนักเรียน",J8="ชื่อเล่น",e_="ชื่อจริง",t_="นามสกุล",n_="วันเกิด",i_="ผู้ปกครอง",s_="LINE ID",r_="เบอร์โทร",a_="หลักสูตร",o_="กำลังโหลดหลักสูตร…",l_="ยังไม่มีหลักสูตร",c_="({{count}} ที่นั่ง)",u_="+ เวลา",f_="ชั่วโมงที่ซื้อ:",d_="สลิปชำระเงิน",h_="เลือกไฟล์",g_="กำลังเพิ่ม…",m_="เพิ่มนักเรียน",p_="กำลังส่ง…",x_="ส่งใบสมัคร",y_="รีเฟรชลิงก์สมัครเรียนสาธารณะ",b_="แสดงลิงก์สมัครเรียนสาธารณะ",w_="คัดลอก",v_="กำลังโหลดที่รออนุมัติ…",E_="เช็กชื่อที่รออนุมัติ",S_="ไม่มีการเช็กชื่อที่รออนุมัติ",C_="เช็กชื่อเข้าเรียน",A_="กำลังโหลดรายชื่อนักเรียน…",T_="นักเรียน",__="เวลา",N_="ที่ใช้ไป / สิทธิ์",R_="เช็กชื่อ",O_="∞",I_="คิวอาร์โค้ดนักเรียน",M_="ดาวน์โหลด",D_="พิมพ์",L_="ปิด",k_="อนุมัติ",j_="ยกเลิกเช็กชื่อ {{first}} {{last}}",B_="เกินสิทธิ์ของ {{first}} {{last}}",P_="เช็กชื่อแล้ว {{first}} {{last}}",U_="โค้ดไม่ถูกต้อง",F_="{{first}} {{last}} เช็กชื่อแล้ว",V_="เช็กชื่อไม่สำเร็จ",z_="รออนุมัติ: {{first}} {{last}}",H_="หน้าบิล (เร็ว ๆ นี้)",$_="ตรวจสอบหลักสูตร",G_="จัดการหลักสูตร",q_="เลือกหลักสูตร",Y_="เลือกวัน",X_="เลือกเวลา",W_="กำลังโหลด…",K_="ไม่พบนักเรียน",Z_="ชื่อเล่น",Q_="ชื่อ-นามสกุล",J_="หลักสูตร",eN="วัน",tN="เวลา",nN="จำนวนที่รับ",iN="แก้ไข",sN="+ เพิ่มหลักสูตร",rN="แก้ไขหลักสูตร",aN="เพิ่มหลักสูตรใหม่",oN="ชื่อหลักสูตร",lN="วัน:",cN="{{day}} เวลา:",uN="บันทึก",fN="ยกเลิก",dN="กรุณากรอกชื่อหลักสูตร",hN="ต้องการลบหลักสูตรนี้หรือไม่?",gN="จันทร์",mN="อังคาร",pN="พุธ",xN="พฤหัสบดี",yN="ศุกร์",bN="เสาร์",wN="อาทิตย์",vN="เพิ่มนักเรียนใหม่",EN="นักเรียน (กำลังเรียนอยู่)",SN="นักเรียน (หยุดเรียน)",CN="ตรวจสอบ",AN="ระบบจัดการโรงเรียนที่รวดเร็ว สวยงาม ใช้งานง่ายบนมือถือ",TN="สแกน QR นักเรียน",_N="สแกนใหม่อีกครั้ง",NN="เข้าสู่ระบบ",RN="กำลังเข้าสู่ระบบ…",ON="อีเมล",IN="รหัสผ่าน",MN="you@example.com",DN="ไม่มีการแจ้งเตือน",LN="อ่านแล้ว",kN="ใบสมัครใหม่ · {{name}}",jN="ถึงขีดจำกัดคอร์ส · {{name}}",BN="คำขอแก้ไขจาก {{name}}",PN="สมัครใหม่",UN="ต่ออายุ",FN="แก้ไขคอร์ส",VN="เลือกทั้งหมด",zN="ยกเลิกเลือกทั้งหมด",HN="ปฏิเสธ",$N="อนุมัติ {{count}} รายการ?",GN="ลบ (ปฏิเสธ) {{count}} รายการ?",qN="ส่งโดย",YN="ไลน์ไอดี",XN="ส่งเมื่อ",WN="ชั่วโมง",KN="เปิด",ZN="ใบเสร็จ",QN="ดูใบเสร็จ ({{count}})",JN="ตั้งค่า",e7="ปิด",t7="เชิญผู้ใช้",n7="รหัสผ่านชั่วคราว",i7="สิทธิ์การใช้งาน",s7="พนักงาน",r7="ผู้ดูแลระบบ",a7="ส่งคำเชิญ",o7="กำลังเชิญ…",l7="สมาชิกทีม",c7="ยังไม่มีผู้ใช้",u7="แก้ไขผู้ใช้",f7="อีเมล (อ่านอย่างเดียว)",d7="กำลังบันทึก…",h7="ไม่ได้รับรหัสผู้ใช้จากระบบ",g7="ต้องการลบบัญชีพนักงานนี้หรือไม่?",m7="พนักงาน",p7="ผู้ดูแลระบบ",x7="หน้าหลัก",y7="รายงาน",b7="ข้อความ",w7="การเงิน",v7="ตั้งค่า",E7="ย้อนกลับ",S7="ลบนักเรียน",C7="เพิ่มคอร์สใหม่",A7="เลือก...",T7="วัน",_7="ช่วงเวลา",N7="จำนวนชั่วโมง",R7="อัปโหลดใบเสร็จ",O7="ส่งคำขอ",I7="ไม่พบข้อมูล",M7="วันที่เข้าเรียน",D7="คอร์สที่ลงทะเบียน",L7="วันและเวลา",k7="ชั่วโมงที่เหลือ",j7="สถานะ",B7="ใบเสร็จ",P7="ตัวเลือก",U7="การเข้าเรียน",F7="กำลังเรียน",V7="ต้องต่ออายุ",z7="ดู",H7="ซ่อน",$7="ต่ออายุ",G7="ต้องการลบนักเรียนนี้หรือไม่?",q7="ประวัติการเข้าเรียน",Y7="ไม่มีข้อมูล",X7="ต่ออายุ {{course}}",W7="ส่งคำขอเพิ่มคอร์สแล้ว",K7="ส่งคำขอต่ออายุแล้ว",Z7="ยกเลิกแล้ว",Q7="แก้ไขวัน",J7="แก้ไขเวลา",eR="ไม่พบข้อมูลโปรไฟล์ กรุณารีโหลดหน้าและลองใหม่อีกครั้ง",tR="นักเรียน (ไม่ใช้งาน)",nR="ค้นหานักเรียน…",iR="เบอร์ผู้ปกครอง",sR="ไลน์ไอดี",rR="การดำเนินการ",aR="กรุณากรอกข้อมูลให้ครบทุกช่อง",oR="อัปโหลดไฟล์ไม่สำเร็จ",lR="ต่ออายุทันที",cR="ส่งคำขอต่ออายุ",uR="ส่งออกนักเรียน ({{count}})",fR="ส่งออก CSV",dR="นักเรียน",hR="ลำดับ",gR="{{count}} ชั่วโมง",mR="เลือกแพ็กเกจชั่วโมง",pR="กรุณาเลือกแพ็กเกจชั่วโมงสำหรับแต่ละคอร์ส",xR="รวมทั้งสิ้น",yR="ดูรายละเอียด",bR="ซ่อนรายละเอียด",wR="บาท",vR="ยกเลิกคอร์ส",ER="ไม่มีสลิปแนบ",SR="ยกเลิกคอร์ส",CR="ส่งคำขอยกเลิกคอร์สแล้ว รอการอนุมัติ",AR="ต้องการยกเลิกคอร์สนี้หรือไม่?",TR="ส่งคำขอยกเลิก",_R="รออนุมัติการยกเลิกคอร์ส",NR="ยกเลิกคอร์สแล้ว",RR="ไม่อนุมัติคำขอยกเลิก",OR="แพ็กเกจที่ซื้อ",IR="ราคา",MR="แพ็กเกจชั่วโมง",DR="ยังไม่ได้กำหนดแพ็กเกจ",LR="+ เพิ่มแพ็กเกจ",kR="เวลาของ{{day}}",jR="ชื่อหลักสูตร",BR="เลือกคอร์สเพื่อดูรายชื่อนักเรียน",PR={welcome:B8,login:P8,logout:U8,selectCourseError:F8,enterNickError:V8,studentAdded:z8,applicationSubmitted:H8,thankYou:$8,applicationReceived:G8,staffWillContact:q8,youMayClose:Y8,admissionsTitle:X8,admissionsIntro:W8,enrollInstant:K8,contactToConfirm:Z8,studentInfo:Q8,nickName:J8,firstName:e_,lastName:t_,dob:n_,guardian:i_,lineAppId:s_,phone:r_,courses:a_,loadingCourses:o_,noCourses:l_,seats:c_,addTime:u_,hoursPurchased:f_,paymentReceipt:d_,chooseFiles:h_,adding:g_,addStudent:m_,submitting:p_,submitApplication:x_,refreshPublicAdmissionsLink:y_,showPublicAdmissionsLink:b_,copy:w_,loadingPending:v_,pendingCheckins:E_,noPendingCheckins:S_,takeAttendance:C_,loadingStudents:A_,student:T_,slots:__,usedLimit:N_,check:R_,unlimited:O_,studentQrCode:I_,download:M_,print:D_,close:L_,approve:k_,uncheckedStudent:j_,overLimit:B_,checkedInStudent:P_,unknownCode:U_,alreadyScanned:F_,scanFailed:V_,pendingStudent:z_,billingComingSoon:H_,checkCourses:$_,manageCourses:G_,selectCourse:q_,selectDay:Y_,selectTime:X_,loading:W_,noStudentsFound:K_,nickname:Z_,fullName:Q_,course:J_,days:eN,times:tN,capacity:nN,edit:iN,delete:"ลบ",addCourse:sN,editCourse:rN,newCourse:aN,name:oN,daysColon:lN,timesColon:cN,save:uN,cancel:fN,enterName:dN,deleteThisCourse:hN,monday:gN,tuesday:mN,wednesday:pN,thursday:xN,friday:yN,saturday:bN,sunday:wN,addNewStudent:vN,studentsActive:EN,studentsInactive:SN,review:CN,homepageSlogan:AN,scanStudentQr:TN,scanAnother:_N,signIn:NN,signingIn:RN,email:ON,password:IN,emailPlaceholder:MN,noNotifications:DN,markRead:LN,newApplication:kN,courseLimitReached:jN,editRequestFrom:BN,newApplications:PN,renewals:UN,courseChanges:FN,selectAll:VN,unselectAll:zN,reject:HN,approveConfirm:$N,rejectConfirm:GN,submittedBy:qN,lineId:YN,submittedAt:XN,hours:WN,open:KN,receipts:ZN,viewReceipts:QN,settingsTitle:JN,closeInvite:e7,inviteUser:t7,tempPassword:n7,role:i7,roleStaff:s7,roleAdmin:r7,sendInvite:a7,inviting:o7,teamMembers:l7,noUsers:c7,editUser:u7,emailReadOnly:f7,saving:d7,noUserIdError:h7,confirmRemoveStaff:g7,role_staff:m7,role_admin:p7,home:x7,reports:y7,messaging:b7,billing:w7,settings:v7,back:E7,deleteStudent:S7,addNewCourse:C7,select:A7,day:T7,timeSlot:_7,hoursToPurchase:N7,uploadReceipt:R7,submit:O7,studentNotFound:I7,joined:M7,enrolledCourses:D7,daysTimes:L7,hoursLeft:k7,status:j7,receipt:B7,actions:P7,attendance:U7,ongoing:F7,renewalNeeded:V7,view:z7,hide:H7,renew:$7,deleteStudentConfirm:G7,attendanceHistory:q7,noRecords:Y7,submitRenew:X7,submitAdd:W7,submitRenewal:K7,cancelled:Z7,editDay:Q7,editTime:J7,profileMissingError_th:eR,inactiveStudents:tR,searchStudents:nR,export:"ส่งออก",parentPhone:iR,lineID:sR,action:rR,allFieldsRequired:aR,uploadError:oR,renewNow:lR,submitRenewalRequest:cR,exportStudents:uR,exportCSV:fR,students:dR,no:hR,hoursLabel:gR,chooseHourPackage:mR,selectHourPackageError:pR,totalPrice:xR,showDetail:yR,hideDetail:bR,baht:wR,cancellations:vR,noReceipt:ER,cancelCourse:SR,cancelRequest:CR,cancelConfirm:AR,cancelSubmit:TR,cancelPending:_R,cancelApproved:NR,cancelRejected:RR,purchasedPackages:OR,price:IR,hourPackages:MR,noPackagesDefined:DR,addPackage:LR,timesForDay:kR,courseName:jR,chooseCourseToSeeStudents:BR},UR=typeof window<"u"&&localStorage.getItem("lang"),nb="en";si.use(R4).init({resources:{en:{translation:j8},th:{translation:PR}},lng:UR||nb,fallbackLng:nb,interpolation:{escapeValue:!1}});typeof window<"u"&&(window.i18n=si);var Z1={exports:{}},Mu={},Q1={exports:{}},J1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib;function FR(){return ib||(ib=1,function(t){function e(se,ce){var Le=se.length;se.push(ce);e:for(;0<Le;){var Ve=Le-1>>>1,Y=se[Ve];if(0<l(Y,ce))se[Ve]=ce,se[Le]=Y,Le=Ve;else break e}}function n(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var ce=se[0],Le=se.pop();if(Le!==ce){se[0]=Le;e:for(var Ve=0,Y=se.length,X=Y>>>1;Ve<X;){var le=2*(Ve+1)-1,oe=se[le],Ne=le+1,Ye=se[Ne];if(0>l(oe,Le))Ne<Y&&0>l(Ye,oe)?(se[Ve]=Ye,se[Ne]=Le,Ve=Ne):(se[Ve]=oe,se[le]=Le,Ve=le);else if(Ne<Y&&0>l(Ye,Le))se[Ve]=Ye,se[Ne]=Le,Ve=Ne;else break e}}return ce}function l(se,ce){var Le=se.sortIndex-ce.sortIndex;return Le!==0?Le:se.id-ce.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var g=Date,y=g.now();t.unstable_now=function(){return g.now()-y}}var b=[],x=[],E=1,A=null,N=3,O=!1,M=!1,j=!1,U=!1,H=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function V(se){for(var ce=n(x);ce!==null;){if(ce.callback===null)r(x);else if(ce.startTime<=se)r(x),ce.sortIndex=ce.expirationTime,e(b,ce);else break;ce=n(x)}}function G(se){if(j=!1,V(se),!M)if(n(b)!==null)M=!0,ne||(ne=!0,_e());else{var ce=n(x);ce!==null&&ie(G,ce.startTime-se)}}var ne=!1,K=-1,ae=5,Q=-1;function we(){return U?!0:!(t.unstable_now()-Q<ae)}function je(){if(U=!1,ne){var se=t.unstable_now();Q=se;var ce=!0;try{e:{M=!1,j&&(j=!1,q(K),K=-1),O=!0;var Le=N;try{t:{for(V(se),A=n(b);A!==null&&!(A.expirationTime>se&&we());){var Ve=A.callback;if(typeof Ve=="function"){A.callback=null,N=A.priorityLevel;var Y=Ve(A.expirationTime<=se);if(se=t.unstable_now(),typeof Y=="function"){A.callback=Y,V(se),ce=!0;break t}A===n(b)&&r(b),V(se)}else r(b);A=n(b)}if(A!==null)ce=!0;else{var X=n(x);X!==null&&ie(G,X.startTime-se),ce=!1}}break e}finally{A=null,N=Le,O=!1}ce=void 0}}finally{ce?_e():ne=!1}}}var _e;if(typeof B=="function")_e=function(){B(je)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Ue=he.port2;he.port1.onmessage=je,_e=function(){Ue.postMessage(null)}}else _e=function(){H(je,0)};function ie(se,ce){K=H(function(){se(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(se){se.callback=null},t.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<se?Math.floor(1e3/se):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_next=function(se){switch(N){case 1:case 2:case 3:var ce=3;break;default:ce=N}var Le=N;N=ce;try{return se()}finally{N=Le}},t.unstable_requestPaint=function(){U=!0},t.unstable_runWithPriority=function(se,ce){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var Le=N;N=se;try{return ce()}finally{N=Le}},t.unstable_scheduleCallback=function(se,ce,Le){var Ve=t.unstable_now();switch(typeof Le=="object"&&Le!==null?(Le=Le.delay,Le=typeof Le=="number"&&0<Le?Ve+Le:Ve):Le=Ve,se){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=Le+Y,se={id:E++,callback:ce,priorityLevel:se,startTime:Le,expirationTime:Y,sortIndex:-1},Le>Ve?(se.sortIndex=Le,e(x,se),n(b)===null&&se===n(x)&&(j?(q(K),K=-1):j=!0,ie(G,Le-Ve))):(se.sortIndex=Y,e(b,se),M||O||(M=!0,ne||(ne=!0,_e()))),se},t.unstable_shouldYield=we,t.unstable_wrapCallback=function(se){var ce=N;return function(){var Le=N;N=ce;try{return se.apply(this,arguments)}finally{N=Le}}}}(J1)),J1}var sb;function VR(){return sb||(sb=1,Q1.exports=FR()),Q1.exports}var eg={exports:{}},Ti={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb;function zR(){if(rb)return Ti;rb=1;var t=kh();function e(b){var x="https://react.dev/errors/"+b;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)x+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+b+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(b,x,E){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:A==null?null:""+A,children:b,containerInfo:x,implementation:E}}var g=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(b,x){if(b==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ti.createPortal=function(b,x){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(b,x,null,E)},Ti.flushSync=function(b){var x=g.T,E=r.p;try{if(g.T=null,r.p=2,b)return b()}finally{g.T=x,r.p=E,r.d.f()}},Ti.preconnect=function(b,x){typeof b=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(b,x))},Ti.prefetchDNS=function(b){typeof b=="string"&&r.d.D(b)},Ti.preinit=function(b,x){if(typeof b=="string"&&x&&typeof x.as=="string"){var E=x.as,A=y(E,x.crossOrigin),N=typeof x.integrity=="string"?x.integrity:void 0,O=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;E==="style"?r.d.S(b,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:A,integrity:N,fetchPriority:O}):E==="script"&&r.d.X(b,{crossOrigin:A,integrity:N,fetchPriority:O,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Ti.preinitModule=function(b,x){if(typeof b=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var E=y(x.as,x.crossOrigin);r.d.M(b,{crossOrigin:E,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(b)},Ti.preload=function(b,x){if(typeof b=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var E=x.as,A=y(E,x.crossOrigin);r.d.L(b,E,{crossOrigin:A,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Ti.preloadModule=function(b,x){if(typeof b=="string")if(x){var E=y(x.as,x.crossOrigin);r.d.m(b,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:E,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(b)},Ti.requestFormReset=function(b){r.d.r(b)},Ti.unstable_batchedUpdates=function(b,x){return b(x)},Ti.useFormState=function(b,x,E){return g.H.useFormState(b,x,E)},Ti.useFormStatus=function(){return g.H.useHostTransitionStatus()},Ti.version="19.1.0",Ti}var ab;function y3(){if(ab)return eg.exports;ab=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),eg.exports=zR(),eg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ob;function HR(){if(ob)return Mu;ob=1;var t=VR(),e=kh(),n=y3();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)a+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function u(i){var a=i,f=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(f=a.return),i=a.return;while(i)}return a.tag===3?f:null}function g(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function y(i){if(u(i)!==i)throw Error(r(188))}function b(i){var a=i.alternate;if(!a){if(a=u(i),a===null)throw Error(r(188));return a!==i?null:i}for(var f=i,m=a;;){var v=f.return;if(v===null)break;var T=v.alternate;if(T===null){if(m=v.return,m!==null){f=m;continue}break}if(v.child===T.child){for(T=v.child;T;){if(T===f)return y(v),i;if(T===m)return y(v),a;T=T.sibling}throw Error(r(188))}if(f.return!==m.return)f=v,m=T;else{for(var D=!1,F=v.child;F;){if(F===f){D=!0,f=v,m=T;break}if(F===m){D=!0,m=v,f=T;break}F=F.sibling}if(!D){for(F=T.child;F;){if(F===f){D=!0,f=T,m=v;break}if(F===m){D=!0,m=T,f=v;break}F=F.sibling}if(!D)throw Error(r(189))}}if(f.alternate!==m)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?i:a}function x(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=x(i),a!==null)return a;i=i.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),B=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),we=Symbol.for("react.memo_cache_sentinel"),je=Symbol.iterator;function _e(i){return i===null||typeof i!="object"?null:(i=je&&i[je]||i["@@iterator"],typeof i=="function"?i:null)}var he=Symbol.for("react.client.reference");function Ue(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===he?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case U:return"Profiler";case j:return"StrictMode";case G:return"Suspense";case ne:return"SuspenseList";case Q:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case O:return"Portal";case B:return(i.displayName||"Context")+".Provider";case q:return(i._context.displayName||"Context")+".Consumer";case V:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case K:return a=i.displayName||null,a!==null?a:Ue(i.type)||"Memo";case ae:a=i._payload,i=i._init;try{return Ue(i(a))}catch{}}return null}var ie=Array.isArray,se=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Le={pending:!1,data:null,method:null,action:null},Ve=[],Y=-1;function X(i){return{current:i}}function le(i){0>Y||(i.current=Ve[Y],Ve[Y]=null,Y--)}function oe(i,a){Y++,Ve[Y]=i.current,i.current=a}var Ne=X(null),Ye=X(null),be=X(null),ht=X(null);function Ge(i,a){switch(oe(be,a),oe(Ye,i),oe(Ne,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?l2(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=l2(a),i=c2(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}le(Ne),oe(Ne,i)}function Mt(){le(Ne),le(Ye),le(be)}function xn(i){i.memoizedState!==null&&oe(ht,i);var a=Ne.current,f=c2(a,i.type);a!==f&&(oe(Ye,i),oe(Ne,f))}function Ae(i){Ye.current===i&&(le(Ne),le(Ye)),ht.current===i&&(le(ht),Au._currentValue=Le)}var Fe=Object.prototype.hasOwnProperty,Be=t.unstable_scheduleCallback,nt=t.unstable_cancelCallback,Ke=t.unstable_shouldYield,xt=t.unstable_requestPaint,lt=t.unstable_now,yt=t.unstable_getCurrentPriorityLevel,mt=t.unstable_ImmediatePriority,Te=t.unstable_UserBlockingPriority,Re=t.unstable_NormalPriority,et=t.unstable_LowPriority,Ct=t.unstable_IdlePriority,vt=t.log,Wt=t.unstable_setDisableYieldValue,$t=null,Oe=null;function Xe(i){if(typeof vt=="function"&&Wt(i),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode($t,i)}catch{}}var We=Math.clz32?Math.clz32:rt,Dt=Math.log,Gt=Math.LN2;function rt(i){return i>>>=0,i===0?32:31-(Dt(i)/Gt|0)|0}var Et=256,De=4194304;function ct(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function _t(i,a,f){var m=i.pendingLanes;if(m===0)return 0;var v=0,T=i.suspendedLanes,D=i.pingedLanes;i=i.warmLanes;var F=m&134217727;return F!==0?(m=F&~T,m!==0?v=ct(m):(D&=F,D!==0?v=ct(D):f||(f=F&~i,f!==0&&(v=ct(f))))):(F=m&~T,F!==0?v=ct(F):D!==0?v=ct(D):f||(f=m&~i,f!==0&&(v=ct(f)))),v===0?0:a!==0&&a!==v&&(a&T)===0&&(T=v&-v,f=a&-a,T>=f||T===32&&(f&4194048)!==0)?a:v}function Rt(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Pi(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bi(){var i=Et;return Et<<=1,(Et&4194048)===0&&(Et=256),i}function sa(){var i=De;return De<<=1,(De&62914560)===0&&(De=4194304),i}function Lt(i){for(var a=[],f=0;31>f;f++)a.push(i);return a}function Ji(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Df(i,a,f,m,v,T){var D=i.pendingLanes;i.pendingLanes=f,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=f,i.entangledLanes&=f,i.errorRecoveryDisabledLanes&=f,i.shellSuspendCounter=0;var F=i.entanglements,W=i.expirationTimes,ge=i.hiddenUpdates;for(f=D&~f;0<f;){var ve=31-We(f),Se=1<<ve;F[ve]=0,W[ve]=-1;var me=ge[ve];if(me!==null)for(ge[ve]=null,ve=0;ve<me.length;ve++){var xe=me[ve];xe!==null&&(xe.lane&=-536870913)}f&=~Se}m!==0&&Bc(i,m,0),T!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=T&~(D&~a))}function Bc(i,a,f){i.pendingLanes|=a,i.suspendedLanes&=~a;var m=31-We(a);i.entangledLanes|=a,i.entanglements[m]=i.entanglements[m]|1073741824|f&4194090}function Ui(i,a){var f=i.entangledLanes|=a;for(i=i.entanglements;f;){var m=31-We(f),v=1<<m;v&a|i[m]&a&&(i[m]|=a),f&=~v}}function uo(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Vn(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Er(){var i=ce.p;return i!==0?i:(i=window.event,i===void 0?32:N2(i.type))}function ul(i,a){var f=ce.p;try{return ce.p=i,a()}finally{ce.p=f}}var Wn=Math.random().toString(36).slice(2),ri="__reactFiber$"+Wn,Tn="__reactProps$"+Wn,Xs="__reactContainer$"+Wn,ai="__reactEvents$"+Wn,Sr="__reactListeners$"+Wn,Fi="__reactHandles$"+Wn,ze="__reactResources$"+Wn,hs="__reactMarker$"+Wn;function fo(i){delete i[ri],delete i[Tn],delete i[ai],delete i[Sr],delete i[Fi]}function Ln(i){var a=i[ri];if(a)return a;for(var f=i.parentNode;f;){if(a=f[Xs]||f[ri]){if(f=a.alternate,a.child!==null||f!==null&&f.child!==null)for(i=h2(i);i!==null;){if(f=i[ri])return f;i=h2(i)}return a}i=f,f=i.parentNode}return null}function es(i){if(i=i[ri]||i[Xs]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Ws(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function Os(i){var a=i[ze];return a||(a=i[ze]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Jt(i){i[hs]=!0}var Lf=new Set,kf={};function oi(i,a){_n(i,a),_n(i+"Capture",a)}function _n(i,a){for(kf[i]=a,i=0;i<a.length;i++)Lf.add(a[i])}var dn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pc={},Is={};function Uc(i){return Fe.call(Is,i)?!0:Fe.call(Pc,i)?!1:dn.test(i)?Is[i]=!0:(Pc[i]=!0,!1)}function Ce(i,a,f){if(Uc(a))if(f===null)i.removeAttribute(a);else{switch(typeof f){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var m=a.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+f)}}function fl(i,a,f){if(f===null)i.removeAttribute(a);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+f)}}function qt(i,a,f,m){if(m===null)i.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(f);return}i.setAttributeNS(a,f,""+m)}}var Ks,jf;function jt(i){if(Ks===void 0)try{throw Error()}catch(f){var a=f.stack.trim().match(/\n( *(at )?)/);Ks=a&&a[1]||"",jf=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ks+i+jf}var Vt=!1;function Ot(i,a){if(!i||Vt)return"";Vt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(a){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(xe){var me=xe}Reflect.construct(i,[],Se)}else{try{Se.call()}catch(xe){me=xe}i.call(Se.prototype)}}else{try{throw Error()}catch(xe){me=xe}(Se=i())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(xe){if(xe&&me&&typeof xe.stack=="string")return[xe.stack,me.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=m.DetermineComponentFrameRoot(),D=T[0],F=T[1];if(D&&F){var W=D.split(`
`),ge=F.split(`
`);for(v=m=0;m<W.length&&!W[m].includes("DetermineComponentFrameRoot");)m++;for(;v<ge.length&&!ge[v].includes("DetermineComponentFrameRoot");)v++;if(m===W.length||v===ge.length)for(m=W.length-1,v=ge.length-1;1<=m&&0<=v&&W[m]!==ge[v];)v--;for(;1<=m&&0<=v;m--,v--)if(W[m]!==ge[v]){if(m!==1||v!==1)do if(m--,v--,0>v||W[m]!==ge[v]){var ve=`
`+W[m].replace(" at new "," at ");return i.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",i.displayName)),ve}while(1<=m&&0<=v);break}}}finally{Vt=!1,Error.prepareStackTrace=f}return(f=i?i.displayName||i.name:"")?jt(f):""}function Fc(i){switch(i.tag){case 26:case 27:case 5:return jt(i.type);case 16:return jt("Lazy");case 13:return jt("Suspense");case 19:return jt("SuspenseList");case 0:case 15:return Ot(i.type,!1);case 11:return Ot(i.type.render,!1);case 1:return Ot(i.type,!0);case 31:return jt("Activity");default:return""}}function dl(i){try{var a="";do a+=Fc(i),i=i.return;while(i);return a}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function wi(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Nn(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Zs(i){var a=Nn(i)?"checked":"value",f=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),m=""+i[a];if(!i.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,T=f.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return v.call(this)},set:function(D){m=""+D,T.call(this,D)}}),Object.defineProperty(i,a,{enumerable:f.enumerable}),{getValue:function(){return m},setValue:function(D){m=""+D},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function hl(i){i._valueTracker||(i._valueTracker=Zs(i))}function yn(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var f=a.getValue(),m="";return i&&(m=Nn(i)?i.checked?"true":"false":i.value),i=m,i!==f?(a.setValue(i),!0):!1}function ts(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Jh=/[\n"\\]/g;function Kn(i){return i.replace(Jh,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Kt(i,a,f,m,v,T,D,F){i.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.type=D:i.removeAttribute("type"),a!=null?D==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+wi(a)):i.value!==""+wi(a)&&(i.value=""+wi(a)):D!=="submit"&&D!=="reset"||i.removeAttribute("value"),a!=null?fe(i,D,wi(a)):f!=null?fe(i,D,wi(f)):m!=null&&i.removeAttribute("value"),v==null&&T!=null&&(i.defaultChecked=!!T),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?i.name=""+wi(F):i.removeAttribute("name")}function Zn(i,a,f,m,v,T,D,F){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.type=T),a!=null||f!=null){if(!(T!=="submit"&&T!=="reset"||a!=null))return;f=f!=null?""+wi(f):"",a=a!=null?""+wi(a):f,F||a===i.value||(i.value=a),i.defaultValue=a}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=F?i.checked:!!m,i.defaultChecked=!!m,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(i.name=D)}function fe(i,a,f){a==="number"&&ts(i.ownerDocument)===i||i.defaultValue===""+f||(i.defaultValue=""+f)}function z(i,a,f,m){if(i=i.options,a){a={};for(var v=0;v<f.length;v++)a["$"+f[v]]=!0;for(f=0;f<i.length;f++)v=a.hasOwnProperty("$"+i[f].value),i[f].selected!==v&&(i[f].selected=v),v&&m&&(i[f].defaultSelected=!0)}else{for(f=""+wi(f),a=null,v=0;v<i.length;v++){if(i[v].value===f){i[v].selected=!0,m&&(i[v].defaultSelected=!0);return}a!==null||i[v].disabled||(a=i[v])}a!==null&&(a.selected=!0)}}function Ze(i,a,f){if(a!=null&&(a=""+wi(a),a!==i.value&&(i.value=a),f==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=f!=null?""+wi(f):""}function kn(i,a,f,m){if(a==null){if(m!=null){if(f!=null)throw Error(r(92));if(ie(m)){if(1<m.length)throw Error(r(93));m=m[0]}f=m}f==null&&(f=""),a=f}f=wi(a),i.defaultValue=f,m=i.textContent,m===f&&m!==""&&m!==null&&(i.value=m)}function Qn(i,a){if(a){var f=i.firstChild;if(f&&f===i.lastChild&&f.nodeType===3){f.nodeValue=a;return}}i.textContent=a}var e0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gl(i,a,f){var m=a.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":m?i.setProperty(a,f):typeof f!="number"||f===0||e0.has(a)?a==="float"?i.cssFloat=f:i[a]=(""+f).trim():i[a]=f+"px"}function Ii(i,a,f){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||a!=null&&a.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var v in a)m=a[v],a.hasOwnProperty(v)&&f[v]!==m&&gl(i,v,m)}else for(var T in a)a.hasOwnProperty(T)&&gl(i,T,a[T])}function Qe(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ml(i){return Bf.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var ho=null;function ra(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Qs=null,aa=null;function jn(i){var a=es(i);if(a&&(i=a.stateNode)){var f=i[Tn]||null;e:switch(i=a.stateNode,a.type){case"input":if(Kt(i,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),a=f.name,f.type==="radio"&&a!=null){for(f=i;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Kn(""+a)+'"][type="radio"]'),a=0;a<f.length;a++){var m=f[a];if(m!==i&&m.form===i.form){var v=m[Tn]||null;if(!v)throw Error(r(90));Kt(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<f.length;a++)m=f[a],m.form===i.form&&yn(m)}break e;case"textarea":Ze(i,f.value,f.defaultValue);break e;case"select":a=f.value,a!=null&&z(i,!!f.multiple,a,!1)}}}var Cr=!1;function Ms(i,a,f){if(Cr)return i(a,f);Cr=!0;try{var m=i(a);return m}finally{if(Cr=!1,(Qs!==null||aa!==null)&&(Ed(),Qs&&(a=Qs,i=aa,aa=Qs=null,jn(a),i)))for(a=0;a<i.length;a++)jn(i[a])}}function tt(i,a){var f=i.stateNode;if(f===null)return null;var m=f[Tn]||null;if(m===null)return null;f=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(f&&typeof f!="function")throw Error(r(231,a,typeof f));return f}var Ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bt=!1;if(Ds)try{var Sn={};Object.defineProperty(Sn,"passive",{get:function(){bt=!0}}),window.addEventListener("test",Sn,Sn),window.removeEventListener("test",Sn,Sn)}catch{bt=!1}var Js=null,go=null,mo=null;function er(){if(mo)return mo;var i,a=go,f=a.length,m,v="value"in Js?Js.value:Js.textContent,T=v.length;for(i=0;i<f&&a[i]===v[i];i++);var D=f-i;for(m=1;m<=D&&a[f-m]===v[T-m];m++);return mo=v.slice(i,1<m?1-m:void 0)}function pl(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function tr(){return!0}function oa(){return!1}function zn(i){function a(f,m,v,T,D){this._reactName=f,this._targetInst=v,this.type=m,this.nativeEvent=T,this.target=D,this.currentTarget=null;for(var F in i)i.hasOwnProperty(F)&&(f=i[F],this[F]=f?f(T):T[F]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?tr:oa,this.isPropagationStopped=oa,this}return E(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),a}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ir=zn(nr),Ls=E({},nr,{view:0,detail:0}),vi=zn(Ls),xl,yl,la,bl=E({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==la&&(la&&i.type==="mousemove"?(xl=i.screenX-la.screenX,yl=i.screenY-la.screenY):yl=xl=0,la=i),xl)},movementY:function(i){return"movementY"in i?i.movementY:yl}}),Pf=zn(bl),t0=E({},bl,{dataTransfer:0}),Zt=zn(t0),Uf=E({},Ls,{relatedTarget:0}),ca=zn(Uf),sr=E({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),n0=zn(sr),ye=E({},nr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),At=zn(ye),Jn=E({},nr,{data:0}),po=zn(Jn),Ff={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r0(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=s0[i])?!!a[i]:!1}function xo(){return r0}var Bn=E({},Ls,{key:function(i){if(i.key){var a=Ff[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=pl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?i0[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xo,charCode:function(i){return i.type==="keypress"?pl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?pl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Vc=zn(Bn),bn=E({},bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yo=zn(bn),Ar=E({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xo}),en=zn(Ar),it=E({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),a0=zn(it),cn=E({},bl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Tr=zn(cn),ua=E({},nr,{newState:0,oldState:0}),o0=zn(ua),gs=[9,13,27,32],bo=Ds&&"CompositionEvent"in window,fa=null;Ds&&"documentMode"in document&&(fa=document.documentMode);var zc=Ds&&"TextEvent"in window&&!fa,Hc=Ds&&(!bo||fa&&8<fa&&11>=fa),$c=" ",Vf=!1;function _r(i,a){switch(i){case"keyup":return gs.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var da=!1;function wo(i,a){switch(i){case"compositionend":return wl(a);case"keypress":return a.which!==32?null:(Vf=!0,$c);case"textInput":return i=a.data,i===$c&&Vf?null:i;default:return null}}function l0(i,a){if(da)return i==="compositionend"||!bo&&_r(i,a)?(i=er(),mo=go=Js=null,da=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Hc&&a.locale!=="ko"?null:a.data;default:return null}}var rr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vo(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!rr[i.type]:a==="textarea"}function Mi(i,a,f,m){Qs?aa?aa.push(m):aa=[m]:Qs=m,a=Nd(a,"onChange"),0<a.length&&(f=new ir("onChange","change",null,f,m),i.push({event:f,listeners:a}))}var ha=null,Ei=null;function c0(i){i2(i,0)}function ga(i){var a=Ws(i);if(yn(a))return i}function zf(i,a){if(i==="change")return a}var Gc=!1;if(Ds){var Vi;if(Ds){var qc="oninput"in document;if(!qc){var vl=document.createElement("div");vl.setAttribute("oninput","return;"),qc=typeof vl.oninput=="function"}Vi=qc}else Vi=!1;Gc=Vi&&(!document.documentMode||9<document.documentMode)}function ma(){ha&&(ha.detachEvent("onpropertychange",Ft),Ei=ha=null)}function Ft(i){if(i.propertyName==="value"&&ga(Ei)){var a=[];Mi(a,Ei,i,ra(i)),Ms(c0,a)}}function El(i,a,f){i==="focusin"?(ma(),ha=a,Ei=f,ha.attachEvent("onpropertychange",Ft)):i==="focusout"&&ma()}function L(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ga(Ei)}function s(i,a){if(i==="click")return ga(a)}function o(i,a){if(i==="input"||i==="change")return ga(a)}function c(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var d=typeof Object.is=="function"?Object.is:c;function h(i,a){if(d(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var f=Object.keys(i),m=Object.keys(a);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var v=f[m];if(!Fe.call(a,v)||!d(i[v],a[v]))return!1}return!0}function p(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function w(i,a){var f=p(i);i=0;for(var m;f;){if(f.nodeType===3){if(m=i+f.textContent.length,i<=a&&m>=a)return{node:f,offset:a-i};i=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=p(f)}}function S(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?S(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function _(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=ts(i.document);a instanceof i.HTMLIFrameElement;){try{var f=typeof a.contentWindow.location.href=="string"}catch{f=!1}if(f)i=a.contentWindow;else break;a=ts(i.document)}return a}function I(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var k=Ds&&"documentMode"in document&&11>=document.documentMode,P=null,$=null,Z=null,ee=!1;function ue(i,a,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;ee||P==null||P!==ts(m)||(m=P,"selectionStart"in m&&I(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Z&&h(Z,m)||(Z=m,m=Nd($,"onSelect"),0<m.length&&(a=new ir("onSelect","select",null,a,f),i.push({event:a,listeners:m}),a.target=P)))}function pe(i,a){var f={};return f[i.toLowerCase()]=a.toLowerCase(),f["Webkit"+i]="webkit"+a,f["Moz"+i]="moz"+a,f}var Me={animationend:pe("Animation","AnimationEnd"),animationiteration:pe("Animation","AnimationIteration"),animationstart:pe("Animation","AnimationStart"),transitionrun:pe("Transition","TransitionRun"),transitionstart:pe("Transition","TransitionStart"),transitioncancel:pe("Transition","TransitionCancel"),transitionend:pe("Transition","TransitionEnd")},ke={},Ie={};Ds&&(Ie=document.createElement("div").style,"AnimationEvent"in window||(delete Me.animationend.animation,delete Me.animationiteration.animation,delete Me.animationstart.animation),"TransitionEvent"in window||delete Me.transitionend.transition);function wt(i){if(ke[i])return ke[i];if(!Me[i])return i;var a=Me[i],f;for(f in a)if(a.hasOwnProperty(f)&&f in Ie)return ke[i]=a[f];return i}var pt=wt("animationend"),gi=wt("animationiteration"),zi=wt("animationstart"),Si=wt("transitionrun"),tn=wt("transitionstart"),ei=wt("transitioncancel"),Ci=wt("transitionend"),Nr=new Map,ar="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ar.push("scrollEnd");function ns(i,a){Nr.set(i,a),oi(a,[i])}var Hf=new WeakMap;function ms(i,a){if(typeof i=="object"&&i!==null){var f=Hf.get(i);return f!==void 0?f:(a={value:i,source:a,stack:dl(a)},Hf.set(i,a),a)}return{value:i,source:a,stack:dl(a)}}var ps=[],Sl=0,u0=0;function $f(){for(var i=Sl,a=u0=Sl=0;a<i;){var f=ps[a];ps[a++]=null;var m=ps[a];ps[a++]=null;var v=ps[a];ps[a++]=null;var T=ps[a];if(ps[a++]=null,m!==null&&v!==null){var D=m.pending;D===null?v.next=v:(v.next=D.next,D.next=v),m.pending=v}T!==0&&Vp(f,v,T)}}function Gf(i,a,f,m){ps[Sl++]=i,ps[Sl++]=a,ps[Sl++]=f,ps[Sl++]=m,u0|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function f0(i,a,f,m){return Gf(i,a,f,m),qf(i)}function Cl(i,a){return Gf(i,null,null,a),qf(i)}function Vp(i,a,f){i.lanes|=f;var m=i.alternate;m!==null&&(m.lanes|=f);for(var v=!1,T=i.return;T!==null;)T.childLanes|=f,m=T.alternate,m!==null&&(m.childLanes|=f),T.tag===22&&(i=T.stateNode,i===null||i._visibility&1||(v=!0)),i=T,T=T.return;return i.tag===3?(T=i.stateNode,v&&a!==null&&(v=31-We(f),i=T.hiddenUpdates,m=i[v],m===null?i[v]=[a]:m.push(a),a.lane=f|536870912),T):null}function qf(i){if(50<xu)throw xu=0,x1=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Al={};function LC(i,a,f,m){this.tag=i,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(i,a,f,m){return new LC(i,a,f,m)}function d0(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Rr(i,a){var f=i.alternate;return f===null?(f=is(i.tag,a,i.key,i.mode),f.elementType=i.elementType,f.type=i.type,f.stateNode=i.stateNode,f.alternate=i,i.alternate=f):(f.pendingProps=a,f.type=i.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=i.flags&65011712,f.childLanes=i.childLanes,f.lanes=i.lanes,f.child=i.child,f.memoizedProps=i.memoizedProps,f.memoizedState=i.memoizedState,f.updateQueue=i.updateQueue,a=i.dependencies,f.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},f.sibling=i.sibling,f.index=i.index,f.ref=i.ref,f.refCleanup=i.refCleanup,f}function zp(i,a){i.flags&=65011714;var f=i.alternate;return f===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=f.childLanes,i.lanes=f.lanes,i.child=f.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=f.memoizedProps,i.memoizedState=f.memoizedState,i.updateQueue=f.updateQueue,i.type=f.type,a=f.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Yf(i,a,f,m,v,T){var D=0;if(m=i,typeof i=="function")d0(i)&&(D=1);else if(typeof i=="string")D=jA(i,f,Ne.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case Q:return i=is(31,f,a,v),i.elementType=Q,i.lanes=T,i;case M:return Eo(f.children,v,T,a);case j:D=8,v|=24;break;case U:return i=is(12,f,a,v|2),i.elementType=U,i.lanes=T,i;case G:return i=is(13,f,a,v),i.elementType=G,i.lanes=T,i;case ne:return i=is(19,f,a,v),i.elementType=ne,i.lanes=T,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case H:case B:D=10;break e;case q:D=9;break e;case V:D=11;break e;case K:D=14;break e;case ae:D=16,m=null;break e}D=29,f=Error(r(130,i===null?"null":typeof i,"")),m=null}return a=is(D,f,a,v),a.elementType=i,a.type=m,a.lanes=T,a}function Eo(i,a,f,m){return i=is(7,i,m,a),i.lanes=f,i}function h0(i,a,f){return i=is(6,i,null,a),i.lanes=f,i}function g0(i,a,f){return a=is(4,i.children!==null?i.children:[],i.key,a),a.lanes=f,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Tl=[],_l=0,Xf=null,Wf=0,xs=[],ys=0,So=null,Or=1,Ir="";function Co(i,a){Tl[_l++]=Wf,Tl[_l++]=Xf,Xf=i,Wf=a}function Hp(i,a,f){xs[ys++]=Or,xs[ys++]=Ir,xs[ys++]=So,So=i;var m=Or;i=Ir;var v=32-We(m)-1;m&=~(1<<v),f+=1;var T=32-We(a)+v;if(30<T){var D=v-v%5;T=(m&(1<<D)-1).toString(32),m>>=D,v-=D,Or=1<<32-We(a)+v|f<<v|m,Ir=T+i}else Or=1<<T|f<<v|m,Ir=i}function m0(i){i.return!==null&&(Co(i,1),Hp(i,1,0))}function p0(i){for(;i===Xf;)Xf=Tl[--_l],Tl[_l]=null,Wf=Tl[--_l],Tl[_l]=null;for(;i===So;)So=xs[--ys],xs[ys]=null,Ir=xs[--ys],xs[ys]=null,Or=xs[--ys],xs[ys]=null}var Di=null,Rn=null,Xt=!1,Ao=null,or=!1,x0=Error(r(519));function To(i){var a=Error(r(418,""));throw Wc(ms(a,i)),x0}function $p(i){var a=i.stateNode,f=i.type,m=i.memoizedProps;switch(a[ri]=i,a[Tn]=m,f){case"dialog":Pt("cancel",a),Pt("close",a);break;case"iframe":case"object":case"embed":Pt("load",a);break;case"video":case"audio":for(f=0;f<bu.length;f++)Pt(bu[f],a);break;case"source":Pt("error",a);break;case"img":case"image":case"link":Pt("error",a),Pt("load",a);break;case"details":Pt("toggle",a);break;case"input":Pt("invalid",a),Zn(a,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),hl(a);break;case"select":Pt("invalid",a);break;case"textarea":Pt("invalid",a),kn(a,m.value,m.defaultValue,m.children),hl(a)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||a.textContent===""+f||m.suppressHydrationWarning===!0||o2(a.textContent,f)?(m.popover!=null&&(Pt("beforetoggle",a),Pt("toggle",a)),m.onScroll!=null&&Pt("scroll",a),m.onScrollEnd!=null&&Pt("scrollend",a),m.onClick!=null&&(a.onclick=Rd),a=!0):a=!1,a||To(i)}function Gp(i){for(Di=i.return;Di;)switch(Di.tag){case 5:case 13:or=!1;return;case 27:case 3:or=!0;return;default:Di=Di.return}}function Yc(i){if(i!==Di)return!1;if(!Xt)return Gp(i),Xt=!0,!1;var a=i.tag,f;if((f=a!==3&&a!==27)&&((f=a===5)&&(f=i.type,f=!(f!=="form"&&f!=="button")||D1(i.type,i.memoizedProps)),f=!f),f&&Rn&&To(i),Gp(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(f=i.data,f==="/$"){if(a===0){Rn=js(i.nextSibling);break e}a--}else f!=="$"&&f!=="$!"&&f!=="$?"||a++;i=i.nextSibling}Rn=null}}else a===27?(a=Rn,Ia(i.type)?(i=B1,B1=null,Rn=i):Rn=a):Rn=Di?js(i.stateNode.nextSibling):null;return!0}function Xc(){Rn=Di=null,Xt=!1}function qp(){var i=Ao;return i!==null&&(Gi===null?Gi=i:Gi.push.apply(Gi,i),Ao=null),i}function Wc(i){Ao===null?Ao=[i]:Ao.push(i)}var y0=X(null),_o=null,Mr=null;function pa(i,a,f){oe(y0,a._currentValue),a._currentValue=f}function Dr(i){i._currentValue=y0.current,le(y0)}function b0(i,a,f){for(;i!==null;){var m=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),i===f)break;i=i.return}}function w0(i,a,f,m){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var T=v.dependencies;if(T!==null){var D=v.child;T=T.firstContext;e:for(;T!==null;){var F=T;T=v;for(var W=0;W<a.length;W++)if(F.context===a[W]){T.lanes|=f,F=T.alternate,F!==null&&(F.lanes|=f),b0(T.return,f,i),m||(D=null);break e}T=F.next}}else if(v.tag===18){if(D=v.return,D===null)throw Error(r(341));D.lanes|=f,T=D.alternate,T!==null&&(T.lanes|=f),b0(D,f,i),D=null}else D=v.child;if(D!==null)D.return=v;else for(D=v;D!==null;){if(D===i){D=null;break}if(v=D.sibling,v!==null){v.return=D.return,D=v;break}D=D.return}v=D}}function Kc(i,a,f,m){i=null;for(var v=a,T=!1;v!==null;){if(!T){if((v.flags&524288)!==0)T=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var D=v.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var F=v.type;d(v.pendingProps.value,D.value)||(i!==null?i.push(F):i=[F])}}else if(v===ht.current){if(D=v.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(Au):i=[Au])}v=v.return}i!==null&&w0(a,i,f,m),a.flags|=262144}function Kf(i){for(i=i.firstContext;i!==null;){if(!d(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function No(i){_o=i,Mr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ai(i){return Yp(_o,i)}function Zf(i,a){return _o===null&&No(i),Yp(i,a)}function Yp(i,a){var f=a._currentValue;if(a={context:a,memoizedValue:f,next:null},Mr===null){if(i===null)throw Error(r(308));Mr=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Mr=Mr.next=a;return f}var kC=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(f,m){i.push(m)}};this.abort=function(){a.aborted=!0,i.forEach(function(f){return f()})}},jC=t.unstable_scheduleCallback,BC=t.unstable_NormalPriority,ti={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function v0(){return{controller:new kC,data:new Map,refCount:0}}function Zc(i){i.refCount--,i.refCount===0&&jC(BC,function(){i.controller.abort()})}var Qc=null,E0=0,Nl=0,Rl=null;function PC(i,a){if(Qc===null){var f=Qc=[];E0=0,Nl=C1(),Rl={status:"pending",value:void 0,then:function(m){f.push(m)}}}return E0++,a.then(Xp,Xp),a}function Xp(){if(--E0===0&&Qc!==null){Rl!==null&&(Rl.status="fulfilled");var i=Qc;Qc=null,Nl=0,Rl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function UC(i,a){var f=[],m={status:"pending",value:null,reason:null,then:function(v){f.push(v)}};return i.then(function(){m.status="fulfilled",m.value=a;for(var v=0;v<f.length;v++)(0,f[v])(a)},function(v){for(m.status="rejected",m.reason=v,v=0;v<f.length;v++)(0,f[v])(void 0)}),m}var Wp=se.S;se.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&PC(i,a),Wp!==null&&Wp(i,a)};var Ro=X(null);function S0(){var i=Ro.current;return i!==null?i:hn.pooledCache}function Qf(i,a){a===null?oe(Ro,Ro.current):oe(Ro,a.pool)}function Kp(){var i=S0();return i===null?null:{parent:ti._currentValue,pool:i}}var Jc=Error(r(460)),Zp=Error(r(474)),Jf=Error(r(542)),C0={then:function(){}};function Qp(i){return i=i.status,i==="fulfilled"||i==="rejected"}function ed(){}function Jp(i,a,f){switch(f=i[f],f===void 0?i.push(a):f!==a&&(a.then(ed,ed),a=f),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,tx(i),i;default:if(typeof a.status=="string")a.then(ed,ed);else{if(i=hn,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(m){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=m}},function(m){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=m}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,tx(i),i}throw eu=a,Jc}}var eu=null;function ex(){if(eu===null)throw Error(r(459));var i=eu;return eu=null,i}function tx(i){if(i===Jc||i===Jf)throw Error(r(483))}var xa=!1;function A0(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function T0(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ya(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ba(i,a,f){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(nn&2)!==0){var v=m.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),m.pending=a,a=qf(i),Vp(i,null,f),a}return Gf(i,m,a,f),qf(i)}function tu(i,a,f){if(a=a.updateQueue,a!==null&&(a=a.shared,(f&4194048)!==0)){var m=a.lanes;m&=i.pendingLanes,f|=m,a.lanes=f,Ui(i,f)}}function _0(i,a){var f=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var v=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var D={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};T===null?v=T=D:T=T.next=D,f=f.next}while(f!==null);T===null?v=T=a:T=T.next=a}else v=T=a;f={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:T,shared:m.shared,callbacks:m.callbacks},i.updateQueue=f;return}i=f.lastBaseUpdate,i===null?f.firstBaseUpdate=a:i.next=a,f.lastBaseUpdate=a}var N0=!1;function nu(){if(N0){var i=Rl;if(i!==null)throw i}}function iu(i,a,f,m){N0=!1;var v=i.updateQueue;xa=!1;var T=v.firstBaseUpdate,D=v.lastBaseUpdate,F=v.shared.pending;if(F!==null){v.shared.pending=null;var W=F,ge=W.next;W.next=null,D===null?T=ge:D.next=ge,D=W;var ve=i.alternate;ve!==null&&(ve=ve.updateQueue,F=ve.lastBaseUpdate,F!==D&&(F===null?ve.firstBaseUpdate=ge:F.next=ge,ve.lastBaseUpdate=W))}if(T!==null){var Se=v.baseState;D=0,ve=ge=W=null,F=T;do{var me=F.lane&-536870913,xe=me!==F.lane;if(xe?(Ht&me)===me:(m&me)===me){me!==0&&me===Nl&&(N0=!0),ve!==null&&(ve=ve.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var ft=i,at=F;me=a;var ln=f;switch(at.tag){case 1:if(ft=at.payload,typeof ft=="function"){Se=ft.call(ln,Se,me);break e}Se=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=at.payload,me=typeof ft=="function"?ft.call(ln,Se,me):ft,me==null)break e;Se=E({},Se,me);break e;case 2:xa=!0}}me=F.callback,me!==null&&(i.flags|=64,xe&&(i.flags|=8192),xe=v.callbacks,xe===null?v.callbacks=[me]:xe.push(me))}else xe={lane:me,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ve===null?(ge=ve=xe,W=Se):ve=ve.next=xe,D|=me;if(F=F.next,F===null){if(F=v.shared.pending,F===null)break;xe=F,F=xe.next,xe.next=null,v.lastBaseUpdate=xe,v.shared.pending=null}}while(!0);ve===null&&(W=Se),v.baseState=W,v.firstBaseUpdate=ge,v.lastBaseUpdate=ve,T===null&&(v.shared.lanes=0),_a|=D,i.lanes=D,i.memoizedState=Se}}function nx(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function ix(i,a){var f=i.callbacks;if(f!==null)for(i.callbacks=null,i=0;i<f.length;i++)nx(f[i],a)}var Ol=X(null),td=X(0);function sx(i,a){i=Fr,oe(td,i),oe(Ol,a),Fr=i|a.baseLanes}function R0(){oe(td,Fr),oe(Ol,Ol.current)}function O0(){Fr=td.current,le(Ol),le(td)}var wa=0,It=null,an=null,Hn=null,nd=!1,Il=!1,Oo=!1,id=0,su=0,Ml=null,FC=0;function Pn(){throw Error(r(321))}function I0(i,a){if(a===null)return!1;for(var f=0;f<a.length&&f<i.length;f++)if(!d(i[f],a[f]))return!1;return!0}function M0(i,a,f,m,v,T){return wa=T,It=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,se.H=i===null||i.memoizedState===null?Vx:zx,Oo=!1,T=f(m,v),Oo=!1,Il&&(T=ax(a,f,m,v)),rx(i),T}function rx(i){se.H=cd;var a=an!==null&&an.next!==null;if(wa=0,Hn=an=It=null,nd=!1,su=0,Ml=null,a)throw Error(r(300));i===null||li||(i=i.dependencies,i!==null&&Kf(i)&&(li=!0))}function ax(i,a,f,m){It=i;var v=0;do{if(Il&&(Ml=null),su=0,Il=!1,25<=v)throw Error(r(301));if(v+=1,Hn=an=null,i.updateQueue!=null){var T=i.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}se.H=YC,T=a(f,m)}while(Il);return T}function VC(){var i=se.H,a=i.useState()[0];return a=typeof a.then=="function"?ru(a):a,i=i.useState()[0],(an!==null?an.memoizedState:null)!==i&&(It.flags|=1024),a}function D0(){var i=id!==0;return id=0,i}function L0(i,a,f){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~f}function k0(i){if(nd){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}nd=!1}wa=0,Hn=an=It=null,Il=!1,su=id=0,Ml=null}function Hi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?It.memoizedState=Hn=i:Hn=Hn.next=i,Hn}function $n(){if(an===null){var i=It.alternate;i=i!==null?i.memoizedState:null}else i=an.next;var a=Hn===null?It.memoizedState:Hn.next;if(a!==null)Hn=a,an=i;else{if(i===null)throw It.alternate===null?Error(r(467)):Error(r(310));an=i,i={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},Hn===null?It.memoizedState=Hn=i:Hn=Hn.next=i}return Hn}function j0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ru(i){var a=su;return su+=1,Ml===null&&(Ml=[]),i=Jp(Ml,i,a),a=It,(Hn===null?a.memoizedState:Hn.next)===null&&(a=a.alternate,se.H=a===null||a.memoizedState===null?Vx:zx),i}function sd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ru(i);if(i.$$typeof===B)return Ai(i)}throw Error(r(438,String(i)))}function B0(i){var a=null,f=It.updateQueue;if(f!==null&&(a=f.memoCache),a==null){var m=It.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(a={data:m.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),f===null&&(f=j0(),It.updateQueue=f),f.memoCache=a,f=a.data[a.index],f===void 0)for(f=a.data[a.index]=Array(i),m=0;m<i;m++)f[m]=we;return a.index++,f}function Lr(i,a){return typeof a=="function"?a(i):a}function rd(i){var a=$n();return P0(a,an,i)}function P0(i,a,f){var m=i.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=f;var v=i.baseQueue,T=m.pending;if(T!==null){if(v!==null){var D=v.next;v.next=T.next,T.next=D}a.baseQueue=v=T,m.pending=null}if(T=i.baseState,v===null)i.memoizedState=T;else{a=v.next;var F=D=null,W=null,ge=a,ve=!1;do{var Se=ge.lane&-536870913;if(Se!==ge.lane?(Ht&Se)===Se:(wa&Se)===Se){var me=ge.revertLane;if(me===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Se===Nl&&(ve=!0);else if((wa&me)===me){ge=ge.next,me===Nl&&(ve=!0);continue}else Se={lane:0,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},W===null?(F=W=Se,D=T):W=W.next=Se,It.lanes|=me,_a|=me;Se=ge.action,Oo&&f(T,Se),T=ge.hasEagerState?ge.eagerState:f(T,Se)}else me={lane:Se,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},W===null?(F=W=me,D=T):W=W.next=me,It.lanes|=Se,_a|=Se;ge=ge.next}while(ge!==null&&ge!==a);if(W===null?D=T:W.next=F,!d(T,i.memoizedState)&&(li=!0,ve&&(f=Rl,f!==null)))throw f;i.memoizedState=T,i.baseState=D,i.baseQueue=W,m.lastRenderedState=T}return v===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function U0(i){var a=$n(),f=a.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=i;var m=f.dispatch,v=f.pending,T=a.memoizedState;if(v!==null){f.pending=null;var D=v=v.next;do T=i(T,D.action),D=D.next;while(D!==v);d(T,a.memoizedState)||(li=!0),a.memoizedState=T,a.baseQueue===null&&(a.baseState=T),f.lastRenderedState=T}return[T,m]}function ox(i,a,f){var m=It,v=$n(),T=Xt;if(T){if(f===void 0)throw Error(r(407));f=f()}else f=a();var D=!d((an||v).memoizedState,f);D&&(v.memoizedState=f,li=!0),v=v.queue;var F=ux.bind(null,m,v,i);if(au(2048,8,F,[i]),v.getSnapshot!==a||D||Hn!==null&&Hn.memoizedState.tag&1){if(m.flags|=2048,Dl(9,ad(),cx.bind(null,m,v,f,a),null),hn===null)throw Error(r(349));T||(wa&124)!==0||lx(m,a,f)}return f}function lx(i,a,f){i.flags|=16384,i={getSnapshot:a,value:f},a=It.updateQueue,a===null?(a=j0(),It.updateQueue=a,a.stores=[i]):(f=a.stores,f===null?a.stores=[i]:f.push(i))}function cx(i,a,f,m){a.value=f,a.getSnapshot=m,fx(a)&&dx(i)}function ux(i,a,f){return f(function(){fx(a)&&dx(i)})}function fx(i){var a=i.getSnapshot;i=i.value;try{var f=a();return!d(i,f)}catch{return!0}}function dx(i){var a=Cl(i,2);a!==null&&ls(a,i,2)}function F0(i){var a=Hi();if(typeof i=="function"){var f=i;if(i=f(),Oo){Xe(!0);try{f()}finally{Xe(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:i},a}function hx(i,a,f,m){return i.baseState=f,P0(i,an,typeof m=="function"?m:Lr)}function zC(i,a,f,m,v){if(ld(i))throw Error(r(485));if(i=a.action,i!==null){var T={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){T.listeners.push(D)}};se.T!==null?f(!0):T.isTransition=!1,m(T),f=a.pending,f===null?(T.next=a.pending=T,gx(a,T)):(T.next=f.next,a.pending=f.next=T)}}function gx(i,a){var f=a.action,m=a.payload,v=i.state;if(a.isTransition){var T=se.T,D={};se.T=D;try{var F=f(v,m),W=se.S;W!==null&&W(D,F),mx(i,a,F)}catch(ge){V0(i,a,ge)}finally{se.T=T}}else try{T=f(v,m),mx(i,a,T)}catch(ge){V0(i,a,ge)}}function mx(i,a,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){px(i,a,m)},function(m){return V0(i,a,m)}):px(i,a,f)}function px(i,a,f){a.status="fulfilled",a.value=f,xx(a),i.state=f,a=i.pending,a!==null&&(f=a.next,f===a?i.pending=null:(f=f.next,a.next=f,gx(i,f)))}function V0(i,a,f){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do a.status="rejected",a.reason=f,xx(a),a=a.next;while(a!==m)}i.action=null}function xx(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function yx(i,a){return a}function bx(i,a){if(Xt){var f=hn.formState;if(f!==null){e:{var m=It;if(Xt){if(Rn){t:{for(var v=Rn,T=or;v.nodeType!==8;){if(!T){v=null;break t}if(v=js(v.nextSibling),v===null){v=null;break t}}T=v.data,v=T==="F!"||T==="F"?v:null}if(v){Rn=js(v.nextSibling),m=v.data==="F!";break e}}To(m)}m=!1}m&&(a=f[0])}}return f=Hi(),f.memoizedState=f.baseState=a,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yx,lastRenderedState:a},f.queue=m,f=Px.bind(null,It,m),m.dispatch=f,m=F0(!1),T=q0.bind(null,It,!1,m.queue),m=Hi(),v={state:a,dispatch:null,action:i,pending:null},m.queue=v,f=zC.bind(null,It,v,T,f),v.dispatch=f,m.memoizedState=i,[a,f,!1]}function wx(i){var a=$n();return vx(a,an,i)}function vx(i,a,f){if(a=P0(i,a,yx)[0],i=rd(Lr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var m=ru(a)}catch(D){throw D===Jc?Jf:D}else m=a;a=$n();var v=a.queue,T=v.dispatch;return f!==a.memoizedState&&(It.flags|=2048,Dl(9,ad(),HC.bind(null,v,f),null)),[m,T,i]}function HC(i,a){i.action=a}function Ex(i){var a=$n(),f=an;if(f!==null)return vx(a,f,i);$n(),a=a.memoizedState,f=$n();var m=f.queue.dispatch;return f.memoizedState=i,[a,m,!1]}function Dl(i,a,f,m){return i={tag:i,create:f,deps:m,inst:a,next:null},a=It.updateQueue,a===null&&(a=j0(),It.updateQueue=a),f=a.lastEffect,f===null?a.lastEffect=i.next=i:(m=f.next,f.next=i,i.next=m,a.lastEffect=i),i}function ad(){return{destroy:void 0,resource:void 0}}function Sx(){return $n().memoizedState}function od(i,a,f,m){var v=Hi();m=m===void 0?null:m,It.flags|=i,v.memoizedState=Dl(1|a,ad(),f,m)}function au(i,a,f,m){var v=$n();m=m===void 0?null:m;var T=v.memoizedState.inst;an!==null&&m!==null&&I0(m,an.memoizedState.deps)?v.memoizedState=Dl(a,T,f,m):(It.flags|=i,v.memoizedState=Dl(1|a,T,f,m))}function Cx(i,a){od(8390656,8,i,a)}function Ax(i,a){au(2048,8,i,a)}function Tx(i,a){return au(4,2,i,a)}function _x(i,a){return au(4,4,i,a)}function Nx(i,a){if(typeof a=="function"){i=i();var f=a(i);return function(){typeof f=="function"?f():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Rx(i,a,f){f=f!=null?f.concat([i]):null,au(4,4,Nx.bind(null,a,i),f)}function z0(){}function Ox(i,a){var f=$n();a=a===void 0?null:a;var m=f.memoizedState;return a!==null&&I0(a,m[1])?m[0]:(f.memoizedState=[i,a],i)}function Ix(i,a){var f=$n();a=a===void 0?null:a;var m=f.memoizedState;if(a!==null&&I0(a,m[1]))return m[0];if(m=i(),Oo){Xe(!0);try{i()}finally{Xe(!1)}}return f.memoizedState=[m,a],m}function H0(i,a,f){return f===void 0||(wa&1073741824)!==0?i.memoizedState=a:(i.memoizedState=f,i=Ly(),It.lanes|=i,_a|=i,f)}function Mx(i,a,f,m){return d(f,a)?f:Ol.current!==null?(i=H0(i,f,m),d(i,a)||(li=!0),i):(wa&42)===0?(li=!0,i.memoizedState=f):(i=Ly(),It.lanes|=i,_a|=i,a)}function Dx(i,a,f,m,v){var T=ce.p;ce.p=T!==0&&8>T?T:8;var D=se.T,F={};se.T=F,q0(i,!1,a,f);try{var W=v(),ge=se.S;if(ge!==null&&ge(F,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ve=UC(W,m);ou(i,a,ve,os(i))}else ou(i,a,m,os(i))}catch(Se){ou(i,a,{then:function(){},status:"rejected",reason:Se},os())}finally{ce.p=T,se.T=D}}function $C(){}function $0(i,a,f,m){if(i.tag!==5)throw Error(r(476));var v=Lx(i).queue;Dx(i,v,a,Le,f===null?$C:function(){return kx(i),f(m)})}function Lx(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Le,baseState:Le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:Le},next:null};var f={};return a.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:f},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function kx(i){var a=Lx(i).next.queue;ou(i,a,{},os())}function G0(){return Ai(Au)}function jx(){return $n().memoizedState}function Bx(){return $n().memoizedState}function GC(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var f=os();i=ya(f);var m=ba(a,i,f);m!==null&&(ls(m,a,f),tu(m,a,f)),a={cache:v0()},i.payload=a;return}a=a.return}}function qC(i,a,f){var m=os();f={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},ld(i)?Ux(a,f):(f=f0(i,a,f,m),f!==null&&(ls(f,i,m),Fx(f,a,m)))}function Px(i,a,f){var m=os();ou(i,a,f,m)}function ou(i,a,f,m){var v={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(ld(i))Ux(a,v);else{var T=i.alternate;if(i.lanes===0&&(T===null||T.lanes===0)&&(T=a.lastRenderedReducer,T!==null))try{var D=a.lastRenderedState,F=T(D,f);if(v.hasEagerState=!0,v.eagerState=F,d(F,D))return Gf(i,a,v,0),hn===null&&$f(),!1}catch{}finally{}if(f=f0(i,a,v,m),f!==null)return ls(f,i,m),Fx(f,a,m),!0}return!1}function q0(i,a,f,m){if(m={lane:2,revertLane:C1(),action:m,hasEagerState:!1,eagerState:null,next:null},ld(i)){if(a)throw Error(r(479))}else a=f0(i,f,m,2),a!==null&&ls(a,i,2)}function ld(i){var a=i.alternate;return i===It||a!==null&&a===It}function Ux(i,a){Il=nd=!0;var f=i.pending;f===null?a.next=a:(a.next=f.next,f.next=a),i.pending=a}function Fx(i,a,f){if((f&4194048)!==0){var m=a.lanes;m&=i.pendingLanes,f|=m,a.lanes=f,Ui(i,f)}}var cd={readContext:Ai,use:sd,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useLayoutEffect:Pn,useInsertionEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useSyncExternalStore:Pn,useId:Pn,useHostTransitionStatus:Pn,useFormState:Pn,useActionState:Pn,useOptimistic:Pn,useMemoCache:Pn,useCacheRefresh:Pn},Vx={readContext:Ai,use:sd,useCallback:function(i,a){return Hi().memoizedState=[i,a===void 0?null:a],i},useContext:Ai,useEffect:Cx,useImperativeHandle:function(i,a,f){f=f!=null?f.concat([i]):null,od(4194308,4,Nx.bind(null,a,i),f)},useLayoutEffect:function(i,a){return od(4194308,4,i,a)},useInsertionEffect:function(i,a){od(4,2,i,a)},useMemo:function(i,a){var f=Hi();a=a===void 0?null:a;var m=i();if(Oo){Xe(!0);try{i()}finally{Xe(!1)}}return f.memoizedState=[m,a],m},useReducer:function(i,a,f){var m=Hi();if(f!==void 0){var v=f(a);if(Oo){Xe(!0);try{f(a)}finally{Xe(!1)}}}else v=a;return m.memoizedState=m.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},m.queue=i,i=i.dispatch=qC.bind(null,It,i),[m.memoizedState,i]},useRef:function(i){var a=Hi();return i={current:i},a.memoizedState=i},useState:function(i){i=F0(i);var a=i.queue,f=Px.bind(null,It,a);return a.dispatch=f,[i.memoizedState,f]},useDebugValue:z0,useDeferredValue:function(i,a){var f=Hi();return H0(f,i,a)},useTransition:function(){var i=F0(!1);return i=Dx.bind(null,It,i.queue,!0,!1),Hi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,f){var m=It,v=Hi();if(Xt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=a(),hn===null)throw Error(r(349));(Ht&124)!==0||lx(m,a,f)}v.memoizedState=f;var T={value:f,getSnapshot:a};return v.queue=T,Cx(ux.bind(null,m,T,i),[i]),m.flags|=2048,Dl(9,ad(),cx.bind(null,m,T,f,a),null),f},useId:function(){var i=Hi(),a=hn.identifierPrefix;if(Xt){var f=Ir,m=Or;f=(m&~(1<<32-We(m)-1)).toString(32)+f,a="«"+a+"R"+f,f=id++,0<f&&(a+="H"+f.toString(32)),a+="»"}else f=FC++,a="«"+a+"r"+f.toString(32)+"»";return i.memoizedState=a},useHostTransitionStatus:G0,useFormState:bx,useActionState:bx,useOptimistic:function(i){var a=Hi();a.memoizedState=a.baseState=i;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=f,a=q0.bind(null,It,!0,f),f.dispatch=a,[i,a]},useMemoCache:B0,useCacheRefresh:function(){return Hi().memoizedState=GC.bind(null,It)}},zx={readContext:Ai,use:sd,useCallback:Ox,useContext:Ai,useEffect:Ax,useImperativeHandle:Rx,useInsertionEffect:Tx,useLayoutEffect:_x,useMemo:Ix,useReducer:rd,useRef:Sx,useState:function(){return rd(Lr)},useDebugValue:z0,useDeferredValue:function(i,a){var f=$n();return Mx(f,an.memoizedState,i,a)},useTransition:function(){var i=rd(Lr)[0],a=$n().memoizedState;return[typeof i=="boolean"?i:ru(i),a]},useSyncExternalStore:ox,useId:jx,useHostTransitionStatus:G0,useFormState:wx,useActionState:wx,useOptimistic:function(i,a){var f=$n();return hx(f,an,i,a)},useMemoCache:B0,useCacheRefresh:Bx},YC={readContext:Ai,use:sd,useCallback:Ox,useContext:Ai,useEffect:Ax,useImperativeHandle:Rx,useInsertionEffect:Tx,useLayoutEffect:_x,useMemo:Ix,useReducer:U0,useRef:Sx,useState:function(){return U0(Lr)},useDebugValue:z0,useDeferredValue:function(i,a){var f=$n();return an===null?H0(f,i,a):Mx(f,an.memoizedState,i,a)},useTransition:function(){var i=U0(Lr)[0],a=$n().memoizedState;return[typeof i=="boolean"?i:ru(i),a]},useSyncExternalStore:ox,useId:jx,useHostTransitionStatus:G0,useFormState:Ex,useActionState:Ex,useOptimistic:function(i,a){var f=$n();return an!==null?hx(f,an,i,a):(f.baseState=i,[i,f.queue.dispatch])},useMemoCache:B0,useCacheRefresh:Bx},Ll=null,lu=0;function ud(i){var a=lu;return lu+=1,Ll===null&&(Ll=[]),Jp(Ll,i,a)}function cu(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function fd(i,a){throw a.$$typeof===A?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Hx(i){var a=i._init;return a(i._payload)}function $x(i){function a(re,te){if(i){var de=re.deletions;de===null?(re.deletions=[te],re.flags|=16):de.push(te)}}function f(re,te){if(!i)return null;for(;te!==null;)a(re,te),te=te.sibling;return null}function m(re){for(var te=new Map;re!==null;)re.key!==null?te.set(re.key,re):te.set(re.index,re),re=re.sibling;return te}function v(re,te){return re=Rr(re,te),re.index=0,re.sibling=null,re}function T(re,te,de){return re.index=de,i?(de=re.alternate,de!==null?(de=de.index,de<te?(re.flags|=67108866,te):de):(re.flags|=67108866,te)):(re.flags|=1048576,te)}function D(re){return i&&re.alternate===null&&(re.flags|=67108866),re}function F(re,te,de,Ee){return te===null||te.tag!==6?(te=h0(de,re.mode,Ee),te.return=re,te):(te=v(te,de),te.return=re,te)}function W(re,te,de,Ee){var qe=de.type;return qe===M?ve(re,te,de.props.children,Ee,de.key):te!==null&&(te.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===ae&&Hx(qe)===te.type)?(te=v(te,de.props),cu(te,de),te.return=re,te):(te=Yf(de.type,de.key,de.props,null,re.mode,Ee),cu(te,de),te.return=re,te)}function ge(re,te,de,Ee){return te===null||te.tag!==4||te.stateNode.containerInfo!==de.containerInfo||te.stateNode.implementation!==de.implementation?(te=g0(de,re.mode,Ee),te.return=re,te):(te=v(te,de.children||[]),te.return=re,te)}function ve(re,te,de,Ee,qe){return te===null||te.tag!==7?(te=Eo(de,re.mode,Ee,qe),te.return=re,te):(te=v(te,de),te.return=re,te)}function Se(re,te,de){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=h0(""+te,re.mode,de),te.return=re,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case N:return de=Yf(te.type,te.key,te.props,null,re.mode,de),cu(de,te),de.return=re,de;case O:return te=g0(te,re.mode,de),te.return=re,te;case ae:var Ee=te._init;return te=Ee(te._payload),Se(re,te,de)}if(ie(te)||_e(te))return te=Eo(te,re.mode,de,null),te.return=re,te;if(typeof te.then=="function")return Se(re,ud(te),de);if(te.$$typeof===B)return Se(re,Zf(re,te),de);fd(re,te)}return null}function me(re,te,de,Ee){var qe=te!==null?te.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return qe!==null?null:F(re,te,""+de,Ee);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case N:return de.key===qe?W(re,te,de,Ee):null;case O:return de.key===qe?ge(re,te,de,Ee):null;case ae:return qe=de._init,de=qe(de._payload),me(re,te,de,Ee)}if(ie(de)||_e(de))return qe!==null?null:ve(re,te,de,Ee,null);if(typeof de.then=="function")return me(re,te,ud(de),Ee);if(de.$$typeof===B)return me(re,te,Zf(re,de),Ee);fd(re,de)}return null}function xe(re,te,de,Ee,qe){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return re=re.get(de)||null,F(te,re,""+Ee,qe);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case N:return re=re.get(Ee.key===null?de:Ee.key)||null,W(te,re,Ee,qe);case O:return re=re.get(Ee.key===null?de:Ee.key)||null,ge(te,re,Ee,qe);case ae:var kt=Ee._init;return Ee=kt(Ee._payload),xe(re,te,de,Ee,qe)}if(ie(Ee)||_e(Ee))return re=re.get(de)||null,ve(te,re,Ee,qe,null);if(typeof Ee.then=="function")return xe(re,te,de,ud(Ee),qe);if(Ee.$$typeof===B)return xe(re,te,de,Zf(te,Ee),qe);fd(te,Ee)}return null}function ft(re,te,de,Ee){for(var qe=null,kt=null,Je=te,ot=te=0,ui=null;Je!==null&&ot<de.length;ot++){Je.index>ot?(ui=Je,Je=null):ui=Je.sibling;var Yt=me(re,Je,de[ot],Ee);if(Yt===null){Je===null&&(Je=ui);break}i&&Je&&Yt.alternate===null&&a(re,Je),te=T(Yt,te,ot),kt===null?qe=Yt:kt.sibling=Yt,kt=Yt,Je=ui}if(ot===de.length)return f(re,Je),Xt&&Co(re,ot),qe;if(Je===null){for(;ot<de.length;ot++)Je=Se(re,de[ot],Ee),Je!==null&&(te=T(Je,te,ot),kt===null?qe=Je:kt.sibling=Je,kt=Je);return Xt&&Co(re,ot),qe}for(Je=m(Je);ot<de.length;ot++)ui=xe(Je,re,ot,de[ot],Ee),ui!==null&&(i&&ui.alternate!==null&&Je.delete(ui.key===null?ot:ui.key),te=T(ui,te,ot),kt===null?qe=ui:kt.sibling=ui,kt=ui);return i&&Je.forEach(function(ja){return a(re,ja)}),Xt&&Co(re,ot),qe}function at(re,te,de,Ee){if(de==null)throw Error(r(151));for(var qe=null,kt=null,Je=te,ot=te=0,ui=null,Yt=de.next();Je!==null&&!Yt.done;ot++,Yt=de.next()){Je.index>ot?(ui=Je,Je=null):ui=Je.sibling;var ja=me(re,Je,Yt.value,Ee);if(ja===null){Je===null&&(Je=ui);break}i&&Je&&ja.alternate===null&&a(re,Je),te=T(ja,te,ot),kt===null?qe=ja:kt.sibling=ja,kt=ja,Je=ui}if(Yt.done)return f(re,Je),Xt&&Co(re,ot),qe;if(Je===null){for(;!Yt.done;ot++,Yt=de.next())Yt=Se(re,Yt.value,Ee),Yt!==null&&(te=T(Yt,te,ot),kt===null?qe=Yt:kt.sibling=Yt,kt=Yt);return Xt&&Co(re,ot),qe}for(Je=m(Je);!Yt.done;ot++,Yt=de.next())Yt=xe(Je,re,ot,Yt.value,Ee),Yt!==null&&(i&&Yt.alternate!==null&&Je.delete(Yt.key===null?ot:Yt.key),te=T(Yt,te,ot),kt===null?qe=Yt:kt.sibling=Yt,kt=Yt);return i&&Je.forEach(function(XA){return a(re,XA)}),Xt&&Co(re,ot),qe}function ln(re,te,de,Ee){if(typeof de=="object"&&de!==null&&de.type===M&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case N:e:{for(var qe=de.key;te!==null;){if(te.key===qe){if(qe=de.type,qe===M){if(te.tag===7){f(re,te.sibling),Ee=v(te,de.props.children),Ee.return=re,re=Ee;break e}}else if(te.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===ae&&Hx(qe)===te.type){f(re,te.sibling),Ee=v(te,de.props),cu(Ee,de),Ee.return=re,re=Ee;break e}f(re,te);break}else a(re,te);te=te.sibling}de.type===M?(Ee=Eo(de.props.children,re.mode,Ee,de.key),Ee.return=re,re=Ee):(Ee=Yf(de.type,de.key,de.props,null,re.mode,Ee),cu(Ee,de),Ee.return=re,re=Ee)}return D(re);case O:e:{for(qe=de.key;te!==null;){if(te.key===qe)if(te.tag===4&&te.stateNode.containerInfo===de.containerInfo&&te.stateNode.implementation===de.implementation){f(re,te.sibling),Ee=v(te,de.children||[]),Ee.return=re,re=Ee;break e}else{f(re,te);break}else a(re,te);te=te.sibling}Ee=g0(de,re.mode,Ee),Ee.return=re,re=Ee}return D(re);case ae:return qe=de._init,de=qe(de._payload),ln(re,te,de,Ee)}if(ie(de))return ft(re,te,de,Ee);if(_e(de)){if(qe=_e(de),typeof qe!="function")throw Error(r(150));return de=qe.call(de),at(re,te,de,Ee)}if(typeof de.then=="function")return ln(re,te,ud(de),Ee);if(de.$$typeof===B)return ln(re,te,Zf(re,de),Ee);fd(re,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,te!==null&&te.tag===6?(f(re,te.sibling),Ee=v(te,de),Ee.return=re,re=Ee):(f(re,te),Ee=h0(de,re.mode,Ee),Ee.return=re,re=Ee),D(re)):f(re,te)}return function(re,te,de,Ee){try{lu=0;var qe=ln(re,te,de,Ee);return Ll=null,qe}catch(Je){if(Je===Jc||Je===Jf)throw Je;var kt=is(29,Je,null,re.mode);return kt.lanes=Ee,kt.return=re,kt}finally{}}}var kl=$x(!0),Gx=$x(!1),bs=X(null),lr=null;function va(i){var a=i.alternate;oe(ni,ni.current&1),oe(bs,i),lr===null&&(a===null||Ol.current!==null||a.memoizedState!==null)&&(lr=i)}function qx(i){if(i.tag===22){if(oe(ni,ni.current),oe(bs,i),lr===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(lr=i)}}else Ea()}function Ea(){oe(ni,ni.current),oe(bs,bs.current)}function kr(i){le(bs),lr===i&&(lr=null),le(ni)}var ni=X(0);function dd(i){for(var a=i;a!==null;){if(a.tag===13){var f=a.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||j1(f)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Y0(i,a,f,m){a=i.memoizedState,f=f(m,a),f=f==null?a:E({},a,f),i.memoizedState=f,i.lanes===0&&(i.updateQueue.baseState=f)}var X0={enqueueSetState:function(i,a,f){i=i._reactInternals;var m=os(),v=ya(m);v.payload=a,f!=null&&(v.callback=f),a=ba(i,v,m),a!==null&&(ls(a,i,m),tu(a,i,m))},enqueueReplaceState:function(i,a,f){i=i._reactInternals;var m=os(),v=ya(m);v.tag=1,v.payload=a,f!=null&&(v.callback=f),a=ba(i,v,m),a!==null&&(ls(a,i,m),tu(a,i,m))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var f=os(),m=ya(f);m.tag=2,a!=null&&(m.callback=a),a=ba(i,m,f),a!==null&&(ls(a,i,f),tu(a,i,f))}};function Yx(i,a,f,m,v,T,D){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,T,D):a.prototype&&a.prototype.isPureReactComponent?!h(f,m)||!h(v,T):!0}function Xx(i,a,f,m){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(f,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(f,m),a.state!==i&&X0.enqueueReplaceState(a,a.state,null)}function Io(i,a){var f=a;if("ref"in a){f={};for(var m in a)m!=="ref"&&(f[m]=a[m])}if(i=i.defaultProps){f===a&&(f=E({},f));for(var v in i)f[v]===void 0&&(f[v]=i[v])}return f}var hd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Wx(i){hd(i)}function Kx(i){console.error(i)}function Zx(i){hd(i)}function gd(i,a){try{var f=i.onUncaughtError;f(a.value,{componentStack:a.stack})}catch(m){setTimeout(function(){throw m})}}function Qx(i,a,f){try{var m=i.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function W0(i,a,f){return f=ya(f),f.tag=3,f.payload={element:null},f.callback=function(){gd(i,a)},f}function Jx(i){return i=ya(i),i.tag=3,i}function ey(i,a,f,m){var v=f.type.getDerivedStateFromError;if(typeof v=="function"){var T=m.value;i.payload=function(){return v(T)},i.callback=function(){Qx(a,f,m)}}var D=f.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(i.callback=function(){Qx(a,f,m),typeof v!="function"&&(Na===null?Na=new Set([this]):Na.add(this));var F=m.stack;this.componentDidCatch(m.value,{componentStack:F!==null?F:""})})}function XC(i,a,f,m,v){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(a=f.alternate,a!==null&&Kc(a,f,v,!0),f=bs.current,f!==null){switch(f.tag){case 13:return lr===null?b1():f.alternate===null&&On===0&&(On=3),f.flags&=-257,f.flags|=65536,f.lanes=v,m===C0?f.flags|=16384:(a=f.updateQueue,a===null?f.updateQueue=new Set([m]):a.add(m),v1(i,m,v)),!1;case 22:return f.flags|=65536,m===C0?f.flags|=16384:(a=f.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=a):(f=a.retryQueue,f===null?a.retryQueue=new Set([m]):f.add(m)),v1(i,m,v)),!1}throw Error(r(435,f.tag))}return v1(i,m,v),b1(),!1}if(Xt)return a=bs.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=v,m!==x0&&(i=Error(r(422),{cause:m}),Wc(ms(i,f)))):(m!==x0&&(a=Error(r(423),{cause:m}),Wc(ms(a,f))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,m=ms(m,f),v=W0(i.stateNode,m,v),_0(i,v),On!==4&&(On=2)),!1;var T=Error(r(520),{cause:m});if(T=ms(T,f),pu===null?pu=[T]:pu.push(T),On!==4&&(On=2),a===null)return!0;m=ms(m,f),f=a;do{switch(f.tag){case 3:return f.flags|=65536,i=v&-v,f.lanes|=i,i=W0(f.stateNode,m,i),_0(f,i),!1;case 1:if(a=f.type,T=f.stateNode,(f.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Na===null||!Na.has(T))))return f.flags|=65536,v&=-v,f.lanes|=v,v=Jx(v),ey(v,i,f,m),_0(f,v),!1}f=f.return}while(f!==null);return!1}var ty=Error(r(461)),li=!1;function mi(i,a,f,m){a.child=i===null?Gx(a,null,f,m):kl(a,i.child,f,m)}function ny(i,a,f,m,v){f=f.render;var T=a.ref;if("ref"in m){var D={};for(var F in m)F!=="ref"&&(D[F]=m[F])}else D=m;return No(a),m=M0(i,a,f,D,T,v),F=D0(),i!==null&&!li?(L0(i,a,v),jr(i,a,v)):(Xt&&F&&m0(a),a.flags|=1,mi(i,a,m,v),a.child)}function iy(i,a,f,m,v){if(i===null){var T=f.type;return typeof T=="function"&&!d0(T)&&T.defaultProps===void 0&&f.compare===null?(a.tag=15,a.type=T,sy(i,a,T,m,v)):(i=Yf(f.type,null,m,a,a.mode,v),i.ref=a.ref,i.return=a,a.child=i)}if(T=i.child,!i1(i,v)){var D=T.memoizedProps;if(f=f.compare,f=f!==null?f:h,f(D,m)&&i.ref===a.ref)return jr(i,a,v)}return a.flags|=1,i=Rr(T,m),i.ref=a.ref,i.return=a,a.child=i}function sy(i,a,f,m,v){if(i!==null){var T=i.memoizedProps;if(h(T,m)&&i.ref===a.ref)if(li=!1,a.pendingProps=m=T,i1(i,v))(i.flags&131072)!==0&&(li=!0);else return a.lanes=i.lanes,jr(i,a,v)}return K0(i,a,f,m,v)}function ry(i,a,f){var m=a.pendingProps,v=m.children,T=i!==null?i.memoizedState:null;if(m.mode==="hidden"){if((a.flags&128)!==0){if(m=T!==null?T.baseLanes|f:f,i!==null){for(v=a.child=i.child,T=0;v!==null;)T=T|v.lanes|v.childLanes,v=v.sibling;a.childLanes=T&~m}else a.childLanes=0,a.child=null;return ay(i,a,m,f)}if((f&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Qf(a,T!==null?T.cachePool:null),T!==null?sx(a,T):R0(),qx(a);else return a.lanes=a.childLanes=536870912,ay(i,a,T!==null?T.baseLanes|f:f,f)}else T!==null?(Qf(a,T.cachePool),sx(a,T),Ea(),a.memoizedState=null):(i!==null&&Qf(a,null),R0(),Ea());return mi(i,a,v,f),a.child}function ay(i,a,f,m){var v=S0();return v=v===null?null:{parent:ti._currentValue,pool:v},a.memoizedState={baseLanes:f,cachePool:v},i!==null&&Qf(a,null),R0(),qx(a),i!==null&&Kc(i,a,m,!0),null}function md(i,a){var f=a.ref;if(f===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(i===null||i.ref!==f)&&(a.flags|=4194816)}}function K0(i,a,f,m,v){return No(a),f=M0(i,a,f,m,void 0,v),m=D0(),i!==null&&!li?(L0(i,a,v),jr(i,a,v)):(Xt&&m&&m0(a),a.flags|=1,mi(i,a,f,v),a.child)}function oy(i,a,f,m,v,T){return No(a),a.updateQueue=null,f=ax(a,m,f,v),rx(i),m=D0(),i!==null&&!li?(L0(i,a,T),jr(i,a,T)):(Xt&&m&&m0(a),a.flags|=1,mi(i,a,f,T),a.child)}function ly(i,a,f,m,v){if(No(a),a.stateNode===null){var T=Al,D=f.contextType;typeof D=="object"&&D!==null&&(T=Ai(D)),T=new f(m,T),a.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=X0,a.stateNode=T,T._reactInternals=a,T=a.stateNode,T.props=m,T.state=a.memoizedState,T.refs={},A0(a),D=f.contextType,T.context=typeof D=="object"&&D!==null?Ai(D):Al,T.state=a.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(Y0(a,f,D,m),T.state=a.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(D=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),D!==T.state&&X0.enqueueReplaceState(T,T.state,null),iu(a,m,T,v),nu(),T.state=a.memoizedState),typeof T.componentDidMount=="function"&&(a.flags|=4194308),m=!0}else if(i===null){T=a.stateNode;var F=a.memoizedProps,W=Io(f,F);T.props=W;var ge=T.context,ve=f.contextType;D=Al,typeof ve=="object"&&ve!==null&&(D=Ai(ve));var Se=f.getDerivedStateFromProps;ve=typeof Se=="function"||typeof T.getSnapshotBeforeUpdate=="function",F=a.pendingProps!==F,ve||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(F||ge!==D)&&Xx(a,T,m,D),xa=!1;var me=a.memoizedState;T.state=me,iu(a,m,T,v),nu(),ge=a.memoizedState,F||me!==ge||xa?(typeof Se=="function"&&(Y0(a,f,Se,m),ge=a.memoizedState),(W=xa||Yx(a,f,W,m,me,ge,D))?(ve||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=ge),T.props=m,T.state=ge,T.context=D,m=W):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{T=a.stateNode,T0(i,a),D=a.memoizedProps,ve=Io(f,D),T.props=ve,Se=a.pendingProps,me=T.context,ge=f.contextType,W=Al,typeof ge=="object"&&ge!==null&&(W=Ai(ge)),F=f.getDerivedStateFromProps,(ge=typeof F=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==Se||me!==W)&&Xx(a,T,m,W),xa=!1,me=a.memoizedState,T.state=me,iu(a,m,T,v),nu();var xe=a.memoizedState;D!==Se||me!==xe||xa||i!==null&&i.dependencies!==null&&Kf(i.dependencies)?(typeof F=="function"&&(Y0(a,f,F,m),xe=a.memoizedState),(ve=xa||Yx(a,f,ve,m,me,xe,W)||i!==null&&i.dependencies!==null&&Kf(i.dependencies))?(ge||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(m,xe,W),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(m,xe,W)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||D===i.memoizedProps&&me===i.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&me===i.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=xe),T.props=m,T.state=xe,T.context=W,m=ve):(typeof T.componentDidUpdate!="function"||D===i.memoizedProps&&me===i.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&me===i.memoizedState||(a.flags|=1024),m=!1)}return T=m,md(i,a),m=(a.flags&128)!==0,T||m?(T=a.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:T.render(),a.flags|=1,i!==null&&m?(a.child=kl(a,i.child,null,v),a.child=kl(a,null,f,v)):mi(i,a,f,v),a.memoizedState=T.state,i=a.child):i=jr(i,a,v),i}function cy(i,a,f,m){return Xc(),a.flags|=256,mi(i,a,f,m),a.child}var Z0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Q0(i){return{baseLanes:i,cachePool:Kp()}}function J0(i,a,f){return i=i!==null?i.childLanes&~f:0,a&&(i|=ws),i}function uy(i,a,f){var m=a.pendingProps,v=!1,T=(a.flags&128)!==0,D;if((D=T)||(D=i!==null&&i.memoizedState===null?!1:(ni.current&2)!==0),D&&(v=!0,a.flags&=-129),D=(a.flags&32)!==0,a.flags&=-33,i===null){if(Xt){if(v?va(a):Ea(),Xt){var F=Rn,W;if(W=F){e:{for(W=F,F=or;W.nodeType!==8;){if(!F){F=null;break e}if(W=js(W.nextSibling),W===null){F=null;break e}}F=W}F!==null?(a.memoizedState={dehydrated:F,treeContext:So!==null?{id:Or,overflow:Ir}:null,retryLane:536870912,hydrationErrors:null},W=is(18,null,null,0),W.stateNode=F,W.return=a,a.child=W,Di=a,Rn=null,W=!0):W=!1}W||To(a)}if(F=a.memoizedState,F!==null&&(F=F.dehydrated,F!==null))return j1(F)?a.lanes=32:a.lanes=536870912,null;kr(a)}return F=m.children,m=m.fallback,v?(Ea(),v=a.mode,F=pd({mode:"hidden",children:F},v),m=Eo(m,v,f,null),F.return=a,m.return=a,F.sibling=m,a.child=F,v=a.child,v.memoizedState=Q0(f),v.childLanes=J0(i,D,f),a.memoizedState=Z0,m):(va(a),e1(a,F))}if(W=i.memoizedState,W!==null&&(F=W.dehydrated,F!==null)){if(T)a.flags&256?(va(a),a.flags&=-257,a=t1(i,a,f)):a.memoizedState!==null?(Ea(),a.child=i.child,a.flags|=128,a=null):(Ea(),v=m.fallback,F=a.mode,m=pd({mode:"visible",children:m.children},F),v=Eo(v,F,f,null),v.flags|=2,m.return=a,v.return=a,m.sibling=v,a.child=m,kl(a,i.child,null,f),m=a.child,m.memoizedState=Q0(f),m.childLanes=J0(i,D,f),a.memoizedState=Z0,a=v);else if(va(a),j1(F)){if(D=F.nextSibling&&F.nextSibling.dataset,D)var ge=D.dgst;D=ge,m=Error(r(419)),m.stack="",m.digest=D,Wc({value:m,source:null,stack:null}),a=t1(i,a,f)}else if(li||Kc(i,a,f,!1),D=(f&i.childLanes)!==0,li||D){if(D=hn,D!==null&&(m=f&-f,m=(m&42)!==0?1:uo(m),m=(m&(D.suspendedLanes|f))!==0?0:m,m!==0&&m!==W.retryLane))throw W.retryLane=m,Cl(i,m),ls(D,i,m),ty;F.data==="$?"||b1(),a=t1(i,a,f)}else F.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=W.treeContext,Rn=js(F.nextSibling),Di=a,Xt=!0,Ao=null,or=!1,i!==null&&(xs[ys++]=Or,xs[ys++]=Ir,xs[ys++]=So,Or=i.id,Ir=i.overflow,So=a),a=e1(a,m.children),a.flags|=4096);return a}return v?(Ea(),v=m.fallback,F=a.mode,W=i.child,ge=W.sibling,m=Rr(W,{mode:"hidden",children:m.children}),m.subtreeFlags=W.subtreeFlags&65011712,ge!==null?v=Rr(ge,v):(v=Eo(v,F,f,null),v.flags|=2),v.return=a,m.return=a,m.sibling=v,a.child=m,m=v,v=a.child,F=i.child.memoizedState,F===null?F=Q0(f):(W=F.cachePool,W!==null?(ge=ti._currentValue,W=W.parent!==ge?{parent:ge,pool:ge}:W):W=Kp(),F={baseLanes:F.baseLanes|f,cachePool:W}),v.memoizedState=F,v.childLanes=J0(i,D,f),a.memoizedState=Z0,m):(va(a),f=i.child,i=f.sibling,f=Rr(f,{mode:"visible",children:m.children}),f.return=a,f.sibling=null,i!==null&&(D=a.deletions,D===null?(a.deletions=[i],a.flags|=16):D.push(i)),a.child=f,a.memoizedState=null,f)}function e1(i,a){return a=pd({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function pd(i,a){return i=is(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function t1(i,a,f){return kl(a,i.child,null,f),i=e1(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function fy(i,a,f){i.lanes|=a;var m=i.alternate;m!==null&&(m.lanes|=a),b0(i.return,a,f)}function n1(i,a,f,m,v){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:v}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=f,T.tailMode=v)}function dy(i,a,f){var m=a.pendingProps,v=m.revealOrder,T=m.tail;if(mi(i,a,m.children,f),m=ni.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&fy(i,f,a);else if(i.tag===19)fy(i,f,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}switch(oe(ni,m),v){case"forwards":for(f=a.child,v=null;f!==null;)i=f.alternate,i!==null&&dd(i)===null&&(v=f),f=f.sibling;f=v,f===null?(v=a.child,a.child=null):(v=f.sibling,f.sibling=null),n1(a,!1,v,f,T);break;case"backwards":for(f=null,v=a.child,a.child=null;v!==null;){if(i=v.alternate,i!==null&&dd(i)===null){a.child=v;break}i=v.sibling,v.sibling=f,f=v,v=i}n1(a,!0,f,null,T);break;case"together":n1(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function jr(i,a,f){if(i!==null&&(a.dependencies=i.dependencies),_a|=a.lanes,(f&a.childLanes)===0)if(i!==null){if(Kc(i,a,f,!1),(f&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,f=Rr(i,i.pendingProps),a.child=f,f.return=a;i.sibling!==null;)i=i.sibling,f=f.sibling=Rr(i,i.pendingProps),f.return=a;f.sibling=null}return a.child}function i1(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Kf(i)))}function WC(i,a,f){switch(a.tag){case 3:Ge(a,a.stateNode.containerInfo),pa(a,ti,i.memoizedState.cache),Xc();break;case 27:case 5:xn(a);break;case 4:Ge(a,a.stateNode.containerInfo);break;case 10:pa(a,a.type,a.memoizedProps.value);break;case 13:var m=a.memoizedState;if(m!==null)return m.dehydrated!==null?(va(a),a.flags|=128,null):(f&a.child.childLanes)!==0?uy(i,a,f):(va(a),i=jr(i,a,f),i!==null?i.sibling:null);va(a);break;case 19:var v=(i.flags&128)!==0;if(m=(f&a.childLanes)!==0,m||(Kc(i,a,f,!1),m=(f&a.childLanes)!==0),v){if(m)return dy(i,a,f);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),oe(ni,ni.current),m)break;return null;case 22:case 23:return a.lanes=0,ry(i,a,f);case 24:pa(a,ti,i.memoizedState.cache)}return jr(i,a,f)}function hy(i,a,f){if(i!==null)if(i.memoizedProps!==a.pendingProps)li=!0;else{if(!i1(i,f)&&(a.flags&128)===0)return li=!1,WC(i,a,f);li=(i.flags&131072)!==0}else li=!1,Xt&&(a.flags&1048576)!==0&&Hp(a,Wf,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var m=a.elementType,v=m._init;if(m=v(m._payload),a.type=m,typeof m=="function")d0(m)?(i=Io(m,i),a.tag=1,a=ly(null,a,m,i,f)):(a.tag=0,a=K0(null,a,m,i,f));else{if(m!=null){if(v=m.$$typeof,v===V){a.tag=11,a=ny(null,a,m,i,f);break e}else if(v===K){a.tag=14,a=iy(null,a,m,i,f);break e}}throw a=Ue(m)||m,Error(r(306,a,""))}}return a;case 0:return K0(i,a,a.type,a.pendingProps,f);case 1:return m=a.type,v=Io(m,a.pendingProps),ly(i,a,m,v,f);case 3:e:{if(Ge(a,a.stateNode.containerInfo),i===null)throw Error(r(387));m=a.pendingProps;var T=a.memoizedState;v=T.element,T0(i,a),iu(a,m,null,f);var D=a.memoizedState;if(m=D.cache,pa(a,ti,m),m!==T.cache&&w0(a,[ti],f,!0),nu(),m=D.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:D.cache},a.updateQueue.baseState=T,a.memoizedState=T,a.flags&256){a=cy(i,a,m,f);break e}else if(m!==v){v=ms(Error(r(424)),a),Wc(v),a=cy(i,a,m,f);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Rn=js(i.firstChild),Di=a,Xt=!0,Ao=null,or=!0,f=Gx(a,null,m,f),a.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Xc(),m===v){a=jr(i,a,f);break e}mi(i,a,m,f)}a=a.child}return a;case 26:return md(i,a),i===null?(f=x2(a.type,null,a.pendingProps,null))?a.memoizedState=f:Xt||(f=a.type,i=a.pendingProps,m=Od(be.current).createElement(f),m[ri]=a,m[Tn]=i,xi(m,f,i),Jt(m),a.stateNode=m):a.memoizedState=x2(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return xn(a),i===null&&Xt&&(m=a.stateNode=g2(a.type,a.pendingProps,be.current),Di=a,or=!0,v=Rn,Ia(a.type)?(B1=v,Rn=js(m.firstChild)):Rn=v),mi(i,a,a.pendingProps.children,f),md(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Xt&&((v=m=Rn)&&(m=SA(m,a.type,a.pendingProps,or),m!==null?(a.stateNode=m,Di=a,Rn=js(m.firstChild),or=!1,v=!0):v=!1),v||To(a)),xn(a),v=a.type,T=a.pendingProps,D=i!==null?i.memoizedProps:null,m=T.children,D1(v,T)?m=null:D!==null&&D1(v,D)&&(a.flags|=32),a.memoizedState!==null&&(v=M0(i,a,VC,null,null,f),Au._currentValue=v),md(i,a),mi(i,a,m,f),a.child;case 6:return i===null&&Xt&&((i=f=Rn)&&(f=CA(f,a.pendingProps,or),f!==null?(a.stateNode=f,Di=a,Rn=null,i=!0):i=!1),i||To(a)),null;case 13:return uy(i,a,f);case 4:return Ge(a,a.stateNode.containerInfo),m=a.pendingProps,i===null?a.child=kl(a,null,m,f):mi(i,a,m,f),a.child;case 11:return ny(i,a,a.type,a.pendingProps,f);case 7:return mi(i,a,a.pendingProps,f),a.child;case 8:return mi(i,a,a.pendingProps.children,f),a.child;case 12:return mi(i,a,a.pendingProps.children,f),a.child;case 10:return m=a.pendingProps,pa(a,a.type,m.value),mi(i,a,m.children,f),a.child;case 9:return v=a.type._context,m=a.pendingProps.children,No(a),v=Ai(v),m=m(v),a.flags|=1,mi(i,a,m,f),a.child;case 14:return iy(i,a,a.type,a.pendingProps,f);case 15:return sy(i,a,a.type,a.pendingProps,f);case 19:return dy(i,a,f);case 31:return m=a.pendingProps,f=a.mode,m={mode:m.mode,children:m.children},i===null?(f=pd(m,f),f.ref=a.ref,a.child=f,f.return=a,a=f):(f=Rr(i.child,m),f.ref=a.ref,a.child=f,f.return=a,a=f),a;case 22:return ry(i,a,f);case 24:return No(a),m=Ai(ti),i===null?(v=S0(),v===null&&(v=hn,T=v0(),v.pooledCache=T,T.refCount++,T!==null&&(v.pooledCacheLanes|=f),v=T),a.memoizedState={parent:m,cache:v},A0(a),pa(a,ti,v)):((i.lanes&f)!==0&&(T0(i,a),iu(a,null,null,f),nu()),v=i.memoizedState,T=a.memoizedState,v.parent!==m?(v={parent:m,cache:m},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),pa(a,ti,m)):(m=T.cache,pa(a,ti,m),m!==v.cache&&w0(a,[ti],f,!0))),mi(i,a,a.pendingProps.children,f),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Br(i){i.flags|=4}function gy(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!E2(a)){if(a=bs.current,a!==null&&((Ht&4194048)===Ht?lr!==null:(Ht&62914560)!==Ht&&(Ht&536870912)===0||a!==lr))throw eu=C0,Zp;i.flags|=8192}}function xd(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?sa():536870912,i.lanes|=a,Ul|=a)}function uu(i,a){if(!Xt)switch(i.tailMode){case"hidden":a=i.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?i.tail=null:f.sibling=null;break;case"collapsed":f=i.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function Cn(i){var a=i.alternate!==null&&i.alternate.child===i.child,f=0,m=0;if(a)for(var v=i.child;v!==null;)f|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)f|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=m,i.childLanes=f,a}function KC(i,a,f){var m=a.pendingProps;switch(p0(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(a),null;case 1:return Cn(a),null;case 3:return f=a.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),a.memoizedState.cache!==m&&(a.flags|=2048),Dr(ti),Mt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(Yc(a)?Br(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,qp())),Cn(a),null;case 26:return f=a.memoizedState,i===null?(Br(a),f!==null?(Cn(a),gy(a,f)):(Cn(a),a.flags&=-16777217)):f?f!==i.memoizedState?(Br(a),Cn(a),gy(a,f)):(Cn(a),a.flags&=-16777217):(i.memoizedProps!==m&&Br(a),Cn(a),a.flags&=-16777217),null;case 27:Ae(a),f=be.current;var v=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==m&&Br(a);else{if(!m){if(a.stateNode===null)throw Error(r(166));return Cn(a),null}i=Ne.current,Yc(a)?$p(a):(i=g2(v,m,f),a.stateNode=i,Br(a))}return Cn(a),null;case 5:if(Ae(a),f=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==m&&Br(a);else{if(!m){if(a.stateNode===null)throw Error(r(166));return Cn(a),null}if(i=Ne.current,Yc(a))$p(a);else{switch(v=Od(be.current),i){case 1:i=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:i=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":i=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":i=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":i=v.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof m.is=="string"?v.createElement("select",{is:m.is}):v.createElement("select"),m.multiple?i.multiple=!0:m.size&&(i.size=m.size);break;default:i=typeof m.is=="string"?v.createElement(f,{is:m.is}):v.createElement(f)}}i[ri]=a,i[Tn]=m;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)i.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=i;e:switch(xi(i,f,m),f){case"button":case"input":case"select":case"textarea":i=!!m.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Br(a)}}return Cn(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==m&&Br(a);else{if(typeof m!="string"&&a.stateNode===null)throw Error(r(166));if(i=be.current,Yc(a)){if(i=a.stateNode,f=a.memoizedProps,m=null,v=Di,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}i[ri]=a,i=!!(i.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||o2(i.nodeValue,f)),i||To(a)}else i=Od(i).createTextNode(m),i[ri]=a,a.stateNode=i}return Cn(a),null;case 13:if(m=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=Yc(a),m!==null&&m.dehydrated!==null){if(i===null){if(!v)throw Error(r(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[ri]=a}else Xc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Cn(a),v=!1}else v=qp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return a.flags&256?(kr(a),a):(kr(a),null)}if(kr(a),(a.flags&128)!==0)return a.lanes=f,a;if(f=m!==null,i=i!==null&&i.memoizedState!==null,f){m=a.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool);var T=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(T=m.memoizedState.cachePool.pool),T!==v&&(m.flags|=2048)}return f!==i&&f&&(a.child.flags|=8192),xd(a,a.updateQueue),Cn(a),null;case 4:return Mt(),i===null&&N1(a.stateNode.containerInfo),Cn(a),null;case 10:return Dr(a.type),Cn(a),null;case 19:if(le(ni),v=a.memoizedState,v===null)return Cn(a),null;if(m=(a.flags&128)!==0,T=v.rendering,T===null)if(m)uu(v,!1);else{if(On!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(T=dd(i),T!==null){for(a.flags|=128,uu(v,!1),i=T.updateQueue,a.updateQueue=i,xd(a,i),a.subtreeFlags=0,i=f,f=a.child;f!==null;)zp(f,i),f=f.sibling;return oe(ni,ni.current&1|2),a.child}i=i.sibling}v.tail!==null&&lt()>wd&&(a.flags|=128,m=!0,uu(v,!1),a.lanes=4194304)}else{if(!m)if(i=dd(T),i!==null){if(a.flags|=128,m=!0,i=i.updateQueue,a.updateQueue=i,xd(a,i),uu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!T.alternate&&!Xt)return Cn(a),null}else 2*lt()-v.renderingStartTime>wd&&f!==536870912&&(a.flags|=128,m=!0,uu(v,!1),a.lanes=4194304);v.isBackwards?(T.sibling=a.child,a.child=T):(i=v.last,i!==null?i.sibling=T:a.child=T,v.last=T)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=lt(),a.sibling=null,i=ni.current,oe(ni,m?i&1|2:i&1),a):(Cn(a),null);case 22:case 23:return kr(a),O0(),m=a.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(a.flags|=8192):m&&(a.flags|=8192),m?(f&536870912)!==0&&(a.flags&128)===0&&(Cn(a),a.subtreeFlags&6&&(a.flags|=8192)):Cn(a),f=a.updateQueue,f!==null&&xd(a,f.retryQueue),f=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),m=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(m=a.memoizedState.cachePool.pool),m!==f&&(a.flags|=2048),i!==null&&le(Ro),null;case 24:return f=null,i!==null&&(f=i.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),Dr(ti),Cn(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function ZC(i,a){switch(p0(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Dr(ti),Mt(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Ae(a),null;case 13:if(kr(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Xc()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return le(ni),null;case 4:return Mt(),null;case 10:return Dr(a.type),null;case 22:case 23:return kr(a),O0(),i!==null&&le(Ro),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Dr(ti),null;case 25:return null;default:return null}}function my(i,a){switch(p0(a),a.tag){case 3:Dr(ti),Mt();break;case 26:case 27:case 5:Ae(a);break;case 4:Mt();break;case 13:kr(a);break;case 19:le(ni);break;case 10:Dr(a.type);break;case 22:case 23:kr(a),O0(),i!==null&&le(Ro);break;case 24:Dr(ti)}}function fu(i,a){try{var f=a.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var v=m.next;f=v;do{if((f.tag&i)===i){m=void 0;var T=f.create,D=f.inst;m=T(),D.destroy=m}f=f.next}while(f!==v)}}catch(F){un(a,a.return,F)}}function Sa(i,a,f){try{var m=a.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var T=v.next;m=T;do{if((m.tag&i)===i){var D=m.inst,F=D.destroy;if(F!==void 0){D.destroy=void 0,v=a;var W=f,ge=F;try{ge()}catch(ve){un(v,W,ve)}}}m=m.next}while(m!==T)}}catch(ve){un(a,a.return,ve)}}function py(i){var a=i.updateQueue;if(a!==null){var f=i.stateNode;try{ix(a,f)}catch(m){un(i,i.return,m)}}}function xy(i,a,f){f.props=Io(i.type,i.memoizedProps),f.state=i.memoizedState;try{f.componentWillUnmount()}catch(m){un(i,a,m)}}function du(i,a){try{var f=i.ref;if(f!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof f=="function"?i.refCleanup=f(m):f.current=m}}catch(v){un(i,a,v)}}function cr(i,a){var f=i.ref,m=i.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(v){un(i,a,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(v){un(i,a,v)}else f.current=null}function yy(i){var a=i.type,f=i.memoizedProps,m=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break e;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(v){un(i,i.return,v)}}function s1(i,a,f){try{var m=i.stateNode;yA(m,i.type,f,a),m[Tn]=a}catch(v){un(i,i.return,v)}}function by(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ia(i.type)||i.tag===4}function r1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||by(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ia(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function a1(i,a,f){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(i,a):(a=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,a.appendChild(i),f=f._reactRootContainer,f!=null||a.onclick!==null||(a.onclick=Rd));else if(m!==4&&(m===27&&Ia(i.type)&&(f=i.stateNode,a=null),i=i.child,i!==null))for(a1(i,a,f),i=i.sibling;i!==null;)a1(i,a,f),i=i.sibling}function yd(i,a,f){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?f.insertBefore(i,a):f.appendChild(i);else if(m!==4&&(m===27&&Ia(i.type)&&(f=i.stateNode),i=i.child,i!==null))for(yd(i,a,f),i=i.sibling;i!==null;)yd(i,a,f),i=i.sibling}function wy(i){var a=i.stateNode,f=i.memoizedProps;try{for(var m=i.type,v=a.attributes;v.length;)a.removeAttributeNode(v[0]);xi(a,m,f),a[ri]=i,a[Tn]=f}catch(T){un(i,i.return,T)}}var Pr=!1,Un=!1,o1=!1,vy=typeof WeakSet=="function"?WeakSet:Set,ci=null;function QC(i,a){if(i=i.containerInfo,I1=jd,i=_(i),I(i)){if("selectionStart"in i)var f={start:i.selectionStart,end:i.selectionEnd};else e:{f=(f=i.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var v=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var D=0,F=-1,W=-1,ge=0,ve=0,Se=i,me=null;t:for(;;){for(var xe;Se!==f||v!==0&&Se.nodeType!==3||(F=D+v),Se!==T||m!==0&&Se.nodeType!==3||(W=D+m),Se.nodeType===3&&(D+=Se.nodeValue.length),(xe=Se.firstChild)!==null;)me=Se,Se=xe;for(;;){if(Se===i)break t;if(me===f&&++ge===v&&(F=D),me===T&&++ve===m&&(W=D),(xe=Se.nextSibling)!==null)break;Se=me,me=Se.parentNode}Se=xe}f=F===-1||W===-1?null:{start:F,end:W}}else f=null}f=f||{start:0,end:0}}else f=null;for(M1={focusedElem:i,selectionRange:f},jd=!1,ci=a;ci!==null;)if(a=ci,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,ci=i;else for(;ci!==null;){switch(a=ci,T=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&T!==null){i=void 0,f=a,v=T.memoizedProps,T=T.memoizedState,m=f.stateNode;try{var ft=Io(f.type,v,f.elementType===f.type);i=m.getSnapshotBeforeUpdate(ft,T),m.__reactInternalSnapshotBeforeUpdate=i}catch(at){un(f,f.return,at)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,f=i.nodeType,f===9)k1(i);else if(f===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":k1(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,ci=i;break}ci=a.return}}function Ey(i,a,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:Ca(i,f),m&4&&fu(5,f);break;case 1:if(Ca(i,f),m&4)if(i=f.stateNode,a===null)try{i.componentDidMount()}catch(D){un(f,f.return,D)}else{var v=Io(f.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(v,a,i.__reactInternalSnapshotBeforeUpdate)}catch(D){un(f,f.return,D)}}m&64&&py(f),m&512&&du(f,f.return);break;case 3:if(Ca(i,f),m&64&&(i=f.updateQueue,i!==null)){if(a=null,f.child!==null)switch(f.child.tag){case 27:case 5:a=f.child.stateNode;break;case 1:a=f.child.stateNode}try{ix(i,a)}catch(D){un(f,f.return,D)}}break;case 27:a===null&&m&4&&wy(f);case 26:case 5:Ca(i,f),a===null&&m&4&&yy(f),m&512&&du(f,f.return);break;case 12:Ca(i,f);break;case 13:Ca(i,f),m&4&&Ay(i,f),m&64&&(i=f.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(f=oA.bind(null,f),AA(i,f))));break;case 22:if(m=f.memoizedState!==null||Pr,!m){a=a!==null&&a.memoizedState!==null||Un,v=Pr;var T=Un;Pr=m,(Un=a)&&!T?Aa(i,f,(f.subtreeFlags&8772)!==0):Ca(i,f),Pr=v,Un=T}break;case 30:break;default:Ca(i,f)}}function Sy(i){var a=i.alternate;a!==null&&(i.alternate=null,Sy(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&fo(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var wn=null,$i=!1;function Ur(i,a,f){for(f=f.child;f!==null;)Cy(i,a,f),f=f.sibling}function Cy(i,a,f){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount($t,f)}catch{}switch(f.tag){case 26:Un||cr(f,a),Ur(i,a,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Un||cr(f,a);var m=wn,v=$i;Ia(f.type)&&(wn=f.stateNode,$i=!1),Ur(i,a,f),vu(f.stateNode),wn=m,$i=v;break;case 5:Un||cr(f,a);case 6:if(m=wn,v=$i,wn=null,Ur(i,a,f),wn=m,$i=v,wn!==null)if($i)try{(wn.nodeType===9?wn.body:wn.nodeName==="HTML"?wn.ownerDocument.body:wn).removeChild(f.stateNode)}catch(T){un(f,a,T)}else try{wn.removeChild(f.stateNode)}catch(T){un(f,a,T)}break;case 18:wn!==null&&($i?(i=wn,d2(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,f.stateNode),Ru(i)):d2(wn,f.stateNode));break;case 4:m=wn,v=$i,wn=f.stateNode.containerInfo,$i=!0,Ur(i,a,f),wn=m,$i=v;break;case 0:case 11:case 14:case 15:Un||Sa(2,f,a),Un||Sa(4,f,a),Ur(i,a,f);break;case 1:Un||(cr(f,a),m=f.stateNode,typeof m.componentWillUnmount=="function"&&xy(f,a,m)),Ur(i,a,f);break;case 21:Ur(i,a,f);break;case 22:Un=(m=Un)||f.memoizedState!==null,Ur(i,a,f),Un=m;break;default:Ur(i,a,f)}}function Ay(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ru(i)}catch(f){un(a,a.return,f)}}function JC(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new vy),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new vy),a;default:throw Error(r(435,i.tag))}}function l1(i,a){var f=JC(i);a.forEach(function(m){var v=lA.bind(null,i,m);f.has(m)||(f.add(m),m.then(v,v))})}function ss(i,a){var f=a.deletions;if(f!==null)for(var m=0;m<f.length;m++){var v=f[m],T=i,D=a,F=D;e:for(;F!==null;){switch(F.tag){case 27:if(Ia(F.type)){wn=F.stateNode,$i=!1;break e}break;case 5:wn=F.stateNode,$i=!1;break e;case 3:case 4:wn=F.stateNode.containerInfo,$i=!0;break e}F=F.return}if(wn===null)throw Error(r(160));Cy(T,D,v),wn=null,$i=!1,T=v.alternate,T!==null&&(T.return=null),v.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Ty(a,i),a=a.sibling}var ks=null;function Ty(i,a){var f=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ss(a,i),rs(i),m&4&&(Sa(3,i,i.return),fu(3,i),Sa(5,i,i.return));break;case 1:ss(a,i),rs(i),m&512&&(Un||f===null||cr(f,f.return)),m&64&&Pr&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(f=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var v=ks;if(ss(a,i),rs(i),m&512&&(Un||f===null||cr(f,f.return)),m&4){var T=f!==null?f.memoizedState:null;if(m=i.memoizedState,f===null)if(m===null)if(i.stateNode===null){e:{m=i.type,f=i.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":T=v.getElementsByTagName("title")[0],(!T||T[hs]||T[ri]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=v.createElement(m),v.head.insertBefore(T,v.querySelector("head > title"))),xi(T,m,f),T[ri]=i,Jt(T),m=T;break e;case"link":var D=w2("link","href",v).get(m+(f.href||""));if(D){for(var F=0;F<D.length;F++)if(T=D[F],T.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&T.getAttribute("rel")===(f.rel==null?null:f.rel)&&T.getAttribute("title")===(f.title==null?null:f.title)&&T.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){D.splice(F,1);break t}}T=v.createElement(m),xi(T,m,f),v.head.appendChild(T);break;case"meta":if(D=w2("meta","content",v).get(m+(f.content||""))){for(F=0;F<D.length;F++)if(T=D[F],T.getAttribute("content")===(f.content==null?null:""+f.content)&&T.getAttribute("name")===(f.name==null?null:f.name)&&T.getAttribute("property")===(f.property==null?null:f.property)&&T.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&T.getAttribute("charset")===(f.charSet==null?null:f.charSet)){D.splice(F,1);break t}}T=v.createElement(m),xi(T,m,f),v.head.appendChild(T);break;default:throw Error(r(468,m))}T[ri]=i,Jt(T),m=T}i.stateNode=m}else v2(v,i.type,i.stateNode);else i.stateNode=b2(v,m,i.memoizedProps);else T!==m?(T===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):T.count--,m===null?v2(v,i.type,i.stateNode):b2(v,m,i.memoizedProps)):m===null&&i.stateNode!==null&&s1(i,i.memoizedProps,f.memoizedProps)}break;case 27:ss(a,i),rs(i),m&512&&(Un||f===null||cr(f,f.return)),f!==null&&m&4&&s1(i,i.memoizedProps,f.memoizedProps);break;case 5:if(ss(a,i),rs(i),m&512&&(Un||f===null||cr(f,f.return)),i.flags&32){v=i.stateNode;try{Qn(v,"")}catch(xe){un(i,i.return,xe)}}m&4&&i.stateNode!=null&&(v=i.memoizedProps,s1(i,v,f!==null?f.memoizedProps:v)),m&1024&&(o1=!0);break;case 6:if(ss(a,i),rs(i),m&4){if(i.stateNode===null)throw Error(r(162));m=i.memoizedProps,f=i.stateNode;try{f.nodeValue=m}catch(xe){un(i,i.return,xe)}}break;case 3:if(Dd=null,v=ks,ks=Id(a.containerInfo),ss(a,i),ks=v,rs(i),m&4&&f!==null&&f.memoizedState.isDehydrated)try{Ru(a.containerInfo)}catch(xe){un(i,i.return,xe)}o1&&(o1=!1,_y(i));break;case 4:m=ks,ks=Id(i.stateNode.containerInfo),ss(a,i),rs(i),ks=m;break;case 12:ss(a,i),rs(i);break;case 13:ss(a,i),rs(i),i.child.flags&8192&&i.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(g1=lt()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,l1(i,m)));break;case 22:v=i.memoizedState!==null;var W=f!==null&&f.memoizedState!==null,ge=Pr,ve=Un;if(Pr=ge||v,Un=ve||W,ss(a,i),Un=ve,Pr=ge,rs(i),m&8192)e:for(a=i.stateNode,a._visibility=v?a._visibility&-2:a._visibility|1,v&&(f===null||W||Pr||Un||Mo(i)),f=null,a=i;;){if(a.tag===5||a.tag===26){if(f===null){W=f=a;try{if(T=W.stateNode,v)D=T.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{F=W.stateNode;var Se=W.memoizedProps.style,me=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;F.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch(xe){un(W,W.return,xe)}}}else if(a.tag===6){if(f===null){W=a;try{W.stateNode.nodeValue=v?"":W.memoizedProps}catch(xe){un(W,W.return,xe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;f===a&&(f=null),a=a.return}f===a&&(f=null),a.sibling.return=a.return,a=a.sibling}m&4&&(m=i.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,l1(i,f))));break;case 19:ss(a,i),rs(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,l1(i,m)));break;case 30:break;case 21:break;default:ss(a,i),rs(i)}}function rs(i){var a=i.flags;if(a&2){try{for(var f,m=i.return;m!==null;){if(by(m)){f=m;break}m=m.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var v=f.stateNode,T=r1(i);yd(i,T,v);break;case 5:var D=f.stateNode;f.flags&32&&(Qn(D,""),f.flags&=-33);var F=r1(i);yd(i,F,D);break;case 3:case 4:var W=f.stateNode.containerInfo,ge=r1(i);a1(i,ge,W);break;default:throw Error(r(161))}}catch(ve){un(i,i.return,ve)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function _y(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;_y(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Ca(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Ey(i,a.alternate,a),a=a.sibling}function Mo(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Sa(4,a,a.return),Mo(a);break;case 1:cr(a,a.return);var f=a.stateNode;typeof f.componentWillUnmount=="function"&&xy(a,a.return,f),Mo(a);break;case 27:vu(a.stateNode);case 26:case 5:cr(a,a.return),Mo(a);break;case 22:a.memoizedState===null&&Mo(a);break;case 30:Mo(a);break;default:Mo(a)}i=i.sibling}}function Aa(i,a,f){for(f=f&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var m=a.alternate,v=i,T=a,D=T.flags;switch(T.tag){case 0:case 11:case 15:Aa(v,T,f),fu(4,T);break;case 1:if(Aa(v,T,f),m=T,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ge){un(m,m.return,ge)}if(m=T,v=m.updateQueue,v!==null){var F=m.stateNode;try{var W=v.shared.hiddenCallbacks;if(W!==null)for(v.shared.hiddenCallbacks=null,v=0;v<W.length;v++)nx(W[v],F)}catch(ge){un(m,m.return,ge)}}f&&D&64&&py(T),du(T,T.return);break;case 27:wy(T);case 26:case 5:Aa(v,T,f),f&&m===null&&D&4&&yy(T),du(T,T.return);break;case 12:Aa(v,T,f);break;case 13:Aa(v,T,f),f&&D&4&&Ay(v,T);break;case 22:T.memoizedState===null&&Aa(v,T,f),du(T,T.return);break;case 30:break;default:Aa(v,T,f)}a=a.sibling}}function c1(i,a){var f=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==f&&(i!=null&&i.refCount++,f!=null&&Zc(f))}function u1(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Zc(i))}function ur(i,a,f,m){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ny(i,a,f,m),a=a.sibling}function Ny(i,a,f,m){var v=a.flags;switch(a.tag){case 0:case 11:case 15:ur(i,a,f,m),v&2048&&fu(9,a);break;case 1:ur(i,a,f,m);break;case 3:ur(i,a,f,m),v&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Zc(i)));break;case 12:if(v&2048){ur(i,a,f,m),i=a.stateNode;try{var T=a.memoizedProps,D=T.id,F=T.onPostCommit;typeof F=="function"&&F(D,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(W){un(a,a.return,W)}}else ur(i,a,f,m);break;case 13:ur(i,a,f,m);break;case 23:break;case 22:T=a.stateNode,D=a.alternate,a.memoizedState!==null?T._visibility&2?ur(i,a,f,m):hu(i,a):T._visibility&2?ur(i,a,f,m):(T._visibility|=2,jl(i,a,f,m,(a.subtreeFlags&10256)!==0)),v&2048&&c1(D,a);break;case 24:ur(i,a,f,m),v&2048&&u1(a.alternate,a);break;default:ur(i,a,f,m)}}function jl(i,a,f,m,v){for(v=v&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var T=i,D=a,F=f,W=m,ge=D.flags;switch(D.tag){case 0:case 11:case 15:jl(T,D,F,W,v),fu(8,D);break;case 23:break;case 22:var ve=D.stateNode;D.memoizedState!==null?ve._visibility&2?jl(T,D,F,W,v):hu(T,D):(ve._visibility|=2,jl(T,D,F,W,v)),v&&ge&2048&&c1(D.alternate,D);break;case 24:jl(T,D,F,W,v),v&&ge&2048&&u1(D.alternate,D);break;default:jl(T,D,F,W,v)}a=a.sibling}}function hu(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var f=i,m=a,v=m.flags;switch(m.tag){case 22:hu(f,m),v&2048&&c1(m.alternate,m);break;case 24:hu(f,m),v&2048&&u1(m.alternate,m);break;default:hu(f,m)}a=a.sibling}}var gu=8192;function Bl(i){if(i.subtreeFlags&gu)for(i=i.child;i!==null;)Ry(i),i=i.sibling}function Ry(i){switch(i.tag){case 26:Bl(i),i.flags&gu&&i.memoizedState!==null&&PA(ks,i.memoizedState,i.memoizedProps);break;case 5:Bl(i);break;case 3:case 4:var a=ks;ks=Id(i.stateNode.containerInfo),Bl(i),ks=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=gu,gu=16777216,Bl(i),gu=a):Bl(i));break;default:Bl(i)}}function Oy(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function mu(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var f=0;f<a.length;f++){var m=a[f];ci=m,My(m,i)}Oy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Iy(i),i=i.sibling}function Iy(i){switch(i.tag){case 0:case 11:case 15:mu(i),i.flags&2048&&Sa(9,i,i.return);break;case 3:mu(i);break;case 12:mu(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,bd(i)):mu(i);break;default:mu(i)}}function bd(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var f=0;f<a.length;f++){var m=a[f];ci=m,My(m,i)}Oy(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Sa(8,a,a.return),bd(a);break;case 22:f=a.stateNode,f._visibility&2&&(f._visibility&=-3,bd(a));break;default:bd(a)}i=i.sibling}}function My(i,a){for(;ci!==null;){var f=ci;switch(f.tag){case 0:case 11:case 15:Sa(8,f,a);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Zc(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,ci=m;else e:for(f=i;ci!==null;){m=ci;var v=m.sibling,T=m.return;if(Sy(m),m===f){ci=null;break e}if(v!==null){v.return=T,ci=v;break e}ci=T}}}var eA={getCacheForType:function(i){var a=Ai(ti),f=a.data.get(i);return f===void 0&&(f=i(),a.data.set(i,f)),f}},tA=typeof WeakMap=="function"?WeakMap:Map,nn=0,hn=null,Bt=null,Ht=0,sn=0,as=null,Ta=!1,Pl=!1,f1=!1,Fr=0,On=0,_a=0,Do=0,d1=0,ws=0,Ul=0,pu=null,Gi=null,h1=!1,g1=0,wd=1/0,vd=null,Na=null,pi=0,Ra=null,Fl=null,Vl=0,m1=0,p1=null,Dy=null,xu=0,x1=null;function os(){if((nn&2)!==0&&Ht!==0)return Ht&-Ht;if(se.T!==null){var i=Nl;return i!==0?i:C1()}return Er()}function Ly(){ws===0&&(ws=(Ht&536870912)===0||Xt?bi():536870912);var i=bs.current;return i!==null&&(i.flags|=32),ws}function ls(i,a,f){(i===hn&&(sn===2||sn===9)||i.cancelPendingCommit!==null)&&(zl(i,0),Oa(i,Ht,ws,!1)),Ji(i,f),((nn&2)===0||i!==hn)&&(i===hn&&((nn&2)===0&&(Do|=f),On===4&&Oa(i,Ht,ws,!1)),fr(i))}function ky(i,a,f){if((nn&6)!==0)throw Error(r(327));var m=!f&&(a&124)===0&&(a&i.expiredLanes)===0||Rt(i,a),v=m?sA(i,a):w1(i,a,!0),T=m;do{if(v===0){Pl&&!m&&Oa(i,a,0,!1);break}else{if(f=i.current.alternate,T&&!nA(f)){v=w1(i,a,!1),T=!1;continue}if(v===2){if(T=a,i.errorRecoveryDisabledLanes&T)var D=0;else D=i.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){a=D;e:{var F=i;v=pu;var W=F.current.memoizedState.isDehydrated;if(W&&(zl(F,D).flags|=256),D=w1(F,D,!1),D!==2){if(f1&&!W){F.errorRecoveryDisabledLanes|=T,Do|=T,v=4;break e}T=Gi,Gi=v,T!==null&&(Gi===null?Gi=T:Gi.push.apply(Gi,T))}v=D}if(T=!1,v!==2)continue}}if(v===1){zl(i,0),Oa(i,a,0,!0);break}e:{switch(m=i,T=v,T){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Oa(m,a,ws,!Ta);break e;case 2:Gi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(v=g1+300-lt(),10<v)){if(Oa(m,a,ws,!Ta),_t(m,0,!0)!==0)break e;m.timeoutHandle=u2(jy.bind(null,m,f,Gi,vd,h1,a,ws,Do,Ul,Ta,T,2,-0,0),v);break e}jy(m,f,Gi,vd,h1,a,ws,Do,Ul,Ta,T,0,-0,0)}}break}while(!0);fr(i)}function jy(i,a,f,m,v,T,D,F,W,ge,ve,Se,me,xe){if(i.timeoutHandle=-1,Se=a.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(Cu={stylesheets:null,count:0,unsuspend:BA},Ry(a),Se=UA(),Se!==null)){i.cancelPendingCommit=Se(Hy.bind(null,i,a,T,f,m,v,D,F,W,ve,1,me,xe)),Oa(i,T,D,!ge);return}Hy(i,a,T,f,m,v,D,F,W)}function nA(i){for(var a=i;;){var f=a.tag;if((f===0||f===11||f===15)&&a.flags&16384&&(f=a.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var v=f[m],T=v.getSnapshot;v=v.value;try{if(!d(T(),v))return!1}catch{return!1}}if(f=a.child,a.subtreeFlags&16384&&f!==null)f.return=a,a=f;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Oa(i,a,f,m){a&=~d1,a&=~Do,i.suspendedLanes|=a,i.pingedLanes&=~a,m&&(i.warmLanes|=a),m=i.expirationTimes;for(var v=a;0<v;){var T=31-We(v),D=1<<T;m[T]=-1,v&=~D}f!==0&&Bc(i,f,a)}function Ed(){return(nn&6)===0?(yu(0),!1):!0}function y1(){if(Bt!==null){if(sn===0)var i=Bt.return;else i=Bt,Mr=_o=null,k0(i),Ll=null,lu=0,i=Bt;for(;i!==null;)my(i.alternate,i),i=i.return;Bt=null}}function zl(i,a){var f=i.timeoutHandle;f!==-1&&(i.timeoutHandle=-1,wA(f)),f=i.cancelPendingCommit,f!==null&&(i.cancelPendingCommit=null,f()),y1(),hn=i,Bt=f=Rr(i.current,null),Ht=a,sn=0,as=null,Ta=!1,Pl=Rt(i,a),f1=!1,Ul=ws=d1=Do=_a=On=0,Gi=pu=null,h1=!1,(a&8)!==0&&(a|=a&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=a;0<m;){var v=31-We(m),T=1<<v;a|=i[v],m&=~T}return Fr=a,$f(),f}function By(i,a){It=null,se.H=cd,a===Jc||a===Jf?(a=ex(),sn=3):a===Zp?(a=ex(),sn=4):sn=a===ty?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,as=a,Bt===null&&(On=1,gd(i,ms(a,i.current)))}function Py(){var i=se.H;return se.H=cd,i===null?cd:i}function Uy(){var i=se.A;return se.A=eA,i}function b1(){On=4,Ta||(Ht&4194048)!==Ht&&bs.current!==null||(Pl=!0),(_a&134217727)===0&&(Do&134217727)===0||hn===null||Oa(hn,Ht,ws,!1)}function w1(i,a,f){var m=nn;nn|=2;var v=Py(),T=Uy();(hn!==i||Ht!==a)&&(vd=null,zl(i,a)),a=!1;var D=On;e:do try{if(sn!==0&&Bt!==null){var F=Bt,W=as;switch(sn){case 8:y1(),D=6;break e;case 3:case 2:case 9:case 6:bs.current===null&&(a=!0);var ge=sn;if(sn=0,as=null,Hl(i,F,W,ge),f&&Pl){D=0;break e}break;default:ge=sn,sn=0,as=null,Hl(i,F,W,ge)}}iA(),D=On;break}catch(ve){By(i,ve)}while(!0);return a&&i.shellSuspendCounter++,Mr=_o=null,nn=m,se.H=v,se.A=T,Bt===null&&(hn=null,Ht=0,$f()),D}function iA(){for(;Bt!==null;)Fy(Bt)}function sA(i,a){var f=nn;nn|=2;var m=Py(),v=Uy();hn!==i||Ht!==a?(vd=null,wd=lt()+500,zl(i,a)):Pl=Rt(i,a);e:do try{if(sn!==0&&Bt!==null){a=Bt;var T=as;t:switch(sn){case 1:sn=0,as=null,Hl(i,a,T,1);break;case 2:case 9:if(Qp(T)){sn=0,as=null,Vy(a);break}a=function(){sn!==2&&sn!==9||hn!==i||(sn=7),fr(i)},T.then(a,a);break e;case 3:sn=7;break e;case 4:sn=5;break e;case 7:Qp(T)?(sn=0,as=null,Vy(a)):(sn=0,as=null,Hl(i,a,T,7));break;case 5:var D=null;switch(Bt.tag){case 26:D=Bt.memoizedState;case 5:case 27:var F=Bt;if(!D||E2(D)){sn=0,as=null;var W=F.sibling;if(W!==null)Bt=W;else{var ge=F.return;ge!==null?(Bt=ge,Sd(ge)):Bt=null}break t}}sn=0,as=null,Hl(i,a,T,5);break;case 6:sn=0,as=null,Hl(i,a,T,6);break;case 8:y1(),On=6;break e;default:throw Error(r(462))}}rA();break}catch(ve){By(i,ve)}while(!0);return Mr=_o=null,se.H=m,se.A=v,nn=f,Bt!==null?0:(hn=null,Ht=0,$f(),On)}function rA(){for(;Bt!==null&&!Ke();)Fy(Bt)}function Fy(i){var a=hy(i.alternate,i,Fr);i.memoizedProps=i.pendingProps,a===null?Sd(i):Bt=a}function Vy(i){var a=i,f=a.alternate;switch(a.tag){case 15:case 0:a=oy(f,a,a.pendingProps,a.type,void 0,Ht);break;case 11:a=oy(f,a,a.pendingProps,a.type.render,a.ref,Ht);break;case 5:k0(a);default:my(f,a),a=Bt=zp(a,Fr),a=hy(f,a,Fr)}i.memoizedProps=i.pendingProps,a===null?Sd(i):Bt=a}function Hl(i,a,f,m){Mr=_o=null,k0(a),Ll=null,lu=0;var v=a.return;try{if(XC(i,v,a,f,Ht)){On=1,gd(i,ms(f,i.current)),Bt=null;return}}catch(T){if(v!==null)throw Bt=v,T;On=1,gd(i,ms(f,i.current)),Bt=null;return}a.flags&32768?(Xt||m===1?i=!0:Pl||(Ht&536870912)!==0?i=!1:(Ta=i=!0,(m===2||m===9||m===3||m===6)&&(m=bs.current,m!==null&&m.tag===13&&(m.flags|=16384))),zy(a,i)):Sd(a)}function Sd(i){var a=i;do{if((a.flags&32768)!==0){zy(a,Ta);return}i=a.return;var f=KC(a.alternate,a,Fr);if(f!==null){Bt=f;return}if(a=a.sibling,a!==null){Bt=a;return}Bt=a=i}while(a!==null);On===0&&(On=5)}function zy(i,a){do{var f=ZC(i.alternate,i);if(f!==null){f.flags&=32767,Bt=f;return}if(f=i.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!a&&(i=i.sibling,i!==null)){Bt=i;return}Bt=i=f}while(i!==null);On=6,Bt=null}function Hy(i,a,f,m,v,T,D,F,W){i.cancelPendingCommit=null;do Cd();while(pi!==0);if((nn&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(T=a.lanes|a.childLanes,T|=u0,Df(i,f,T,D,F,W),i===hn&&(Bt=hn=null,Ht=0),Fl=a,Ra=i,Vl=f,m1=T,p1=v,Dy=m,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,cA(Re,function(){return Xy(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||m){m=se.T,se.T=null,v=ce.p,ce.p=2,D=nn,nn|=4;try{QC(i,a,f)}finally{nn=D,ce.p=v,se.T=m}}pi=1,$y(),Gy(),qy()}}function $y(){if(pi===1){pi=0;var i=Ra,a=Fl,f=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||f){f=se.T,se.T=null;var m=ce.p;ce.p=2;var v=nn;nn|=4;try{Ty(a,i);var T=M1,D=_(i.containerInfo),F=T.focusedElem,W=T.selectionRange;if(D!==F&&F&&F.ownerDocument&&S(F.ownerDocument.documentElement,F)){if(W!==null&&I(F)){var ge=W.start,ve=W.end;if(ve===void 0&&(ve=ge),"selectionStart"in F)F.selectionStart=ge,F.selectionEnd=Math.min(ve,F.value.length);else{var Se=F.ownerDocument||document,me=Se&&Se.defaultView||window;if(me.getSelection){var xe=me.getSelection(),ft=F.textContent.length,at=Math.min(W.start,ft),ln=W.end===void 0?at:Math.min(W.end,ft);!xe.extend&&at>ln&&(D=ln,ln=at,at=D);var re=w(F,at),te=w(F,ln);if(re&&te&&(xe.rangeCount!==1||xe.anchorNode!==re.node||xe.anchorOffset!==re.offset||xe.focusNode!==te.node||xe.focusOffset!==te.offset)){var de=Se.createRange();de.setStart(re.node,re.offset),xe.removeAllRanges(),at>ln?(xe.addRange(de),xe.extend(te.node,te.offset)):(de.setEnd(te.node,te.offset),xe.addRange(de))}}}}for(Se=[],xe=F;xe=xe.parentNode;)xe.nodeType===1&&Se.push({element:xe,left:xe.scrollLeft,top:xe.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<Se.length;F++){var Ee=Se[F];Ee.element.scrollLeft=Ee.left,Ee.element.scrollTop=Ee.top}}jd=!!I1,M1=I1=null}finally{nn=v,ce.p=m,se.T=f}}i.current=a,pi=2}}function Gy(){if(pi===2){pi=0;var i=Ra,a=Fl,f=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||f){f=se.T,se.T=null;var m=ce.p;ce.p=2;var v=nn;nn|=4;try{Ey(i,a.alternate,a)}finally{nn=v,ce.p=m,se.T=f}}pi=3}}function qy(){if(pi===4||pi===3){pi=0,xt();var i=Ra,a=Fl,f=Vl,m=Dy;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?pi=5:(pi=0,Fl=Ra=null,Yy(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(Na=null),Vn(f),a=a.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot($t,a,void 0,(a.current.flags&128)===128)}catch{}if(m!==null){a=se.T,v=ce.p,ce.p=2,se.T=null;try{for(var T=i.onRecoverableError,D=0;D<m.length;D++){var F=m[D];T(F.value,{componentStack:F.stack})}}finally{se.T=a,ce.p=v}}(Vl&3)!==0&&Cd(),fr(i),v=i.pendingLanes,(f&4194090)!==0&&(v&42)!==0?i===x1?xu++:(xu=0,x1=i):xu=0,yu(0)}}function Yy(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Zc(a)))}function Cd(i){return $y(),Gy(),qy(),Xy()}function Xy(){if(pi!==5)return!1;var i=Ra,a=m1;m1=0;var f=Vn(Vl),m=se.T,v=ce.p;try{ce.p=32>f?32:f,se.T=null,f=p1,p1=null;var T=Ra,D=Vl;if(pi=0,Fl=Ra=null,Vl=0,(nn&6)!==0)throw Error(r(331));var F=nn;if(nn|=4,Iy(T.current),Ny(T,T.current,D,f),nn=F,yu(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot($t,T)}catch{}return!0}finally{ce.p=v,se.T=m,Yy(i,a)}}function Wy(i,a,f){a=ms(f,a),a=W0(i.stateNode,a,2),i=ba(i,a,2),i!==null&&(Ji(i,2),fr(i))}function un(i,a,f){if(i.tag===3)Wy(i,i,f);else for(;a!==null;){if(a.tag===3){Wy(a,i,f);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Na===null||!Na.has(m))){i=ms(f,i),f=Jx(2),m=ba(a,f,2),m!==null&&(ey(f,m,a,i),Ji(m,2),fr(m));break}}a=a.return}}function v1(i,a,f){var m=i.pingCache;if(m===null){m=i.pingCache=new tA;var v=new Set;m.set(a,v)}else v=m.get(a),v===void 0&&(v=new Set,m.set(a,v));v.has(f)||(f1=!0,v.add(f),i=aA.bind(null,i,a,f),a.then(i,i))}function aA(i,a,f){var m=i.pingCache;m!==null&&m.delete(a),i.pingedLanes|=i.suspendedLanes&f,i.warmLanes&=~f,hn===i&&(Ht&f)===f&&(On===4||On===3&&(Ht&62914560)===Ht&&300>lt()-g1?(nn&2)===0&&zl(i,0):d1|=f,Ul===Ht&&(Ul=0)),fr(i)}function Ky(i,a){a===0&&(a=sa()),i=Cl(i,a),i!==null&&(Ji(i,a),fr(i))}function oA(i){var a=i.memoizedState,f=0;a!==null&&(f=a.retryLane),Ky(i,f)}function lA(i,a){var f=0;switch(i.tag){case 13:var m=i.stateNode,v=i.memoizedState;v!==null&&(f=v.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(a),Ky(i,f)}function cA(i,a){return Be(i,a)}var Ad=null,$l=null,E1=!1,Td=!1,S1=!1,Lo=0;function fr(i){i!==$l&&i.next===null&&($l===null?Ad=$l=i:$l=$l.next=i),Td=!0,E1||(E1=!0,fA())}function yu(i,a){if(!S1&&Td){S1=!0;do for(var f=!1,m=Ad;m!==null;){if(i!==0){var v=m.pendingLanes;if(v===0)var T=0;else{var D=m.suspendedLanes,F=m.pingedLanes;T=(1<<31-We(42|i)+1)-1,T&=v&~(D&~F),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(f=!0,e2(m,T))}else T=Ht,T=_t(m,m===hn?T:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(T&3)===0||Rt(m,T)||(f=!0,e2(m,T));m=m.next}while(f);S1=!1}}function uA(){Zy()}function Zy(){Td=E1=!1;var i=0;Lo!==0&&(bA()&&(i=Lo),Lo=0);for(var a=lt(),f=null,m=Ad;m!==null;){var v=m.next,T=Qy(m,a);T===0?(m.next=null,f===null?Ad=v:f.next=v,v===null&&($l=f)):(f=m,(i!==0||(T&3)!==0)&&(Td=!0)),m=v}yu(i)}function Qy(i,a){for(var f=i.suspendedLanes,m=i.pingedLanes,v=i.expirationTimes,T=i.pendingLanes&-62914561;0<T;){var D=31-We(T),F=1<<D,W=v[D];W===-1?((F&f)===0||(F&m)!==0)&&(v[D]=Pi(F,a)):W<=a&&(i.expiredLanes|=F),T&=~F}if(a=hn,f=Ht,f=_t(i,i===a?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,f===0||i===a&&(sn===2||sn===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&nt(m),i.callbackNode=null,i.callbackPriority=0;if((f&3)===0||Rt(i,f)){if(a=f&-f,a===i.callbackPriority)return a;switch(m!==null&&nt(m),Vn(f)){case 2:case 8:f=Te;break;case 32:f=Re;break;case 268435456:f=Ct;break;default:f=Re}return m=Jy.bind(null,i),f=Be(f,m),i.callbackPriority=a,i.callbackNode=f,a}return m!==null&&m!==null&&nt(m),i.callbackPriority=2,i.callbackNode=null,2}function Jy(i,a){if(pi!==0&&pi!==5)return i.callbackNode=null,i.callbackPriority=0,null;var f=i.callbackNode;if(Cd()&&i.callbackNode!==f)return null;var m=Ht;return m=_t(i,i===hn?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(ky(i,m,a),Qy(i,lt()),i.callbackNode!=null&&i.callbackNode===f?Jy.bind(null,i):null)}function e2(i,a){if(Cd())return null;ky(i,a,!0)}function fA(){vA(function(){(nn&6)!==0?Be(mt,uA):Zy()})}function C1(){return Lo===0&&(Lo=bi()),Lo}function t2(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ml(""+i)}function n2(i,a){var f=a.ownerDocument.createElement("input");return f.name=a.name,f.value=a.value,i.id&&f.setAttribute("form",i.id),a.parentNode.insertBefore(f,a),i=new FormData(i),f.parentNode.removeChild(f),i}function dA(i,a,f,m,v){if(a==="submit"&&f&&f.stateNode===v){var T=t2((v[Tn]||null).action),D=m.submitter;D&&(a=(a=D[Tn]||null)?t2(a.formAction):D.getAttribute("formAction"),a!==null&&(T=a,D=null));var F=new ir("action","action",null,m,v);i.push({event:F,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Lo!==0){var W=D?n2(v,D):new FormData(v);$0(f,{pending:!0,data:W,method:v.method,action:T},null,W)}}else typeof T=="function"&&(F.preventDefault(),W=D?n2(v,D):new FormData(v),$0(f,{pending:!0,data:W,method:v.method,action:T},T,W))},currentTarget:v}]})}}for(var A1=0;A1<ar.length;A1++){var T1=ar[A1],hA=T1.toLowerCase(),gA=T1[0].toUpperCase()+T1.slice(1);ns(hA,"on"+gA)}ns(pt,"onAnimationEnd"),ns(gi,"onAnimationIteration"),ns(zi,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(Si,"onTransitionRun"),ns(tn,"onTransitionStart"),ns(ei,"onTransitionCancel"),ns(Ci,"onTransitionEnd"),_n("onMouseEnter",["mouseout","mouseover"]),_n("onMouseLeave",["mouseout","mouseover"]),_n("onPointerEnter",["pointerout","pointerover"]),_n("onPointerLeave",["pointerout","pointerover"]),oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bu));function i2(i,a){a=(a&4)!==0;for(var f=0;f<i.length;f++){var m=i[f],v=m.event;m=m.listeners;e:{var T=void 0;if(a)for(var D=m.length-1;0<=D;D--){var F=m[D],W=F.instance,ge=F.currentTarget;if(F=F.listener,W!==T&&v.isPropagationStopped())break e;T=F,v.currentTarget=ge;try{T(v)}catch(ve){hd(ve)}v.currentTarget=null,T=W}else for(D=0;D<m.length;D++){if(F=m[D],W=F.instance,ge=F.currentTarget,F=F.listener,W!==T&&v.isPropagationStopped())break e;T=F,v.currentTarget=ge;try{T(v)}catch(ve){hd(ve)}v.currentTarget=null,T=W}}}}function Pt(i,a){var f=a[ai];f===void 0&&(f=a[ai]=new Set);var m=i+"__bubble";f.has(m)||(s2(a,i,2,!1),f.add(m))}function _1(i,a,f){var m=0;a&&(m|=4),s2(f,i,m,a)}var _d="_reactListening"+Math.random().toString(36).slice(2);function N1(i){if(!i[_d]){i[_d]=!0,Lf.forEach(function(f){f!=="selectionchange"&&(mA.has(f)||_1(f,!1,i),_1(f,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[_d]||(a[_d]=!0,_1("selectionchange",!1,a))}}function s2(i,a,f,m){switch(N2(a)){case 2:var v=zA;break;case 8:v=HA;break;default:v=z1}f=v.bind(null,a,f,i),v=void 0,!bt||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),m?v!==void 0?i.addEventListener(a,f,{capture:!0,passive:v}):i.addEventListener(a,f,!0):v!==void 0?i.addEventListener(a,f,{passive:v}):i.addEventListener(a,f,!1)}function R1(i,a,f,m,v){var T=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var D=m.tag;if(D===3||D===4){var F=m.stateNode.containerInfo;if(F===v)break;if(D===4)for(D=m.return;D!==null;){var W=D.tag;if((W===3||W===4)&&D.stateNode.containerInfo===v)return;D=D.return}for(;F!==null;){if(D=Ln(F),D===null)return;if(W=D.tag,W===5||W===6||W===26||W===27){m=T=D;continue e}F=F.parentNode}}m=m.return}Ms(function(){var ge=T,ve=ra(f),Se=[];e:{var me=Nr.get(i);if(me!==void 0){var xe=ir,ft=i;switch(i){case"keypress":if(pl(f)===0)break e;case"keydown":case"keyup":xe=Vc;break;case"focusin":ft="focus",xe=ca;break;case"focusout":ft="blur",xe=ca;break;case"beforeblur":case"afterblur":xe=ca;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=Pf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=Zt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=en;break;case pt:case gi:case zi:xe=n0;break;case Ci:xe=a0;break;case"scroll":case"scrollend":xe=vi;break;case"wheel":xe=Tr;break;case"copy":case"cut":case"paste":xe=At;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=yo;break;case"toggle":case"beforetoggle":xe=o0}var at=(a&4)!==0,ln=!at&&(i==="scroll"||i==="scrollend"),re=at?me!==null?me+"Capture":null:me;at=[];for(var te=ge,de;te!==null;){var Ee=te;if(de=Ee.stateNode,Ee=Ee.tag,Ee!==5&&Ee!==26&&Ee!==27||de===null||re===null||(Ee=tt(te,re),Ee!=null&&at.push(wu(te,Ee,de))),ln)break;te=te.return}0<at.length&&(me=new xe(me,ft,null,f,ve),Se.push({event:me,listeners:at}))}}if((a&7)===0){e:{if(me=i==="mouseover"||i==="pointerover",xe=i==="mouseout"||i==="pointerout",me&&f!==ho&&(ft=f.relatedTarget||f.fromElement)&&(Ln(ft)||ft[Xs]))break e;if((xe||me)&&(me=ve.window===ve?ve:(me=ve.ownerDocument)?me.defaultView||me.parentWindow:window,xe?(ft=f.relatedTarget||f.toElement,xe=ge,ft=ft?Ln(ft):null,ft!==null&&(ln=u(ft),at=ft.tag,ft!==ln||at!==5&&at!==27&&at!==6)&&(ft=null)):(xe=null,ft=ge),xe!==ft)){if(at=Pf,Ee="onMouseLeave",re="onMouseEnter",te="mouse",(i==="pointerout"||i==="pointerover")&&(at=yo,Ee="onPointerLeave",re="onPointerEnter",te="pointer"),ln=xe==null?me:Ws(xe),de=ft==null?me:Ws(ft),me=new at(Ee,te+"leave",xe,f,ve),me.target=ln,me.relatedTarget=de,Ee=null,Ln(ve)===ge&&(at=new at(re,te+"enter",ft,f,ve),at.target=de,at.relatedTarget=ln,Ee=at),ln=Ee,xe&&ft)t:{for(at=xe,re=ft,te=0,de=at;de;de=Gl(de))te++;for(de=0,Ee=re;Ee;Ee=Gl(Ee))de++;for(;0<te-de;)at=Gl(at),te--;for(;0<de-te;)re=Gl(re),de--;for(;te--;){if(at===re||re!==null&&at===re.alternate)break t;at=Gl(at),re=Gl(re)}at=null}else at=null;xe!==null&&r2(Se,me,xe,at,!1),ft!==null&&ln!==null&&r2(Se,ln,ft,at,!0)}}e:{if(me=ge?Ws(ge):window,xe=me.nodeName&&me.nodeName.toLowerCase(),xe==="select"||xe==="input"&&me.type==="file")var qe=zf;else if(vo(me))if(Gc)qe=o;else{qe=L;var kt=El}else xe=me.nodeName,!xe||xe.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?ge&&Qe(ge.elementType)&&(qe=zf):qe=s;if(qe&&(qe=qe(i,ge))){Mi(Se,qe,f,ve);break e}kt&&kt(i,me,ge),i==="focusout"&&ge&&me.type==="number"&&ge.memoizedProps.value!=null&&fe(me,"number",me.value)}switch(kt=ge?Ws(ge):window,i){case"focusin":(vo(kt)||kt.contentEditable==="true")&&(P=kt,$=ge,Z=null);break;case"focusout":Z=$=P=null;break;case"mousedown":ee=!0;break;case"contextmenu":case"mouseup":case"dragend":ee=!1,ue(Se,f,ve);break;case"selectionchange":if(k)break;case"keydown":case"keyup":ue(Se,f,ve)}var Je;if(bo)e:{switch(i){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else da?_r(i,f)&&(ot="onCompositionEnd"):i==="keydown"&&f.keyCode===229&&(ot="onCompositionStart");ot&&(Hc&&f.locale!=="ko"&&(da||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&da&&(Je=er()):(Js=ve,go="value"in Js?Js.value:Js.textContent,da=!0)),kt=Nd(ge,ot),0<kt.length&&(ot=new po(ot,i,null,f,ve),Se.push({event:ot,listeners:kt}),Je?ot.data=Je:(Je=wl(f),Je!==null&&(ot.data=Je)))),(Je=zc?wo(i,f):l0(i,f))&&(ot=Nd(ge,"onBeforeInput"),0<ot.length&&(kt=new po("onBeforeInput","beforeinput",null,f,ve),Se.push({event:kt,listeners:ot}),kt.data=Je)),dA(Se,i,ge,f,ve)}i2(Se,a)})}function wu(i,a,f){return{instance:i,listener:a,currentTarget:f}}function Nd(i,a){for(var f=a+"Capture",m=[];i!==null;){var v=i,T=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||T===null||(v=tt(i,f),v!=null&&m.unshift(wu(i,v,T)),v=tt(i,a),v!=null&&m.push(wu(i,v,T))),i.tag===3)return m;i=i.return}return[]}function Gl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function r2(i,a,f,m,v){for(var T=a._reactName,D=[];f!==null&&f!==m;){var F=f,W=F.alternate,ge=F.stateNode;if(F=F.tag,W!==null&&W===m)break;F!==5&&F!==26&&F!==27||ge===null||(W=ge,v?(ge=tt(f,T),ge!=null&&D.unshift(wu(f,ge,W))):v||(ge=tt(f,T),ge!=null&&D.push(wu(f,ge,W)))),f=f.return}D.length!==0&&i.push({event:a,listeners:D})}var pA=/\r\n?/g,xA=/\u0000|\uFFFD/g;function a2(i){return(typeof i=="string"?i:""+i).replace(pA,`
`).replace(xA,"")}function o2(i,a){return a=a2(a),a2(i)===a}function Rd(){}function on(i,a,f,m,v,T){switch(f){case"children":typeof m=="string"?a==="body"||a==="textarea"&&m===""||Qn(i,m):(typeof m=="number"||typeof m=="bigint")&&a!=="body"&&Qn(i,""+m);break;case"className":fl(i,"class",m);break;case"tabIndex":fl(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":fl(i,f,m);break;case"style":Ii(i,m,T);break;case"data":if(a!=="object"){fl(i,"data",m);break}case"src":case"href":if(m===""&&(a!=="a"||f!=="href")){i.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(f);break}m=ml(""+m),i.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(f==="formAction"?(a!=="input"&&on(i,a,"name",v.name,v,null),on(i,a,"formEncType",v.formEncType,v,null),on(i,a,"formMethod",v.formMethod,v,null),on(i,a,"formTarget",v.formTarget,v,null)):(on(i,a,"encType",v.encType,v,null),on(i,a,"method",v.method,v,null),on(i,a,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(f);break}m=ml(""+m),i.setAttribute(f,m);break;case"onClick":m!=null&&(i.onclick=Rd);break;case"onScroll":m!=null&&Pt("scroll",i);break;case"onScrollEnd":m!=null&&Pt("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=f}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}f=ml(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(f,""+m):i.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(f,""):i.removeAttribute(f);break;case"capture":case"download":m===!0?i.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(f,m):i.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(f,m):i.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(f):i.setAttribute(f,m);break;case"popover":Pt("beforetoggle",i),Pt("toggle",i),Ce(i,"popover",m);break;case"xlinkActuate":qt(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":qt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":qt(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":qt(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":qt(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":qt(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":qt(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":qt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":qt(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Ce(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=mn.get(f)||f,Ce(i,f,m))}}function O1(i,a,f,m,v,T){switch(f){case"style":Ii(i,m,T);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=f}}break;case"children":typeof m=="string"?Qn(i,m):(typeof m=="number"||typeof m=="bigint")&&Qn(i,""+m);break;case"onScroll":m!=null&&Pt("scroll",i);break;case"onScrollEnd":m!=null&&Pt("scrollend",i);break;case"onClick":m!=null&&(i.onclick=Rd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kf.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(v=f.endsWith("Capture"),a=f.slice(2,v?f.length-7:void 0),T=i[Tn]||null,T=T!=null?T[f]:null,typeof T=="function"&&i.removeEventListener(a,T,v),typeof m=="function")){typeof T!="function"&&T!==null&&(f in i?i[f]=null:i.hasAttribute(f)&&i.removeAttribute(f)),i.addEventListener(a,m,v);break e}f in i?i[f]=m:m===!0?i.setAttribute(f,""):Ce(i,f,m)}}}function xi(i,a,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",i),Pt("load",i);var m=!1,v=!1,T;for(T in f)if(f.hasOwnProperty(T)){var D=f[T];if(D!=null)switch(T){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:on(i,a,T,D,f,null)}}v&&on(i,a,"srcSet",f.srcSet,f,null),m&&on(i,a,"src",f.src,f,null);return;case"input":Pt("invalid",i);var F=T=D=v=null,W=null,ge=null;for(m in f)if(f.hasOwnProperty(m)){var ve=f[m];if(ve!=null)switch(m){case"name":v=ve;break;case"type":D=ve;break;case"checked":W=ve;break;case"defaultChecked":ge=ve;break;case"value":T=ve;break;case"defaultValue":F=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,a));break;default:on(i,a,m,ve,f,null)}}Zn(i,T,F,W,ge,D,v,!1),hl(i);return;case"select":Pt("invalid",i),m=D=T=null;for(v in f)if(f.hasOwnProperty(v)&&(F=f[v],F!=null))switch(v){case"value":T=F;break;case"defaultValue":D=F;break;case"multiple":m=F;default:on(i,a,v,F,f,null)}a=T,f=D,i.multiple=!!m,a!=null?z(i,!!m,a,!1):f!=null&&z(i,!!m,f,!0);return;case"textarea":Pt("invalid",i),T=v=m=null;for(D in f)if(f.hasOwnProperty(D)&&(F=f[D],F!=null))switch(D){case"value":m=F;break;case"defaultValue":v=F;break;case"children":T=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:on(i,a,D,F,f,null)}kn(i,m,v,T),hl(i);return;case"option":for(W in f)if(f.hasOwnProperty(W)&&(m=f[W],m!=null))switch(W){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:on(i,a,W,m,f,null)}return;case"dialog":Pt("beforetoggle",i),Pt("toggle",i),Pt("cancel",i),Pt("close",i);break;case"iframe":case"object":Pt("load",i);break;case"video":case"audio":for(m=0;m<bu.length;m++)Pt(bu[m],i);break;case"image":Pt("error",i),Pt("load",i);break;case"details":Pt("toggle",i);break;case"embed":case"source":case"link":Pt("error",i),Pt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in f)if(f.hasOwnProperty(ge)&&(m=f[ge],m!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:on(i,a,ge,m,f,null)}return;default:if(Qe(a)){for(ve in f)f.hasOwnProperty(ve)&&(m=f[ve],m!==void 0&&O1(i,a,ve,m,f,void 0));return}}for(F in f)f.hasOwnProperty(F)&&(m=f[F],m!=null&&on(i,a,F,m,f,null))}function yA(i,a,f,m){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,T=null,D=null,F=null,W=null,ge=null,ve=null;for(xe in f){var Se=f[xe];if(f.hasOwnProperty(xe)&&Se!=null)switch(xe){case"checked":break;case"value":break;case"defaultValue":W=Se;default:m.hasOwnProperty(xe)||on(i,a,xe,null,m,Se)}}for(var me in m){var xe=m[me];if(Se=f[me],m.hasOwnProperty(me)&&(xe!=null||Se!=null))switch(me){case"type":T=xe;break;case"name":v=xe;break;case"checked":ge=xe;break;case"defaultChecked":ve=xe;break;case"value":D=xe;break;case"defaultValue":F=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(r(137,a));break;default:xe!==Se&&on(i,a,me,xe,m,Se)}}Kt(i,D,F,W,ge,ve,T,v);return;case"select":xe=D=F=me=null;for(T in f)if(W=f[T],f.hasOwnProperty(T)&&W!=null)switch(T){case"value":break;case"multiple":xe=W;default:m.hasOwnProperty(T)||on(i,a,T,null,m,W)}for(v in m)if(T=m[v],W=f[v],m.hasOwnProperty(v)&&(T!=null||W!=null))switch(v){case"value":me=T;break;case"defaultValue":F=T;break;case"multiple":D=T;default:T!==W&&on(i,a,v,T,m,W)}a=F,f=D,m=xe,me!=null?z(i,!!f,me,!1):!!m!=!!f&&(a!=null?z(i,!!f,a,!0):z(i,!!f,f?[]:"",!1));return;case"textarea":xe=me=null;for(F in f)if(v=f[F],f.hasOwnProperty(F)&&v!=null&&!m.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:on(i,a,F,null,m,v)}for(D in m)if(v=m[D],T=f[D],m.hasOwnProperty(D)&&(v!=null||T!=null))switch(D){case"value":me=v;break;case"defaultValue":xe=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==T&&on(i,a,D,v,m,T)}Ze(i,me,xe);return;case"option":for(var ft in f)if(me=f[ft],f.hasOwnProperty(ft)&&me!=null&&!m.hasOwnProperty(ft))switch(ft){case"selected":i.selected=!1;break;default:on(i,a,ft,null,m,me)}for(W in m)if(me=m[W],xe=f[W],m.hasOwnProperty(W)&&me!==xe&&(me!=null||xe!=null))switch(W){case"selected":i.selected=me&&typeof me!="function"&&typeof me!="symbol";break;default:on(i,a,W,me,m,xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in f)me=f[at],f.hasOwnProperty(at)&&me!=null&&!m.hasOwnProperty(at)&&on(i,a,at,null,m,me);for(ge in m)if(me=m[ge],xe=f[ge],m.hasOwnProperty(ge)&&me!==xe&&(me!=null||xe!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(137,a));break;default:on(i,a,ge,me,m,xe)}return;default:if(Qe(a)){for(var ln in f)me=f[ln],f.hasOwnProperty(ln)&&me!==void 0&&!m.hasOwnProperty(ln)&&O1(i,a,ln,void 0,m,me);for(ve in m)me=m[ve],xe=f[ve],!m.hasOwnProperty(ve)||me===xe||me===void 0&&xe===void 0||O1(i,a,ve,me,m,xe);return}}for(var re in f)me=f[re],f.hasOwnProperty(re)&&me!=null&&!m.hasOwnProperty(re)&&on(i,a,re,null,m,me);for(Se in m)me=m[Se],xe=f[Se],!m.hasOwnProperty(Se)||me===xe||me==null&&xe==null||on(i,a,Se,me,m,xe)}var I1=null,M1=null;function Od(i){return i.nodeType===9?i:i.ownerDocument}function l2(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c2(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function D1(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var L1=null;function bA(){var i=window.event;return i&&i.type==="popstate"?i===L1?!1:(L1=i,!0):(L1=null,!1)}var u2=typeof setTimeout=="function"?setTimeout:void 0,wA=typeof clearTimeout=="function"?clearTimeout:void 0,f2=typeof Promise=="function"?Promise:void 0,vA=typeof queueMicrotask=="function"?queueMicrotask:typeof f2<"u"?function(i){return f2.resolve(null).then(i).catch(EA)}:u2;function EA(i){setTimeout(function(){throw i})}function Ia(i){return i==="head"}function d2(i,a){var f=a,m=0,v=0;do{var T=f.nextSibling;if(i.removeChild(f),T&&T.nodeType===8)if(f=T.data,f==="/$"){if(0<m&&8>m){f=m;var D=i.ownerDocument;if(f&1&&vu(D.documentElement),f&2&&vu(D.body),f&4)for(f=D.head,vu(f),D=f.firstChild;D;){var F=D.nextSibling,W=D.nodeName;D[hs]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&D.rel.toLowerCase()==="stylesheet"||f.removeChild(D),D=F}}if(v===0){i.removeChild(T),Ru(a);return}v--}else f==="$"||f==="$?"||f==="$!"?v++:m=f.charCodeAt(0)-48;else m=0;f=T}while(f);Ru(a)}function k1(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var f=a;switch(a=a.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":k1(f),fo(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}i.removeChild(f)}}function SA(i,a,f,m){for(;i.nodeType===1;){var v=f;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[hs])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(T=i.getAttribute("rel"),T==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(T!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(T=i.getAttribute("src"),(T!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&T&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var T=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===T)return i}else return i;if(i=js(i.nextSibling),i===null)break}return null}function CA(i,a,f){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!f||(i=js(i.nextSibling),i===null))return null;return i}function j1(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function AA(i,a){var f=i.ownerDocument;if(i.data!=="$?"||f.readyState==="complete")a();else{var m=function(){a(),f.removeEventListener("DOMContentLoaded",m)};f.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function js(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var B1=null;function h2(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var f=i.data;if(f==="$"||f==="$!"||f==="$?"){if(a===0)return i;a--}else f==="/$"&&a++}i=i.previousSibling}return null}function g2(i,a,f){switch(a=Od(f),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function vu(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);fo(i)}var vs=new Map,m2=new Set;function Id(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Vr=ce.d;ce.d={f:TA,r:_A,D:NA,C:RA,L:OA,m:IA,X:DA,S:MA,M:LA};function TA(){var i=Vr.f(),a=Ed();return i||a}function _A(i){var a=es(i);a!==null&&a.tag===5&&a.type==="form"?kx(a):Vr.r(i)}var ql=typeof document>"u"?null:document;function p2(i,a,f){var m=ql;if(m&&typeof a=="string"&&a){var v=Kn(a);v='link[rel="'+i+'"][href="'+v+'"]',typeof f=="string"&&(v+='[crossorigin="'+f+'"]'),m2.has(v)||(m2.add(v),i={rel:i,crossOrigin:f,href:a},m.querySelector(v)===null&&(a=m.createElement("link"),xi(a,"link",i),Jt(a),m.head.appendChild(a)))}}function NA(i){Vr.D(i),p2("dns-prefetch",i,null)}function RA(i,a){Vr.C(i,a),p2("preconnect",i,a)}function OA(i,a,f){Vr.L(i,a,f);var m=ql;if(m&&i&&a){var v='link[rel="preload"][as="'+Kn(a)+'"]';a==="image"&&f&&f.imageSrcSet?(v+='[imagesrcset="'+Kn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(v+='[imagesizes="'+Kn(f.imageSizes)+'"]')):v+='[href="'+Kn(i)+'"]';var T=v;switch(a){case"style":T=Yl(i);break;case"script":T=Xl(i)}vs.has(T)||(i=E({rel:"preload",href:a==="image"&&f&&f.imageSrcSet?void 0:i,as:a},f),vs.set(T,i),m.querySelector(v)!==null||a==="style"&&m.querySelector(Eu(T))||a==="script"&&m.querySelector(Su(T))||(a=m.createElement("link"),xi(a,"link",i),Jt(a),m.head.appendChild(a)))}}function IA(i,a){Vr.m(i,a);var f=ql;if(f&&i){var m=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+Kn(m)+'"][href="'+Kn(i)+'"]',T=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Xl(i)}if(!vs.has(T)&&(i=E({rel:"modulepreload",href:i},a),vs.set(T,i),f.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Su(T)))return}m=f.createElement("link"),xi(m,"link",i),Jt(m),f.head.appendChild(m)}}}function MA(i,a,f){Vr.S(i,a,f);var m=ql;if(m&&i){var v=Os(m).hoistableStyles,T=Yl(i);a=a||"default";var D=v.get(T);if(!D){var F={loading:0,preload:null};if(D=m.querySelector(Eu(T)))F.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":a},f),(f=vs.get(T))&&P1(i,f);var W=D=m.createElement("link");Jt(W),xi(W,"link",i),W._p=new Promise(function(ge,ve){W.onload=ge,W.onerror=ve}),W.addEventListener("load",function(){F.loading|=1}),W.addEventListener("error",function(){F.loading|=2}),F.loading|=4,Md(D,a,m)}D={type:"stylesheet",instance:D,count:1,state:F},v.set(T,D)}}}function DA(i,a){Vr.X(i,a);var f=ql;if(f&&i){var m=Os(f).hoistableScripts,v=Xl(i),T=m.get(v);T||(T=f.querySelector(Su(v)),T||(i=E({src:i,async:!0},a),(a=vs.get(v))&&U1(i,a),T=f.createElement("script"),Jt(T),xi(T,"link",i),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(v,T))}}function LA(i,a){Vr.M(i,a);var f=ql;if(f&&i){var m=Os(f).hoistableScripts,v=Xl(i),T=m.get(v);T||(T=f.querySelector(Su(v)),T||(i=E({src:i,async:!0,type:"module"},a),(a=vs.get(v))&&U1(i,a),T=f.createElement("script"),Jt(T),xi(T,"link",i),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(v,T))}}function x2(i,a,f,m){var v=(v=be.current)?Id(v):null;if(!v)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(a=Yl(f.href),f=Os(v).hoistableStyles,m=f.get(a),m||(m={type:"style",instance:null,count:0,state:null},f.set(a,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){i=Yl(f.href);var T=Os(v).hoistableStyles,D=T.get(i);if(D||(v=v.ownerDocument||v,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(i,D),(T=v.querySelector(Eu(i)))&&!T._p&&(D.instance=T,D.state.loading=5),vs.has(i)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},vs.set(i,f),T||kA(v,i,f,D.state))),a&&m===null)throw Error(r(528,""));return D}if(a&&m!==null)throw Error(r(529,""));return null;case"script":return a=f.async,f=f.src,typeof f=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Xl(f),f=Os(v).hoistableScripts,m=f.get(a),m||(m={type:"script",instance:null,count:0,state:null},f.set(a,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Yl(i){return'href="'+Kn(i)+'"'}function Eu(i){return'link[rel="stylesheet"]['+i+"]"}function y2(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function kA(i,a,f,m){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?m.loading=1:(a=i.createElement("link"),m.preload=a,a.addEventListener("load",function(){return m.loading|=1}),a.addEventListener("error",function(){return m.loading|=2}),xi(a,"link",f),Jt(a),i.head.appendChild(a))}function Xl(i){return'[src="'+Kn(i)+'"]'}function Su(i){return"script[async]"+i}function b2(i,a,f){if(a.count++,a.instance===null)switch(a.type){case"style":var m=i.querySelector('style[data-href~="'+Kn(f.href)+'"]');if(m)return a.instance=m,Jt(m),m;var v=E({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),Jt(m),xi(m,"style",v),Md(m,f.precedence,i),a.instance=m;case"stylesheet":v=Yl(f.href);var T=i.querySelector(Eu(v));if(T)return a.state.loading|=4,a.instance=T,Jt(T),T;m=y2(f),(v=vs.get(v))&&P1(m,v),T=(i.ownerDocument||i).createElement("link"),Jt(T);var D=T;return D._p=new Promise(function(F,W){D.onload=F,D.onerror=W}),xi(T,"link",m),a.state.loading|=4,Md(T,f.precedence,i),a.instance=T;case"script":return T=Xl(f.src),(v=i.querySelector(Su(T)))?(a.instance=v,Jt(v),v):(m=f,(v=vs.get(T))&&(m=E({},f),U1(m,v)),i=i.ownerDocument||i,v=i.createElement("script"),Jt(v),xi(v,"link",m),i.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(m=a.instance,a.state.loading|=4,Md(m,f.precedence,i));return a.instance}function Md(i,a,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,T=v,D=0;D<m.length;D++){var F=m[D];if(F.dataset.precedence===a)T=F;else if(T!==v)break}T?T.parentNode.insertBefore(i,T.nextSibling):(a=f.nodeType===9?f.head:f,a.insertBefore(i,a.firstChild))}function P1(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function U1(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Dd=null;function w2(i,a,f){if(Dd===null){var m=new Map,v=Dd=new Map;v.set(f,m)}else v=Dd,m=v.get(f),m||(m=new Map,v.set(f,m));if(m.has(i))return m;for(m.set(i,null),f=f.getElementsByTagName(i),v=0;v<f.length;v++){var T=f[v];if(!(T[hs]||T[ri]||i==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var D=T.getAttribute(a)||"";D=i+D;var F=m.get(D);F?F.push(T):m.set(D,[T])}}return m}function v2(i,a,f){i=i.ownerDocument||i,i.head.insertBefore(f,a==="title"?i.querySelector("head > title"):null)}function jA(i,a,f){if(f===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function E2(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Cu=null;function BA(){}function PA(i,a,f){if(Cu===null)throw Error(r(475));var m=Cu;if(a.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var v=Yl(f.href),T=i.querySelector(Eu(v));if(T){i=T._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(m.count++,m=Ld.bind(m),i.then(m,m)),a.state.loading|=4,a.instance=T,Jt(T);return}T=i.ownerDocument||i,f=y2(f),(v=vs.get(v))&&P1(f,v),T=T.createElement("link"),Jt(T);var D=T;D._p=new Promise(function(F,W){D.onload=F,D.onerror=W}),xi(T,"link",f),a.instance=T}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(m.count++,a=Ld.bind(m),i.addEventListener("load",a),i.addEventListener("error",a))}}function UA(){if(Cu===null)throw Error(r(475));var i=Cu;return i.stylesheets&&i.count===0&&F1(i,i.stylesheets),0<i.count?function(a){var f=setTimeout(function(){if(i.stylesheets&&F1(i,i.stylesheets),i.unsuspend){var m=i.unsuspend;i.unsuspend=null,m()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(f)}}:null}function Ld(){if(this.count--,this.count===0){if(this.stylesheets)F1(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var kd=null;function F1(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,kd=new Map,a.forEach(FA,i),kd=null,Ld.call(i))}function FA(i,a){if(!(a.state.loading&4)){var f=kd.get(i);if(f)var m=f.get(null);else{f=new Map,kd.set(i,f);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<v.length;T++){var D=v[T];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(f.set(D.dataset.precedence,D),m=D)}m&&f.set(null,m)}v=a.instance,D=v.getAttribute("data-precedence"),T=f.get(D)||m,T===m&&f.set(null,v),f.set(D,v),this.count++,m=Ld.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),T?T.parentNode.insertBefore(v,T.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),a.state.loading|=4}}var Au={$$typeof:B,Provider:null,Consumer:null,_currentValue:Le,_currentValue2:Le,_threadCount:0};function VA(i,a,f,m,v,T,D,F){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lt(0),this.hiddenUpdates=Lt(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=T,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function S2(i,a,f,m,v,T,D,F,W,ge,ve,Se){return i=new VA(i,a,f,D,F,W,ge,Se),a=1,T===!0&&(a|=24),T=is(3,null,null,a),i.current=T,T.stateNode=i,a=v0(),a.refCount++,i.pooledCache=a,a.refCount++,T.memoizedState={element:m,isDehydrated:f,cache:a},A0(T),i}function C2(i){return i?(i=Al,i):Al}function A2(i,a,f,m,v,T){v=C2(v),m.context===null?m.context=v:m.pendingContext=v,m=ya(a),m.payload={element:f},T=T===void 0?null:T,T!==null&&(m.callback=T),f=ba(i,m,a),f!==null&&(ls(f,i,a),tu(f,i,a))}function T2(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var f=i.retryLane;i.retryLane=f!==0&&f<a?f:a}}function V1(i,a){T2(i,a),(i=i.alternate)&&T2(i,a)}function _2(i){if(i.tag===13){var a=Cl(i,67108864);a!==null&&ls(a,i,67108864),V1(i,67108864)}}var jd=!0;function zA(i,a,f,m){var v=se.T;se.T=null;var T=ce.p;try{ce.p=2,z1(i,a,f,m)}finally{ce.p=T,se.T=v}}function HA(i,a,f,m){var v=se.T;se.T=null;var T=ce.p;try{ce.p=8,z1(i,a,f,m)}finally{ce.p=T,se.T=v}}function z1(i,a,f,m){if(jd){var v=H1(m);if(v===null)R1(i,a,m,Bd,f),R2(i,m);else if(GA(v,i,a,f,m))m.stopPropagation();else if(R2(i,m),a&4&&-1<$A.indexOf(i)){for(;v!==null;){var T=es(v);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var D=ct(T.pendingLanes);if(D!==0){var F=T;for(F.pendingLanes|=2,F.entangledLanes|=2;D;){var W=1<<31-We(D);F.entanglements[1]|=W,D&=~W}fr(T),(nn&6)===0&&(wd=lt()+500,yu(0))}}break;case 13:F=Cl(T,2),F!==null&&ls(F,T,2),Ed(),V1(T,2)}if(T=H1(m),T===null&&R1(i,a,m,Bd,f),T===v)break;v=T}v!==null&&m.stopPropagation()}else R1(i,a,m,null,f)}}function H1(i){return i=ra(i),$1(i)}var Bd=null;function $1(i){if(Bd=null,i=Ln(i),i!==null){var a=u(i);if(a===null)i=null;else{var f=a.tag;if(f===13){if(i=g(a),i!==null)return i;i=null}else if(f===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Bd=i,null}function N2(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yt()){case mt:return 2;case Te:return 8;case Re:case et:return 32;case Ct:return 268435456;default:return 32}default:return 32}}var G1=!1,Ma=null,Da=null,La=null,Tu=new Map,_u=new Map,ka=[],$A="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function R2(i,a){switch(i){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":Da=null;break;case"mouseover":case"mouseout":La=null;break;case"pointerover":case"pointerout":Tu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":_u.delete(a.pointerId)}}function Nu(i,a,f,m,v,T){return i===null||i.nativeEvent!==T?(i={blockedOn:a,domEventName:f,eventSystemFlags:m,nativeEvent:T,targetContainers:[v]},a!==null&&(a=es(a),a!==null&&_2(a)),i):(i.eventSystemFlags|=m,a=i.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),i)}function GA(i,a,f,m,v){switch(a){case"focusin":return Ma=Nu(Ma,i,a,f,m,v),!0;case"dragenter":return Da=Nu(Da,i,a,f,m,v),!0;case"mouseover":return La=Nu(La,i,a,f,m,v),!0;case"pointerover":var T=v.pointerId;return Tu.set(T,Nu(Tu.get(T)||null,i,a,f,m,v)),!0;case"gotpointercapture":return T=v.pointerId,_u.set(T,Nu(_u.get(T)||null,i,a,f,m,v)),!0}return!1}function O2(i){var a=Ln(i.target);if(a!==null){var f=u(a);if(f!==null){if(a=f.tag,a===13){if(a=g(f),a!==null){i.blockedOn=a,ul(i.priority,function(){if(f.tag===13){var m=os();m=uo(m);var v=Cl(f,m);v!==null&&ls(v,f,m),V1(f,m)}});return}}else if(a===3&&f.stateNode.current.memoizedState.isDehydrated){i.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Pd(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var f=H1(i.nativeEvent);if(f===null){f=i.nativeEvent;var m=new f.constructor(f.type,f);ho=m,f.target.dispatchEvent(m),ho=null}else return a=es(f),a!==null&&_2(a),i.blockedOn=f,!1;a.shift()}return!0}function I2(i,a,f){Pd(i)&&f.delete(a)}function qA(){G1=!1,Ma!==null&&Pd(Ma)&&(Ma=null),Da!==null&&Pd(Da)&&(Da=null),La!==null&&Pd(La)&&(La=null),Tu.forEach(I2),_u.forEach(I2)}function Ud(i,a){i.blockedOn===a&&(i.blockedOn=null,G1||(G1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,qA)))}var Fd=null;function M2(i){Fd!==i&&(Fd=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Fd===i&&(Fd=null);for(var a=0;a<i.length;a+=3){var f=i[a],m=i[a+1],v=i[a+2];if(typeof m!="function"){if($1(m||f)===null)continue;break}var T=es(f);T!==null&&(i.splice(a,3),a-=3,$0(T,{pending:!0,data:v,method:f.method,action:m},m,v))}}))}function Ru(i){function a(W){return Ud(W,i)}Ma!==null&&Ud(Ma,i),Da!==null&&Ud(Da,i),La!==null&&Ud(La,i),Tu.forEach(a),_u.forEach(a);for(var f=0;f<ka.length;f++){var m=ka[f];m.blockedOn===i&&(m.blockedOn=null)}for(;0<ka.length&&(f=ka[0],f.blockedOn===null);)O2(f),f.blockedOn===null&&ka.shift();if(f=(i.ownerDocument||i).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var v=f[m],T=f[m+1],D=v[Tn]||null;if(typeof T=="function")D||M2(f);else if(D){var F=null;if(T&&T.hasAttribute("formAction")){if(v=T,D=T[Tn]||null)F=D.formAction;else if($1(v)!==null)continue}else F=D.action;typeof F=="function"?f[m+1]=F:(f.splice(m,3),m-=3),M2(f)}}}function q1(i){this._internalRoot=i}Vd.prototype.render=q1.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var f=a.current,m=os();A2(f,m,i,a,null,null)},Vd.prototype.unmount=q1.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;A2(i.current,2,null,i,null,null),Ed(),a[Xs]=null}};function Vd(i){this._internalRoot=i}Vd.prototype.unstable_scheduleHydration=function(i){if(i){var a=Er();i={blockedOn:null,target:i,priority:a};for(var f=0;f<ka.length&&a!==0&&a<ka[f].priority;f++);ka.splice(f,0,i),f===0&&O2(i)}};var D2=e.version;if(D2!=="19.1.0")throw Error(r(527,D2,"19.1.0"));ce.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=b(a),i=i!==null?x(i):null,i=i===null?null:i.stateNode,i};var YA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zd.isDisabled&&zd.supportsFiber)try{$t=zd.inject(YA),Oe=zd}catch{}}return Mu.createRoot=function(i,a){if(!l(i))throw Error(r(299));var f=!1,m="",v=Wx,T=Kx,D=Zx,F=null;return a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(D=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(F=a.unstable_transitionCallbacks)),a=S2(i,1,!1,null,null,f,m,v,T,D,F,null),i[Xs]=a.current,N1(i),new q1(a)},Mu.hydrateRoot=function(i,a,f){if(!l(i))throw Error(r(299));var m=!1,v="",T=Wx,D=Kx,F=Zx,W=null,ge=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(v=f.identifierPrefix),f.onUncaughtError!==void 0&&(T=f.onUncaughtError),f.onCaughtError!==void 0&&(D=f.onCaughtError),f.onRecoverableError!==void 0&&(F=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(W=f.unstable_transitionCallbacks),f.formState!==void 0&&(ge=f.formState)),a=S2(i,1,!0,a,f??null,m,v,T,D,F,W,ge),a.context=C2(null),f=a.current,m=os(),m=uo(m),v=ya(m),v.callback=null,ba(f,v,m),f=m,a.current.lanes=f,Ji(a,f),fr(a),i[Xs]=a.current,N1(i),new Vd(a)},Mu.version="19.1.0",Mu}var lb;function $R(){if(lb)return Z1.exports;lb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Z1.exports=HR(),Z1.exports}var GR=$R(),Du={},cb;function qR(){if(cb)return Du;cb=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.parse=g,Du.serialize=x;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,u=(()=>{const N=function(){};return N.prototype=Object.create(null),N})();function g(N,O){const M=new u,j=N.length;if(j<2)return M;const U=(O==null?void 0:O.decode)||E;let H=0;do{const q=N.indexOf("=",H);if(q===-1)break;const B=N.indexOf(";",H),V=B===-1?j:B;if(q>V){H=N.lastIndexOf(";",q-1)+1;continue}const G=y(N,H,q),ne=b(N,q,G),K=N.slice(G,ne);if(M[K]===void 0){let ae=y(N,q+1,V),Q=b(N,V,ae);const we=U(N.slice(ae,Q));M[K]=we}H=V+1}while(H<j);return M}function y(N,O,M){do{const j=N.charCodeAt(O);if(j!==32&&j!==9)return O}while(++O<M);return M}function b(N,O,M){for(;O>M;){const j=N.charCodeAt(--O);if(j!==32&&j!==9)return O+1}return M}function x(N,O,M){const j=(M==null?void 0:M.encode)||encodeURIComponent;if(!t.test(N))throw new TypeError(`argument name is invalid: ${N}`);const U=j(O);if(!e.test(U))throw new TypeError(`argument val is invalid: ${O}`);let H=N+"="+U;if(!M)return H;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);H+="; Max-Age="+M.maxAge}if(M.domain){if(!n.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);H+="; Domain="+M.domain}if(M.path){if(!r.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);H+="; Path="+M.path}if(M.expires){if(!A(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);H+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(H+="; HttpOnly"),M.secure&&(H+="; Secure"),M.partitioned&&(H+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":H+="; Priority=Low";break;case"medium":H+="; Priority=Medium";break;case"high":H+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":H+="; SameSite=Strict";break;case"lax":H+="; SameSite=Lax";break;case"none":H+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return H}function E(N){if(N.indexOf("%")===-1)return N;try{return decodeURIComponent(N)}catch{return N}}function A(N){return l.call(N)==="[object Date]"}return Du}qR();var ub="popstate";function YR(t={}){function e(r,l){let{pathname:u,search:g,hash:y}=r.location;return kg("",{pathname:u,search:g,hash:y},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(r,l){return typeof l=="string"?l:cf(l)}return WR(e,n,null,t)}function En(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XR(){return Math.random().toString(36).substring(2,10)}function fb(t,e){return{usr:t.state,key:t.key,idx:e}}function kg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Nc(e):e,state:n,key:e&&e.key||r||XR()}}function cf({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Nc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function WR(t,e,n,r={}){let{window:l=document.defaultView,v5Compat:u=!1}=r,g=l.history,y="POP",b=null,x=E();x==null&&(x=0,g.replaceState({...g.state,idx:x},""));function E(){return(g.state||{idx:null}).idx}function A(){y="POP";let U=E(),H=U==null?null:U-x;x=U,b&&b({action:y,location:j.location,delta:H})}function N(U,H){y="PUSH";let q=kg(j.location,U,H);x=E()+1;let B=fb(q,x),V=j.createHref(q);try{g.pushState(B,"",V)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;l.location.assign(V)}u&&b&&b({action:y,location:j.location,delta:1})}function O(U,H){y="REPLACE";let q=kg(j.location,U,H);x=E();let B=fb(q,x),V=j.createHref(q);g.replaceState(B,"",V),u&&b&&b({action:y,location:j.location,delta:0})}function M(U){return KR(U)}let j={get action(){return y},get location(){return t(l,g)},listen(U){if(b)throw new Error("A history only accepts one active listener");return l.addEventListener(ub,A),b=U,()=>{l.removeEventListener(ub,A),b=null}},createHref(U){return e(l,U)},createURL:M,encodeLocation(U){let H=M(U);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:N,replace:O,go(U){return g.go(U)}};return j}function KR(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),En(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:cf(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function b3(t,e,n="/"){return ZR(t,e,n,!1)}function ZR(t,e,n,r){let l=typeof e=="string"?Nc(e):e,u=Qr(l.pathname||"/",n);if(u==null)return null;let g=w3(t);QR(g);let y=null;for(let b=0;y==null&&b<g.length;++b){let x=cO(u);y=oO(g[b],x,r)}return y}function w3(t,e=[],n=[],r=""){let l=(u,g,y)=>{let b={relativePath:y===void 0?u.path||"":y,caseSensitive:u.caseSensitive===!0,childrenIndex:g,route:u};b.relativePath.startsWith("/")&&(En(b.relativePath.startsWith(r),`Absolute route path "${b.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(r.length));let x=Wr([r,b.relativePath]),E=n.concat(b);u.children&&u.children.length>0&&(En(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),w3(u.children,e,E,x)),!(u.path==null&&!u.index)&&e.push({path:x,score:rO(x,u.index),routesMeta:E})};return t.forEach((u,g)=>{var y;if(u.path===""||!((y=u.path)!=null&&y.includes("?")))l(u,g);else for(let b of v3(u.path))l(u,g,b)}),e}function v3(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(r.length===0)return l?[u,""]:[u];let g=v3(r.join("/")),y=[];return y.push(...g.map(b=>b===""?u:[u,b].join("/"))),l&&y.push(...g),y.map(b=>t.startsWith("/")&&b===""?"/":b)}function QR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var JR=/^:[\w-]+$/,eO=3,tO=2,nO=1,iO=10,sO=-2,db=t=>t==="*";function rO(t,e){let n=t.split("/"),r=n.length;return n.some(db)&&(r+=sO),e&&(r+=tO),n.filter(l=>!db(l)).reduce((l,u)=>l+(JR.test(u)?eO:u===""?nO:iO),r)}function aO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,l)=>r===e[l])?t[t.length-1]-e[e.length-1]:0}function oO(t,e,n=!1){let{routesMeta:r}=t,l={},u="/",g=[];for(let y=0;y<r.length;++y){let b=r[y],x=y===r.length-1,E=u==="/"?e:e.slice(u.length)||"/",A=xh({path:b.relativePath,caseSensitive:b.caseSensitive,end:x},E),N=b.route;if(!A&&x&&n&&!r[r.length-1].route.index&&(A=xh({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},E)),!A)return null;Object.assign(l,A.params),g.push({params:l,pathname:Wr([u,A.pathname]),pathnameBase:hO(Wr([u,A.pathnameBase])),route:N}),A.pathnameBase!=="/"&&(u=Wr([u,A.pathnameBase]))}return g}function xh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=lO(t.path,t.caseSensitive,t.end),l=e.match(n);if(!l)return null;let u=l[0],g=u.replace(/(.)\/+$/,"$1"),y=l.slice(1);return{params:r.reduce((x,{paramName:E,isOptional:A},N)=>{if(E==="*"){let M=y[N]||"";g=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const O=y[N];return A&&!O?x[E]=void 0:x[E]=(O||"").replace(/%2F/g,"/"),x},{}),pathname:u,pathnameBase:g,pattern:t}}function lO(t,e=!1,n=!0){qs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,y,b)=>(r.push({paramName:y,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),r]}function cO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qs(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Qr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function uO(t,e="/"){let{pathname:n,search:r="",hash:l=""}=typeof t=="string"?Nc(t):t;return{pathname:n?n.startsWith("/")?n:fO(n,e):e,search:gO(r),hash:mO(l)}}function fO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function tg(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function dO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Dm(t){let e=dO(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Lm(t,e,n,r=!1){let l;typeof t=="string"?l=Nc(t):(l={...t},En(!l.pathname||!l.pathname.includes("?"),tg("?","pathname","search",l)),En(!l.pathname||!l.pathname.includes("#"),tg("#","pathname","hash",l)),En(!l.search||!l.search.includes("#"),tg("#","search","hash",l)));let u=t===""||l.pathname==="",g=u?"/":l.pathname,y;if(g==null)y=n;else{let A=e.length-1;if(!r&&g.startsWith("..")){let N=g.split("/");for(;N[0]==="..";)N.shift(),A-=1;l.pathname=N.join("/")}y=A>=0?e[A]:"/"}let b=uO(l,y),x=g&&g!=="/"&&g.endsWith("/"),E=(u||g===".")&&n.endsWith("/");return!b.pathname.endsWith("/")&&(x||E)&&(b.pathname+="/"),b}var Wr=t=>t.join("/").replace(/\/\/+/g,"/"),hO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function pO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var E3=["POST","PUT","PATCH","DELETE"];new Set(E3);var xO=["GET",...E3];new Set(xO);var Rc=R.createContext(null);Rc.displayName="DataRouter";var jh=R.createContext(null);jh.displayName="DataRouterState";var S3=R.createContext({isTransitioning:!1});S3.displayName="ViewTransition";var yO=R.createContext(new Map);yO.displayName="Fetchers";var bO=R.createContext(null);bO.displayName="Await";var Ys=R.createContext(null);Ys.displayName="Navigation";var Sf=R.createContext(null);Sf.displayName="Location";var _s=R.createContext({outlet:null,matches:[],isDataRoute:!1});_s.displayName="Route";var km=R.createContext(null);km.displayName="RouteError";function wO(t,{relative:e}={}){En(Oc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(Ys),{hash:l,pathname:u,search:g}=Cf(t,{relative:e}),y=u;return n!=="/"&&(y=u==="/"?n:Wr([n,u])),r.createHref({pathname:y,search:g,hash:l})}function Oc(){return R.useContext(Sf)!=null}function na(){return En(Oc(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Sf).location}var C3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function A3(t){R.useContext(Ys).static||R.useLayoutEffect(t)}function Ns(){let{isDataRoute:t}=R.useContext(_s);return t?kO():vO()}function vO(){En(Oc(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(Rc),{basename:e,navigator:n}=R.useContext(Ys),{matches:r}=R.useContext(_s),{pathname:l}=na(),u=JSON.stringify(Dm(r)),g=R.useRef(!1);return A3(()=>{g.current=!0}),R.useCallback((b,x={})=>{if(qs(g.current,C3),!g.current)return;if(typeof b=="number"){n.go(b);return}let E=Lm(b,JSON.parse(u),l,x.relative==="path");t==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Wr([e,E.pathname])),(x.replace?n.replace:n.push)(E,x.state,x)},[e,n,u,l,t])}var EO=R.createContext(null);function SO(t){let e=R.useContext(_s).outlet;return e&&R.createElement(EO.Provider,{value:t},e)}function T3(){let{matches:t}=R.useContext(_s),e=t[t.length-1];return e?e.params:{}}function Cf(t,{relative:e}={}){let{matches:n}=R.useContext(_s),{pathname:r}=na(),l=JSON.stringify(Dm(n));return R.useMemo(()=>Lm(t,JSON.parse(l),r,e==="path"),[t,l,r,e])}function CO(t,e){return _3(t,e)}function _3(t,e,n,r){var H;En(Oc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=R.useContext(Ys),{matches:u}=R.useContext(_s),g=u[u.length-1],y=g?g.params:{},b=g?g.pathname:"/",x=g?g.pathnameBase:"/",E=g&&g.route;{let q=E&&E.path||"";N3(b,!E||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let A=na(),N;if(e){let q=typeof e=="string"?Nc(e):e;En(x==="/"||((H=q.pathname)==null?void 0:H.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${q.pathname}" was given in the \`location\` prop.`),N=q}else N=A;let O=N.pathname||"/",M=O;if(x!=="/"){let q=x.replace(/^\//,"").split("/");M="/"+O.replace(/^\//,"").split("/").slice(q.length).join("/")}let j=b3(t,{pathname:M});qs(E||j!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),qs(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=RO(j&&j.map(q=>Object.assign({},q,{params:Object.assign({},y,q.params),pathname:Wr([x,l.encodeLocation?l.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?x:Wr([x,l.encodeLocation?l.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),u,n,r);return e&&U?R.createElement(Sf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},U):U}function AO(){let t=LO(),e=pO(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},g=null;return console.error("Error handled by React Router default ErrorBoundary:",t),g=R.createElement(R.Fragment,null,R.createElement("p",null,"💿 Hey developer 👋"),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:u},"ErrorBoundary")," or"," ",R.createElement("code",{style:u},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:l},n):null,g)}var TO=R.createElement(AO,null),_O=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?R.createElement(_s.Provider,{value:this.props.routeContext},R.createElement(km.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function NO({routeContext:t,match:e,children:n}){let r=R.useContext(Rc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(_s.Provider,{value:t},n)}function RO(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,u=n==null?void 0:n.errors;if(u!=null){let b=l.findIndex(x=>x.route.id&&(u==null?void 0:u[x.route.id])!==void 0);En(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,b+1))}let g=!1,y=-1;if(n)for(let b=0;b<l.length;b++){let x=l[b];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(y=b),x.route.id){let{loaderData:E,errors:A}=n,N=x.route.loader&&!E.hasOwnProperty(x.route.id)&&(!A||A[x.route.id]===void 0);if(x.route.lazy||N){g=!0,y>=0?l=l.slice(0,y+1):l=[l[0]];break}}}return l.reduceRight((b,x,E)=>{let A,N=!1,O=null,M=null;n&&(A=u&&x.route.id?u[x.route.id]:void 0,O=x.route.errorElement||TO,g&&(y<0&&E===0?(N3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,M=null):y===E&&(N=!0,M=x.route.hydrateFallbackElement||null)));let j=e.concat(l.slice(0,E+1)),U=()=>{let H;return A?H=O:N?H=M:x.route.Component?H=R.createElement(x.route.Component,null):x.route.element?H=x.route.element:H=b,R.createElement(NO,{match:x,routeContext:{outlet:b,matches:j,isDataRoute:n!=null},children:H})};return n&&(x.route.ErrorBoundary||x.route.errorElement||E===0)?R.createElement(_O,{location:n.location,revalidation:n.revalidation,component:O,error:A,children:U(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):U()},null)}function jm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OO(t){let e=R.useContext(Rc);return En(e,jm(t)),e}function IO(t){let e=R.useContext(jh);return En(e,jm(t)),e}function MO(t){let e=R.useContext(_s);return En(e,jm(t)),e}function Bm(t){let e=MO(t),n=e.matches[e.matches.length-1];return En(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function DO(){return Bm("useRouteId")}function LO(){var r;let t=R.useContext(km),e=IO("useRouteError"),n=Bm("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function kO(){let{router:t}=OO("useNavigate"),e=Bm("useNavigate"),n=R.useRef(!1);return A3(()=>{n.current=!0}),R.useCallback(async(l,u={})=>{qs(n.current,C3),n.current&&(typeof l=="number"?t.navigate(l):await t.navigate(l,{fromRouteId:e,...u}))},[t,e])}var hb={};function N3(t,e,n){!e&&!hb[t]&&(hb[t]=!0,qs(!1,n))}R.memo(jO);function jO({routes:t,future:e,state:n}){return _3(t,void 0,n,e)}function gb({to:t,replace:e,state:n,relative:r}){En(Oc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=R.useContext(Ys);qs(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=R.useContext(_s),{pathname:g}=na(),y=Ns(),b=Lm(t,Dm(u),g,r==="path"),x=JSON.stringify(b);return R.useEffect(()=>{y(JSON.parse(x),{replace:e,state:n,relative:r})},[y,x,r,e,n]),null}function BO(t){return SO(t.context)}function Gn(t){En(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function PO({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:l,static:u=!1}){En(!Oc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=t.replace(/^\/*/,"/"),y=R.useMemo(()=>({basename:g,navigator:l,static:u,future:{}}),[g,l,u]);typeof n=="string"&&(n=Nc(n));let{pathname:b="/",search:x="",hash:E="",state:A=null,key:N="default"}=n,O=R.useMemo(()=>{let M=Qr(b,g);return M==null?null:{location:{pathname:M,search:x,hash:E,state:A,key:N},navigationType:r}},[g,b,x,E,A,N,r]);return qs(O!=null,`<Router basename="${g}"> is not able to match the URL "${b}${x}${E}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:R.createElement(Ys.Provider,{value:y},R.createElement(Sf.Provider,{children:e,value:O}))}function UO({children:t,location:e}){return CO(jg(t),e)}function jg(t,e=[]){let n=[];return R.Children.forEach(t,(r,l)=>{if(!R.isValidElement(r))return;let u=[...e,l];if(r.type===R.Fragment){n.push.apply(n,jg(r.props.children,u));return}En(r.type===Gn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),En(!r.props.index||!r.props.children,"An index route cannot have child routes.");let g={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(g.children=jg(r.props.children,u)),n.push(g)}),n}var oh="get",lh="application/x-www-form-urlencoded";function Bh(t){return t!=null&&typeof t.tagName=="string"}function FO(t){return Bh(t)&&t.tagName.toLowerCase()==="button"}function VO(t){return Bh(t)&&t.tagName.toLowerCase()==="form"}function zO(t){return Bh(t)&&t.tagName.toLowerCase()==="input"}function HO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $O(t,e){return t.button===0&&(!e||e==="_self")&&!HO(t)}var qd=null;function GO(){if(qd===null)try{new FormData(document.createElement("form"),0),qd=!1}catch{qd=!0}return qd}var qO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ng(t){return t!=null&&!qO.has(t)?(qs(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${lh}"`),null):t}function YO(t,e){let n,r,l,u,g;if(VO(t)){let y=t.getAttribute("action");r=y?Qr(y,e):null,n=t.getAttribute("method")||oh,l=ng(t.getAttribute("enctype"))||lh,u=new FormData(t)}else if(FO(t)||zO(t)&&(t.type==="submit"||t.type==="image")){let y=t.form;if(y==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=t.getAttribute("formaction")||y.getAttribute("action");if(r=b?Qr(b,e):null,n=t.getAttribute("formmethod")||y.getAttribute("method")||oh,l=ng(t.getAttribute("formenctype"))||ng(y.getAttribute("enctype"))||lh,u=new FormData(y,t),!GO()){let{name:x,type:E,value:A}=t;if(E==="image"){let N=x?`${x}.`:"";u.append(`${N}x`,"0"),u.append(`${N}y`,"0")}else x&&u.append(x,A)}}else{if(Bh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=oh,r=null,l=lh,g=t}return u&&l==="text/plain"&&(g=u,u=void 0),{action:r,method:n.toLowerCase(),encType:l,formData:u,body:g}}function Pm(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function XO(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WO(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function KO(t,e,n){let r=await Promise.all(t.map(async l=>{let u=e.routes[l.route.id];if(u){let g=await XO(u,n);return g.links?g.links():[]}return[]}));return eI(r.flat(1).filter(WO).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function mb(t,e,n,r,l,u){let g=(b,x)=>n[x]?b.route.id!==n[x].route.id:!0,y=(b,x)=>{var E;return n[x].pathname!==b.pathname||((E=n[x].route.path)==null?void 0:E.endsWith("*"))&&n[x].params["*"]!==b.params["*"]};return u==="assets"?e.filter((b,x)=>g(b,x)||y(b,x)):u==="data"?e.filter((b,x)=>{var A;let E=r.routes[b.route.id];if(!E||!E.hasLoader)return!1;if(g(b,x)||y(b,x))return!0;if(b.route.shouldRevalidate){let N=b.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((A=n[0])==null?void 0:A.params)||{},nextUrl:new URL(t,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function ZO(t,e,{includeHydrateFallback:n}={}){return QO(t.map(r=>{let l=e.routes[r.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function QO(t){return[...new Set(t)]}function JO(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function eI(t,e){let n=new Set;return new Set(e),t.reduce((r,l)=>{let u=JSON.stringify(JO(l));return n.has(u)||(n.add(u),r.push({key:u,link:l})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var tI=new Set([100,101,204,205]);function nI(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Qr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function R3(){let t=R.useContext(Rc);return Pm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function iI(){let t=R.useContext(jh);return Pm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Um=R.createContext(void 0);Um.displayName="FrameworkContext";function O3(){let t=R.useContext(Um);return Pm(t,"You must render this element inside a <HydratedRouter> element"),t}function sI(t,e){let n=R.useContext(Um),[r,l]=R.useState(!1),[u,g]=R.useState(!1),{onFocus:y,onBlur:b,onMouseEnter:x,onMouseLeave:E,onTouchStart:A}=e,N=R.useRef(null);R.useEffect(()=>{if(t==="render"&&g(!0),t==="viewport"){let j=H=>{H.forEach(q=>{g(q.isIntersecting)})},U=new IntersectionObserver(j,{threshold:.5});return N.current&&U.observe(N.current),()=>{U.disconnect()}}},[t]),R.useEffect(()=>{if(r){let j=setTimeout(()=>{g(!0)},100);return()=>{clearTimeout(j)}}},[r]);let O=()=>{l(!0)},M=()=>{l(!1),g(!1)};return n?t!=="intent"?[u,N,{}]:[u,N,{onFocus:Lu(y,O),onBlur:Lu(b,M),onMouseEnter:Lu(x,O),onMouseLeave:Lu(E,M),onTouchStart:Lu(A,O)}]:[!1,N,{}]}function Lu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function rI({page:t,...e}){let{router:n}=R3(),r=R.useMemo(()=>b3(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?R.createElement(oI,{page:t,matches:r,...e}):null}function aI(t){let{manifest:e,routeModules:n}=O3(),[r,l]=R.useState([]);return R.useEffect(()=>{let u=!1;return KO(t,e,n).then(g=>{u||l(g)}),()=>{u=!0}},[t,e,n]),r}function oI({page:t,matches:e,...n}){let r=na(),{manifest:l,routeModules:u}=O3(),{basename:g}=R3(),{loaderData:y,matches:b}=iI(),x=R.useMemo(()=>mb(t,e,b,l,r,"data"),[t,e,b,l,r]),E=R.useMemo(()=>mb(t,e,b,l,r,"assets"),[t,e,b,l,r]),A=R.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let M=new Set,j=!1;if(e.forEach(H=>{var B;let q=l.routes[H.route.id];!q||!q.hasLoader||(!x.some(V=>V.route.id===H.route.id)&&H.route.id in y&&((B=u[H.route.id])!=null&&B.shouldRevalidate)||q.hasClientLoader?j=!0:M.add(H.route.id))}),M.size===0)return[];let U=nI(t,g);return j&&M.size>0&&U.searchParams.set("_routes",e.filter(H=>M.has(H.route.id)).map(H=>H.route.id).join(",")),[U.pathname+U.search]},[g,y,r,l,x,e,t,u]),N=R.useMemo(()=>ZO(E,l),[E,l]),O=aI(E);return R.createElement(R.Fragment,null,A.map(M=>R.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),N.map(M=>R.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),O.map(({key:M,link:j})=>R.createElement("link",{key:M,...j})))}function lI(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var I3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{I3&&(window.__reactRouterVersion="7.6.3")}catch{}function cI({basename:t,children:e,window:n}){let r=R.useRef();r.current==null&&(r.current=YR({window:n,v5Compat:!0}));let l=r.current,[u,g]=R.useState({action:l.action,location:l.location}),y=R.useCallback(b=>{R.startTransition(()=>g(b))},[g]);return R.useLayoutEffect(()=>l.listen(y),[l,y]),R.createElement(PO,{basename:t,children:e,location:u.location,navigationType:u.action,navigator:l})}var M3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yh=R.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:l,reloadDocument:u,replace:g,state:y,target:b,to:x,preventScrollReset:E,viewTransition:A,...N},O){let{basename:M}=R.useContext(Ys),j=typeof x=="string"&&M3.test(x),U,H=!1;if(typeof x=="string"&&j&&(U=x,I3))try{let Q=new URL(window.location.href),we=x.startsWith("//")?new URL(Q.protocol+x):new URL(x),je=Qr(we.pathname,M);we.origin===Q.origin&&je!=null?x=je+we.search+we.hash:H=!0}catch{qs(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=wO(x,{relative:l}),[B,V,G]=sI(r,N),ne=hI(x,{replace:g,state:y,target:b,preventScrollReset:E,relative:l,viewTransition:A});function K(Q){e&&e(Q),Q.defaultPrevented||ne(Q)}let ae=R.createElement("a",{...N,...G,href:U||q,onClick:H||u?e:K,ref:lI(O,V),target:b,"data-discover":!j&&n==="render"?"true":void 0});return B&&!j?R.createElement(R.Fragment,null,ae,R.createElement(rI,{page:q})):ae});yh.displayName="Link";var uI=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:l=!1,style:u,to:g,viewTransition:y,children:b,...x},E){let A=Cf(g,{relative:x.relative}),N=na(),O=R.useContext(jh),{navigator:M,basename:j}=R.useContext(Ys),U=O!=null&&yI(A)&&y===!0,H=M.encodeLocation?M.encodeLocation(A).pathname:A.pathname,q=N.pathname,B=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(q=q.toLowerCase(),B=B?B.toLowerCase():null,H=H.toLowerCase()),B&&j&&(B=Qr(B,j)||B);const V=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let G=q===H||!l&&q.startsWith(H)&&q.charAt(V)==="/",ne=B!=null&&(B===H||!l&&B.startsWith(H)&&B.charAt(H.length)==="/"),K={isActive:G,isPending:ne,isTransitioning:U},ae=G?e:void 0,Q;typeof r=="function"?Q=r(K):Q=[r,G?"active":null,ne?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let we=typeof u=="function"?u(K):u;return R.createElement(yh,{...x,"aria-current":ae,className:Q,ref:E,style:we,to:g,viewTransition:y},typeof b=="function"?b(K):b)});uI.displayName="NavLink";var fI=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:l,state:u,method:g=oh,action:y,onSubmit:b,relative:x,preventScrollReset:E,viewTransition:A,...N},O)=>{let M=pI(),j=xI(y,{relative:x}),U=g.toLowerCase()==="get"?"get":"post",H=typeof y=="string"&&M3.test(y),q=B=>{if(b&&b(B),B.defaultPrevented)return;B.preventDefault();let V=B.nativeEvent.submitter,G=(V==null?void 0:V.getAttribute("formmethod"))||g;M(V||B.currentTarget,{fetcherKey:e,method:G,navigate:n,replace:l,state:u,relative:x,preventScrollReset:E,viewTransition:A})};return R.createElement("form",{ref:O,method:U,action:j,onSubmit:r?b:q,...N,"data-discover":!H&&t==="render"?"true":void 0})});fI.displayName="Form";function dI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D3(t){let e=R.useContext(Rc);return En(e,dI(t)),e}function hI(t,{target:e,replace:n,state:r,preventScrollReset:l,relative:u,viewTransition:g}={}){let y=Ns(),b=na(),x=Cf(t,{relative:u});return R.useCallback(E=>{if($O(E,e)){E.preventDefault();let A=n!==void 0?n:cf(b)===cf(x);y(t,{replace:A,state:r,preventScrollReset:l,relative:u,viewTransition:g})}},[b,y,x,n,r,e,t,l,u,g])}var gI=0,mI=()=>`__${String(++gI)}__`;function pI(){let{router:t}=D3("useSubmit"),{basename:e}=R.useContext(Ys),n=DO();return R.useCallback(async(r,l={})=>{let{action:u,method:g,encType:y,formData:b,body:x}=YO(r,e);if(l.navigate===!1){let E=l.fetcherKey||mI();await t.fetch(E,n,l.action||u,{preventScrollReset:l.preventScrollReset,formData:b,body:x,formMethod:l.method||g,formEncType:l.encType||y,flushSync:l.flushSync})}else await t.navigate(l.action||u,{preventScrollReset:l.preventScrollReset,formData:b,body:x,formMethod:l.method||g,formEncType:l.encType||y,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[t,e,n])}function xI(t,{relative:e}={}){let{basename:n}=R.useContext(Ys),r=R.useContext(_s);En(r,"useFormAction must be used inside a RouteContext");let[l]=r.matches.slice(-1),u={...Cf(t||".",{relative:e})},g=na();if(t==null){u.search=g.search;let y=new URLSearchParams(u.search),b=y.getAll("index");if(b.some(E=>E==="")){y.delete("index"),b.filter(A=>A).forEach(A=>y.append("index",A));let E=y.toString();u.search=E?`?${E}`:""}}return(!t||t===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Wr([n,u.pathname])),cf(u)}function yI(t,e={}){let n=R.useContext(S3);En(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=D3("useViewTransitionState"),l=Cf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let u=Qr(n.currentLocation.pathname,r)||n.currentLocation.pathname,g=Qr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return xh(l.pathname,g)!=null||xh(l.pathname,u)!=null}[...tI];var bI=y3(),Ic=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},rl=typeof window>"u"||"Deno"in globalThis;function ji(){}function wI(t,e){return typeof t=="function"?t(e):t}function Bg(t){return typeof t=="number"&&t>=0&&t!==1/0}function L3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function no(t,e){return typeof t=="function"?t(e):t}function $s(t,e){return typeof t=="function"?t(e):t}function pb(t,e){const{type:n="all",exact:r,fetchStatus:l,predicate:u,queryKey:g,stale:y}=t;if(g){if(r){if(e.queryHash!==Fm(g,e.options))return!1}else if(!uf(e.queryKey,g))return!1}if(n!=="all"){const b=e.isActive();if(n==="active"&&!b||n==="inactive"&&b)return!1}return!(typeof y=="boolean"&&e.isStale()!==y||l&&l!==e.state.fetchStatus||u&&!u(e))}function xb(t,e){const{exact:n,status:r,predicate:l,mutationKey:u}=t;if(u){if(!e.options.mutationKey)return!1;if(n){if(al(e.options.mutationKey)!==al(u))return!1}else if(!uf(e.options.mutationKey,u))return!1}return!(r&&e.state.status!==r||l&&!l(e))}function Fm(t,e){return((e==null?void 0:e.queryKeyHashFn)||al)(t)}function al(t){return JSON.stringify(t,(e,n)=>Pg(n)?Object.keys(n).sort().reduce((r,l)=>(r[l]=n[l],r),{}):n)}function uf(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>uf(t[n],e[n])):!1}function k3(t,e){if(t===e)return t;const n=yb(t)&&yb(e);if(n||Pg(t)&&Pg(e)){const r=n?t:Object.keys(t),l=r.length,u=n?e:Object.keys(e),g=u.length,y=n?[]:{},b=new Set(r);let x=0;for(let E=0;E<g;E++){const A=n?E:u[E];(!n&&b.has(A)||n)&&t[A]===void 0&&e[A]===void 0?(y[A]=void 0,x++):(y[A]=k3(t[A],e[A]),y[A]===t[A]&&t[A]!==void 0&&x++)}return l===g&&x===l?t:y}return e}function bh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function yb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Pg(t){if(!bb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!bb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function bb(t){return Object.prototype.toString.call(t)==="[object Object]"}function vI(t){return new Promise(e=>{setTimeout(e,t)})}function Ug(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?k3(t,e):e}function EI(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function SI(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Vm=Symbol();function j3(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Vm?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function B3(t,e){return typeof t=="function"?t(...e):!!t}var qo,$a,hc,n3,CI=(n3=class extends Ic{constructor(){super();st(this,qo);st(this,$a);st(this,hc);He(this,hc,e=>{if(!rl&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){J(this,$a)||this.setEventListener(J(this,hc))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,$a))==null||e.call(this),He(this,$a,void 0))}setEventListener(e){var n;He(this,hc,e),(n=J(this,$a))==null||n.call(this),He(this,$a,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){J(this,qo)!==e&&(He(this,qo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof J(this,qo)=="boolean"?J(this,qo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},qo=new WeakMap,$a=new WeakMap,hc=new WeakMap,n3),zm=new CI,gc,Ga,mc,i3,AI=(i3=class extends Ic{constructor(){super();st(this,gc,!0);st(this,Ga);st(this,mc);He(this,mc,e=>{if(!rl&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){J(this,Ga)||this.setEventListener(J(this,mc))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,Ga))==null||e.call(this),He(this,Ga,void 0))}setEventListener(e){var n;He(this,mc,e),(n=J(this,Ga))==null||n.call(this),He(this,Ga,e(this.setOnline.bind(this)))}setOnline(e){J(this,gc)!==e&&(He(this,gc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return J(this,gc)}},gc=new WeakMap,Ga=new WeakMap,mc=new WeakMap,i3),wh=new AI;function Fg(){let t,e;const n=new Promise((l,u)=>{t=l,e=u});n.status="pending",n.catch(()=>{});function r(l){Object.assign(n,l),delete n.resolve,delete n.reject}return n.resolve=l=>{r({status:"fulfilled",value:l}),t(l)},n.reject=l=>{r({status:"rejected",reason:l}),e(l)},n}function TI(t){return Math.min(1e3*2**t,3e4)}function P3(t){return(t??"online")==="online"?wh.isOnline():!0}var U3=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ig(t){return t instanceof U3}function F3(t){let e=!1,n=0,r=!1,l;const u=Fg(),g=j=>{var U;r||(N(new U3(j)),(U=t.abort)==null||U.call(t))},y=()=>{e=!0},b=()=>{e=!1},x=()=>zm.isFocused()&&(t.networkMode==="always"||wh.isOnline())&&t.canRun(),E=()=>P3(t.networkMode)&&t.canRun(),A=j=>{var U;r||(r=!0,(U=t.onSuccess)==null||U.call(t,j),l==null||l(),u.resolve(j))},N=j=>{var U;r||(r=!0,(U=t.onError)==null||U.call(t,j),l==null||l(),u.reject(j))},O=()=>new Promise(j=>{var U;l=H=>{(r||x())&&j(H)},(U=t.onPause)==null||U.call(t)}).then(()=>{var j;l=void 0,r||(j=t.onContinue)==null||j.call(t)}),M=()=>{if(r)return;let j;const U=n===0?t.initialPromise:void 0;try{j=U??t.fn()}catch(H){j=Promise.reject(H)}Promise.resolve(j).then(A).catch(H=>{var ne;if(r)return;const q=t.retry??(rl?0:3),B=t.retryDelay??TI,V=typeof B=="function"?B(n,H):B,G=q===!0||typeof q=="number"&&n<q||typeof q=="function"&&q(n,H);if(e||!G){N(H);return}n++,(ne=t.onFail)==null||ne.call(t,n,H),vI(V).then(()=>x()?void 0:O()).then(()=>{e?N(H):M()})})};return{promise:u,cancel:g,continue:()=>(l==null||l(),u),cancelRetry:y,continueRetry:b,canStart:E,start:()=>(E()?M():O().then(M),u)}}var _I=t=>setTimeout(t,0);function NI(){let t=[],e=0,n=y=>{y()},r=y=>{y()},l=_I;const u=y=>{e?t.push(y):l(()=>{n(y)})},g=()=>{const y=t;t=[],y.length&&l(()=>{r(()=>{y.forEach(b=>{n(b)})})})};return{batch:y=>{let b;e++;try{b=y()}finally{e--,e||g()}return b},batchCalls:y=>(...b)=>{u(()=>{y(...b)})},schedule:u,setNotifyFunction:y=>{n=y},setBatchNotifyFunction:y=>{r=y},setScheduler:y=>{l=y}}}var ii=NI(),Yo,s3,V3=(s3=class{constructor(){st(this,Yo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Bg(this.gcTime)&&He(this,Yo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(rl?1/0:5*60*1e3))}clearGcTimeout(){J(this,Yo)&&(clearTimeout(J(this,Yo)),He(this,Yo,void 0))}},Yo=new WeakMap,s3),pc,Xo,As,Wo,Ni,bf,Ko,Fs,zr,r3,RI=(r3=class extends V3{constructor(e){super();st(this,Fs);st(this,pc);st(this,Xo);st(this,As);st(this,Wo);st(this,Ni);st(this,bf);st(this,Ko);He(this,Ko,!1),He(this,bf,e.defaultOptions),this.setOptions(e.options),this.observers=[],He(this,Wo,e.client),He(this,As,J(this,Wo).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,He(this,pc,OI(this.options)),this.state=e.state??J(this,pc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=J(this,Ni))==null?void 0:e.promise}setOptions(e){this.options={...J(this,bf),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&J(this,As).remove(this)}setData(e,n){const r=Ug(this.state.data,e,this.options);return Nt(this,Fs,zr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Nt(this,Fs,zr).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,l;const n=(r=J(this,Ni))==null?void 0:r.promise;return(l=J(this,Ni))==null||l.cancel(e),n?n.then(ji).catch(ji):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,pc))}isActive(){return this.observers.some(e=>$s(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Vm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>no(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!L3(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=J(this,Ni))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=J(this,Ni))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),J(this,As).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(J(this,Ni)&&(J(this,Ko)?J(this,Ni).cancel({revert:!0}):J(this,Ni).cancelRetry()),this.scheduleGc()),J(this,As).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Nt(this,Fs,zr).call(this,{type:"invalidate"})}fetch(e,n){var x,E,A;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(J(this,Ni))return J(this,Ni).continueRetry(),J(this,Ni).promise}if(e&&this.setOptions(e),!this.options.queryFn){const N=this.observers.find(O=>O.options.queryFn);N&&this.setOptions(N.options)}const r=new AbortController,l=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(He(this,Ko,!0),r.signal)})},u=()=>{const N=j3(this.options,n),M=(()=>{const j={client:J(this,Wo),queryKey:this.queryKey,meta:this.meta};return l(j),j})();return He(this,Ko,!1),this.options.persister?this.options.persister(N,M,this):N(M)},y=(()=>{const N={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:J(this,Wo),state:this.state,fetchFn:u};return l(N),N})();(x=this.options.behavior)==null||x.onFetch(y,this),He(this,Xo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((E=y.fetchOptions)==null?void 0:E.meta))&&Nt(this,Fs,zr).call(this,{type:"fetch",meta:(A=y.fetchOptions)==null?void 0:A.meta});const b=N=>{var O,M,j,U;ig(N)&&N.silent||Nt(this,Fs,zr).call(this,{type:"error",error:N}),ig(N)||((M=(O=J(this,As).config).onError)==null||M.call(O,N,this),(U=(j=J(this,As).config).onSettled)==null||U.call(j,this.state.data,N,this)),this.scheduleGc()};return He(this,Ni,F3({initialPromise:n==null?void 0:n.initialPromise,fn:y.fetchFn,abort:r.abort.bind(r),onSuccess:N=>{var O,M,j,U;if(N===void 0){b(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(N)}catch(H){b(H);return}(M=(O=J(this,As).config).onSuccess)==null||M.call(O,N,this),(U=(j=J(this,As).config).onSettled)==null||U.call(j,N,this.state.error,this),this.scheduleGc()},onError:b,onFail:(N,O)=>{Nt(this,Fs,zr).call(this,{type:"failed",failureCount:N,error:O})},onPause:()=>{Nt(this,Fs,zr).call(this,{type:"pause"})},onContinue:()=>{Nt(this,Fs,zr).call(this,{type:"continue"})},retry:y.options.retry,retryDelay:y.options.retryDelay,networkMode:y.options.networkMode,canRun:()=>!0})),J(this,Ni).start()}},pc=new WeakMap,Xo=new WeakMap,As=new WeakMap,Wo=new WeakMap,Ni=new WeakMap,bf=new WeakMap,Ko=new WeakMap,Fs=new WeakSet,zr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...z3(r.data,this.options),fetchMeta:e.meta??null};case"success":return He(this,Xo,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const l=e.error;return ig(l)&&l.revert&&J(this,Xo)?{...J(this,Xo),fetchStatus:"idle"}:{...r,error:l,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),ii.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),J(this,As).notify({query:this,type:"updated",action:e})})},r3);function z3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:P3(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function OI(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var gr,a3,II=(a3=class extends Ic{constructor(e={}){super();st(this,gr);this.config=e,He(this,gr,new Map)}build(e,n,r){const l=n.queryKey,u=n.queryHash??Fm(l,n);let g=this.get(u);return g||(g=new RI({client:e,queryKey:l,queryHash:u,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(l)}),this.add(g)),g}add(e){J(this,gr).has(e.queryHash)||(J(this,gr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=J(this,gr).get(e.queryHash);n&&(e.destroy(),n===e&&J(this,gr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ii.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return J(this,gr).get(e)}getAll(){return[...J(this,gr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>pb(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>pb(e,r)):n}notify(e){ii.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ii.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ii.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},gr=new WeakMap,a3),mr,Li,Zo,pr,Pa,o3,MI=(o3=class extends V3{constructor(e){super();st(this,pr);st(this,mr);st(this,Li);st(this,Zo);this.mutationId=e.mutationId,He(this,Li,e.mutationCache),He(this,mr,[]),this.state=e.state||H3(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){J(this,mr).includes(e)||(J(this,mr).push(e),this.clearGcTimeout(),J(this,Li).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){He(this,mr,J(this,mr).filter(n=>n!==e)),this.scheduleGc(),J(this,Li).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){J(this,mr).length||(this.state.status==="pending"?this.scheduleGc():J(this,Li).remove(this))}continue(){var e;return((e=J(this,Zo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var u,g,y,b,x,E,A,N,O,M,j,U,H,q,B,V,G,ne,K,ae;const n=()=>{Nt(this,pr,Pa).call(this,{type:"continue"})};He(this,Zo,F3({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(Q,we)=>{Nt(this,pr,Pa).call(this,{type:"failed",failureCount:Q,error:we})},onPause:()=>{Nt(this,pr,Pa).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,Li).canRun(this)}));const r=this.state.status==="pending",l=!J(this,Zo).canStart();try{if(r)n();else{Nt(this,pr,Pa).call(this,{type:"pending",variables:e,isPaused:l}),await((g=(u=J(this,Li).config).onMutate)==null?void 0:g.call(u,e,this));const we=await((b=(y=this.options).onMutate)==null?void 0:b.call(y,e));we!==this.state.context&&Nt(this,pr,Pa).call(this,{type:"pending",context:we,variables:e,isPaused:l})}const Q=await J(this,Zo).start();return await((E=(x=J(this,Li).config).onSuccess)==null?void 0:E.call(x,Q,e,this.state.context,this)),await((N=(A=this.options).onSuccess)==null?void 0:N.call(A,Q,e,this.state.context)),await((M=(O=J(this,Li).config).onSettled)==null?void 0:M.call(O,Q,null,this.state.variables,this.state.context,this)),await((U=(j=this.options).onSettled)==null?void 0:U.call(j,Q,null,e,this.state.context)),Nt(this,pr,Pa).call(this,{type:"success",data:Q}),Q}catch(Q){try{throw await((q=(H=J(this,Li).config).onError)==null?void 0:q.call(H,Q,e,this.state.context,this)),await((V=(B=this.options).onError)==null?void 0:V.call(B,Q,e,this.state.context)),await((ne=(G=J(this,Li).config).onSettled)==null?void 0:ne.call(G,void 0,Q,this.state.variables,this.state.context,this)),await((ae=(K=this.options).onSettled)==null?void 0:ae.call(K,void 0,Q,e,this.state.context)),Q}finally{Nt(this,pr,Pa).call(this,{type:"error",error:Q})}}finally{J(this,Li).runNext(this)}}},mr=new WeakMap,Li=new WeakMap,Zo=new WeakMap,pr=new WeakSet,Pa=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ii.batch(()=>{J(this,mr).forEach(r=>{r.onMutationUpdate(e)}),J(this,Li).notify({mutation:this,type:"updated",action:e})})},o3);function H3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Gr,Vs,wf,l3,DI=(l3=class extends Ic{constructor(e={}){super();st(this,Gr);st(this,Vs);st(this,wf);this.config=e,He(this,Gr,new Set),He(this,Vs,new Map),He(this,wf,0)}build(e,n,r){const l=new MI({mutationCache:this,mutationId:++Hd(this,wf)._,options:e.defaultMutationOptions(n),state:r});return this.add(l),l}add(e){J(this,Gr).add(e);const n=Yd(e);if(typeof n=="string"){const r=J(this,Vs).get(n);r?r.push(e):J(this,Vs).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(J(this,Gr).delete(e)){const n=Yd(e);if(typeof n=="string"){const r=J(this,Vs).get(n);if(r)if(r.length>1){const l=r.indexOf(e);l!==-1&&r.splice(l,1)}else r[0]===e&&J(this,Vs).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Yd(e);if(typeof n=="string"){const r=J(this,Vs).get(n),l=r==null?void 0:r.find(u=>u.state.status==="pending");return!l||l===e}else return!0}runNext(e){var r;const n=Yd(e);if(typeof n=="string"){const l=(r=J(this,Vs).get(n))==null?void 0:r.find(u=>u!==e&&u.state.isPaused);return(l==null?void 0:l.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ii.batch(()=>{J(this,Gr).forEach(e=>{this.notify({type:"removed",mutation:e})}),J(this,Gr).clear(),J(this,Vs).clear()})}getAll(){return Array.from(J(this,Gr))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>xb(n,r))}findAll(e={}){return this.getAll().filter(n=>xb(e,n))}notify(e){ii.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ii.batch(()=>Promise.all(e.map(n=>n.continue().catch(ji))))}},Gr=new WeakMap,Vs=new WeakMap,wf=new WeakMap,l3);function Yd(t){var e;return(e=t.options.scope)==null?void 0:e.id}function wb(t){return{onFetch:(e,n)=>{var E,A,N,O,M;const r=e.options,l=(N=(A=(E=e.fetchOptions)==null?void 0:E.meta)==null?void 0:A.fetchMore)==null?void 0:N.direction,u=((O=e.state.data)==null?void 0:O.pages)||[],g=((M=e.state.data)==null?void 0:M.pageParams)||[];let y={pages:[],pageParams:[]},b=0;const x=async()=>{let j=!1;const U=B=>{Object.defineProperty(B,"signal",{enumerable:!0,get:()=>(e.signal.aborted?j=!0:e.signal.addEventListener("abort",()=>{j=!0}),e.signal)})},H=j3(e.options,e.fetchOptions),q=async(B,V,G)=>{if(j)return Promise.reject();if(V==null&&B.pages.length)return Promise.resolve(B);const K=(()=>{const je={client:e.client,queryKey:e.queryKey,pageParam:V,direction:G?"backward":"forward",meta:e.options.meta};return U(je),je})(),ae=await H(K),{maxPages:Q}=e.options,we=G?SI:EI;return{pages:we(B.pages,ae,Q),pageParams:we(B.pageParams,V,Q)}};if(l&&u.length){const B=l==="backward",V=B?LI:vb,G={pages:u,pageParams:g},ne=V(r,G);y=await q(G,ne,B)}else{const B=t??u.length;do{const V=b===0?g[0]??r.initialPageParam:vb(r,y);if(b>0&&V==null)break;y=await q(y,V),b++}while(b<B)}return y};e.options.persister?e.fetchFn=()=>{var j,U;return(U=(j=e.options).persister)==null?void 0:U.call(j,x,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=x}}}function vb(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function LI(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var In,qa,Ya,xc,yc,Xa,bc,wc,c3,kI=(c3=class{constructor(t={}){st(this,In);st(this,qa);st(this,Ya);st(this,xc);st(this,yc);st(this,Xa);st(this,bc);st(this,wc);He(this,In,t.queryCache||new II),He(this,qa,t.mutationCache||new DI),He(this,Ya,t.defaultOptions||{}),He(this,xc,new Map),He(this,yc,new Map),He(this,Xa,0)}mount(){Hd(this,Xa)._++,J(this,Xa)===1&&(He(this,bc,zm.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,In).onFocus())})),He(this,wc,wh.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,In).onOnline())})))}unmount(){var t,e;Hd(this,Xa)._--,J(this,Xa)===0&&((t=J(this,bc))==null||t.call(this),He(this,bc,void 0),(e=J(this,wc))==null||e.call(this),He(this,wc,void 0))}isFetching(t){return J(this,In).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return J(this,qa).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,In).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=J(this,In).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(no(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return J(this,In).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),l=J(this,In).get(r.queryHash),u=l==null?void 0:l.state.data,g=wI(e,u);if(g!==void 0)return J(this,In).build(this,r).setData(g,{...n,manual:!0})}setQueriesData(t,e,n){return ii.batch(()=>J(this,In).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,In).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=J(this,In);ii.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=J(this,In);return ii.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=ii.batch(()=>J(this,In).findAll(t).map(l=>l.cancel(n)));return Promise.all(r).then(ji).catch(ji)}invalidateQueries(t,e={}){return ii.batch(()=>(J(this,In).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=ii.batch(()=>J(this,In).findAll(t).filter(l=>!l.isDisabled()&&!l.isStatic()).map(l=>{let u=l.fetch(void 0,n);return n.throwOnError||(u=u.catch(ji)),l.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(r).then(ji)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=J(this,In).build(this,e);return n.isStaleByTime(no(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ji).catch(ji)}fetchInfiniteQuery(t){return t.behavior=wb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ji).catch(ji)}ensureInfiniteQueryData(t){return t.behavior=wb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return wh.isOnline()?J(this,qa).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,In)}getMutationCache(){return J(this,qa)}getDefaultOptions(){return J(this,Ya)}setDefaultOptions(t){He(this,Ya,t)}setQueryDefaults(t,e){J(this,xc).set(al(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...J(this,xc).values()],n={};return e.forEach(r=>{uf(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){J(this,yc).set(al(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...J(this,yc).values()],n={};return e.forEach(r=>{uf(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...J(this,Ya).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Fm(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Vm&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...J(this,Ya).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){J(this,In).clear(),J(this,qa).clear()}},In=new WeakMap,qa=new WeakMap,Ya=new WeakMap,xc=new WeakMap,yc=new WeakMap,Xa=new WeakMap,bc=new WeakMap,wc=new WeakMap,c3),Yi,zt,vf,ki,Qo,vc,Wa,Ka,Ef,Ec,Sc,Jo,el,Za,Cc,Qt,Uu,Vg,zg,Hg,$g,Gg,qg,Yg,$3,u3,jI=(u3=class extends Ic{constructor(e,n){super();st(this,Qt);st(this,Yi);st(this,zt);st(this,vf);st(this,ki);st(this,Qo);st(this,vc);st(this,Wa);st(this,Ka);st(this,Ef);st(this,Ec);st(this,Sc);st(this,Jo);st(this,el);st(this,Za);st(this,Cc,new Set);this.options=n,He(this,Yi,e),He(this,Ka,null),He(this,Wa,Fg()),this.options.experimental_prefetchInRender||J(this,Wa).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(J(this,zt).addObserver(this),Eb(J(this,zt),this.options)?Nt(this,Qt,Uu).call(this):this.updateResult(),Nt(this,Qt,$g).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Xg(J(this,zt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Xg(J(this,zt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Nt(this,Qt,Gg).call(this),Nt(this,Qt,qg).call(this),J(this,zt).removeObserver(this)}setOptions(e){const n=this.options,r=J(this,zt);if(this.options=J(this,Yi).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof $s(this.options.enabled,J(this,zt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Nt(this,Qt,Yg).call(this),J(this,zt).setOptions(this.options),n._defaulted&&!bh(this.options,n)&&J(this,Yi).getQueryCache().notify({type:"observerOptionsUpdated",query:J(this,zt),observer:this});const l=this.hasListeners();l&&Sb(J(this,zt),r,this.options,n)&&Nt(this,Qt,Uu).call(this),this.updateResult(),l&&(J(this,zt)!==r||$s(this.options.enabled,J(this,zt))!==$s(n.enabled,J(this,zt))||no(this.options.staleTime,J(this,zt))!==no(n.staleTime,J(this,zt)))&&Nt(this,Qt,Vg).call(this);const u=Nt(this,Qt,zg).call(this);l&&(J(this,zt)!==r||$s(this.options.enabled,J(this,zt))!==$s(n.enabled,J(this,zt))||u!==J(this,Za))&&Nt(this,Qt,Hg).call(this,u)}getOptimisticResult(e){const n=J(this,Yi).getQueryCache().build(J(this,Yi),e),r=this.createResult(n,e);return PI(this,r)&&(He(this,ki,r),He(this,vc,this.options),He(this,Qo,J(this,zt).state)),r}getCurrentResult(){return J(this,ki)}trackResult(e,n){return new Proxy(e,{get:(r,l)=>(this.trackProp(l),n==null||n(l),Reflect.get(r,l))})}trackProp(e){J(this,Cc).add(e)}getCurrentQuery(){return J(this,zt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=J(this,Yi).defaultQueryOptions(e),r=J(this,Yi).getQueryCache().build(J(this,Yi),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Nt(this,Qt,Uu).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),J(this,ki)))}createResult(e,n){var Q;const r=J(this,zt),l=this.options,u=J(this,ki),g=J(this,Qo),y=J(this,vc),x=e!==r?e.state:J(this,vf),{state:E}=e;let A={...E},N=!1,O;if(n._optimisticResults){const we=this.hasListeners(),je=!we&&Eb(e,n),_e=we&&Sb(e,r,n,l);(je||_e)&&(A={...A,...z3(E.data,e.options)}),n._optimisticResults==="isRestoring"&&(A.fetchStatus="idle")}let{error:M,errorUpdatedAt:j,status:U}=A;O=A.data;let H=!1;if(n.placeholderData!==void 0&&O===void 0&&U==="pending"){let we;u!=null&&u.isPlaceholderData&&n.placeholderData===(y==null?void 0:y.placeholderData)?(we=u.data,H=!0):we=typeof n.placeholderData=="function"?n.placeholderData((Q=J(this,Sc))==null?void 0:Q.state.data,J(this,Sc)):n.placeholderData,we!==void 0&&(U="success",O=Ug(u==null?void 0:u.data,we,n),N=!0)}if(n.select&&O!==void 0&&!H)if(u&&O===(g==null?void 0:g.data)&&n.select===J(this,Ef))O=J(this,Ec);else try{He(this,Ef,n.select),O=n.select(O),O=Ug(u==null?void 0:u.data,O,n),He(this,Ec,O),He(this,Ka,null)}catch(we){He(this,Ka,we)}J(this,Ka)&&(M=J(this,Ka),O=J(this,Ec),j=Date.now(),U="error");const q=A.fetchStatus==="fetching",B=U==="pending",V=U==="error",G=B&&q,ne=O!==void 0,ae={status:U,fetchStatus:A.fetchStatus,isPending:B,isSuccess:U==="success",isError:V,isInitialLoading:G,isLoading:G,data:O,dataUpdatedAt:A.dataUpdatedAt,error:M,errorUpdatedAt:j,failureCount:A.fetchFailureCount,failureReason:A.fetchFailureReason,errorUpdateCount:A.errorUpdateCount,isFetched:A.dataUpdateCount>0||A.errorUpdateCount>0,isFetchedAfterMount:A.dataUpdateCount>x.dataUpdateCount||A.errorUpdateCount>x.errorUpdateCount,isFetching:q,isRefetching:q&&!B,isLoadingError:V&&!ne,isPaused:A.fetchStatus==="paused",isPlaceholderData:N,isRefetchError:V&&ne,isStale:Hm(e,n),refetch:this.refetch,promise:J(this,Wa)};if(this.options.experimental_prefetchInRender){const we=he=>{ae.status==="error"?he.reject(ae.error):ae.data!==void 0&&he.resolve(ae.data)},je=()=>{const he=He(this,Wa,ae.promise=Fg());we(he)},_e=J(this,Wa);switch(_e.status){case"pending":e.queryHash===r.queryHash&&we(_e);break;case"fulfilled":(ae.status==="error"||ae.data!==_e.value)&&je();break;case"rejected":(ae.status!=="error"||ae.error!==_e.reason)&&je();break}}return ae}updateResult(){const e=J(this,ki),n=this.createResult(J(this,zt),this.options);if(He(this,Qo,J(this,zt).state),He(this,vc,this.options),J(this,Qo).data!==void 0&&He(this,Sc,J(this,zt)),bh(n,e))return;He(this,ki,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:l}=this.options,u=typeof l=="function"?l():l;if(u==="all"||!u&&!J(this,Cc).size)return!0;const g=new Set(u??J(this,Cc));return this.options.throwOnError&&g.add("error"),Object.keys(J(this,ki)).some(y=>{const b=y;return J(this,ki)[b]!==e[b]&&g.has(b)})};Nt(this,Qt,$3).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Nt(this,Qt,$g).call(this)}},Yi=new WeakMap,zt=new WeakMap,vf=new WeakMap,ki=new WeakMap,Qo=new WeakMap,vc=new WeakMap,Wa=new WeakMap,Ka=new WeakMap,Ef=new WeakMap,Ec=new WeakMap,Sc=new WeakMap,Jo=new WeakMap,el=new WeakMap,Za=new WeakMap,Cc=new WeakMap,Qt=new WeakSet,Uu=function(e){Nt(this,Qt,Yg).call(this);let n=J(this,zt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(ji)),n},Vg=function(){Nt(this,Qt,Gg).call(this);const e=no(this.options.staleTime,J(this,zt));if(rl||J(this,ki).isStale||!Bg(e))return;const r=L3(J(this,ki).dataUpdatedAt,e)+1;He(this,Jo,setTimeout(()=>{J(this,ki).isStale||this.updateResult()},r))},zg=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(J(this,zt)):this.options.refetchInterval)??!1},Hg=function(e){Nt(this,Qt,qg).call(this),He(this,Za,e),!(rl||$s(this.options.enabled,J(this,zt))===!1||!Bg(J(this,Za))||J(this,Za)===0)&&He(this,el,setInterval(()=>{(this.options.refetchIntervalInBackground||zm.isFocused())&&Nt(this,Qt,Uu).call(this)},J(this,Za)))},$g=function(){Nt(this,Qt,Vg).call(this),Nt(this,Qt,Hg).call(this,Nt(this,Qt,zg).call(this))},Gg=function(){J(this,Jo)&&(clearTimeout(J(this,Jo)),He(this,Jo,void 0))},qg=function(){J(this,el)&&(clearInterval(J(this,el)),He(this,el,void 0))},Yg=function(){const e=J(this,Yi).getQueryCache().build(J(this,Yi),this.options);if(e===J(this,zt))return;const n=J(this,zt);He(this,zt,e),He(this,vf,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},$3=function(e){ii.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(J(this,ki))}),J(this,Yi).getQueryCache().notify({query:J(this,zt),type:"observerResultsUpdated"})})},u3);function BI(t,e){return $s(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Eb(t,e){return BI(t,e)||t.state.data!==void 0&&Xg(t,e,e.refetchOnMount)}function Xg(t,e,n){if($s(e.enabled,t)!==!1&&no(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Hm(t,e)}return!1}function Sb(t,e,n,r){return(t!==e||$s(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Hm(t,n)}function Hm(t,e){return $s(e.enabled,t)!==!1&&t.isStaleByTime(no(e.staleTime,t))}function PI(t,e){return!bh(t.getCurrentResult(),e)}var Qa,Ja,Xi,qr,Zr,ch,Wg,f3,UI=(f3=class extends Ic{constructor(n,r){super();st(this,Zr);st(this,Qa);st(this,Ja);st(this,Xi);st(this,qr);He(this,Qa,n),this.setOptions(r),this.bindMethods(),Nt(this,Zr,ch).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var l;const r=this.options;this.options=J(this,Qa).defaultMutationOptions(n),bh(this.options,r)||J(this,Qa).getMutationCache().notify({type:"observerOptionsUpdated",mutation:J(this,Xi),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&al(r.mutationKey)!==al(this.options.mutationKey)?this.reset():((l=J(this,Xi))==null?void 0:l.state.status)==="pending"&&J(this,Xi).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=J(this,Xi))==null||n.removeObserver(this)}onMutationUpdate(n){Nt(this,Zr,ch).call(this),Nt(this,Zr,Wg).call(this,n)}getCurrentResult(){return J(this,Ja)}reset(){var n;(n=J(this,Xi))==null||n.removeObserver(this),He(this,Xi,void 0),Nt(this,Zr,ch).call(this),Nt(this,Zr,Wg).call(this)}mutate(n,r){var l;return He(this,qr,r),(l=J(this,Xi))==null||l.removeObserver(this),He(this,Xi,J(this,Qa).getMutationCache().build(J(this,Qa),this.options)),J(this,Xi).addObserver(this),J(this,Xi).execute(n)}},Qa=new WeakMap,Ja=new WeakMap,Xi=new WeakMap,qr=new WeakMap,Zr=new WeakSet,ch=function(){var r;const n=((r=J(this,Xi))==null?void 0:r.state)??H3();He(this,Ja,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Wg=function(n){ii.batch(()=>{var r,l,u,g,y,b,x,E;if(J(this,qr)&&this.hasListeners()){const A=J(this,Ja).variables,N=J(this,Ja).context;(n==null?void 0:n.type)==="success"?((l=(r=J(this,qr)).onSuccess)==null||l.call(r,n.data,A,N),(g=(u=J(this,qr)).onSettled)==null||g.call(u,n.data,null,A,N)):(n==null?void 0:n.type)==="error"&&((b=(y=J(this,qr)).onError)==null||b.call(y,n.error,A,N),(E=(x=J(this,qr)).onSettled)==null||E.call(x,void 0,n.error,A,N))}this.listeners.forEach(A=>{A(J(this,Ja))})})},f3),G3=R.createContext(void 0),Mc=t=>{const e=R.useContext(G3);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},FI=({client:t,children:e})=>(R.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),C.jsx(G3.Provider,{value:t,children:e})),q3=R.createContext(!1),VI=()=>R.useContext(q3);q3.Provider;function zI(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var HI=R.createContext(zI()),$I=()=>R.useContext(HI),GI=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},qI=t=>{R.useEffect(()=>{t.clearReset()},[t])},YI=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:l})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(l&&t.data===void 0||B3(n,[t.error,r])),XI=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},WI=(t,e)=>t.isLoading&&t.isFetching&&!e,KI=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Cb=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function ZI(t,e,n){var A,N,O,M,j;const r=VI(),l=$I(),u=Mc(),g=u.defaultQueryOptions(t);(N=(A=u.getDefaultOptions().queries)==null?void 0:A._experimental_beforeQuery)==null||N.call(A,g),g._optimisticResults=r?"isRestoring":"optimistic",XI(g),GI(g,l),qI(l);const y=!u.getQueryCache().get(g.queryHash),[b]=R.useState(()=>new e(u,g)),x=b.getOptimisticResult(g),E=!r&&t.subscribed!==!1;if(R.useSyncExternalStore(R.useCallback(U=>{const H=E?b.subscribe(ii.batchCalls(U)):ji;return b.updateResult(),H},[b,E]),()=>b.getCurrentResult(),()=>b.getCurrentResult()),R.useEffect(()=>{b.setOptions(g)},[g,b]),KI(g,x))throw Cb(g,b,l);if(YI({result:x,errorResetBoundary:l,throwOnError:g.throwOnError,query:u.getQueryCache().get(g.queryHash),suspense:g.suspense}))throw x.error;if((M=(O=u.getDefaultOptions().queries)==null?void 0:O._experimental_afterQuery)==null||M.call(O,g,x),g.experimental_prefetchInRender&&!rl&&WI(x,r)){const U=y?Cb(g,b,l):(j=u.getQueryCache().get(g.queryHash))==null?void 0:j.promise;U==null||U.catch(ji).finally(()=>{b.updateResult()})}return g.notifyOnChangeProps?x:b.trackResult(x)}function Yn(t,e){return ZI(t,jI)}function Ab(t,e){const n=Mc(),[r]=R.useState(()=>new UI(n,t));R.useEffect(()=>{r.setOptions(t)},[r,t]);const l=R.useSyncExternalStore(R.useCallback(g=>r.subscribe(ii.batchCalls(g)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),u=R.useCallback((g,y)=>{r.mutate(g,y).catch(ji)},[r]);if(l.error&&B3(r.options.throwOnError,[l.error]))throw l.error;return{...l,mutate:u,mutateAsync:l.mutate}}const QI="modulepreload",JI=function(t){return"/sms/"+t},Tb={},Af=function(e,n,r){let l=Promise.resolve();if(n&&n.length>0){let g=function(x){return Promise.all(x.map(E=>Promise.resolve(E).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const y=document.querySelector("meta[property=csp-nonce]"),b=(y==null?void 0:y.nonce)||(y==null?void 0:y.getAttribute("nonce"));l=g(n.map(x=>{if(x=JI(x),x in Tb)return;Tb[x]=!0;const E=x.endsWith(".css"),A=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${A}`))return;const N=document.createElement("link");if(N.rel=E?"stylesheet":QI,E||(N.as="script"),N.crossOrigin="",N.href=x,b&&N.setAttribute("nonce",b),document.head.appendChild(N),E)return new Promise((O,M)=>{N.addEventListener("load",O),N.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${x}`)))})}))}function u(g){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=g,window.dispatchEvent(y),!y.defaultPrevented)throw g}return l.then(g=>{for(const y of g||[])y.status==="rejected"&&u(y.reason);return e().catch(u)})},eM=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Af(async()=>{const{default:r}=await Promise.resolve().then(()=>Dc);return{default:r}},[]).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class $m extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class tM extends $m{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _b extends $m{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Nb extends $m{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Kg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Kg||(Kg={}));var nM=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(E){try{x(r.next(E))}catch(A){g(A)}}function b(E){try{x(r.throw(E))}catch(A){g(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};class iM{constructor(e,{headers:n={},customFetch:r,region:l=Kg.Any}={}){this.url=e,this.headers=n,this.region=l,this.fetch=eM(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return nM(this,void 0,void 0,function*(){try{const{headers:l,method:u,body:g}=n;let y={},{region:b}=n;b||(b=this.region);const x=new URL(`${this.url}/${e}`);b&&b!=="any"&&(y["x-region"]=b,x.searchParams.set("forceFunctionRegion",b));let E;g&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",E=g):typeof g=="string"?(y["Content-Type"]="text/plain",E=g):typeof FormData<"u"&&g instanceof FormData?E=g:(y["Content-Type"]="application/json",E=JSON.stringify(g)));const A=yield this.fetch(x.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),l),body:E}).catch(j=>{throw new tM(j)}),N=A.headers.get("x-relay-error");if(N&&N==="true")throw new _b(A);if(!A.ok)throw new Nb(A);let O=((r=A.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),M;return O==="application/json"?M=yield A.json():O==="application/octet-stream"?M=yield A.blob():O==="text/event-stream"?M=A:O==="multipart/form-data"?M=yield A.formData():M=yield A.text(),{data:M,error:null,response:A}}catch(l){return{data:null,error:l,response:l instanceof Nb||l instanceof _b?l.context:void 0}}})}}var fi={},Kl={},Zl={},Ql={},Jl={},ec={},sM=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ac=sM();const rM=Ac.fetch,Y3=Ac.fetch.bind(Ac),X3=Ac.Headers,aM=Ac.Request,oM=Ac.Response,Dc=Object.freeze(Object.defineProperty({__proto__:null,Headers:X3,Request:aM,Response:oM,default:Y3,fetch:rM},Symbol.toStringTag,{value:"Module"})),lM=WA(Dc);var Xd={},Rb;function W3(){if(Rb)return Xd;Rb=1,Object.defineProperty(Xd,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Xd.default=t,Xd}var Ob;function K3(){if(Ob)return ec;Ob=1;var t=ec&&ec.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(ec,"__esModule",{value:!0});const e=t(lM),n=t(W3());class r{constructor(u){this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=u.headers,this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=u.shouldThrowOnError,this.signal=u.signal,this.isMaybeSingle=u.isMaybeSingle,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,g){return this.headers=Object.assign({},this.headers),this.headers[u]=g,this}then(u,g){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const y=this.fetch;let b=y(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async x=>{var E,A,N;let O=null,M=null,j=null,U=x.status,H=x.statusText;if(x.ok){if(this.method!=="HEAD"){const G=await x.text();G===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?M=G:M=JSON.parse(G))}const B=(E=this.headers.Prefer)===null||E===void 0?void 0:E.match(/count=(exact|planned|estimated)/),V=(A=x.headers.get("content-range"))===null||A===void 0?void 0:A.split("/");B&&V&&V.length>1&&(j=parseInt(V[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(M)&&(M.length>1?(O={code:"PGRST116",details:`Results contain ${M.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},M=null,j=null,U=406,H="Not Acceptable"):M.length===1?M=M[0]:M=null)}else{const B=await x.text();try{O=JSON.parse(B),Array.isArray(O)&&x.status===404&&(M=[],O=null,U=200,H="OK")}catch{x.status===404&&B===""?(U=204,H="No Content"):O={message:B}}if(O&&this.isMaybeSingle&&(!((N=O==null?void 0:O.details)===null||N===void 0)&&N.includes("0 rows"))&&(O=null,U=200,H="OK"),O&&this.shouldThrowOnError)throw new n.default(O)}return{error:O,data:M,count:j,status:U,statusText:H}});return this.shouldThrowOnError||(b=b.catch(x=>{var E,A,N;return{error:{message:`${(E=x==null?void 0:x.name)!==null&&E!==void 0?E:"FetchError"}: ${x==null?void 0:x.message}`,details:`${(A=x==null?void 0:x.stack)!==null&&A!==void 0?A:""}`,hint:"",code:`${(N=x==null?void 0:x.code)!==null&&N!==void 0?N:""}`},data:null,count:null,status:0,statusText:""}})),b.then(u,g)}returns(){return this}overrideTypes(){return this}}return ec.default=r,ec}var Ib;function Z3(){if(Ib)return Jl;Ib=1;var t=Jl&&Jl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jl,"__esModule",{value:!0});const e=t(K3());class n extends e.default{select(l){let u=!1;const g=(l??"*").split("").map(y=>/\s/.test(y)&&!u?"":(y==='"'&&(u=!u),y)).join("");return this.url.searchParams.set("select",g),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(l,{ascending:u=!0,nullsFirst:g,foreignTable:y,referencedTable:b=y}={}){const x=b?`${b}.order`:"order",E=this.url.searchParams.get(x);return this.url.searchParams.set(x,`${E?`${E},`:""}${l}.${u?"asc":"desc"}${g===void 0?"":g?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:u,referencedTable:g=u}={}){const y=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(y,`${l}`),this}range(l,u,{foreignTable:g,referencedTable:y=g}={}){const b=typeof y>"u"?"offset":`${y}.offset`,x=typeof y>"u"?"limit":`${y}.limit`;return this.url.searchParams.set(b,`${l}`),this.url.searchParams.set(x,`${u-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:l=!1,verbose:u=!1,settings:g=!1,buffers:y=!1,wal:b=!1,format:x="text"}={}){var E;const A=[l?"analyze":null,u?"verbose":null,g?"settings":null,y?"buffers":null,b?"wal":null].filter(Boolean).join("|"),N=(E=this.headers.Accept)!==null&&E!==void 0?E:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${x}; for="${N}"; options=${A};`,x==="json"?this:this}rollback(){var l;return((l=this.headers.Prefer)!==null&&l!==void 0?l:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Jl.default=n,Jl}var Mb;function Gm(){if(Mb)return Ql;Mb=1;var t=Ql&&Ql.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ql,"__esModule",{value:!0});const e=t(Z3());class n extends e.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}in(l,u){const g=Array.from(new Set(u)).map(y=>typeof y=="string"&&new RegExp("[,()]").test(y)?`"${y}"`:`${y}`).join(",");return this.url.searchParams.append(l,`in.(${g})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:g,type:y}={}){let b="";y==="plain"?b="pl":y==="phrase"?b="ph":y==="websearch"&&(b="w");const x=g===void 0?"":`(${g})`;return this.url.searchParams.append(l,`${b}fts${x}.${u}`),this}match(l){return Object.entries(l).forEach(([u,g])=>{this.url.searchParams.append(u,`eq.${g}`)}),this}not(l,u,g){return this.url.searchParams.append(l,`not.${u}.${g}`),this}or(l,{foreignTable:u,referencedTable:g=u}={}){const y=g?`${g}.or`:"or";return this.url.searchParams.append(y,`(${l})`),this}filter(l,u,g){return this.url.searchParams.append(l,`${u}.${g}`),this}}return Ql.default=n,Ql}var Db;function Q3(){if(Db)return Zl;Db=1;var t=Zl&&Zl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zl,"__esModule",{value:!0});const e=t(Gm());class n{constructor(l,{headers:u={},schema:g,fetch:y}){this.url=l,this.headers=u,this.schema=g,this.fetch=y}select(l,{head:u=!1,count:g}={}){const y=u?"HEAD":"GET";let b=!1;const x=(l??"*").split("").map(E=>/\s/.test(E)&&!b?"":(E==='"'&&(b=!b),E)).join("");return this.url.searchParams.set("select",x),g&&(this.headers.Prefer=`count=${g}`),new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(l,{count:u,defaultToNull:g=!0}={}){const y="POST",b=[];if(this.headers.Prefer&&b.push(this.headers.Prefer),u&&b.push(`count=${u}`),g||b.push("missing=default"),this.headers.Prefer=b.join(","),Array.isArray(l)){const x=l.reduce((E,A)=>E.concat(Object.keys(A)),[]);if(x.length>0){const E=[...new Set(x)].map(A=>`"${A}"`);this.url.searchParams.set("columns",E.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}upsert(l,{onConflict:u,ignoreDuplicates:g=!1,count:y,defaultToNull:b=!0}={}){const x="POST",E=[`resolution=${g?"ignore":"merge"}-duplicates`];if(u!==void 0&&this.url.searchParams.set("on_conflict",u),this.headers.Prefer&&E.push(this.headers.Prefer),y&&E.push(`count=${y}`),b||E.push("missing=default"),this.headers.Prefer=E.join(","),Array.isArray(l)){const A=l.reduce((N,O)=>N.concat(Object.keys(O)),[]);if(A.length>0){const N=[...new Set(A)].map(O=>`"${O}"`);this.url.searchParams.set("columns",N.join(","))}}return new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}update(l,{count:u}={}){const g="PATCH",y=[];return this.headers.Prefer&&y.push(this.headers.Prefer),u&&y.push(`count=${u}`),this.headers.Prefer=y.join(","),new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}delete({count:l}={}){const u="DELETE",g=[];return l&&g.push(`count=${l}`),this.headers.Prefer&&g.unshift(this.headers.Prefer),this.headers.Prefer=g.join(","),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Zl.default=n,Zl}var ku={},ju={},Lb;function cM(){return Lb||(Lb=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.version=void 0,ju.version="0.0.0-automated"),ju}var kb;function uM(){if(kb)return ku;kb=1,Object.defineProperty(ku,"__esModule",{value:!0}),ku.DEFAULT_HEADERS=void 0;const t=cM();return ku.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},ku}var jb;function fM(){if(jb)return Kl;jb=1;var t=Kl&&Kl.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Kl,"__esModule",{value:!0});const e=t(Q3()),n=t(Gm()),r=uM();class l{constructor(g,{headers:y={},schema:b,fetch:x}={}){this.url=g,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),y),this.schemaName=b,this.fetch=x}from(g){const y=new URL(`${this.url}/${g}`);return new e.default(y,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(g){return new l(this.url,{headers:this.headers,schema:g,fetch:this.fetch})}rpc(g,y={},{head:b=!1,get:x=!1,count:E}={}){let A;const N=new URL(`${this.url}/rpc/${g}`);let O;b||x?(A=b?"HEAD":"GET",Object.entries(y).filter(([j,U])=>U!==void 0).map(([j,U])=>[j,Array.isArray(U)?`{${U.join(",")}}`:`${U}`]).forEach(([j,U])=>{N.searchParams.append(j,U)})):(A="POST",O=y);const M=Object.assign({},this.headers);return E&&(M.Prefer=`count=${E}`),new n.default({method:A,url:N,headers:M,schema:this.schemaName,body:O,fetch:this.fetch,allowEmpty:!1})}}return Kl.default=l,Kl}var Bb;function dM(){if(Bb)return fi;Bb=1;var t=fi&&fi.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(fi,"__esModule",{value:!0}),fi.PostgrestError=fi.PostgrestBuilder=fi.PostgrestTransformBuilder=fi.PostgrestFilterBuilder=fi.PostgrestQueryBuilder=fi.PostgrestClient=void 0;const e=t(fM());fi.PostgrestClient=e.default;const n=t(Q3());fi.PostgrestQueryBuilder=n.default;const r=t(Gm());fi.PostgrestFilterBuilder=r.default;const l=t(Z3());fi.PostgrestTransformBuilder=l.default;const u=t(K3());fi.PostgrestBuilder=u.default;const g=t(W3());return fi.PostgrestError=g.default,fi.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:u.default,PostgrestError:g.default},fi}var hM=dM();const gM=Mm(hM),{PostgrestClient:mM,PostgrestQueryBuilder:Lz,PostgrestFilterBuilder:kz,PostgrestTransformBuilder:jz,PostgrestBuilder:Bz,PostgrestError:Pz}=gM;function pM(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const xM=pM(),yM="2.11.15",bM=`realtime-js/${yM}`,wM="1.0.0",J3=1e4,vM=1e3;var Wu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Wu||(Wu={}));var _i;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(_i||(_i={}));var zs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(zs||(zs={}));var Zg;(function(t){t.websocket="websocket"})(Zg||(Zg={}));var Fo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Fo||(Fo={}));class EM{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const l=n.getUint8(1),u=n.getUint8(2);let g=this.HEADER_LENGTH+2;const y=r.decode(e.slice(g,g+l));g=g+l;const b=r.decode(e.slice(g,g+u));g=g+u;const x=JSON.parse(r.decode(e.slice(g,e.byteLength)));return{ref:null,topic:y,event:b,payload:x}}}class eE{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var gn;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(gn||(gn={}));const Pb=(t,e,n={})=>{var r;const l=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((u,g)=>(u[g]=SM(g,t,e,l),u),{})},SM=(t,e,n,r)=>{const l=e.find(y=>y.name===t),u=l==null?void 0:l.type,g=n[t];return u&&!r.includes(u)?tE(u,g):Qg(g)},tE=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return _M(e,n)}switch(t){case gn.bool:return CM(e);case gn.float4:case gn.float8:case gn.int2:case gn.int4:case gn.int8:case gn.numeric:case gn.oid:return AM(e);case gn.json:case gn.jsonb:return TM(e);case gn.timestamp:return NM(e);case gn.abstime:case gn.date:case gn.daterange:case gn.int4range:case gn.int8range:case gn.money:case gn.reltime:case gn.text:case gn.time:case gn.timestamptz:case gn.timetz:case gn.tsrange:case gn.tstzrange:return Qg(e);default:return Qg(e)}},Qg=t=>t,CM=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},AM=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},TM=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},_M=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let u;const g=t.slice(1,n);try{u=JSON.parse("["+g+"]")}catch{u=g?g.split(","):[]}return u.map(y=>tE(e,y))}return t},NM=t=>typeof t=="string"?t.replace(" ","T"):t,nE=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class sg{constructor(e,n,r={},l=J3){this.channel=e,this.event=n,this.payload=r,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ub;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ub||(Ub={}));class Ku{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},l=>{const{onJoin:u,onLeave:g,onSync:y}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ku.syncState(this.state,l,u,g),this.pendingDiffs.forEach(b=>{this.state=Ku.syncDiff(this.state,b,u,g)}),this.pendingDiffs=[],y()}),this.channel._on(r.diff,{},l=>{const{onJoin:u,onLeave:g,onSync:y}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Ku.syncDiff(this.state,l,u,g),y())}),this.onJoin((l,u,g)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:g})}),this.onLeave((l,u,g)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:g})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,l){const u=this.cloneDeep(e),g=this.transformState(n),y={},b={};return this.map(u,(x,E)=>{g[x]||(b[x]=E)}),this.map(g,(x,E)=>{const A=u[x];if(A){const N=E.map(U=>U.presence_ref),O=A.map(U=>U.presence_ref),M=E.filter(U=>O.indexOf(U.presence_ref)<0),j=A.filter(U=>N.indexOf(U.presence_ref)<0);M.length>0&&(y[x]=M),j.length>0&&(b[x]=j)}else y[x]=E}),this.syncDiff(u,{joins:y,leaves:b},r,l)}static syncDiff(e,n,r,l){const{joins:u,leaves:g}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),l||(l=()=>{}),this.map(u,(y,b)=>{var x;const E=(x=e[y])!==null&&x!==void 0?x:[];if(e[y]=this.cloneDeep(b),E.length>0){const A=e[y].map(O=>O.presence_ref),N=E.filter(O=>A.indexOf(O.presence_ref)<0);e[y].unshift(...N)}r(y,E,b)}),this.map(g,(y,b)=>{let x=e[y];if(!x)return;const E=b.map(A=>A.presence_ref);x=x.filter(A=>E.indexOf(A.presence_ref)<0),e[y]=x,l(y,x,b),x.length===0&&delete e[y]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const l=e[r];return"metas"in l?n[r]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[r]=l,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fb;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Fb||(Fb={}));var Vb;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Vb||(Vb={}));var $r;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})($r||($r={}));class qm{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=_i.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new sg(this,zs.join,this.params,this.timeout),this.rejoinTimer=new eE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_i.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_i.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=_i.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_i.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zs.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Ku(this),this.broadcastEndpointURL=nE(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,l;if(this.socket.isConnected()||this.socket.connect(),this.state==_i.closed){const{config:{broadcast:u,presence:g,private:y}}=this.params;this._onError(E=>e==null?void 0:e($r.CHANNEL_ERROR,E)),this._onClose(()=>e==null?void 0:e($r.CLOSED));const b={},x={broadcast:u,presence:g,postgres_changes:(l=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(E=>E.filter))!==null&&l!==void 0?l:[],private:y};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:x},b)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:E})=>{var A;if(this.socket.setAuth(),E===void 0){e==null||e($r.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,O=(A=N==null?void 0:N.length)!==null&&A!==void 0?A:0,M=[];for(let j=0;j<O;j++){const U=N[j],{filter:{event:H,schema:q,table:B,filter:V}}=U,G=E&&E[j];if(G&&G.event===H&&G.schema===q&&G.table===B&&G.filter===V)M.push(Object.assign(Object.assign({},U),{id:G.id}));else{this.unsubscribe(),this.state=_i.errored,e==null||e($r.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,e&&e($r.SUBSCRIBED);return}}).receive("error",E=>{this.state=_i.errored,e==null||e($r.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{e==null||e($r.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,l;if(!this._canPush()&&e.type==="broadcast"){const{event:u,payload:g}=e,b={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:g,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((l=x.body)===null||l===void 0?void 0:l.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var g,y,b;const x=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((b=(y=(g=this.params)===null||g===void 0?void 0:g.config)===null||y===void 0?void 0:y.broadcast)===null||b===void 0)&&b.ack)&&u("ok"),x.receive("ok",()=>u("ok")),x.receive("error",()=>u("error")),x.receive("timeout",()=>u("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=_i.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(zs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(l=>{r=new sg(this,zs.leave,{},e),r.receive("ok",()=>{n(),l("ok")}).receive("timeout",()=>{n(),l("timed out")}).receive("error",()=>{l("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const l=new AbortController,u=setTimeout(()=>l.abort(),r),g=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:l.signal}));return clearTimeout(u),g}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new sg(this,e,n,r);return this._canPush()?l.send():(l.startTimeout(),this.pushBuffer.push(l)),l}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var l,u;const g=e.toLocaleLowerCase(),{close:y,error:b,leave:x,join:E}=zs;if(r&&[y,b,x,E].indexOf(g)>=0&&r!==this._joinRef())return;let N=this._onMessage(g,n,r);if(n&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(g)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(O=>{var M,j,U;return((M=O.filter)===null||M===void 0?void 0:M.event)==="*"||((U=(j=O.filter)===null||j===void 0?void 0:j.event)===null||U===void 0?void 0:U.toLocaleLowerCase())===g}).map(O=>O.callback(N,r)):(u=this.bindings[g])===null||u===void 0||u.filter(O=>{var M,j,U,H,q,B;if(["broadcast","presence","postgres_changes"].includes(g))if("id"in O){const V=O.id,G=(M=O.filter)===null||M===void 0?void 0:M.event;return V&&((j=n.ids)===null||j===void 0?void 0:j.includes(V))&&(G==="*"||(G==null?void 0:G.toLocaleLowerCase())===((U=n.data)===null||U===void 0?void 0:U.type.toLocaleLowerCase()))}else{const V=(q=(H=O==null?void 0:O.filter)===null||H===void 0?void 0:H.event)===null||q===void 0?void 0:q.toLocaleLowerCase();return V==="*"||V===((B=n==null?void 0:n.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return O.type.toLocaleLowerCase()===g}).map(O=>{if(typeof N=="object"&&"ids"in N){const M=N.data,{schema:j,table:U,commit_timestamp:H,type:q,errors:B}=M;N=Object.assign(Object.assign({},{schema:j,table:U,commit_timestamp:H,eventType:q,new:{},old:{},errors:B}),this._getPayloadRecords(M))}O.callback(N,r)})}_isClosed(){return this.state===_i.closed}_isJoined(){return this.state===_i.joined}_isJoining(){return this.state===_i.joining}_isLeaving(){return this.state===_i.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const l=e.toLocaleLowerCase(),u={type:l,filter:n,callback:r};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===r&&qm.isEqual(l.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(zs.close,{},e)}_onError(e){this._on(zs.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_i.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Pb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Pb(e.columns,e.old_record)),n}}const zb=()=>{},RM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class OM{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=J3,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zb,this.ref=0,this.logger=zb,this.conn=null,this.sendBuffer=[],this.serializer=new EM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=u=>{let g;return u?g=u:typeof fetch>"u"?g=(...y)=>Af(async()=>{const{default:b}=await Promise.resolve().then(()=>Dc);return{default:b}},void 0).then(({default:b})=>b(...y)):g=fetch,(...y)=>g(...y)},this.endPoint=`${e}/${Zg.websocket}`,this.httpEndpoint=nE(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const l=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(l&&(this.accessTokenValue=l,this.apiKey=l),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:u=>[1e3,2e3,5e3,1e4][u-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(u,g)=>g(JSON.stringify(u)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new eE(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=xM),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:wM}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Wu.connecting:return Fo.Connecting;case Wu.open:return Fo.Open;case Wu.closing:return Fo.Closing;default:return Fo.Closed}}isConnected(){return this.connectionState()===Fo.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,l=this.getChannels().find(u=>u.topic===r);if(l)return l;{const u=new qm(`realtime:${e}`,n,this);return this.channels.push(u),u}}push(e){const{topic:n,event:r,payload:l,ref:u}=e,g=()=>{this.encode(e,y=>{var b;(b=this.conn)===null||b===void 0||b.send(y)})};this.log("push",`${n} ${r} (${u})`,l),this.isConnected()?g():this.sendBuffer.push(g)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const l={access_token:n,version:bM};n&&r.updateJoinPayload(l),r.joinedOnce&&r._isJoined()&&r._push(zs.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(vM,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:l,payload:u,ref:g}=n;r==="phoenix"&&l==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),g&&g===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${u.status||""} ${r} ${l} ${g&&"("+g+")"||""}`,u),Array.from(this.channels).filter(y=>y._isMember(r)).forEach(y=>y._trigger(l,u,g)),this.stateChangeCallbacks.message.forEach(y=>y(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(zs.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",l=new URLSearchParams(n);return`${e}${r}${l}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([RM],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Ym extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function di(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class IM extends Ym{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Jg extends Ym{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var MM=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(E){try{x(r.next(E))}catch(A){g(A)}}function b(E){try{x(r.throw(E))}catch(A){g(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};const iE=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Af(async()=>{const{default:r}=await Promise.resolve().then(()=>Dc);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},DM=()=>MM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Af(()=>Promise.resolve().then(()=>Dc),void 0)).Response:Response}),em=t=>{if(Array.isArray(t))return t.map(n=>em(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const l=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));e[l]=em(r)}),e};var ll=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(E){try{x(r.next(E))}catch(A){g(A)}}function b(E){try{x(r.throw(E))}catch(A){g(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};const rg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),LM=(t,e,n)=>ll(void 0,void 0,void 0,function*(){const r=yield DM();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(l=>{e(new IM(rg(l),t.status||500))}).catch(l=>{e(new Jg(rg(l),l))}):e(new Jg(rg(t),t))}),kM=(t,e,n,r)=>{const l={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(l.body=JSON.stringify(r)),Object.assign(Object.assign({},l),n))};function Tf(t,e,n,r,l,u){return ll(this,void 0,void 0,function*(){return new Promise((g,y)=>{t(n,kM(e,r,l,u)).then(b=>{if(!b.ok)throw b;return r!=null&&r.noResolveJson?b:b.json()}).then(b=>g(b)).catch(b=>LM(b,y,r))})})}function vh(t,e,n,r){return ll(this,void 0,void 0,function*(){return Tf(t,"GET",e,n,r)})}function Va(t,e,n,r,l){return ll(this,void 0,void 0,function*(){return Tf(t,"POST",e,r,l,n)})}function jM(t,e,n,r,l){return ll(this,void 0,void 0,function*(){return Tf(t,"PUT",e,r,l,n)})}function BM(t,e,n,r){return ll(this,void 0,void 0,function*(){return Tf(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function sE(t,e,n,r,l){return ll(this,void 0,void 0,function*(){return Tf(t,"DELETE",e,r,l,n)})}var qi=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(E){try{x(r.next(E))}catch(A){g(A)}}function b(E){try{x(r.throw(E))}catch(A){g(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};const PM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class UM{constructor(e,n={},r,l){this.url=e,this.headers=n,this.bucketId=r,this.fetch=iE(l)}uploadOrUpdate(e,n,r,l){return qi(this,void 0,void 0,function*(){try{let u;const g=Object.assign(Object.assign({},Hb),l);let y=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(g.upsert)});const b=g.metadata;typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",g.cacheControl),b&&u.append("metadata",this.encodeMetadata(b)),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",g.cacheControl),b&&u.append("metadata",this.encodeMetadata(b))):(u=r,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType,b&&(y["x-metadata"]=this.toBase64(this.encodeMetadata(b)))),l!=null&&l.headers&&(y=Object.assign(Object.assign({},y),l.headers));const x=this._removeEmptyFolders(n),E=this._getFinalPath(x),A=yield this.fetch(`${this.url}/object/${E}`,Object.assign({method:e,body:u,headers:y},g!=null&&g.duplex?{duplex:g.duplex}:{})),N=yield A.json();return A.ok?{data:{path:x,id:N.Id,fullPath:N.Key},error:null}:{data:null,error:N}}catch(u){if(di(u))return{data:null,error:u};throw u}})}upload(e,n,r){return qi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,l){return qi(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(e),g=this._getFinalPath(u),y=new URL(this.url+`/object/upload/sign/${g}`);y.searchParams.set("token",n);try{let b;const x=Object.assign({upsert:Hb.upsert},l),E=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&r instanceof Blob?(b=new FormData,b.append("cacheControl",x.cacheControl),b.append("",r)):typeof FormData<"u"&&r instanceof FormData?(b=r,b.append("cacheControl",x.cacheControl)):(b=r,E["cache-control"]=`max-age=${x.cacheControl}`,E["content-type"]=x.contentType);const A=yield this.fetch(y.toString(),{method:"PUT",body:b,headers:E}),N=yield A.json();return A.ok?{data:{path:u,fullPath:N.Key},error:null}:{data:null,error:N}}catch(b){if(di(b))return{data:null,error:b};throw b}})}createSignedUploadUrl(e,n){return qi(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const l=Object.assign({},this.headers);n!=null&&n.upsert&&(l["x-upsert"]="true");const u=yield Va(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:l}),g=new URL(this.url+u.url),y=g.searchParams.get("token");if(!y)throw new Ym("No token returned by API");return{data:{signedUrl:g.toString(),path:e,token:y},error:null}}catch(r){if(di(r))return{data:null,error:r};throw r}})}update(e,n,r){return qi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return qi(this,void 0,void 0,function*(){try{return{data:yield Va(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(di(l))return{data:null,error:l};throw l}})}copy(e,n,r){return qi(this,void 0,void 0,function*(){try{return{data:{path:(yield Va(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(di(l))return{data:null,error:l};throw l}})}createSignedUrl(e,n,r){return qi(this,void 0,void 0,function*(){try{let l=this._getFinalPath(e),u=yield Va(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const g=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${g}`)},{data:u,error:null}}catch(l){if(di(l))return{data:null,error:l};throw l}})}createSignedUrls(e,n,r){return qi(this,void 0,void 0,function*(){try{const l=yield Va(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),u=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:l.map(g=>Object.assign(Object.assign({},g),{signedUrl:g.signedURL?encodeURI(`${this.url}${g.signedURL}${u}`):null})),error:null}}catch(l){if(di(l))return{data:null,error:l};throw l}})}download(e,n){return qi(this,void 0,void 0,function*(){const l=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),g=u?`?${u}`:"";try{const y=this._getFinalPath(e);return{data:yield(yield vh(this.fetch,`${this.url}/${l}/${y}${g}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(y){if(di(y))return{data:null,error:y};throw y}})}info(e){return qi(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield vh(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:em(r),error:null}}catch(r){if(di(r))return{data:null,error:r};throw r}})}exists(e){return qi(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield BM(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(di(r)&&r instanceof Jg){const l=r.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),l=[],u=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&l.push(u);const y=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",b=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});b!==""&&l.push(b);let x=l.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${y}/public/${r}${x}`)}}}remove(e){return qi(this,void 0,void 0,function*(){try{return{data:yield sE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(di(n))return{data:null,error:n};throw n}})}list(e,n,r){return qi(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},PM),n),{prefix:e||""});return{data:yield Va(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},r),error:null}}catch(l){if(di(l))return{data:null,error:l};throw l}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const FM="2.7.1",VM={"X-Client-Info":`storage-js/${FM}`};var tc=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(E){try{x(r.next(E))}catch(A){g(A)}}function b(E){try{x(r.throw(E))}catch(A){g(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};class zM{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},VM),n),this.fetch=iE(r)}listBuckets(){return tc(this,void 0,void 0,function*(){try{return{data:yield vh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(di(e))return{data:null,error:e};throw e}})}getBucket(e){return tc(this,void 0,void 0,function*(){try{return{data:yield vh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(di(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return tc(this,void 0,void 0,function*(){try{return{data:yield Va(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(di(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return tc(this,void 0,void 0,function*(){try{return{data:yield jM(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(di(r))return{data:null,error:r};throw r}})}emptyBucket(e){return tc(this,void 0,void 0,function*(){try{return{data:yield Va(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(di(n))return{data:null,error:n};throw n}})}deleteBucket(e){return tc(this,void 0,void 0,function*(){try{return{data:yield sE(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(di(n))return{data:null,error:n};throw n}})}}class HM extends zM{constructor(e,n={},r){super(e,n,r)}from(e){return new UM(this.url,this.headers,e,this.fetch)}}const $M="2.50.3";let Fu="";typeof Deno<"u"?Fu="deno":typeof document<"u"?Fu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fu="react-native":Fu="node";const GM={"X-Client-Info":`supabase-js-${Fu}/${$M}`},qM={headers:GM},YM={schema:"public"},XM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},WM={};var KM=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(E){try{x(r.next(E))}catch(A){g(A)}}function b(E){try{x(r.throw(E))}catch(A){g(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};const ZM=t=>{let e;return t?e=t:typeof fetch>"u"?e=Y3:e=fetch,(...n)=>e(...n)},QM=()=>typeof Headers>"u"?X3:Headers,JM=(t,e,n)=>{const r=ZM(n),l=QM();return(u,g)=>KM(void 0,void 0,void 0,function*(){var y;const b=(y=yield e())!==null&&y!==void 0?y:t;let x=new l(g==null?void 0:g.headers);return x.has("apikey")||x.set("apikey",t),x.has("Authorization")||x.set("Authorization",`Bearer ${b}`),r(u,Object.assign(Object.assign({},g),{headers:x}))})};var eD=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(E){try{x(r.next(E))}catch(A){g(A)}}function b(E){try{x(r.throw(E))}catch(A){g(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};function tD(t){return t.endsWith("/")?t:t+"/"}function nD(t,e){var n,r;const{db:l,auth:u,realtime:g,global:y}=t,{db:b,auth:x,realtime:E,global:A}=e,N={db:Object.assign(Object.assign({},b),l),auth:Object.assign(Object.assign({},x),u),realtime:Object.assign(Object.assign({},E),g),global:Object.assign(Object.assign(Object.assign({},A),y),{headers:Object.assign(Object.assign({},(n=A==null?void 0:A.headers)!==null&&n!==void 0?n:{}),(r=y==null?void 0:y.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>eD(this,void 0,void 0,function*(){return""})};return t.accessToken?N.accessToken=t.accessToken:delete N.accessToken,N}const rE="2.70.0",ac=30*1e3,tm=3,ag=tm*ac,iD="http://localhost:9999",sD="supabase.auth.token",rD={"X-Client-Info":`gotrue-js/${rE}`},nm="X-Supabase-Api-Version",aE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},aD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oD=6e5;class Xm extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function St(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class lD extends Xm{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function cD(t){return St(t)&&t.name==="AuthApiError"}class oE extends Xm{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class lo extends Xm{constructor(e,n,r,l){super(e,r,l),this.name=n,this.status=r}}class Ua extends lo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uD(t){return St(t)&&t.name==="AuthSessionMissingError"}class Wd extends lo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kd extends lo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Zd extends lo{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function fD(t){return St(t)&&t.name==="AuthImplicitGrantRedirectError"}class $b extends lo{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class im extends lo{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function og(t){return St(t)&&t.name==="AuthRetryableFetchError"}class Gb extends lo{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Zu extends lo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Eh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qb=` 	
\r=`.split(""),dD=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<qb.length;e+=1)t[qb[e].charCodeAt(0)]=-2;for(let e=0;e<Eh.length;e+=1)t[Eh[e].charCodeAt(0)]=e;return t})();function Yb(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Eh[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Eh[r]),e.queuedBits-=6}}function lE(t,e,n){const r=dD[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Xb(t){const e=[],n=g=>{e.push(String.fromCodePoint(g))},r={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=g=>{mD(g,r,n)};for(let g=0;g<t.length;g+=1)lE(t.charCodeAt(g),l,u);return e.join("")}function hD(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function gD(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const l=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|l)+65536,n+=1}hD(r,e)}}function mD(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function pD(t){const e=[],n={queue:0,queuedBits:0},r=l=>{e.push(l)};for(let l=0;l<t.length;l+=1)lE(t.charCodeAt(l),n,r);return new Uint8Array(e)}function xD(t){const e=[];return gD(t,n=>e.push(n)),new Uint8Array(e)}function yD(t){const e=[],n={queue:0,queuedBits:0},r=l=>{e.push(l)};return t.forEach(l=>Yb(l,n,r)),Yb(null,n,r),e.join("")}function bD(t){return Math.round(Date.now()/1e3)+t}function wD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ps=()=>typeof window<"u"&&typeof document<"u",ko={tested:!1,writable:!1},Qu=()=>{if(!Ps())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ko.tested)return ko.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ko.tested=!0,ko.writable=!0}catch{ko.tested=!0,ko.writable=!1}return ko.writable};function vD(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((l,u)=>{e[u]=l})}catch{}return n.searchParams.forEach((r,l)=>{e[l]=r}),e}const cE=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Af(async()=>{const{default:r}=await Promise.resolve().then(()=>Dc);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},ED=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",uE=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Qd=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Jd=async(t,e)=>{await t.removeItem(e)};class Ph{constructor(){this.promise=new Ph.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ph.promiseConstructor=Promise;function lg(t){const e=t.split(".");if(e.length!==3)throw new Zu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!aD.test(e[r]))throw new Zu("JWT not in base64url format");return{header:JSON.parse(Xb(e[0])),payload:JSON.parse(Xb(e[1])),signature:pD(e[2]),raw:{header:e[0],payload:e[1]}}}async function SD(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function CD(t,e){return new Promise((r,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const g=await t(u);if(!e(u,null,g)){r(g);return}}catch(g){if(!e(u,g)){l(g);return}}})()})}function AD(t){return("0"+t.toString(16)).substr(-2)}function TD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let l="";for(let u=0;u<56;u++)l+=n.charAt(Math.floor(Math.random()*r));return l}return crypto.getRandomValues(e),Array.from(e,AD).join("")}async function _D(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),l=new Uint8Array(r);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function ND(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await _D(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function nc(t,e,n=!1){const r=TD();let l=r;n&&(l+="/PASSWORD_RECOVERY"),await uE(t,`${e}-code-verifier`,l);const u=await ND(r);return[u,r===u?"plain":"s256"]}const RD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function OD(t){const e=t.headers.get(nm);if(!e||!e.match(RD))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ID(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function MD(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const DD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ic(t){if(!DD.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var LD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(t);l<r.length;l++)e.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(t,r[l])&&(n[r[l]]=t[r[l]]);return n};const Bo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),kD=[502,503,504];async function Wb(t){var e;if(!ED(t))throw new im(Bo(t),0);if(kD.includes(t.status))throw new im(Bo(t),t.status);let n;try{n=await t.json()}catch(u){throw new oE(Bo(u),u)}let r;const l=OD(t);if(l&&l.getTime()>=aE["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Gb(Bo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ua}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,g)=>u&&typeof g=="string",!0))throw new Gb(Bo(n),t.status,n.weak_password.reasons);throw new lD(Bo(n),t.status||500,r)}const jD=(t,e,n,r)=>{const l={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),l.body=JSON.stringify(r),Object.assign(Object.assign({},l),n))};async function Ut(t,e,n,r){var l;const u=Object.assign({},r==null?void 0:r.headers);u[nm]||(u[nm]=aE["2024-01-01"].name),r!=null&&r.jwt&&(u.Authorization=`Bearer ${r.jwt}`);const g=(l=r==null?void 0:r.query)!==null&&l!==void 0?l:{};r!=null&&r.redirectTo&&(g.redirect_to=r.redirectTo);const y=Object.keys(g).length?"?"+new URLSearchParams(g).toString():"",b=await BD(t,e,n+y,{headers:u,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(b):{data:Object.assign({},b),error:null}}async function BD(t,e,n,r,l,u){const g=jD(e,r,l,u);let y;try{y=await t(n,Object.assign({},g))}catch(b){throw console.error(b),new im(Bo(b),0)}if(y.ok||await Wb(y),r!=null&&r.noResolveJson)return y;try{return await y.json()}catch(b){await Wb(b)}}function Hr(t){var e;let n=null;VD(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=bD(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Kb(t){const e=Hr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function za(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function PD(t){return{data:t,error:null}}function UD(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:l,verification_type:u}=t,g=LD(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),y={action_link:e,email_otp:n,hashed_token:r,redirect_to:l,verification_type:u},b=Object.assign({},g);return{data:{properties:y,user:b},error:null}}function FD(t){return t}function VD(t){return t.access_token&&t.refresh_token&&t.expires_in}const cg=["global","local","others"];var zD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(t);l<r.length;l++)e.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(t,r[l])&&(n[r[l]]=t[r[l]]);return n};class HD{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=cE(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=cg[0]){if(cg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${cg.join(", ")}`);try{return await Ut(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(St(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ut(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:za})}catch(r){if(St(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=zD(e,["options"]),l=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(l.new_email=r==null?void 0:r.newEmail,delete l.newEmail),await Ut(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:UD,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(St(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ut(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:za})}catch(n){if(St(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,l,u,g,y,b;try{const x={nextPage:null,lastPage:0,total:0},E=await Ut(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(u=(l=e==null?void 0:e.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:FD});if(E.error)throw E.error;const A=await E.json(),N=(g=E.headers.get("x-total-count"))!==null&&g!==void 0?g:0,O=(b=(y=E.headers.get("link"))===null||y===void 0?void 0:y.split(","))!==null&&b!==void 0?b:[];return O.length>0&&(O.forEach(M=>{const j=parseInt(M.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(M.split(";")[1].split("=")[1]);x[`${U}Page`]=j}),x.total=parseInt(N)),{data:Object.assign(Object.assign({},A),x),error:null}}catch(x){if(St(x))return{data:{users:[]},error:x};throw x}}async getUserById(e){ic(e);try{return await Ut(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:za})}catch(n){if(St(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){ic(e);try{return await Ut(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:za})}catch(r){if(St(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){ic(e);try{return await Ut(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:za})}catch(r){if(St(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ic(e.userId);try{const{data:n,error:r}=await Ut(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:n,error:r}}catch(n){if(St(n))return{data:null,error:n};throw n}}async _deleteFactor(e){ic(e.userId),ic(e.id);try{return{data:await Ut(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(St(n))return{data:null,error:n};throw n}}}const $D={getItem:t=>Qu()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Qu()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Qu()&&globalThis.localStorage.removeItem(t)}};function Zb(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function GD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const sc={debug:!!(globalThis&&Qu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fE extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class qD extends fE{}async function YD(t,e,n){sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),sc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async l=>{if(l){sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,l.name);try{return await n()}finally{sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,l.name)}}else{if(e===0)throw sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new qD(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(sc.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}GD();const XD={url:iD,storageKey:sD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Qb(t,e,n){return await n()}class ff{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ff.nextInstanceID,ff.nextInstanceID+=1,this.instanceID>0&&Ps()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},XD),e);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new HD({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=cE(l.fetch),this.lock=l.lock||Qb,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:Ps()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=YD:this.lock=Qb,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?l.storage?this.storage=l.storage:Qu()?this.storage=$D:(this.memoryStorage={},this.storage=Zb(this.memoryStorage)):(this.memoryStorage={},this.storage=Zb(this.memoryStorage)),Ps()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${rE}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=vD(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Ps()&&this.detectSessionInUrl&&r!=="none"){const{data:l,error:u}=await this._getSessionFromURL(n,r);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),fD(u)){const b=(e=u.details)===null||e===void 0?void 0:e.code;if(b==="identity_already_exists"||b==="identity_not_found"||b==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:g,redirectType:y}=l;return this._debug("#_initialize()","detected session in URL",g,"redirect type",y),await this._saveSession(g),setTimeout(async()=>{y==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",g):await this._notifyAllSubscribers("SIGNED_IN",g)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return St(n)?{error:n}:{error:new oE("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,l;try{const u=await Ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(l=e==null?void 0:e.options)===null||l===void 0?void 0:l.captchaToken}},xform:Hr}),{data:g,error:y}=u;if(y||!g)return{data:{user:null,session:null},error:y};const b=g.session,x=g.user;return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:x,session:b},error:null}}catch(u){if(St(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(e){var n,r,l;try{let u;if("email"in e){const{email:E,password:A,options:N}=e;let O=null,M=null;this.flowType==="pkce"&&([O,M]=await nc(this.storage,this.storageKey)),u=await Ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:E,password:A,data:(n=N==null?void 0:N.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:O,code_challenge_method:M},xform:Hr})}else if("phone"in e){const{phone:E,password:A,options:N}=e;u=await Ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:E,password:A,data:(r=N==null?void 0:N.data)!==null&&r!==void 0?r:{},channel:(l=N==null?void 0:N.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:Hr})}else throw new Kd("You must provide either an email or phone number and a password");const{data:g,error:y}=u;if(y||!g)return{data:{user:null,session:null},error:y};const b=g.session,x=g.user;return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:x,session:b},error:null}}catch(u){if(St(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(e){try{let n;if("email"in e){const{email:u,password:g,options:y}=e;n=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:g,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Kb})}else if("phone"in e){const{phone:u,password:g,options:y}=e;n=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:g,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Kb})}else throw new Kd("You must provide either an email or phone number and a password");const{data:r,error:l}=n;return l?{data:{user:null,session:null},error:l}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Wd}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:l})}catch(n){if(St(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,l,u;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=e.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,l,u,g,y,b,x,E,A,N,O;let M,j;if("message"in e)M=e.message,j=e.signature;else{const{chain:U,wallet:H,statement:q,options:B}=e;let V;if(Ps())if(typeof H=="object")V=H;else{const ne=window;if("solana"in ne&&typeof ne.solana=="object"&&("signIn"in ne.solana&&typeof ne.solana.signIn=="function"||"signMessage"in ne.solana&&typeof ne.solana.signMessage=="function"))V=ne.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!(B!=null&&B.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=H}const G=new URL((n=B==null?void 0:B.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in V&&V.signIn){const ne=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B==null?void 0:B.signInWithSolana),{version:"1",domain:G.host,uri:G.href}),q?{statement:q}:null));let K;if(Array.isArray(ne)&&ne[0]&&typeof ne[0]=="object")K=ne[0];else if(ne&&typeof ne=="object"&&"signedMessage"in ne&&"signature"in ne)K=ne;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in K&&"signature"in K&&(typeof K.signedMessage=="string"||K.signedMessage instanceof Uint8Array)&&K.signature instanceof Uint8Array)M=typeof K.signedMessage=="string"?K.signedMessage:new TextDecoder().decode(K.signedMessage),j=K.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");M=[`${G.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...q?["",q,""]:[""],"Version: 1",`URI: ${G.href}`,`Issued At: ${(l=(r=B==null?void 0:B.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=B==null?void 0:B.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((g=B==null?void 0:B.signInWithSolana)===null||g===void 0)&&g.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((y=B==null?void 0:B.signInWithSolana)===null||y===void 0)&&y.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((b=B==null?void 0:B.signInWithSolana)===null||b===void 0)&&b.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((x=B==null?void 0:B.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((A=(E=B==null?void 0:B.signInWithSolana)===null||E===void 0?void 0:E.resources)===null||A===void 0)&&A.length?["Resources",...B.signInWithSolana.resources.map(K=>`- ${K}`)]:[]].join(`
`);const ne=await V.signMessage(new TextEncoder().encode(M),"utf8");if(!ne||!(ne instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=ne}}try{const{data:U,error:H}=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:M,signature:yD(j)},!((N=e.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(O=e.options)===null||O===void 0?void 0:O.captchaToken}}:null),xform:Hr});if(H)throw H;return!U||!U.session||!U.user?{data:{user:null,session:null},error:new Wd}:(U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("SIGNED_IN",U.session)),{data:Object.assign({},U),error:H})}catch(U){if(St(U))return{data:{user:null,session:null},error:U};throw U}}async _exchangeCodeForSession(e){const n=await Qd(this.storage,`${this.storageKey}-code-verifier`),[r,l]=(n??"").split("/");try{const{data:u,error:g}=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Hr});if(await Jd(this.storage,`${this.storageKey}-code-verifier`),g)throw g;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new Wd}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:g})}catch(u){if(St(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(e){try{const{options:n,provider:r,token:l,access_token:u,nonce:g}=e,y=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:l,access_token:u,nonce:g,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Hr}),{data:b,error:x}=y;return x?{data:{user:null,session:null},error:x}:!b||!b.session||!b.user?{data:{user:null,session:null},error:new Wd}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:b,error:x})}catch(n){if(St(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,l,u,g;try{if("email"in e){const{email:y,options:b}=e;let x=null,E=null;this.flowType==="pkce"&&([x,E]=await nc(this.storage,this.storageKey));const{error:A}=await Ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:y,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},create_user:(r=b==null?void 0:b.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:x,code_challenge_method:E},redirectTo:b==null?void 0:b.emailRedirectTo});return{data:{user:null,session:null},error:A}}if("phone"in e){const{phone:y,options:b}=e,{data:x,error:E}=await Ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:y,data:(l=b==null?void 0:b.data)!==null&&l!==void 0?l:{},create_user:(u=b==null?void 0:b.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},channel:(g=b==null?void 0:b.channel)!==null&&g!==void 0?g:"sms"}});return{data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:E}}throw new Kd("You must provide either an email or phone number.")}catch(y){if(St(y))return{data:{user:null,session:null},error:y};throw y}}async verifyOtp(e){var n,r;try{let l,u;"options"in e&&(l=(n=e.options)===null||n===void 0?void 0:n.redirectTo,u=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:g,error:y}=await Ut(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:Hr});if(y)throw y;if(!g)throw new Error("An error occurred on token verification.");const b=g.session,x=g.user;return b!=null&&b.access_token&&(await this._saveSession(b),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",b)),{data:{user:x,session:b},error:null}}catch(l){if(St(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(e){var n,r,l;try{let u=null,g=null;return this.flowType==="pkce"&&([u,g]=await nc(this.storage,this.storageKey)),await Ut(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((l=e==null?void 0:e.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:g}),headers:this.headers,xform:PD})}catch(u){if(St(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ua;const{error:l}=await Ut(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:l}})}catch(e){if(St(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:l,options:u}=e,{error:g}=await Ut(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:g}}else if("phone"in e){const{phone:r,type:l,options:u}=e,{data:g,error:y}=await Ut(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return{data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:y}}throw new Kd("You must provide either an email or phone number and a type")}catch(n){if(St(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Qd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ag:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let g=this.suppressGetSessionWarning;e=new Proxy(e,{get:(b,x,E)=>(!g&&x==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),g=!0,this.suppressGetSessionWarning=!0),Reflect.get(b,x,E))})}return{data:{session:e},error:null}}const{session:l,error:u}=await this._callRefreshToken(e.refresh_token);return u?{data:{session:null},error:u}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:za}):await this._useSession(async n=>{var r,l,u;const{data:g,error:y}=n;if(y)throw y;return!(!((r=g.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ua}:await Ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=g.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:za})})}catch(n){if(St(n))return uD(n)&&(await this._removeSession(),await Jd(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:l,error:u}=r;if(u)throw u;if(!l.session)throw new Ua;const g=l.session;let y=null,b=null;this.flowType==="pkce"&&e.email!=null&&([y,b]=await nc(this.storage,this.storageKey));const{data:x,error:E}=await Ut(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:y,code_challenge_method:b}),jwt:g.access_token,xform:za});if(E)throw E;return g.user=x.user,await this._saveSession(g),await this._notifyAllSubscribers("USER_UPDATED",g),{data:{user:g.user},error:null}})}catch(r){if(St(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ua;const n=Date.now()/1e3;let r=n,l=!0,u=null;const{payload:g}=lg(e.access_token);if(g.exp&&(r=g.exp,l=r<=n),l){const{session:y,error:b}=await this._callRefreshToken(e.refresh_token);if(b)return{data:{user:null,session:null},error:b};if(!y)return{data:{user:null,session:null},error:null};u=y}else{const{data:y,error:b}=await this._getUser(e.access_token);if(b)throw b;u={access_token:e.access_token,refresh_token:e.refresh_token,user:y.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(n){if(St(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:g,error:y}=n;if(y)throw y;e=(r=g.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ua;const{session:l,error:u}=await this._callRefreshToken(e.refresh_token);return u?{data:{user:null,session:null},error:u}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(St(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Ps())throw new Zd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Zd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new $b("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new $b("No code detected.");const{data:q,error:B}=await this._exchangeCodeForSession(e.code);if(B)throw B;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:q.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:l,access_token:u,refresh_token:g,expires_in:y,expires_at:b,token_type:x}=e;if(!u||!y||!g||!x)throw new Zd("No session defined in URL");const E=Math.round(Date.now()/1e3),A=parseInt(y);let N=E+A;b&&(N=parseInt(b));const O=N-E;O*1e3<=ac&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${O}s, should have been closer to ${A}s`);const M=N-A;E-M>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",M,N,E):E-M<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",M,N,E);const{data:j,error:U}=await this._getUser(u);if(U)throw U;const H={provider_token:r,provider_refresh_token:l,access_token:u,expires_in:A,expires_at:N,refresh_token:g,token_type:x,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:H,redirectType:e.type},error:null}}catch(r){if(St(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Qd(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:l,error:u}=n;if(u)return{error:u};const g=(r=l.session)===null||r===void 0?void 0:r.access_token;if(g){const{error:y}=await this.admin.signOut(g,e);if(y&&!(cD(y)&&(y.status===404||y.status===401||y.status===403)))return{error:y}}return e!=="others"&&(await this._removeSession(),await Jd(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=wD(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,l;try{const{data:{session:u},error:g}=n;if(g)throw g;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",e,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(e))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",u),console.error(u)}})}async resetPasswordForEmail(e,n={}){let r=null,l=null;this.flowType==="pkce"&&([r,l]=await nc(this.storage,this.storageKey,!0));try{return await Ut(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:l,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(St(u))return{data:null,error:u};throw u}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(St(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:l}=await this._useSession(async u=>{var g,y,b,x,E;const{data:A,error:N}=u;if(N)throw N;const O=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(g=e.options)===null||g===void 0?void 0:g.redirectTo,scopes:(y=e.options)===null||y===void 0?void 0:y.scopes,queryParams:(b=e.options)===null||b===void 0?void 0:b.queryParams,skipBrowserRedirect:!0});return await Ut(this.fetch,"GET",O,{headers:this.headers,jwt:(E=(x=A.session)===null||x===void 0?void 0:x.access_token)!==null&&E!==void 0?E:void 0})});if(l)throw l;return Ps()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(St(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,l;const{data:u,error:g}=n;if(g)throw g;return await Ut(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(l=(r=u.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0})})}catch(n){if(St(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await CD(async l=>(l>0&&await SD(200*Math.pow(2,l-1)),this._debug(n,"refreshing attempt",l),await Ut(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Hr})),(l,u)=>{const g=200*Math.pow(2,l);return u&&og(u)&&Date.now()+g-r<ac})}catch(r){if(this._debug(n,"error",r),St(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Ps()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Qd(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const l=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<ag;if(this._debug(n,`session has${l?"":" not"} expired with margin of ${ag}s`),l){if(this.autoRefreshToken&&r.refresh_token){const{error:u}=await this._callRefreshToken(r.refresh_token);u&&(console.error(u),og(u)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ua;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Ph;const{data:u,error:g}=await this._refreshAccessToken(e);if(g)throw g;if(!u.session)throw new Ua;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const y={session:u.session,error:null};return this.refreshingDeferred.resolve(y),y}catch(u){if(this._debug(l,"error",u),St(u)){const g={session:null,error:u};return og(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(g),g}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(e,n,r=!0){const l=`#_notifyAllSubscribers(${e})`;this._debug(l,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const u=[],g=Array.from(this.stateChangeEmitters.values()).map(async y=>{try{await y.callback(e,n)}catch(b){u.push(b)}});if(await Promise.all(g),u.length>0){for(let y=0;y<u.length;y+=1)console.error(u[y]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await uE(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Jd(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ps()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ac);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((r.expires_at*1e3-e)/ac);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${ac}ms, refresh threshold is ${tm} ticks`),l<=tm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fE)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ps()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const l=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&l.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&l.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[u,g]=await nc(this.storage,this.storageKey),y=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(g)}`});l.push(y.toString())}if(r!=null&&r.queryParams){const u=new URLSearchParams(r.queryParams);l.push(u.toString())}return r!=null&&r.skipBrowserRedirect&&l.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${l.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:l,error:u}=n;return u?{data:null,error:u}:await Ut(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(St(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,l;const{data:u,error:g}=n;if(g)return{data:null,error:g};const y=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:b,error:x}=await Ut(this.fetch,"POST",`${this.url}/factors`,{body:y,headers:this.headers,jwt:(r=u==null?void 0:u.session)===null||r===void 0?void 0:r.access_token});return x?{data:null,error:x}:(e.factorType==="totp"&&(!((l=b==null?void 0:b.totp)===null||l===void 0)&&l.qr_code)&&(b.totp.qr_code=`data:image/svg+xml;utf-8,${b.totp.qr_code}`),{data:b,error:null})})}catch(n){if(St(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:l,error:u}=n;if(u)return{data:null,error:u};const{data:g,error:y}=await Ut(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});return y?{data:null,error:y}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),{data:g,error:y})})}catch(n){if(St(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:l,error:u}=n;return u?{data:null,error:u}:await Ut(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(St(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],l=r.filter(g=>g.factor_type==="totp"&&g.status==="verified"),u=r.filter(g=>g.factor_type==="phone"&&g.status==="verified");return{data:{all:r,totp:l,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:l},error:u}=e;if(u)return{data:null,error:u};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=lg(l.access_token);let y=null;g.aal&&(y=g.aal);let b=y;((r=(n=l.user.factors)===null||n===void 0?void 0:n.filter(A=>A.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(b="aal2");const E=g.amr||[];return{data:{currentLevel:y,nextLevel:b,currentAuthenticationMethods:E},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(g=>g.kid===e);if(r||(r=this.jwks.keys.find(g=>g.kid===e),r&&this.jwks_cached_at+oD>Date.now()))return r;const{data:l,error:u}=await Ut(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;if(!l.keys||l.keys.length===0)throw new Zu("JWKS is empty");if(this.jwks=l,this.jwks_cached_at=Date.now(),r=l.keys.find(g=>g.kid===e),!r)throw new Zu("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:O,error:M}=await this.getSession();if(M||!O.session)return{data:null,error:M};r=O.session.access_token}const{header:l,payload:u,signature:g,raw:{header:y,payload:b}}=lg(r);if(ID(u.exp),!l.kid||l.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:O}=await this.getUser(r);if(O)throw O;return{data:{claims:u,header:l,signature:g},error:null}}const x=MD(l.alg),E=await this.fetchJwk(l.kid,n),A=await crypto.subtle.importKey("jwk",E,x,!0,["verify"]);if(!await crypto.subtle.verify(x,A,g,xD(`${y}.${b}`)))throw new Zu("Invalid JWT signature");return{data:{claims:u,header:l,signature:g},error:null}}catch(r){if(St(r))return{data:null,error:r};throw r}}}ff.nextInstanceID=0;const WD=ff;class KD extends WD{constructor(e){super(e)}}var ZD=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(E){try{x(r.next(E))}catch(A){g(A)}}function b(E){try{x(r.throw(E))}catch(A){g(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};class QD{constructor(e,n,r){var l,u,g;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const y=tD(e),b=new URL(y);this.realtimeUrl=new URL("realtime/v1",b),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",b),this.storageUrl=new URL("storage/v1",b),this.functionsUrl=new URL("functions/v1",b);const x=`sb-${b.hostname.split(".")[0]}-auth-token`,E={db:YM,realtime:WM,auth:Object.assign(Object.assign({},XM),{storageKey:x}),global:qM},A=nD(r??{},E);this.storageKey=(l=A.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(u=A.global.headers)!==null&&u!==void 0?u:{},A.accessToken?(this.accessToken=A.accessToken,this.auth=new Proxy({},{get:(N,O)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(O)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((g=A.auth)!==null&&g!==void 0?g:{},this.headers,A.global.fetch),this.fetch=JM(n,this._getAccessToken.bind(this),A.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},A.realtime)),this.rest=new mM(new URL("rest/v1",b).href,{headers:this.headers,schema:A.db.schema,fetch:this.fetch}),A.accessToken||this._listenForAuthEvents()}get functions(){return new iM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new HM(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return ZD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:l,storageKey:u,flowType:g,lock:y,debug:b},x,E){const A={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new KD({url:this.authUrl.href,headers:Object.assign(Object.assign({},A),x),storageKey:u,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:l,flowType:g,lock:y,debug:b,fetch:E,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new OM(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const JD=(t,e,n)=>new QD(t,e,n),Pe=JD("https://gsicrcogciklihyflhtc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdzaWNyY29nY2lrbGloeWZsaHRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2NjEzOTgsImV4cCI6MjA2NTIzNzM5OH0.RXaJeqWW0e35fsRTtn5RkrcPnI1e7kIIJnBoIanawI0");typeof window<"u"&&(window.supabase=Pe);function dE(){const{i18n:t}=Xn(),e=t.language==="th"?"th":"en";function n(){const r=e==="en"?"th":"en";t.changeLanguage(r),localStorage.setItem("lang",r)}return C.jsxs("button",{type:"button",onClick:n,className:"relative w-14 h-8 rounded-full border-2 border-[#6654b3] bg-white flex items-center px-1 transition","aria-label":"Toggle language",style:{minWidth:56},children:[C.jsx("span",{className:`absolute left-1 top-1 w-6 h-6 rounded-full bg-[#6654b3] text-white flex items-center justify-center font-bold text-xs transition-transform duration-300 ${e==="th"?"translate-x-6":"translate-x-0"}`,children:e==="en"?"EN":"TH"}),C.jsxs("span",{className:"w-full flex justify-between text-[#6654b3] font-bold text-xs px-2 select-none",children:[C.jsx("span",{children:"EN"}),C.jsx("span",{children:"TH"})]})]})}function e9(){const{t}=Xn(),e=Ns(),[n,r]=R.useState(""),[l,u]=R.useState(""),[g,y]=R.useState(!1),[b,x]=R.useState("");async function E(A){A.preventDefault(),x(""),y(!0);const N=n.trim().toLowerCase(),O=l.trim(),{error:M}=await Pe.auth.signInWithPassword({email:N,password:O});M?x(M.message):e("/dashboard"),y(!1)}return C.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 relative",children:[C.jsx("div",{className:"absolute top-6 right-6 z-10",children:C.jsx(dE,{})}),C.jsxs("form",{onSubmit:E,className:"w-full max-w-md bg-white p-8 rounded shadow",children:[C.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:t("signIn")}),C.jsxs("label",{className:"block mb-4",children:[C.jsx("span",{className:"text-sm",children:t("email")}),C.jsx("input",{type:"email",className:"mt-1 block w-full border rounded px-3 py-2",placeholder:"you@example.com",value:n,onChange:A=>r(A.target.value),required:!0,autoFocus:!0})]}),C.jsxs("label",{className:"block mb-6",children:[C.jsx("span",{className:"text-sm",children:t("password")}),C.jsx("input",{type:"password",className:"mt-1 block w-full border rounded px-3 py-2",placeholder:"••••••••",value:l,onChange:A=>u(A.target.value),required:!0})]}),C.jsx("button",{type:"submit",disabled:g,className:"w-full bg-[#6654b3] text-white py-2 rounded hover:bg-[#5542a0] disabled:opacity-50 transition",children:t(g?"signingIn":"signIn")}),b&&C.jsx("p",{className:"mt-4 text-red-600 text-center",children:b})]})]})}function t9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const sm=R.forwardRef(t9);function n9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M7.5 3.75A1.5 1.5 0 0 0 6 5.25v13.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5V15a.75.75 0 0 1 1.5 0v3.75a3 3 0 0 1-3 3h-6a3 3 0 0 1-3-3V5.25a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3V9A.75.75 0 0 1 15 9V5.25a1.5 1.5 0 0 0-1.5-1.5h-6Zm10.72 4.72a.75.75 0 0 1 1.06 0l3 3a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 1 1-1.06-1.06l1.72-1.72H9a.75.75 0 0 1 0-1.5h10.94l-1.72-1.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const i9=R.forwardRef(n9);function s9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"}))}const r9=R.forwardRef(s9);function a9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M5.85 3.5a.75.75 0 0 0-1.117-1 9.719 9.719 0 0 0-2.348 4.876.75.75 0 0 0 1.479.248A8.219 8.219 0 0 1 5.85 3.5ZM19.267 2.5a.75.75 0 1 0-1.118 1 8.22 8.22 0 0 1 1.987 4.124.75.75 0 0 0 1.48-.248A9.72 9.72 0 0 0 19.266 2.5Z"}),R.createElement("path",{fillRule:"evenodd",d:"M12 2.25A6.75 6.75 0 0 0 5.25 9v.75a8.217 8.217 0 0 1-2.119 5.52.75.75 0 0 0 .298 1.206c1.544.57 3.16.99 4.831 1.243a3.75 3.75 0 1 0 7.48 0 24.583 24.583 0 0 0 4.83-1.244.75.75 0 0 0 .298-1.205 8.217 8.217 0 0 1-2.118-5.52V9A6.75 6.75 0 0 0 12 2.25ZM9.75 18c0-.034 0-.067.002-.1a25.05 25.05 0 0 0 4.496 0l.002.1a2.25 2.25 0 1 1-4.5 0Z",clipRule:"evenodd"}))}const o9=R.forwardRef(a9);function l9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M5.25 9a6.75 6.75 0 0 1 13.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 0 1-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 1 1-7.48 0 24.585 24.585 0 0 1-4.831-1.244.75.75 0 0 1-.298-1.205A8.217 8.217 0 0 0 5.25 9.75V9Zm4.502 8.9a2.25 2.25 0 1 0 4.496 0 25.057 25.057 0 0 1-4.496 0Z",clipRule:"evenodd"}))}const hE=R.forwardRef(l9);function c9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M11.25 4.533A9.707 9.707 0 0 0 6 3a9.735 9.735 0 0 0-3.25.555.75.75 0 0 0-.5.707v14.25a.75.75 0 0 0 1 .707A8.237 8.237 0 0 1 6 18.75c1.995 0 3.823.707 5.25 1.886V4.533ZM12.75 20.636A8.214 8.214 0 0 1 18 18.75c.966 0 1.89.166 2.75.47a.75.75 0 0 0 1-.708V4.262a.75.75 0 0 0-.5-.707A9.735 9.735 0 0 0 18 3a9.707 9.707 0 0 0-5.25 1.533v16.103Z"}))}const u9=R.forwardRef(c9);function f9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M4.913 2.658c2.075-.27 4.19-.408 6.337-.408 2.147 0 4.262.139 6.337.408 1.922.25 3.291 1.861 3.405 3.727a4.403 4.403 0 0 0-1.032-.211 50.89 50.89 0 0 0-8.42 0c-2.358.196-4.04 2.19-4.04 4.434v4.286a4.47 4.47 0 0 0 2.433 3.984L7.28 21.53A.75.75 0 0 1 6 21v-4.03a48.527 48.527 0 0 1-1.087-.128C2.905 16.58 1.5 14.833 1.5 12.862V6.638c0-1.97 1.405-3.718 3.413-3.979Z"}),R.createElement("path",{d:"M15.75 7.5c-1.376 0-2.739.057-4.086.169C10.124 7.797 9 9.103 9 10.609v4.285c0 1.507 1.128 2.814 2.67 2.94 1.243.102 2.5.157 3.768.165l2.782 2.781a.75.75 0 0 0 1.28-.53v-2.39l.33-.026c1.542-.125 2.67-1.433 2.67-2.94v-4.286c0-1.505-1.125-2.811-2.664-2.94A49.392 49.392 0 0 0 15.75 7.5Z"}))}const d9=R.forwardRef(f9);function h9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"}))}const g9=R.forwardRef(h9);function m9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M7.502 6h7.128A3.375 3.375 0 0 1 18 9.375v9.375a3 3 0 0 0 3-3V6.108c0-1.505-1.125-2.811-2.664-2.94a48.972 48.972 0 0 0-.673-.05A3 3 0 0 0 15 1.5h-1.5a3 3 0 0 0-2.663 1.618c-.225.015-.45.032-.673.05C8.662 3.295 7.554 4.542 7.502 6ZM13.5 3A1.5 1.5 0 0 0 12 4.5h4.5A1.5 1.5 0 0 0 15 3h-1.5Z",clipRule:"evenodd"}),R.createElement("path",{fillRule:"evenodd",d:"M3 9.375C3 8.339 3.84 7.5 4.875 7.5h9.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V9.375Zm9.586 4.594a.75.75 0 0 0-1.172-.938l-2.476 3.096-.908-.907a.75.75 0 0 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.116-.062l3-3.75Z",clipRule:"evenodd"}))}const p9=R.forwardRef(m9);function x9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z",clipRule:"evenodd"}))}const y9=R.forwardRef(x9);function b9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 0 0-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 0 0-2.282.819l-.922 1.597a1.875 1.875 0 0 0 .432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 0 0 0 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 0 0-.432 2.385l.922 1.597a1.875 1.875 0 0 0 2.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 0 0 2.28-.819l.923-1.597a1.875 1.875 0 0 0-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 0 0 0-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 0 0-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 0 0-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 0 0-1.85-1.567h-1.843ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z",clipRule:"evenodd"}))}const w9=R.forwardRef(b9);function v9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M10.464 8.746c.227-.18.497-.311.786-.394v2.795a2.252 2.252 0 0 1-.786-.393c-.394-.313-.546-.681-.546-1.004 0-.323.152-.691.546-1.004ZM12.75 15.662v-2.824c.347.085.664.228.921.421.427.32.579.686.579.991 0 .305-.152.671-.579.991a2.534 2.534 0 0 1-.921.42Z"}),R.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v.816a3.836 3.836 0 0 0-1.72.756c-.712.566-1.112 1.35-1.112 2.178 0 .829.4 1.612 1.113 2.178.502.4 1.102.647 1.719.756v2.978a2.536 2.536 0 0 1-.921-.421l-.879-.66a.75.75 0 0 0-.9 1.2l.879.66c.533.4 1.169.645 1.821.75V18a.75.75 0 0 0 1.5 0v-.81a4.124 4.124 0 0 0 1.821-.749c.745-.559 1.179-1.344 1.179-2.191 0-.847-.434-1.632-1.179-2.191a4.122 4.122 0 0 0-1.821-.75V8.354c.29.082.559.213.786.393l.415.33a.75.75 0 0 0 .933-1.175l-.415-.33a3.836 3.836 0 0 0-1.719-.755V6Z",clipRule:"evenodd"}))}const E9=R.forwardRef(v9);function S9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),R.createElement("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}))}const C9=R.forwardRef(S9);function A9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-2.625 6c-.54 0-.828.419-.936.634a1.96 1.96 0 0 0-.189.866c0 .298.059.605.189.866.108.215.395.634.936.634.54 0 .828-.419.936-.634.13-.26.189-.568.189-.866 0-.298-.059-.605-.189-.866-.108-.215-.395-.634-.936-.634Zm4.314.634c.108-.215.395-.634.936-.634.54 0 .828.419.936.634.13.26.189.568.189.866 0 .298-.059.605-.189.866-.108.215-.395.634-.936.634-.54 0-.828-.419-.936-.634a1.96 1.96 0 0 1-.189-.866c0-.298.059-.605.189-.866Zm2.023 6.828a.75.75 0 1 0-1.06-1.06 3.75 3.75 0 0 1-5.304 0 .75.75 0 0 0-1.06 1.06 5.25 5.25 0 0 0 7.424 0Z",clipRule:"evenodd"}))}const Jb=R.forwardRef(A9);function T9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),R.createElement("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"}))}const _9=R.forwardRef(T9);function N9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const R9=R.forwardRef(N9);function O9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z",clipRule:"evenodd"}))}const I9=R.forwardRef(O9);function M9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 9.375v-4.5ZM4.875 4.5a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 0 1-1.875-1.875v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5ZM6 6.75A.75.75 0 0 1 6.75 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75A.75.75 0 0 1 6 7.5v-.75Zm9.75 0A.75.75 0 0 1 16.5 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 19.125v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875-.75a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM6 16.5a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm9.75 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm-3 3a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Z",clipRule:"evenodd"}))}const ew=R.forwardRef(M9);function D9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))}const L9=R.forwardRef(D9);function k9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M5.25 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM2.25 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM18.75 7.5a.75.75 0 0 0-1.5 0v2.25H15a.75.75 0 0 0 0 1.5h2.25v2.25a.75.75 0 0 0 1.5 0v-2.25H21a.75.75 0 0 0 0-1.5h-2.25V7.5Z"}))}const j9=R.forwardRef(k9);function B9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const gE=R.forwardRef(B9),P9="#6654b3",U9="#f6f6f6",tw=80;function F9(){const{t}=Xn(),e=na(),n=Ns(),r=e.pathname==="/dashboard",[l,u]=R.useState(!1),g=[{to:"/dashboard",icon:C.jsx(_9,{className:"w-8 h-8"}),active:e.pathname==="/dashboard",key:"home"},{to:"/reports",icon:C.jsx(C9,{className:"w-8 h-8"}),active:e.pathname.startsWith("/reports"),key:"reports"},{to:"/messaging",icon:C.jsx(d9,{className:"w-8 h-8"}),active:e.pathname.startsWith("/messaging"),key:"messaging"},{to:"/billing",icon:C.jsx(E9,{className:"w-8 h-8"}),active:e.pathname.startsWith("/billing"),key:"billing"}];return C.jsxs(C.Fragment,{children:[C.jsx("button",{className:"fixed top-3 left-3 z-50 bg-[#6654b3] text-white p-2 rounded-xl shadow-lg md:hidden",onClick:()=>u(!0),"aria-label":"Open menu",style:{display:l?"none":void 0},children:C.jsx(r9,{className:"w-8 h-8"})}),C.jsxs("aside",{style:{width:tw,minWidth:tw,background:P9,color:U9,borderTopRightRadius:"36px",borderBottomRightRadius:"36px",minHeight:"100vh",boxShadow:"2px 0 20px 0 rgba(102,84,179,0.08)",zIndex:100,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"32px"},className:`fixed top-0 left-0 md:flex ${l?"flex":"hidden"} md:!flex`,children:[C.jsx("button",{className:"absolute top-3 right-3 md:hidden bg-white/80 text-[#6654b3] rounded-full p-1 shadow",onClick:()=>u(!1),"aria-label":"Close menu",children:C.jsx(gE,{className:"w-7 h-7"})}),C.jsx("div",{style:{height:56,width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:!r&&C.jsx("button",{className:"w-12 h-12 flex items-center justify-center rounded-xl bg-white/90 hover:bg-[#edeaf8] text-[#6654b3] shadow transition",onClick:()=>n(-1),"aria-label":t("back"),children:C.jsx(sm,{className:"w-7 h-7"})})}),C.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",gap:"28px"},children:g.map(y=>C.jsx(yh,{to:y.to,className:`flex items-center justify-center w-12 h-12 rounded-xl transition
                ${y.active?"bg-white/80 shadow text-[#6654b3]":"text-white hover:bg-white/20"}`,title:t(y.key),onClick:()=>u(!1),children:y.icon},y.key))}),C.jsx("div",{className:"mb-4",children:C.jsx(dE,{})}),C.jsxs("div",{className:"flex flex-col items-center gap-4 mb-3",children:[C.jsx(yh,{to:"/settings",className:`flex items-center justify-center w-12 h-12 rounded-xl transition
              ${e.pathname==="/settings"?"bg-white/80 shadow text-[#6654b3]":"text-white hover:bg-white/20"}`,title:t("settings"),onClick:()=>u(!1),children:C.jsx(w9,{className:"w-8 h-8"})}),C.jsx("button",{type:"button",title:t("logout"),onClick:()=>n("/logout"),className:"w-12 h-12 flex items-center justify-center bg-white/90 hover:bg-pink-100 text-[#ec4899] rounded-xl shadow transition",children:C.jsx(i9,{className:"w-8 h-8"})})]})]}),l&&C.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 md:hidden",onClick:()=>u(!1)})]})}const mE=R.createContext({user:null,setUser:()=>{}});function Uh(){return R.useContext(mE)}function V9({children:t}){const[e,n]=R.useState(null);R.useEffect(()=>{Pe.auth.getSession().then(({data:u})=>{var g;(g=u.session)!=null&&g.user&&r({id:u.session.user.id,email:u.session.user.email??null})});const{data:l}=Pe.auth.onAuthStateChange((u,g)=>{g!=null&&g.user?r({id:g.user.id,email:g.user.email??null}):n(null)});return()=>l.subscription.unsubscribe()},[]);async function r(l){const{data:u,error:g}=await Pe.from("profiles").select("role").eq("id",l.id).single();if(g&&g.code!=="PGRST116"){console.error("loadProfile error",g);return}n({id:l.id,email:l.email,role:(u==null?void 0:u.role)??"staff"})}return C.jsx(mE.Provider,{value:{user:e,setUser:n},children:t})}const z9=80;function H9(){const[t,e]=R.useState(0),[n,r]=R.useState(!1),[l,u]=R.useState(!1),[g,y]=R.useState("/avatar.png"),b=Ns(),{user:x}=Uh(),E=R.useRef(null);R.useEffect(()=>{async function N(){if(!(x!=null&&x.id))return y("/avatar.png");const{data:O,error:M}=await Pe.from("profiles").select("avatar_url").eq("id",x.id).single();M||!(O!=null&&O.avatar_url)?y("/avatar.png"):y(O.avatar_url)}N()},[x]),R.useEffect(()=>{const N=async()=>{const{count:M}=await Pe.from("notifications").select("*",{head:!0,count:"exact"}).eq("read",!1);e(M||0)};N();const O=Pe.channel(`notifications_feed_${Date.now()}`).on("postgres_changes",{event:"*",schema:"public",table:"notifications"},N).subscribe();return()=>{O.unsubscribe()}},[]);async function A(N){var V;const O=(V=N.target.files)==null?void 0:V[0];if(!O||!(x!=null&&x.id))return;u(!0);const M=O.name.split(".").pop(),j=`${x.id}-${Date.now()}.${M}`,{error:U}=await Pe.storage.from("avatars").upload(j,O,{upsert:!0});if(U){alert("Upload failed: "+U.message),u(!1);return}const{data:H}=Pe.storage.from("avatars").getPublicUrl(j),q=H.publicUrl,{error:B}=await Pe.from("profiles").update({avatar_url:q}).eq("id",x.id);if(B){alert("Failed to update profile: "+B.message),u(!1);return}y(q),r(!1),u(!1)}return C.jsxs("div",{className:"min-h-screen bg-[#f6f6f6] flex",children:[C.jsx(F9,{}),C.jsxs("div",{className:"flex flex-col flex-1 min-h-screen",style:{marginLeft:z9,transition:"margin .2s cubic-bezier(.4,0,.2,1)"},children:[C.jsxs("header",{className:"w-full flex items-center px-8 py-3 shadow-sm",style:{background:"#f6f6f6",borderBottom:"1.5px solid #edeaf8",minHeight:"64px",zIndex:10},children:[C.jsx("div",{className:"flex-1 text-center cursor-pointer",onClick:()=>b("/dashboard"),children:C.jsx("span",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight text-[#6654b3] select-none",children:"Wonder Kids"})}),C.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[C.jsxs("button",{onClick:()=>b("/notifications"),className:"relative p-2 rounded-xl hover:bg-[#edeaf8] transition","aria-label":"Notifications",style:{marginLeft:"auto"},children:[C.jsx(hE,{className:"w-7 h-7 text-[#6654b3]"}),t>0&&C.jsx("span",{className:"absolute -top-2 -right-1 bg-[#ec4899] text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-extrabold shadow",children:t})]}),C.jsx("button",{className:"ml-1",style:{background:"none"},onClick:()=>r(!0),"aria-label":"Change profile",children:C.jsx("img",{src:g||"/avatar.png",alt:"Profile",className:"w-10 h-10 rounded-full border-2 border-[#c5bdf4] shadow object-cover hover:scale-105 transition"})})]})]}),n&&C.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:C.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 max-w-sm w-full flex flex-col items-center",children:[C.jsx("img",{src:g,alt:"Profile preview",className:"w-20 h-20 rounded-full mb-4 border-2 border-[#c5bdf4] shadow object-cover"}),C.jsx("input",{ref:E,type:"file",accept:"image/*",className:"mb-4",onChange:A,disabled:l}),C.jsx("button",{onClick:()=>r(!1),className:"px-5 py-2 rounded-lg bg-[#6654b3] text-white font-bold hover:bg-[#5542a0] transition",disabled:l,children:"Close"})]})}),C.jsx("main",{className:"flex-1 p-0 bg-[#f6f6f6] min-h-[calc(100vh-64px)] transition-all duration-200",children:C.jsx("div",{className:"h-full w-full transition-all",children:C.jsx(BO,{})})})]})]})}function $9({children:t}){return t}function G9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const nw=R.forwardRef(G9);function q9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Sh=R.forwardRef(q9);function Y9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const pE=R.forwardRef(Y9);function X9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const W9=R.forwardRef(X9);function K9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const Wm=R.forwardRef(K9);function Z9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const Km=R.forwardRef(Z9);function Q9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const J9=R.forwardRef(Q9);function eL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const xE=R.forwardRef(eL);function tL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const iw=R.forwardRef(tL);function nL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Zm=R.forwardRef(nL);function iL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const yE=R.forwardRef(iL);function sL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const bE=R.forwardRef(sL);function rL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const aL=R.forwardRef(rL);function oL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const lL=R.forwardRef(oL);function cL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const io=R.forwardRef(cL);function wE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(n=wE(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function zo(){for(var t,e,n=0,r="",l=arguments.length;n<l;n++)(t=arguments[n])&&(e=wE(t))&&(r&&(r+=" "),r+=e);return r}var uL=Object.defineProperty,fL=(t,e,n)=>e in t?uL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ug=(t,e,n)=>(fL(t,typeof e!="symbol"?e+"":e,n),n);let dL=class{constructor(){ug(this,"current",this.detect()),ug(this,"handoffState","pending"),ug(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},nl=new dL;function Fh(t){var e,n;return nl.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(n=(e=t.current)==null?void 0:e.ownerDocument)!=null?n:document:null:document}function Vh(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function ia(){let t=[],e={addEventListener(n,r,l,u){return n.addEventListener(r,l,u),e.add(()=>n.removeEventListener(r,l,u))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Vh(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,l){let u=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:l}),this.add(()=>{Object.assign(n.style,{[r]:u})})},group(n){let r=ia();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let l of t.splice(r,1))l()}},dispose(){for(let n of t.splice(0))n()}};return e}function Qm(){let[t]=R.useState(ia);return R.useEffect(()=>()=>t.dispose(),[t]),t}let Oi=(t,e)=>{nl.isServer?R.useEffect(t,e):R.useLayoutEffect(t,e)};function cl(t){let e=R.useRef(t);return Oi(()=>{e.current=t},[t]),e}let fn=function(t){let e=cl(t);return ut.useCallback((...n)=>e.current(...n),[e])},hL=R.createContext(void 0);function gL(){return R.useContext(hL)}function rm(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function Jr(t,e,...n){if(t in e){let l=e[t];return typeof l=="function"?l(...n):l}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(l=>`"${l}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Jr),r}var Ch=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Ch||{}),eo=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(eo||{});function Rs(){let t=pL();return R.useCallback(e=>mL({mergeRefs:t,...e}),[t])}function mL({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:l,visible:u=!0,name:g,mergeRefs:y}){y=y??xL;let b=vE(e,t);if(u)return eh(b,n,r,g,y);let x=l??0;if(x&2){let{static:E=!1,...A}=b;if(E)return eh(A,n,r,g,y)}if(x&1){let{unmount:E=!0,...A}=b;return Jr(E?0:1,{0(){return null},1(){return eh({...A,hidden:!0,style:{display:"none"}},n,r,g,y)}})}return eh(b,n,r,g,y)}function eh(t,e={},n,r,l){let{as:u=n,children:g,refName:y="ref",...b}=fg(t,["unmount","static"]),x=t.ref!==void 0?{[y]:t.ref}:{},E=typeof g=="function"?g(e):g;"className"in b&&b.className&&typeof b.className=="function"&&(b.className=b.className(e)),b["aria-labelledby"]&&b["aria-labelledby"]===b.id&&(b["aria-labelledby"]=void 0);let A={};if(e){let N=!1,O=[];for(let[M,j]of Object.entries(e))typeof j=="boolean"&&(N=!0),j===!0&&O.push(M.replace(/([A-Z])/g,U=>`-${U.toLowerCase()}`));if(N){A["data-headlessui-state"]=O.join(" ");for(let M of O)A[`data-${M}`]=""}}if(u===R.Fragment&&(Object.keys(Po(b)).length>0||Object.keys(Po(A)).length>0))if(!R.isValidElement(E)||Array.isArray(E)&&E.length>1){if(Object.keys(Po(b)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Po(b)).concat(Object.keys(Po(A))).map(N=>`  - ${N}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(N=>`  - ${N}`).join(`
`)].join(`
`))}else{let N=E.props,O=N==null?void 0:N.className,M=typeof O=="function"?(...H)=>rm(O(...H),b.className):rm(O,b.className),j=M?{className:M}:{},U=vE(E.props,Po(fg(b,["ref"])));for(let H in A)H in U&&delete A[H];return R.cloneElement(E,Object.assign({},U,A,x,{ref:l(yL(E),x.ref)},j))}return R.createElement(u,Object.assign({},fg(b,["ref"]),u!==R.Fragment&&x,u!==R.Fragment&&A),E)}function pL(){let t=R.useRef([]),e=R.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function xL(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function vE(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let l in r)l.startsWith("on")&&typeof r[l]=="function"?(n[l]!=null||(n[l]=[]),n[l].push(r[l])):e[l]=r[l];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[l=>{var u;return(u=l==null?void 0:l.preventDefault)==null?void 0:u.call(l)}]);for(let r in n)Object.assign(e,{[r](l,...u){let g=n[r];for(let y of g){if((l instanceof Event||(l==null?void 0:l.nativeEvent)instanceof Event)&&l.defaultPrevented)return;y(l,...u)}}});return e}function Qi(t){var e;return Object.assign(R.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function Po(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function fg(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function yL(t){return ut.version.split(".")[0]>="19"?t.props.ref:t.ref}let bL="span";var Ah=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Ah||{});function wL(t,e){var n;let{features:r=1,...l}=t,u={ref:e,"aria-hidden":(r&2)===2?!0:(n=l["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Rs()({ourProps:u,theirProps:l,slot:{},defaultTag:bL,name:"Hidden"})}let am=Qi(wL);function EE(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function so(t){return EE(t)&&"tagName"in t}function ol(t){return so(t)&&"accessKey"in t}function to(t){return so(t)&&"tabIndex"in t}function vL(t){return so(t)&&"style"in t}function EL(t){return ol(t)&&t.nodeName==="IFRAME"}function SL(t){return ol(t)&&t.nodeName==="INPUT"}let SE=Symbol();function CL(t,e=!0){return Object.assign(t,{[SE]:e})}function vr(...t){let e=R.useRef(t);R.useEffect(()=>{e.current=t},[t]);let n=fn(r=>{for(let l of e.current)l!=null&&(typeof l=="function"?l(r):l.current=r)});return t.every(r=>r==null||(r==null?void 0:r[SE]))?void 0:n}let Jm=R.createContext(null);Jm.displayName="DescriptionContext";function CE(){let t=R.useContext(Jm);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,CE),e}return t}function AL(){let[t,e]=R.useState([]);return[t.length>0?t.join(" "):void 0,R.useMemo(()=>function(n){let r=fn(u=>(e(g=>[...g,u]),()=>e(g=>{let y=g.slice(),b=y.indexOf(u);return b!==-1&&y.splice(b,1),y}))),l=R.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return ut.createElement(Jm.Provider,{value:l},n.children)},[e])]}let TL="p";function _L(t,e){let n=R.useId(),r=gL(),{id:l=`headlessui-description-${n}`,...u}=t,g=CE(),y=vr(e);Oi(()=>g.register(l),[l,g.register]);let b=r||!1,x=R.useMemo(()=>({...g.slot,disabled:b}),[g.slot,b]),E={ref:y,...g.props,id:l};return Rs()({ourProps:E,theirProps:u,slot:x,defaultTag:TL,name:g.name||"Description"})}let NL=Qi(_L),RL=Object.assign(NL,{});var AE=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(AE||{});let OL=R.createContext(()=>{});function IL({value:t,children:e}){return ut.createElement(OL.Provider,{value:t},e)}let TE=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};var ML=Object.defineProperty,DL=(t,e,n)=>e in t?ML(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,LL=(t,e,n)=>(DL(t,e+"",n),n),_E=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Es=(t,e,n)=>(_E(t,e,"read from private field"),n?n.call(t):e.get(t)),dg=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},sw=(t,e,n,r)=>(_E(t,e,"write to private field"),e.set(t,n),n),dr,Vu,zu;let kL=class{constructor(e){dg(this,dr,{}),dg(this,Vu,new TE(()=>new Set)),dg(this,zu,new Set),LL(this,"disposables",ia()),sw(this,dr,e)}dispose(){this.disposables.dispose()}get state(){return Es(this,dr)}subscribe(e,n){let r={selector:e,callback:n,current:e(Es(this,dr))};return Es(this,zu).add(r),this.disposables.add(()=>{Es(this,zu).delete(r)})}on(e,n){return Es(this,Vu).get(e).add(n),this.disposables.add(()=>{Es(this,Vu).get(e).delete(n)})}send(e){let n=this.reduce(Es(this,dr),e);if(n!==Es(this,dr)){sw(this,dr,n);for(let r of Es(this,zu)){let l=r.selector(Es(this,dr));NE(r.current,l)||(r.current=l,r.callback(l))}for(let r of Es(this,Vu).get(e.type))r(Es(this,dr),e)}}};dr=new WeakMap,Vu=new WeakMap,zu=new WeakMap;function NE(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:hg(t[Symbol.iterator](),e[Symbol.iterator]()):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?t.size!==e.size?!1:hg(t.entries(),e.entries()):rw(t)&&rw(e)?hg(Object.entries(t)[Symbol.iterator](),Object.entries(e)[Symbol.iterator]()):!1}function hg(t,e){do{let n=t.next(),r=e.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function rw(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||Object.getPrototypeOf(e)===null}var jL=Object.defineProperty,BL=(t,e,n)=>e in t?jL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aw=(t,e,n)=>(BL(t,typeof e!="symbol"?e+"":e,n),n),PL=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(PL||{});let UL={0(t,e){let n=e.id,r=t.stack,l=t.stack.indexOf(n);if(l!==-1){let u=t.stack.slice();return u.splice(l,1),u.push(n),r=u,{...t,stack:r}}return{...t,stack:[...t.stack,n]}},1(t,e){let n=e.id,r=t.stack.indexOf(n);if(r===-1)return t;let l=t.stack.slice();return l.splice(r,1),{...t,stack:l}}},FL=class RE extends kL{constructor(){super(...arguments),aw(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),aw(this,"selectors",{isTop:(e,n)=>e.stack[e.stack.length-1]===n,inStack:(e,n)=>e.stack.includes(n)})}static new(){return new RE({stack:[]})}reduce(e,n){return Jr(n.type,UL,e,n)}};const OE=new TE(()=>FL.new());var gg={exports:{}},mg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ow;function VL(){if(ow)return mg;ow=1;var t=kh();function e(b,x){return b===x&&(b!==0||1/b===1/x)||b!==b&&x!==x}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,l=t.useRef,u=t.useEffect,g=t.useMemo,y=t.useDebugValue;return mg.useSyncExternalStoreWithSelector=function(b,x,E,A,N){var O=l(null);if(O.current===null){var M={hasValue:!1,value:null};O.current=M}else M=O.current;O=g(function(){function U(G){if(!H){if(H=!0,q=G,G=A(G),N!==void 0&&M.hasValue){var ne=M.value;if(N(ne,G))return B=ne}return B=G}if(ne=B,n(q,G))return ne;var K=A(G);return N!==void 0&&N(ne,K)?(q=G,ne):(q=G,B=K)}var H=!1,q,B,V=E===void 0?null:E;return[function(){return U(x())},V===null?void 0:function(){return U(V())}]},[x,E,A,N]);var j=r(b,O[0],O[1]);return u(function(){M.hasValue=!0,M.value=j},[j]),y(j),j},mg}var lw;function zL(){return lw||(lw=1,gg.exports=VL()),gg.exports}var HL=zL();function IE(t,e,n=NE){return HL.useSyncExternalStoreWithSelector(fn(r=>t.subscribe($L,r)),fn(()=>t.state),fn(()=>t.state),fn(e),n)}function $L(t){return t}function _f(t,e){let n=R.useId(),r=OE.get(e),[l,u]=IE(r,R.useCallback(g=>[r.selectors.isTop(g,n),r.selectors.inStack(g,n)],[r,n]));return Oi(()=>{if(t)return r.actions.push(n),()=>r.actions.pop(n)},[r,t,n]),t?u?l:!0:!1}let om=new Map,Ju=new Map;function cw(t){var e;let n=(e=Ju.get(t))!=null?e:0;return Ju.set(t,n+1),n!==0?()=>uw(t):(om.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>uw(t))}function uw(t){var e;let n=(e=Ju.get(t))!=null?e:1;if(n===1?Ju.delete(t):Ju.set(t,n-1),n!==1)return;let r=om.get(t);r&&(r["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",r["aria-hidden"]),t.inert=r.inert,om.delete(t))}function GL(t,{allowed:e,disallowed:n}={}){let r=_f(t,"inert-others");Oi(()=>{var l,u;if(!r)return;let g=ia();for(let b of(l=n==null?void 0:n())!=null?l:[])b&&g.add(cw(b));let y=(u=e==null?void 0:e())!=null?u:[];for(let b of y){if(!b)continue;let x=Fh(b);if(!x)continue;let E=b.parentElement;for(;E&&E!==x.body;){for(let A of E.children)y.some(N=>A.contains(N))||g.add(cw(A));E=E.parentElement}}return g.dispose},[r,e,n])}function qL(t,e,n){let r=cl(l=>{let u=l.getBoundingClientRect();u.x===0&&u.y===0&&u.width===0&&u.height===0&&n()});R.useEffect(()=>{if(!t)return;let l=e===null?null:ol(e)?e:e.current;if(!l)return;let u=ia();if(typeof ResizeObserver<"u"){let g=new ResizeObserver(()=>r.current(l));g.observe(l),u.add(()=>g.disconnect())}if(typeof IntersectionObserver<"u"){let g=new IntersectionObserver(()=>r.current(l));g.observe(l),u.add(()=>g.disconnect())}return()=>u.dispose()},[e,r,t])}let Th=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),YL=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Yr=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(Yr||{}),lm=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(lm||{}),XL=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(XL||{});function WL(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Th)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function KL(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(YL)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var ME=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(ME||{});function ZL(t,e=0){var n;return t===((n=Fh(t))==null?void 0:n.body)?!1:Jr(e,{0(){return t.matches(Th)},1(){let r=t;for(;r!==null;){if(r.matches(Th))return!0;r=r.parentElement}return!1}})}var QL=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(QL||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Kr(t){t==null||t.focus({preventScroll:!0})}let JL=["textarea","input"].join(",");function ek(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,JL))!=null?n:!1}function tk(t,e=n=>n){return t.slice().sort((n,r)=>{let l=e(n),u=e(r);if(l===null||u===null)return 0;let g=l.compareDocumentPosition(u);return g&Node.DOCUMENT_POSITION_FOLLOWING?-1:g&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function ef(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:l=[]}={}){let u=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,g=Array.isArray(t)?n?tk(t):t:e&64?KL(t):WL(t);l.length>0&&g.length>1&&(g=g.filter(O=>!l.some(M=>M!=null&&"current"in M?(M==null?void 0:M.current)===O:M===O))),r=r??u.activeElement;let y=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),b=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,g.indexOf(r))-1;if(e&4)return Math.max(0,g.indexOf(r))+1;if(e&8)return g.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),x=e&32?{preventScroll:!0}:{},E=0,A=g.length,N;do{if(E>=A||E+A<=0)return 0;let O=b+E;if(e&16)O=(O+A)%A;else{if(O<0)return 3;if(O>=A)return 1}N=g[O],N==null||N.focus(x),E+=y}while(N!==u.activeElement);return e&6&&ek(N)&&N.select(),2}function DE(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function nk(){return/Android/gi.test(window.navigator.userAgent)}function fw(){return DE()||nk()}function th(t,e,n,r){let l=cl(n);R.useEffect(()=>{if(!t)return;function u(g){l.current(g)}return document.addEventListener(e,u,r),()=>document.removeEventListener(e,u,r)},[t,e,r])}function LE(t,e,n,r){let l=cl(n);R.useEffect(()=>{if(!t)return;function u(g){l.current(g)}return window.addEventListener(e,u,r),()=>window.removeEventListener(e,u,r)},[t,e,r])}const dw=30;function ik(t,e,n){let r=cl(n),l=R.useCallback(function(y,b){if(y.defaultPrevented)return;let x=b(y);if(x===null||!x.getRootNode().contains(x)||!x.isConnected)return;let E=function A(N){return typeof N=="function"?A(N()):Array.isArray(N)||N instanceof Set?N:[N]}(e);for(let A of E)if(A!==null&&(A.contains(x)||y.composed&&y.composedPath().includes(A)))return;return!ZL(x,ME.Loose)&&x.tabIndex!==-1&&y.preventDefault(),r.current(y,x)},[r,e]),u=R.useRef(null);th(t,"pointerdown",y=>{var b,x;fw()||(u.current=((x=(b=y.composedPath)==null?void 0:b.call(y))==null?void 0:x[0])||y.target)},!0),th(t,"pointerup",y=>{if(fw()||!u.current)return;let b=u.current;return u.current=null,l(y,()=>b)},!0);let g=R.useRef({x:0,y:0});th(t,"touchstart",y=>{g.current.x=y.touches[0].clientX,g.current.y=y.touches[0].clientY},!0),th(t,"touchend",y=>{let b={x:y.changedTouches[0].clientX,y:y.changedTouches[0].clientY};if(!(Math.abs(b.x-g.current.x)>=dw||Math.abs(b.y-g.current.y)>=dw))return l(y,()=>to(y.target)?y.target:null)},!0),LE(t,"blur",y=>l(y,()=>EL(window.document.activeElement)?window.document.activeElement:null),!0)}function zh(...t){return R.useMemo(()=>Fh(...t),[...t])}function kE(t,e,n,r){let l=cl(n);R.useEffect(()=>{t=t??window;function u(g){l.current(g)}return t.addEventListener(e,u,r),()=>t.removeEventListener(e,u,r)},[t,e,r])}function sk(t){return R.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function rk(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(l){return r.add(l),()=>r.delete(l)},dispatch(l,...u){let g=e[l].call(n,...u);g&&(n=g,r.forEach(y=>y()))}}}function ak(){let t;return{before({doc:e}){var n;let r=e.documentElement,l=(n=e.defaultView)!=null?n:window;t=Math.max(0,l.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,l=Math.max(0,r.clientWidth-r.offsetWidth),u=Math.max(0,t-l);n.style(r,"paddingRight",`${u}px`)}}}function ok(){return DE()?{before({doc:t,d:e,meta:n}){function r(l){return n.containers.flatMap(u=>u()).some(u=>u.contains(l))}e.microTask(()=>{var l;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let y=ia();y.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>y.dispose()))}let u=(l=window.scrollY)!=null?l:window.pageYOffset,g=null;e.addEventListener(t,"click",y=>{if(to(y.target))try{let b=y.target.closest("a");if(!b)return;let{hash:x}=new URL(b.href),E=t.querySelector(x);to(E)&&!r(E)&&(g=E)}catch{}},!0),e.addEventListener(t,"touchstart",y=>{if(to(y.target)&&vL(y.target))if(r(y.target)){let b=y.target;for(;b.parentElement&&r(b.parentElement);)b=b.parentElement;e.style(b,"overscrollBehavior","contain")}else e.style(y.target,"touchAction","none")}),e.addEventListener(t,"touchmove",y=>{if(to(y.target)){if(SL(y.target))return;if(r(y.target)){let b=y.target;for(;b.parentElement&&b.dataset.headlessuiPortal!==""&&!(b.scrollHeight>b.clientHeight||b.scrollWidth>b.clientWidth);)b=b.parentElement;b.dataset.headlessuiPortal===""&&y.preventDefault()}else y.preventDefault()}},{passive:!1}),e.add(()=>{var y;let b=(y=window.scrollY)!=null?y:window.pageYOffset;u!==b&&window.scrollTo(0,u),g&&g.isConnected&&(g.scrollIntoView({block:"nearest"}),g=null)})})}}:{}}function lk(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function ck(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let Ho=rk(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:ia(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:ck(n)},l=[ok(),ak(),lk()];l.forEach(({before:u})=>u==null?void 0:u(r)),l.forEach(({after:u})=>u==null?void 0:u(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Ho.subscribe(()=>{let t=Ho.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",l=n.count!==0;(l&&!r||!l&&r)&&Ho.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Ho.dispatch("TEARDOWN",n)}});function uk(t,e,n=()=>({containers:[]})){let r=sk(Ho),l=e?r.get(e):void 0,u=l?l.count>0:!1;return Oi(()=>{if(!(!e||!t))return Ho.dispatch("PUSH",e,n),()=>Ho.dispatch("POP",e,n)},[t,e]),u}function fk(t,e,n=()=>[document.body]){let r=_f(t,"scroll-lock");uk(r,e,l=>{var u;return{containers:[...(u=l.containers)!=null?u:[],n]}})}function dk(t=0){let[e,n]=R.useState(t),r=R.useCallback(b=>n(b),[e]),l=R.useCallback(b=>n(x=>x|b),[e]),u=R.useCallback(b=>(e&b)===b,[e]),g=R.useCallback(b=>n(x=>x&~b),[n]),y=R.useCallback(b=>n(x=>x^b),[n]);return{flags:e,setFlag:r,addFlag:l,hasFlag:u,removeFlag:g,toggleFlag:y}}var hk={},hw,gw;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((hw=process==null?void 0:hk)==null?void 0:hw.NODE_ENV)==="test"&&typeof((gw=Element==null?void 0:Element.prototype)==null?void 0:gw.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var gk=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(gk||{});function mk(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function pk(t,e,n,r){let[l,u]=R.useState(n),{hasFlag:g,addFlag:y,removeFlag:b}=dk(t&&l?3:0),x=R.useRef(!1),E=R.useRef(!1),A=Qm();return Oi(()=>{var N;if(t){if(n&&u(!0),!e){n&&y(3);return}return(N=r==null?void 0:r.start)==null||N.call(r,n),xk(e,{inFlight:x,prepare(){E.current?E.current=!1:E.current=x.current,x.current=!0,!E.current&&(n?(y(3),b(4)):(y(4),b(2)))},run(){E.current?n?(b(3),y(4)):(b(4),y(3)):n?b(1):y(1)},done(){var O;E.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(x.current=!1,b(7),n||u(!1),(O=r==null?void 0:r.end)==null||O.call(r,n))}})}},[t,n,e,A]),t?[l,{closed:g(1),enter:g(2),leave:g(4),transition:g(2)||g(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function xk(t,{prepare:e,run:n,done:r,inFlight:l}){let u=ia();return bk(t,{prepare:e,inFlight:l}),u.nextFrame(()=>{n(),u.requestAnimationFrame(()=>{u.add(yk(t,r))})}),u.dispose}function yk(t,e){var n,r;let l=ia();if(!t)return l.dispose;let u=!1;l.add(()=>{u=!0});let g=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(y=>y instanceof CSSTransition))!=null?r:[];return g.length===0?(e(),l.dispose):(Promise.allSettled(g.map(y=>y.finished)).then(()=>{u||e()}),l.dispose)}function bk(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function ep(t,e){let n=R.useRef([]),r=fn(t);R.useEffect(()=>{let l=[...n.current];for(let[u,g]of e.entries())if(n.current[u]!==g){let y=r(e,l);return n.current=e,y}},[r,...e])}let Hh=R.createContext(null);Hh.displayName="OpenClosedContext";var Gs=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Gs||{});function $h(){return R.useContext(Hh)}function wk({value:t,children:e}){return ut.createElement(Hh.Provider,{value:t},e)}function vk({children:t}){return ut.createElement(Hh.Provider,{value:null},t)}function Ek(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let Ha=[];Ek(()=>{function t(e){if(!to(e.target)||e.target===document.body||Ha[0]===e.target)return;let n=e.target;n=n.closest(Th),Ha.unshift(n??e.target),Ha=Ha.filter(r=>r!=null&&r.isConnected),Ha.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function jE(t){let e=fn(t),n=R.useRef(!1);R.useEffect(()=>(n.current=!1,()=>{n.current=!0,Vh(()=>{n.current&&e()})}),[e])}function Sk(){let t=typeof document>"u";return"useSyncExternalStore"in J2?(e=>e.useSyncExternalStore)(J2)(()=>()=>{},()=>!1,()=>!t):!1}function Nf(){let t=Sk(),[e,n]=R.useState(nl.isHandoffComplete);return e&&nl.isHandoffComplete===!1&&n(!1),R.useEffect(()=>{e!==!0&&n(!0)},[e]),R.useEffect(()=>nl.handoff(),[]),t?!1:e}let BE=R.createContext(!1);function Ck(){return R.useContext(BE)}function mw(t){return ut.createElement(BE.Provider,{value:t.force},t.children)}function Ak(t){let e=Ck(),n=R.useContext(UE),[r,l]=R.useState(()=>{var u;if(!e&&n!==null)return(u=n.current)!=null?u:null;if(nl.isServer)return null;let g=t==null?void 0:t.getElementById("headlessui-portal-root");if(g)return g;if(t===null)return null;let y=t.createElement("div");return y.setAttribute("id","headlessui-portal-root"),t.body.appendChild(y)});return R.useEffect(()=>{r!==null&&(t!=null&&t.body.contains(r)||t==null||t.body.appendChild(r))},[r,t]),R.useEffect(()=>{e||n!==null&&l(n.current)},[n,l,e]),r}let PE=R.Fragment,Tk=Qi(function(t,e){let{ownerDocument:n=null,...r}=t,l=R.useRef(null),u=vr(CL(O=>{l.current=O}),e),g=zh(l),y=n??g,b=Ak(y),[x]=R.useState(()=>{var O;return nl.isServer?null:(O=y==null?void 0:y.createElement("div"))!=null?O:null}),E=R.useContext(cm),A=Nf();Oi(()=>{!b||!x||b.contains(x)||(x.setAttribute("data-headlessui-portal",""),b.appendChild(x))},[b,x]),Oi(()=>{if(x&&E)return E.register(x)},[E,x]),jE(()=>{var O;!b||!x||(EE(x)&&b.contains(x)&&b.removeChild(x),b.childNodes.length<=0&&((O=b.parentElement)==null||O.removeChild(b)))});let N=Rs();return A?!b||!x?null:bI.createPortal(N({ourProps:{ref:u},theirProps:r,slot:{},defaultTag:PE,name:"Portal"}),x):null});function _k(t,e){let n=vr(e),{enabled:r=!0,ownerDocument:l,...u}=t,g=Rs();return r?ut.createElement(Tk,{...u,ownerDocument:l,ref:n}):g({ourProps:{ref:n},theirProps:u,slot:{},defaultTag:PE,name:"Portal"})}let Nk=R.Fragment,UE=R.createContext(null);function Rk(t,e){let{target:n,...r}=t,l={ref:vr(e)},u=Rs();return ut.createElement(UE.Provider,{value:n},u({ourProps:l,theirProps:r,defaultTag:Nk,name:"Popover.Group"}))}let cm=R.createContext(null);function Ok(){let t=R.useContext(cm),e=R.useRef([]),n=fn(u=>(e.current.push(u),t&&t.register(u),()=>r(u))),r=fn(u=>{let g=e.current.indexOf(u);g!==-1&&e.current.splice(g,1),t&&t.unregister(u)}),l=R.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,R.useMemo(()=>function({children:u}){return ut.createElement(cm.Provider,{value:l},u)},[l])]}let Ik=Qi(_k),FE=Qi(Rk),Mk=Object.assign(Ik,{Group:FE});function Dk(t,e=typeof document<"u"?document.defaultView:null,n){let r=_f(t,"escape");kE(e,"keydown",l=>{r&&(l.defaultPrevented||l.key===AE.Escape&&n(l))})}function Lk(){var t;let[e]=R.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=R.useState((t=e==null?void 0:e.matches)!=null?t:!1);return Oi(()=>{if(!e)return;function l(u){r(u.matches)}return e.addEventListener("change",l),()=>e.removeEventListener("change",l)},[e]),n}function kk({defaultContainers:t=[],portals:e,mainTreeNode:n}={}){let r=zh(n),l=fn(()=>{var u,g;let y=[];for(let b of t)b!==null&&(so(b)?y.push(b):"current"in b&&so(b.current)&&y.push(b.current));if(e!=null&&e.current)for(let b of e.current)y.push(b);for(let b of(u=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?u:[])b!==document.body&&b!==document.head&&so(b)&&b.id!=="headlessui-portal-root"&&(n&&(b.contains(n)||b.contains((g=n==null?void 0:n.getRootNode())==null?void 0:g.host))||y.some(x=>b.contains(x))||y.push(b));return y});return{resolveContainers:l,contains:fn(u=>l().some(g=>g.contains(u)))}}let VE=R.createContext(null);function pw({children:t,node:e}){let[n,r]=R.useState(null),l=zE(e??n);return ut.createElement(VE.Provider,{value:l},t,l===null&&ut.createElement(am,{features:Ah.Hidden,ref:u=>{var g,y;if(u){for(let b of(y=(g=Fh(u))==null?void 0:g.querySelectorAll("html > *, body > *"))!=null?y:[])if(b!==document.body&&b!==document.head&&so(b)&&b!=null&&b.contains(u)){r(b);break}}}}))}function zE(t=null){var e;return(e=R.useContext(VE))!=null?e:t}function tp(){let t=R.useRef(!1);return Oi(()=>(t.current=!0,()=>{t.current=!1}),[]),t}var Hu=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Hu||{});function jk(){let t=R.useRef(0);return LE(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function HE(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)so(n.current)&&e.add(n.current);return e}let Bk="div";var Vo=(t=>(t[t.None=0]="None",t[t.InitialFocus=1]="InitialFocus",t[t.TabLock=2]="TabLock",t[t.FocusLock=4]="FocusLock",t[t.RestoreFocus=8]="RestoreFocus",t[t.AutoFocus=16]="AutoFocus",t))(Vo||{});function Pk(t,e){let n=R.useRef(null),r=vr(n,e),{initialFocus:l,initialFocusFallback:u,containers:g,features:y=15,...b}=t;Nf()||(y=0);let x=zh(n);zk(y,{ownerDocument:x});let E=Hk(y,{ownerDocument:x,container:n,initialFocus:l,initialFocusFallback:u});$k(y,{ownerDocument:x,container:n,containers:g,previousActiveElement:E});let A=jk(),N=fn(q=>{if(!ol(n.current))return;let B=n.current;(V=>V())(()=>{Jr(A.current,{[Hu.Forwards]:()=>{ef(B,Yr.First,{skipElements:[q.relatedTarget,u]})},[Hu.Backwards]:()=>{ef(B,Yr.Last,{skipElements:[q.relatedTarget,u]})}})})}),O=_f(!!(y&2),"focus-trap#tab-lock"),M=Qm(),j=R.useRef(!1),U={ref:r,onKeyDown(q){q.key=="Tab"&&(j.current=!0,M.requestAnimationFrame(()=>{j.current=!1}))},onBlur(q){if(!(y&4))return;let B=HE(g);ol(n.current)&&B.add(n.current);let V=q.relatedTarget;to(V)&&V.dataset.headlessuiFocusGuard!=="true"&&($E(B,V)||(j.current?ef(n.current,Jr(A.current,{[Hu.Forwards]:()=>Yr.Next,[Hu.Backwards]:()=>Yr.Previous})|Yr.WrapAround,{relativeTo:q.target}):to(q.target)&&Kr(q.target)))}},H=Rs();return ut.createElement(ut.Fragment,null,O&&ut.createElement(am,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:N,features:Ah.Focusable}),H({ourProps:U,theirProps:b,defaultTag:Bk,name:"FocusTrap"}),O&&ut.createElement(am,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:N,features:Ah.Focusable}))}let Uk=Qi(Pk),Fk=Object.assign(Uk,{features:Vo});function Vk(t=!0){let e=R.useRef(Ha.slice());return ep(([n],[r])=>{r===!0&&n===!1&&Vh(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=Ha.slice())},[t,Ha,e]),fn(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function zk(t,{ownerDocument:e}){let n=!!(t&8),r=Vk(n);ep(()=>{n||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&Kr(r())},[n]),jE(()=>{n&&Kr(r())})}function Hk(t,{ownerDocument:e,container:n,initialFocus:r,initialFocusFallback:l}){let u=R.useRef(null),g=_f(!!(t&1),"focus-trap#initial-focus"),y=tp();return ep(()=>{if(t===0)return;if(!g){l!=null&&l.current&&Kr(l.current);return}let b=n.current;b&&Vh(()=>{if(!y.current)return;let x=e==null?void 0:e.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===x){u.current=x;return}}else if(b.contains(x)){u.current=x;return}if(r!=null&&r.current)Kr(r.current);else{if(t&16){if(ef(b,Yr.First|Yr.AutoFocus)!==lm.Error)return}else if(ef(b,Yr.First)!==lm.Error)return;if(l!=null&&l.current&&(Kr(l.current),(e==null?void 0:e.activeElement)===l.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}u.current=e==null?void 0:e.activeElement})},[l,g,t]),u}function $k(t,{ownerDocument:e,container:n,containers:r,previousActiveElement:l}){let u=tp(),g=!!(t&4);kE(e==null?void 0:e.defaultView,"focus",y=>{if(!g||!u.current)return;let b=HE(r);ol(n.current)&&b.add(n.current);let x=l.current;if(!x)return;let E=y.target;ol(E)?$E(b,E)?(l.current=E,Kr(E)):(y.preventDefault(),y.stopPropagation(),Kr(x)):Kr(l.current)},!0)}function $E(t,e){for(let n of t)if(n.contains(e))return!0;return!1}function GE(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:YE)!==R.Fragment||ut.Children.count(t.children)===1}let Gh=R.createContext(null);Gh.displayName="TransitionContext";var Gk=(t=>(t.Visible="visible",t.Hidden="hidden",t))(Gk||{});function qk(){let t=R.useContext(Gh);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function Yk(){let t=R.useContext(qh);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let qh=R.createContext(null);qh.displayName="NestingContext";function Yh(t){return"children"in t?Yh(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function qE(t,e){let n=cl(t),r=R.useRef([]),l=tp(),u=Qm(),g=fn((O,M=eo.Hidden)=>{let j=r.current.findIndex(({el:U})=>U===O);j!==-1&&(Jr(M,{[eo.Unmount](){r.current.splice(j,1)},[eo.Hidden](){r.current[j].state="hidden"}}),u.microTask(()=>{var U;!Yh(r)&&l.current&&((U=n.current)==null||U.call(n))}))}),y=fn(O=>{let M=r.current.find(({el:j})=>j===O);return M?M.state!=="visible"&&(M.state="visible"):r.current.push({el:O,state:"visible"}),()=>g(O,eo.Unmount)}),b=R.useRef([]),x=R.useRef(Promise.resolve()),E=R.useRef({enter:[],leave:[]}),A=fn((O,M,j)=>{b.current.splice(0),e&&(e.chains.current[M]=e.chains.current[M].filter(([U])=>U!==O)),e==null||e.chains.current[M].push([O,new Promise(U=>{b.current.push(U)})]),e==null||e.chains.current[M].push([O,new Promise(U=>{Promise.all(E.current[M].map(([H,q])=>q)).then(()=>U())})]),M==="enter"?x.current=x.current.then(()=>e==null?void 0:e.wait.current).then(()=>j(M)):j(M)}),N=fn((O,M,j)=>{Promise.all(E.current[M].splice(0).map(([U,H])=>H)).then(()=>{var U;(U=b.current.shift())==null||U()}).then(()=>j(M))});return R.useMemo(()=>({children:r,register:y,unregister:g,onStart:A,onStop:N,wait:x,chains:E}),[y,g,r,A,N,E,x])}let YE=R.Fragment,XE=Ch.RenderStrategy;function Xk(t,e){var n,r;let{transition:l=!0,beforeEnter:u,afterEnter:g,beforeLeave:y,afterLeave:b,enter:x,enterFrom:E,enterTo:A,entered:N,leave:O,leaveFrom:M,leaveTo:j,...U}=t,[H,q]=R.useState(null),B=R.useRef(null),V=GE(t),G=vr(...V?[B,e,q]:e===null?[]:[e]),ne=(n=U.unmount)==null||n?eo.Unmount:eo.Hidden,{show:K,appear:ae,initial:Q}=qk(),[we,je]=R.useState(K?"visible":"hidden"),_e=Yk(),{register:he,unregister:Ue}=_e;Oi(()=>he(B),[he,B]),Oi(()=>{if(ne===eo.Hidden&&B.current){if(K&&we!=="visible"){je("visible");return}return Jr(we,{hidden:()=>Ue(B),visible:()=>he(B)})}},[we,B,he,Ue,K,ne]);let ie=Nf();Oi(()=>{if(V&&ie&&we==="visible"&&B.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[B,we,ie,V]);let se=Q&&!ae,ce=ae&&K&&Q,Le=R.useRef(!1),Ve=qE(()=>{Le.current||(je("hidden"),Ue(B))},_e),Y=fn(ht=>{Le.current=!0;let Ge=ht?"enter":"leave";Ve.onStart(B,Ge,Mt=>{Mt==="enter"?u==null||u():Mt==="leave"&&(y==null||y())})}),X=fn(ht=>{let Ge=ht?"enter":"leave";Le.current=!1,Ve.onStop(B,Ge,Mt=>{Mt==="enter"?g==null||g():Mt==="leave"&&(b==null||b())}),Ge==="leave"&&!Yh(Ve)&&(je("hidden"),Ue(B))});R.useEffect(()=>{V&&l||(Y(K),X(K))},[K,V,l]);let le=!(!l||!V||!ie||se),[,oe]=pk(le,H,K,{start:Y,end:X}),Ne=Po({ref:G,className:((r=rm(U.className,ce&&x,ce&&E,oe.enter&&x,oe.enter&&oe.closed&&E,oe.enter&&!oe.closed&&A,oe.leave&&O,oe.leave&&!oe.closed&&M,oe.leave&&oe.closed&&j,!oe.transition&&K&&N))==null?void 0:r.trim())||void 0,...mk(oe)}),Ye=0;we==="visible"&&(Ye|=Gs.Open),we==="hidden"&&(Ye|=Gs.Closed),K&&we==="hidden"&&(Ye|=Gs.Opening),!K&&we==="visible"&&(Ye|=Gs.Closing);let be=Rs();return ut.createElement(qh.Provider,{value:Ve},ut.createElement(wk,{value:Ye},be({ourProps:Ne,theirProps:U,defaultTag:YE,features:XE,visible:we==="visible",name:"Transition.Child"})))}function Wk(t,e){let{show:n,appear:r=!1,unmount:l=!0,...u}=t,g=R.useRef(null),y=GE(t),b=vr(...y?[g,e]:e===null?[]:[e]);Nf();let x=$h();if(n===void 0&&x!==null&&(n=(x&Gs.Open)===Gs.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[E,A]=R.useState(n?"visible":"hidden"),N=qE(()=>{n||A("hidden")}),[O,M]=R.useState(!0),j=R.useRef([n]);Oi(()=>{O!==!1&&j.current[j.current.length-1]!==n&&(j.current.push(n),M(!1))},[j,n]);let U=R.useMemo(()=>({show:n,appear:r,initial:O}),[n,r,O]);Oi(()=>{n?A("visible"):!Yh(N)&&g.current!==null&&A("hidden")},[n,N]);let H={unmount:l},q=fn(()=>{var G;O&&M(!1),(G=t.beforeEnter)==null||G.call(t)}),B=fn(()=>{var G;O&&M(!1),(G=t.beforeLeave)==null||G.call(t)}),V=Rs();return ut.createElement(qh.Provider,{value:N},ut.createElement(Gh.Provider,{value:U},V({ourProps:{...H,as:R.Fragment,children:ut.createElement(WE,{ref:b,...H,...u,beforeEnter:q,beforeLeave:B})},theirProps:{},defaultTag:R.Fragment,features:XE,visible:E==="visible",name:"Transition"})))}function Kk(t,e){let n=R.useContext(Gh)!==null,r=$h()!==null;return ut.createElement(ut.Fragment,null,!n&&r?ut.createElement(um,{ref:e,...t}):ut.createElement(WE,{ref:e,...t}))}let um=Qi(Wk),WE=Qi(Xk),np=Qi(Kk),Zk=Object.assign(um,{Child:np,Root:um});var Qk=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Qk||{}),Jk=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(Jk||{});let ej={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},ip=R.createContext(null);ip.displayName="DialogContext";function Xh(t){let e=R.useContext(ip);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Xh),n}return e}function tj(t,e){return Jr(e.type,ej,t,e)}let xw=Qi(function(t,e){let n=R.useId(),{id:r=`headlessui-dialog-${n}`,open:l,onClose:u,initialFocus:g,role:y="dialog",autoFocus:b=!0,__demoMode:x=!1,unmount:E=!1,...A}=t,N=R.useRef(!1);y=function(){return y==="dialog"||y==="alertdialog"?y:(N.current||(N.current=!0,console.warn(`Invalid role [${y}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let O=$h();l===void 0&&O!==null&&(l=(O&Gs.Open)===Gs.Open);let M=R.useRef(null),j=vr(M,e),U=zh(M),H=l?0:1,[q,B]=R.useReducer(tj,{titleId:null,descriptionId:null,panelRef:R.createRef()}),V=fn(()=>u(!1)),G=fn(oe=>B({type:0,id:oe})),ne=Nf()?H===0:!1,[K,ae]=Ok(),Q={get current(){var oe;return(oe=q.panelRef.current)!=null?oe:M.current}},we=zE(),{resolveContainers:je}=kk({mainTreeNode:we,portals:K,defaultContainers:[Q]}),_e=O!==null?(O&Gs.Closing)===Gs.Closing:!1;GL(x||_e?!1:ne,{allowed:fn(()=>{var oe,Ne;return[(Ne=(oe=M.current)==null?void 0:oe.closest("[data-headlessui-portal]"))!=null?Ne:null]}),disallowed:fn(()=>{var oe;return[(oe=we==null?void 0:we.closest("body > *:not(#headlessui-portal-root)"))!=null?oe:null]})});let he=OE.get(null);Oi(()=>{if(ne)return he.actions.push(r),()=>he.actions.pop(r)},[he,r,ne]);let Ue=IE(he,R.useCallback(oe=>he.selectors.isTop(oe,r),[he,r]));ik(Ue,je,oe=>{oe.preventDefault(),V()}),Dk(Ue,U==null?void 0:U.defaultView,oe=>{oe.preventDefault(),oe.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),V()}),fk(x||_e?!1:ne,U,je),qL(ne,M,V);let[ie,se]=AL(),ce=R.useMemo(()=>[{dialogState:H,close:V,setTitleId:G,unmount:E},q],[H,q,V,G,E]),Le=R.useMemo(()=>({open:H===0}),[H]),Ve={ref:j,id:r,role:y,tabIndex:-1,"aria-modal":x?void 0:H===0?!0:void 0,"aria-labelledby":q.titleId,"aria-describedby":ie,unmount:E},Y=!Lk(),X=Vo.None;ne&&!x&&(X|=Vo.RestoreFocus,X|=Vo.TabLock,b&&(X|=Vo.AutoFocus),Y&&(X|=Vo.InitialFocus));let le=Rs();return ut.createElement(vk,null,ut.createElement(mw,{force:!0},ut.createElement(Mk,null,ut.createElement(ip.Provider,{value:ce},ut.createElement(FE,{target:M},ut.createElement(mw,{force:!1},ut.createElement(se,{slot:Le},ut.createElement(ae,null,ut.createElement(Fk,{initialFocus:g,initialFocusFallback:M,containers:je,features:X},ut.createElement(IL,{value:V},le({ourProps:Ve,theirProps:A,slot:Le,defaultTag:nj,features:ij,visible:H===0,name:"Dialog"})))))))))))}),nj="div",ij=Ch.RenderStrategy|Ch.Static;function sj(t,e){let{transition:n=!1,open:r,...l}=t,u=$h(),g=t.hasOwnProperty("open")||u!==null,y=t.hasOwnProperty("onClose");if(!g&&!y)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!g)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!y)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!u&&typeof t.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${t.open}`);if(typeof t.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${t.onClose}`);return(r!==void 0||n)&&!l.static?ut.createElement(pw,null,ut.createElement(Zk,{show:r,transition:n,unmount:l.unmount},ut.createElement(xw,{ref:e,...l}))):ut.createElement(pw,null,ut.createElement(xw,{ref:e,open:r,...l}))}let rj="div";function aj(t,e){let n=R.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:l=!1,...u}=t,[{dialogState:g,unmount:y},b]=Xh("Dialog.Panel"),x=vr(e,b.panelRef),E=R.useMemo(()=>({open:g===0}),[g]),A=fn(U=>{U.stopPropagation()}),N={ref:x,id:r,onClick:A},O=l?np:R.Fragment,M=l?{unmount:y}:{},j=Rs();return ut.createElement(O,{...M},j({ourProps:N,theirProps:u,slot:E,defaultTag:rj,name:"Dialog.Panel"}))}let oj="div";function lj(t,e){let{transition:n=!1,...r}=t,[{dialogState:l,unmount:u}]=Xh("Dialog.Backdrop"),g=R.useMemo(()=>({open:l===0}),[l]),y={ref:e,"aria-hidden":!0},b=n?np:R.Fragment,x=n?{unmount:u}:{},E=Rs();return ut.createElement(b,{...x},E({ourProps:y,theirProps:r,slot:g,defaultTag:oj,name:"Dialog.Backdrop"}))}let cj="h2";function uj(t,e){let n=R.useId(),{id:r=`headlessui-dialog-title-${n}`,...l}=t,[{dialogState:u,setTitleId:g}]=Xh("Dialog.Title"),y=vr(e);R.useEffect(()=>(g(r),()=>g(null)),[r,g]);let b=R.useMemo(()=>({open:u===0}),[u]),x={ref:y,id:r};return Rs()({ourProps:x,theirProps:l,slot:b,defaultTag:cj,name:"Dialog.Title"})}let fj=Qi(sj),dj=Qi(aj);Qi(lj);let hj=Qi(uj),Ki=Object.assign(fj,{Panel:dj,Title:hj,Description:RL});function gj(t,e,n,r){var g,y,b;let l=(g=t==null?void 0:t.course_limits)==null?void 0:g[e];if(!l&&Array.isArray(t==null?void 0:t.purchased_packages)){const x=t.purchased_packages.find(E=>E.course_id===e);l=x==null?void 0:x.hours}return!l&&((b=(y=r==null?void 0:r[e])==null?void 0:y.hour_packages)!=null&&b[0])&&(l=r[e].hour_packages[0].hours),l?n.filter(x=>x.course_id===e).length<l:!1}function mj(t){return t.startsWith("th")?"ไม่สามารถเช็คชื่อเกินจำนวนชั่วโมงที่ซื้อได้":"Cannot check in for more hours than purchased for this course."}const hi="#6654b3",yw="#f6f6f6",pj={new_application:{labelKey:"newApplications",color:hi,text:"#fff"},renewal:{labelKey:"renewals",color:"#e6e1f7",text:hi},edit:{labelKey:"courseChanges",color:"#edeaf7",text:hi},cancel:{labelKey:"cancellations",color:"#fce6e6",text:"#b03535"}};function xj({urls:t,open:e,onClose:n}){const{t:r}=Xn();return C.jsx(Ki,{open:e,onClose:n,className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:C.jsxs(Ki.Panel,{className:"bg-white rounded-2xl p-6 max-w-lg w-full relative",children:[C.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-[#6654b3]",children:C.jsx(io,{className:"w-6 h-6"})}),C.jsx("h2",{className:"text-lg font-bold mb-2",style:{color:hi},children:r("receipts")}),C.jsx("div",{className:"space-y-3",children:t.map(l=>C.jsxs("div",{className:"rounded-lg border border-[#e1def5] bg-[#f6f6f6] px-3 py-2 flex items-center gap-3",children:[C.jsx("span",{className:"flex-1 truncate",style:{color:hi},children:decodeURIComponent(l.split("/").slice(-1)[0])}),C.jsx("button",{className:"hover:underline text-xs font-bold",style:{color:hi},onClick:()=>window.open(l,"_blank"),children:r("open")}),C.jsxs("button",{className:"hover:underline text-xs font-bold flex items-center gap-1",style:{color:hi},onClick:async()=>{const g=await(await fetch(l)).blob(),y=document.createElement("a");y.href=URL.createObjectURL(g),y.download=l.split("/").slice(-1)[0],y.click()},children:[C.jsx(J9,{className:"w-4 h-4 inline"})," ",r("download")]}),C.jsxs("button",{className:"hover:underline text-xs font-bold flex items-center gap-1",style:{color:hi},onClick:()=>{const u=document.createElement("iframe");u.style.position="fixed",u.style.right="0",u.style.top="0",u.style.width="0",u.style.height="0",u.src=l,document.body.appendChild(u),u.onload=()=>{var g;(g=u.contentWindow)==null||g.print(),setTimeout(()=>document.body.removeChild(u),1e3)}},children:[C.jsx(yE,{className:"w-4 h-4 inline"})," ",r("print")]})]},l))})]})})}function yj(t,e){return t.reduce((n,r)=>{const l=e(r);return(n[l]||(n[l]=[])).push(r),n},{})}function bw(){const{t,i18n:e}=Xn(),n=Mc(),[r,l]=R.useState(null),[u,g]=R.useState({}),[y,b]=R.useState({new_application:!1,renewal:!1,edit:!1,cancel:!1}),{data:x=[]}=Yn({queryKey:["courses","names"],queryFn:async()=>{const{data:V}=await Pe.from("courses").select("id,name,hour_packages");return V||[]},staleTime:5*60*1e3}),{data:E=[],isLoading:A}=Yn({queryKey:["reviewHub","pending"],queryFn:async()=>{const[V,G]=await Promise.all([Pe.from("applications").select("*").eq("status","pending").order("created_at",{ascending:!0}),Pe.from("application_changes").select("*").eq("status","pending").order("created_at",{ascending:!0})]);return[...(V.data||[]).map(ne=>({...ne,group:"new_application"})),...(G.data||[]).map(ne=>({...ne,group:ne.type}))]},staleTime:20*1e3}),N=R.useMemo(()=>Array.from(new Set((E||[]).map(V=>V.submitted_by).filter(Boolean))),[E]),{data:O={}}=Yn({queryKey:["submitters",...N],queryFn:async()=>{const V={};return await Promise.all(N.map(async G=>{const{data:ne}=await Pe.from("profiles").select("full_name,email").eq("id",G).single();ne&&(V[G]=ne)})),V},enabled:N.length>0}),M=R.useMemo(()=>Object.fromEntries(x.map(V=>[V.id,V.name])),[x]),j=R.useMemo(()=>yj(E,V=>V.group),[E]);function U(V,G){g(ne=>{var K;return{...ne,[V]:new Set([...Array.from(ne[V]||[]),...(K=ne[V])!=null&&K.has(G)?[]:[G]].filter(ae=>{var Q;return ae!==G||!((Q=ne[V])!=null&&Q.has(G))}))}})}function H(V){var ne;const G=new Set(((ne=j[V])==null?void 0:ne.map(K=>K.id))||[]);g(K=>{var ae;return{...K,[V]:((ae=K[V])==null?void 0:ae.size)===G.size?new Set:G}})}async function q(V){var Q,we,je,_e,he,Ue;const G=Array.from(u[V]||[]);if(!G.length)return;const ne=(j[V]||[]).filter(ie=>G.includes(ie.id)),K=Object.fromEntries(x.map(ie=>[ie.id,ie]));for(const ie of ne){let se=ie,ce=[];if(ie.group==="new_application")ce=Object.keys(ie.course_limits||{});else if(ie.type==="renewal")ce=Object.keys(((Q=ie.changes)==null?void 0:Q.course_limits)||{}),se={...ie,course_limits:((we=ie.changes)==null?void 0:we.course_limits)||{},purchased_packages:((je=ie.changes)==null?void 0:je.purchased_packages)||[]};else if(ie.type==="edit")ce=Object.keys(((_e=ie.changes)==null?void 0:_e.course_changes)||{}),se={...ie,course_limits:((he=ie.changes)==null?void 0:he.course_limits)||{},purchased_packages:((Ue=ie.changes)==null?void 0:Ue.purchased_packages)||[]};else continue;for(const Le of ce)if(!gj(se,Le,[],K)){alert(mj(e.language));return}}if(!window.confirm(t("approveConfirm",{count:G.length})))return;let ae;V==="new_application"?ae=Pe.from("applications").update({status:"approved"}).in("id",G):ae=Pe.from("application_changes").update({status:"approved",reviewed_at:new Date().toISOString()}).in("id",G),await ae,n.invalidateQueries({queryKey:["reviewHub","pending"]}),g(ie=>({...ie,[V]:new Set}))}async function B(V){const G=Array.from(u[V]||[]);G.length&&window.confirm(t("rejectConfirm",{count:G.length}))&&(V==="new_application"?await Pe.from("applications").delete().in("id",G):await Pe.from("application_changes").delete().in("id",G),n.invalidateQueries({queryKey:["reviewHub","pending"]}),g(ne=>({...ne,[V]:new Set})))}return A?C.jsxs("div",{className:"p-10 flex items-center justify-center",style:{background:yw,minHeight:"100vh"},children:[C.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full",style:{background:hi,marginRight:8}}),C.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full",style:{background:"#e6e1f7",marginRight:8}}),C.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full",style:{background:"#edeaf7"}})]}):C.jsxs("div",{className:"min-h-screen flex flex-col items-center py-8 px-2 sm:px-6 font-sans",style:{background:yw},children:[C.jsx("div",{className:"w-full max-w-5xl space-y-8",children:Object.entries(pj).map(([V,G])=>{var ne,K,ae,Q,we,je,_e;return C.jsxs("div",{className:"mb-4 border rounded-2xl shadow-sm",style:{borderColor:"#e1def5",background:"#fff"},children:[C.jsx("button",{className:"w-full flex items-center justify-between px-6 py-4 text-lg font-bold focus:outline-none rounded-t-2xl transition-all",style:{background:G.color,color:G.text,borderTopLeftRadius:16,borderTopRightRadius:16},onClick:()=>b(he=>({...he,[V]:!he[V]})),children:C.jsxs("div",{className:"flex items-center gap-2",children:[y[V]?C.jsx(Wm,{className:"w-6 h-6"}):C.jsx(Km,{className:"w-6 h-6"}),t(G.labelKey),C.jsx("span",{className:"ml-2 rounded-full px-3 py-1 text-base font-bold border",style:{background:"#fff",color:hi,borderColor:"#e1def5"},children:((ne=j[V])==null?void 0:ne.length)||0})]})}),y[V]&&C.jsxs("div",{className:"px-4 pb-4 pt-2",children:[C.jsxs("div",{className:"flex flex-wrap gap-2 items-center my-3",children:[C.jsx("button",{className:"rounded-full px-3 py-1 border text-xs font-bold transition",style:{borderColor:hi,color:hi,background:"#f6f6f6"},onClick:()=>H(V),children:((K=u[V])==null?void 0:K.size)===(((ae=j[V])==null?void 0:ae.length)||0)?t("unselectAll"):t("selectAll")}),C.jsxs("button",{className:"px-3 py-1 rounded-full font-bold text-xs transition",style:{background:hi,color:"#fff",opacity:(Q=u[V])!=null&&Q.size?1:.5},disabled:!((we=u[V])!=null&&we.size),onClick:()=>q(V),children:[C.jsx(W9,{className:"w-4 h-4 inline"})," ",t("approve")]}),C.jsxs("button",{className:"px-3 py-1 rounded-full font-bold text-xs transition",style:{background:"#ec4899",color:"#fff",opacity:(je=u[V])!=null&&je.size?1:.5},disabled:!((_e=u[V])!=null&&_e.size),onClick:()=>B(V),children:[C.jsx(lL,{className:"w-4 h-4 inline"})," ",t("reject")]})]}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(j[V]||[]).map(he=>{var le,oe,Ne,Ye,be,ht,Ge,Mt,xn,Ae;const Ue=he.group==="new_application"?he.payment_receipt_urls||[]:((le=he.changes)==null?void 0:le.receipts)||he.receipt_urls||[],ie=he.nickname||he.nick_name||he.nick||"",se=he.first_name||he.first||"",ce=he.last_name||he.last||"",Le=he.submitted_by?((oe=O[he.submitted_by])==null?void 0:oe.full_name)||he.submitted_by:"-";let Ve=[],Y=[],X=0;return he.group==="new_application"?(Ve=Object.entries(he.courses||{}).map(([Fe,Be])=>{var nt;return{cid:Fe,days:Be,hours:((nt=he.course_limits)==null?void 0:nt[Fe])||0}}),Y=he.purchased_packages||[],X=he.total_price||0):(he.type==="edit"||he.type==="renewal"||he.type==="cancel")&&(Ve=[],he.type==="edit"?Ve=Object.entries(((Ne=he.changes)==null?void 0:Ne.course_changes)||{}).map(([Fe,Be])=>{var nt;return{cid:Fe,days:Be,hours:((nt=he.changes.course_limits)==null?void 0:nt[Fe])||0}}):he.type==="renewal"?Ve=Object.entries(((Ye=he.changes)==null?void 0:Ye.course_limits)||{}).map(([Fe,Be])=>({cid:Fe,days:null,hours:Be})):he.type==="cancel"&&(Ve=Object.keys(((be=he.changes)==null?void 0:be.cancel_course_ids)||{}).map(Fe=>({cid:Fe,days:null,hours:0}))),Y=((ht=he.changes)==null?void 0:ht.purchased_packages)||[],X=((Ge=he.changes)==null?void 0:Ge.total_price)||0),C.jsxs("div",{className:zo("rounded-2xl border p-4 space-y-2 flex flex-col relative transition",((Mt=u[V])==null?void 0:Mt.has(he.id))&&"ring-2"),style:{borderColor:"#edeaf7",background:"#fff",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.03)",...(xn=u[V])!=null&&xn.has(he.id)?{boxShadow:`0 0 0 3px ${hi}40`}:{}},children:[C.jsx("label",{className:"absolute top-3 left-3",children:C.jsx("input",{type:"checkbox",checked:(Ae=u[V])==null?void 0:Ae.has(he.id),onChange:()=>U(V,he.id),className:"accent-[#6654b3] w-5 h-5"})}),C.jsxs("div",{className:"pl-8",children:[C.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[C.jsx(aL,{className:"w-8 h-8",style:{color:hi}}),C.jsxs("div",{children:[C.jsxs("div",{className:"font-bold text-base",style:{color:hi},children:[ie?`"${ie}"`:""," ",se," ",ce]}),C.jsxs("div",{className:"text-xs text-gray-500",children:[C.jsxs("span",{children:[t("submittedBy"),": "]}),C.jsx("span",{children:Le})]}),C.jsxs("div",{className:"text-xs text-gray-500",children:[he.parent_phone&&C.jsxs(C.Fragment,{children:[t("phone"),": ",he.parent_phone," "]}),he.parent_line_id&&C.jsxs(C.Fragment,{children:[t("lineId"),": ",he.parent_line_id," "]}),he.dob&&C.jsxs(C.Fragment,{children:[t("dob"),": ",new Date(he.dob).toLocaleDateString("en-GB")]})]})]})]}),C.jsxs("div",{className:"text-xs text-gray-600",children:[t("submittedAt"),": ",new Date(he.created_at).toLocaleString("en-GB")]}),C.jsxs("div",{className:"my-2",children:[Ve.map(Fe=>C.jsxs("div",{className:"mb-1",children:[C.jsxs("div",{className:"font-semibold",style:{color:hi},children:[t("course"),": ",M[Fe.cid]||Fe.cid]}),Fe.days&&Object.entries(Fe.days).map(([Be,nt])=>C.jsxs("div",{className:"ml-2 text-sm",children:[C.jsxs("span",{className:"font-semibold",children:[Be,":"]})," ",(Array.isArray(nt)?nt:[]).join(", ")]},Be)),typeof Fe.hours=="number"&&C.jsxs("div",{className:"ml-2 text-sm",children:[C.jsxs("span",{className:"font-semibold",children:[t("hours"),":"]})," ",Fe.hours]})]},Fe.cid)),Y.length>0&&C.jsxs("div",{className:"mb-2",children:[C.jsx("div",{className:"font-bold text-[#6654b3] mb-1",children:t("purchasedPackages")}),C.jsx("ul",{children:Y.map(Fe=>{var Be;return C.jsxs("li",{children:[M[Fe.course_id]||Fe.course_name,": ",Fe.hours," ",t("hoursLabel",{count:Fe.hours})," – ",(Be=Fe.price)==null?void 0:Be.toLocaleString()," ",t("baht")]},Fe.course_id+Fe.hours)})}),C.jsxs("div",{className:"mt-1 font-semibold",children:[t("totalPrice"),": ",X==null?void 0:X.toLocaleString()," ",t("baht")]})]})]}),Ue&&Ue.length>0&&C.jsx("div",{className:"mb-2"}),Ue&&Ue.length>0&&C.jsx("button",{className:"rounded-full px-3 py-1 text-xs font-bold",style:{background:"#e6e1f7",color:hi},onClick:()=>l(Ue),children:t("viewReceipts",{count:Ue.length})}),Array.isArray(Ue)&&Ue.length===0&&C.jsx("div",{className:"text-gray-300 text-xs",children:t("noReceipt")})]})]},he.id)})})]})]},V)})}),r&&C.jsx(xj,{urls:r,open:!!r,onClose:()=>l(null)}),C.jsx("style",{children:`
        @keyframes fadein { from { opacity:0; transform: scale(0.98);} to { opacity:1; transform: scale(1);} }
      `})]})}const sp=R.createContext({});function rp(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const ap=typeof window<"u",KE=ap?R.useLayoutEffect:R.useEffect,Wh=R.createContext(null);function op(t,e){t.indexOf(e)===-1&&t.push(e)}function lp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ea=(t,e,n)=>n>e?e:n<t?t:n;let cp=()=>{};const ta={},ZE=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function QE(t){return typeof t=="object"&&t!==null}const JE=t=>/^0[^.\s]+$/u.test(t);function up(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ts=t=>t,bj=(t,e)=>n=>e(t(n)),Rf=(...t)=>t.reduce(bj),df=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class fp{constructor(){this.subscriptions=[]}add(e){return op(this.subscriptions,e),()=>lp(this.subscriptions,e)}notify(e,n,r){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](e,n,r);else for(let u=0;u<l;u++){const g=this.subscriptions[u];g&&g(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const yr=t=>t*1e3,br=t=>t/1e3;function eS(t,e){return e?t*(1e3/e):0}const tS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,wj=1e-7,vj=12;function Ej(t,e,n,r,l){let u,g,y=0;do g=e+(n-e)/2,u=tS(g,r,l)-t,u>0?n=g:e=g;while(Math.abs(u)>wj&&++y<vj);return g}function Of(t,e,n,r){if(t===e&&n===r)return Ts;const l=u=>Ej(u,0,1,t,n);return u=>u===0||u===1?u:tS(l(u),e,r)}const nS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,iS=t=>e=>1-t(1-e),sS=Of(.33,1.53,.69,.99),dp=iS(sS),rS=nS(dp),aS=t=>(t*=2)<1?.5*dp(t):.5*(2-Math.pow(2,-10*(t-1))),hp=t=>1-Math.sin(Math.acos(t)),oS=iS(hp),lS=nS(hp),Sj=Of(.42,0,1,1),Cj=Of(0,0,.58,1),cS=Of(.42,0,.58,1),Aj=t=>Array.isArray(t)&&typeof t[0]!="number",uS=t=>Array.isArray(t)&&typeof t[0]=="number",Tj={linear:Ts,easeIn:Sj,easeInOut:cS,easeOut:Cj,circIn:hp,circInOut:lS,circOut:oS,backIn:dp,backInOut:rS,backOut:sS,anticipate:aS},_j=t=>typeof t=="string",ww=t=>{if(uS(t)){cp(t.length===4);const[e,n,r,l]=t;return Of(e,n,r,l)}else if(_j(t))return Tj[t];return t},nh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],vw={value:null};function Nj(t,e){let n=new Set,r=new Set,l=!1,u=!1;const g=new WeakSet;let y={delta:0,timestamp:0,isProcessing:!1},b=0;function x(A){g.has(A)&&(E.schedule(A),t()),b++,A(y)}const E={schedule:(A,N=!1,O=!1)=>{const j=O&&l?n:r;return N&&g.add(A),j.has(A)||j.add(A),A},cancel:A=>{r.delete(A),g.delete(A)},process:A=>{if(y=A,l){u=!0;return}l=!0,[n,r]=[r,n],n.forEach(x),e&&vw.value&&vw.value.frameloop[e].push(b),b=0,n.clear(),l=!1,u&&(u=!1,E.process(A))}};return E}const Rj=40;function fS(t,e){let n=!1,r=!0;const l={delta:0,timestamp:0,isProcessing:!1},u=()=>n=!0,g=nh.reduce((B,V)=>(B[V]=Nj(u,e?V:void 0),B),{}),{setup:y,read:b,resolveKeyframes:x,preUpdate:E,update:A,preRender:N,render:O,postRender:M}=g,j=()=>{const B=ta.useManualTiming?l.timestamp:performance.now();n=!1,ta.useManualTiming||(l.delta=r?1e3/60:Math.max(Math.min(B-l.timestamp,Rj),1)),l.timestamp=B,l.isProcessing=!0,y.process(l),b.process(l),x.process(l),E.process(l),A.process(l),N.process(l),O.process(l),M.process(l),l.isProcessing=!1,n&&e&&(r=!1,t(j))},U=()=>{n=!0,r=!0,l.isProcessing||t(j)};return{schedule:nh.reduce((B,V)=>{const G=g[V];return B[V]=(ne,K=!1,ae=!1)=>(n||U(),G.schedule(ne,K,ae)),B},{}),cancel:B=>{for(let V=0;V<nh.length;V++)g[nh[V]].cancel(B)},state:l,steps:g}}const{schedule:vn,cancel:ro,state:yi,steps:pg}=fS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ts,!0);let uh;function Oj(){uh=void 0}const Zi={now:()=>(uh===void 0&&Zi.set(yi.isProcessing||ta.useManualTiming?yi.timestamp:performance.now()),uh),set:t=>{uh=t,queueMicrotask(Oj)}},dS=t=>e=>typeof e=="string"&&e.startsWith(t),gp=dS("--"),Ij=dS("var(--"),mp=t=>Ij(t)?Mj.test(t.split("/*")[0].trim()):!1,Mj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Lc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},hf={...Lc,transform:t=>ea(0,1,t)},ih={...Lc,default:1},tf=t=>Math.round(t*1e5)/1e5,pp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Dj(t){return t==null}const Lj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xp=(t,e)=>n=>!!(typeof n=="string"&&Lj.test(n)&&n.startsWith(t)||e&&!Dj(n)&&Object.prototype.hasOwnProperty.call(n,e)),hS=(t,e,n)=>r=>{if(typeof r!="string")return r;const[l,u,g,y]=r.match(pp);return{[t]:parseFloat(l),[e]:parseFloat(u),[n]:parseFloat(g),alpha:y!==void 0?parseFloat(y):1}},kj=t=>ea(0,255,t),xg={...Lc,transform:t=>Math.round(kj(t))},$o={test:xp("rgb","red"),parse:hS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+xg.transform(t)+", "+xg.transform(e)+", "+xg.transform(n)+", "+tf(hf.transform(r))+")"};function jj(t){let e="",n="",r="",l="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),l=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),l=t.substring(4,5),e+=e,n+=n,r+=r,l+=l),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:l?parseInt(l,16)/255:1}}const fm={test:xp("#"),parse:jj,transform:$o.transform},If=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Fa=If("deg"),wr=If("%"),dt=If("px"),Bj=If("vh"),Pj=If("vw"),Ew={...wr,parse:t=>wr.parse(t)/100,transform:t=>wr.transform(t*100)},oc={test:xp("hsl","hue"),parse:hS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+wr.transform(tf(e))+", "+wr.transform(tf(n))+", "+tf(hf.transform(r))+")"},qn={test:t=>$o.test(t)||fm.test(t)||oc.test(t),parse:t=>$o.test(t)?$o.parse(t):oc.test(t)?oc.parse(t):fm.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?$o.transform(t):oc.transform(t),getAnimatableNone:t=>{const e=qn.parse(t);return e.alpha=0,qn.transform(e)}},Uj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Fj(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(pp))==null?void 0:e.length)||0)+(((n=t.match(Uj))==null?void 0:n.length)||0)>0}const gS="number",mS="color",Vj="var",zj="var(",Sw="${}",Hj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gf(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},l=[];let u=0;const y=e.replace(Hj,b=>(qn.test(b)?(r.color.push(u),l.push(mS),n.push(qn.parse(b))):b.startsWith(zj)?(r.var.push(u),l.push(Vj),n.push(b)):(r.number.push(u),l.push(gS),n.push(parseFloat(b))),++u,Sw)).split(Sw);return{values:n,split:y,indexes:r,types:l}}function pS(t){return gf(t).values}function xS(t){const{split:e,types:n}=gf(t),r=e.length;return l=>{let u="";for(let g=0;g<r;g++)if(u+=e[g],l[g]!==void 0){const y=n[g];y===gS?u+=tf(l[g]):y===mS?u+=qn.transform(l[g]):u+=l[g]}return u}}const $j=t=>typeof t=="number"?0:qn.test(t)?qn.getAnimatableNone(t):t;function Gj(t){const e=pS(t);return xS(t)(e.map($j))}const ao={test:Fj,parse:pS,createTransformer:xS,getAnimatableNone:Gj};function yg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function qj({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let l=0,u=0,g=0;if(!e)l=u=g=n;else{const y=n<.5?n*(1+e):n+e-n*e,b=2*n-y;l=yg(b,y,t+1/3),u=yg(b,y,t),g=yg(b,y,t-1/3)}return{red:Math.round(l*255),green:Math.round(u*255),blue:Math.round(g*255),alpha:r}}function _h(t,e){return n=>n>0?e:t}const An=(t,e,n)=>t+(e-t)*n,bg=(t,e,n)=>{const r=t*t,l=n*(e*e-r)+r;return l<0?0:Math.sqrt(l)},Yj=[fm,$o,oc],Xj=t=>Yj.find(e=>e.test(t));function Cw(t){const e=Xj(t);if(!e)return!1;let n=e.parse(t);return e===oc&&(n=qj(n)),n}const Aw=(t,e)=>{const n=Cw(t),r=Cw(e);if(!n||!r)return _h(t,e);const l={...n};return u=>(l.red=bg(n.red,r.red,u),l.green=bg(n.green,r.green,u),l.blue=bg(n.blue,r.blue,u),l.alpha=An(n.alpha,r.alpha,u),$o.transform(l))},dm=new Set(["none","hidden"]);function Wj(t,e){return dm.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Kj(t,e){return n=>An(t,e,n)}function yp(t){return typeof t=="number"?Kj:typeof t=="string"?mp(t)?_h:qn.test(t)?Aw:Jj:Array.isArray(t)?yS:typeof t=="object"?qn.test(t)?Aw:Zj:_h}function yS(t,e){const n=[...t],r=n.length,l=t.map((u,g)=>yp(u)(u,e[g]));return u=>{for(let g=0;g<r;g++)n[g]=l[g](u);return n}}function Zj(t,e){const n={...t,...e},r={};for(const l in n)t[l]!==void 0&&e[l]!==void 0&&(r[l]=yp(t[l])(t[l],e[l]));return l=>{for(const u in r)n[u]=r[u](l);return n}}function Qj(t,e){const n=[],r={color:0,var:0,number:0};for(let l=0;l<e.values.length;l++){const u=e.types[l],g=t.indexes[u][r[u]],y=t.values[g]??0;n[l]=y,r[u]++}return n}const Jj=(t,e)=>{const n=ao.createTransformer(e),r=gf(t),l=gf(e);return r.indexes.var.length===l.indexes.var.length&&r.indexes.color.length===l.indexes.color.length&&r.indexes.number.length>=l.indexes.number.length?dm.has(t)&&!l.values.length||dm.has(e)&&!r.values.length?Wj(t,e):Rf(yS(Qj(r,l),l.values),n):_h(t,e)};function bS(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?An(t,e,n):yp(t)(t,e)}const eB=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>vn.update(e,n),stop:()=>ro(e),now:()=>yi.isProcessing?yi.timestamp:Zi.now()}},wS=(t,e,n=10)=>{let r="";const l=Math.max(Math.round(e/n),2);for(let u=0;u<l;u++)r+=Math.round(t(u/(l-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Nh=2e4;function bp(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Nh;)e+=n,r=t.next(e);return e>=Nh?1/0:e}function tB(t,e=100,n){const r=n({...t,keyframes:[0,e]}),l=Math.min(bp(r),Nh);return{type:"keyframes",ease:u=>r.next(l*u).value/e,duration:br(l)}}const nB=5;function vS(t,e,n){const r=Math.max(e-nB,0);return eS(n-t(r),e-r)}const Dn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},wg=.001;function iB({duration:t=Dn.duration,bounce:e=Dn.bounce,velocity:n=Dn.velocity,mass:r=Dn.mass}){let l,u,g=1-e;g=ea(Dn.minDamping,Dn.maxDamping,g),t=ea(Dn.minDuration,Dn.maxDuration,br(t)),g<1?(l=x=>{const E=x*g,A=E*t,N=E-n,O=hm(x,g),M=Math.exp(-A);return wg-N/O*M},u=x=>{const A=x*g*t,N=A*n+n,O=Math.pow(g,2)*Math.pow(x,2)*t,M=Math.exp(-A),j=hm(Math.pow(x,2),g);return(-l(x)+wg>0?-1:1)*((N-O)*M)/j}):(l=x=>{const E=Math.exp(-x*t),A=(x-n)*t+1;return-wg+E*A},u=x=>{const E=Math.exp(-x*t),A=(n-x)*(t*t);return E*A});const y=5/t,b=rB(l,u,y);if(t=yr(t),isNaN(b))return{stiffness:Dn.stiffness,damping:Dn.damping,duration:t};{const x=Math.pow(b,2)*r;return{stiffness:x,damping:g*2*Math.sqrt(r*x),duration:t}}}const sB=12;function rB(t,e,n){let r=n;for(let l=1;l<sB;l++)r=r-t(r)/e(r);return r}function hm(t,e){return t*Math.sqrt(1-e*e)}const aB=["duration","bounce"],oB=["stiffness","damping","mass"];function Tw(t,e){return e.some(n=>t[n]!==void 0)}function lB(t){let e={velocity:Dn.velocity,stiffness:Dn.stiffness,damping:Dn.damping,mass:Dn.mass,isResolvedFromDuration:!1,...t};if(!Tw(t,oB)&&Tw(t,aB))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),l=r*r,u=2*ea(.05,1,1-(t.bounce||0))*Math.sqrt(l);e={...e,mass:Dn.mass,stiffness:l,damping:u}}else{const n=iB(t);e={...e,...n,mass:Dn.mass},e.isResolvedFromDuration=!0}return e}function Rh(t=Dn.visualDuration,e=Dn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:l}=n;const u=n.keyframes[0],g=n.keyframes[n.keyframes.length-1],y={done:!1,value:u},{stiffness:b,damping:x,mass:E,duration:A,velocity:N,isResolvedFromDuration:O}=lB({...n,velocity:-br(n.velocity||0)}),M=N||0,j=x/(2*Math.sqrt(b*E)),U=g-u,H=br(Math.sqrt(b/E)),q=Math.abs(U)<5;r||(r=q?Dn.restSpeed.granular:Dn.restSpeed.default),l||(l=q?Dn.restDelta.granular:Dn.restDelta.default);let B;if(j<1){const G=hm(H,j);B=ne=>{const K=Math.exp(-j*H*ne);return g-K*((M+j*H*U)/G*Math.sin(G*ne)+U*Math.cos(G*ne))}}else if(j===1)B=G=>g-Math.exp(-H*G)*(U+(M+H*U)*G);else{const G=H*Math.sqrt(j*j-1);B=ne=>{const K=Math.exp(-j*H*ne),ae=Math.min(G*ne,300);return g-K*((M+j*H*U)*Math.sinh(ae)+G*U*Math.cosh(ae))/G}}const V={calculatedDuration:O&&A||null,next:G=>{const ne=B(G);if(O)y.done=G>=A;else{let K=G===0?M:0;j<1&&(K=G===0?yr(M):vS(B,G,ne));const ae=Math.abs(K)<=r,Q=Math.abs(g-ne)<=l;y.done=ae&&Q}return y.value=y.done?g:ne,y},toString:()=>{const G=Math.min(bp(V),Nh),ne=wS(K=>V.next(G*K).value,G,30);return G+"ms "+ne},toTransition:()=>{}};return V}Rh.applyToOptions=t=>{const e=tB(t,100,Rh);return t.ease=e.ease,t.duration=yr(e.duration),t.type="keyframes",t};function gm({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:l=10,bounceStiffness:u=500,modifyTarget:g,min:y,max:b,restDelta:x=.5,restSpeed:E}){const A=t[0],N={done:!1,value:A},O=ae=>y!==void 0&&ae<y||b!==void 0&&ae>b,M=ae=>y===void 0?b:b===void 0||Math.abs(y-ae)<Math.abs(b-ae)?y:b;let j=n*e;const U=A+j,H=g===void 0?U:g(U);H!==U&&(j=H-A);const q=ae=>-j*Math.exp(-ae/r),B=ae=>H+q(ae),V=ae=>{const Q=q(ae),we=B(ae);N.done=Math.abs(Q)<=x,N.value=N.done?H:we};let G,ne;const K=ae=>{O(N.value)&&(G=ae,ne=Rh({keyframes:[N.value,M(N.value)],velocity:vS(B,ae,N.value),damping:l,stiffness:u,restDelta:x,restSpeed:E}))};return K(0),{calculatedDuration:null,next:ae=>{let Q=!1;return!ne&&G===void 0&&(Q=!0,V(ae),K(ae)),G!==void 0&&ae>=G?ne.next(ae-G):(!Q&&V(ae),N)}}}function cB(t,e,n){const r=[],l=n||ta.mix||bS,u=t.length-1;for(let g=0;g<u;g++){let y=l(t[g],t[g+1]);if(e){const b=Array.isArray(e)?e[g]||Ts:e;y=Rf(b,y)}r.push(y)}return r}function uB(t,e,{clamp:n=!0,ease:r,mixer:l}={}){const u=t.length;if(cp(u===e.length),u===1)return()=>e[0];if(u===2&&e[0]===e[1])return()=>e[1];const g=t[0]===t[1];t[0]>t[u-1]&&(t=[...t].reverse(),e=[...e].reverse());const y=cB(e,r,l),b=y.length,x=E=>{if(g&&E<t[0])return e[0];let A=0;if(b>1)for(;A<t.length-2&&!(E<t[A+1]);A++);const N=df(t[A],t[A+1],E);return y[A](N)};return n?E=>x(ea(t[0],t[u-1],E)):x}function fB(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const l=df(0,e,r);t.push(An(n,1,l))}}function dB(t){const e=[0];return fB(e,t.length-1),e}function hB(t,e){return t.map(n=>n*e)}function gB(t,e){return t.map(()=>e||cS).splice(0,t.length-1)}function nf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const l=Aj(r)?r.map(ww):ww(r),u={done:!1,value:e[0]},g=hB(n&&n.length===e.length?n:dB(e),t),y=uB(g,e,{ease:Array.isArray(l)?l:gB(e,l)});return{calculatedDuration:t,next:b=>(u.value=y(b),u.done=b>=t,u)}}const mB=t=>t!==null;function wp(t,{repeat:e,repeatType:n="loop"},r,l=1){const u=t.filter(mB),y=l<0||e&&n!=="loop"&&e%2===1?0:u.length-1;return!y||r===void 0?u[y]:r}const pB={decay:gm,inertia:gm,tween:nf,keyframes:nf,spring:Rh};function ES(t){typeof t.type=="string"&&(t.type=pB[t.type])}class vp{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const xB=t=>t/100;class Ep extends vp{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,l;const{motionValue:n}=this.options;n&&n.updatedAt!==Zi.now()&&this.tick(Zi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(l=(r=this.options).onStop)==null||l.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;ES(e);const{type:n=nf,repeat:r=0,repeatDelay:l=0,repeatType:u,velocity:g=0}=e;let{keyframes:y}=e;const b=n||nf;b!==nf&&typeof y[0]!="number"&&(this.mixKeyframes=Rf(xB,bS(y[0],y[1])),y=[0,100]);const x=b({...e,keyframes:y});u==="mirror"&&(this.mirroredGenerator=b({...e,keyframes:[...y].reverse(),velocity:-g})),x.calculatedDuration===null&&(x.calculatedDuration=bp(x));const{calculatedDuration:E}=x;this.calculatedDuration=E,this.resolvedDuration=E+l,this.totalDuration=this.resolvedDuration*(r+1)-l,this.generator=x}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:l,mixKeyframes:u,mirroredGenerator:g,resolvedDuration:y,calculatedDuration:b}=this;if(this.startTime===null)return r.next(0);const{delay:x=0,keyframes:E,repeat:A,repeatType:N,repeatDelay:O,type:M,onUpdate:j,finalKeyframe:U}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-l/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const H=this.currentTime-x*(this.playbackSpeed>=0?1:-1),q=this.playbackSpeed>=0?H<0:H>l;this.currentTime=Math.max(H,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let B=this.currentTime,V=r;if(A){const ae=Math.min(this.currentTime,l)/y;let Q=Math.floor(ae),we=ae%1;!we&&ae>=1&&(we=1),we===1&&Q--,Q=Math.min(Q,A+1),!!(Q%2)&&(N==="reverse"?(we=1-we,O&&(we-=O/y)):N==="mirror"&&(V=g)),B=ea(0,1,we)*y}const G=q?{done:!1,value:E[0]}:V.next(B);u&&(G.value=u(G.value));let{done:ne}=G;!q&&b!==null&&(ne=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const K=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ne);return K&&M!==gm&&(G.value=wp(E,this.options,U,this.speed)),j&&j(G.value),K&&this.finish(),G}then(e,n){return this.finished.then(e,n)}get duration(){return br(this.calculatedDuration)}get time(){return br(this.currentTime)}set time(e){var n;e=yr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Zi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=br(this.currentTime))}play(){var l,u;if(this.isStopped)return;const{driver:e=eB,startTime:n}=this.options;this.driver||(this.driver=e(g=>this.tick(g))),(u=(l=this.options).onPlay)==null||u.call(l);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Zi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function yB(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Go=t=>t*180/Math.PI,mm=t=>{const e=Go(Math.atan2(t[1],t[0]));return pm(e)},bB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:mm,rotateZ:mm,skewX:t=>Go(Math.atan(t[1])),skewY:t=>Go(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},pm=t=>(t=t%360,t<0&&(t+=360),t),_w=mm,Nw=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Rw=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),wB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Nw,scaleY:Rw,scale:t=>(Nw(t)+Rw(t))/2,rotateX:t=>pm(Go(Math.atan2(t[6],t[5]))),rotateY:t=>pm(Go(Math.atan2(-t[2],t[0]))),rotateZ:_w,rotate:_w,skewX:t=>Go(Math.atan(t[4])),skewY:t=>Go(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function xm(t){return t.includes("scale")?1:0}function ym(t,e){if(!t||t==="none")return xm(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,l;if(n)r=wB,l=n;else{const y=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=bB,l=y}if(!l)return xm(e);const u=r[e],g=l[1].split(",").map(EB);return typeof u=="function"?u(g):g[u]}const vB=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return ym(n,e)};function EB(t){return parseFloat(t.trim())}const kc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jc=new Set(kc),Ow=t=>t===Lc||t===dt,SB=new Set(["x","y","z"]),CB=kc.filter(t=>!SB.has(t));function AB(t){const e=[];return CB.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const il={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>ym(e,"x"),y:(t,{transform:e})=>ym(e,"y")};il.translateX=il.x;il.translateY=il.y;const sl=new Set;let bm=!1,wm=!1,vm=!1;function SS(){if(wm){const t=Array.from(sl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const l=AB(r);l.length&&(n.set(r,l),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const l=n.get(r);l&&l.forEach(([u,g])=>{var y;(y=r.getValue(u))==null||y.set(g)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}wm=!1,bm=!1,sl.forEach(t=>t.complete(vm)),sl.clear()}function CS(){sl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(wm=!0)})}function TB(){vm=!0,CS(),SS(),vm=!1}class Sp{constructor(e,n,r,l,u,g=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=l,this.element=u,this.isAsync=g}scheduleResolve(){this.state="scheduled",this.isAsync?(sl.add(this),bm||(bm=!0,vn.read(CS),vn.resolveKeyframes(SS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:l}=this;if(e[0]===null){const u=l==null?void 0:l.get(),g=e[e.length-1];if(u!==void 0)e[0]=u;else if(r&&n){const y=r.readValue(n,g);y!=null&&(e[0]=y)}e[0]===void 0&&(e[0]=g),l&&u===void 0&&l.set(e[0])}yB(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),sl.delete(this)}cancel(){this.state==="scheduled"&&(sl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const _B=t=>t.startsWith("--");function NB(t,e,n){_B(e)?t.style.setProperty(e,n):t.style[e]=n}const RB=up(()=>window.ScrollTimeline!==void 0),OB={};function IB(t,e){const n=up(t);return()=>OB[e]??n()}const AS=IB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$u=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Iw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$u([0,.65,.55,1]),circOut:$u([.55,0,1,.45]),backIn:$u([.31,.01,.66,-.59]),backOut:$u([.33,1.53,.69,.99])};function TS(t,e){if(t)return typeof t=="function"?AS()?wS(t,e):"ease-out":uS(t)?$u(t):Array.isArray(t)?t.map(n=>TS(n,e)||Iw.easeOut):Iw[t]}function MB(t,e,n,{delay:r=0,duration:l=300,repeat:u=0,repeatType:g="loop",ease:y="easeOut",times:b}={},x=void 0){const E={[e]:n};b&&(E.offset=b);const A=TS(y,l);Array.isArray(A)&&(E.easing=A);const N={delay:r,duration:l,easing:Array.isArray(A)?"linear":A,fill:"both",iterations:u+1,direction:g==="reverse"?"alternate":"normal"};return x&&(N.pseudoElement=x),t.animate(E,N)}function _S(t){return typeof t=="function"&&"applyToOptions"in t}function DB({type:t,...e}){return _S(t)&&AS()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class LB extends vp{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:l,pseudoElement:u,allowFlatten:g=!1,finalKeyframe:y,onComplete:b}=e;this.isPseudoElement=!!u,this.allowFlatten=g,this.options=e,cp(typeof e.type!="string");const x=DB(e);this.animation=MB(n,r,l,x,u),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const E=wp(l,this.options,y,this.speed);this.updateMotionValue?this.updateMotionValue(E):NB(n,r,E),this.animation.cancel()}b==null||b(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return br(Number(e))}get time(){return br(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=yr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&RB()?(this.animation.timeline=e,Ts):n(this)}}const NS={anticipate:aS,backInOut:rS,circInOut:lS};function kB(t){return t in NS}function jB(t){typeof t.ease=="string"&&kB(t.ease)&&(t.ease=NS[t.ease])}const Mw=10;class BB extends LB{constructor(e){jB(e),ES(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:l,element:u,...g}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const y=new Ep({...g,autoplay:!1}),b=yr(this.finishedTime??this.time);n.setWithVelocity(y.sample(b-Mw).value,y.sample(b).value,Mw),y.stop()}}const Dw=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ao.test(t)||t==="0")&&!t.startsWith("url("));function PB(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function UB(t,e,n,r){const l=t[0];if(l===null)return!1;if(e==="display"||e==="visibility")return!0;const u=t[t.length-1],g=Dw(l,e),y=Dw(u,e);return!g||!y?!1:PB(t)||(n==="spring"||_S(n))&&r}function Cp(t){return QE(t)&&"offsetHeight"in t}const FB=new Set(["opacity","clipPath","filter","transform"]),VB=up(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function zB(t){var x;const{motionValue:e,name:n,repeatDelay:r,repeatType:l,damping:u,type:g}=t;if(!Cp((x=e==null?void 0:e.owner)==null?void 0:x.current))return!1;const{onUpdate:y,transformTemplate:b}=e.owner.getProps();return VB()&&n&&FB.has(n)&&(n!=="transform"||!b)&&!y&&!r&&l!=="mirror"&&u!==0&&g!=="inertia"}const HB=40;class $B extends vp{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:l=0,repeatDelay:u=0,repeatType:g="loop",keyframes:y,name:b,motionValue:x,element:E,...A}){var M;super(),this.stop=()=>{var j,U;this._animation&&(this._animation.stop(),(j=this.stopTimeline)==null||j.call(this)),(U=this.keyframeResolver)==null||U.cancel()},this.createdAt=Zi.now();const N={autoplay:e,delay:n,type:r,repeat:l,repeatDelay:u,repeatType:g,name:b,motionValue:x,element:E,...A},O=(E==null?void 0:E.KeyframeResolver)||Sp;this.keyframeResolver=new O(y,(j,U,H)=>this.onKeyframesResolved(j,U,N,!H),b,x,E),(M=this.keyframeResolver)==null||M.scheduleResolve()}onKeyframesResolved(e,n,r,l){this.keyframeResolver=void 0;const{name:u,type:g,velocity:y,delay:b,isHandoff:x,onUpdate:E}=r;this.resolvedAt=Zi.now(),UB(e,u,g,y)||((ta.instantAnimations||!b)&&(E==null||E(wp(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const N={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>HB?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},O=!x&&zB(N)?new BB({...N,element:N.motionValue.owner.current}):new Ep(N);O.finished.then(()=>this.notifyFinished()).catch(Ts),this.pendingTimeline&&(this.stopTimeline=O.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=O}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),TB()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const GB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function qB(t){const e=GB.exec(t);if(!e)return[,];const[,n,r,l]=e;return[`--${n??r}`,l]}function RS(t,e,n=1){const[r,l]=qB(t);if(!r)return;const u=window.getComputedStyle(e).getPropertyValue(r);if(u){const g=u.trim();return ZE(g)?parseFloat(g):g}return mp(l)?RS(l,e,n+1):l}function Ap(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const OS=new Set(["width","height","top","left","right","bottom",...kc]),YB={test:t=>t==="auto",parse:t=>t},IS=t=>e=>e.test(t),MS=[Lc,dt,wr,Fa,Pj,Bj,YB],Lw=t=>MS.find(IS(t));function XB(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||JE(t):!0}const WB=new Set(["brightness","contrast","saturate","opacity"]);function KB(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(pp)||[];if(!r)return t;const l=n.replace(r,"");let u=WB.has(e)?1:0;return r!==n&&(u*=100),e+"("+u+l+")"}const ZB=/\b([a-z-]*)\(.*?\)/gu,Em={...ao,getAnimatableNone:t=>{const e=t.match(ZB);return e?e.map(KB).join(" "):t}},kw={...Lc,transform:Math.round},QB={rotate:Fa,rotateX:Fa,rotateY:Fa,rotateZ:Fa,scale:ih,scaleX:ih,scaleY:ih,scaleZ:ih,skew:Fa,skewX:Fa,skewY:Fa,distance:dt,translateX:dt,translateY:dt,translateZ:dt,x:dt,y:dt,z:dt,perspective:dt,transformPerspective:dt,opacity:hf,originX:Ew,originY:Ew,originZ:dt},Tp={borderWidth:dt,borderTopWidth:dt,borderRightWidth:dt,borderBottomWidth:dt,borderLeftWidth:dt,borderRadius:dt,radius:dt,borderTopLeftRadius:dt,borderTopRightRadius:dt,borderBottomRightRadius:dt,borderBottomLeftRadius:dt,width:dt,maxWidth:dt,height:dt,maxHeight:dt,top:dt,right:dt,bottom:dt,left:dt,padding:dt,paddingTop:dt,paddingRight:dt,paddingBottom:dt,paddingLeft:dt,margin:dt,marginTop:dt,marginRight:dt,marginBottom:dt,marginLeft:dt,backgroundPositionX:dt,backgroundPositionY:dt,...QB,zIndex:kw,fillOpacity:hf,strokeOpacity:hf,numOctaves:kw},JB={...Tp,color:qn,backgroundColor:qn,outlineColor:qn,fill:qn,stroke:qn,borderColor:qn,borderTopColor:qn,borderRightColor:qn,borderBottomColor:qn,borderLeftColor:qn,filter:Em,WebkitFilter:Em},DS=t=>JB[t];function LS(t,e){let n=DS(t);return n!==Em&&(n=ao),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const eP=new Set(["auto","none","0"]);function tP(t,e,n){let r=0,l;for(;r<t.length&&!l;){const u=t[r];typeof u=="string"&&!eP.has(u)&&gf(u).values.length&&(l=t[r]),r++}if(l&&n)for(const u of e)t[u]=LS(n,l)}class nP extends Sp{constructor(e,n,r,l,u){super(e,n,r,l,u,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let b=0;b<e.length;b++){let x=e[b];if(typeof x=="string"&&(x=x.trim(),mp(x))){const E=RS(x,n.current);E!==void 0&&(e[b]=E),b===e.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!OS.has(r)||e.length!==2)return;const[l,u]=e,g=Lw(l),y=Lw(u);if(g!==y)if(Ow(g)&&Ow(y))for(let b=0;b<e.length;b++){const x=e[b];typeof x=="string"&&(e[b]=parseFloat(x))}else il[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let l=0;l<e.length;l++)(e[l]===null||XB(e[l]))&&r.push(l);r.length&&tP(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=il[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const l=n[n.length-1];l!==void 0&&e.getValue(r,l).jump(l,!1)}measureEndState(){var y;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const l=e.getValue(n);l&&l.jump(this.measuredOrigin,!1);const u=r.length-1,g=r[u];r[u]=il[n](e.measureViewportBox(),window.getComputedStyle(e.current)),g!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=g),(y=this.removedTransforms)!=null&&y.length&&this.removedTransforms.forEach(([b,x])=>{e.getValue(b).set(x)}),this.resolveNoneKeyframes()}}function iP(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const l=(n==null?void 0:n[t])??r.querySelectorAll(t);return l?Array.from(l):[]}return Array.from(t)}const kS=(t,e)=>e&&typeof t=="number"?e.transform(t):t,jw=30,sP=t=>!isNaN(parseFloat(t));class rP{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,l=!0)=>{var g,y;const u=Zi.now();if(this.updatedAt!==u&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((g=this.events.change)==null||g.notify(this.current),this.dependents))for(const b of this.dependents)b.dirty();l&&((y=this.events.renderRequest)==null||y.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Zi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=sP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new fp);const r=this.events[e].add(n);return e==="change"?()=>{r(),vn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Zi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>jw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,jw);return eS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Tc(t,e){return new rP(t,e)}const{schedule:_p}=fS(queueMicrotask,!1),Us={x:!1,y:!1};function jS(){return Us.x||Us.y}function aP(t){return t==="x"||t==="y"?Us[t]?null:(Us[t]=!0,()=>{Us[t]=!1}):Us.x||Us.y?null:(Us.x=Us.y=!0,()=>{Us.x=Us.y=!1})}function BS(t,e){const n=iP(t),r=new AbortController,l={passive:!0,...e,signal:r.signal};return[n,l,()=>r.abort()]}function Bw(t){return!(t.pointerType==="touch"||jS())}function oP(t,e,n={}){const[r,l,u]=BS(t,n),g=y=>{if(!Bw(y))return;const{target:b}=y,x=e(b,y);if(typeof x!="function"||!b)return;const E=A=>{Bw(A)&&(x(A),b.removeEventListener("pointerleave",E))};b.addEventListener("pointerleave",E,l)};return r.forEach(y=>{y.addEventListener("pointerenter",g,l)}),u}const PS=(t,e)=>e?t===e?!0:PS(t,e.parentElement):!1,Np=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,lP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function cP(t){return lP.has(t.tagName)||t.tabIndex!==-1}const fh=new WeakSet;function Pw(t){return e=>{e.key==="Enter"&&t(e)}}function vg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const uP=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Pw(()=>{if(fh.has(n))return;vg(n,"down");const l=Pw(()=>{vg(n,"up")}),u=()=>vg(n,"cancel");n.addEventListener("keyup",l,e),n.addEventListener("blur",u,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Uw(t){return Np(t)&&!jS()}function fP(t,e,n={}){const[r,l,u]=BS(t,n),g=y=>{const b=y.currentTarget;if(!Uw(y))return;fh.add(b);const x=e(b,y),E=(O,M)=>{window.removeEventListener("pointerup",A),window.removeEventListener("pointercancel",N),fh.has(b)&&fh.delete(b),Uw(O)&&typeof x=="function"&&x(O,{success:M})},A=O=>{E(O,b===window||b===document||n.useGlobalTarget||PS(b,O.target))},N=O=>{E(O,!1)};window.addEventListener("pointerup",A,l),window.addEventListener("pointercancel",N,l)};return r.forEach(y=>{(n.useGlobalTarget?window:y).addEventListener("pointerdown",g,l),Cp(y)&&(y.addEventListener("focus",x=>uP(x,l)),!cP(y)&&!y.hasAttribute("tabindex")&&(y.tabIndex=0))}),u}function US(t){return QE(t)&&"ownerSVGElement"in t}function dP(t){return US(t)&&t.tagName==="svg"}const Ri=t=>!!(t&&t.getVelocity),hP=[...MS,qn,ao],gP=t=>hP.find(IS(t)),Rp=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class mP extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,l=Cp(r)&&r.offsetWidth||0,u=this.props.sizeRef.current;u.height=n.offsetHeight||0,u.width=n.offsetWidth||0,u.top=n.offsetTop,u.left=n.offsetLeft,u.right=l-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function pP({children:t,isPresent:e,anchorX:n,root:r}){const l=R.useId(),u=R.useRef(null),g=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=R.useContext(Rp);return R.useInsertionEffect(()=>{const{width:b,height:x,top:E,left:A,right:N}=g.current;if(e||!u.current||!b||!x)return;const O=n==="left"?`left: ${A}`:`right: ${N}`;u.current.dataset.motionPopId=l;const M=document.createElement("style");y&&(M.nonce=y);const j=r??document.head;return j.appendChild(M),M.sheet&&M.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${b}px !important;
            height: ${x}px !important;
            ${O}px !important;
            top: ${E}px !important;
          }
        `),()=>{j.removeChild(M),j.contains(M)&&j.removeChild(M)}},[e]),C.jsx(mP,{isPresent:e,childRef:u,sizeRef:g,children:R.cloneElement(t,{ref:u})})}const xP=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:l,presenceAffectsLayout:u,mode:g,anchorX:y,root:b})=>{const x=rp(yP),E=R.useId();let A=!0,N=R.useMemo(()=>(A=!1,{id:E,initial:e,isPresent:n,custom:l,onExitComplete:O=>{x.set(O,!0);for(const M of x.values())if(!M)return;r&&r()},register:O=>(x.set(O,!1),()=>x.delete(O))}),[n,x,r]);return u&&A&&(N={...N}),R.useMemo(()=>{x.forEach((O,M)=>x.set(M,!1))},[n]),R.useEffect(()=>{!n&&!x.size&&r&&r()},[n]),g==="popLayout"&&(t=C.jsx(pP,{isPresent:n,anchorX:y,root:b,children:t})),C.jsx(Wh.Provider,{value:N,children:t})};function yP(){return new Map}function FS(t=!0){const e=R.useContext(Wh);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:l}=e,u=R.useId();R.useEffect(()=>{if(t)return l(u)},[t]);const g=R.useCallback(()=>t&&r&&r(u),[u,r,t]);return!n&&r?[!1,g]:[!0]}const sh=t=>t.key||"";function Fw(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const Bu=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:l=!0,mode:u="sync",propagate:g=!1,anchorX:y="left",root:b})=>{const[x,E]=FS(g),A=R.useMemo(()=>Fw(t),[t]),N=g&&!x?[]:A.map(sh),O=R.useRef(!0),M=R.useRef(A),j=rp(()=>new Map),[U,H]=R.useState(A),[q,B]=R.useState(A);KE(()=>{O.current=!1,M.current=A;for(let ne=0;ne<q.length;ne++){const K=sh(q[ne]);N.includes(K)?j.delete(K):j.get(K)!==!0&&j.set(K,!1)}},[q,N.length,N.join("-")]);const V=[];if(A!==U){let ne=[...A];for(let K=0;K<q.length;K++){const ae=q[K],Q=sh(ae);N.includes(Q)||(ne.splice(K,0,ae),V.push(ae))}return u==="wait"&&V.length&&(ne=V),B(Fw(ne)),H(A),null}const{forceRender:G}=R.useContext(sp);return C.jsx(C.Fragment,{children:q.map(ne=>{const K=sh(ne),ae=g&&!x?!1:A===q||N.includes(K),Q=()=>{if(j.has(K))j.set(K,!0);else return;let we=!0;j.forEach(je=>{je||(we=!1)}),we&&(G==null||G(),B(M.current),g&&(E==null||E()),r&&r())};return C.jsx(xP,{isPresent:ae,initial:!O.current||n?void 0:!1,custom:e,presenceAffectsLayout:l,mode:u,root:b,onExitComplete:ae?void 0:Q,anchorX:y,children:ne},K)})})},VS=R.createContext({strict:!1}),Vw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_c={};for(const t in Vw)_c[t]={isEnabled:e=>Vw[t].some(n=>!!e[n])};function bP(t){for(const e in t)_c[e]={..._c[e],...t[e]}}const wP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Oh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||wP.has(t)}let zS=t=>!Oh(t);function vP(t){typeof t=="function"&&(zS=e=>e.startsWith("on")?!Oh(e):t(e))}try{vP(require("@emotion/is-prop-valid").default)}catch{}function EP(t,e,n){const r={};for(const l in t)l==="values"&&typeof t.values=="object"||(zS(l)||n===!0&&Oh(l)||!e&&!Oh(l)||t.draggable&&l.startsWith("onDrag"))&&(r[l]=t[l]);return r}function SP(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,l)=>l==="create"?t:(e.has(l)||e.set(l,t(l)),e.get(l))})}const Kh=R.createContext({});function Zh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function mf(t){return typeof t=="string"||Array.isArray(t)}const Op=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ip=["initial",...Op];function Qh(t){return Zh(t.animate)||Ip.some(e=>mf(t[e]))}function HS(t){return!!(Qh(t)||t.variants)}function CP(t,e){if(Qh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||mf(n)?n:void 0,animate:mf(r)?r:void 0}}return t.inherit!==!1?e:{}}function AP(t){const{initial:e,animate:n}=CP(t,R.useContext(Kh));return R.useMemo(()=>({initial:e,animate:n}),[zw(e),zw(n)])}function zw(t){return Array.isArray(t)?t.join(" "):t}const TP=Symbol.for("motionComponentSymbol");function lc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function _P(t,e,n){return R.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):lc(n)&&(n.current=r))},[e])}const Mp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),NP="framerAppearId",$S="data-"+Mp(NP),GS=R.createContext({});function RP(t,e,n,r,l){var j,U;const{visualElement:u}=R.useContext(Kh),g=R.useContext(VS),y=R.useContext(Wh),b=R.useContext(Rp).reducedMotion,x=R.useRef(null);r=r||g.renderer,!x.current&&r&&(x.current=r(t,{visualState:e,parent:u,props:n,presenceContext:y,blockInitialAnimation:y?y.initial===!1:!1,reducedMotionConfig:b}));const E=x.current,A=R.useContext(GS);E&&!E.projection&&l&&(E.type==="html"||E.type==="svg")&&OP(x.current,n,l,A);const N=R.useRef(!1);R.useInsertionEffect(()=>{E&&N.current&&E.update(n,y)});const O=n[$S],M=R.useRef(!!O&&!((j=window.MotionHandoffIsComplete)!=null&&j.call(window,O))&&((U=window.MotionHasOptimisedAnimation)==null?void 0:U.call(window,O)));return KE(()=>{E&&(N.current=!0,window.MotionIsMounted=!0,E.updateFeatures(),_p.render(E.render),M.current&&E.animationState&&E.animationState.animateChanges())}),R.useEffect(()=>{E&&(!M.current&&E.animationState&&E.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var H;(H=window.MotionHandoffMarkAsComplete)==null||H.call(window,O)}),M.current=!1))}),E}function OP(t,e,n,r){const{layoutId:l,layout:u,drag:g,dragConstraints:y,layoutScroll:b,layoutRoot:x,layoutCrossfade:E}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:qS(t.parent)),t.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!g||y&&lc(y),visualElement:t,animationType:typeof u=="string"?u:"both",initialPromotionConfig:r,crossfade:E,layoutScroll:b,layoutRoot:x})}function qS(t){if(t)return t.options.allowProjection!==!1?t.projection:qS(t.parent)}function IP({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:l}){t&&bP(t);function u(y,b){let x;const E={...R.useContext(Rp),...y,layoutId:MP(y)},{isStatic:A}=E,N=AP(y),O=r(y,A);if(!A&&ap){DP();const M=LP(E);x=M.MeasureLayout,N.visualElement=RP(l,O,E,e,M.ProjectionNode)}return C.jsxs(Kh.Provider,{value:N,children:[x&&N.visualElement?C.jsx(x,{visualElement:N.visualElement,...E}):null,n(l,y,_P(O,N.visualElement,b),O,A,N.visualElement)]})}u.displayName=`motion.${typeof l=="string"?l:`create(${l.displayName??l.name??""})`}`;const g=R.forwardRef(u);return g[TP]=l,g}function MP({layoutId:t}){const e=R.useContext(sp).id;return e&&t!==void 0?e+"-"+t:t}function DP(t,e){R.useContext(VS).strict}function LP(t){const{drag:e,layout:n}=_c;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const pf={};function kP(t){for(const e in t)pf[e]=t[e],gp(e)&&(pf[e].isCSSVariable=!0)}function YS(t,{layout:e,layoutId:n}){return jc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!pf[t]||t==="opacity")}const jP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},BP=kc.length;function PP(t,e,n){let r="",l=!0;for(let u=0;u<BP;u++){const g=kc[u],y=t[g];if(y===void 0)continue;let b=!0;if(typeof y=="number"?b=y===(g.startsWith("scale")?1:0):b=parseFloat(y)===0,!b||n){const x=kS(y,Tp[g]);if(!b){l=!1;const E=jP[g]||g;r+=`${E}(${x}) `}n&&(e[g]=x)}}return r=r.trim(),n?r=n(e,l?"":r):l&&(r="none"),r}function Dp(t,e,n){const{style:r,vars:l,transformOrigin:u}=t;let g=!1,y=!1;for(const b in e){const x=e[b];if(jc.has(b)){g=!0;continue}else if(gp(b)){l[b]=x;continue}else{const E=kS(x,Tp[b]);b.startsWith("origin")?(y=!0,u[b]=E):r[b]=E}}if(e.transform||(g||n?r.transform=PP(e,t.transform,n):r.transform&&(r.transform="none")),y){const{originX:b="50%",originY:x="50%",originZ:E=0}=u;r.transformOrigin=`${b} ${x} ${E}`}}const Lp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function XS(t,e,n){for(const r in e)!Ri(e[r])&&!YS(r,n)&&(t[r]=e[r])}function UP({transformTemplate:t},e){return R.useMemo(()=>{const n=Lp();return Dp(n,e,t),Object.assign({},n.vars,n.style)},[e])}function FP(t,e){const n=t.style||{},r={};return XS(r,n,t),Object.assign(r,UP(t,e)),r}function VP(t,e){const n={},r=FP(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const zP={offset:"stroke-dashoffset",array:"stroke-dasharray"},HP={offset:"strokeDashoffset",array:"strokeDasharray"};function $P(t,e,n=1,r=0,l=!0){t.pathLength=1;const u=l?zP:HP;t[u.offset]=dt.transform(-r);const g=dt.transform(e),y=dt.transform(n);t[u.array]=`${g} ${y}`}function WS(t,{attrX:e,attrY:n,attrScale:r,pathLength:l,pathSpacing:u=1,pathOffset:g=0,...y},b,x,E){if(Dp(t,y,x),b){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:A,style:N}=t;A.transform&&(N.transform=A.transform,delete A.transform),(N.transform||A.transformOrigin)&&(N.transformOrigin=A.transformOrigin??"50% 50%",delete A.transformOrigin),N.transform&&(N.transformBox=(E==null?void 0:E.transformBox)??"fill-box",delete A.transformBox),e!==void 0&&(A.x=e),n!==void 0&&(A.y=n),r!==void 0&&(A.scale=r),l!==void 0&&$P(A,l,u,g,!1)}const KS=()=>({...Lp(),attrs:{}}),ZS=t=>typeof t=="string"&&t.toLowerCase()==="svg";function GP(t,e,n,r){const l=R.useMemo(()=>{const u=KS();return WS(u,e,ZS(r),t.transformTemplate,t.style),{...u.attrs,style:{...u.style}}},[e]);if(t.style){const u={};XS(u,t.style,t),l.style={...u,...l.style}}return l}const qP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kp(t){return typeof t!="string"||t.includes("-")?!1:!!(qP.indexOf(t)>-1||/[A-Z]/u.test(t))}function YP(t=!1){return(n,r,l,{latestValues:u},g)=>{const b=(kp(n)?GP:VP)(r,u,g,n),x=EP(r,typeof n=="string",t),E=n!==R.Fragment?{...x,...b,ref:l}:{},{children:A}=r,N=R.useMemo(()=>Ri(A)?A.get():A,[A]);return R.createElement(n,{...E,children:N})}}function Hw(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function jp(t,e,n,r){if(typeof e=="function"){const[l,u]=Hw(r);e=e(n!==void 0?n:t.custom,l,u)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[l,u]=Hw(r);e=e(n!==void 0?n:t.custom,l,u)}return e}function dh(t){return Ri(t)?t.get():t}function XP({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,l){return{latestValues:WP(n,r,l,t),renderState:e()}}const QS=t=>(e,n)=>{const r=R.useContext(Kh),l=R.useContext(Wh),u=()=>XP(t,e,r,l);return n?u():rp(u)};function WP(t,e,n,r){const l={},u=r(t,{});for(const N in u)l[N]=dh(u[N]);let{initial:g,animate:y}=t;const b=Qh(t),x=HS(t);e&&x&&!b&&t.inherit!==!1&&(g===void 0&&(g=e.initial),y===void 0&&(y=e.animate));let E=n?n.initial===!1:!1;E=E||g===!1;const A=E?y:g;if(A&&typeof A!="boolean"&&!Zh(A)){const N=Array.isArray(A)?A:[A];for(let O=0;O<N.length;O++){const M=jp(t,N[O]);if(M){const{transitionEnd:j,transition:U,...H}=M;for(const q in H){let B=H[q];if(Array.isArray(B)){const V=E?B.length-1:0;B=B[V]}B!==null&&(l[q]=B)}for(const q in j)l[q]=j[q]}}}return l}function Bp(t,e,n){var u;const{style:r}=t,l={};for(const g in r)(Ri(r[g])||e.style&&Ri(e.style[g])||YS(g,t)||((u=n==null?void 0:n.getValue(g))==null?void 0:u.liveStyle)!==void 0)&&(l[g]=r[g]);return l}const KP={useVisualState:QS({scrapeMotionValuesFromProps:Bp,createRenderState:Lp})};function JS(t,e,n){const r=Bp(t,e,n);for(const l in t)if(Ri(t[l])||Ri(e[l])){const u=kc.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;r[u]=t[l]}return r}const ZP={useVisualState:QS({scrapeMotionValuesFromProps:JS,createRenderState:KS})};function QP(t,e){return function(r,{forwardMotionProps:l}={forwardMotionProps:!1}){const g={...kp(r)?ZP:KP,preloadedFeatures:t,useRender:YP(l),createVisualElement:e,Component:r};return IP(g)}}function xf(t,e,n){const r=t.getProps();return jp(r,e,n!==void 0?n:r.custom,t)}const Sm=t=>Array.isArray(t);function JP(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Tc(n))}function eU(t){return Sm(t)?t[t.length-1]||0:t}function tU(t,e){const n=xf(t,e);let{transitionEnd:r={},transition:l={},...u}=n||{};u={...u,...r};for(const g in u){const y=eU(u[g]);JP(t,g,y)}}function nU(t){return!!(Ri(t)&&t.add)}function Cm(t,e){const n=t.getValue("willChange");if(nU(n))return n.add(e);if(!n&&ta.WillChange){const r=new ta.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function eC(t){return t.props[$S]}const iU=t=>t!==null;function sU(t,{repeat:e,repeatType:n="loop"},r){const l=t.filter(iU),u=e&&n!=="loop"&&e%2===1?0:l.length-1;return l[u]}const rU={type:"spring",stiffness:500,damping:25,restSpeed:10},aU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),oU={type:"keyframes",duration:.8},lU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cU=(t,{keyframes:e})=>e.length>2?oU:jc.has(t)?t.startsWith("scale")?aU(e[1]):rU:lU;function uU({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:l,repeat:u,repeatType:g,repeatDelay:y,from:b,elapsed:x,...E}){return!!Object.keys(E).length}const Pp=(t,e,n,r={},l,u)=>g=>{const y=Ap(r,t)||{},b=y.delay||r.delay||0;let{elapsed:x=0}=r;x=x-yr(b);const E={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...y,delay:-x,onUpdate:N=>{e.set(N),y.onUpdate&&y.onUpdate(N)},onComplete:()=>{g(),y.onComplete&&y.onComplete()},name:t,motionValue:e,element:u?void 0:l};uU(y)||Object.assign(E,cU(t,E)),E.duration&&(E.duration=yr(E.duration)),E.repeatDelay&&(E.repeatDelay=yr(E.repeatDelay)),E.from!==void 0&&(E.keyframes[0]=E.from);let A=!1;if((E.type===!1||E.duration===0&&!E.repeatDelay)&&(E.duration=0,E.delay===0&&(A=!0)),(ta.instantAnimations||ta.skipAnimations)&&(A=!0,E.duration=0,E.delay=0),E.allowFlatten=!y.type&&!y.ease,A&&!u&&e.get()!==void 0){const N=sU(E.keyframes,y);if(N!==void 0){vn.update(()=>{E.onUpdate(N),E.onComplete()});return}}return y.isSync?new Ep(E):new $B(E)};function fU({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function tC(t,e,{delay:n=0,transitionOverride:r,type:l}={}){let{transition:u=t.getDefaultTransition(),transitionEnd:g,...y}=e;r&&(u=r);const b=[],x=l&&t.animationState&&t.animationState.getState()[l];for(const E in y){const A=t.getValue(E,t.latestValues[E]??null),N=y[E];if(N===void 0||x&&fU(x,E))continue;const O={delay:n,...Ap(u||{},E)},M=A.get();if(M!==void 0&&!A.isAnimating&&!Array.isArray(N)&&N===M&&!O.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const H=eC(t);if(H){const q=window.MotionHandoffAnimation(H,E,vn);q!==null&&(O.startTime=q,j=!0)}}Cm(t,E),A.start(Pp(E,A,N,t.shouldReduceMotion&&OS.has(E)?{type:!1}:O,t,j));const U=A.animation;U&&b.push(U)}return g&&Promise.all(b).then(()=>{vn.update(()=>{g&&tU(t,g)})}),b}function Am(t,e,n={}){var b;const r=xf(t,e,n.type==="exit"?(b=t.presenceContext)==null?void 0:b.custom:void 0);let{transition:l=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(l=n.transitionOverride);const u=r?()=>Promise.all(tC(t,r,n)):()=>Promise.resolve(),g=t.variantChildren&&t.variantChildren.size?(x=0)=>{const{delayChildren:E=0,staggerChildren:A,staggerDirection:N}=l;return dU(t,e,x,E,A,N,n)}:()=>Promise.resolve(),{when:y}=l;if(y){const[x,E]=y==="beforeChildren"?[u,g]:[g,u];return x().then(()=>E())}else return Promise.all([u(),g(n.delay)])}function dU(t,e,n=0,r=0,l=0,u=1,g){const y=[],b=t.variantChildren.size,x=(b-1)*l,E=typeof r=="function",A=E?N=>r(N,b):u===1?(N=0)=>N*l:(N=0)=>x-N*l;return Array.from(t.variantChildren).sort(hU).forEach((N,O)=>{N.notify("AnimationStart",e),y.push(Am(N,e,{...g,delay:n+(E?0:r)+A(O)}).then(()=>N.notify("AnimationComplete",e)))}),Promise.all(y)}function hU(t,e){return t.sortNodePosition(e)}function gU(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const l=e.map(u=>Am(t,u,n));r=Promise.all(l)}else if(typeof e=="string")r=Am(t,e,n);else{const l=typeof e=="function"?xf(t,e,n.custom):e;r=Promise.all(tC(t,l,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function nC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const mU=Ip.length;function iC(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?iC(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<mU;n++){const r=Ip[n],l=t.props[r];(mf(l)||l===!1)&&(e[r]=l)}return e}const pU=[...Op].reverse(),xU=Op.length;function yU(t){return e=>Promise.all(e.map(({animation:n,options:r})=>gU(t,n,r)))}function bU(t){let e=yU(t),n=$w(),r=!0;const l=b=>(x,E)=>{var N;const A=xf(t,E,b==="exit"?(N=t.presenceContext)==null?void 0:N.custom:void 0);if(A){const{transition:O,transitionEnd:M,...j}=A;x={...x,...j,...M}}return x};function u(b){e=b(t)}function g(b){const{props:x}=t,E=iC(t.parent)||{},A=[],N=new Set;let O={},M=1/0;for(let U=0;U<xU;U++){const H=pU[U],q=n[H],B=x[H]!==void 0?x[H]:E[H],V=mf(B),G=H===b?q.isActive:null;G===!1&&(M=U);let ne=B===E[H]&&B!==x[H]&&V;if(ne&&r&&t.manuallyAnimateOnMount&&(ne=!1),q.protectedKeys={...O},!q.isActive&&G===null||!B&&!q.prevProp||Zh(B)||typeof B=="boolean")continue;const K=wU(q.prevProp,B);let ae=K||H===b&&q.isActive&&!ne&&V||U>M&&V,Q=!1;const we=Array.isArray(B)?B:[B];let je=we.reduce(l(H),{});G===!1&&(je={});const{prevResolvedValues:_e={}}=q,he={..._e,...je},Ue=ce=>{ae=!0,N.has(ce)&&(Q=!0,N.delete(ce)),q.needsAnimating[ce]=!0;const Le=t.getValue(ce);Le&&(Le.liveStyle=!1)};for(const ce in he){const Le=je[ce],Ve=_e[ce];if(O.hasOwnProperty(ce))continue;let Y=!1;Sm(Le)&&Sm(Ve)?Y=!nC(Le,Ve):Y=Le!==Ve,Y?Le!=null?Ue(ce):N.add(ce):Le!==void 0&&N.has(ce)?Ue(ce):q.protectedKeys[ce]=!0}q.prevProp=B,q.prevResolvedValues=je,q.isActive&&(O={...O,...je}),r&&t.blockInitialAnimation&&(ae=!1),ae&&(!(ne&&K)||Q)&&A.push(...we.map(ce=>({animation:ce,options:{type:H}})))}if(N.size){const U={};if(typeof x.initial!="boolean"){const H=xf(t,Array.isArray(x.initial)?x.initial[0]:x.initial);H&&H.transition&&(U.transition=H.transition)}N.forEach(H=>{const q=t.getBaseTarget(H),B=t.getValue(H);B&&(B.liveStyle=!0),U[H]=q??null}),A.push({animation:U})}let j=!!A.length;return r&&(x.initial===!1||x.initial===x.animate)&&!t.manuallyAnimateOnMount&&(j=!1),r=!1,j?e(A):Promise.resolve()}function y(b,x){var A;if(n[b].isActive===x)return Promise.resolve();(A=t.variantChildren)==null||A.forEach(N=>{var O;return(O=N.animationState)==null?void 0:O.setActive(b,x)}),n[b].isActive=x;const E=g(b);for(const N in n)n[N].protectedKeys={};return E}return{animateChanges:g,setActive:y,setAnimateFunction:u,getState:()=>n,reset:()=>{n=$w(),r=!0}}}function wU(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!nC(e,t):!1}function jo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $w(){return{animate:jo(!0),whileInView:jo(),whileHover:jo(),whileTap:jo(),whileDrag:jo(),whileFocus:jo(),exit:jo()}}class co{constructor(e){this.isMounted=!1,this.node=e}update(){}}class vU extends co{constructor(e){super(e),e.animationState||(e.animationState=bU(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Zh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let EU=0;class SU extends co{constructor(){super(...arguments),this.id=EU++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const l=this.node.animationState.setActive("exit",!e);n&&!e&&l.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const CU={animation:{Feature:vU},exit:{Feature:SU}};function yf(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Mf(t){return{point:{x:t.pageX,y:t.pageY}}}const AU=t=>e=>Np(e)&&t(e,Mf(e));function sf(t,e,n,r){return yf(t,e,AU(n),r)}function sC({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function TU({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function _U(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const rC=1e-4,NU=1-rC,RU=1+rC,aC=.01,OU=0-aC,IU=0+aC;function Bi(t){return t.max-t.min}function MU(t,e,n){return Math.abs(t-e)<=n}function Gw(t,e,n,r=.5){t.origin=r,t.originPoint=An(e.min,e.max,t.origin),t.scale=Bi(n)/Bi(e),t.translate=An(n.min,n.max,t.origin)-t.originPoint,(t.scale>=NU&&t.scale<=RU||isNaN(t.scale))&&(t.scale=1),(t.translate>=OU&&t.translate<=IU||isNaN(t.translate))&&(t.translate=0)}function rf(t,e,n,r){Gw(t.x,e.x,n.x,r?r.originX:void 0),Gw(t.y,e.y,n.y,r?r.originY:void 0)}function qw(t,e,n){t.min=n.min+e.min,t.max=t.min+Bi(e)}function DU(t,e,n){qw(t.x,e.x,n.x),qw(t.y,e.y,n.y)}function Yw(t,e,n){t.min=e.min-n.min,t.max=t.min+Bi(e)}function af(t,e,n){Yw(t.x,e.x,n.x),Yw(t.y,e.y,n.y)}const Xw=()=>({translate:0,scale:1,origin:0,originPoint:0}),cc=()=>({x:Xw(),y:Xw()}),Ww=()=>({min:0,max:0}),Fn=()=>({x:Ww(),y:Ww()});function Cs(t){return[t("x"),t("y")]}function Eg(t){return t===void 0||t===1}function Tm({scale:t,scaleX:e,scaleY:n}){return!Eg(t)||!Eg(e)||!Eg(n)}function Uo(t){return Tm(t)||oC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function oC(t){return Kw(t.x)||Kw(t.y)}function Kw(t){return t&&t!=="0%"}function Ih(t,e,n){const r=t-n,l=e*r;return n+l}function Zw(t,e,n,r,l){return l!==void 0&&(t=Ih(t,l,r)),Ih(t,n,r)+e}function _m(t,e=0,n=1,r,l){t.min=Zw(t.min,e,n,r,l),t.max=Zw(t.max,e,n,r,l)}function lC(t,{x:e,y:n}){_m(t.x,e.translate,e.scale,e.originPoint),_m(t.y,n.translate,n.scale,n.originPoint)}const Qw=.999999999999,Jw=1.0000000000001;function LU(t,e,n,r=!1){const l=n.length;if(!l)return;e.x=e.y=1;let u,g;for(let y=0;y<l;y++){u=n[y],g=u.projectionDelta;const{visualElement:b}=u.options;b&&b.props.style&&b.props.style.display==="contents"||(r&&u.options.layoutScroll&&u.scroll&&u!==u.root&&fc(t,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),g&&(e.x*=g.x.scale,e.y*=g.y.scale,lC(t,g)),r&&Uo(u.latestValues)&&fc(t,u.latestValues))}e.x<Jw&&e.x>Qw&&(e.x=1),e.y<Jw&&e.y>Qw&&(e.y=1)}function uc(t,e){t.min=t.min+e,t.max=t.max+e}function ev(t,e,n,r,l=.5){const u=An(t.min,t.max,l);_m(t,e,n,u,r)}function fc(t,e){ev(t.x,e.x,e.scaleX,e.scale,e.originX),ev(t.y,e.y,e.scaleY,e.scale,e.originY)}function cC(t,e){return sC(_U(t.getBoundingClientRect(),e))}function kU(t,e,n){const r=cC(t,n),{scroll:l}=e;return l&&(uc(r.x,l.offset.x),uc(r.y,l.offset.y)),r}const uC=({current:t})=>t?t.ownerDocument.defaultView:null,tv=(t,e)=>Math.abs(t-e);function jU(t,e){const n=tv(t.x,e.x),r=tv(t.y,e.y);return Math.sqrt(n**2+r**2)}class fC{constructor(e,n,{transformPagePoint:r,contextWindow:l=window,dragSnapToOrigin:u=!1,distanceThreshold:g=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Cg(this.lastMoveEventInfo,this.history),O=this.startEvent!==null,M=jU(N.offset,{x:0,y:0})>=this.distanceThreshold;if(!O&&!M)return;const{point:j}=N,{timestamp:U}=yi;this.history.push({...j,timestamp:U});const{onStart:H,onMove:q}=this.handlers;O||(H&&H(this.lastMoveEvent,N),this.startEvent=this.lastMoveEvent),q&&q(this.lastMoveEvent,N)},this.handlePointerMove=(N,O)=>{this.lastMoveEvent=N,this.lastMoveEventInfo=Sg(O,this.transformPagePoint),vn.update(this.updatePoint,!0)},this.handlePointerUp=(N,O)=>{this.end();const{onEnd:M,onSessionEnd:j,resumeAnimation:U}=this.handlers;if(this.dragSnapToOrigin&&U&&U(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const H=Cg(N.type==="pointercancel"?this.lastMoveEventInfo:Sg(O,this.transformPagePoint),this.history);this.startEvent&&M&&M(N,H),j&&j(N,H)},!Np(e))return;this.dragSnapToOrigin=u,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=g,this.contextWindow=l||window;const y=Mf(e),b=Sg(y,this.transformPagePoint),{point:x}=b,{timestamp:E}=yi;this.history=[{...x,timestamp:E}];const{onSessionStart:A}=n;A&&A(e,Cg(b,this.history)),this.removeListeners=Rf(sf(this.contextWindow,"pointermove",this.handlePointerMove),sf(this.contextWindow,"pointerup",this.handlePointerUp),sf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ro(this.updatePoint)}}function Sg(t,e){return e?{point:e(t.point)}:t}function nv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Cg({point:t},e){return{point:t,delta:nv(t,dC(e)),offset:nv(t,BU(e)),velocity:PU(e,.1)}}function BU(t){return t[0]}function dC(t){return t[t.length-1]}function PU(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const l=dC(t);for(;n>=0&&(r=t[n],!(l.timestamp-r.timestamp>yr(e)));)n--;if(!r)return{x:0,y:0};const u=br(l.timestamp-r.timestamp);if(u===0)return{x:0,y:0};const g={x:(l.x-r.x)/u,y:(l.y-r.y)/u};return g.x===1/0&&(g.x=0),g.y===1/0&&(g.y=0),g}function UU(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?An(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?An(n,t,r.max):Math.min(t,n)),t}function iv(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function FU(t,{top:e,left:n,bottom:r,right:l}){return{x:iv(t.x,n,l),y:iv(t.y,e,r)}}function sv(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function VU(t,e){return{x:sv(t.x,e.x),y:sv(t.y,e.y)}}function zU(t,e){let n=.5;const r=Bi(t),l=Bi(e);return l>r?n=df(e.min,e.max-r,t.min):r>l&&(n=df(t.min,t.max-l,e.min)),ea(0,1,n)}function HU(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Nm=.35;function $U(t=Nm){return t===!1?t=0:t===!0&&(t=Nm),{x:rv(t,"left","right"),y:rv(t,"top","bottom")}}function rv(t,e,n){return{min:av(t,e),max:av(t,n)}}function av(t,e){return typeof t=="number"?t:t[e]||0}const GU=new WeakMap;class qU{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Fn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const u=A=>{const{dragSnapToOrigin:N}=this.getProps();N?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Mf(A).point)},g=(A,N)=>{const{drag:O,dragPropagation:M,onDragStart:j}=this.getProps();if(O&&!M&&(this.openDragLock&&this.openDragLock(),this.openDragLock=aP(O),!this.openDragLock))return;this.latestPointerEvent=A,this.latestPanInfo=N,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Cs(H=>{let q=this.getAxisMotionValue(H).get()||0;if(wr.test(q)){const{projection:B}=this.visualElement;if(B&&B.layout){const V=B.layout.layoutBox[H];V&&(q=Bi(V)*(parseFloat(q)/100))}}this.originPoint[H]=q}),j&&vn.postRender(()=>j(A,N)),Cm(this.visualElement,"transform");const{animationState:U}=this.visualElement;U&&U.setActive("whileDrag",!0)},y=(A,N)=>{this.latestPointerEvent=A,this.latestPanInfo=N;const{dragPropagation:O,dragDirectionLock:M,onDirectionLock:j,onDrag:U}=this.getProps();if(!O&&!this.openDragLock)return;const{offset:H}=N;if(M&&this.currentDirection===null){this.currentDirection=YU(H),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",N.point,H),this.updateAxis("y",N.point,H),this.visualElement.render(),U&&U(A,N)},b=(A,N)=>{this.latestPointerEvent=A,this.latestPanInfo=N,this.stop(A,N),this.latestPointerEvent=null,this.latestPanInfo=null},x=()=>Cs(A=>{var N;return this.getAnimationState(A)==="paused"&&((N=this.getAxisMotionValue(A).animation)==null?void 0:N.play())}),{dragSnapToOrigin:E}=this.getProps();this.panSession=new fC(e,{onSessionStart:u,onStart:g,onMove:y,onSessionEnd:b,resumeAnimation:x},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:E,distanceThreshold:r,contextWindow:uC(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,l=n||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!l||!r)return;const{velocity:g}=l;this.startAnimation(g);const{onDragEnd:y}=this.getProps();y&&vn.postRender(()=>y(r,l))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:l}=this.getProps();if(!r||!rh(e,l,this.currentDirection))return;const u=this.getAxisMotionValue(e);let g=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(g=UU(g,this.constraints[e],this.elastic[e])),u.set(g)}resolveConstraints(){var u;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(u=this.visualElement.projection)==null?void 0:u.layout,l=this.constraints;e&&lc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=FU(r.layoutBox,e):this.constraints=!1,this.elastic=$U(n),l!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Cs(g=>{this.constraints!==!1&&this.getAxisMotionValue(g)&&(this.constraints[g]=HU(r.layoutBox[g],this.constraints[g]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!lc(e))return!1;const r=e.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const u=kU(r,l.root,this.visualElement.getTransformPagePoint());let g=VU(l.layout.layoutBox,u);if(n){const y=n(TU(g));this.hasMutatedConstraints=!!y,y&&(g=sC(y))}return g}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:l,dragTransition:u,dragSnapToOrigin:g,onDragTransitionEnd:y}=this.getProps(),b=this.constraints||{},x=Cs(E=>{if(!rh(E,n,this.currentDirection))return;let A=b&&b[E]||{};g&&(A={min:0,max:0});const N=l?200:1e6,O=l?40:1e7,M={type:"inertia",velocity:r?e[E]:0,bounceStiffness:N,bounceDamping:O,timeConstant:750,restDelta:1,restSpeed:10,...u,...A};return this.startAxisValueAnimation(E,M)});return Promise.all(x).then(y)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Cm(this.visualElement,e),r.start(Pp(e,r,0,n,this.visualElement,!1))}stopAnimation(){Cs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Cs(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),l=r[n];return l||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Cs(n=>{const{drag:r}=this.getProps();if(!rh(n,r,this.currentDirection))return;const{projection:l}=this.visualElement,u=this.getAxisMotionValue(n);if(l&&l.layout){const{min:g,max:y}=l.layout.layoutBox[n];u.set(e[n]-An(g,y,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!lc(n)||!r||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};Cs(g=>{const y=this.getAxisMotionValue(g);if(y&&this.constraints!==!1){const b=y.get();l[g]=zU({min:b,max:b},this.constraints[g])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Cs(g=>{if(!rh(g,e,null))return;const y=this.getAxisMotionValue(g),{min:b,max:x}=this.constraints[g];y.set(An(b,x,l[g]))})}addListeners(){if(!this.visualElement.current)return;GU.set(this.visualElement,this);const e=this.visualElement.current,n=sf(e,"pointerdown",b=>{const{drag:x,dragListener:E=!0}=this.getProps();x&&E&&this.start(b)}),r=()=>{const{dragConstraints:b}=this.getProps();lc(b)&&b.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,u=l.addEventListener("measure",r);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),vn.read(r);const g=yf(window,"resize",()=>this.scalePositionWithinConstraints()),y=l.addEventListener("didUpdate",({delta:b,hasLayoutChanged:x})=>{this.isDragging&&x&&(Cs(E=>{const A=this.getAxisMotionValue(E);A&&(this.originPoint[E]+=b[E].translate,A.set(A.get()+b[E].translate))}),this.visualElement.render())});return()=>{g(),n(),u(),y&&y()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:l=!1,dragConstraints:u=!1,dragElastic:g=Nm,dragMomentum:y=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:l,dragConstraints:u,dragElastic:g,dragMomentum:y}}}function rh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function YU(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class XU extends co{constructor(e){super(e),this.removeGroupControls=Ts,this.removeListeners=Ts,this.controls=new qU(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ts}unmount(){this.removeGroupControls(),this.removeListeners()}}const ov=t=>(e,n)=>{t&&vn.postRender(()=>t(e,n))};class WU extends co{constructor(){super(...arguments),this.removePointerDownListener=Ts}onPointerDown(e){this.session=new fC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:uC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:l}=this.node.getProps();return{onSessionStart:ov(e),onStart:ov(n),onMove:r,onEnd:(u,g)=>{delete this.session,l&&vn.postRender(()=>l(u,g))}}}mount(){this.removePointerDownListener=sf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Pu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(dt.test(t))t=parseFloat(t);else return t;const n=lv(t,e.target.x),r=lv(t,e.target.y);return`${n}% ${r}%`}},KU={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,l=ao.parse(t);if(l.length>5)return r;const u=ao.createTransformer(t),g=typeof l[0]!="number"?1:0,y=n.x.scale*e.x,b=n.y.scale*e.y;l[0+g]/=y,l[1+g]/=b;const x=An(y,b,.5);return typeof l[2+g]=="number"&&(l[2+g]/=x),typeof l[3+g]=="number"&&(l[3+g]/=x),u(l)}};let cv=!1;class ZU extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:l}=this.props,{projection:u}=e;kP(QU),u&&(n.group&&n.group.add(u),r&&r.register&&l&&r.register(u),cv&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),hh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:l,isPresent:u}=this.props,{projection:g}=r;return g&&(g.isPresent=u,cv=!0,l||e.layoutDependency!==n||n===void 0||e.isPresent!==u?g.willUpdate():this.safeToRemove(),e.isPresent!==u&&(u?g.promote():g.relegate()||vn.postRender(()=>{const y=g.getStack();(!y||!y.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),_p.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:l}=e;l&&(l.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(l),r&&r.deregister&&r.deregister(l))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function hC(t){const[e,n]=FS(),r=R.useContext(sp);return C.jsx(ZU,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(GS),isPresent:e,safeToRemove:n})}const QU={borderRadius:{...Pu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pu,borderTopRightRadius:Pu,borderBottomLeftRadius:Pu,borderBottomRightRadius:Pu,boxShadow:KU};function JU(t,e,n){const r=Ri(t)?t:Tc(t);return r.start(Pp("",r,e,n)),r.animation}const eF=(t,e)=>t.depth-e.depth;class tF{constructor(){this.children=[],this.isDirty=!1}add(e){op(this.children,e),this.isDirty=!0}remove(e){lp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(eF),this.isDirty=!1,this.children.forEach(e)}}function nF(t,e){const n=Zi.now(),r=({timestamp:l})=>{const u=l-n;u>=e&&(ro(r),t(u-e))};return vn.setup(r,!0),()=>ro(r)}const gC=["TopLeft","TopRight","BottomLeft","BottomRight"],iF=gC.length,uv=t=>typeof t=="string"?parseFloat(t):t,fv=t=>typeof t=="number"||dt.test(t);function sF(t,e,n,r,l,u){l?(t.opacity=An(0,n.opacity??1,rF(r)),t.opacityExit=An(e.opacity??1,0,aF(r))):u&&(t.opacity=An(e.opacity??1,n.opacity??1,r));for(let g=0;g<iF;g++){const y=`border${gC[g]}Radius`;let b=dv(e,y),x=dv(n,y);if(b===void 0&&x===void 0)continue;b||(b=0),x||(x=0),b===0||x===0||fv(b)===fv(x)?(t[y]=Math.max(An(uv(b),uv(x),r),0),(wr.test(x)||wr.test(b))&&(t[y]+="%")):t[y]=x}(e.rotate||n.rotate)&&(t.rotate=An(e.rotate||0,n.rotate||0,r))}function dv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const rF=mC(0,.5,oS),aF=mC(.5,.95,Ts);function mC(t,e,n){return r=>r<t?0:r>e?1:n(df(t,e,r))}function hv(t,e){t.min=e.min,t.max=e.max}function Ss(t,e){hv(t.x,e.x),hv(t.y,e.y)}function gv(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function mv(t,e,n,r,l){return t-=e,t=Ih(t,1/n,r),l!==void 0&&(t=Ih(t,1/l,r)),t}function oF(t,e=0,n=1,r=.5,l,u=t,g=t){if(wr.test(e)&&(e=parseFloat(e),e=An(g.min,g.max,e/100)-g.min),typeof e!="number")return;let y=An(u.min,u.max,r);t===u&&(y-=e),t.min=mv(t.min,e,n,y,l),t.max=mv(t.max,e,n,y,l)}function pv(t,e,[n,r,l],u,g){oF(t,e[n],e[r],e[l],e.scale,u,g)}const lF=["x","scaleX","originX"],cF=["y","scaleY","originY"];function xv(t,e,n,r){pv(t.x,e,lF,n?n.x:void 0,r?r.x:void 0),pv(t.y,e,cF,n?n.y:void 0,r?r.y:void 0)}function yv(t){return t.translate===0&&t.scale===1}function pC(t){return yv(t.x)&&yv(t.y)}function bv(t,e){return t.min===e.min&&t.max===e.max}function uF(t,e){return bv(t.x,e.x)&&bv(t.y,e.y)}function wv(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function xC(t,e){return wv(t.x,e.x)&&wv(t.y,e.y)}function vv(t){return Bi(t.x)/Bi(t.y)}function Ev(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class fF{constructor(){this.members=[]}add(e){op(this.members,e),e.scheduleRender()}remove(e){if(lp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(l=>e===l);if(n===0)return!1;let r;for(let l=n;l>=0;l--){const u=this.members[l];if(u.isPresent!==!1){r=u;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:l}=e.options;l===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function dF(t,e,n){let r="";const l=t.x.translate/e.x,u=t.y.translate/e.y,g=(n==null?void 0:n.z)||0;if((l||u||g)&&(r=`translate3d(${l}px, ${u}px, ${g}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:x,rotate:E,rotateX:A,rotateY:N,skewX:O,skewY:M}=n;x&&(r=`perspective(${x}px) ${r}`),E&&(r+=`rotate(${E}deg) `),A&&(r+=`rotateX(${A}deg) `),N&&(r+=`rotateY(${N}deg) `),O&&(r+=`skewX(${O}deg) `),M&&(r+=`skewY(${M}deg) `)}const y=t.x.scale*e.x,b=t.y.scale*e.y;return(y!==1||b!==1)&&(r+=`scale(${y}, ${b})`),r||"none"}const Ag=["","X","Y","Z"],hF=1e3;let gF=0;function Tg(t,e,n,r){const{latestValues:l}=e;l[t]&&(n[t]=l[t],e.setStaticValue(t,0),r&&(r[t]=0))}function yC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=eC(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:l,layoutId:u}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",vn,!(l||u))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&yC(r)}function bC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:l}){return class{constructor(g={},y=e==null?void 0:e()){this.id=gF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(xF),this.nodes.forEach(vF),this.nodes.forEach(EF),this.nodes.forEach(yF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=g,this.root=y?y.root||y:this,this.path=y?[...y.path,y]:[],this.parent=y,this.depth=y?y.depth+1:0;for(let b=0;b<this.path.length;b++)this.path[b].shouldResetTransform=!0;this.root===this&&(this.nodes=new tF)}addEventListener(g,y){return this.eventHandlers.has(g)||this.eventHandlers.set(g,new fp),this.eventHandlers.get(g).add(y)}notifyListeners(g,...y){const b=this.eventHandlers.get(g);b&&b.notify(...y)}hasListeners(g){return this.eventHandlers.has(g)}mount(g){if(this.instance)return;this.isSVG=US(g)&&!dP(g),this.instance=g;const{layoutId:y,layout:b,visualElement:x}=this.options;if(x&&!x.current&&x.mount(g),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(b||y)&&(this.isLayoutDirty=!0),t){let E,A=0;const N=()=>this.root.updateBlockedByResize=!1;vn.read(()=>{A=window.innerWidth}),t(g,()=>{const O=window.innerWidth;O!==A&&(A=O,this.root.updateBlockedByResize=!0,E&&E(),E=nF(N,250),hh.hasAnimatedSinceResize&&(hh.hasAnimatedSinceResize=!1,this.nodes.forEach(Av)))})}y&&this.root.registerSharedNode(y,this),this.options.animate!==!1&&x&&(y||b)&&this.addEventListener("didUpdate",({delta:E,hasLayoutChanged:A,hasRelativeLayoutChanged:N,layout:O})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||x.getDefaultTransition()||_F,{onLayoutAnimationStart:j,onLayoutAnimationComplete:U}=x.getProps(),H=!this.targetLayout||!xC(this.targetLayout,O),q=!A&&N;if(this.options.layoutRoot||this.resumeFrom||q||A&&(H||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const B={...Ap(M,"layout"),onPlay:j,onComplete:U};(x.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B),this.setAnimationOrigin(E,q)}else A||Av(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=O})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const g=this.getStack();g&&g.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ro(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(SF),this.animationId++)}getTransformTemplate(){const{visualElement:g}=this.options;return g&&g.getProps().transformTemplate}willUpdate(g=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&yC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let E=0;E<this.path.length;E++){const A=this.path[E];A.shouldResetTransform=!0,A.updateScroll("snapshot"),A.options.layoutRoot&&A.willUpdate(!1)}const{layoutId:y,layout:b}=this.options;if(y===void 0&&!b)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),g&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Sv);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Cv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(wF),this.nodes.forEach(mF),this.nodes.forEach(pF)):this.nodes.forEach(Cv),this.clearAllSnapshots();const y=Zi.now();yi.delta=ea(0,1e3/60,y-yi.timestamp),yi.timestamp=y,yi.isProcessing=!0,pg.update.process(yi),pg.preRender.process(yi),pg.render.process(yi),yi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,_p.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bF),this.sharedNodes.forEach(CF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,vn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){vn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Bi(this.snapshot.measuredBox.x)&&!Bi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let b=0;b<this.path.length;b++)this.path[b].updateScroll();const g=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Fn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:y}=this.options;y&&y.notify("LayoutMeasure",this.layout.layoutBox,g?g.layoutBox:void 0)}updateScroll(g="measure"){let y=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===g&&(y=!1),y&&this.instance){const b=r(this.instance);this.scroll={animationId:this.root.animationId,phase:g,isRoot:b,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:b}}}resetTransform(){if(!l)return;const g=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,y=this.projectionDelta&&!pC(this.projectionDelta),b=this.getTransformTemplate(),x=b?b(this.latestValues,""):void 0,E=x!==this.prevTransformTemplateValue;g&&this.instance&&(y||Uo(this.latestValues)||E)&&(l(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(g=!0){const y=this.measurePageBox();let b=this.removeElementScroll(y);return g&&(b=this.removeTransform(b)),NF(b),{animationId:this.root.animationId,measuredBox:y,layoutBox:b,latestValues:{},source:this.id}}measurePageBox(){var x;const{visualElement:g}=this.options;if(!g)return Fn();const y=g.measureViewportBox();if(!(((x=this.scroll)==null?void 0:x.wasRoot)||this.path.some(RF))){const{scroll:E}=this.root;E&&(uc(y.x,E.offset.x),uc(y.y,E.offset.y))}return y}removeElementScroll(g){var b;const y=Fn();if(Ss(y,g),(b=this.scroll)!=null&&b.wasRoot)return y;for(let x=0;x<this.path.length;x++){const E=this.path[x],{scroll:A,options:N}=E;E!==this.root&&A&&N.layoutScroll&&(A.wasRoot&&Ss(y,g),uc(y.x,A.offset.x),uc(y.y,A.offset.y))}return y}applyTransform(g,y=!1){const b=Fn();Ss(b,g);for(let x=0;x<this.path.length;x++){const E=this.path[x];!y&&E.options.layoutScroll&&E.scroll&&E!==E.root&&fc(b,{x:-E.scroll.offset.x,y:-E.scroll.offset.y}),Uo(E.latestValues)&&fc(b,E.latestValues)}return Uo(this.latestValues)&&fc(b,this.latestValues),b}removeTransform(g){const y=Fn();Ss(y,g);for(let b=0;b<this.path.length;b++){const x=this.path[b];if(!x.instance||!Uo(x.latestValues))continue;Tm(x.latestValues)&&x.updateSnapshot();const E=Fn(),A=x.measurePageBox();Ss(E,A),xv(y,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,E)}return Uo(this.latestValues)&&xv(y,this.latestValues),y}setTargetDelta(g){this.targetDelta=g,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(g){this.options={...this.options,...g,crossfade:g.crossfade!==void 0?g.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==yi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(g=!1){var N;const y=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=y.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=y.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=y.isSharedProjectionDirty);const b=!!this.resumingFrom||this!==y;if(!(g||b&&this.isSharedProjectionDirty||this.isProjectionDirty||(N=this.parent)!=null&&N.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:E,layoutId:A}=this.options;if(!(!this.layout||!(E||A))){if(this.resolvedRelativeTargetAt=yi.timestamp,!this.targetDelta&&!this.relativeTarget){const O=this.getClosestProjectingParent();O&&O.layout&&this.animationProgress!==1?(this.relativeParent=O,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fn(),this.relativeTargetOrigin=Fn(),af(this.relativeTargetOrigin,this.layout.layoutBox,O.layout.layoutBox),Ss(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Fn(),this.targetWithTransforms=Fn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),DU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ss(this.target,this.layout.layoutBox),lC(this.target,this.targetDelta)):Ss(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const O=this.getClosestProjectingParent();O&&!!O.resumingFrom==!!this.resumingFrom&&!O.options.layoutScroll&&O.target&&this.animationProgress!==1?(this.relativeParent=O,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fn(),this.relativeTargetOrigin=Fn(),af(this.relativeTargetOrigin,this.target,O.target),Ss(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Tm(this.parent.latestValues)||oC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var M;const g=this.getLead(),y=!!this.resumingFrom||this!==g;let b=!0;if((this.isProjectionDirty||(M=this.parent)!=null&&M.isProjectionDirty)&&(b=!1),y&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(b=!1),this.resolvedRelativeTargetAt===yi.timestamp&&(b=!1),b)return;const{layout:x,layoutId:E}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||E))return;Ss(this.layoutCorrected,this.layout.layoutBox);const A=this.treeScale.x,N=this.treeScale.y;LU(this.layoutCorrected,this.treeScale,this.path,y),g.layout&&!g.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(g.target=g.layout.layoutBox,g.targetWithTransforms=Fn());const{target:O}=g;if(!O){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(gv(this.prevProjectionDelta.x,this.projectionDelta.x),gv(this.prevProjectionDelta.y,this.projectionDelta.y)),rf(this.projectionDelta,this.layoutCorrected,O,this.latestValues),(this.treeScale.x!==A||this.treeScale.y!==N||!Ev(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ev(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",O))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(g=!0){var y;if((y=this.options.visualElement)==null||y.scheduleRender(),g){const b=this.getStack();b&&b.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=cc(),this.projectionDelta=cc(),this.projectionDeltaWithTransform=cc()}setAnimationOrigin(g,y=!1){const b=this.snapshot,x=b?b.latestValues:{},E={...this.latestValues},A=cc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!y;const N=Fn(),O=b?b.source:void 0,M=this.layout?this.layout.source:void 0,j=O!==M,U=this.getStack(),H=!U||U.members.length<=1,q=!!(j&&!H&&this.options.crossfade===!0&&!this.path.some(TF));this.animationProgress=0;let B;this.mixTargetDelta=V=>{const G=V/1e3;Tv(A.x,g.x,G),Tv(A.y,g.y,G),this.setTargetDelta(A),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(af(N,this.layout.layoutBox,this.relativeParent.layout.layoutBox),AF(this.relativeTarget,this.relativeTargetOrigin,N,G),B&&uF(this.relativeTarget,B)&&(this.isProjectionDirty=!1),B||(B=Fn()),Ss(B,this.relativeTarget)),j&&(this.animationValues=E,sF(E,x,this.latestValues,G,q,H)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(g){var y,b,x;this.notifyListeners("animationStart"),(y=this.currentAnimation)==null||y.stop(),(x=(b=this.resumingFrom)==null?void 0:b.currentAnimation)==null||x.stop(),this.pendingAnimation&&(ro(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=vn.update(()=>{hh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Tc(0)),this.currentAnimation=JU(this.motionValue,[0,1e3],{...g,velocity:0,isSync:!0,onUpdate:E=>{this.mixTargetDelta(E),g.onUpdate&&g.onUpdate(E)},onStop:()=>{},onComplete:()=>{g.onComplete&&g.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const g=this.getStack();g&&g.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(hF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const g=this.getLead();let{targetWithTransforms:y,target:b,layout:x,latestValues:E}=g;if(!(!y||!b||!x)){if(this!==g&&this.layout&&x&&wC(this.options.animationType,this.layout.layoutBox,x.layoutBox)){b=this.target||Fn();const A=Bi(this.layout.layoutBox.x);b.x.min=g.target.x.min,b.x.max=b.x.min+A;const N=Bi(this.layout.layoutBox.y);b.y.min=g.target.y.min,b.y.max=b.y.min+N}Ss(y,b),fc(y,E),rf(this.projectionDeltaWithTransform,this.layoutCorrected,y,E)}}registerSharedNode(g,y){this.sharedNodes.has(g)||this.sharedNodes.set(g,new fF),this.sharedNodes.get(g).add(y);const x=y.options.initialPromotionConfig;y.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(y):void 0})}isLead(){const g=this.getStack();return g?g.lead===this:!0}getLead(){var y;const{layoutId:g}=this.options;return g?((y=this.getStack())==null?void 0:y.lead)||this:this}getPrevLead(){var y;const{layoutId:g}=this.options;return g?(y=this.getStack())==null?void 0:y.prevLead:void 0}getStack(){const{layoutId:g}=this.options;if(g)return this.root.sharedNodes.get(g)}promote({needsReset:g,transition:y,preserveFollowOpacity:b}={}){const x=this.getStack();x&&x.promote(this,b),g&&(this.projectionDelta=void 0,this.needsReset=!0),y&&this.setOptions({transition:y})}relegate(){const g=this.getStack();return g?g.relegate(this):!1}resetSkewAndRotation(){const{visualElement:g}=this.options;if(!g)return;let y=!1;const{latestValues:b}=g;if((b.z||b.rotate||b.rotateX||b.rotateY||b.rotateZ||b.skewX||b.skewY)&&(y=!0),!y)return;const x={};b.z&&Tg("z",g,x,this.animationValues);for(let E=0;E<Ag.length;E++)Tg(`rotate${Ag[E]}`,g,x,this.animationValues),Tg(`skew${Ag[E]}`,g,x,this.animationValues);g.render();for(const E in x)g.setStaticValue(E,x[E]),this.animationValues&&(this.animationValues[E]=x[E]);g.scheduleRender()}applyProjectionStyles(g,y){if(!this.instance||this.isSVG)return;if(!this.isVisible){g.visibility="hidden";return}const b=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,g.visibility="",g.opacity="",g.pointerEvents=dh(y==null?void 0:y.pointerEvents)||"",g.transform=b?b(this.latestValues,""):"none";return}const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=dh(y==null?void 0:y.pointerEvents)||""),this.hasProjected&&!Uo(this.latestValues)&&(g.transform=b?b({},""):"none",this.hasProjected=!1);return}g.visibility="";const E=x.animationValues||x.latestValues;this.applyTransformsToTarget();let A=dF(this.projectionDeltaWithTransform,this.treeScale,E);b&&(A=b(E,A)),g.transform=A;const{x:N,y:O}=this.projectionDelta;g.transformOrigin=`${N.origin*100}% ${O.origin*100}% 0`,x.animationValues?g.opacity=x===this?E.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:g.opacity=x===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const M in pf){if(E[M]===void 0)continue;const{correct:j,applyTo:U,isCSSVariable:H}=pf[M],q=A==="none"?E[M]:j(E[M],x);if(U){const B=U.length;for(let V=0;V<B;V++)g[U[V]]=q}else H?this.options.visualElement.renderState.vars[M]=q:g[M]=q}this.options.layoutId&&(g.pointerEvents=x===this?dh(y==null?void 0:y.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(g=>{var y;return(y=g.currentAnimation)==null?void 0:y.stop()}),this.root.nodes.forEach(Sv),this.root.sharedNodes.clear()}}}function mF(t){t.updateLayout()}function pF(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:l}=t.layout,{animationType:u}=t.options,g=e.source!==t.layout.source;u==="size"?Cs(A=>{const N=g?e.measuredBox[A]:e.layoutBox[A],O=Bi(N);N.min=r[A].min,N.max=N.min+O}):wC(u,e.layoutBox,r)&&Cs(A=>{const N=g?e.measuredBox[A]:e.layoutBox[A],O=Bi(r[A]);N.max=N.min+O,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[A].max=t.relativeTarget[A].min+O)});const y=cc();rf(y,r,e.layoutBox);const b=cc();g?rf(b,t.applyTransform(l,!0),e.measuredBox):rf(b,r,e.layoutBox);const x=!pC(y);let E=!1;if(!t.resumeFrom){const A=t.getClosestProjectingParent();if(A&&!A.resumeFrom){const{snapshot:N,layout:O}=A;if(N&&O){const M=Fn();af(M,e.layoutBox,N.layoutBox);const j=Fn();af(j,r,O.layoutBox),xC(M,j)||(E=!0),A.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=M,t.relativeParent=A)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:b,layoutDelta:y,hasLayoutChanged:x,hasRelativeLayoutChanged:E})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function xF(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function yF(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function bF(t){t.clearSnapshot()}function Sv(t){t.clearMeasurements()}function Cv(t){t.isLayoutDirty=!1}function wF(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Av(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function vF(t){t.resolveTargetDelta()}function EF(t){t.calcProjection()}function SF(t){t.resetSkewAndRotation()}function CF(t){t.removeLeadSnapshot()}function Tv(t,e,n){t.translate=An(e.translate,0,n),t.scale=An(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function _v(t,e,n,r){t.min=An(e.min,n.min,r),t.max=An(e.max,n.max,r)}function AF(t,e,n,r){_v(t.x,e.x,n.x,r),_v(t.y,e.y,n.y,r)}function TF(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const _F={duration:.45,ease:[.4,0,.1,1]},Nv=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Rv=Nv("applewebkit/")&&!Nv("chrome/")?Math.round:Ts;function Ov(t){t.min=Rv(t.min),t.max=Rv(t.max)}function NF(t){Ov(t.x),Ov(t.y)}function wC(t,e,n){return t==="position"||t==="preserve-aspect"&&!MU(vv(e),vv(n),.2)}function RF(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const OF=bC({attachResizeListener:(t,e)=>yf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_g={current:void 0},vC=bC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!_g.current){const t=new OF({});t.mount(window),t.setOptions({layoutScroll:!0}),_g.current=t}return _g.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),IF={pan:{Feature:WU},drag:{Feature:XU,ProjectionNode:vC,MeasureLayout:hC}};function Iv(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const l="onHover"+n,u=r[l];u&&vn.postRender(()=>u(e,Mf(e)))}class MF extends co{mount(){const{current:e}=this.node;e&&(this.unmount=oP(e,(n,r)=>(Iv(this.node,r,"Start"),l=>Iv(this.node,l,"End"))))}unmount(){}}class DF extends co{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Rf(yf(this.node.current,"focus",()=>this.onFocus()),yf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Mv(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const l="onTap"+(n==="End"?"":n),u=r[l];u&&vn.postRender(()=>u(e,Mf(e)))}class LF extends co{mount(){const{current:e}=this.node;e&&(this.unmount=fP(e,(n,r)=>(Mv(this.node,r,"Start"),(l,{success:u})=>Mv(this.node,l,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Rm=new WeakMap,Ng=new WeakMap,kF=t=>{const e=Rm.get(t.target);e&&e(t)},jF=t=>{t.forEach(kF)};function BF({root:t,...e}){const n=t||document;Ng.has(n)||Ng.set(n,{});const r=Ng.get(n),l=JSON.stringify(e);return r[l]||(r[l]=new IntersectionObserver(jF,{root:t,...e})),r[l]}function PF(t,e,n){const r=BF(e);return Rm.set(t,n),r.observe(t),()=>{Rm.delete(t),r.unobserve(t)}}const UF={some:0,all:1};class FF extends co{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:l="some",once:u}=e,g={root:n?n.current:void 0,rootMargin:r,threshold:typeof l=="number"?l:UF[l]},y=b=>{const{isIntersecting:x}=b;if(this.isInView===x||(this.isInView=x,u&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:E,onViewportLeave:A}=this.node.getProps(),N=x?E:A;N&&N(b)};return PF(this.node.current,g,y)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(VF(e,n))&&this.startObserver()}unmount(){}}function VF({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const zF={inView:{Feature:FF},tap:{Feature:LF},focus:{Feature:DF},hover:{Feature:MF}},HF={layout:{ProjectionNode:vC,MeasureLayout:hC}},Om={current:null},EC={current:!1};function $F(){if(EC.current=!0,!!ap)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Om.current=t.matches;t.addEventListener("change",e),e()}else Om.current=!1}const GF=new WeakMap;function qF(t,e,n){for(const r in e){const l=e[r],u=n[r];if(Ri(l))t.addValue(r,l);else if(Ri(u))t.addValue(r,Tc(l,{owner:t}));else if(u!==l)if(t.hasValue(r)){const g=t.getValue(r);g.liveStyle===!0?g.jump(l):g.hasAnimated||g.set(l)}else{const g=t.getStaticValue(r);t.addValue(r,Tc(g!==void 0?g:l,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Dv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class YF{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:l,blockInitialAnimation:u,visualState:g},y={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Sp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const N=Zi.now();this.renderScheduledAt<N&&(this.renderScheduledAt=N,vn.render(this.render,!1,!0))};const{latestValues:b,renderState:x}=g;this.latestValues=b,this.baseTarget={...b},this.initialValues=n.initial?{...b}:{},this.renderState=x,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=l,this.options=y,this.blockInitialAnimation=!!u,this.isControllingVariants=Qh(n),this.isVariantNode=HS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:E,...A}=this.scrapeMotionValuesFromProps(n,{},this);for(const N in A){const O=A[N];b[N]!==void 0&&Ri(O)&&O.set(b[N],!1)}}mount(e){this.current=e,GF.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),EC.current||$F(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Om.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ro(this.notifyUpdate),ro(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=jc.has(e);r&&this.onBindTransform&&this.onBindTransform();const l=n.on("change",y=>{this.latestValues[e]=y,this.props.onUpdate&&vn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),u=n.on("renderRequest",this.scheduleRender);let g;window.MotionCheckAppearSync&&(g=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{l(),u(),g&&g(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in _c){const n=_c[e];if(!n)continue;const{isEnabled:r,Feature:l}=n;if(!this.features[e]&&l&&r(this.props)&&(this.features[e]=new l(this)),this.features[e]){const u=this.features[e];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Fn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Dv.length;r++){const l=Dv[r];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const u="on"+l,g=e[u];g&&(this.propEventSubscriptions[l]=this.on(l,g))}this.prevMotionValues=qF(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Tc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(ZE(r)||JE(r))?r=parseFloat(r):!gP(r)&&ao.test(n)&&(r=LS(e,n)),this.setBaseTarget(e,Ri(r)?r.get():r)),Ri(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var u;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const g=jp(this.props,n,(u=this.presenceContext)==null?void 0:u.custom);g&&(r=g[e])}if(n&&r!==void 0)return r;const l=this.getBaseTargetFromProps(this.props,e);return l!==void 0&&!Ri(l)?l:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new fp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class SC extends YF{constructor(){super(...arguments),this.KeyframeResolver=nP}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ri(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function CC(t,{style:e,vars:n},r,l){const u=t.style;let g;for(g in e)u[g]=e[g];l==null||l.applyProjectionStyles(u,r);for(g in n)u.setProperty(g,n[g])}function XF(t){return window.getComputedStyle(t)}class WF extends SC{constructor(){super(...arguments),this.type="html",this.renderInstance=CC}readValueFromInstance(e,n){var r;if(jc.has(n))return(r=this.projection)!=null&&r.isProjecting?xm(n):vB(e,n);{const l=XF(e),u=(gp(n)?l.getPropertyValue(n):l[n])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(e,{transformPagePoint:n}){return cC(e,n)}build(e,n,r){Dp(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Bp(e,n,r)}}const AC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function KF(t,e,n,r){CC(t,e,void 0,r);for(const l in e.attrs)t.setAttribute(AC.has(l)?l:Mp(l),e.attrs[l])}class ZF extends SC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Fn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(jc.has(n)){const r=DS(n);return r&&r.default||0}return n=AC.has(n)?n:Mp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return JS(e,n,r)}build(e,n,r){WS(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,l){KF(e,n,r,l)}mount(e){this.isSVGTag=ZS(e.tagName),super.mount(e)}}const QF=(t,e)=>kp(t)?new ZF(e):new WF(e,{allowProjection:t!==R.Fragment}),JF=QP({...CU,...zF,...IF,...HF},QF),Wi=SP(JF);function eV(t){return Yn({queryKey:["review_count"],queryFn:async()=>{const[{data:e,error:n},{data:r,error:l}]=await Promise.all([Pe.from("applications").select("id",{count:"exact"}).eq("status","pending"),Pe.from("application_changes").select("id",{count:"exact"}).eq("status","pending")]);if(n||l)throw new Error((n==null?void 0:n.message)||(l==null?void 0:l.message)||"Failed to count reviews");return((e==null?void 0:e.length)||0)+((r==null?void 0:r.length)||0)},staleTime:1e4,enabled:t,initialData:0})}function tV({label:t,icon:e,color:n,onClick:r,badge:l}){return C.jsxs(Wi.button,{onClick:r,className:`relative ${n} text-white font-bold text-lg p-8
                  flex flex-col items-center gap-3 rounded-2xl shadow-lg
                  w-full min-w-[220px] min-h-[150px] transition-all`,whileHover:{scale:1.05},whileTap:{scale:.97},style:{boxShadow:"0 2px 20px 0 rgba(102,84,179,0.08)"},children:[e,C.jsx("span",{className:"mt-2",children:t}),l?C.jsx("span",{className:"absolute top-2 right-4 bg-red-500 text-white rounded-full text-base font-extrabold px-4 py-2 shadow-lg border-2 border-white",style:{minWidth:36,minHeight:36,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",lineHeight:1},children:l}):null]})}function nV(){const{t}=Xn(),e=Ns(),{user:n}=Uh(),r=(n==null?void 0:n.role)==="admin",{data:l}=eV(r),u=[{label:t("addNewStudent"),icon:C.jsx(j9,{className:"w-12 h-12"}),color:"bg-green-500 hover:bg-green-600",onClick:()=>e("/admissions")},{label:t("takeAttendance"),icon:C.jsx(p9,{className:"w-12 h-12"}),color:"bg-blue-500 hover:bg-blue-600",onClick:()=>e("/attendance")},{label:t("studentsActive"),icon:C.jsx(Jb,{className:"w-14 h-14"}),color:"bg-[#6654b3] hover:bg-[#5542a0]",onClick:()=>e("/myschool/students")},{label:t("studentsInactive"),icon:C.jsx(Jb,{className:"w-14 h-14"}),color:"bg-pink-400 hover:bg-pink-500",onClick:()=>e("/myschool/students/inactive")},{label:t("courses"),icon:C.jsx(u9,{className:"w-12 h-12"}),color:"bg-teal-500 hover:bg-teal-600",onClick:()=>e("/myschool/courses")},...r?[{label:t("review"),icon:C.jsx(o9,{className:"w-12 h-12"}),color:"bg-yellow-500 hover:bg-yellow-600",onClick:()=>e("/review"),badge:l&&l>0?l:null}]:[]];return C.jsxs("main",{className:"min-h-screen flex flex-col bg-[#f6f6f6]",children:[C.jsx("div",{className:"flex flex-col items-center pt-10 pb-6",children:C.jsx("p",{className:"text-lg text-[#6654b3] font-medium mb-6 text-center",children:t("homepageSlogan")})}),C.jsx("div",{className:"flex-1 flex flex-col items-center w-full",children:C.jsx("div",{className:"w-full max-w-5xl grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-7 p-5 sm:p-6",children:u.map(g=>C.jsx(tV,{...g},g.label))})})]})}function iV(t,e){switch(t.type){case"new_application":return e("newApplication",{name:t.payload.name||`${t.payload.first} ${t.payload.last}`});case"course_limit":return e("courseLimitReached",{name:t.payload.student_name});case"edit_request":return e("editRequestFrom",{name:t.payload.student_name});default:return e(t.type.replace(/_/g,""),t.payload)||t.type.replace(/_/g," ")}}function Lv(t){const e=new Set,n=[];for(const r of t){const l=`${r.type}_${r.payload.application_id??""}_${r.created_at}`;e.has(l)||(e.add(l),n.push(r))}return n}function sV(){const{t}=Xn(),e=Ns(),[n,r]=R.useState([]),[l,u]=R.useState(!0),g=R.useRef(null);R.useEffect(()=>{(async()=>{const{data:E,error:A}=await Pe.from("notifications").select("*").order("created_at",{ascending:!1}).limit(200);A?console.error(A):r(Lv(E)),u(!1)})()},[]),R.useEffect(()=>{if(!g.current)return g.current=Pe.channel("notifications_live").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications"},({new:E})=>r(A=>Lv([E,...A]))).subscribe(),()=>{g.current&&(Pe.removeChannel(g.current),g.current=null)}},[]);const y=async(E,A)=>{A==null||A.stopPropagation(),!E.read&&(r(N=>N.map(O=>O.id===E.id?{...O,read:!0}:O)),await Pe.from("notifications").update({read:!0}).eq("id",E.id))},b=E=>{switch(E.type){case"new_application":e(`/admissions?view=review&app=${E.payload.application_id}`);break;case"course_limit":case"edit_request":e(`/myschool/student/${E.student_id}`);break;default:return}y(E)};if(l)return C.jsx("p",{className:"p-8",children:t("loading")});const x=n.filter(E=>!E.read).length;return C.jsxs("div",{className:"p-4 sm:p-8 space-y-6 max-w-3xl mx-auto",children:[C.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[C.jsx(hE,{className:"w-6 h-6 text-[#6654b3]"}),C.jsxs("h1",{className:"text-2xl font-bold text-[#6654b3]",children:[t("notifications")," ",x>0&&C.jsxs("span",{className:"text-[#ec4899]",children:["(",x,")"]})]})]}),n.length===0?C.jsx("p",{className:"text-gray-600",children:t("noNotifications")}):C.jsx("ul",{className:"space-y-4",children:n.map(E=>C.jsx("li",{onClick:()=>b(E),className:`border rounded-xl p-4 cursor-pointer hover:bg-[#ede9fe] transition
                          ${E.read?"bg-white":"bg-purple-50"}`,children:C.jsxs("div",{className:"flex justify-between items-start gap-3",children:[C.jsxs("div",{children:[C.jsx("p",{className:"font-medium",children:iV(E,t)}),C.jsx("p",{className:"text-xs text-gray-500",children:new Date(E.created_at).toLocaleString()})]}),!E.read&&C.jsxs("button",{type:"button",onClick:A=>y(E,A),className:"text-[#6654b3] hover:underline text-xs flex items-center gap-1",children:[C.jsx(g9,{className:"w-4 h-4"})," ",t("markRead")]})]})},E.id))})]})}const rV=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],TC=[];for(let t=6;t<23;++t)TC.push(`${String(t).padStart(2,"0")}:00-${String(t+1).padStart(2,"0")}:00`);function aV(){return Yn({queryKey:["courses_full"],queryFn:async()=>{const{data:t,error:e}=await Pe.from("courses").select("id,name,weekdays,times,capacity,hour_packages").order("name");if(e)throw new Error(e.message);return t||[]},staleTime:12e4})}function oV(){return Yn({queryKey:["courseFilters"],queryFn:async()=>{const{data:t,error:e}=await Pe.from("courses").select("id,name,weekdays,times").order("name");if(e)throw new Error(e.message);return t||[]},staleTime:12e4})}function lV(t,e,n){return Yn({queryKey:["students",t,e,n],queryFn:async()=>{if(!t)return[];const{data:r,error:l}=await Pe.from("students").select("id,first_name,last_name,nick_name,courses");if(l)throw new Error(l.message);return r?e?n?r.filter(u=>{var y,b;return(((b=(y=u.courses)==null?void 0:y[t])==null?void 0:b[e])||[]).some(x=>x===n||x.startsWith(n.split("-")[0]))}):r.filter(u=>{var g,y;return(y=(g=u.courses)==null?void 0:g[t])==null?void 0:y[e]}):r.filter(u=>{var g;return(g=u.courses)==null?void 0:g[t]}):[]},enabled:!!t,staleTime:3e4})}function cV(){const{t}=Xn(),[e,n]=R.useState("check"),[r,l]=R.useState(""),[u,g]=R.useState(""),[y,b]=R.useState(""),{data:x=[],isLoading:E}=oV(),{data:A=[],isLoading:N}=lV(r,u,y);return C.jsx("div",{className:"min-h-screen bg-[#f6f6f6] flex flex-col items-center py-8 px-2",children:C.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[C.jsxs("div",{className:"flex mb-6 border-b border-purple-200",children:[C.jsx("button",{className:`px-5 py-3 font-bold rounded-t-2xl transition ${e==="check"?"bg-white text-[#6654b3] border-x border-t border-purple-200 border-b-0 shadow":"text-gray-400 hover:text-[#6654b3]"}`,onClick:()=>n("check"),children:t("checkCourses")}),C.jsx("button",{className:`ml-3 px-5 py-3 font-bold rounded-t-2xl transition ${e==="manage"?"bg-white text-[#6654b3] border-x border-t border-purple-200 border-b-0 shadow":"text-gray-400 hover:text-[#6654b3]"}`,onClick:()=>n("manage"),children:t("manageCourses")})]}),e==="check"?C.jsx(uV,{courseFilters:x,loadingCourses:E,courseId:r,setCourseId:l,day:u,setDay:g,time:y,setTime:b,filteredStudents:A,loadingStudents:N}):C.jsx(fV,{})]})})}function uV({courseFilters:t,courseId:e,setCourseId:n,day:r,setDay:l,time:u,setTime:g,filteredStudents:y,loadingStudents:b}){const{t:x}=Xn(),E=Ns(),A=t==null?void 0:t.find(M=>M.id===e),N=(A==null?void 0:A.weekdays)||[];let O=[];if(A&&r&&A.times&&A.times[r]){const j=(A.times[r]||[]).map(U=>{if(U.includes("-"))return U;const H=Number(U.slice(0,2));return!isNaN(H)&&H>=6&&H<23?`${U}-${String(H+1).padStart(2,"0")}:00`:U});O=Array.from(new Set(j)).sort()}return C.jsxs("div",{className:"w-full",children:[C.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[C.jsxs("select",{className:"px-4 py-2 rounded-xl border border-purple-200 text-[#6654b3] bg-white",value:e,onChange:M=>{n(M.target.value),l(""),g("")},children:[C.jsx("option",{value:"",children:x("selectCourse")}),t==null?void 0:t.map(M=>C.jsx("option",{value:M.id,children:M.name},M.id))]}),C.jsxs("select",{className:"px-4 py-2 rounded-xl border border-purple-200 text-[#6654b3] bg-white",value:r,onChange:M=>{l(M.target.value),g("")},disabled:!e,children:[C.jsx("option",{value:"",children:x("selectDay")}),N.map(M=>C.jsx("option",{children:M},M))]}),C.jsxs("select",{className:"px-4 py-2 rounded-xl border border-purple-200 text-[#6654b3] bg-white",value:u,onChange:M=>g(M.target.value),disabled:!e||!r,children:[C.jsx("option",{value:"",children:x("selectTime")}),O.map(M=>C.jsx("option",{children:M},M))]})]}),C.jsx("div",{children:e?b?C.jsx("div",{className:"text-center text-gray-400 py-8",children:x("loadingStudents")}):C.jsxs("table",{className:"w-full bg-white border border-purple-200 rounded-2xl",children:[C.jsx("thead",{children:C.jsxs("tr",{children:[C.jsx("th",{className:"py-3 px-2 text-left font-semibold text-[#6654b3]",children:"#"}),C.jsx("th",{className:"py-3 px-2 text-left font-semibold text-[#6654b3]",children:x("nickName")}),C.jsx("th",{className:"py-3 px-2 text-left font-semibold text-[#6654b3]",children:x("fullName")})]})}),C.jsx("tbody",{children:!y||y.length===0?C.jsx("tr",{children:C.jsx("td",{colSpan:3,className:"text-center text-gray-300 py-8",children:x("noStudentsFound")})}):y.map((M,j)=>C.jsxs("tr",{className:"hover:bg-purple-50 transition",children:[C.jsx("td",{className:"py-2 px-2",children:j+1}),C.jsx("td",{className:"py-2 px-2 text-[#6654b3] font-bold",children:M.nick_name||"—"}),C.jsxs("td",{className:"py-2 px-2 text-blue-700 font-semibold cursor-pointer hover:underline",onClick:()=>E(`/myschool/student/${M.id}`),children:[M.first_name," ",M.last_name]})]},M.id))})]}):C.jsx("div",{className:"text-center text-gray-400 py-8",children:x("Choose a course to see students")})})]})}function fV(){const{t}=Xn(),e=Mc(),{data:n=[],isLoading:r}=aV(),[l,u]=R.useState(null),[g,y]=R.useState(""),b=Ab({mutationFn:async B=>{const V={name:B.name,weekdays:B.weekdays,times:B.times,capacity:B.capacity,hour_packages:B.hour_packages};if(B.id){const{error:G}=await Pe.from("courses").update(V).eq("id",B.id);if(G)throw G}else{const{error:G}=await Pe.from("courses").insert([V]);if(G)throw G}},onSuccess:()=>{u(null),e.invalidateQueries({queryKey:["courses_full"]})},onError:B=>y(B.message)}),x=Ab({mutationFn:async B=>{if(!window.confirm(t("deleteCourseConfirm")))return;const{error:V}=await Pe.from("courses").delete().eq("id",B);if(V)throw V},onSuccess:()=>{e.invalidateQueries({queryKey:["courses_full"]})},onError:B=>y(B.message)});function E(B){u(B||{name:"",weekdays:[],times:{},capacity:0,hour_packages:[]}),y("")}function A(B){u(V=>{if(!V)return V;const G=V.weekdays.includes(B)?V.weekdays.filter(K=>K!==B):[...V.weekdays,B],ne={...V.times};return G.includes(B)||delete ne[B],{...V,weekdays:G,times:ne}})}function N(B,V){u(G=>G&&{...G,times:{...G.times,[B]:[...G.times[B]||[],V]}})}function O(B,V){u(G=>G&&{...G,times:{...G.times,[B]:G.times[B].filter((ne,K)=>K!==V)}})}function M(){u(B=>B&&{...B,hour_packages:[...B.hour_packages||[],{hours:1,price:0}]})}function j(B,V,G){u(ne=>{if(!ne)return ne;const K=[...ne.hour_packages||[]];return K[B][V]=G,{...ne,hour_packages:K}})}function U(B){u(V=>{if(!V)return V;const G=[...V.hour_packages||[]];return G.splice(B,1),{...V,hour_packages:G}})}function H(){if(!l||!l.name)return y(t("enterCourseName"));b.mutate(l)}function q(B){x.mutate(B)}return C.jsxs("div",{className:"relative bg-white rounded-3xl p-6",children:[C.jsx("h2",{className:"text-xl font-bold mb-4 text-[#6654b3]",children:t("manageCourses")}),r?C.jsx("p",{children:t("loadingCourses")}):C.jsxs(C.Fragment,{children:[C.jsxs("table",{className:"w-full mb-4 border border-purple-200 rounded-lg",children:[C.jsx("thead",{children:C.jsxs("tr",{children:[C.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("course")}),C.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("days")}),C.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("times")}),C.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("capacity")}),C.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("hourPackages")}),C.jsx("th",{className:"px-4 py-2"})]})}),C.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:n.map(B=>C.jsxs("tr",{className:"hover:bg-purple-50 transition",children:[C.jsx("td",{className:"px-4 py-2",children:B.name}),C.jsx("td",{className:"px-4 py-2",children:(B.weekdays||[]).join(", ")}),C.jsx("td",{className:"px-4 py-2",children:Object.entries(B.times||{}).map(([V,G])=>G.length?C.jsxs("div",{children:[V,": ",G.join(", ")]},V):null)}),C.jsx("td",{className:"px-4 py-2",children:B.capacity}),C.jsx("td",{className:"px-4 py-2",children:(B.hour_packages||[]).map((V,G)=>C.jsxs("div",{children:[V.hours," hours - ",V.price.toLocaleString()," THB"]},G))}),C.jsxs("td",{className:"px-4 py-2 space-x-2",children:[C.jsx("button",{onClick:()=>E(B),className:"bg-gray-100 hover:bg-gray-200 text-blue-600 px-3 py-1 rounded-full text-sm",children:t("edit")}),C.jsx("button",{onClick:()=>q(B.id),className:"bg-gray-100 hover:bg-gray-200 text-red-600 px-3 py-1 rounded-full text-sm",children:t("delete")})]})]},B.id))})]}),C.jsx("button",{onClick:()=>E(null),className:"bg-[#6654b3] hover:bg-purple-700 text-white px-4 py-2 rounded-full",children:t("addCourse")})]}),l&&C.jsxs("div",{className:"absolute inset-0 bg-white bg-opacity-95 rounded-3xl flex flex-col p-6 overflow-y-auto",children:[C.jsx("h3",{className:"text-lg font-bold mb-3 text-[#6654b3]",children:l.id?t("editCourse"):t("newCourse")}),C.jsxs("label",{className:"block mb-2",children:[t("courseName"),C.jsx("input",{className:"border rounded px-2 py-1 ml-2 w-full",value:l.name,onChange:B=>u(V=>V&&{...V,name:B.target.value})})]}),C.jsxs("label",{className:"block mb-2",children:[t("capacity"),C.jsx("input",{type:"number",min:0,className:"border rounded px-2 py-1 ml-2 w-24",value:l.capacity||0,onChange:B=>u(V=>V&&{...V,capacity:Number(B.target.value)})})]}),C.jsxs("div",{className:"mb-2",children:[C.jsxs("span",{className:"font-semibold",children:[t("days"),":"]}),C.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:rV.map(B=>C.jsxs("label",{className:`border rounded-full px-3 py-1 cursor-pointer ${l.weekdays.includes(B)?"bg-[#6654b3] text-white border-[#6654b3]":"border-gray-300"}`,children:[C.jsx("input",{type:"checkbox",className:"hidden",checked:l.weekdays.includes(B),onChange:()=>A(B)}),B]},B))})]}),l.weekdays.map(B=>C.jsxs("div",{className:"mb-2 ml-4",children:[C.jsx("span",{className:"font-semibold",children:t("timesForDay",{day:B})}),C.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[(l.times[B]||[]).map((V,G)=>C.jsxs("span",{className:"inline-flex items-center bg-gray-200 rounded-full px-3 py-1 mr-2",children:[V,C.jsx("button",{onClick:()=>O(B,G),className:"ml-1 text-red-500",children:"✕"})]},G)),C.jsxs("select",{className:"border rounded px-2 py-1 max-h-40 overflow-y-auto",defaultValue:"",onChange:V=>{V.target.value&&(N(B,V.target.value),V.target.value="")},children:[C.jsx("option",{value:"",children:t("addTime")}),TC.filter(V=>!(l.times[B]||[]).includes(V)).map(V=>C.jsx("option",{children:V},V))]})]})]},B)),C.jsxs("div",{className:"mb-2 mt-4",children:[C.jsx("span",{className:"font-semibold text-[#6654b3]",children:t("hourPackages")}),(l.hour_packages||[]).length===0&&C.jsx("div",{className:"text-gray-400 text-sm mt-1",children:t("noPackagesDefined")}),(l.hour_packages||[]).map((B,V)=>C.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[C.jsx("span",{className:"text-sm",children:t("hours")}),C.jsx("input",{type:"number",min:1,className:"border rounded px-2 py-1 w-20",value:B.hours,onChange:G=>j(V,"hours",Number(G.target.value)),placeholder:"Hours"}),C.jsx("span",{className:"text-sm",children:t("price")}),C.jsx("input",{type:"number",min:0,className:"border rounded px-2 py-1 w-24",value:B.price,onChange:G=>j(V,"price",Number(G.target.value)),placeholder:"Price"}),C.jsx("span",{className:"text-xs",children:"THB"}),C.jsx("button",{type:"button",className:"ml-2 text-red-500 font-bold",onClick:()=>U(V),children:"✕"})]},V)),C.jsx("button",{type:"button",className:"mt-2 bg-gray-100 px-2 py-1 rounded",onClick:M,children:t("addPackage")})]}),g&&C.jsx("p",{className:"text-red-600",children:g}),C.jsxs("div",{className:"flex gap-2 mt-4",children:[C.jsx("button",{onClick:H,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-full",disabled:b.status==="pending",children:t("save")}),C.jsx("button",{onClick:()=>u(null),className:"bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-full",children:t("cancel")})]})]})]})}const cs="#6654b3",dV="#f6f6f6";function hV(){return Pe.from("students").select("id,first_name,last_name,nick_name,parent_phone,parent_line_id,joined_at").order("joined_at",{ascending:!1})}function gV(){const{t}=Xn(),e=Ns(),[n,r]=R.useState(""),[l,u]=R.useState(new Set),[g,y]=R.useState(!1),{data:b,isLoading:x,error:E}=Yn({queryKey:["students"],queryFn:hV,staleTime:1e3*60*10,refetchOnWindowFocus:!1}),A=b&&"data"in b&&Array.isArray(b.data)?b.data:[],N=R.useMemo(()=>{const O=n.trim().toLowerCase();return O?A.filter(M=>(M.nick_name||"").toLowerCase().includes(O)||M.first_name.toLowerCase().includes(O)||M.last_name.toLowerCase().includes(O)||M.parent_phone.includes(O)||(M.parent_line_id||"").toLowerCase().includes(O)):A},[A,n]);return C.jsxs("div",{className:"min-h-screen flex flex-col items-center py-8 px-2 sm:px-6 font-sans",style:{background:dV},children:[C.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-3 pb-4",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("h1",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight",style:{color:cs},children:t("students")}),C.jsx("span",{className:"ml-2 px-3 py-1 rounded-full text-lg font-semibold",style:{background:"#ebe7f7",color:cs,border:"1px solid #e1def5"},children:A.length})]}),C.jsxs("div",{className:"flex gap-2 mt-3 sm:mt-0",children:[C.jsx("input",{type:"text",placeholder:t("searchStudents"),value:n,onChange:O=>r(O.target.value),className:"rounded-2xl border border-[#e1def5] px-4 py-2 bg-white shadow focus:outline-none focus:ring-2 focus:ring-[#6654b3] transition w-56",style:{color:cs}}),C.jsxs("button",{onClick:()=>e("/admissions"),className:"flex items-center gap-1 font-semibold px-4 py-2 rounded-2xl transition active:scale-95",style:{background:cs,color:"#fff",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.06)"},children:[C.jsx(Zm,{className:"w-5 h-5"})," ",t("addStudent")]}),C.jsxs("button",{onClick:()=>y(!0),disabled:!l.size,className:"flex items-center gap-1 font-semibold px-4 py-2 rounded-2xl transition active:scale-95 disabled:opacity-60",style:{background:"#ec4899",color:"#fff",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.02)"},children:[C.jsx(nw,{className:"w-5 h-5"})," ",t("export")]})]})]}),C.jsx("div",{className:"w-full max-w-6xl mx-auto overflow-x-auto",children:x?C.jsx("div",{className:"text-center text-[#a7a3c0] py-10",children:t("loading")}):E?C.jsx("div",{className:"text-red-500 py-10 text-center",children:E.message||E.toString()}):C.jsxs("table",{className:"w-full min-w-[650px] rounded-2xl",style:{background:"#fff",borderCollapse:"separate",borderSpacing:0,boxShadow:"0 2px 18px 0 rgba(102,84,179,0.05)",border:"1.5px solid #e1def5"},children:[C.jsx("thead",{style:{background:"#f6f6f6"},children:C.jsxs("tr",{children:[C.jsx("th",{className:"px-2 py-3 rounded-l-2xl",children:C.jsx("input",{type:"checkbox",className:"accent-[#6654b3]",checked:N.length>0&&N.every(O=>l.has(O.id)),onChange:O=>{const M=new Set(l);O.target.checked?N.forEach(j=>M.add(j.id)):N.forEach(j=>M.delete(j.id)),u(M)}})}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:cs},children:"#"}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:cs},children:t("nickName")}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:cs},children:t("firstName")}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:cs},children:t("lastName")}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:cs},children:t("parentPhone")}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:cs},children:t("lineID")})]})}),C.jsx("tbody",{children:N.length===0?C.jsx("tr",{children:C.jsx("td",{colSpan:7,className:"text-center text-[#b0b0b0] py-8",children:t("noStudentsFound")})}):N.map((O,M)=>C.jsxs("tr",{className:"transition",style:{animation:"fadein 0.3s",background:l.has(O.id)?"#f6e6fa":"inherit"},children:[C.jsx("td",{className:"px-2 py-2 text-center align-middle",children:C.jsx("input",{type:"checkbox",className:"accent-[#6654b3]",checked:l.has(O.id),onChange:j=>{const U=new Set(l);j.target.checked?U.add(O.id):U.delete(O.id),u(U)}})}),C.jsx("td",{className:"px-2 py-2 align-middle",children:M+1}),C.jsx("td",{className:"px-2 py-2 align-middle font-semibold",style:{color:cs},children:O.nick_name||C.jsx("span",{className:"text-[#d3d3e0]",children:"—"})}),C.jsx("td",{className:"px-2 py-2 align-middle font-semibold cursor-pointer hover:underline",style:{color:"#3a38a0"},onClick:()=>e(`/myschool/student/${O.id}`),children:O.first_name}),C.jsx("td",{className:"px-2 py-2 align-middle",children:O.last_name}),C.jsx("td",{className:"px-2 py-2 align-middle font-mono",children:O.parent_phone}),C.jsx("td",{className:"px-2 py-2 align-middle",children:C.jsx("span",{className:"rounded-xl px-2 py-1 text-xs font-semibold",style:{background:"#ebe7f7",color:cs,border:"1px solid #e1def5"},children:O.parent_line_id||"—"})})]},O.id))})]})}),g&&C.jsx("div",{className:"fixed z-50 inset-0 bg-black/40 flex items-center justify-center",children:C.jsxs("div",{className:"rounded-2xl shadow-lg p-6 max-w-md w-full relative",style:{background:"#fff"},children:[C.jsx("button",{className:"absolute right-4 top-4 text-[#c2bce5] hover:text-[#ec4899]",onClick:()=>y(!1),children:C.jsx(io,{className:"w-6 h-6"})}),C.jsx("h2",{className:"text-lg font-bold mb-3",style:{color:"#ec4899"},children:t("exportStudents",{count:l.size})}),C.jsxs("div",{className:"flex gap-2 justify-between",children:[C.jsxs("button",{onClick:()=>{const O=A.filter(V=>l.has(V.id)),M=[t("no"),t("nickName"),t("firstName"),t("lastName"),t("parentPhone"),t("lineID")],j=O.map((V,G)=>[G+1,`"${V.nick_name||""}"`,`"${V.first_name}"`,`"${V.last_name}"`,`"${V.parent_phone}"`,`"${V.parent_line_id||""}"`]),U=[M,...j].map(V=>V.join(",")).join(`
`),H=new Blob([U],{type:"text/csv"}),q=URL.createObjectURL(H),B=document.createElement("a");B.href=q,B.download=`students_export_${Date.now()}.csv`,B.click(),URL.revokeObjectURL(q),y(!1)},className:"rounded-xl px-4 py-2 font-semibold flex items-center gap-1",style:{background:"#34d399",color:"#fff"},children:[C.jsx(nw,{className:"w-5 h-5"})," ",t("exportCSV")]}),C.jsxs("button",{onClick:()=>{window.print(),y(!1)},className:"rounded-xl px-4 py-2 font-semibold flex items-center gap-1",style:{background:cs,color:"#fff"},children:[C.jsx(yE,{className:"w-5 h-5"})," ",t("print")]})]})]})}),C.jsx("style",{children:`
        @keyframes fadein { from { opacity:0; transform: scale(0.98);} to { opacity:1; transform: scale(1);} }
      `})]})}const kv=["bg-pink-50","bg-blue-50","bg-yellow-50","bg-purple-50","bg-green-50","bg-indigo-50"];function mV(t){return kv[t%kv.length]}async function pV(){const{data:{user:t}}=await Pe.auth.getUser();if(!t)return{id:null,role:null};const{data:e}=await Pe.from("profiles").select("role").eq("id",t.id).single();return{id:t.id,role:(e==null?void 0:e.role)||null}}function xV(t){return Yn({queryKey:["student",t],queryFn:async()=>{const{data:e}=await Pe.from("students").select("*").eq("id",t).single();return e},enabled:!!t,staleTime:3e5})}function yV(){return Yn({queryKey:["courses"],queryFn:async()=>{const{data:t}=await Pe.from("courses").select("*").order("name");return t??[]},staleTime:3e5})}function bV(t){return Yn({queryKey:["attendance",t],queryFn:async()=>{const{data:e}=await Pe.from("attendance").select("*").eq("student_id",t);return e||[]},enabled:!!t,staleTime:12e4})}function wV(t){return Yn({queryKey:["appchanges",t],queryFn:async()=>{const{data:e}=await Pe.from("application_changes").select("*").eq("student_id",t);return e||[]},enabled:!!t,staleTime:12e4})}function vV(){return Yn({queryKey:["profile"],queryFn:pV,staleTime:12e4})}function EV({msg:t,onClear:e}){return ut.useEffect(()=>{if(!t)return;const n=setTimeout(e,3500);return()=>clearTimeout(n)},[t,e]),t?C.jsx("div",{className:"fixed left-1/2 -translate-x-1/2 bottom-8 z-50 bg-[#6654b3] text-white rounded-2xl px-8 py-3 shadow-xl text-lg font-semibold fade-in",children:t}):null}function SV(){var yt,mt,Te,Re,et,Ct,vt,Wt,$t;const{t,i18n:e}=Xn(),{id:n}=T3(),r=Ns(),l=Mc(),{data:u}=vV(),{data:g,isLoading:y}=xV(n),{data:b}=yV(),{data:x}=bV(n),{data:E}=wV(n),[A,N]=R.useState(!1),[O,M]=R.useState(null),[j,U]=R.useState(null),[H,q]=R.useState(null),[B,V]=R.useState(null),[G,ne]=R.useState(null),[K,ae]=R.useState(!1),[Q,we]=R.useState(null),[je,_e]=R.useState(null),[he,Ue]=R.useState(null),[ie,se]=R.useState(!1),[ce,Le]=R.useState(null),[Ve,Y]=R.useState(null),[X,le]=R.useState(""),oe=R.useMemo(()=>Object.fromEntries((b||[]).map(Oe=>[Oe.id,Oe])),[b]);function Ne(){return g!=null&&g.courses?Object.keys(g.courses).map((Oe,Xe)=>{var Dt,Gt,rt;const We=oe[Oe];return{cid:Oe,idx:Xe,course:We,days:g.courses[Oe],hours:((Dt=g.course_limits)==null?void 0:Dt[Oe])||0,cancelled_at:((Gt=g.cancelled_at)==null?void 0:Gt[Oe])||null,cancelled_by:((rt=g.cancelled_by)==null?void 0:rt[Oe])||null}}):[]}function Ye(Oe){var Gt;const Xe=Array.isArray(g==null?void 0:g.payment_receipt_urls)?g.payment_receipt_urls:[],We=((Gt=g==null?void 0:g.receipts)==null?void 0:Gt[Oe])||[],Dt=(E||[]).filter(rt=>{var Et,De,ct,_t,Rt,Pi,bi;return(((De=(Et=rt.changes)==null?void 0:Et.course_limits)==null?void 0:De[Oe])||((_t=(ct=rt.changes)==null?void 0:ct.course_changes)==null?void 0:_t[Oe]))&&(((Pi=(Rt=rt.changes)==null?void 0:Rt.receipts)==null?void 0:Pi.length)||((bi=rt.receipt_urls)==null?void 0:bi.length))}).flatMap(rt=>{var Et,De,ct;return(De=(Et=rt.changes)==null?void 0:Et.receipts)!=null&&De.length?rt.changes.receipts:(ct=rt.receipt_urls)!=null&&ct.length?rt.receipt_urls:[]});return[...Xe,...We,...Dt]}function be(Oe){return(x||[]).filter(Xe=>Xe.course_id===Oe)}function ht(Oe){var Dt;const Xe=be(Oe).length,We=((Dt=g==null?void 0:g.course_limits)==null?void 0:Dt[Oe])||0;return{used:Xe,purchased:We,left:Math.max(0,We-Xe),status:We-Xe>0?t("ongoing"):t("renewalNeeded")}}async function Ge(Oe){if(!g||!u||!u.id){le(e.language.startsWith("th")?"ไม่สามารถยกเลิกคอร์สได้ โปรไฟล์ไม่สมบูรณ์":"Unable to cancel course. Profile missing.");return}await Pe.from("application_changes").insert([{student_id:g.id,type:"cancel",status:"pending",changes:{cancel_course:Oe}}]),le(e.language.startsWith("th")?"ส่งคำขอยกเลิกคอร์สแล้ว รอการอนุมัติ":"Course cancellation request submitted for review."),l.invalidateQueries({queryKey:["appchanges",n]})}const Mt=O&&((yt=oe[O])==null?void 0:yt.hour_packages)||[],xn=B!==null?Mt[B]:void 0,Ae=xn?xn.price:0;async function Fe(){if(!O||!j||!H||B==null||!G){le(e.language.startsWith("th")?"กรุณาแนบหลักฐานการชำระเงิน":"Please upload payment receipt");return}if(!g){le(e.language.startsWith("th")?"ไม่พบข้อมูลนักเรียน":"Student not loaded");return}const Oe=G,Xe=`${Date.now()}-${Oe.name}`,{data:We,error:Dt}=await Pe.storage.from("receipts").upload(Xe,Oe);if(Dt){le(Dt.message);return}const{data:Gt}=Pe.storage.from("receipts").getPublicUrl(We.path),rt=xn,Et=[{course_id:O,course_name:oe[O].name,hours:rt.hours,price:rt.price,day:j,time:H}];await Pe.from("application_changes").insert([{student_id:g.id,type:"edit",status:"pending",changes:{course_changes:{[O]:{[j]:[H]}},course_limits:{[O]:rt.hours},purchased_packages:Et,total_price:rt.price,receipts:[Gt.publicUrl]}}]),N(!1),M(null),U(null),q(null),V(null),ne(null),ae(!1),le(e.language.startsWith("th")?"ส่งคำขอเพิ่มคอร์สแล้ว รอการอนุมัติ":"Add course request submitted for review."),l.invalidateQueries({queryKey:["appchanges",n]})}const Be=Q&&((mt=oe[Q])==null?void 0:mt.hour_packages)||[],nt=je!==null?Be[je]:void 0,Ke=nt?nt.price:0;async function xt(){if(!Q||je==null||!he){le(e.language.startsWith("th")?"กรุณาแนบหลักฐานการชำระเงิน":"Please upload payment receipt");return}if(!g){le(e.language.startsWith("th")?"ไม่พบข้อมูลนักเรียน":"Student not loaded");return}const Oe=he,Xe=`${Date.now()}-${Oe.name}`,{data:We,error:Dt}=await Pe.storage.from("receipts").upload(Xe,Oe);if(Dt){le(Dt.message);return}const{data:Gt}=Pe.storage.from("receipts").getPublicUrl(We.path),rt=nt,Et=[{course_id:Q,course_name:oe[Q].name,hours:rt.hours,price:rt.price}];await Pe.from("application_changes").insert([{student_id:g.id,type:"renewal",status:"pending",changes:{course_limits:{[Q]:rt.hours},purchased_packages:Et,total_price:rt.price,receipts:[Gt.publicUrl]}}]),we(null),_e(null),Ue(null),se(!1),le(e.language.startsWith("th")?"ส่งคำขอต่ออายุเรียบร้อยแล้ว":"Renewal request submitted."),l.invalidateQueries({queryKey:["appchanges",n]})}function lt({urls:Oe,title:Xe}){return C.jsx(Ki,{open:!!Oe,onClose:()=>Le(null),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:C.jsxs(Ki.Panel,{className:"bg-white rounded-2xl p-6 max-w-lg w-full shadow-2xl relative",children:[C.jsx("button",{type:"button",onClick:()=>Le(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:C.jsx(io,{className:"w-6 h-6"})}),C.jsxs("h2",{className:"text-lg font-bold mb-2",children:[Xe," ",t("receipt")]}),C.jsx("div",{className:"space-y-3",children:Oe.map(We=>C.jsxs("div",{className:"rounded-lg border bg-gray-50 px-3 py-2 flex items-center gap-3",children:[C.jsx("span",{className:"flex-1 truncate",children:We.split("/").slice(-1)[0]}),C.jsx("button",{type:"button",className:"text-blue-600 hover:underline text-sm",onClick:()=>window.open(We,"_blank"),children:t("open")}),C.jsx("button",{type:"button",className:"text-green-600 hover:underline text-sm",onClick:async()=>{const Gt=await(await fetch(We)).blob(),rt=document.createElement("a");rt.href=URL.createObjectURL(Gt),rt.download=We.split("/").slice(-1)[0],rt.click()},children:t("download")}),C.jsx("button",{type:"button",className:"text-pink-600 hover:underline text-sm",onClick:()=>{const Dt=document.createElement("iframe");Dt.style.position="fixed",Dt.style.right="0",Dt.style.top="0",Dt.style.width="0",Dt.style.height="0",Dt.src=We,document.body.appendChild(Dt),Dt.onload=()=>{var Gt;(Gt=Dt.contentWindow)==null||Gt.print(),setTimeout(()=>document.body.removeChild(Dt),1e3)}},children:t("print")})]},We))})]})})}return y||!u||!b||!x||!E?C.jsxs("div",{className:"min-h-[300px] flex items-center justify-center",children:[C.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full bg-pink-300 mr-2"}),C.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full bg-blue-200 mr-2"}),C.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full bg-yellow-200"})]}):g?C.jsx("div",{className:"p-0 min-h-screen",style:{background:"#f6f6f6"},children:C.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-2 sm:px-10 space-y-8",children:[C.jsx(EV,{msg:X,onClear:()=>le("")}),C.jsx("div",{className:"flex justify-end w-full",children:(u==null?void 0:u.role)==="admin"&&C.jsxs("button",{type:"button",onClick:async()=>{window.confirm(t("deleteStudentConfirm"))&&(await Pe.from("students").delete().eq("id",g.id),r("/myschool/students"))},className:"rounded-full px-3 py-2 bg-red-50 border border-red-200 text-red-600 hover:bg-red-100 flex items-center gap-1",children:[C.jsx(bE,{className:"w-5 h-5"})," ",t("deleteStudent")]})}),C.jsxs("div",{className:"bg-white rounded-2xl px-6 py-4 flex flex-col gap-2 border border-[#ece6fc]",children:[C.jsxs("div",{className:"font-bold text-2xl text-[#6654b3] mb-1",children:[g.first_name," ",g.last_name]}),C.jsxs("div",{className:"flex flex-wrap gap-x-8 gap-y-1 text-gray-700 text-sm",children:[C.jsxs("div",{children:[C.jsxs("span",{className:"font-semibold text-gray-900",children:[t("dob"),":"]})," ",g.dob?new Date(g.dob).toLocaleDateString("en-GB"):"—"]}),C.jsxs("div",{children:[C.jsxs("span",{className:"font-semibold text-gray-900",children:[t("phone"),":"]})," ",g.parent_phone]}),C.jsxs("div",{children:[C.jsxs("span",{className:"font-semibold text-gray-900",children:[t("lineId"),":"]})," ",g.parent_line_id]}),C.jsxs("div",{children:[C.jsxs("span",{className:"font-semibold text-gray-900",children:[t("joined"),":"]})," ",g.joined_at?new Date(g.joined_at).toLocaleDateString("en-GB"):"—"]})]})]}),Array.isArray(g==null?void 0:g.purchased_packages)&&g.purchased_packages.length>0&&C.jsxs("div",{className:"mb-2",children:[C.jsx("div",{className:"font-bold text-[#6654b3] mb-1",children:t("purchasedPackages")}),C.jsx("ul",{children:g.purchased_packages.map(Oe=>C.jsxs("li",{children:[Oe.course_name,": ",Oe.hours," ",t("hoursLabel",{count:Oe.hours})," – ",Oe.price.toLocaleString()," ",t("baht")]},Oe.course_id+Oe.hours))}),C.jsxs("div",{className:"mt-1 font-semibold",children:[t("totalPrice"),": ",(Te=g.total_price)==null?void 0:Te.toLocaleString()," ",t("baht")]})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("div",{className:"text-lg font-semibold text-[#6654b3]",children:t("enrolledCourses")}),C.jsxs("button",{type:"button",onClick:()=>N(!0),className:"rounded-full bg-[#ece6fc] text-[#6654b3] border border-[#6654b3] px-3 py-2 hover:bg-[#e4d8fd] flex items-center gap-1 transition",children:[C.jsx(Zm,{className:"w-5 h-5"})," ",t("addCourse")]})]}),C.jsx("div",{className:"rounded-3xl overflow-x-auto border border-[#ece6fc] bg-white",children:C.jsxs("table",{className:"w-full min-w-[700px] text-sm",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-white",children:[C.jsx("th",{className:"px-4 py-3 text-left font-semibold text-[#6654b3] rounded-tl-3xl",children:"#"}),C.jsx("th",{className:"px-4 py-3 text-left font-semibold text-[#6654b3]",children:t("course")}),C.jsx("th",{className:"px-4 py-3 text-left font-semibold text-[#6654b3]",children:t("daysTimes")}),C.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("hoursLeft")}),C.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("status")}),C.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("receipt")}),C.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("actions")}),C.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3] rounded-tr-3xl",children:t("attendance")})]})}),C.jsx("tbody",{children:Ne().map(({cid:Oe,idx:Xe,course:We,days:Dt,cancelled_at:Gt})=>{const rt=mV(Xe),Et=Ye(Oe),De=be(Oe),{purchased:ct,left:_t,status:Rt}=ht(Oe),Pi=!!Gt;return C.jsxs(ut.Fragment,{children:[C.jsxs("tr",{className:zo(rt,"transition",Pi?"bg-red-100/70 text-red-600 opacity-80":"hover:bg-[#ece6fc]/70"),children:[C.jsx("td",{className:"px-4 py-3 text-center",children:Xe+1}),C.jsx("td",{className:"px-4 py-3",children:(We==null?void 0:We.name)||Oe}),C.jsx("td",{className:"px-4 py-3",children:Object.entries(Dt).map(([bi,sa])=>C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("span",{className:"font-bold",children:bi}),Array.isArray(sa)&&sa.map(Lt=>C.jsx("span",{className:"inline-flex items-center ml-2",children:Lt},Lt))]},bi))}),C.jsxs("td",{className:"px-4 py-3 text-center font-mono font-semibold",children:[_t," / ",ct]}),C.jsx("td",{className:"px-4 py-3 text-center",children:Rt===t("ongoing")?C.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-50 text-green-600 text-xs font-semibold",children:[C.jsx(pE,{className:"w-4 h-4"})," ",t("ongoing")]}):C.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-50 text-yellow-600 text-xs font-semibold",children:[C.jsx(xE,{className:"w-4 h-4"})," ",t("renewalNeeded")]})}),C.jsx("td",{className:"px-4 py-3 text-center",children:Et.length>0?C.jsx("button",{type:"button",className:"rounded-full px-2 py-1 bg-[#f6d6ec] text-[#b03580] hover:bg-pink-200 text-xs",onClick:()=>Le({urls:Et,title:We==null?void 0:We.name}),children:t("viewReceipts",{count:Et.length})}):C.jsx("span",{className:"text-gray-300 text-xs",children:"—"})}),C.jsx("td",{className:"px-4 py-3 text-center",children:C.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[C.jsx("button",{type:"button",className:zo("rounded-full px-2 py-1 text-xs","bg-[#ece6fc] text-[#6654b3] hover:bg-purple-100",Rt!==t("renewalNeeded")&&"opacity-50 pointer-events-none"),onClick:()=>we(Oe),children:t("renew")}),!Pi&&C.jsx("button",{type:"button",className:"rounded-full px-2 py-1 bg-red-50 text-red-700 hover:bg-red-100 text-xs",onClick:()=>Ge(Oe),children:t("cancel")}),Pi&&C.jsxs("span",{className:"block text-xs mt-1 text-red-400",children:[t("cancelled"),C.jsx("br",{}),Gt?new Date(Gt).toLocaleDateString("en-GB"):""]})]})}),C.jsx("td",{className:"px-4 py-3 text-center",children:C.jsx("button",{type:"button",className:"rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 text-xs px-2 py-1 flex items-center gap-1",onClick:()=>Y(Ve===Oe?null:Oe),children:Ve===Oe?C.jsxs(C.Fragment,{children:[C.jsx(Wm,{className:"w-4 h-4"})," ",t("hide")]}):C.jsxs(C.Fragment,{children:[C.jsx(Km,{className:"w-4 h-4"})," ",t("view")]})})})]}),Ve===Oe&&C.jsx("tr",{children:C.jsx("td",{colSpan:8,className:"bg-white/90",children:C.jsxs("div",{className:"px-4 py-2 text-sm",children:[C.jsx("div",{className:"font-bold text-gray-700 mb-1",children:t("attendanceHistory")}),C.jsxs("div",{className:"flex flex-col gap-1",children:[De.map(bi=>C.jsxs("div",{className:"flex items-center justify-between border-b last:border-0 border-dashed border-gray-200 py-1 px-2",children:[C.jsx("span",{children:new Date(bi.attended_at_ts).toLocaleString("en-GB",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),C.jsx("button",{type:"button",className:"rounded-full px-2 py-0.5 bg-gray-100 text-gray-600 text-xs hover:bg-blue-50",onClick:()=>navigator.clipboard.writeText(bi.attended_at_ts),children:t("copy")})]},bi.id)),De.length===0&&C.jsx("div",{className:"text-gray-400",children:t("noRecords")})]})]})})})]},Oe)})})]})})]}),C.jsx(Ki,{open:A,onClose:()=>N(!1),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:C.jsxs(Ki.Panel,{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[C.jsx("button",{type:"button",onClick:()=>N(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:C.jsx(io,{className:"w-6 h-6"})}),C.jsx("h2",{className:"font-bold text-lg mb-3",children:t("addNewCourse")}),C.jsxs("div",{className:"space-y-2",children:[C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("course")}),C.jsxs("select",{className:"w-full rounded border px-2 py-1",value:O||"",onChange:Oe=>{M(Oe.target.value),U(null),q(null),V(null),ae(!1)},children:[C.jsx("option",{value:"",children:t("select")}),b.filter(Oe=>!(g.courses||{})[Oe.id]).map(Oe=>C.jsx("option",{value:Oe.id,children:Oe.name},Oe.id))]})]}),O&&C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("day")}),C.jsxs("select",{className:"w-full rounded border px-2 py-1",value:j||"",onChange:Oe=>{U(Oe.target.value),q(null)},children:[C.jsx("option",{value:"",children:t("select")}),(((Re=oe[O])==null?void 0:Re.weekdays)||[]).map(Oe=>C.jsx("option",{children:Oe},Oe))]})]}),j&&O&&C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("timeSlot")}),C.jsxs("select",{className:"w-full rounded border px-2 py-1",value:H||"",onChange:Oe=>q(Oe.target.value),children:[C.jsx("option",{value:"",children:t("select")}),(((Ct=(et=oe[O])==null?void 0:et.times)==null?void 0:Ct[j])||[]).map(Oe=>C.jsx("option",{children:Oe},Oe))]})]}),O&&C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("chooseHourPackage")}),C.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:Mt.map((Oe,Xe)=>C.jsxs("label",{className:zo("cursor-pointer border rounded-full px-4 py-2 text-sm font-semibold transition",B===Xe?"bg-[#6654b3] text-white border-[#6654b3]":"bg-white border-gray-300 text-[#6654b3] hover:bg-purple-50"),children:[C.jsx("input",{type:"radio",name:"add-package",className:"hidden",checked:B===Xe,onChange:()=>{V(Xe),ae(!1)}}),t("hoursLabel",{count:Oe.hours})," – ",Oe.price.toLocaleString()," ",t("baht")]},Xe))}),B!=null&&C.jsxs(C.Fragment,{children:[C.jsx("button",{type:"button",onClick:()=>ae(!K),className:"mt-2 text-sm text-[#6654b3] underline",children:t(K?"hideDetail":"showDetail")}),K&&C.jsxs("div",{className:"border rounded-xl bg-purple-50 px-4 py-2 mt-2 text-sm",children:[C.jsx("div",{className:"font-semibold mb-1",children:(vt=oe[O])==null?void 0:vt.name}),C.jsxs("div",{children:[t("hoursLabel",{count:Mt[B].hours})," – ",Mt[B].price.toLocaleString()," ",t("baht")]}),C.jsxs("div",{children:[t("day"),": ",j]}),C.jsxs("div",{children:[t("timeSlot"),": ",H]})]})]})]}),C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("uploadReceipt")}),C.jsx("input",{type:"file",className:"block",accept:"image/*,application/pdf",onChange:Oe=>{var Xe;return ne(((Xe=Oe.target.files)==null?void 0:Xe[0])??null)}}),G&&C.jsx("span",{className:"text-xs text-gray-500",children:G.name})]}),B!=null&&C.jsxs("div",{className:"text-right font-bold text-lg text-[#6654b3] mt-2",children:[t("totalPrice"),": ",Ae.toLocaleString()," ",t("baht")]})]}),C.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[C.jsx("button",{type:"button",onClick:()=>N(!1),className:"rounded-full px-4 py-2 border hover:bg-gray-100",children:t("cancel")}),C.jsxs("button",{type:"button",onClick:Fe,className:"rounded-full px-4 py-2 bg-green-500 text-white hover:bg-green-600 flex items-center gap-1",children:[C.jsx(Sh,{className:"w-5 h-5"})," ",t("submit")]})]})]})}),C.jsx(Ki,{open:!!Q,onClose:()=>we(null),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:C.jsxs(Ki.Panel,{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[C.jsx("button",{type:"button",onClick:()=>we(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:C.jsx(io,{className:"w-6 h-6"})}),C.jsx("h2",{className:"font-bold text-lg mb-3",children:t("submitRenew",{course:((Wt=oe[Q||""])==null?void 0:Wt.name)||""})}),Q&&C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("chooseHourPackage")}),C.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:Be.map((Oe,Xe)=>C.jsxs("label",{className:zo("cursor-pointer border rounded-full px-4 py-2 text-sm font-semibold transition",je===Xe?"bg-[#6654b3] text-white border-[#6654b3]":"bg-white border-gray-300 text-[#6654b3] hover:bg-purple-50"),children:[C.jsx("input",{type:"radio",name:"renew-package",className:"hidden",checked:je===Xe,onChange:()=>{_e(Xe),se(!1)}}),t("hoursLabel",{count:Oe.hours})," – ",Oe.price.toLocaleString()," ",t("baht")]},Xe))}),je!=null&&C.jsxs(C.Fragment,{children:[C.jsx("button",{type:"button",onClick:()=>se(!ie),className:"mt-2 text-sm text-[#6654b3] underline",children:t(ie?"hideDetail":"showDetail")}),ie&&C.jsxs("div",{className:"border rounded-xl bg-purple-50 px-4 py-2 mt-2 text-sm",children:[C.jsx("div",{className:"font-semibold mb-1",children:($t=oe[Q])==null?void 0:$t.name}),C.jsxs("div",{children:[t("hoursLabel",{count:Be[je].hours})," – ",Be[je].price.toLocaleString()," ",t("baht")]})]})]})]}),C.jsxs("label",{className:"block mb-3",children:[C.jsx("span",{className:"font-semibold",children:t("uploadReceipt")}),C.jsx("input",{type:"file",className:"block",accept:"image/*,application/pdf",onChange:Oe=>{var Xe;return Ue(((Xe=Oe.target.files)==null?void 0:Xe[0])??null)}}),he&&C.jsx("span",{className:"text-xs text-gray-500",children:he.name})]}),je!=null&&C.jsxs("div",{className:"text-right font-bold text-lg text-[#6654b3] mt-2",children:[t("totalPrice"),": ",Ke.toLocaleString()," ",t("baht")]}),C.jsxs("div",{className:"flex justify-end gap-3 mt-2",children:[C.jsx("button",{type:"button",onClick:()=>we(null),className:"rounded-full px-4 py-2 border hover:bg-gray-100",children:t("cancel")}),C.jsxs("button",{type:"button",onClick:xt,className:"rounded-full px-4 py-2 bg-[#6654b3] text-white hover:bg-purple-700 flex items-center gap-1",children:[C.jsx(Sh,{className:"w-5 h-5"})," ",t("submit")]})]})]})}),ce&&C.jsx(lt,{urls:ce.urls,title:ce.title})]})}):C.jsx("div",{className:"p-8 text-pink-500",children:t("studentNotFound")})}const jv=["bg-pink-50","bg-blue-50","bg-yellow-50","bg-purple-50","bg-green-50","bg-indigo-50"];function CV(t){return jv[t%jv.length]}async function AV(){const{data:{user:t}}=await Pe.auth.getUser();if(!t)return{id:null,role:null};const{data:e}=await Pe.from("profiles").select("role").eq("id",t.id).single();return{id:t.id,role:(e==null?void 0:e.role)||null}}function TV(t){return Yn({queryKey:["student",t],queryFn:async()=>{const{data:e}=await Pe.from("students").select("*").eq("id",t).single();return e},enabled:!!t,staleTime:3e5})}function _V(){return Yn({queryKey:["courses"],queryFn:async()=>{const{data:t}=await Pe.from("courses").select("*,hour_packages").order("name");return t||[]},staleTime:3e5})}function NV(t){return Yn({queryKey:["attendance",t],queryFn:async()=>{const{data:e}=await Pe.from("attendance").select("*").eq("student_id",t);return e||[]},enabled:!!t,staleTime:12e4})}function RV(t){return Yn({queryKey:["appchanges",t],queryFn:async()=>{const{data:e}=await Pe.from("application_changes").select("*").eq("student_id",t);return e||[]},enabled:!!t,staleTime:12e4})}function OV(){return Yn({queryKey:["profile"],queryFn:AV,staleTime:12e4})}function IV(){var xt,lt,yt,mt;const{t}=Xn(),{id:e}=T3(),n=Ns(),r=Mc(),{data:l}=OV(),{data:u,isLoading:g}=TV(e),{data:y}=_V(),{data:b}=NV(e),{data:x}=RV(e),[E,A]=R.useState(!1),[N,O]=R.useState(null),[M,j]=R.useState(null),[U,H]=R.useState(null),[q,B]=R.useState(1),[V,G]=R.useState(null),[ne,K]=R.useState(null),[ae,Q]=R.useState(1),[we,je]=R.useState(null),[_e,he]=R.useState(null),[Ue,ie]=R.useState(null),[se,ce]=R.useState(null),[Le,Ve]=R.useState(null),[Y,X]=R.useState(null),[le,oe]=R.useState(null),Ne=R.useMemo(()=>Object.fromEntries((y||[]).map(Te=>[Te.id,Te])),[y]);function Ye(){return u!=null&&u.courses?Object.keys(u.courses).map((Te,Re)=>{var Ct,vt,Wt;const et=Ne[Te];return{cid:Te,idx:Re,course:et,days:u.courses[Te],hours:((Ct=u.course_limits)==null?void 0:Ct[Te])||0,cancelled_at:((vt=u.cancelled_at)==null?void 0:vt[Te])||null,cancelled_by:((Wt=u.cancelled_by)==null?void 0:Wt[Te])||null}}):[]}function be(Te){var vt;const Re=Array.isArray(u==null?void 0:u.payment_receipt_urls)?u.payment_receipt_urls:[],et=((vt=u==null?void 0:u.receipts)==null?void 0:vt[Te])||[],Ct=(x||[]).filter(Wt=>{var $t,Oe,Xe,We,Dt,Gt,rt;return(((Oe=($t=Wt.changes)==null?void 0:$t.course_limits)==null?void 0:Oe[Te])||((We=(Xe=Wt.changes)==null?void 0:Xe.course_changes)==null?void 0:We[Te]))&&(((Gt=(Dt=Wt.changes)==null?void 0:Dt.receipts)==null?void 0:Gt.length)||((rt=Wt.receipt_urls)==null?void 0:rt.length))}).flatMap(Wt=>{var $t,Oe,Xe;return(Oe=($t=Wt.changes)==null?void 0:$t.receipts)!=null&&Oe.length?Wt.changes.receipts:(Xe=Wt.receipt_urls)!=null&&Xe.length?Wt.receipt_urls:[]});return[...Re,...et,...Ct]}function ht(Te){return(b||[]).filter(Re=>Re.course_id===Te)}function Ge(Te){var Ct;const Re=ht(Te).length,et=((Ct=u==null?void 0:u.course_limits)==null?void 0:Ct[Te])||0;return{used:Re,purchased:et,left:Math.max(0,et-Re),status:et-Re>0?t("ongoing"):t("renewalNeeded")}}async function Mt(Te,Re,et){if(!(u!=null&&u.courses[Te][Re])||et===Re){he(null);return}const Ct=u.courses[Te][Re],vt={...u.courses};vt[Te][et]||(vt[Te][et]=[]),vt[Te][et]=Array.from(new Set([...vt[Te][et],...Ct])),delete vt[Te][Re],await Pe.from("students").update({courses:vt}).eq("id",u.id),r.invalidateQueries({queryKey:["student",e]}),he(null),ie(null)}async function xn(Te,Re,et,Ct){if(!(u!=null&&u.courses[Te][Re])||Ct===et){ce(null);return}const vt=u.courses[Te][Re].map($t=>$t===et?Ct:$t),Wt={...u.courses};Wt[Te][Re]=Array.from(new Set(vt)),await Pe.from("students").update({courses:Wt}).eq("id",u.id),r.invalidateQueries({queryKey:["student",e]}),ce(null),Ve(null)}async function Ae(Te){if(!u||!l||!l.id){alert(t("profileMissingError"));return}const Re={...u.cancelled_at||{}},et={...u.cancelled_by||{}};Re[Te]=new Date().toISOString(),et[Te]=l.id,await Pe.from("students").update({cancelled_at:Re,cancelled_by:et}).eq("id",u.id),r.invalidateQueries({queryKey:["student",e]})}async function Fe(){if(!ne||!we||ae<1)return;const Te=we,Re=`${Date.now()}-${Te.name}`,{data:et,error:Ct}=await Pe.storage.from("receipts").upload(Re,Te);if(Ct){alert(Ct.message);return}const{data:vt}=Pe.storage.from("receipts").getPublicUrl(et.path);await Pe.from("application_changes").insert([{student_id:u.id,type:"renewal",status:"pending",changes:{course_limits:{[ne]:ae},receipts:[vt.publicUrl]}}]),K(null),Q(1),je(null),alert(t("submitRenewal")),r.invalidateQueries({queryKey:["appchanges",e]})}async function Be(){if(!N||!M||!U||!V||q<1)return;const Te=V,Re=`${Date.now()}-${Te.name}`,{data:et,error:Ct}=await Pe.storage.from("receipts").upload(Re,Te);if(Ct){alert(Ct.message);return}const{data:vt}=Pe.storage.from("receipts").getPublicUrl(et.path);await Pe.from("application_changes").insert([{student_id:u.id,type:"edit",status:"pending",changes:{course_changes:{[N]:{[M]:[U]}},course_limits:{[N]:q},receipts:[vt.publicUrl]}}]),A(!1),O(null),j(null),H(null),G(null),B(1),alert(t("submitAdd")),r.invalidateQueries({queryKey:["appchanges",e]})}function nt({urls:Te,title:Re}){return C.jsx(Ki,{open:!!Te,onClose:()=>X(null),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:C.jsxs(Ki.Panel,{className:"bg-white rounded-2xl p-6 max-w-lg w-full shadow-2xl relative",children:[C.jsx("button",{type:"button",onClick:()=>X(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:C.jsx(io,{className:"w-6 h-6"})}),C.jsxs("h2",{className:"text-lg font-bold mb-2",children:[Re," ",t("receipt")]}),C.jsx("div",{className:"space-y-3",children:Te.map(et=>C.jsxs("div",{className:"rounded-lg border bg-gray-50 px-3 py-2 flex items-center gap-3",children:[C.jsx("span",{className:"flex-1 truncate",children:et.split("/").slice(-1)[0]}),C.jsx("button",{type:"button",className:"text-blue-600 hover:underline text-sm",onClick:()=>window.open(et,"_blank"),children:t("open")}),C.jsx("button",{type:"button",className:"text-green-600 hover:underline text-sm",onClick:async()=>{const vt=await(await fetch(et)).blob(),Wt=document.createElement("a");Wt.href=URL.createObjectURL(vt),Wt.download=et.split("/").slice(-1)[0],Wt.click()},children:t("download")}),C.jsx("button",{type:"button",className:"text-pink-600 hover:underline text-sm",onClick:()=>{const Ct=document.createElement("iframe");Ct.style.position="fixed",Ct.style.right="0",Ct.style.top="0",Ct.style.width="0",Ct.style.height="0",Ct.src=et,document.body.appendChild(Ct),Ct.onload=()=>{var vt;(vt=Ct.contentWindow)==null||vt.print(),setTimeout(()=>document.body.removeChild(Ct),1e3)}},children:t("print")})]},et))})]})})}if(g||!l||!y||!b||!x)return C.jsxs("div",{className:"min-h-[300px] flex items-center justify-center",children:[C.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full bg-pink-300 mr-2"}),C.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full bg-blue-200 mr-2"}),C.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full bg-yellow-200"})]});if(!u)return C.jsx("div",{className:"p-8 text-pink-500",children:t("studentNotFound")});function Ke(Te){return!(Te!=null&&Te.hour_packages)||!Array.isArray(Te.hour_packages)||Te.hour_packages.length===0?null:C.jsx("div",{className:"mt-1 mb-2 flex flex-wrap gap-2",children:Te.hour_packages.map((Re,et)=>C.jsxs("span",{className:"inline-block bg-[#ece6fc] text-[#6654b3] rounded-full px-3 py-1 text-xs font-semibold border border-[#cfc3f9]",children:[Re.hours," ",t("hours")," ",Re.price?`/ ${Re.price}฿`:""]},et))})}return C.jsx("div",{className:"p-0 min-h-screen",style:{background:"#f6f6f6"},children:C.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-2 sm:px-10 space-y-8",children:[C.jsx("div",{className:"flex justify-end w-full",children:C.jsxs("button",{type:"button",onClick:async()=>{window.confirm(t("deleteStudentConfirm"))&&(await Pe.from("students").delete().eq("id",u.id),n("/myschool/students"))},className:"rounded-full px-3 py-2 bg-red-50 border border-red-200 text-red-600 hover:bg-red-100 flex items-center gap-1",children:[C.jsx(bE,{className:"w-5 h-5"})," ",t("deleteStudent")]})}),C.jsxs("div",{className:"bg-white rounded-2xl px-6 py-4 flex flex-col gap-2 border border-[#ece6fc]",children:[C.jsxs("div",{className:"font-bold text-2xl text-[#6654b3] mb-1",children:[u.first_name," ",u.last_name]}),C.jsxs("div",{className:"flex flex-wrap gap-x-8 gap-y-1 text-gray-700 text-sm",children:[C.jsxs("div",{children:[C.jsxs("span",{className:"font-semibold text-gray-900",children:[t("dob"),":"]})," ",u.dob?new Date(u.dob).toLocaleDateString("en-GB"):"—"]}),C.jsxs("div",{children:[C.jsxs("span",{className:"font-semibold text-gray-900",children:[t("phone"),":"]})," ",u.parent_phone]}),C.jsxs("div",{children:[C.jsxs("span",{className:"font-semibold text-gray-900",children:[t("lineId"),":"]})," ",u.parent_line_id]}),C.jsxs("div",{children:[C.jsxs("span",{className:"font-semibold text-gray-900",children:[t("joined"),":"]})," ",u.joined_at?new Date(u.joined_at).toLocaleDateString("en-GB"):"—"]})]})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("div",{className:"text-lg font-semibold text-[#6654b3]",children:t("enrolledCourses")}),C.jsxs("button",{type:"button",onClick:()=>A(!0),className:"rounded-full bg-[#ece6fc] text-[#6654b3] border border-[#6654b3] px-3 py-2 hover:bg-[#e4d8fd] flex items-center gap-1 transition",children:[C.jsx(Zm,{className:"w-5 h-5"})," ",t("addCourse")]})]}),C.jsx("div",{className:"rounded-3xl overflow-x-auto border border-[#ece6fc] bg-white",children:C.jsxs("table",{className:"w-full min-w-[700px] text-sm",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-white",children:[C.jsx("th",{className:"px-4 py-3 text-left font-semibold text-[#6654b3] rounded-tl-3xl",children:"#"}),C.jsx("th",{className:"px-4 py-3 text-left font-semibold text-[#6654b3]",children:t("course")}),C.jsx("th",{className:"px-4 py-3 text-left font-semibold text-[#6654b3]",children:t("daysTimes")}),C.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("hoursLeft")}),C.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("status")}),C.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("receipt")}),C.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("actions")}),C.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3] rounded-tr-3xl",children:t("attendance")})]})}),C.jsx("tbody",{children:Ye().map(({cid:Te,idx:Re,course:et,days:Ct,cancelled_at:vt})=>{const Wt=CV(Re),$t=be(Te),Oe=ht(Te),{purchased:Xe,left:We,status:Dt}=Ge(Te),Gt=!!vt;return C.jsxs(ut.Fragment,{children:[C.jsxs("tr",{className:zo(Wt,"transition",Gt?"bg-red-100/70 text-red-600 opacity-80":"hover:bg-[#ece6fc]/70"),children:[C.jsx("td",{className:"px-4 py-3 text-center",children:Re+1}),C.jsxs("td",{className:"px-4 py-3",children:[C.jsx("div",{children:(et==null?void 0:et.name)||Te}),Ke(et)]}),C.jsx("td",{className:"px-4 py-3",children:Object.entries(Ct).map(([rt,Et])=>{var De;return C.jsxs("div",{className:"flex items-center gap-2",children:[_e&&_e.cid===Te&&_e.oldDay===rt?C.jsx("select",{value:Ue||rt,onChange:ct=>ie(ct.target.value),onBlur:()=>Mt(Te,rt,Ue||rt),className:"rounded px-1 py-0.5 border",autoFocus:!0,children:(De=et==null?void 0:et.weekdays)==null?void 0:De.map(ct=>C.jsx("option",{children:ct},ct))}):C.jsxs(C.Fragment,{children:[C.jsx("span",{className:"font-bold",children:rt}),C.jsx("button",{type:"button",className:"text-[#6654b3] hover:text-purple-800 p-0.5",onClick:()=>{he({cid:Te,oldDay:rt}),ie(rt)},title:t("editDay"),children:C.jsx(iw,{className:"w-4 h-4"})})]}),Array.isArray(Et)&&Et.map(ct=>{var _t;return C.jsx("span",{className:"inline-flex items-center ml-2",children:se&&se.cid===Te&&se.day===rt&&se.oldTime===ct?C.jsx("select",{value:Le||ct,onChange:Rt=>Ve(Rt.target.value),onBlur:()=>xn(Te,rt,ct,Le||ct),className:"rounded px-1 py-0.5 border",autoFocus:!0,children:(((_t=et==null?void 0:et.times)==null?void 0:_t[rt])||[]).map(Rt=>C.jsx("option",{children:Rt},Rt))}):C.jsxs(C.Fragment,{children:[C.jsx("span",{children:ct}),C.jsx("button",{type:"button",className:"text-[#6654b3] hover:text-purple-800 ml-1 p-0.5",onClick:()=>{ce({cid:Te,day:rt,oldTime:ct}),Ve(ct)},title:t("editTime"),children:C.jsx(iw,{className:"w-4 h-4"})})]})},ct)})]},rt)})}),C.jsxs("td",{className:"px-4 py-3 text-center font-mono font-semibold",children:[We," / ",Xe]}),C.jsx("td",{className:"px-4 py-3 text-center",children:Dt===t("ongoing")?C.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-50 text-green-600 text-xs font-semibold",children:[C.jsx(pE,{className:"w-4 h-4"})," ",t("ongoing")]}):C.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-50 text-yellow-600 text-xs font-semibold",children:[C.jsx(xE,{className:"w-4 h-4"})," ",t("renewalNeeded")]})}),C.jsx("td",{className:"px-4 py-3 text-center",children:$t.length>0?C.jsx("button",{type:"button",className:"rounded-full px-2 py-1 bg-[#f6d6ec] text-[#b03580] hover:bg-pink-200 text-xs",onClick:()=>X({urls:$t,title:et==null?void 0:et.name}),children:t("viewReceipts",{count:$t.length})}):C.jsx("span",{className:"text-gray-300 text-xs",children:"—"})}),C.jsx("td",{className:"px-4 py-3 text-center",children:C.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[C.jsx("button",{type:"button",className:zo("rounded-full px-2 py-1 text-xs","bg-[#ece6fc] text-[#6654b3] hover:bg-purple-100",Dt!==t("renewalNeeded")&&"opacity-50 pointer-events-none"),onClick:()=>K(Te),children:t("renew")}),!Gt&&C.jsx("button",{type:"button",className:"rounded-full px-2 py-1 bg-red-50 text-red-700 hover:bg-red-100 text-xs",onClick:()=>Ae(Te),children:t("cancelled")}),Gt&&C.jsxs("span",{className:"block text-xs mt-1 text-red-400",children:[t("cancelled"),C.jsx("br",{}),vt?new Date(vt).toLocaleDateString("en-GB"):""]})]})}),C.jsx("td",{className:"px-4 py-3 text-center",children:C.jsx("button",{type:"button",className:"rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 text-xs px-2 py-1 flex items-center gap-1",onClick:()=>oe(le===Te?null:Te),children:le===Te?C.jsxs(C.Fragment,{children:[C.jsx(Wm,{className:"w-4 h-4"})," ",t("hide")]}):C.jsxs(C.Fragment,{children:[C.jsx(Km,{className:"w-4 h-4"})," ",t("view")]})})})]}),le===Te&&C.jsx("tr",{children:C.jsx("td",{colSpan:8,className:"bg-white/90",children:C.jsxs("div",{className:"px-4 py-2 text-sm",children:[C.jsx("div",{className:"font-bold text-gray-700 mb-1",children:t("attendanceHistory")}),C.jsxs("div",{className:"flex flex-col gap-1",children:[Oe.map(rt=>C.jsxs("div",{className:"flex items-center justify-between border-b last:border-0 border-dashed border-gray-200 py-1 px-2",children:[C.jsx("span",{children:new Date(rt.attended_at_ts).toLocaleString("en-GB",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),C.jsx("button",{type:"button",className:"rounded-full px-2 py-0.5 bg-gray-100 text-gray-600 text-xs hover:bg-blue-50",onClick:()=>navigator.clipboard.writeText(rt.attended_at_ts),children:t("copy")})]},rt.id)),Oe.length===0&&C.jsx("div",{className:"text-gray-400",children:t("noRecords")})]})]})})})]},Te)})})]})})]}),C.jsx(Ki,{open:E,onClose:()=>A(!1),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:C.jsxs(Ki.Panel,{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[C.jsx("button",{type:"button",onClick:()=>A(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:C.jsx(io,{className:"w-6 h-6"})}),C.jsx("h2",{className:"font-bold text-lg mb-3",children:t("addNewCourse")}),C.jsxs("div",{className:"space-y-2",children:[C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("course")}),C.jsxs("select",{className:"w-full rounded border px-2 py-1",value:N||"",onChange:Te=>{O(Te.target.value),j(null),H(null)},children:[C.jsx("option",{value:"",children:t("select")}),y.filter(Te=>!(u.courses||{})[Te.id]).map(Te=>C.jsx("option",{value:Te.id,children:Te.name},Te.id))]})]}),N&&Ke(Ne[N]),N&&C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("day")}),C.jsxs("select",{className:"w-full rounded border px-2 py-1",value:M||"",onChange:Te=>{j(Te.target.value),H(null)},children:[C.jsx("option",{value:"",children:t("select")}),(((xt=Ne[N])==null?void 0:xt.weekdays)||[]).map(Te=>C.jsx("option",{children:Te},Te))]})]}),M&&N&&C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("timeSlot")}),C.jsxs("select",{className:"w-full rounded border px-2 py-1",value:U||"",onChange:Te=>H(Te.target.value),children:[C.jsx("option",{value:"",children:t("select")}),(((yt=(lt=Ne[N])==null?void 0:lt.times)==null?void 0:yt[M])||[]).map(Te=>C.jsx("option",{children:Te},Te))]})]}),C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("hoursToPurchase")}),C.jsx("input",{type:"number",className:"w-full rounded border px-2 py-1",min:1,value:q,onChange:Te=>B(Number(Te.target.value))})]}),C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("uploadReceipt")}),C.jsx("input",{type:"file",className:"block",accept:"image/*,application/pdf",onChange:Te=>G(Te.target.files?Te.target.files[0]:null)}),V&&C.jsx("span",{className:"text-xs text-gray-500",children:V.name})]})]}),C.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[C.jsx("button",{type:"button",onClick:()=>A(!1),className:"rounded-full px-4 py-2 border hover:bg-gray-100",children:t("cancel")}),C.jsxs("button",{type:"button",onClick:Be,className:"rounded-full px-4 py-2 bg-green-500 text-white hover:bg-green-600 flex items-center gap-1",children:[C.jsx(Sh,{className:"w-5 h-5"})," ",t("submit")]})]})]})}),C.jsx(Ki,{open:!!ne,onClose:()=>K(null),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:C.jsxs(Ki.Panel,{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[C.jsx("button",{type:"button",onClick:()=>K(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:C.jsx(io,{className:"w-6 h-6"})}),C.jsx("h2",{className:"font-bold text-lg mb-3",children:t("submitRenew",{course:((mt=Ne[ne||""])==null?void 0:mt.name)||""})}),ne&&Ke(Ne[ne]),C.jsxs("label",{className:"block mb-3",children:[C.jsx("span",{className:"font-semibold",children:t("hoursToPurchase")}),C.jsx("input",{type:"number",className:"w-full rounded border px-2 py-1",min:1,value:ae,onChange:Te=>Q(Number(Te.target.value))})]}),C.jsxs("label",{className:"block mb-3",children:[C.jsx("span",{className:"font-semibold",children:t("uploadReceipt")}),C.jsx("input",{type:"file",className:"block",accept:"image/*,application/pdf",onChange:Te=>je(Te.target.files?Te.target.files[0]:null)}),we&&C.jsx("span",{className:"text-xs text-gray-500",children:we.name})]}),C.jsxs("div",{className:"flex justify-end gap-3 mt-2",children:[C.jsx("button",{type:"button",onClick:()=>K(null),className:"rounded-full px-4 py-2 border hover:bg-gray-100",children:t("cancel")}),C.jsxs("button",{type:"button",onClick:Fe,className:"rounded-full px-4 py-2 bg-[#6654b3] text-white hover:bg-purple-700 flex items-center gap-1",children:[C.jsx(Sh,{className:"w-5 h-5"})," ",t("submit")]})]})]})}),Y&&C.jsx(nt,{urls:Y.urls,title:Y.title})]})})}function MV(){return Yn({queryKey:["courses"],queryFn:async()=>{const{data:t}=await Pe.from("courses").select("id,name,weekdays,times,capacity,hour_packages").order("name");return t??[]},staleTime:3e5})}function DV(t){return Yn({queryKey:["public-admissions-link"],queryFn:async()=>{const{data:e}=await Pe.from("application_links").select("*").order("created_at",{ascending:!1}).limit(1);let n=e&&e[0]&&new Date(e[0].expires_at)>new Date?e[0]:null;if(!n){await Pe.from("application_links").update({expires_at:new Date(Date.now()-60*1e3)}).neq("expires_at",null);const{data:r}=await Pe.from("application_links").insert([{expires_at:new Date(Date.now()+7*24*3600*1e3)}]).select("*").single();n=r}return`${window.location.origin}/apply/${n.id}`},enabled:t,refetchOnWindowFocus:!1})}function LV({msg:t,onClear:e}){return ut.useEffect(()=>{if(!t)return;const n=setTimeout(e,3500);return()=>clearTimeout(n)},[t,e]),t?C.jsx("div",{className:"fixed left-1/2 -translate-x-1/2 bottom-8 z-50 bg-[#6654b3] text-white rounded-2xl px-8 py-3 shadow-xl text-lg font-semibold fade-in",children:t}):null}function Bv({publicMode:t=!1}){const{t:e}=Xn(),{user:n}=Uh(),r=(n==null?void 0:n.role)??null,[l,u]=R.useState(""),[g,y]=R.useState(""),[b,x]=R.useState(""),[E,A]=R.useState(""),[N,O]=R.useState(""),[M,j]=R.useState(""),[U,H]=R.useState({}),[q,B]=R.useState({}),[V,G]=R.useState([]),ne=R.useRef(null),[K,ae]=R.useState(!1),[Q,we]=R.useState(!1),[je,_e]=R.useState(""),[he,Ue]=R.useState(""),[ie,se]=R.useState(!1),[ce,Le]=R.useState(!1),{data:Ve,refetch:Y}=DV(ce&&(r==="admin"||r==="staff")),{data:X=[],isLoading:le}=MV();function oe(Ae){H(Fe=>{const Be={...Fe};return Be[Ae]?(delete Be[Ae],B(nt=>{const{[Ae]:Ke,...xt}=nt;return xt})):Be[Ae]={},Be})}function Ne(Ae,Fe){H(Be=>{const nt={...Be},Ke={...nt[Ae]||{}};return Ke[Fe]?delete Ke[Fe]:Ke[Fe]=[],Object.keys(Ke).length?nt[Ae]=Ke:delete nt[Ae],nt})}function Ye(Ae,Fe,Be){H(nt=>{const Ke={...nt};return Ke[Ae]=Ke[Ae]||{},Ke[Ae][Fe]=Ke[Ae][Fe]||[],Ke[Ae][Fe].includes(Be)||Ke[Ae][Fe].push(Be),Ke})}function be(Ae,Fe,Be){H(nt=>{const Ke={...nt};return Ke[Ae][Fe].splice(Be,1),Ke[Ae][Fe].length||delete Ke[Ae][Fe],Object.keys(Ke[Ae]).length||delete Ke[Ae],Ke})}const ht=Ae=>G(Fe=>[...Fe,...Ae]),Ge=Ae=>G(Fe=>Fe.filter((Be,nt)=>nt!==Ae)),Mt=Object.entries(q).reduce((Ae,[Fe,Be])=>{var xt;const nt=X.find(lt=>lt.id===Fe),Ke=(xt=nt==null?void 0:nt.hour_packages)==null?void 0:xt[Be];return Ke?Ae+Ke.price:Ae},0);async function xn(Ae){var Ke;if(Ae.preventDefault(),Ue(""),!Object.keys(U).length)return Ue(e("selectCourseError"));if(!l.trim())return Ue(e("enterNickError"));for(const xt of Object.keys(U)){const lt=X.find(yt=>yt.id===xt);if(lt&&((Ke=lt.hour_packages)!=null&&Ke.length)&&q[xt]===void 0)return Ue(e("selectHourPackageError"))}ae(!0);const Fe=[];for(const xt of V){const lt=`${Date.now()}-${Math.random().toString(36).slice(2)}.${xt.name.split(".").pop()}`,{data:yt,error:mt}=await Pe.storage.from("receipts").upload(lt,xt,{cacheControl:"3600"});if(mt){Ue(mt.message),ae(!1);return}const{data:Te}=Pe.storage.from("receipts").getPublicUrl(yt.path);Fe.push(Te.publicUrl)}const Be={};for(const xt of Object.keys(U)){const lt=X.find(yt=>yt.id===xt);lt&&Array.isArray(lt.hour_packages)&&q[xt]!==void 0?Be[xt]=lt.hour_packages[q[xt]]:Be[xt]=null}const nt={nick_name:l,first_name:g,last_name:b,dob:E,parent_line_id:N,parent_phone:M,courses:U,purchased_packages:Be,total_price:Mt,payment_receipt_urls:Fe};if(r==="admin"){const{error:xt}=await Pe.from("students").insert([{...nt,joined_at:new Date().toISOString()}]);if(xt){Ue(xt.message),ae(!1);return}_e(e("studentAdded",{nick:l})),we(!0)}else{const{error:xt}=await Pe.from("applications").insert([{...nt,status:"pending"}]);if(xt){Ue(xt.message),ae(!1);return}_e(e("applicationSubmitted")),we(!0)}ae(!1)}return ut.useEffect(()=>{if(!t&&Q){const Ae=setTimeout(()=>we(!1),1200);return()=>clearTimeout(Ae)}},[t,Q]),t&&Q?C.jsx("div",{className:"min-h-[60vh] flex flex-col justify-center items-center bg-[#f6f6f6]",children:C.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-green-50 to-yellow-50 shadow-xl rounded-3xl px-8 py-12 max-w-md w-full flex flex-col items-center",children:[C.jsx("div",{className:"text-3xl font-extrabold mb-3 text-[#6654b3]",children:e("thankYou")}),C.jsxs("div",{className:"text-lg text-gray-700 mb-4 text-center",children:[e("applicationReceived"),C.jsx("br",{}),e("staffWillContact"),C.jsx("br",{}),e("youMayClose")]})]})}):C.jsxs("div",{className:"flex flex-col gap-8 py-10 px-2 sm:px-6 max-w-3xl mx-auto",style:{background:"#f6f6f6"},children:[C.jsxs("header",{className:"mb-4",children:[C.jsx("h1",{className:"text-3xl font-extrabold text-[#6654b3]",children:e("admissionsTitle")}),C.jsx("p",{className:"text-lg text-[#6654b3] mt-2",children:e("admissionsIntro",{staffMsg:e(r==="admin"?"enrollInstant":"contactToConfirm")})})]}),C.jsxs("form",{onSubmit:xn,className:"space-y-8",children:[C.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[C.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("studentInfo")}),C.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[C.jsxs("label",{className:"flex flex-col gap-1",children:[C.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("nickName")}),C.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:l,onChange:Ae=>u(Ae.target.value),maxLength:40,pattern:".*"})]}),C.jsxs("label",{className:"flex flex-col gap-1",children:[C.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("firstName")}),C.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:g,onChange:Ae=>y(Ae.target.value),maxLength:40,pattern:".*"})]}),C.jsxs("label",{className:"flex flex-col gap-1",children:[C.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("lastName")}),C.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:b,onChange:Ae=>x(Ae.target.value),maxLength:40,pattern:".*"})]})]}),C.jsxs("label",{className:"flex flex-col gap-1 mt-4 w-full md:w-1/2",children:[C.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("dob")}),C.jsx("input",{required:!0,type:"date",className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:E,onChange:Ae=>A(Ae.target.value)})]})]}),C.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[C.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("guardian")}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[C.jsxs("label",{className:"flex flex-col gap-1",children:[C.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("lineAppId")}),C.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:N,onChange:Ae=>O(Ae.target.value)})]}),C.jsxs("label",{className:"flex flex-col gap-1",children:[C.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("phone")}),C.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:M,onChange:Ae=>j(Ae.target.value)})]})]})]}),C.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[C.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("courses")}),le?C.jsx("div",{className:"text-gray-400",children:e("loadingCourses")}):X.length===0?C.jsx("div",{className:"text-gray-400",children:e("noCourses")}):X.map(Ae=>C.jsxs("div",{className:`mb-2 border ${U[Ae.id]?"border-[#6654b3] bg-purple-50":"border-gray-200 bg-white"} rounded-xl p-3 transition-all`,children:[C.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[C.jsx("input",{type:"checkbox",checked:!!U[Ae.id],onChange:()=>oe(Ae.id)}),C.jsx("span",{className:"text-lg",children:Ae.name}),C.jsx("span",{className:"text-xs text-gray-400",children:e("seats",{count:Ae.capacity})})]}),U[Ae.id]&&C.jsxs("div",{className:"ml-8 mt-2 mb-2",children:[Ae.weekdays.map(Fe=>{var Be,nt;return C.jsxs("div",{className:"mb-1",children:[C.jsxs("label",{className:"font-semibold mr-2",children:[C.jsx("input",{type:"checkbox",className:"mr-1",checked:!!((Be=U[Ae.id])!=null&&Be[Fe]),onChange:()=>Ne(Ae.id,Fe)}),Fe]}),!!((nt=U[Ae.id])!=null&&nt[Fe])&&C.jsxs(C.Fragment,{children:[U[Ae.id][Fe].map((Ke,xt)=>C.jsxs("span",{className:"inline-flex items-center bg-[#ece6fc] rounded-full px-3 py-0.5 text-xs mr-2 mt-1",children:[Ke,C.jsx("button",{type:"button",className:"ml-1 text-red-500 font-bold",onClick:()=>be(Ae.id,Fe,xt),children:"✕"})]},xt)),C.jsxs("select",{className:"border rounded px-2 py-1 text-sm ml-2",defaultValue:"",onChange:Ke=>{Ke.target.value&&(Ye(Ae.id,Fe,Ke.target.value),Ke.target.value="")},children:[C.jsx("option",{value:"",children:e("addTime")}),(Ae.times[Fe]||[]).filter(Ke=>{var xt;return!((xt=U[Ae.id][Fe])!=null&&xt.includes(Ke))}).map(Ke=>C.jsx("option",{children:Ke},Ke))]})]})]},Fe)}),Array.isArray(Ae.hour_packages)&&Ae.hour_packages.length>0&&C.jsxs("div",{className:"mt-3",children:[C.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("chooseHourPackage")}),C.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:Ae.hour_packages.map((Fe,Be)=>C.jsxs("label",{className:`cursor-pointer border rounded-full px-4 py-2 text-sm font-semibold transition
                              ${q[Ae.id]===Be?"bg-[#6654b3] text-white border-[#6654b3]":"bg-white border-gray-300 text-[#6654b3] hover:bg-purple-50"}`,children:[C.jsx("input",{type:"radio",name:`hour-package-${Ae.id}`,className:"hidden",checked:q[Ae.id]===Be,onChange:()=>B(nt=>({...nt,[Ae.id]:Be}))}),e("hoursLabel",{count:Fe.hours})," – ",Fe.price.toLocaleString()," ",e("baht")]},Be))})]})]})]},Ae.id))]}),C.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[C.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("paymentReceipt")}),C.jsxs("div",{className:"mb-4 flex flex-col items-end",children:[C.jsxs("div",{className:"text-lg font-bold text-[#6654b3] mb-1",children:[e("totalPrice"),": ",Mt.toLocaleString()," ",e("baht")]}),Mt>0&&C.jsx("button",{type:"button",onClick:()=>se(Ae=>!Ae),className:"text-sm text-[#6654b3] underline hover:opacity-70 transition px-2",children:e(ie?"hideDetail":"showDetail")})]}),ie&&Mt>0&&C.jsx("div",{className:"mb-4 bg-[#f9f5ff] p-4 rounded-xl shadow-inner text-sm text-[#6654b3]",children:Object.entries(q).map(([Ae,Fe])=>{var xt;const Be=X.find(lt=>lt.id===Ae),nt=(xt=Be==null?void 0:Be.hour_packages)==null?void 0:xt[Fe];if(!Be||!nt)return null;const Ke=U[Ae];return C.jsxs("div",{className:"mb-3",children:[C.jsxs("div",{className:"font-semibold",children:[Be.name,": ",e("hoursLabel",{count:nt.hours})," – ",nt.price.toLocaleString()," ",e("baht")]}),C.jsx("ul",{className:"ml-4 mt-1 list-disc",children:Object.entries(Ke||{}).map(([lt,yt])=>C.jsxs("li",{children:[C.jsx("span",{className:"font-medium",children:lt}),yt&&yt.length>0&&C.jsx("span",{className:"ml-2",children:yt.join(", ")})]},lt))})]},Ae)})}),C.jsxs("div",{className:"flex flex-col gap-2",children:[C.jsx("button",{type:"button",onClick:()=>{var Ae;return(Ae=ne.current)==null?void 0:Ae.click()},className:"rounded-full border border-[#ece6fc] bg-purple-50 text-[#6654b3] px-5 py-2 font-semibold hover:bg-purple-100 transition",children:e("chooseFiles")}),C.jsx("input",{ref:ne,type:"file",multiple:!0,accept:"image/*,application/pdf",className:"hidden",onChange:Ae=>Ae.target.files&&ht(Array.from(Ae.target.files))}),V.length>0&&C.jsx("ul",{className:"mt-2 space-y-1",children:V.map((Ae,Fe)=>C.jsxs("li",{className:"flex items-center bg-[#ece6fc] rounded-full px-3 py-1 text-sm",children:[C.jsx("span",{className:"truncate max-w-[180px]",children:Ae.name}),C.jsx("button",{type:"button",className:"ml-2 text-red-500 font-bold",onClick:()=>Ge(Fe),children:"✕"})]},Fe))})]})]}),C.jsx(LV,{msg:je||he,onClear:()=>{_e(""),Ue("")}}),C.jsx("div",{className:"flex justify-end",children:C.jsx("button",{type:"submit",disabled:K,className:"bg-[#6654b3] hover:bg-purple-700 text-white font-bold px-8 py-3 rounded-xl shadow disabled:opacity-50 transition",children:e(r==="admin"?K?"adding":"addStudent":K?"submitting":"submitApplication")})}),!t&&(r==="admin"||r==="staff")&&C.jsxs("div",{className:"mt-12 flex flex-col items-center gap-2",children:[C.jsx("button",{type:"button",onClick:()=>{Le(!0),Y()},className:"px-5 py-2 rounded-full font-semibold border bg-[#f6f6f6] text-[#6654b3] border-[#ece6fc] hover:bg-[#ece6fc] transition",children:e(Ve?"refreshPublicAdmissionsLink":"showPublicAdmissionsLink")}),ce&&Ve&&C.jsxs("div",{className:"flex items-center gap-2 mt-2 bg-[#ece6fc] px-4 py-2 rounded-xl w-full max-w-lg",children:[C.jsx("input",{readOnly:!0,className:"flex-1 bg-transparent outline-none",value:Ve}),C.jsx("button",{onClick:()=>navigator.clipboard.writeText(Ve),className:"text-[#6654b3] hover:underline font-bold px-2",children:e("copy")})]})]})]})]})}var $e;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})($e||($e={}));var Pv=new Map([[$e.QR_CODE,"QR_CODE"],[$e.AZTEC,"AZTEC"],[$e.CODABAR,"CODABAR"],[$e.CODE_39,"CODE_39"],[$e.CODE_93,"CODE_93"],[$e.CODE_128,"CODE_128"],[$e.DATA_MATRIX,"DATA_MATRIX"],[$e.MAXICODE,"MAXICODE"],[$e.ITF,"ITF"],[$e.EAN_13,"EAN_13"],[$e.EAN_8,"EAN_8"],[$e.PDF_417,"PDF_417"],[$e.RSS_14,"RSS_14"],[$e.RSS_EXPANDED,"RSS_EXPANDED"],[$e.UPC_A,"UPC_A"],[$e.UPC_E,"UPC_E"],[$e.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Uv;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Uv||(Uv={}));function kV(t){return Object.values($e).includes(t)}var oo;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(oo||(oo={}));var Hs=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[oo.SCAN_TYPE_CAMERA,oo.SCAN_TYPE_FILE],t}(),_C=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Pv.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Pv.get(e))},t}(),Fv=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Im;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Im||(Im={}));var NC=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Im.UNKWOWN_ERROR}},t}(),RC=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function hr(t){return typeof t>"u"||t===null}function jV(t,e,n){return t>n?n:t<e?e:t}var dc=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),rn=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),Vv=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),OC=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],u=new Set(l),g=Object.keys(e),y=0,b=g;y<b.length;y++){var x=b[y];if(u.has(x))return n.logError("".concat(x," is not supported videoConstaints."),!0),!1}return!0},t}(),Gu={exports:{}},BV=Gu.exports,zv;function PV(){return zv||(zv=1,function(t,e){(function(n,r){r(e)})(BV,function(n){function r(L){return L==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,s){L.__proto__=s}||function(L,s){for(var o in s)s.hasOwnProperty(o)&&(L[o]=s[o])};function u(L,s){l(L,s);function o(){this.constructor=L}L.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}function g(L,s){var o=Object.setPrototypeOf;o?o(L,s):L.__proto__=s}function y(L,s){s===void 0&&(s=L.constructor);var o=Error.captureStackTrace;o&&o(L,s)}var b=function(L){u(s,L);function s(o){var c=this.constructor,d=L.call(this,o)||this;return Object.defineProperty(d,"name",{value:c.name,enumerable:!1}),g(d,c.prototype),y(d),d}return s}(Error);class x extends b{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}x.kind="Exception";class E extends x{}E.kind="ArgumentException";class A extends x{}A.kind="IllegalArgumentException";class N{constructor(s){if(this.binarizer=s,s===null)throw new A("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,o){return this.binarizer.getBlackRow(s,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,o,c,d){const h=this.binarizer.getLuminanceSource().crop(s,o,c,d);return new N(this.binarizer.createBinarizer(h))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new N(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new N(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class O extends x{static getChecksumInstance(){return new O}}O.kind="ChecksumException";class M{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class j{static arraycopy(s,o,c,d,h){for(;h--;)c[d++]=s[o++]}static currentTimeMillis(){return Date.now()}}class U extends x{}U.kind="IndexOutOfBoundsException";class H extends U{constructor(s=void 0,o=void 0){super(o),this.index=s,this.message=o}}H.kind="ArrayIndexOutOfBoundsException";class q{static fill(s,o){for(let c=0,d=s.length;c<d;c++)s[c]=o}static fillWithin(s,o,c,d){q.rangeCheck(s.length,o,c);for(let h=o;h<c;h++)s[h]=d}static rangeCheck(s,o,c){if(o>c)throw new A("fromIndex("+o+") > toIndex("+c+")");if(o<0)throw new H(o);if(c>s)throw new H(c)}static asList(...s){return s}static create(s,o,c){return Array.from({length:s}).map(h=>Array.from({length:o}).fill(c))}static createInt32Array(s,o,c){return Array.from({length:s}).map(h=>Int32Array.from({length:o}).fill(c))}static equals(s,o){if(!s||!o||!s.length||!o.length||s.length!==o.length)return!1;for(let c=0,d=s.length;c<d;c++)if(s[c]!==o[c])return!1;return!0}static hashCode(s){if(s===null)return 0;let o=1;for(const c of s)o=31*o+c;return o}static fillUint8Array(s,o){for(let c=0;c!==s.length;c++)s[c]=o}static copyOf(s,o){return s.slice(0,o)}static copyOfUint8Array(s,o){if(s.length<=o){const c=new Uint8Array(o);return c.set(s),c}return s.slice(0,o)}static copyOfRange(s,o,c){const d=c-o,h=new Int32Array(d);return j.arraycopy(s,o,h,0,d),h}static binarySearch(s,o,c){c===void 0&&(c=q.numberComparator);let d=0,h=s.length-1;for(;d<=h;){const p=h+d>>1,w=c(o,s[p]);if(w>0)d=p+1;else if(w<0)h=p-1;else return p}return-d-1}static numberComparator(s,o){return s-o}}class B{static numberOfTrailingZeros(s){let o;if(s===0)return 32;let c=31;return o=s<<16,o!==0&&(c-=16,s=o),o=s<<8,o!==0&&(c-=8,s=o),o=s<<4,o!==0&&(c-=4,s=o),o=s<<2,o!==0&&(c-=2,s=o),c-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let o=1;return s>>>16||(o+=16,s<<=16),s>>>24||(o+=8,s<<=8),s>>>28||(o+=4,s<<=4),s>>>30||(o+=2,s<<=2),o-=s>>>31,o}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,o){return Math.trunc(s/o)}static parseInt(s,o=void 0){return parseInt(s,o)}}B.MIN_VALUE_32_BITS=-2147483648,B.MAX_VALUE=Number.MAX_SAFE_INTEGER;class V{constructor(s,o){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,o==null?this.bits=V.makeArray(s):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const o=V.makeArray(s);j.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const o=this.size;if(s>=o)return o;const c=this.bits;let d=Math.floor(s/32),h=c[d];h&=~((1<<(s&31))-1);const p=c.length;for(;h===0;){if(++d===p)return o;h=c[d]}const w=d*32+B.numberOfTrailingZeros(h);return w>o?o:w}getNextUnset(s){const o=this.size;if(s>=o)return o;const c=this.bits;let d=Math.floor(s/32),h=~c[d];h&=~((1<<(s&31))-1);const p=c.length;for(;h===0;){if(++d===p)return o;h=~c[d]}const w=d*32+B.numberOfTrailingZeros(h);return w>o?o:w}setBulk(s,o){this.bits[Math.floor(s/32)]=o}setRange(s,o){if(o<s||s<0||o>this.size)throw new A;if(o===s)return;o--;const c=Math.floor(s/32),d=Math.floor(o/32),h=this.bits;for(let p=c;p<=d;p++){const w=p>c?0:s&31,_=(2<<(p<d?31:o&31))-(1<<w);h[p]|=_}}clear(){const s=this.bits.length,o=this.bits;for(let c=0;c<s;c++)o[c]=0}isRange(s,o,c){if(o<s||s<0||o>this.size)throw new A;if(o===s)return!0;o--;const d=Math.floor(s/32),h=Math.floor(o/32),p=this.bits;for(let w=d;w<=h;w++){const S=w>d?0:s&31,I=(2<<(w<h?31:o&31))-(1<<S)&4294967295;if((p[w]&I)!==(c?I:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,o){if(o<0||o>32)throw new A("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let c=o;c>0;c--)this.appendBit((s>>c-1&1)===1)}appendBitArray(s){const o=s.size;this.ensureCapacity(this.size+o);for(let c=0;c<o;c++)this.appendBit(s.get(c))}xor(s){if(this.size!==s.size)throw new A("Sizes don't match");const o=this.bits;for(let c=0,d=o.length;c<d;c++)o[c]^=s.bits[c]}toBytes(s,o,c,d){for(let h=0;h<d;h++){let p=0;for(let w=0;w<8;w++)this.get(s)&&(p|=1<<7-w),s++;o[c+h]=p}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),c=o+1,d=this.bits;for(let h=0;h<c;h++){let p=d[h];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,s[o-h]=p}if(this.size!==c*32){const h=c*32-this.size;let p=s[0]>>>h;for(let w=1;w<c;w++){const S=s[w];p|=S<<32-h,s[w-1]=p,p=S>>>h}s[c-1]=p}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof V))return!1;const o=s;return this.size===o.size&&q.equals(this.bits,o.bits)}hashCode(){return 31*this.size+q.hashCode(this.bits)}toString(){let s="";for(let o=0,c=this.size;o<c;o++)(o&7)===0&&(s+=" "),s+=this.get(o)?"X":".";return s}clone(){return new V(this.size,this.bits.slice())}}var G;(function(L){L[L.OTHER=0]="OTHER",L[L.PURE_BARCODE=1]="PURE_BARCODE",L[L.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",L[L.TRY_HARDER=3]="TRY_HARDER",L[L.CHARACTER_SET=4]="CHARACTER_SET",L[L.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",L[L.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",L[L.ASSUME_GS1=7]="ASSUME_GS1",L[L.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",L[L.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",L[L.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(G||(G={}));var ne=G;class K extends x{static getFormatInstance(){return new K}}K.kind="FormatException";var ae;(function(L){L[L.Cp437=0]="Cp437",L[L.ISO8859_1=1]="ISO8859_1",L[L.ISO8859_2=2]="ISO8859_2",L[L.ISO8859_3=3]="ISO8859_3",L[L.ISO8859_4=4]="ISO8859_4",L[L.ISO8859_5=5]="ISO8859_5",L[L.ISO8859_6=6]="ISO8859_6",L[L.ISO8859_7=7]="ISO8859_7",L[L.ISO8859_8=8]="ISO8859_8",L[L.ISO8859_9=9]="ISO8859_9",L[L.ISO8859_10=10]="ISO8859_10",L[L.ISO8859_11=11]="ISO8859_11",L[L.ISO8859_13=12]="ISO8859_13",L[L.ISO8859_14=13]="ISO8859_14",L[L.ISO8859_15=14]="ISO8859_15",L[L.ISO8859_16=15]="ISO8859_16",L[L.SJIS=16]="SJIS",L[L.Cp1250=17]="Cp1250",L[L.Cp1251=18]="Cp1251",L[L.Cp1252=19]="Cp1252",L[L.Cp1256=20]="Cp1256",L[L.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",L[L.UTF8=22]="UTF8",L[L.ASCII=23]="ASCII",L[L.Big5=24]="Big5",L[L.GB18030=25]="GB18030",L[L.EUC_KR=26]="EUC_KR"})(ae||(ae={}));class Q{constructor(s,o,c,...d){this.valueIdentifier=s,this.name=c,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=d,Q.VALUE_IDENTIFIER_TO_ECI.set(s,this),Q.NAME_TO_ECI.set(c,this);const h=this.values;for(let p=0,w=h.length;p!==w;p++){const S=h[p];Q.VALUES_TO_ECI.set(S,this)}for(const p of d)Q.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new K("incorect value");const o=Q.VALUES_TO_ECI.get(s);if(o===void 0)throw new K("incorect value");return o}static getCharacterSetECIByName(s){const o=Q.NAME_TO_ECI.get(s);if(o===void 0)throw new K("incorect value");return o}equals(s){if(!(s instanceof Q))return!1;const o=s;return this.getName()===o.getName()}}Q.VALUE_IDENTIFIER_TO_ECI=new Map,Q.VALUES_TO_ECI=new Map,Q.NAME_TO_ECI=new Map,Q.Cp437=new Q(ae.Cp437,Int32Array.from([0,2]),"Cp437"),Q.ISO8859_1=new Q(ae.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Q.ISO8859_2=new Q(ae.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Q.ISO8859_3=new Q(ae.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Q.ISO8859_4=new Q(ae.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Q.ISO8859_5=new Q(ae.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Q.ISO8859_6=new Q(ae.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Q.ISO8859_7=new Q(ae.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Q.ISO8859_8=new Q(ae.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Q.ISO8859_9=new Q(ae.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Q.ISO8859_10=new Q(ae.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Q.ISO8859_11=new Q(ae.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Q.ISO8859_13=new Q(ae.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Q.ISO8859_14=new Q(ae.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Q.ISO8859_15=new Q(ae.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Q.ISO8859_16=new Q(ae.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Q.SJIS=new Q(ae.SJIS,20,"SJIS","Shift_JIS"),Q.Cp1250=new Q(ae.Cp1250,21,"Cp1250","windows-1250"),Q.Cp1251=new Q(ae.Cp1251,22,"Cp1251","windows-1251"),Q.Cp1252=new Q(ae.Cp1252,23,"Cp1252","windows-1252"),Q.Cp1256=new Q(ae.Cp1256,24,"Cp1256","windows-1256"),Q.UnicodeBigUnmarked=new Q(ae.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Q.UTF8=new Q(ae.UTF8,26,"UTF8","UTF-8"),Q.ASCII=new Q(ae.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Q.Big5=new Q(ae.Big5,28,"Big5"),Q.GB18030=new Q(ae.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Q.EUC_KR=new Q(ae.EUC_KR,30,"EUC_KR","EUC-KR");class we extends x{}we.kind="UnsupportedOperationException";class je{static decode(s,o){const c=this.encodingName(o);return this.customDecoder?this.customDecoder(s,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(s,c):new TextDecoder(c).decode(s)}static shouldDecodeOnFallback(s){return!je.isBrowser()&&s==="ISO-8859-1"}static encode(s,o){const c=this.encodingName(o);return this.customEncoder?this.customEncoder(s,c):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof Q?s:Q.getCharacterSetECIByName(s)}static decodeFallback(s,o){const c=this.encodingCharacterSet(o);if(je.isDecodeFallbackSupported(c)){let d="";for(let h=0,p=s.length;h<p;h++){let w=s[h].toString(16);w.length<2&&(w="0"+w),d+="%"+w}return decodeURIComponent(d)}if(c.equals(Q.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new we(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(Q.UTF8)||s.equals(Q.ISO8859_1)||s.equals(Q.ASCII)}static encodeFallback(s){const c=btoa(unescape(encodeURIComponent(s))).split(""),d=[];for(let h=0;h<c.length;h++)d.push(c[h].charCodeAt(0));return new Uint8Array(d)}}class _e{static castAsNonUtf8Char(s,o=null){const c=o?o.getName():this.ISO88591;return je.decode(new Uint8Array([s]),c)}static guessEncoding(s,o){if(o!=null&&o.get(ne.CHARACTER_SET)!==void 0)return o.get(ne.CHARACTER_SET).toString();const c=s.length;let d=!0,h=!0,p=!0,w=0,S=0,_=0,I=0,k=0,P=0,$=0,Z=0,ee=0,ue=0,pe=0;const Me=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let ke=0;ke<c&&(d||h||p);ke++){const Ie=s[ke]&255;p&&(w>0?(Ie&128)===0?p=!1:w--:(Ie&128)!==0&&((Ie&64)===0?p=!1:(w++,(Ie&32)===0?S++:(w++,(Ie&16)===0?_++:(w++,(Ie&8)===0?I++:p=!1))))),d&&(Ie>127&&Ie<160?d=!1:Ie>159&&(Ie<192||Ie===215||Ie===247)&&pe++),h&&(k>0?Ie<64||Ie===127||Ie>252?h=!1:k--:Ie===128||Ie===160||Ie>239?h=!1:Ie>160&&Ie<224?(P++,Z=0,$++,$>ee&&(ee=$)):Ie>127?(k++,$=0,Z++,Z>ue&&(ue=Z)):($=0,Z=0))}return p&&w>0&&(p=!1),h&&k>0&&(h=!1),p&&(Me||S+_+I>0)?_e.UTF8:h&&(_e.ASSUME_SHIFT_JIS||ee>=3||ue>=3)?_e.SHIFT_JIS:d&&h?ee===2&&P===2||pe*10>=c?_e.SHIFT_JIS:_e.ISO88591:d?_e.ISO88591:h?_e.SHIFT_JIS:p?_e.UTF8:_e.PLATFORM_DEFAULT_ENCODING}static format(s,...o){let c=-1;function d(p,w,S,_,I,k){if(p==="%%")return"%";if(o[++c]===void 0)return;p=_?parseInt(_.substr(1)):void 0;let P=I?parseInt(I.substr(1)):void 0,$;switch(k){case"s":$=o[c];break;case"c":$=o[c][0];break;case"f":$=parseFloat(o[c]).toFixed(p);break;case"p":$=parseFloat(o[c]).toPrecision(p);break;case"e":$=parseFloat(o[c]).toExponential(p);break;case"x":$=parseInt(o[c]).toString(P||16);break;case"d":$=parseFloat(parseInt(o[c],P||10).toPrecision(p)).toFixed(0);break}$=typeof $=="object"?JSON.stringify($):(+$).toString(P);let Z=parseInt(S),ee=S&&S[0]+""=="0"?"0":" ";for(;$.length<Z;)$=w!==void 0?$+ee:ee+$;return $}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(h,d)}static getBytes(s,o){return je.encode(s,o)}static getCharCode(s,o=0){return s.charCodeAt(o)}static getCharAt(s){return String.fromCharCode(s)}}_e.SHIFT_JIS=Q.SJIS.getName(),_e.GB2312="GB2312",_e.ISO88591=Q.ISO8859_1.getName(),_e.EUC_JP="EUC_JP",_e.UTF8=Q.UTF8.getName(),_e.PLATFORM_DEFAULT_ENCODING=_e.UTF8,_e.ASSUME_SHIFT_JIS=!1;class he{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=_e.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,o,c){for(let d=o;o<o+c;d++)this.append(s[d]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,o){this.value=this.value.substr(0,s)+o+this.value.substr(s+1)}substring(s,o){return this.value.substring(s,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,o){this.value=this.value.substr(0,s)+o+this.value.substr(s+o.length)}}class Ue{constructor(s,o,c,d){if(this.width=s,this.height=o,this.rowSize=c,this.bits=d,o==null&&(o=s),this.height=o,s<1||o<1)throw new A("Both dimensions must be greater than 0");c==null&&(c=Math.floor((s+31)/32)),this.rowSize=c,d==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const o=s.length,c=s[0].length,d=new Ue(c,o);for(let h=0;h<o;h++){const p=s[h];for(let w=0;w<c;w++)p[w]&&d.set(w,h)}return d}static parseFromString(s,o,c){if(s===null)throw new A("stringRepresentation cannot be null");const d=new Array(s.length);let h=0,p=0,w=-1,S=0,_=0;for(;_<s.length;)if(s.charAt(_)===`
`||s.charAt(_)==="\r"){if(h>p){if(w===-1)w=h-p;else if(h-p!==w)throw new A("row lengths do not match");p=h,S++}_++}else if(s.substring(_,_+o.length)===o)_+=o.length,d[h]=!0,h++;else if(s.substring(_,_+c.length)===c)_+=c.length,d[h]=!1,h++;else throw new A("illegal character encountered: "+s.substring(_));if(h>p){if(w===-1)w=h-p;else if(h-p!==w)throw new A("row lengths do not match");S++}const I=new Ue(w,S);for(let k=0;k<h;k++)d[k]&&I.set(Math.floor(k%w),Math.floor(k/w));return I}get(s,o){const c=o*this.rowSize+Math.floor(s/32);return(this.bits[c]>>>(s&31)&1)!==0}set(s,o){const c=o*this.rowSize+Math.floor(s/32);this.bits[c]|=1<<(s&31)&4294967295}unset(s,o){const c=o*this.rowSize+Math.floor(s/32);this.bits[c]&=~(1<<(s&31)&4294967295)}flip(s,o){const c=o*this.rowSize+Math.floor(s/32);this.bits[c]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new A("input matrix dimensions do not match");const o=new V(Math.floor(this.width/32)+1),c=this.rowSize,d=this.bits;for(let h=0,p=this.height;h<p;h++){const w=h*c,S=s.getRow(h,o).getBitArray();for(let _=0;_<c;_++)d[w+_]^=S[_]}}clear(){const s=this.bits,o=s.length;for(let c=0;c<o;c++)s[c]=0}setRegion(s,o,c,d){if(o<0||s<0)throw new A("Left and top must be nonnegative");if(d<1||c<1)throw new A("Height and width must be at least 1");const h=s+c,p=o+d;if(p>this.height||h>this.width)throw new A("The region must fit inside the matrix");const w=this.rowSize,S=this.bits;for(let _=o;_<p;_++){const I=_*w;for(let k=s;k<h;k++)S[I+Math.floor(k/32)]|=1<<(k&31)&4294967295}}getRow(s,o){o==null||o.getSize()<this.width?o=new V(this.width):o.clear();const c=this.rowSize,d=this.bits,h=s*c;for(let p=0;p<c;p++)o.setBulk(p*32,d[h+p]);return o}setRow(s,o){j.arraycopy(o.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),o=this.getHeight();let c=new V(s),d=new V(s);for(let h=0,p=Math.floor((o+1)/2);h<p;h++)c=this.getRow(h,c),d=this.getRow(o-1-h,d),c.reverse(),d.reverse(),this.setRow(h,d),this.setRow(o-1-h,c)}getEnclosingRectangle(){const s=this.width,o=this.height,c=this.rowSize,d=this.bits;let h=s,p=o,w=-1,S=-1;for(let _=0;_<o;_++)for(let I=0;I<c;I++){const k=d[_*c+I];if(k!==0){if(_<p&&(p=_),_>S&&(S=_),I*32<h){let P=0;for(;(k<<31-P&4294967295)===0;)P++;I*32+P<h&&(h=I*32+P)}if(I*32+31>w){let P=31;for(;!(k>>>P);)P--;I*32+P>w&&(w=I*32+P)}}}return w<h||S<p?null:Int32Array.from([h,p,w-h+1,S-p+1])}getTopLeftOnBit(){const s=this.rowSize,o=this.bits;let c=0;for(;c<o.length&&o[c]===0;)c++;if(c===o.length)return null;const d=c/s;let h=c%s*32;const p=o[c];let w=0;for(;(p<<31-w&4294967295)===0;)w++;return h+=w,Int32Array.from([h,d])}getBottomRightOnBit(){const s=this.rowSize,o=this.bits;let c=o.length-1;for(;c>=0&&o[c]===0;)c--;if(c<0)return null;const d=Math.floor(c/s);let h=Math.floor(c%s)*32;const p=o[c];let w=31;for(;!(p>>>w);)w--;return h+=w,Int32Array.from([h,d])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof Ue))return!1;const o=s;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&q.equals(this.bits,o.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+q.hashCode(this.bits),s}toString(s="X ",o="  ",c=`
`){return this.buildToString(s,o,c)}buildToString(s,o,c){let d=new he;for(let h=0,p=this.height;h<p;h++){for(let w=0,S=this.width;w<S;w++)d.append(this.get(w,h)?s:o);d.append(c)}return d.toString()}clone(){return new Ue(this.width,this.height,this.rowSize,this.bits.slice())}}class ie extends x{static getNotFoundInstance(){return new ie}}ie.kind="NotFoundException";class se extends M{constructor(s){super(s),this.luminances=se.EMPTY,this.buckets=new Int32Array(se.LUMINANCE_BUCKETS)}getBlackRow(s,o){const c=this.getLuminanceSource(),d=c.getWidth();o==null||o.getSize()<d?o=new V(d):o.clear(),this.initArrays(d);const h=c.getRow(s,this.luminances),p=this.buckets;for(let S=0;S<d;S++)p[(h[S]&255)>>se.LUMINANCE_SHIFT]++;const w=se.estimateBlackPoint(p);if(d<3)for(let S=0;S<d;S++)(h[S]&255)<w&&o.set(S);else{let S=h[0]&255,_=h[1]&255;for(let I=1;I<d-1;I++){const k=h[I+1]&255;(_*4-S-k)/2<w&&o.set(I),S=_,_=k}}return o}getBlackMatrix(){const s=this.getLuminanceSource(),o=s.getWidth(),c=s.getHeight(),d=new Ue(o,c);this.initArrays(o);const h=this.buckets;for(let S=1;S<5;S++){const _=Math.floor(c*S/5),I=s.getRow(_,this.luminances),k=Math.floor(o*4/5);for(let P=Math.floor(o/5);P<k;P++){const $=I[P]&255;h[$>>se.LUMINANCE_SHIFT]++}}const p=se.estimateBlackPoint(h),w=s.getMatrix();for(let S=0;S<c;S++){const _=S*o;for(let I=0;I<o;I++)(w[_+I]&255)<p&&d.set(I,S)}return d}createBinarizer(s){return new se(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const o=this.buckets;for(let c=0;c<se.LUMINANCE_BUCKETS;c++)o[c]=0}static estimateBlackPoint(s){const o=s.length;let c=0,d=0,h=0;for(let I=0;I<o;I++)s[I]>h&&(d=I,h=s[I]),s[I]>c&&(c=s[I]);let p=0,w=0;for(let I=0;I<o;I++){const k=I-d,P=s[I]*k*k;P>w&&(p=I,w=P)}if(d>p){const I=d;d=p,p=I}if(p-d<=o/16)throw new ie;let S=p-1,_=-1;for(let I=p-1;I>d;I--){const k=I-d,P=k*k*(p-I)*(c-s[I]);P>_&&(S=I,_=P)}return S<<se.LUMINANCE_SHIFT}}se.LUMINANCE_BITS=5,se.LUMINANCE_SHIFT=8-se.LUMINANCE_BITS,se.LUMINANCE_BUCKETS=1<<se.LUMINANCE_BITS,se.EMPTY=Uint8ClampedArray.from([0]);class ce extends se{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),o=s.getWidth(),c=s.getHeight();if(o>=ce.MINIMUM_DIMENSION&&c>=ce.MINIMUM_DIMENSION){const d=s.getMatrix();let h=o>>ce.BLOCK_SIZE_POWER;(o&ce.BLOCK_SIZE_MASK)!==0&&h++;let p=c>>ce.BLOCK_SIZE_POWER;(c&ce.BLOCK_SIZE_MASK)!==0&&p++;const w=ce.calculateBlackPoints(d,h,p,o,c),S=new Ue(o,c);ce.calculateThresholdForBlock(d,h,p,o,c,w,S),this.matrix=S}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new ce(s)}static calculateThresholdForBlock(s,o,c,d,h,p,w){const S=h-ce.BLOCK_SIZE,_=d-ce.BLOCK_SIZE;for(let I=0;I<c;I++){let k=I<<ce.BLOCK_SIZE_POWER;k>S&&(k=S);const P=ce.cap(I,2,c-3);for(let $=0;$<o;$++){let Z=$<<ce.BLOCK_SIZE_POWER;Z>_&&(Z=_);const ee=ce.cap($,2,o-3);let ue=0;for(let Me=-2;Me<=2;Me++){const ke=p[P+Me];ue+=ke[ee-2]+ke[ee-1]+ke[ee]+ke[ee+1]+ke[ee+2]}const pe=ue/25;ce.thresholdBlock(s,Z,k,pe,d,w)}}}static cap(s,o,c){return s<o?o:s>c?c:s}static thresholdBlock(s,o,c,d,h,p){for(let w=0,S=c*h+o;w<ce.BLOCK_SIZE;w++,S+=h)for(let _=0;_<ce.BLOCK_SIZE;_++)(s[S+_]&255)<=d&&p.set(o+_,c+w)}static calculateBlackPoints(s,o,c,d,h){const p=h-ce.BLOCK_SIZE,w=d-ce.BLOCK_SIZE,S=new Array(c);for(let _=0;_<c;_++){S[_]=new Int32Array(o);let I=_<<ce.BLOCK_SIZE_POWER;I>p&&(I=p);for(let k=0;k<o;k++){let P=k<<ce.BLOCK_SIZE_POWER;P>w&&(P=w);let $=0,Z=255,ee=0;for(let pe=0,Me=I*d+P;pe<ce.BLOCK_SIZE;pe++,Me+=d){for(let ke=0;ke<ce.BLOCK_SIZE;ke++){const Ie=s[Me+ke]&255;$+=Ie,Ie<Z&&(Z=Ie),Ie>ee&&(ee=Ie)}if(ee-Z>ce.MIN_DYNAMIC_RANGE)for(pe++,Me+=d;pe<ce.BLOCK_SIZE;pe++,Me+=d)for(let ke=0;ke<ce.BLOCK_SIZE;ke++)$+=s[Me+ke]&255}let ue=$>>ce.BLOCK_SIZE_POWER*2;if(ee-Z<=ce.MIN_DYNAMIC_RANGE&&(ue=Z/2,_>0&&k>0)){const pe=(S[_-1][k]+2*S[_][k-1]+S[_-1][k-1])/4;Z<pe&&(ue=pe)}S[_][k]=ue}}return S}}ce.BLOCK_SIZE_POWER=3,ce.BLOCK_SIZE=1<<ce.BLOCK_SIZE_POWER,ce.BLOCK_SIZE_MASK=ce.BLOCK_SIZE-1,ce.MINIMUM_DIMENSION=ce.BLOCK_SIZE*5,ce.MIN_DYNAMIC_RANGE=24;class Le{constructor(s,o){this.width=s,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,o,c,d){throw new we("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new we("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new we("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let o=new he;for(let c=0;c<this.height;c++){const d=this.getRow(c,s);for(let h=0;h<this.width;h++){const p=d[h]&255;let w;p<64?w="#":p<128?w="+":p<192?w=".":w=" ",o.append(w)}o.append(`
`)}return o.toString()}}class Ve extends Le{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,o){const c=this.delegate.getRow(s,o),d=this.getWidth();for(let h=0;h<d;h++)c[h]=255-(c[h]&255);return c}getMatrix(){const s=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(o);for(let d=0;d<o;d++)c[d]=255-(s[d]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(s,o,c,d){return new Ve(this.delegate.crop(s,o,c,d))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ve(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ve(this.delegate.rotateCounterClockwise45())}}class Y extends Le{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=Y.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const o=s.getContext("2d").getImageData(0,0,s.width,s.height);return Y.toGrayscaleBuffer(o.data,s.width,s.height)}static toGrayscaleBuffer(s,o,c){const d=new Uint8ClampedArray(o*c);for(let h=0,p=0,w=s.length;h<w;h+=4,p++){let S;if(s[h+3]===0)S=255;else{const I=s[h],k=s[h+1],P=s[h+2];S=306*I+601*k+117*P+512>>10}d[p]=S}return d}getRow(s,o){if(s<0||s>=this.getHeight())throw new A("Requested row is outside the image: "+s);const c=this.getWidth(),d=s*c;return o===null?o=this.buffer.slice(d,d+c):(o.length<c&&(o=new Uint8ClampedArray(c)),o.set(this.buffer.slice(d,d+c))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,o,c,d){return super.crop(s,o,c,d),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const o=this.getTempCanvasElement(),c=o.getContext("2d"),d=s*Y.DEGREE_TO_RADIANS,h=this.canvas.width,p=this.canvas.height,w=Math.ceil(Math.abs(Math.cos(d))*h+Math.abs(Math.sin(d))*p),S=Math.ceil(Math.abs(Math.sin(d))*h+Math.abs(Math.cos(d))*p);return o.width=w,o.height=S,c.translate(w/2,S/2),c.rotate(d),c.drawImage(this.canvas,h/-2,p/-2),this.buffer=Y.makeBufferFromCanvasImageData(o),this}invert(){return new Ve(this)}}Y.DEGREE_TO_RADIANS=Math.PI/180;class X{constructor(s,o,c){this.deviceId=s,this.label=o,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var le=(globalThis||$d||self||window||void 0)&&(globalThis||$d||self||window||void 0).__awaiter||function(L,s,o,c){function d(h){return h instanceof o?h:new o(function(p){p(h)})}return new(o||(o=Promise))(function(h,p){function w(I){try{_(c.next(I))}catch(k){p(k)}}function S(I){try{_(c.throw(I))}catch(k){p(k)}}function _(I){I.done?h(I.value):d(I.value).then(w,S)}_((c=c.apply(L,s||[])).next())})};class oe{constructor(s,o=500,c){this.reader=s,this.timeBetweenScansMillis=o,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return le(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const c of s){const d=c.kind==="video"?"videoinput":c.kind;if(d!=="videoinput")continue;const h=c.deviceId||c.id,p=c.label||`Video device ${o.length+1}`,w=c.groupId,S={deviceId:h,label:p,kind:d,groupId:w};o.push(S)}return o})}getVideoInputDevices(){return le(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new X(o.deviceId,o.label))})}findDeviceById(s){return le(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(c=>c.deviceId===s):null})}decodeFromInputVideoDevice(s,o){return le(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,o)})}decodeOnceFromVideoDevice(s,o){return le(this,void 0,void 0,function*(){this.reset();let c;s?c={deviceId:{exact:s}}:c={facingMode:"environment"};const d={video:c};return yield this.decodeOnceFromConstraints(d,o)})}decodeOnceFromConstraints(s,o){return le(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(c,o)})}decodeOnceFromStream(s,o){return le(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(s,o);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(s,o,c){return le(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,o,c)})}decodeFromVideoDevice(s,o,c){return le(this,void 0,void 0,function*(){let d;s?d={deviceId:{exact:s}}:d={facingMode:"environment"};const h={video:d};return yield this.decodeFromConstraints(h,o,c)})}decodeFromConstraints(s,o,c){return le(this,void 0,void 0,function*(){const d=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(d,o,c)})}decodeFromStream(s,o,c){return le(this,void 0,void 0,function*(){this.reset();const d=yield this.attachStreamToVideo(s,o);return yield this.decodeContinuously(d,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,o){return le(this,void 0,void 0,function*(){const c=this.prepareVideoElement(o);return this.addVideoSource(c,s),this.videoElement=c,this.stream=s,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(s){return new Promise((o,c)=>this.playVideoOnLoad(s,()=>o()))}playVideoOnLoad(s,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",o),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return le(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,o){const c=document.getElementById(s);if(!c)throw new E(`element with id '${s}' not found`);if(c.nodeName.toLowerCase()!==o.toLowerCase())throw new E(`element with id '${s}' must be an ${o} element`);return c}decodeFromImage(s,o){if(!s&&!o)throw new E("either imageElement with a src set or an url must be provided");return o&&!s?this.decodeFromImageUrl(o):this.decodeFromImageElement(s)}decodeFromVideo(s,o){if(!s&&!o)throw new E("Either an element with a src set or an URL must be provided");return o&&!s?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,o,c){if(s===void 0&&o===void 0)throw new E("Either an element with a src set or an URL must be provided");return o&&!s?this.decodeFromVideoUrlContinuously(o,c):this.decodeFromVideoElementContinuously(s,c)}decodeFromImageElement(s){if(!s)throw new E("An image element must be provided.");this.reset();const o=this.prepareImageElement(s);this.imageElement=o;let c;return this.isImageLoaded(o)?c=this.decodeOnce(o,!1,!0):c=this._decodeOnLoadImage(o),c}decodeFromVideoElement(s){const o=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(s,o){const c=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(c,o)}_decodeFromVideoElementSetup(s){if(!s)throw new E("A video element must be provided.");this.reset();const o=this.prepareVideoElement(s);return this.videoElement=o,o}decodeFromImageUrl(s){if(!s)throw new E("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const c=this._decodeOnLoadImage(o);return o.src=s,c}decodeFromVideoUrl(s){if(!s)throw new E("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),c=this.decodeFromVideoElement(o);return o.src=s,c}decodeFromVideoUrlContinuously(s,o){if(!s)throw new E("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),d=this.decodeFromVideoElementContinuously(c,o);return c.src=s,d}_decodeOnLoadImage(s){return new Promise((o,c)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(o,c),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return le(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,o){return le(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,o)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let o;return typeof s>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof s=="string"&&(o=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(o=s),o}prepareVideoElement(s){let o;return!s&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof s=="string"&&(o=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(o=s),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(s,o=!0,c=!0){this._stopAsyncDecode=!1;const d=(h,p)=>{if(this._stopAsyncDecode){p(new ie("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const w=this.decode(s);h(w)}catch(w){const S=o&&w instanceof ie,I=(w instanceof O||w instanceof K)&&c;if(S||I)return setTimeout(d,this._timeBetweenDecodingAttempts,h,p);p(w)}};return new Promise((h,p)=>d(h,p))}decodeContinuously(s,o){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const d=this.decode(s);o(d,null),setTimeout(c,this.timeBetweenScansMillis)}catch(d){o(null,d);const h=d instanceof O||d instanceof K,p=d instanceof ie;(h||p)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(s){const o=this.createBinaryBitmap(s);return this.decodeBitmap(o)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,o,c){o||(o={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(s,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(s,o,c=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(s,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const o=this.getCaptureCanvas(s),c=new Y(o),d=new ce(c);return new N(d)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const o=this.createCaptureCanvas(s);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let c,d;return typeof s<"u"&&(s instanceof HTMLVideoElement?(c=s.videoWidth,d=s.videoHeight):s instanceof HTMLImageElement&&(c=s.naturalWidth||s.width,d=s.naturalHeight||s.height)),o.style.width=c+"px",o.style.height=d+"px",o.width=c,o.height=d,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,o){try{s.srcObject=o}catch{s.src=URL.createObjectURL(o)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Ne{constructor(s,o,c=o==null?0:8*o.length,d,h,p=j.currentTimeMillis()){this.text=s,this.rawBytes=o,this.numBits=c,this.resultPoints=d,this.format=h,this.timestamp=p,this.text=s,this.rawBytes=o,c==null?this.numBits=o==null?0:8*o.length:this.numBits=c,this.resultPoints=d,this.format=h,this.resultMetadata=null,p==null?this.timestamp=j.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,o)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const o=this.resultPoints;if(o===null)this.resultPoints=s;else if(s!==null&&s.length>0){const c=new Array(o.length+s.length);j.arraycopy(o,0,c,0,o.length),j.arraycopy(s,0,c,o.length,s.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ye;(function(L){L[L.AZTEC=0]="AZTEC",L[L.CODABAR=1]="CODABAR",L[L.CODE_39=2]="CODE_39",L[L.CODE_93=3]="CODE_93",L[L.CODE_128=4]="CODE_128",L[L.DATA_MATRIX=5]="DATA_MATRIX",L[L.EAN_8=6]="EAN_8",L[L.EAN_13=7]="EAN_13",L[L.ITF=8]="ITF",L[L.MAXICODE=9]="MAXICODE",L[L.PDF_417=10]="PDF_417",L[L.QR_CODE=11]="QR_CODE",L[L.RSS_14=12]="RSS_14",L[L.RSS_EXPANDED=13]="RSS_EXPANDED",L[L.UPC_A=14]="UPC_A",L[L.UPC_E=15]="UPC_E",L[L.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ye||(Ye={}));var be=Ye,ht;(function(L){L[L.OTHER=0]="OTHER",L[L.ORIENTATION=1]="ORIENTATION",L[L.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",L[L.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",L[L.ISSUE_NUMBER=4]="ISSUE_NUMBER",L[L.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",L[L.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",L[L.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",L[L.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",L[L.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",L[L.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ht||(ht={}));var Ge=ht;class Mt{constructor(s,o,c,d,h=-1,p=-1){this.rawBytes=s,this.text=o,this.byteSegments=c,this.ecLevel=d,this.structuredAppendSequenceNumber=h,this.structuredAppendParity=p,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class xn{exp(s){return this.expTable[s]}log(s){if(s===0)throw new A;return this.logTable[s]}static addOrSubtract(s,o){return s^o}}class Ae{constructor(s,o){if(o.length===0)throw new A;this.field=s;const c=o.length;if(c>1&&o[0]===0){let d=1;for(;d<c&&o[d]===0;)d++;d===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-d),j.arraycopy(o,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const o=this.coefficients;let c;if(s===1){c=0;for(let p=0,w=o.length;p!==w;p++){const S=o[p];c=xn.addOrSubtract(c,S)}return c}c=o[0];const d=o.length,h=this.field;for(let p=1;p<d;p++)c=xn.addOrSubtract(h.multiply(s,c),o[p]);return c}addOrSubtract(s){if(!this.field.equals(s.field))throw new A("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let o=this.coefficients,c=s.coefficients;if(o.length>c.length){const p=o;o=c,c=p}let d=new Int32Array(c.length);const h=c.length-o.length;j.arraycopy(c,0,d,0,h);for(let p=h;p<c.length;p++)d[p]=xn.addOrSubtract(o[p-h],c[p]);return new Ae(this.field,d)}multiply(s){if(!this.field.equals(s.field))throw new A("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const o=this.coefficients,c=o.length,d=s.coefficients,h=d.length,p=new Int32Array(c+h-1),w=this.field;for(let S=0;S<c;S++){const _=o[S];for(let I=0;I<h;I++)p[S+I]=xn.addOrSubtract(p[S+I],w.multiply(_,d[I]))}return new Ae(w,p)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const o=this.coefficients.length,c=this.field,d=new Int32Array(o),h=this.coefficients;for(let p=0;p<o;p++)d[p]=c.multiply(h[p],s);return new Ae(c,d)}multiplyByMonomial(s,o){if(s<0)throw new A;if(o===0)return this.field.getZero();const c=this.coefficients,d=c.length,h=new Int32Array(d+s),p=this.field;for(let w=0;w<d;w++)h[w]=p.multiply(c[w],o);return new Ae(p,h)}divide(s){if(!this.field.equals(s.field))throw new A("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new A("Divide by 0");const o=this.field;let c=o.getZero(),d=this;const h=s.getCoefficient(s.getDegree()),p=o.inverse(h);for(;d.getDegree()>=s.getDegree()&&!d.isZero();){const w=d.getDegree()-s.getDegree(),S=o.multiply(d.getCoefficient(d.getDegree()),p),_=s.multiplyByMonomial(w,S),I=o.buildMonomial(w,S);c=c.addOrSubtract(I),d=d.addOrSubtract(_)}return[c,d]}toString(){let s="";for(let o=this.getDegree();o>=0;o--){let c=this.getCoefficient(o);if(c!==0){if(c<0?(s+=" - ",c=-c):s.length>0&&(s+=" + "),o===0||c!==1){const d=this.field.log(c);d===0?s+="1":d===1?s+="a":(s+="a^",s+=d)}o!==0&&(o===1?s+="x":(s+="x^",s+=o))}}return s}}class Fe extends x{}Fe.kind="ArithmeticException";class Be extends xn{constructor(s,o,c){super(),this.primitive=s,this.size=o,this.generatorBase=c;const d=new Int32Array(o);let h=1;for(let w=0;w<o;w++)d[w]=h,h*=2,h>=o&&(h^=s,h&=o-1);this.expTable=d;const p=new Int32Array(o);for(let w=0;w<o-1;w++)p[d[w]]=w;this.logTable=p,this.zero=new Ae(this,Int32Array.from([0])),this.one=new Ae(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,o){if(s<0)throw new A;if(o===0)return this.zero;const c=new Int32Array(s+1);return c[0]=o,new Ae(this,c)}inverse(s){if(s===0)throw new Fe;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,o){return s===0||o===0?0:this.expTable[(this.logTable[s]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+B.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}Be.AZTEC_DATA_12=new Be(4201,4096,1),Be.AZTEC_DATA_10=new Be(1033,1024,1),Be.AZTEC_DATA_6=new Be(67,64,1),Be.AZTEC_PARAM=new Be(19,16,1),Be.QR_CODE_FIELD_256=new Be(285,256,0),Be.DATA_MATRIX_FIELD_256=new Be(301,256,1),Be.AZTEC_DATA_8=Be.DATA_MATRIX_FIELD_256,Be.MAXICODE_FIELD_64=Be.AZTEC_DATA_6;class nt extends x{}nt.kind="ReedSolomonException";class Ke extends x{}Ke.kind="IllegalStateException";class xt{constructor(s){this.field=s}decode(s,o){const c=this.field,d=new Ae(c,s),h=new Int32Array(o);let p=!0;for(let $=0;$<o;$++){const Z=d.evaluateAt(c.exp($+c.getGeneratorBase()));h[h.length-1-$]=Z,Z!==0&&(p=!1)}if(p)return;const w=new Ae(c,h),S=this.runEuclideanAlgorithm(c.buildMonomial(o,1),w,o),_=S[0],I=S[1],k=this.findErrorLocations(_),P=this.findErrorMagnitudes(I,k);for(let $=0;$<k.length;$++){const Z=s.length-1-c.log(k[$]);if(Z<0)throw new nt("Bad error location");s[Z]=Be.addOrSubtract(s[Z],P[$])}}runEuclideanAlgorithm(s,o,c){if(s.getDegree()<o.getDegree()){const $=s;s=o,o=$}const d=this.field;let h=s,p=o,w=d.getZero(),S=d.getOne();for(;p.getDegree()>=(c/2|0);){let $=h,Z=w;if(h=p,w=S,h.isZero())throw new nt("r_{i-1} was zero");p=$;let ee=d.getZero();const ue=h.getCoefficient(h.getDegree()),pe=d.inverse(ue);for(;p.getDegree()>=h.getDegree()&&!p.isZero();){const Me=p.getDegree()-h.getDegree(),ke=d.multiply(p.getCoefficient(p.getDegree()),pe);ee=ee.addOrSubtract(d.buildMonomial(Me,ke)),p=p.addOrSubtract(h.multiplyByMonomial(Me,ke))}if(S=ee.multiply(w).addOrSubtract(Z),p.getDegree()>=h.getDegree())throw new Ke("Division algorithm failed to reduce polynomial?")}const _=S.getCoefficient(0);if(_===0)throw new nt("sigmaTilde(0) was zero");const I=d.inverse(_),k=S.multiplyScalar(I),P=p.multiplyScalar(I);return[k,P]}findErrorLocations(s){const o=s.getDegree();if(o===1)return Int32Array.from([s.getCoefficient(1)]);const c=new Int32Array(o);let d=0;const h=this.field;for(let p=1;p<h.getSize()&&d<o;p++)s.evaluateAt(p)===0&&(c[d]=h.inverse(p),d++);if(d!==o)throw new nt("Error locator degree does not match number of roots");return c}findErrorMagnitudes(s,o){const c=o.length,d=new Int32Array(c),h=this.field;for(let p=0;p<c;p++){const w=h.inverse(o[p]);let S=1;for(let _=0;_<c;_++)if(p!==_){const I=h.multiply(o[_],w),k=(I&1)===0?I|1:I&-2;S=h.multiply(S,k)}d[p]=h.multiply(s.evaluateAt(w),h.inverse(S)),h.getGeneratorBase()!==0&&(d[p]=h.multiply(d[p],w))}return d}}var lt;(function(L){L[L.UPPER=0]="UPPER",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.DIGIT=3]="DIGIT",L[L.PUNCT=4]="PUNCT",L[L.BINARY=5]="BINARY"})(lt||(lt={}));class yt{decode(s){this.ddata=s;let o=s.getBits(),c=this.extractBits(o),d=this.correctBits(c),h=yt.convertBoolArrayToByteArray(d),p=yt.getEncodedData(d),w=new Mt(h,p,null,null);return w.setNumBits(d.length),w}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let o=s.length,c=lt.UPPER,d=lt.UPPER,h="",p=0;for(;p<o;)if(d===lt.BINARY){if(o-p<5)break;let w=yt.readCode(s,p,5);if(p+=5,w===0){if(o-p<11)break;w=yt.readCode(s,p,11)+31,p+=11}for(let S=0;S<w;S++){if(o-p<8){p=o;break}const _=yt.readCode(s,p,8);h+=_e.castAsNonUtf8Char(_),p+=8}d=c}else{let w=d===lt.DIGIT?4:5;if(o-p<w)break;let S=yt.readCode(s,p,w);p+=w;let _=yt.getCharacter(d,S);_.startsWith("CTRL_")?(c=d,d=yt.getTable(_.charAt(5)),_.charAt(6)==="L"&&(c=d)):(h+=_,d=c)}return h}static getTable(s){switch(s){case"L":return lt.LOWER;case"P":return lt.PUNCT;case"M":return lt.MIXED;case"D":return lt.DIGIT;case"B":return lt.BINARY;case"U":default:return lt.UPPER}}static getCharacter(s,o){switch(s){case lt.UPPER:return yt.UPPER_TABLE[o];case lt.LOWER:return yt.LOWER_TABLE[o];case lt.MIXED:return yt.MIXED_TABLE[o];case lt.PUNCT:return yt.PUNCT_TABLE[o];case lt.DIGIT:return yt.DIGIT_TABLE[o];default:throw new Ke("Bad table")}}correctBits(s){let o,c;this.ddata.getNbLayers()<=2?(c=6,o=Be.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,o=Be.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,o=Be.AZTEC_DATA_10):(c=12,o=Be.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),h=s.length/c;if(h<d)throw new K;let p=s.length%c,w=new Int32Array(h);for(let P=0;P<h;P++,p+=c)w[P]=yt.readCode(s,p,c);try{new xt(o).decode(w,h-d)}catch(P){throw new K(P)}let S=(1<<c)-1,_=0;for(let P=0;P<d;P++){let $=w[P];if($===0||$===S)throw new K;($===1||$===S-1)&&_++}let I=new Array(d*c-_),k=0;for(let P=0;P<d;P++){let $=w[P];if($===1||$===S-1)I.fill($>1,k,k+c-1),k+=c-1;else for(let Z=c-1;Z>=0;--Z)I[k++]=($&1<<Z)!==0}return I}extractBits(s){let o=this.ddata.isCompact(),c=this.ddata.getNbLayers(),d=(o?11:14)+c*4,h=new Int32Array(d),p=new Array(this.totalBitsInLayer(c,o));if(o)for(let w=0;w<h.length;w++)h[w]=w;else{let w=d+1+2*B.truncDivision(B.truncDivision(d,2)-1,15),S=d/2,_=B.truncDivision(w,2);for(let I=0;I<S;I++){let k=I+B.truncDivision(I,15);h[S-I-1]=_-k-1,h[S+I]=_+k+1}}for(let w=0,S=0;w<c;w++){let _=(c-w)*4+(o?9:12),I=w*2,k=d-1-I;for(let P=0;P<_;P++){let $=P*2;for(let Z=0;Z<2;Z++)p[S+$+Z]=s.get(h[I+Z],h[I+P]),p[S+2*_+$+Z]=s.get(h[I+P],h[k-Z]),p[S+4*_+$+Z]=s.get(h[k-Z],h[k-P]),p[S+6*_+$+Z]=s.get(h[k-P],h[I+Z])}S+=_*8}return p}static readCode(s,o,c){let d=0;for(let h=o;h<o+c;h++)d<<=1,s[h]&&(d|=1);return d}static readByte(s,o){let c=s.length-o;return c>=8?yt.readCode(s,o,8):yt.readCode(s,o,c)<<8-c}static convertBoolArrayToByteArray(s){let o=new Uint8Array((s.length+7)/8);for(let c=0;c<o.length;c++)o[c]=yt.readByte(s,8*c);return o}totalBitsInLayer(s,o){return((o?88:112)+16*s)*s}}yt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],yt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],yt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],yt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],yt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class mt{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,o,c,d){const h=s-c,p=o-d;return Math.sqrt(h*h+p*p)}static sum(s){let o=0;for(let c=0,d=s.length;c!==d;c++){const h=s[c];o+=h}return o}}class Te{static floatToIntBits(s){return s}}Te.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Re{constructor(s,o){this.x=s,this.y=o}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof Re){const o=s;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*Te.floatToIntBits(this.x)+Te.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const o=this.distance(s[0],s[1]),c=this.distance(s[1],s[2]),d=this.distance(s[0],s[2]);let h,p,w;if(c>=o&&c>=d?(p=s[0],h=s[1],w=s[2]):d>=c&&d>=o?(p=s[1],h=s[0],w=s[2]):(p=s[2],h=s[0],w=s[1]),this.crossProductZ(h,p,w)<0){const S=h;h=w,w=S}s[0]=h,s[1]=p,s[2]=w}static distance(s,o){return mt.distance(s.x,s.y,o.x,o.y)}static crossProductZ(s,o,c){const d=o.x,h=o.y;return(c.x-d)*(s.y-h)-(c.y-h)*(s.x-d)}}class et{constructor(s,o){this.bits=s,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Ct extends et{constructor(s,o,c,d,h){super(s,o),this.compact=c,this.nbDatablocks=d,this.nbLayers=h}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class vt{constructor(s,o,c,d){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),o==null&&(o=vt.INIT_SIZE),c==null&&(c=s.getWidth()/2|0),d==null&&(d=s.getHeight()/2|0);const h=o/2|0;if(this.leftInit=c-h,this.rightInit=c+h,this.upInit=d-h,this.downInit=d+h,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ie}detect(){let s=this.leftInit,o=this.rightInit,c=this.upInit,d=this.downInit,h=!1,p=!0,w=!1,S=!1,_=!1,I=!1,k=!1;const P=this.width,$=this.height;for(;p;){p=!1;let Z=!0;for(;(Z||!S)&&o<P;)Z=this.containsBlackPoint(c,d,o,!1),Z?(o++,p=!0,S=!0):S||o++;if(o>=P){h=!0;break}let ee=!0;for(;(ee||!_)&&d<$;)ee=this.containsBlackPoint(s,o,d,!0),ee?(d++,p=!0,_=!0):_||d++;if(d>=$){h=!0;break}let ue=!0;for(;(ue||!I)&&s>=0;)ue=this.containsBlackPoint(c,d,s,!1),ue?(s--,p=!0,I=!0):I||s--;if(s<0){h=!0;break}let pe=!0;for(;(pe||!k)&&c>=0;)pe=this.containsBlackPoint(s,o,c,!0),pe?(c--,p=!0,k=!0):k||c--;if(c<0){h=!0;break}p&&(w=!0)}if(!h&&w){const Z=o-s;let ee=null;for(let ke=1;ee===null&&ke<Z;ke++)ee=this.getBlackPointOnSegment(s,d-ke,s+ke,d);if(ee==null)throw new ie;let ue=null;for(let ke=1;ue===null&&ke<Z;ke++)ue=this.getBlackPointOnSegment(s,c+ke,s+ke,c);if(ue==null)throw new ie;let pe=null;for(let ke=1;pe===null&&ke<Z;ke++)pe=this.getBlackPointOnSegment(o,c+ke,o-ke,c);if(pe==null)throw new ie;let Me=null;for(let ke=1;Me===null&&ke<Z;ke++)Me=this.getBlackPointOnSegment(o,d-ke,o-ke,d);if(Me==null)throw new ie;return this.centerEdges(Me,ee,pe,ue)}else throw new ie}getBlackPointOnSegment(s,o,c,d){const h=mt.round(mt.distance(s,o,c,d)),p=(c-s)/h,w=(d-o)/h,S=this.image;for(let _=0;_<h;_++){const I=mt.round(s+_*p),k=mt.round(o+_*w);if(S.get(I,k))return new Re(I,k)}return null}centerEdges(s,o,c,d){const h=s.getX(),p=s.getY(),w=o.getX(),S=o.getY(),_=c.getX(),I=c.getY(),k=d.getX(),P=d.getY(),$=vt.CORR;return h<this.width/2?[new Re(k-$,P+$),new Re(w+$,S+$),new Re(_-$,I-$),new Re(h+$,p-$)]:[new Re(k+$,P+$),new Re(w+$,S-$),new Re(_-$,I+$),new Re(h-$,p-$)]}containsBlackPoint(s,o,c,d){const h=this.image;if(d){for(let p=s;p<=o;p++)if(h.get(p,c))return!0}else for(let p=s;p<=o;p++)if(h.get(c,p))return!0;return!1}}vt.INIT_SIZE=10,vt.CORR=1;class Wt{static checkAndNudgePoints(s,o){const c=s.getWidth(),d=s.getHeight();let h=!0;for(let p=0;p<o.length&&h;p+=2){const w=Math.floor(o[p]),S=Math.floor(o[p+1]);if(w<-1||w>c||S<-1||S>d)throw new ie;h=!1,w===-1?(o[p]=0,h=!0):w===c&&(o[p]=c-1,h=!0),S===-1?(o[p+1]=0,h=!0):S===d&&(o[p+1]=d-1,h=!0)}h=!0;for(let p=o.length-2;p>=0&&h;p-=2){const w=Math.floor(o[p]),S=Math.floor(o[p+1]);if(w<-1||w>c||S<-1||S>d)throw new ie;h=!1,w===-1?(o[p]=0,h=!0):w===c&&(o[p]=c-1,h=!0),S===-1?(o[p+1]=0,h=!0):S===d&&(o[p+1]=d-1,h=!0)}}}class $t{constructor(s,o,c,d,h,p,w,S,_){this.a11=s,this.a21=o,this.a31=c,this.a12=d,this.a22=h,this.a32=p,this.a13=w,this.a23=S,this.a33=_}static quadrilateralToQuadrilateral(s,o,c,d,h,p,w,S,_,I,k,P,$,Z,ee,ue){const pe=$t.quadrilateralToSquare(s,o,c,d,h,p,w,S);return $t.squareToQuadrilateral(_,I,k,P,$,Z,ee,ue).times(pe)}transformPoints(s){const o=s.length,c=this.a11,d=this.a12,h=this.a13,p=this.a21,w=this.a22,S=this.a23,_=this.a31,I=this.a32,k=this.a33;for(let P=0;P<o;P+=2){const $=s[P],Z=s[P+1],ee=h*$+S*Z+k;s[P]=(c*$+p*Z+_)/ee,s[P+1]=(d*$+w*Z+I)/ee}}transformPointsWithValues(s,o){const c=this.a11,d=this.a12,h=this.a13,p=this.a21,w=this.a22,S=this.a23,_=this.a31,I=this.a32,k=this.a33,P=s.length;for(let $=0;$<P;$++){const Z=s[$],ee=o[$],ue=h*Z+S*ee+k;s[$]=(c*Z+p*ee+_)/ue,o[$]=(d*Z+w*ee+I)/ue}}static squareToQuadrilateral(s,o,c,d,h,p,w,S){const _=s-c+h-w,I=o-d+p-S;if(_===0&&I===0)return new $t(c-s,h-c,s,d-o,p-d,o,0,0,1);{const k=c-h,P=w-h,$=d-p,Z=S-p,ee=k*Z-P*$,ue=(_*Z-P*I)/ee,pe=(k*I-_*$)/ee;return new $t(c-s+ue*c,w-s+pe*w,s,d-o+ue*d,S-o+pe*S,o,ue,pe,1)}}static quadrilateralToSquare(s,o,c,d,h,p,w,S){return $t.squareToQuadrilateral(s,o,c,d,h,p,w,S).buildAdjoint()}buildAdjoint(){return new $t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new $t(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class Oe extends Wt{sampleGrid(s,o,c,d,h,p,w,S,_,I,k,P,$,Z,ee,ue,pe,Me,ke){const Ie=$t.quadrilateralToQuadrilateral(d,h,p,w,S,_,I,k,P,$,Z,ee,ue,pe,Me,ke);return this.sampleGridWithTransform(s,o,c,Ie)}sampleGridWithTransform(s,o,c,d){if(o<=0||c<=0)throw new ie;const h=new Ue(o,c),p=new Float32Array(2*o);for(let w=0;w<c;w++){const S=p.length,_=w+.5;for(let I=0;I<S;I+=2)p[I]=I/2+.5,p[I+1]=_;d.transformPoints(p),Wt.checkAndNudgePoints(s,p);try{for(let I=0;I<S;I+=2)s.get(Math.floor(p[I]),Math.floor(p[I+1]))&&h.set(I/2,w)}catch{throw new ie}}return h}}class Xe{static setGridSampler(s){Xe.gridSampler=s}static getInstance(){return Xe.gridSampler}}Xe.gridSampler=new Oe;class We{constructor(s,o){this.x=s,this.y=o}toResultPoint(){return new Re(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Dt{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let o=this.getMatrixCenter(),c=this.getBullsEyeCorners(o);if(s){let p=c[0];c[0]=c[2],c[2]=p}this.extractParameters(c);let d=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),h=this.getMatrixCornerPoints(c);return new Ct(d,h,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new ie;let o=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(s[0],s[1],o),this.sampleLine(s[1],s[2],o),this.sampleLine(s[2],s[3],o),this.sampleLine(s[3],s[0],o)]);this.shift=this.getRotation(c,o);let d=0;for(let p=0;p<4;p++){let w=c[(this.shift+p)%4];this.compact?(d<<=7,d+=w>>1&127):(d<<=10,d+=(w>>2&992)+(w>>1&31))}let h=this.getCorrectedParameterData(d,this.compact);this.compact?(this.nbLayers=(h>>6)+1,this.nbDataBlocks=(h&63)+1):(this.nbLayers=(h>>11)+1,this.nbDataBlocks=(h&2047)+1)}getRotation(s,o){let c=0;s.forEach((d,h,p)=>{let w=(d>>o-2<<1)+(d&1);c=(c<<3)+w}),c=((c&1)<<11)+(c>>1);for(let d=0;d<4;d++)if(B.bitCount(c^this.EXPECTED_CORNER_BITS[d])<=2)return d;throw new ie}getCorrectedParameterData(s,o){let c,d;o?(c=7,d=2):(c=10,d=4);let h=c-d,p=new Int32Array(c);for(let S=c-1;S>=0;--S)p[S]=s&15,s>>=4;try{new xt(Be.AZTEC_PARAM).decode(p,h)}catch{throw new ie}let w=0;for(let S=0;S<d;S++)w=(w<<4)+p[S];return w}getBullsEyeCorners(s){let o=s,c=s,d=s,h=s,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let k=this.getFirstDifferent(o,p,1,-1),P=this.getFirstDifferent(c,p,1,1),$=this.getFirstDifferent(d,p,-1,1),Z=this.getFirstDifferent(h,p,-1,-1);if(this.nbCenterLayers>2){let ee=this.distancePoint(Z,k)*this.nbCenterLayers/(this.distancePoint(h,o)*(this.nbCenterLayers+2));if(ee<.75||ee>1.25||!this.isWhiteOrBlackRectangle(k,P,$,Z))break}o=k,c=P,d=$,h=Z,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ie;this.compact=this.nbCenterLayers===5;let w=new Re(o.getX()+.5,o.getY()-.5),S=new Re(c.getX()+.5,c.getY()+.5),_=new Re(d.getX()-.5,d.getY()+.5),I=new Re(h.getX()-.5,h.getY()-.5);return this.expandSquare([w,S,_,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,o,c,d;try{let w=new vt(this.image).detect();s=w[0],o=w[1],c=w[2],d=w[3]}catch{let S=this.image.getWidth()/2,_=this.image.getHeight()/2;s=this.getFirstDifferent(new We(S+7,_-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new We(S+7,_+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new We(S-7,_+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new We(S-7,_-7),!1,-1,-1).toResultPoint()}let h=mt.round((s.getX()+d.getX()+o.getX()+c.getX())/4),p=mt.round((s.getY()+d.getY()+o.getY()+c.getY())/4);try{let w=new vt(this.image,15,h,p).detect();s=w[0],o=w[1],c=w[2],d=w[3]}catch{s=this.getFirstDifferent(new We(h+7,p-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new We(h+7,p+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new We(h-7,p+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new We(h-7,p-7),!1,-1,-1).toResultPoint()}return h=mt.round((s.getX()+d.getX()+o.getX()+c.getX())/4),p=mt.round((s.getY()+d.getY()+o.getY()+c.getY())/4),new We(h,p)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,o,c,d,h){let p=Xe.getInstance(),w=this.getDimension(),S=w/2-this.nbCenterLayers,_=w/2+this.nbCenterLayers;return p.sampleGrid(s,w,w,S,S,_,S,_,_,S,_,o.getX(),o.getY(),c.getX(),c.getY(),d.getX(),d.getY(),h.getX(),h.getY())}sampleLine(s,o,c){let d=0,h=this.distanceResultPoint(s,o),p=h/c,w=s.getX(),S=s.getY(),_=p*(o.getX()-s.getX())/h,I=p*(o.getY()-s.getY())/h;for(let k=0;k<c;k++)this.image.get(mt.round(w+k*_),mt.round(S+k*I))&&(d|=1<<c-k-1);return d}isWhiteOrBlackRectangle(s,o,c,d){let h=3;s=new We(s.getX()-h,s.getY()+h),o=new We(o.getX()-h,o.getY()-h),c=new We(c.getX()+h,c.getY()-h),d=new We(d.getX()+h,d.getY()+h);let p=this.getColor(d,s);if(p===0)return!1;let w=this.getColor(s,o);return w!==p||(w=this.getColor(o,c),w!==p)?!1:(w=this.getColor(c,d),w===p)}getColor(s,o){let c=this.distancePoint(s,o),d=(o.getX()-s.getX())/c,h=(o.getY()-s.getY())/c,p=0,w=s.getX(),S=s.getY(),_=this.image.get(s.getX(),s.getY()),I=Math.ceil(c);for(let P=0;P<I;P++)w+=d,S+=h,this.image.get(mt.round(w),mt.round(S))!==_&&p++;let k=p/c;return k>.1&&k<.9?0:k<=.1===_?1:-1}getFirstDifferent(s,o,c,d){let h=s.getX()+c,p=s.getY()+d;for(;this.isValid(h,p)&&this.image.get(h,p)===o;)h+=c,p+=d;for(h-=c,p-=d;this.isValid(h,p)&&this.image.get(h,p)===o;)h+=c;for(h-=c;this.isValid(h,p)&&this.image.get(h,p)===o;)p+=d;return p-=d,new We(h,p)}expandSquare(s,o,c){let d=c/(2*o),h=s[0].getX()-s[2].getX(),p=s[0].getY()-s[2].getY(),w=(s[0].getX()+s[2].getX())/2,S=(s[0].getY()+s[2].getY())/2,_=new Re(w+d*h,S+d*p),I=new Re(w-d*h,S-d*p);h=s[1].getX()-s[3].getX(),p=s[1].getY()-s[3].getY(),w=(s[1].getX()+s[3].getX())/2,S=(s[1].getY()+s[3].getY())/2;let k=new Re(w+d*h,S+d*p),P=new Re(w-d*h,S-d*p);return[_,k,I,P]}isValid(s,o){return s>=0&&s<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(s){let o=mt.round(s.getX()),c=mt.round(s.getY());return this.isValid(o,c)}distancePoint(s,o){return mt.distance(s.getX(),s.getY(),o.getX(),o.getY())}distanceResultPoint(s,o){return mt.distance(s.getX(),s.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(B.truncDivision(this.nbLayers-4,8)+1)+15}}class Gt{decode(s,o=null){let c=null,d=new Dt(s.getBlackMatrix()),h=null,p=null;try{let I=d.detectMirror(!1);h=I.getPoints(),this.reportFoundResultPoints(o,h),p=new yt().decode(I)}catch(I){c=I}if(p==null)try{let I=d.detectMirror(!0);h=I.getPoints(),this.reportFoundResultPoints(o,h),p=new yt().decode(I)}catch(I){throw c??I}let w=new Ne(p.getText(),p.getRawBytes(),p.getNumBits(),h,be.AZTEC,j.currentTimeMillis()),S=p.getByteSegments();S!=null&&w.putMetadata(Ge.BYTE_SEGMENTS,S);let _=p.getECLevel();return _!=null&&w.putMetadata(Ge.ERROR_CORRECTION_LEVEL,_),w}reportFoundResultPoints(s,o){if(s!=null){let c=s.get(ne.NEED_RESULT_POINT_CALLBACK);c!=null&&o.forEach((d,h,p)=>{c.foundPossibleResultPoint(d)})}}reset(){}}class rt extends oe{constructor(s=500){super(new Gt,s)}}class Et{decode(s,o){try{return this.doDecode(s,o)}catch{if(o&&o.get(ne.TRY_HARDER)===!0&&s.isRotateSupported()){const h=s.rotateCounterClockwise(),p=this.doDecode(h,o),w=p.getResultMetadata();let S=270;w!==null&&w.get(Ge.ORIENTATION)===!0&&(S=S+w.get(Ge.ORIENTATION)%360),p.putMetadata(Ge.ORIENTATION,S);const _=p.getResultPoints();if(_!==null){const I=h.getHeight();for(let k=0;k<_.length;k++)_[k]=new Re(I-_[k].getY()-1,_[k].getX())}return p}else throw new ie}}reset(){}doDecode(s,o){const c=s.getWidth(),d=s.getHeight();let h=new V(c);const p=o&&o.get(ne.TRY_HARDER)===!0,w=Math.max(1,d>>(p?8:5));let S;p?S=d:S=15;const _=Math.trunc(d/2);for(let I=0;I<S;I++){const k=Math.trunc((I+1)/2),P=(I&1)===0,$=_+w*(P?k:-k);if($<0||$>=d)break;try{h=s.getBlackRow($,h)}catch{continue}for(let Z=0;Z<2;Z++){if(Z===1&&(h.reverse(),o&&o.get(ne.NEED_RESULT_POINT_CALLBACK)===!0)){const ee=new Map;o.forEach((ue,pe)=>ee.set(pe,ue)),ee.delete(ne.NEED_RESULT_POINT_CALLBACK),o=ee}try{const ee=this.decodeRow($,h,o);if(Z===1){ee.putMetadata(Ge.ORIENTATION,180);const ue=ee.getResultPoints();ue!==null&&(ue[0]=new Re(c-ue[0].getX()-1,ue[0].getY()),ue[1]=new Re(c-ue[1].getX()-1,ue[1].getY()))}return ee}catch{}}}throw new ie}static recordPattern(s,o,c){const d=c.length;for(let _=0;_<d;_++)c[_]=0;const h=s.getSize();if(o>=h)throw new ie;let p=!s.get(o),w=0,S=o;for(;S<h;){if(s.get(S)!==p)c[w]++;else{if(++w===d)break;c[w]=1,p=!p}S++}if(!(w===d||w===d-1&&S===h))throw new ie}static recordPatternInReverse(s,o,c){let d=c.length,h=s.get(o);for(;o>0&&d>=0;)s.get(--o)!==h&&(d--,h=!h);if(d>=0)throw new ie;Et.recordPattern(s,o+1,c)}static patternMatchVariance(s,o,c){const d=s.length;let h=0,p=0;for(let _=0;_<d;_++)h+=s[_],p+=o[_];if(h<p)return Number.POSITIVE_INFINITY;const w=h/p;c*=w;let S=0;for(let _=0;_<d;_++){const I=s[_],k=o[_]*w,P=I>k?I-k:k-I;if(P>c)return Number.POSITIVE_INFINITY;S+=P}return S/h}}class De extends Et{static findStartPattern(s){const o=s.getSize(),c=s.getNextSet(0);let d=0,h=Int32Array.from([0,0,0,0,0,0]),p=c,w=!1;const S=6;for(let _=c;_<o;_++)if(s.get(_)!==w)h[d]++;else{if(d===S-1){let I=De.MAX_AVG_VARIANCE,k=-1;for(let P=De.CODE_START_A;P<=De.CODE_START_C;P++){const $=Et.patternMatchVariance(h,De.CODE_PATTERNS[P],De.MAX_INDIVIDUAL_VARIANCE);$<I&&(I=$,k=P)}if(k>=0&&s.isRange(Math.max(0,p-(_-p)/2),p,!1))return Int32Array.from([p,_,k]);p+=h[0]+h[1],h=h.slice(2,h.length-1),h[d-1]=0,h[d]=0,d--}else d++;h[d]=1,w=!w}throw new ie}static decodeCode(s,o,c){Et.recordPattern(s,c,o);let d=De.MAX_AVG_VARIANCE,h=-1;for(let p=0;p<De.CODE_PATTERNS.length;p++){const w=De.CODE_PATTERNS[p],S=this.patternMatchVariance(o,w,De.MAX_INDIVIDUAL_VARIANCE);S<d&&(d=S,h=p)}if(h>=0)return h;throw new ie}decodeRow(s,o,c){const d=c&&c.get(ne.ASSUME_GS1)===!0,h=De.findStartPattern(o),p=h[2];let w=0;const S=new Uint8Array(20);S[w++]=p;let _;switch(p){case De.CODE_START_A:_=De.CODE_CODE_A;break;case De.CODE_START_B:_=De.CODE_CODE_B;break;case De.CODE_START_C:_=De.CODE_CODE_C;break;default:throw new K}let I=!1,k=!1,P="",$=h[0],Z=h[1];const ee=Int32Array.from([0,0,0,0,0,0]);let ue=0,pe=0,Me=p,ke=0,Ie=!0,wt=!1,pt=!1;for(;!I;){const ar=k;switch(k=!1,ue=pe,pe=De.decodeCode(o,ee,Z),S[w++]=pe,pe!==De.CODE_STOP&&(Ie=!0),pe!==De.CODE_STOP&&(ke++,Me+=ke*pe),$=Z,Z+=ee.reduce((ns,Hf)=>ns+Hf,0),pe){case De.CODE_START_A:case De.CODE_START_B:case De.CODE_START_C:throw new K}switch(_){case De.CODE_CODE_A:if(pe<64)pt===wt?P+=String.fromCharCode(32+pe):P+=String.fromCharCode(32+pe+128),pt=!1;else if(pe<96)pt===wt?P+=String.fromCharCode(pe-64):P+=String.fromCharCode(pe+64),pt=!1;else switch(pe!==De.CODE_STOP&&(Ie=!1),pe){case De.CODE_FNC_1:d&&(P.length===0?P+="]C1":P+="");break;case De.CODE_FNC_2:case De.CODE_FNC_3:break;case De.CODE_FNC_4_A:!wt&&pt?(wt=!0,pt=!1):wt&&pt?(wt=!1,pt=!1):pt=!0;break;case De.CODE_SHIFT:k=!0,_=De.CODE_CODE_B;break;case De.CODE_CODE_B:_=De.CODE_CODE_B;break;case De.CODE_CODE_C:_=De.CODE_CODE_C;break;case De.CODE_STOP:I=!0;break}break;case De.CODE_CODE_B:if(pe<96)pt===wt?P+=String.fromCharCode(32+pe):P+=String.fromCharCode(32+pe+128),pt=!1;else switch(pe!==De.CODE_STOP&&(Ie=!1),pe){case De.CODE_FNC_1:d&&(P.length===0?P+="]C1":P+="");break;case De.CODE_FNC_2:case De.CODE_FNC_3:break;case De.CODE_FNC_4_B:!wt&&pt?(wt=!0,pt=!1):wt&&pt?(wt=!1,pt=!1):pt=!0;break;case De.CODE_SHIFT:k=!0,_=De.CODE_CODE_A;break;case De.CODE_CODE_A:_=De.CODE_CODE_A;break;case De.CODE_CODE_C:_=De.CODE_CODE_C;break;case De.CODE_STOP:I=!0;break}break;case De.CODE_CODE_C:if(pe<100)pe<10&&(P+="0"),P+=pe;else switch(pe!==De.CODE_STOP&&(Ie=!1),pe){case De.CODE_FNC_1:d&&(P.length===0?P+="]C1":P+="");break;case De.CODE_CODE_A:_=De.CODE_CODE_A;break;case De.CODE_CODE_B:_=De.CODE_CODE_B;break;case De.CODE_STOP:I=!0;break}break}ar&&(_=_===De.CODE_CODE_A?De.CODE_CODE_B:De.CODE_CODE_A)}const gi=Z-$;if(Z=o.getNextUnset(Z),!o.isRange(Z,Math.min(o.getSize(),Z+(Z-$)/2),!1))throw new ie;if(Me-=ke*ue,Me%103!==ue)throw new O;const zi=P.length;if(zi===0)throw new ie;zi>0&&Ie&&(_===De.CODE_CODE_C?P=P.substring(0,zi-2):P=P.substring(0,zi-1));const Si=(h[1]+h[0])/2,tn=$+gi/2,ei=S.length,Ci=new Uint8Array(ei);for(let ar=0;ar<ei;ar++)Ci[ar]=S[ar];const Nr=[new Re(Si,s),new Re(tn,s)];return new Ne(P,Ci,0,Nr,be.CODE_128,new Date().getTime())}}De.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],De.MAX_AVG_VARIANCE=.25,De.MAX_INDIVIDUAL_VARIANCE=.7,De.CODE_SHIFT=98,De.CODE_CODE_C=99,De.CODE_CODE_B=100,De.CODE_CODE_A=101,De.CODE_FNC_1=102,De.CODE_FNC_2=97,De.CODE_FNC_3=96,De.CODE_FNC_4_A=101,De.CODE_FNC_4_B=100,De.CODE_START_A=103,De.CODE_START_B=104,De.CODE_START_C=105,De.CODE_STOP=106;class ct extends Et{constructor(s=!1,o=!1){super(),this.usingCheckDigit=s,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,o,c){let d=this.counters;d.fill(0),this.decodeRowResult="";let h=ct.findAsteriskPattern(o,d),p=o.getNextSet(h[1]),w=o.getSize(),S,_;do{ct.recordPattern(o,p,d);let ee=ct.toNarrowWidePattern(d);if(ee<0)throw new ie;S=ct.patternToChar(ee),this.decodeRowResult+=S,_=p;for(let ue of d)p+=ue;p=o.getNextSet(p)}while(S!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let ee of d)I+=ee;let k=p-_-I;if(p!==w&&k*2<I)throw new ie;if(this.usingCheckDigit){let ee=this.decodeRowResult.length-1,ue=0;for(let pe=0;pe<ee;pe++)ue+=ct.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(pe));if(this.decodeRowResult.charAt(ee)!==ct.ALPHABET_STRING.charAt(ue%43))throw new O;this.decodeRowResult=this.decodeRowResult.substring(0,ee)}if(this.decodeRowResult.length===0)throw new ie;let P;this.extendedMode?P=ct.decodeExtended(this.decodeRowResult):P=this.decodeRowResult;let $=(h[1]+h[0])/2,Z=_+I/2;return new Ne(P,null,0,[new Re($,s),new Re(Z,s)],be.CODE_39,new Date().getTime())}static findAsteriskPattern(s,o){let c=s.getSize(),d=s.getNextSet(0),h=0,p=d,w=!1,S=o.length;for(let _=d;_<c;_++)if(s.get(_)!==w)o[h]++;else{if(h===S-1){if(this.toNarrowWidePattern(o)===ct.ASTERISK_ENCODING&&s.isRange(Math.max(0,p-Math.floor((_-p)/2)),p,!1))return[p,_];p+=o[0]+o[1],o.copyWithin(0,2,2+h-1),o[h-1]=0,o[h]=0,h--}else h++;o[h]=1,w=!w}throw new ie}static toNarrowWidePattern(s){let o=s.length,c=0,d;do{let h=2147483647;for(let S of s)S<h&&S>c&&(h=S);c=h,d=0;let p=0,w=0;for(let S=0;S<o;S++){let _=s[S];_>c&&(w|=1<<o-1-S,d++,p+=_)}if(d===3){for(let S=0;S<o&&d>0;S++){let _=s[S];if(_>c&&(d--,_*2>=p))return-1}return w}}while(d>3);return-1}static patternToChar(s){for(let o=0;o<ct.CHARACTER_ENCODINGS.length;o++)if(ct.CHARACTER_ENCODINGS[o]===s)return ct.ALPHABET_STRING.charAt(o);if(s===ct.ASTERISK_ENCODING)return"*";throw new ie}static decodeExtended(s){let o=s.length,c="";for(let d=0;d<o;d++){let h=s.charAt(d);if(h==="+"||h==="$"||h==="%"||h==="/"){let p=s.charAt(d+1),w="\0";switch(h){case"+":if(p>="A"&&p<="Z")w=String.fromCharCode(p.charCodeAt(0)+32);else throw new K;break;case"$":if(p>="A"&&p<="Z")w=String.fromCharCode(p.charCodeAt(0)-64);else throw new K;break;case"%":if(p>="A"&&p<="E")w=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")w=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")w=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")w=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")w="\0";else if(p==="V")w="@";else if(p==="W")w="`";else if(p==="X"||p==="Y"||p==="Z")w="";else throw new K;break;case"/":if(p>="A"&&p<="O")w=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")w=":";else throw new K;break}c+=w,d++}else c+=h}return c}}ct.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ct.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ct.ASTERISK_ENCODING=148;class _t extends Et{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,o,c){let d=this.decodeStart(o),h=this.decodeEnd(o),p=new he;_t.decodeMiddle(o,d[1],h[0],p);let w=p.toString(),S=null;c!=null&&(S=c.get(ne.ALLOWED_LENGTHS)),S==null&&(S=_t.DEFAULT_ALLOWED_LENGTHS);let _=w.length,I=!1,k=0;for(let Z of S){if(_===Z){I=!0;break}Z>k&&(k=Z)}if(!I&&_>k&&(I=!0),!I)throw new K;const P=[new Re(d[1],s),new Re(h[0],s)];return new Ne(w,null,0,P,be.ITF,new Date().getTime())}static decodeMiddle(s,o,c,d){let h=new Int32Array(10),p=new Int32Array(5),w=new Int32Array(5);for(h.fill(0),p.fill(0),w.fill(0);o<c;){Et.recordPattern(s,o,h);for(let _=0;_<5;_++){let I=2*_;p[_]=h[I],w[_]=h[I+1]}let S=_t.decodeDigit(p);d.append(S.toString()),S=this.decodeDigit(w),d.append(S.toString()),h.forEach(function(_){o+=_})}}decodeStart(s){let o=_t.skipWhiteSpace(s),c=_t.findGuardPattern(s,o,_t.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(s,c[0]),c}validateQuietZone(s,o){let c=this.narrowLineWidth*10;c=c<o?c:o;for(let d=o-1;c>0&&d>=0&&!s.get(d);d--)c--;if(c!==0)throw new ie}static skipWhiteSpace(s){const o=s.getSize(),c=s.getNextSet(0);if(c===o)throw new ie;return c}decodeEnd(s){s.reverse();try{let o=_t.skipWhiteSpace(s),c;try{c=_t.findGuardPattern(s,o,_t.END_PATTERN_REVERSED[0])}catch(h){h instanceof ie&&(c=_t.findGuardPattern(s,o,_t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,c[0]);let d=c[0];return c[0]=s.getSize()-c[1],c[1]=s.getSize()-d,c}finally{s.reverse()}}static findGuardPattern(s,o,c){let d=c.length,h=new Int32Array(d),p=s.getSize(),w=!1,S=0,_=o;h.fill(0);for(let I=o;I<p;I++)if(s.get(I)!==w)h[S]++;else{if(S===d-1){if(Et.patternMatchVariance(h,c,_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE)return[_,I];_+=h[0]+h[1],j.arraycopy(h,2,h,0,S-1),h[S-1]=0,h[S]=0,S--}else S++;h[S]=1,w=!w}throw new ie}static decodeDigit(s){let o=_t.MAX_AVG_VARIANCE,c=-1,d=_t.PATTERNS.length;for(let h=0;h<d;h++){let p=_t.PATTERNS[h],w=Et.patternMatchVariance(s,p,_t.MAX_INDIVIDUAL_VARIANCE);w<o?(o=w,c=h):w===o&&(c=-1)}if(c>=0)return c%10;throw new ie}}_t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],_t.MAX_AVG_VARIANCE=.38,_t.MAX_INDIVIDUAL_VARIANCE=.5,_t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],_t.START_PATTERN=Int32Array.from([1,1,1,1]),_t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Rt extends Et{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let o=!1,c,d=0,h=Int32Array.from([0,0,0]);for(;!o;){h=Int32Array.from([0,0,0]),c=Rt.findGuardPattern(s,d,!1,this.START_END_PATTERN,h);let p=c[0];d=c[1];let w=p-(d-p);w>=0&&(o=s.isRange(w,p,!1))}return c}static checkChecksum(s){return Rt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let o=s.length;if(o===0)return!1;let c=parseInt(s.charAt(o-1),10);return Rt.getStandardUPCEANChecksum(s.substring(0,o-1))===c}static getStandardUPCEANChecksum(s){let o=s.length,c=0;for(let d=o-1;d>=0;d-=2){let h=s.charAt(d).charCodeAt(0)-48;if(h<0||h>9)throw new K;c+=h}c*=3;for(let d=o-2;d>=0;d-=2){let h=s.charAt(d).charCodeAt(0)-48;if(h<0||h>9)throw new K;c+=h}return(1e3-c)%10}static decodeEnd(s,o){return Rt.findGuardPattern(s,o,!1,Rt.START_END_PATTERN,new Int32Array(Rt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,o,c,d){return this.findGuardPattern(s,o,c,d,new Int32Array(d.length))}static findGuardPattern(s,o,c,d,h){let p=s.getSize();o=c?s.getNextUnset(o):s.getNextSet(o);let w=0,S=o,_=d.length,I=c;for(let k=o;k<p;k++)if(s.get(k)!==I)h[w]++;else{if(w===_-1){if(Et.patternMatchVariance(h,d,Rt.MAX_INDIVIDUAL_VARIANCE)<Rt.MAX_AVG_VARIANCE)return Int32Array.from([S,k]);S+=h[0]+h[1];let P=h.slice(2,h.length-1);for(let $=0;$<w-1;$++)h[$]=P[$];h[w-1]=0,h[w]=0,w--}else w++;h[w]=1,I=!I}throw new ie}static decodeDigit(s,o,c,d){this.recordPattern(s,c,o);let h=this.MAX_AVG_VARIANCE,p=-1,w=d.length;for(let S=0;S<w;S++){let _=d[S],I=Et.patternMatchVariance(o,_,Rt.MAX_INDIVIDUAL_VARIANCE);I<h&&(h=I,p=S)}if(p>=0)return p;throw new ie}}Rt.MAX_AVG_VARIANCE=.48,Rt.MAX_INDIVIDUAL_VARIANCE=.7,Rt.START_END_PATTERN=Int32Array.from([1,1,1]),Rt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Rt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Rt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Pi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,o,c){let d=this.decodeRowStringBuffer,h=this.decodeMiddle(o,c,d),p=d.toString(),w=Pi.parseExtensionString(p),S=[new Re((c[0]+c[1])/2,s),new Re(h,s)],_=new Ne(p,null,0,S,be.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&_.putAllMetadata(w),_}decodeMiddle(s,o,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=s.getSize(),p=o[1],w=0;for(let _=0;_<5&&p<h;_++){let I=Rt.decodeDigit(s,d,p,Rt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+I%10);for(let k of d)p+=k;I>=10&&(w|=1<<4-_),_!==4&&(p=s.getNextSet(p),p=s.getNextUnset(p))}if(c.length!==5)throw new ie;let S=this.determineCheckDigit(w);if(Pi.extensionChecksum(c.toString())!==S)throw new ie;return p}static extensionChecksum(s){let o=s.length,c=0;for(let d=o-2;d>=0;d-=2)c+=s.charAt(d).charCodeAt(0)-48;c*=3;for(let d=o-1;d>=0;d-=2)c+=s.charAt(d).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(s){for(let o=0;o<10;o++)if(s===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new ie}static parseExtensionString(s){if(s.length!==5)return null;let o=Pi.parseExtension5String(s);return o==null?null:new Map([[Ge.SUGGESTED_PRICE,o]])}static parseExtension5String(s){let o;switch(s.charAt(0)){case"0":o="£";break;case"5":o="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let c=parseInt(s.substring(1)),d=(c/100).toString(),h=c%100,p=h<10?"0"+h:h.toString();return o+d+"."+p}}class bi{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,o,c){let d=this.decodeRowStringBuffer,h=this.decodeMiddle(o,c,d),p=d.toString(),w=bi.parseExtensionString(p),S=[new Re((c[0]+c[1])/2,s),new Re(h,s)],_=new Ne(p,null,0,S,be.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&_.putAllMetadata(w),_}decodeMiddle(s,o,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=s.getSize(),p=o[1],w=0;for(let S=0;S<2&&p<h;S++){let _=Rt.decodeDigit(s,d,p,Rt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+_%10);for(let I of d)p+=I;_>=10&&(w|=1<<1-S),S!==1&&(p=s.getNextSet(p),p=s.getNextUnset(p))}if(c.length!==2)throw new ie;if(parseInt(c.toString())%4!==w)throw new ie;return p}static parseExtensionString(s){return s.length!==2?null:new Map([[Ge.ISSUE_NUMBER,parseInt(s)]])}}class sa{static decodeRow(s,o,c){let d=Rt.findGuardPattern(o,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Pi().decodeRow(s,o,d)}catch{return new bi().decodeRow(s,o,d)}}}sa.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Lt extends Rt{constructor(){super(),this.decodeRowStringBuffer="",Lt.L_AND_G_PATTERNS=Lt.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let o=Lt.L_PATTERNS[s-10],c=new Int32Array(o.length);for(let d=0;d<o.length;d++)c[d]=o[o.length-d-1];Lt.L_AND_G_PATTERNS[s]=c}}decodeRow(s,o,c){let d=Lt.findStartGuardPattern(o),h=c==null?null:c.get(ne.NEED_RESULT_POINT_CALLBACK);if(h!=null){const Ie=new Re((d[0]+d[1])/2,s);h.foundPossibleResultPoint(Ie)}let p=this.decodeMiddle(o,d,this.decodeRowStringBuffer),w=p.rowOffset,S=p.resultString;if(h!=null){const Ie=new Re(w,s);h.foundPossibleResultPoint(Ie)}let _=this.decodeEnd(o,w);if(h!=null){const Ie=new Re((_[0]+_[1])/2,s);h.foundPossibleResultPoint(Ie)}let I=_[1],k=I+(I-_[0]);if(k>=o.getSize()||!o.isRange(I,k,!1))throw new ie;let P=S.toString();if(P.length<8)throw new K;if(!Lt.checkChecksum(P))throw new O;let $=(d[1]+d[0])/2,Z=(_[1]+_[0])/2,ee=this.getBarcodeFormat(),ue=[new Re($,s),new Re(Z,s)],pe=new Ne(P,null,0,ue,ee,new Date().getTime()),Me=0;try{let Ie=sa.decodeRow(s,o,_[1]);pe.putMetadata(Ge.UPC_EAN_EXTENSION,Ie.getText()),pe.putAllMetadata(Ie.getResultMetadata()),pe.addResultPoints(Ie.getResultPoints()),Me=Ie.getText().length}catch{}let ke=c==null?null:c.get(ne.ALLOWED_EAN_EXTENSIONS);if(ke!=null){let Ie=!1;for(let wt in ke)if(Me.toString()===wt){Ie=!0;break}if(!Ie)throw new ie}return pe}decodeEnd(s,o){return Lt.findGuardPattern(s,o,!1,Lt.START_END_PATTERN,new Int32Array(Lt.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return Lt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let o=s.length;if(o===0)return!1;let c=parseInt(s.charAt(o-1),10);return Lt.getStandardUPCEANChecksum(s.substring(0,o-1))===c}static getStandardUPCEANChecksum(s){let o=s.length,c=0;for(let d=o-1;d>=0;d-=2){let h=s.charAt(d).charCodeAt(0)-48;if(h<0||h>9)throw new K;c+=h}c*=3;for(let d=o-2;d>=0;d-=2){let h=s.charAt(d).charCodeAt(0)-48;if(h<0||h>9)throw new K;c+=h}return(1e3-c)%10}}class Ji extends Lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,o,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=s.getSize(),p=o[1],w=0;for(let _=0;_<6&&p<h;_++){let I=Lt.decodeDigit(s,d,p,Lt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+I%10);for(let k of d)p+=k;I>=10&&(w|=1<<5-_)}c=Ji.determineFirstDigit(c,w),p=Lt.findGuardPattern(s,p,!0,Lt.MIDDLE_PATTERN,new Int32Array(Lt.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<6&&p<h;_++){let I=Lt.decodeDigit(s,d,p,Lt.L_PATTERNS);c+=String.fromCharCode(48+I);for(let k of d)p+=k}return{rowOffset:p,resultString:c}}getBarcodeFormat(){return be.EAN_13}static determineFirstDigit(s,o){for(let c=0;c<10;c++)if(o===this.FIRST_DIGIT_ENCODINGS[c])return s=String.fromCharCode(48+c)+s,s;throw new ie}}Ji.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Df extends Lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,o,c){const d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=s.getSize(),p=o[1];for(let S=0;S<4&&p<h;S++){let _=Lt.decodeDigit(s,d,p,Lt.L_PATTERNS);c+=String.fromCharCode(48+_);for(let I of d)p+=I}p=Lt.findGuardPattern(s,p,!0,Lt.MIDDLE_PATTERN,new Int32Array(Lt.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<4&&p<h;S++){let _=Lt.decodeDigit(s,d,p,Lt.L_PATTERNS);c+=String.fromCharCode(48+_);for(let I of d)p+=I}return{rowOffset:p,resultString:c}}getBarcodeFormat(){return be.EAN_8}}class Bc extends Lt{constructor(){super(...arguments),this.ean13Reader=new Ji}getBarcodeFormat(){return be.UPC_A}decode(s,o){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,o,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,o,c))}decodeMiddle(s,o,c){return this.ean13Reader.decodeMiddle(s,o,c)}maybeReturnResult(s){let o=s.getText();if(o.charAt(0)==="0"){let c=new Ne(o.substring(1),null,null,s.getResultPoints(),be.UPC_A);return s.getResultMetadata()!=null&&c.putAllMetadata(s.getResultMetadata()),c}else throw new ie}reset(){this.ean13Reader.reset()}}class Ui extends Lt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,o,c){const d=this.decodeMiddleCounters.map(_=>_);d[0]=0,d[1]=0,d[2]=0,d[3]=0;const h=s.getSize();let p=o[1],w=0;for(let _=0;_<6&&p<h;_++){const I=Ui.decodeDigit(s,d,p,Ui.L_AND_G_PATTERNS);c+=String.fromCharCode(48+I%10);for(let k of d)p+=k;I>=10&&(w|=1<<5-_)}let S=Ui.determineNumSysAndCheckDigit(c,w);return{rowOffset:p,resultString:S}}decodeEnd(s,o){return Ui.findGuardPatternWithoutCounters(s,o,!0,Ui.MIDDLE_END_PATTERN)}checkChecksum(s){return Lt.checkChecksum(Ui.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,o){for(let c=0;c<=1;c++)for(let d=0;d<10;d++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][d]){let h=String.fromCharCode(48+c),p=String.fromCharCode(48+d);return h+s+p}throw ie.getNotFoundInstance()}getBarcodeFormat(){return be.UPC_E}static convertUPCEtoUPCA(s){const o=s.slice(1,7).split("").map(h=>h.charCodeAt(0)),c=new he;c.append(s.charAt(0));let d=o[5];switch(d){case 0:case 1:case 2:c.appendChars(o,0,2),c.append(d),c.append("0000"),c.appendChars(o,2,3);break;case 3:c.appendChars(o,0,3),c.append("00000"),c.appendChars(o,3,2);break;case 4:c.appendChars(o,0,4),c.append("00000"),c.append(o[4]);break;default:c.appendChars(o,0,5),c.append("0000"),c.append(d);break}return s.length>=8&&c.append(s.charAt(7)),c.toString()}}Ui.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ui.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class uo extends Et{constructor(s){super();let o=s==null?null:s.get(ne.POSSIBLE_FORMATS),c=[];r(o)?(c.push(new Ji),c.push(new Bc),c.push(new Df),c.push(new Ui)):(o.indexOf(be.EAN_13)>-1&&c.push(new Ji),o.indexOf(be.UPC_A)>-1&&c.push(new Bc),o.indexOf(be.EAN_8)>-1&&c.push(new Df),o.indexOf(be.UPC_E)>-1&&c.push(new Ui)),this.readers=c}decodeRow(s,o,c){for(let d of this.readers)try{const h=d.decodeRow(s,o,c),p=h.getBarcodeFormat()===be.EAN_13&&h.getText().charAt(0)==="0",w=c==null?null:c.get(ne.POSSIBLE_FORMATS),S=w==null||w.includes(be.UPC_A);if(p&&S){const _=h.getRawBytes(),I=new Ne(h.getText().substring(1),_,_?_.length:null,h.getResultPoints(),be.UPC_A);return I.putAllMetadata(h.getResultMetadata()),I}return h}catch{}throw new ie}reset(){for(let s of this.readers)s.reset()}}class Vn extends Et{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,o){for(let c=0;c<o.length;c++)if(Et.patternMatchVariance(s,o[c],Vn.MAX_INDIVIDUAL_VARIANCE)<Vn.MAX_AVG_VARIANCE)return c;throw new ie}static count(s){return mt.sum(new Int32Array(s))}static increment(s,o){let c=0,d=o[0];for(let h=1;h<s.length;h++)o[h]>d&&(d=o[h],c=h);s[c]++}static decrement(s,o){let c=0,d=o[0];for(let h=1;h<s.length;h++)o[h]<d&&(d=o[h],c=h);s[c]--}static isFinderPattern(s){let o=s[0]+s[1],c=o+s[2]+s[3],d=o/c;if(d>=Vn.MIN_FINDER_PATTERN_RATIO&&d<=Vn.MAX_FINDER_PATTERN_RATIO){let h=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let w of s)w>p&&(p=w),w<h&&(h=w);return p<10*h}return!1}}Vn.MAX_AVG_VARIANCE=.2,Vn.MAX_INDIVIDUAL_VARIANCE=.45,Vn.MIN_FINDER_PATTERN_RATIO=9.5/12,Vn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Er{constructor(s,o){this.value=s,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Er))return!1;const o=s;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ul{constructor(s,o,c,d,h){this.value=s,this.startEnd=o,this.value=s,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new Re(c,h)),this.resultPoints.push(new Re(d,h))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof ul))return!1;const o=s;return this.value===o.value}hashCode(){return this.value}}class Wn{constructor(){}static getRSSvalue(s,o,c){let d=0;for(let S of s)d+=S;let h=0,p=0,w=s.length;for(let S=0;S<w-1;S++){let _;for(_=1,p|=1<<S;_<s[S];_++,p&=~(1<<S)){let I=Wn.combins(d-_-1,w-S-2);if(c&&p===0&&d-_-(w-S-1)>=w-S-1&&(I-=Wn.combins(d-_-(w-S),w-S-2)),w-S-1>1){let k=0;for(let P=d-_-(w-S-2);P>o;P--)k+=Wn.combins(d-_-P-1,w-S-3);I-=k*(w-1-S)}else d-_>o&&I--;h+=I}d-=_}return h}static combins(s,o){let c,d;s-o>o?(d=o,c=s-o):(d=s-o,c=o);let h=1,p=1;for(let w=s;w>c;w--)h*=w,p<=d&&(h/=p,p++);for(;p<=d;)h/=p,p++;return h}}class ri{static buildBitArray(s){let o=s.length*2-1;s[s.length-1].getRightChar()==null&&(o-=1);let c=12*o,d=new V(c),h=0,w=s[0].getRightChar().getValue();for(let S=11;S>=0;--S)(w&1<<S)!=0&&d.set(h),h++;for(let S=1;S<s.length;++S){let _=s[S],I=_.getLeftChar().getValue();for(let k=11;k>=0;--k)(I&1<<k)!=0&&d.set(h),h++;if(_.getRightChar()!=null){let k=_.getRightChar().getValue();for(let P=11;P>=0;--P)(k&1<<P)!=0&&d.set(h),h++}}return d}}class Tn{constructor(s,o){o?this.decodedInformation=null:(this.finished=s,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Xs{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class ai extends Xs{constructor(s,o){super(s),this.value=o}getValue(){return this.value}isFNC1(){return this.value===ai.FNC1}}ai.FNC1="$";class Sr extends Xs{constructor(s,o,c){super(s),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Fi extends Xs{constructor(s,o,c){if(super(s),o<0||o>10||c<0||c>10)throw new K;this.firstDigit=o,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Fi.FNC1}isSecondDigitFNC1(){return this.secondDigit===Fi.FNC1}isAnyFNC1(){return this.firstDigit===Fi.FNC1||this.secondDigit===Fi.FNC1}}Fi.FNC1=10;class ze{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new ie;let o=s.substring(0,2);for(let h of ze.TWO_DIGIT_DATA_LENGTH)if(h[0]===o)return h[1]===ze.VARIABLE_LENGTH?ze.processVariableAI(2,h[2],s):ze.processFixedAI(2,h[1],s);if(s.length<3)throw new ie;let c=s.substring(0,3);for(let h of ze.THREE_DIGIT_DATA_LENGTH)if(h[0]===c)return h[1]===ze.VARIABLE_LENGTH?ze.processVariableAI(3,h[2],s):ze.processFixedAI(3,h[1],s);for(let h of ze.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(h[0]===c)return h[1]===ze.VARIABLE_LENGTH?ze.processVariableAI(4,h[2],s):ze.processFixedAI(4,h[1],s);if(s.length<4)throw new ie;let d=s.substring(0,4);for(let h of ze.FOUR_DIGIT_DATA_LENGTH)if(h[0]===d)return h[1]===ze.VARIABLE_LENGTH?ze.processVariableAI(4,h[2],s):ze.processFixedAI(4,h[1],s);throw new ie}static processFixedAI(s,o,c){if(c.length<s)throw new ie;let d=c.substring(0,s);if(c.length<s+o)throw new ie;let h=c.substring(s,s+o),p=c.substring(s+o),w="("+d+")"+h,S=ze.parseFieldsInGeneralPurpose(p);return S==null?w:w+S}static processVariableAI(s,o,c){let d=c.substring(0,s),h;c.length<s+o?h=c.length:h=s+o;let p=c.substring(s,h),w=c.substring(h),S="("+d+")"+p,_=ze.parseFieldsInGeneralPurpose(w);return _==null?S:S+_}}ze.VARIABLE_LENGTH=[],ze.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ze.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ze.VARIABLE_LENGTH,20],["22",ze.VARIABLE_LENGTH,29],["30",ze.VARIABLE_LENGTH,8],["37",ze.VARIABLE_LENGTH,8],["90",ze.VARIABLE_LENGTH,30],["91",ze.VARIABLE_LENGTH,30],["92",ze.VARIABLE_LENGTH,30],["93",ze.VARIABLE_LENGTH,30],["94",ze.VARIABLE_LENGTH,30],["95",ze.VARIABLE_LENGTH,30],["96",ze.VARIABLE_LENGTH,30],["97",ze.VARIABLE_LENGTH,3],["98",ze.VARIABLE_LENGTH,30],["99",ze.VARIABLE_LENGTH,30]],ze.THREE_DIGIT_DATA_LENGTH=[["240",ze.VARIABLE_LENGTH,30],["241",ze.VARIABLE_LENGTH,30],["242",ze.VARIABLE_LENGTH,6],["250",ze.VARIABLE_LENGTH,30],["251",ze.VARIABLE_LENGTH,30],["253",ze.VARIABLE_LENGTH,17],["254",ze.VARIABLE_LENGTH,20],["400",ze.VARIABLE_LENGTH,30],["401",ze.VARIABLE_LENGTH,30],["402",17],["403",ze.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ze.VARIABLE_LENGTH,20],["421",ze.VARIABLE_LENGTH,15],["422",3],["423",ze.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ze.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ze.VARIABLE_LENGTH,15],["391",ze.VARIABLE_LENGTH,18],["392",ze.VARIABLE_LENGTH,15],["393",ze.VARIABLE_LENGTH,18],["703",ze.VARIABLE_LENGTH,30]],ze.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ze.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ze.VARIABLE_LENGTH,20],["8003",ze.VARIABLE_LENGTH,30],["8004",ze.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ze.VARIABLE_LENGTH,30],["8008",ze.VARIABLE_LENGTH,12],["8018",18],["8020",ze.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ze.VARIABLE_LENGTH,70],["8200",ze.VARIABLE_LENGTH,70]];class hs{constructor(s){this.buffer=new he,this.information=s}decodeAllCodes(s,o){let c=o,d=null;do{let h=this.decodeGeneralPurposeField(c,d),p=ze.parseFieldsInGeneralPurpose(h.getNewString());if(p!=null&&s.append(p),h.isRemaining()?d=""+h.getRemainingValue():d=null,c===h.getNewPosition())break;c=h.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let o=s;o<s+3;++o)if(this.information.get(o))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let h=this.extractNumericValueFromBitArray(s,4);return h===0?new Fi(this.information.getSize(),Fi.FNC1,Fi.FNC1):new Fi(this.information.getSize(),h-1,Fi.FNC1)}let o=this.extractNumericValueFromBitArray(s,7),c=(o-8)/11,d=(o-8)%11;return new Fi(s+7,c,d)}extractNumericValueFromBitArray(s,o){return hs.extractNumericValueFromBitArray(this.information,s,o)}static extractNumericValueFromBitArray(s,o,c){let d=0;for(let h=0;h<c;++h)s.get(o+h)&&(d|=1<<c-h-1);return d}decodeGeneralPurposeField(s,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(s);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new Sr(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new Sr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,o;do{let c=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),s=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),s=o.isFinished()):(o=this.parseNumericBlock(),s=o.isFinished()),!(c!==this.current.getPosition())&&!s)break}while(!s);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let o;return s.isSecondDigitFNC1()?o=new Sr(this.current.getPosition(),this.buffer.toString()):o=new Sr(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new Tn(!0,o)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let o=new Sr(this.current.getPosition(),this.buffer.toString());return new Tn(!0,o)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Tn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let o=new Sr(this.current.getPosition(),this.buffer.toString());return new Tn(!0,o)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Tn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let o=new Sr(this.current.getPosition(),this.buffer.toString());return new Tn(!0,o)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Tn(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(s,5);if(o>=5&&o<16)return!0;if(s+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(s,7);if(c>=64&&c<116)return!0;if(s+8>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(s,8);return d>=232&&d<253}decodeIsoIec646(s){let o=this.extractNumericValueFromBitArray(s,5);if(o===15)return new ai(s+5,ai.FNC1);if(o>=5&&o<15)return new ai(s+5,"0"+(o-5));let c=this.extractNumericValueFromBitArray(s,7);if(c>=64&&c<90)return new ai(s+7,""+(c+1));if(c>=90&&c<116)return new ai(s+7,""+(c+7));let d=this.extractNumericValueFromBitArray(s,8),h;switch(d){case 232:h="!";break;case 233:h='"';break;case 234:h="%";break;case 235:h="&";break;case 236:h="'";break;case 237:h="(";break;case 238:h=")";break;case 239:h="*";break;case 240:h="+";break;case 241:h=",";break;case 242:h="-";break;case 243:h=".";break;case 244:h="/";break;case 245:h=":";break;case 246:h=";";break;case 247:h="<";break;case 248:h="=";break;case 249:h=">";break;case 250:h="?";break;case 251:h="_";break;case 252:h=" ";break;default:throw new K}return new ai(s+8,h)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(s,5);if(o>=5&&o<16)return!0;if(s+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(s,6);return c>=16&&c<63}decodeAlphanumeric(s){let o=this.extractNumericValueFromBitArray(s,5);if(o===15)return new ai(s+5,ai.FNC1);if(o>=5&&o<15)return new ai(s+5,"0"+(o-5));let c=this.extractNumericValueFromBitArray(s,6);if(c>=32&&c<58)return new ai(s+6,""+(c+33));let d;switch(c){case 58:d="*";break;case 59:d=",";break;case 60:d="-";break;case 61:d=".";break;case 62:d="/";break;default:throw new Ke("Decoding invalid alphanumeric value: "+c)}return new ai(s+6,d)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let o=0;o<5&&o+s<this.information.getSize();++o)if(o===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+o))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let o=s;o<s+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let o=0;o<4&&o+s<this.information.getSize();++o)if(this.information.get(s+o))return!1;return!0}}class fo{constructor(s){this.information=s,this.generalDecoder=new hs(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ln extends fo{constructor(s){super(s)}encodeCompressedGtin(s,o){s.append("(01)");let c=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,o,c)}encodeCompressedGtinWithoutAI(s,o,c){for(let d=0;d<4;++d){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*d,10);h/100===0&&s.append("0"),h/10===0&&s.append("0"),s.append(h)}Ln.appendCheckDigit(s,c)}static appendCheckDigit(s,o){let c=0;for(let d=0;d<13;d++){let h=s.charAt(d+o).charCodeAt(0)-48;c+=(d&1)===0?3*h:h}c=10-c%10,c===10&&(c=0),s.append(c)}}Ln.GTIN_SIZE=40;class es extends Ln{constructor(s){super(s)}parseInformation(){let s=new he;s.append("(01)");let o=s.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(es.HEADER_SIZE,4);return s.append(c),this.encodeCompressedGtinWithoutAI(s,es.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(s,es.HEADER_SIZE+44)}}es.HEADER_SIZE=4;class Ws extends fo{constructor(s){super(s)}parseInformation(){let s=new he;return this.getGeneralDecoder().decodeAllCodes(s,Ws.HEADER_SIZE)}}Ws.HEADER_SIZE=5;class Os extends Ln{constructor(s){super(s)}encodeCompressedWeight(s,o,c){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o,c);this.addWeightCode(s,d);let h=this.checkWeight(d),p=1e5;for(let w=0;w<5;++w)h/p===0&&s.append("0"),p/=10;s.append(h)}}class Jt extends Os{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=Jt.HEADER_SIZE+Os.GTIN_SIZE+Jt.WEIGHT_SIZE)throw new ie;let s=new he;return this.encodeCompressedGtin(s,Jt.HEADER_SIZE),this.encodeCompressedWeight(s,Jt.HEADER_SIZE+Os.GTIN_SIZE,Jt.WEIGHT_SIZE),s.toString()}}Jt.HEADER_SIZE=5,Jt.WEIGHT_SIZE=15;class Lf extends Jt{constructor(s){super(s)}addWeightCode(s,o){s.append("(3103)")}checkWeight(s){return s}}class kf extends Jt{constructor(s){super(s)}addWeightCode(s,o){o<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class oi extends Ln{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<oi.HEADER_SIZE+Ln.GTIN_SIZE)throw new ie;let s=new he;this.encodeCompressedGtin(s,oi.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(oi.HEADER_SIZE+Ln.GTIN_SIZE,oi.LAST_DIGIT_SIZE);s.append("(392"),s.append(o),s.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(oi.HEADER_SIZE+Ln.GTIN_SIZE+oi.LAST_DIGIT_SIZE,null);return s.append(c.getNewString()),s.toString()}}oi.HEADER_SIZE=8,oi.LAST_DIGIT_SIZE=2;class _n extends Ln{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<_n.HEADER_SIZE+Ln.GTIN_SIZE)throw new ie;let s=new he;this.encodeCompressedGtin(s,_n.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(_n.HEADER_SIZE+Ln.GTIN_SIZE,_n.LAST_DIGIT_SIZE);s.append("(393"),s.append(o),s.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(_n.HEADER_SIZE+Ln.GTIN_SIZE+_n.LAST_DIGIT_SIZE,_n.FIRST_THREE_DIGITS_SIZE);c/100==0&&s.append("0"),c/10==0&&s.append("0"),s.append(c);let d=this.getGeneralDecoder().decodeGeneralPurposeField(_n.HEADER_SIZE+Ln.GTIN_SIZE+_n.LAST_DIGIT_SIZE+_n.FIRST_THREE_DIGITS_SIZE,null);return s.append(d.getNewString()),s.toString()}}_n.HEADER_SIZE=8,_n.LAST_DIGIT_SIZE=2,_n.FIRST_THREE_DIGITS_SIZE=10;class dn extends Os{constructor(s,o,c){super(s),this.dateCode=c,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=dn.HEADER_SIZE+dn.GTIN_SIZE+dn.WEIGHT_SIZE+dn.DATE_SIZE)throw new ie;let s=new he;return this.encodeCompressedGtin(s,dn.HEADER_SIZE),this.encodeCompressedWeight(s,dn.HEADER_SIZE+dn.GTIN_SIZE,dn.WEIGHT_SIZE),this.encodeCompressedDate(s,dn.HEADER_SIZE+dn.GTIN_SIZE+dn.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,o){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(o,dn.DATE_SIZE);if(c==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let d=c%32;c/=32;let h=c%12+1;c/=12;let p=c;p/10==0&&s.append("0"),s.append(p),h/10==0&&s.append("0"),s.append(h),d/10==0&&s.append("0"),s.append(d)}addWeightCode(s,o){s.append("("),s.append(this.firstAIdigits),s.append(o/1e5),s.append(")")}checkWeight(s){return s%1e5}}dn.HEADER_SIZE=8,dn.WEIGHT_SIZE=20,dn.DATE_SIZE=16;function Pc(L){try{if(L.get(1))return new es(L);if(!L.get(2))return new Ws(L);switch(hs.extractNumericValueFromBitArray(L,1,4)){case 4:return new Lf(L);case 5:return new kf(L)}switch(hs.extractNumericValueFromBitArray(L,1,5)){case 12:return new oi(L);case 13:return new _n(L)}switch(hs.extractNumericValueFromBitArray(L,1,7)){case 56:return new dn(L,"310","11");case 57:return new dn(L,"320","11");case 58:return new dn(L,"310","13");case 59:return new dn(L,"320","13");case 60:return new dn(L,"310","15");case 61:return new dn(L,"320","15");case 62:return new dn(L,"310","17");case 63:return new dn(L,"320","17")}}catch(s){throw console.log(s),new Ke("unknown decoder: "+L)}}class Is{constructor(s,o,c,d){this.leftchar=s,this.rightchar=o,this.finderpattern=c,this.maybeLast=d}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,o){return s instanceof Is?Is.equalsOrNull(s.leftchar,o.leftchar)&&Is.equalsOrNull(s.rightchar,o.rightchar)&&Is.equalsOrNull(s.finderpattern,o.finderpattern):!1}static equalsOrNull(s,o){return s===null?o===null:Is.equals(s,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Uc{constructor(s,o,c){this.pairs=s,this.rowNumber=o,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,o){return s instanceof Uc?this.checkEqualitity(s,o)&&s.wasReversed===o.wasReversed:!1}checkEqualitity(s,o){if(!s||!o)return;let c;return s.forEach((d,h)=>{o.forEach(p=>{d.getLeftChar().getValue()===p.getLeftChar().getValue()&&d.getRightChar().getValue()===p.getRightChar().getValue()&&d.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(c=!0)})}),c}}class Ce extends Vn{constructor(s){super(...arguments),this.pairs=new Array(Ce.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,o,c){this.pairs.length=0,this.startFromEven=!1;try{return Ce.constructResult(this.decodeRow2pairs(s,o))}catch(d){this.verbose&&console.log(d)}return this.pairs.length=0,this.startFromEven=!0,Ce.constructResult(this.decodeRow2pairs(s,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,o){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,s))}catch(h){if(h instanceof ie){if(!this.pairs.length)throw new ie;c=!0}}if(this.checkChecksum())return this.pairs;let d;if(this.rows.length?d=!0:d=!1,this.storeRow(s,!1),d){let h=this.checkRowsBoolean(!1);if(h!=null||(h=this.checkRowsBoolean(!0),h!=null))return h}throw new ie}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return s&&(this.rows=this.rows.reverse()),o}checkRows(s,o){for(let c=o;c<this.rows.length;c++){let d=this.rows[c];this.pairs.length=0;for(let p of s)this.pairs.push(p.getPairs());if(this.pairs.push(d.getPairs()),!Ce.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let h=new Array(s);h.push(d);try{return this.checkRows(h,c+1)}catch(p){this.verbose&&console.log(p)}}throw new ie}static isValidSequence(s){for(let o of Ce.FINDER_PATTERN_SEQUENCES){if(s.length>o.length)continue;let c=!0;for(let d=0;d<s.length;d++)if(s[d].getFinderPattern().getValue()!=o[d]){c=!1;break}if(c)return!0}return!1}storeRow(s,o){let c=0,d=!1,h=!1;for(;c<this.rows.length;){let p=this.rows[c];if(p.getRowNumber()>s){h=p.isEquivalent(this.pairs);break}d=p.isEquivalent(this.pairs),c++}h||d||Ce.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new Uc(this.pairs,s,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,o){for(let c of o)if(c.getPairs().length!==s.length){for(let d of c.getPairs())for(let h of s)if(Is.equals(d,h))break}}static isPartialRow(s,o){for(let c of o){let d=!0;for(let h of s){let p=!1;for(let w of c.getPairs())if(h.equals(w)){p=!0;break}if(!p){d=!1;break}}if(d)return!0}return!1}getRows(){return this.rows}static constructResult(s){let o=ri.buildBitArray(s),d=Pc(o).parseInformation(),h=s[0].getFinderPattern().getResultPoints(),p=s[s.length-1].getFinderPattern().getResultPoints(),w=[h[0],h[1],p[0],p[1]];return new Ne(d,null,null,w,be.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),o=s.getLeftChar(),c=s.getRightChar();if(c==null)return!1;let d=c.getChecksumPortion(),h=2;for(let w=1;w<this.pairs.size();++w){let S=this.pairs.get(w);d+=S.getLeftChar().getChecksumPortion(),h++;let _=S.getRightChar();_!=null&&(d+=_.getChecksumPortion(),h++)}return d%=211,211*(h-4)+d==o.getValue()}static getNextSecondBar(s,o){let c;return s.get(o)?(c=s.getNextUnset(o),c=s.getNextSet(c)):(c=s.getNextSet(o),c=s.getNextUnset(c)),c}retrieveNextPair(s,o,c){let d=o.length%2==0;this.startFromEven&&(d=!d);let h,p=!0,w=-1;do this.findNextPair(s,o,w),h=this.parseFoundFinderPattern(s,c,d),h==null?w=Ce.getNextSecondBar(s,this.startEnd[0]):p=!1;while(p);let S=this.decodeDataCharacter(s,h,d,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new ie;let _;try{_=this.decodeDataCharacter(s,h,d,!1)}catch(I){_=null,this.verbose&&console.log(I)}return new Is(S,_,h,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,o,c){let d=this.getDecodeFinderCounters();d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=s.getSize(),p;c>=0?p=c:this.isEmptyPair(o)?p=0:p=o[o.length-1].getFinderPattern().getStartEnd()[1];let w=o.length%2!=0;this.startFromEven&&(w=!w);let S=!1;for(;p<h&&(S=!s.get(p),!!S);)p++;let _=0,I=p;for(let k=p;k<h;k++)if(s.get(k)!=S)d[_]++;else{if(_==3){if(w&&Ce.reverseCounters(d),Ce.isFinderPattern(d)){this.startEnd[0]=I,this.startEnd[1]=k;return}w&&Ce.reverseCounters(d),I+=d[0]+d[1],d[0]=d[2],d[1]=d[3],d[2]=0,d[3]=0,_--}else _++;d[_]=1,S=!S}throw new ie}static reverseCounters(s){let o=s.length;for(let c=0;c<o/2;++c){let d=s[c];s[c]=s[o-c-1],s[o-c-1]=d}}parseFoundFinderPattern(s,o,c){let d,h,p;if(c){let _=this.startEnd[0]-1;for(;_>=0&&!s.get(_);)_--;_++,d=this.startEnd[0]-_,h=_,p=this.startEnd[1]}else h=this.startEnd[0],p=s.getNextUnset(this.startEnd[1]+1),d=p-this.startEnd[1];let w=this.getDecodeFinderCounters();j.arraycopy(w,0,w,1,w.length-1),w[0]=d;let S;try{S=this.parseFinderValue(w,Ce.FINDER_PATTERNS)}catch{return null}return new ul(S,[h,p],h,p,o)}decodeDataCharacter(s,o,c,d){let h=this.getDataCharacterCounters();for(let tn=0;tn<h.length;tn++)h[tn]=0;if(d)Ce.recordPatternInReverse(s,o.getStartEnd()[0],h);else{Ce.recordPattern(s,o.getStartEnd()[1],h);for(let tn=0,ei=h.length-1;tn<ei;tn++,ei--){let Ci=h[tn];h[tn]=h[ei],h[ei]=Ci}}let p=17,w=mt.sum(new Int32Array(h))/p,S=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(w-S)/S>.3)throw new ie;let _=this.getOddCounts(),I=this.getEvenCounts(),k=this.getOddRoundingErrors(),P=this.getEvenRoundingErrors();for(let tn=0;tn<h.length;tn++){let ei=1*h[tn]/w,Ci=ei+.5;if(Ci<1){if(ei<.3)throw new ie;Ci=1}else if(Ci>8){if(ei>8.7)throw new ie;Ci=8}let Nr=tn/2;(tn&1)==0?(_[Nr]=Ci,k[Nr]=ei-Ci):(I[Nr]=Ci,P[Nr]=ei-Ci)}this.adjustOddEvenCounts(p);let $=4*o.getValue()+(c?0:2)+(d?0:1)-1,Z=0,ee=0;for(let tn=_.length-1;tn>=0;tn--){if(Ce.isNotA1left(o,c,d)){let ei=Ce.WEIGHTS[$][2*tn];ee+=_[tn]*ei}Z+=_[tn]}let ue=0;for(let tn=I.length-1;tn>=0;tn--)if(Ce.isNotA1left(o,c,d)){let ei=Ce.WEIGHTS[$][2*tn+1];ue+=I[tn]*ei}let pe=ee+ue;if((Z&1)!=0||Z>13||Z<4)throw new ie;let Me=(13-Z)/2,ke=Ce.SYMBOL_WIDEST[Me],Ie=9-ke,wt=Wn.getRSSvalue(_,ke,!0),pt=Wn.getRSSvalue(I,Ie,!1),gi=Ce.EVEN_TOTAL_SUBSET[Me],zi=Ce.GSUM[Me],Si=wt*gi+pt+zi;return new Er(Si,pe)}static isNotA1left(s,o,c){return!(s.getValue()==0&&o&&c)}adjustOddEvenCounts(s){let o=mt.sum(new Int32Array(this.getOddCounts())),c=mt.sum(new Int32Array(this.getEvenCounts())),d=!1,h=!1;o>13?h=!0:o<4&&(d=!0);let p=!1,w=!1;c>13?w=!0:c<4&&(p=!0);let S=o+c-s,_=(o&1)==1,I=(c&1)==0;if(S==1)if(_){if(I)throw new ie;h=!0}else{if(!I)throw new ie;w=!0}else if(S==-1)if(_){if(I)throw new ie;d=!0}else{if(!I)throw new ie;p=!0}else if(S==0){if(_){if(!I)throw new ie;o<c?(d=!0,w=!0):(h=!0,p=!0)}else if(I)throw new ie}else throw new ie;if(d){if(h)throw new ie;Ce.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&Ce.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(w)throw new ie;Ce.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Ce.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ce.SYMBOL_WIDEST=[7,5,4,3,1],Ce.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ce.GSUM=[0,348,1388,2948,3988],Ce.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ce.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ce.FINDER_PAT_A=0,Ce.FINDER_PAT_B=1,Ce.FINDER_PAT_C=2,Ce.FINDER_PAT_D=3,Ce.FINDER_PAT_E=4,Ce.FINDER_PAT_F=5,Ce.FINDER_PATTERN_SEQUENCES=[[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_C,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_C],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_E],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F]],Ce.MAX_PAIRS=11;class fl extends Er{constructor(s,o,c){super(s,o),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class qt extends Vn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,o,c){const d=this.decodePair(o,!1,s,c);qt.addOrTally(this.possibleLeftPairs,d),o.reverse();let h=this.decodePair(o,!0,s,c);qt.addOrTally(this.possibleRightPairs,h),o.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let w of this.possibleRightPairs)if(w.getCount()>1&&qt.checkChecksum(p,w))return qt.constructResult(p,w)}throw new ie}static addOrTally(s,o){if(o==null)return;let c=!1;for(let d of s)if(d.getValue()===o.getValue()){d.incrementCount(),c=!0;break}c||s.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,o){let c=4537077*s.getValue()+o.getValue(),d=new String(c).toString(),h=new he;for(let _=13-d.length;_>0;_--)h.append("0");h.append(d);let p=0;for(let _=0;_<13;_++){let I=h.charAt(_).charCodeAt(0)-48;p+=(_&1)===0?3*I:I}p=10-p%10,p===10&&(p=0),h.append(p.toString());let w=s.getFinderPattern().getResultPoints(),S=o.getFinderPattern().getResultPoints();return new Ne(h.toString(),null,0,[w[0],w[1],S[0],S[1]],be.RSS_14,new Date().getTime())}static checkChecksum(s,o){let c=(s.getChecksumPortion()+16*o.getChecksumPortion())%79,d=9*s.getFinderPattern().getValue()+o.getFinderPattern().getValue();return d>72&&d--,d>8&&d--,c===d}decodePair(s,o,c,d){try{let h=this.findFinderPattern(s,o),p=this.parseFoundFinderPattern(s,c,o,h),w=d==null?null:d.get(ne.NEED_RESULT_POINT_CALLBACK);if(w!=null){let I=(h[0]+h[1])/2;o&&(I=s.getSize()-1-I),w.foundPossibleResultPoint(new Re(I,c))}let S=this.decodeDataCharacter(s,p,!0),_=this.decodeDataCharacter(s,p,!1);return new fl(1597*S.getValue()+_.getValue(),S.getChecksumPortion()+4*_.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(s,o,c){let d=this.getDataCharacterCounters();for(let ue=0;ue<d.length;ue++)d[ue]=0;if(c)Et.recordPatternInReverse(s,o.getStartEnd()[0],d);else{Et.recordPattern(s,o.getStartEnd()[1]+1,d);for(let ue=0,pe=d.length-1;ue<pe;ue++,pe--){let Me=d[ue];d[ue]=d[pe],d[pe]=Me}}let h=c?16:15,p=mt.sum(new Int32Array(d))/h,w=this.getOddCounts(),S=this.getEvenCounts(),_=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let ue=0;ue<d.length;ue++){let pe=d[ue]/p,Me=Math.floor(pe+.5);Me<1?Me=1:Me>8&&(Me=8);let ke=Math.floor(ue/2);(ue&1)===0?(w[ke]=Me,_[ke]=pe-Me):(S[ke]=Me,I[ke]=pe-Me)}this.adjustOddEvenCounts(c,h);let k=0,P=0;for(let ue=w.length-1;ue>=0;ue--)P*=9,P+=w[ue],k+=w[ue];let $=0,Z=0;for(let ue=S.length-1;ue>=0;ue--)$*=9,$+=S[ue],Z+=S[ue];let ee=P+3*$;if(c){if((k&1)!==0||k>12||k<4)throw new ie;let ue=(12-k)/2,pe=qt.OUTSIDE_ODD_WIDEST[ue],Me=9-pe,ke=Wn.getRSSvalue(w,pe,!1),Ie=Wn.getRSSvalue(S,Me,!0),wt=qt.OUTSIDE_EVEN_TOTAL_SUBSET[ue],pt=qt.OUTSIDE_GSUM[ue];return new Er(ke*wt+Ie+pt,ee)}else{if((Z&1)!==0||Z>10||Z<4)throw new ie;let ue=(10-Z)/2,pe=qt.INSIDE_ODD_WIDEST[ue],Me=9-pe,ke=Wn.getRSSvalue(w,pe,!0),Ie=Wn.getRSSvalue(S,Me,!1),wt=qt.INSIDE_ODD_TOTAL_SUBSET[ue],pt=qt.INSIDE_GSUM[ue];return new Er(Ie*wt+ke+pt,ee)}}findFinderPattern(s,o){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=s.getSize(),h=!1,p=0;for(;p<d&&(h=!s.get(p),o!==h);)p++;let w=0,S=p;for(let _=p;_<d;_++)if(s.get(_)!==h)c[w]++;else{if(w===3){if(Vn.isFinderPattern(c))return[S,_];S+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,h=!h}throw new ie}parseFoundFinderPattern(s,o,c,d){let h=s.get(d[0]),p=d[0]-1;for(;p>=0&&h!==s.get(p);)p--;p++;const w=d[0]-p,S=this.getDecodeFinderCounters(),_=new Int32Array(S.length);j.arraycopy(S,0,_,1,S.length-1),_[0]=w;const I=this.parseFinderValue(_,qt.FINDER_PATTERNS);let k=p,P=d[1];return c&&(k=s.getSize()-1-k,P=s.getSize()-1-P),new ul(I,[p,d[1]],k,P,o)}adjustOddEvenCounts(s,o){let c=mt.sum(new Int32Array(this.getOddCounts())),d=mt.sum(new Int32Array(this.getEvenCounts())),h=!1,p=!1,w=!1,S=!1;s?(c>12?p=!0:c<4&&(h=!0),d>12?S=!0:d<4&&(w=!0)):(c>11?p=!0:c<5&&(h=!0),d>10?S=!0:d<4&&(w=!0));let _=c+d-o,I=(c&1)===(s?1:0),k=(d&1)===1;if(_===1)if(I){if(k)throw new ie;p=!0}else{if(!k)throw new ie;S=!0}else if(_===-1)if(I){if(k)throw new ie;h=!0}else{if(!k)throw new ie;w=!0}else if(_===0){if(I){if(!k)throw new ie;c<d?(h=!0,S=!0):(p=!0,w=!0)}else if(k)throw new ie}else throw new ie;if(h){if(p)throw new ie;Vn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&Vn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),w){if(S)throw new ie;Vn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}S&&Vn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}qt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],qt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],qt.OUTSIDE_GSUM=[0,161,961,2015,2715],qt.INSIDE_GSUM=[0,336,1036,1516],qt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],qt.INSIDE_ODD_WIDEST=[2,4,6,8],qt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ks extends Et{constructor(s,o){super(),this.readers=[],this.verbose=o===!0;const c=s?s.get(ne.POSSIBLE_FORMATS):null,d=s&&s.get(ne.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(be.EAN_13)||c.includes(be.UPC_A)||c.includes(be.EAN_8)||c.includes(be.UPC_E))&&this.readers.push(new uo(s)),c.includes(be.CODE_39)&&this.readers.push(new ct(d)),c.includes(be.CODE_128)&&this.readers.push(new De),c.includes(be.ITF)&&this.readers.push(new _t),c.includes(be.RSS_14)&&this.readers.push(new qt),c.includes(be.RSS_EXPANDED)&&this.readers.push(new Ce(this.verbose))):(this.readers.push(new uo(s)),this.readers.push(new ct),this.readers.push(new uo(s)),this.readers.push(new De),this.readers.push(new _t),this.readers.push(new qt),this.readers.push(new Ce(this.verbose)))}decodeRow(s,o,c){for(let d=0;d<this.readers.length;d++)try{return this.readers[d].decodeRow(s,o,c)}catch{}throw new ie}reset(){this.readers.forEach(s=>s.reset())}}class jf extends oe{constructor(s=500,o){super(new Ks(o),s,o)}}class jt{constructor(s,o,c){this.ecCodewords=s,this.ecBlocks=[o],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Vt{constructor(s,o){this.count=s,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ot{constructor(s,o,c,d,h,p){this.versionNumber=s,this.symbolSizeRows=o,this.symbolSizeColumns=c,this.dataRegionSizeRows=d,this.dataRegionSizeColumns=h,this.ecBlocks=p;let w=0;const S=p.getECCodewords(),_=p.getECBlocks();for(let I of _)w+=I.getCount()*(I.getDataCodewords()+S);this.totalCodewords=w}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,o){if((s&1)!==0||(o&1)!==0)throw new K;for(let c of Ot.VERSIONS)if(c.symbolSizeRows===s&&c.symbolSizeColumns===o)return c;throw new K}toString(){return""+this.versionNumber}static buildVersions(){return[new Ot(1,10,10,8,8,new jt(5,new Vt(1,3))),new Ot(2,12,12,10,10,new jt(7,new Vt(1,5))),new Ot(3,14,14,12,12,new jt(10,new Vt(1,8))),new Ot(4,16,16,14,14,new jt(12,new Vt(1,12))),new Ot(5,18,18,16,16,new jt(14,new Vt(1,18))),new Ot(6,20,20,18,18,new jt(18,new Vt(1,22))),new Ot(7,22,22,20,20,new jt(20,new Vt(1,30))),new Ot(8,24,24,22,22,new jt(24,new Vt(1,36))),new Ot(9,26,26,24,24,new jt(28,new Vt(1,44))),new Ot(10,32,32,14,14,new jt(36,new Vt(1,62))),new Ot(11,36,36,16,16,new jt(42,new Vt(1,86))),new Ot(12,40,40,18,18,new jt(48,new Vt(1,114))),new Ot(13,44,44,20,20,new jt(56,new Vt(1,144))),new Ot(14,48,48,22,22,new jt(68,new Vt(1,174))),new Ot(15,52,52,24,24,new jt(42,new Vt(2,102))),new Ot(16,64,64,14,14,new jt(56,new Vt(2,140))),new Ot(17,72,72,16,16,new jt(36,new Vt(4,92))),new Ot(18,80,80,18,18,new jt(48,new Vt(4,114))),new Ot(19,88,88,20,20,new jt(56,new Vt(4,144))),new Ot(20,96,96,22,22,new jt(68,new Vt(4,174))),new Ot(21,104,104,24,24,new jt(56,new Vt(6,136))),new Ot(22,120,120,18,18,new jt(68,new Vt(6,175))),new Ot(23,132,132,20,20,new jt(62,new Vt(8,163))),new Ot(24,144,144,22,22,new jt(62,new Vt(8,156),new Vt(2,155))),new Ot(25,8,18,6,16,new jt(7,new Vt(1,5))),new Ot(26,8,32,6,14,new jt(11,new Vt(1,10))),new Ot(27,12,26,10,24,new jt(14,new Vt(1,16))),new Ot(28,12,36,10,16,new jt(18,new Vt(1,22))),new Ot(29,16,36,14,16,new jt(24,new Vt(1,32))),new Ot(30,16,48,14,22,new jt(28,new Vt(1,49)))]}}Ot.VERSIONS=Ot.buildVersions();class Fc{constructor(s){const o=s.getHeight();if(o<8||o>144||(o&1)!==0)throw new K;this.version=Fc.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new Ue(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const o=s.getHeight(),c=s.getWidth();return Ot.getVersionForDimensions(o,c)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let o=0,c=4,d=0;const h=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let w=!1,S=!1,_=!1,I=!1;do if(c===h&&d===0&&!w)s[o++]=this.readCorner1(h,p)&255,c-=2,d+=2,w=!0;else if(c===h-2&&d===0&&(p&3)!==0&&!S)s[o++]=this.readCorner2(h,p)&255,c-=2,d+=2,S=!0;else if(c===h+4&&d===2&&(p&7)===0&&!_)s[o++]=this.readCorner3(h,p)&255,c-=2,d+=2,_=!0;else if(c===h-2&&d===0&&(p&7)===4&&!I)s[o++]=this.readCorner4(h,p)&255,c-=2,d+=2,I=!0;else{do c<h&&d>=0&&!this.readMappingMatrix.get(d,c)&&(s[o++]=this.readUtah(c,d,h,p)&255),c-=2,d+=2;while(c>=0&&d<p);c+=1,d+=3;do c>=0&&d<p&&!this.readMappingMatrix.get(d,c)&&(s[o++]=this.readUtah(c,d,h,p)&255),c+=2,d-=2;while(c<h&&d>=0);c+=3,d+=1}while(c<h||d<p);if(o!==this.version.getTotalCodewords())throw new K;return s}readModule(s,o,c,d){return s<0&&(s+=c,o+=4-(c+4&7)),o<0&&(o+=d,s+=4-(d+4&7)),this.readMappingMatrix.set(o,s),this.mappingBitMatrix.get(o,s)}readUtah(s,o,c,d){let h=0;return this.readModule(s-2,o-2,c,d)&&(h|=1),h<<=1,this.readModule(s-2,o-1,c,d)&&(h|=1),h<<=1,this.readModule(s-1,o-2,c,d)&&(h|=1),h<<=1,this.readModule(s-1,o-1,c,d)&&(h|=1),h<<=1,this.readModule(s-1,o,c,d)&&(h|=1),h<<=1,this.readModule(s,o-2,c,d)&&(h|=1),h<<=1,this.readModule(s,o-1,c,d)&&(h|=1),h<<=1,this.readModule(s,o,c,d)&&(h|=1),h}readCorner1(s,o){let c=0;return this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,1,s,o)&&(c|=1),c<<=1,this.readModule(s-1,2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c<<=1,this.readModule(2,o-1,s,o)&&(c|=1),c<<=1,this.readModule(3,o-1,s,o)&&(c|=1),c}readCorner2(s,o){let c=0;return this.readModule(s-3,0,s,o)&&(c|=1),c<<=1,this.readModule(s-2,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(0,o-4,s,o)&&(c|=1),c<<=1,this.readModule(0,o-3,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c}readCorner3(s,o){let c=0;return this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,o-1,s,o)&&(c|=1),c<<=1,this.readModule(0,o-3,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-3,s,o)&&(c|=1),c<<=1,this.readModule(1,o-2,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c}readCorner4(s,o){let c=0;return this.readModule(s-3,0,s,o)&&(c|=1),c<<=1,this.readModule(s-2,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c<<=1,this.readModule(2,o-1,s,o)&&(c|=1),c<<=1,this.readModule(3,o-1,s,o)&&(c|=1),c}extractDataRegion(s){const o=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(s.getHeight()!==o)throw new A("Dimension of bitMatrix must match the version size");const d=this.version.getDataRegionSizeRows(),h=this.version.getDataRegionSizeColumns(),p=o/d|0,w=c/h|0,S=p*d,_=w*h,I=new Ue(_,S);for(let k=0;k<p;++k){const P=k*d;for(let $=0;$<w;++$){const Z=$*h;for(let ee=0;ee<d;++ee){const ue=k*(d+2)+1+ee,pe=P+ee;for(let Me=0;Me<h;++Me){const ke=$*(h+2)+1+Me;if(s.get(ke,ue)){const Ie=Z+Me;I.set(Ie,pe)}}}}}return I}}class dl{constructor(s,o){this.numDataCodewords=s,this.codewords=o}static getDataBlocks(s,o){const c=o.getECBlocks();let d=0;const h=c.getECBlocks();for(let ee of h)d+=ee.getCount();const p=new Array(d);let w=0;for(let ee of h)for(let ue=0;ue<ee.getCount();ue++){const pe=ee.getDataCodewords(),Me=c.getECCodewords()+pe;p[w++]=new dl(pe,new Uint8Array(Me))}const _=p[0].codewords.length-c.getECCodewords(),I=_-1;let k=0;for(let ee=0;ee<I;ee++)for(let ue=0;ue<w;ue++)p[ue].codewords[ee]=s[k++];const P=o.getVersionNumber()===24,$=P?8:w;for(let ee=0;ee<$;ee++)p[ee].codewords[_-1]=s[k++];const Z=p[0].codewords.length;for(let ee=_;ee<Z;ee++)for(let ue=0;ue<w;ue++){const pe=P?(ue+8)%w:ue,Me=P&&pe>7?ee-1:ee;p[pe].codewords[Me]=s[k++]}if(k!==s.length)throw new A;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class wi{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new A(""+s);let o=0,c=this.bitOffset,d=this.byteOffset;const h=this.bytes;if(c>0){const p=8-c,w=s<p?s:p,S=p-w,_=255>>8-w<<S;o=(h[d]&_)>>S,s-=w,c+=w,c===8&&(c=0,d++)}if(s>0){for(;s>=8;)o=o<<8|h[d]&255,d++,s-=8;if(s>0){const p=8-s,w=255>>p<<p;o=o<<s|(h[d]&w)>>p,c+=s}}return this.bitOffset=c,this.byteOffset=d,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Nn;(function(L){L[L.PAD_ENCODE=0]="PAD_ENCODE",L[L.ASCII_ENCODE=1]="ASCII_ENCODE",L[L.C40_ENCODE=2]="C40_ENCODE",L[L.TEXT_ENCODE=3]="TEXT_ENCODE",L[L.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",L[L.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",L[L.BASE256_ENCODE=6]="BASE256_ENCODE"})(Nn||(Nn={}));class Zs{static decode(s){const o=new wi(s),c=new he,d=new he,h=new Array;let p=Nn.ASCII_ENCODE;do if(p===Nn.ASCII_ENCODE)p=this.decodeAsciiSegment(o,c,d);else{switch(p){case Nn.C40_ENCODE:this.decodeC40Segment(o,c);break;case Nn.TEXT_ENCODE:this.decodeTextSegment(o,c);break;case Nn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,c);break;case Nn.EDIFACT_ENCODE:this.decodeEdifactSegment(o,c);break;case Nn.BASE256_ENCODE:this.decodeBase256Segment(o,c,h);break;default:throw new K}p=Nn.ASCII_ENCODE}while(p!==Nn.PAD_ENCODE&&o.available()>0);return d.length()>0&&c.append(d.toString()),new Mt(s,c.toString(),h.length===0?null:h,null)}static decodeAsciiSegment(s,o,c){let d=!1;do{let h=s.readBits(8);if(h===0)throw new K;if(h<=128)return d&&(h+=128),o.append(String.fromCharCode(h-1)),Nn.ASCII_ENCODE;if(h===129)return Nn.PAD_ENCODE;if(h<=229){const p=h-130;p<10&&o.append("0"),o.append(""+p)}else switch(h){case 230:return Nn.C40_ENCODE;case 231:return Nn.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:d=!0;break;case 236:o.append("[)>05"),c.insert(0,"");break;case 237:o.append("[)>06"),c.insert(0,"");break;case 238:return Nn.ANSIX12_ENCODE;case 239:return Nn.TEXT_ENCODE;case 240:return Nn.EDIFACT_ENCODE;case 241:break;default:if(h!==254||s.available()!==0)throw new K;break}}while(s.available()>0);return Nn.ASCII_ENCODE}static decodeC40Segment(s,o){let c=!1;const d=[];let h=0;do{if(s.available()===8)return;const p=s.readBits(8);if(p===254)return;this.parseTwoBytes(p,s.readBits(8),d);for(let w=0;w<3;w++){const S=d[w];switch(h){case 0:if(S<3)h=S+1;else if(S<this.C40_BASIC_SET_CHARS.length){const _=this.C40_BASIC_SET_CHARS[S];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_)}else throw new K;break;case 1:c?(o.append(String.fromCharCode(S+128)),c=!1):o.append(String.fromCharCode(S)),h=0;break;case 2:if(S<this.C40_SHIFT2_SET_CHARS.length){const _=this.C40_SHIFT2_SET_CHARS[S];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_)}else switch(S){case 27:o.append("");break;case 30:c=!0;break;default:throw new K}h=0;break;case 3:c?(o.append(String.fromCharCode(S+224)),c=!1):o.append(String.fromCharCode(S+96)),h=0;break;default:throw new K}}}while(s.available()>0)}static decodeTextSegment(s,o){let c=!1,d=[],h=0;do{if(s.available()===8)return;const p=s.readBits(8);if(p===254)return;this.parseTwoBytes(p,s.readBits(8),d);for(let w=0;w<3;w++){const S=d[w];switch(h){case 0:if(S<3)h=S+1;else if(S<this.TEXT_BASIC_SET_CHARS.length){const _=this.TEXT_BASIC_SET_CHARS[S];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_)}else throw new K;break;case 1:c?(o.append(String.fromCharCode(S+128)),c=!1):o.append(String.fromCharCode(S)),h=0;break;case 2:if(S<this.TEXT_SHIFT2_SET_CHARS.length){const _=this.TEXT_SHIFT2_SET_CHARS[S];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_)}else switch(S){case 27:o.append("");break;case 30:c=!0;break;default:throw new K}h=0;break;case 3:if(S<this.TEXT_SHIFT3_SET_CHARS.length){const _=this.TEXT_SHIFT3_SET_CHARS[S];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_),h=0}else throw new K;break;default:throw new K}}}while(s.available()>0)}static decodeAnsiX12Segment(s,o){const c=[];do{if(s.available()===8)return;const d=s.readBits(8);if(d===254)return;this.parseTwoBytes(d,s.readBits(8),c);for(let h=0;h<3;h++){const p=c[h];switch(p){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(p<14)o.append(String.fromCharCode(p+44));else if(p<40)o.append(String.fromCharCode(p+51));else throw new K;break}}}while(s.available()>0)}static parseTwoBytes(s,o,c){let d=(s<<8)+o-1,h=Math.floor(d/1600);c[0]=h,d-=h*1600,h=Math.floor(d/40),c[1]=h,c[2]=d-h*40}static decodeEdifactSegment(s,o){do{if(s.available()<=16)return;for(let c=0;c<4;c++){let d=s.readBits(6);if(d===31){const h=8-s.getBitOffset();h!==8&&s.readBits(h);return}(d&32)===0&&(d|=64),o.append(String.fromCharCode(d))}}while(s.available()>0)}static decodeBase256Segment(s,o,c){let d=1+s.getByteOffset();const h=this.unrandomize255State(s.readBits(8),d++);let p;if(h===0?p=s.available()/8|0:h<250?p=h:p=250*(h-249)+this.unrandomize255State(s.readBits(8),d++),p<0)throw new K;const w=new Uint8Array(p);for(let S=0;S<p;S++){if(s.available()<8)throw new K;w[S]=this.unrandomize255State(s.readBits(8),d++)}c.push(w);try{o.append(je.decode(w,_e.ISO88591))}catch(S){throw new Ke("Platform does not support required encoding: "+S.message)}}static unrandomize255State(s,o){const c=149*o%255+1,d=s-c;return d>=0?d:d+256}}Zs.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Zs.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Zs.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Zs.TEXT_SHIFT2_SET_CHARS=Zs.C40_SHIFT2_SET_CHARS,Zs.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class hl{constructor(){this.rsDecoder=new xt(Be.DATA_MATRIX_FIELD_256)}decode(s){const o=new Fc(s),c=o.getVersion(),d=o.readCodewords(),h=dl.getDataBlocks(d,c);let p=0;for(let _ of h)p+=_.getNumDataCodewords();const w=new Uint8Array(p),S=h.length;for(let _=0;_<S;_++){const I=h[_],k=I.getCodewords(),P=I.getNumDataCodewords();this.correctErrors(k,P);for(let $=0;$<P;$++)w[$*S+_]=k[$]}return Zs.decode(w)}correctErrors(s,o){const c=new Int32Array(s);try{this.rsDecoder.decode(c,s.length-o)}catch{throw new O}for(let d=0;d<o;d++)s[d]=c[d]}}class yn{constructor(s){this.image=s,this.rectangleDetector=new vt(this.image)}detect(){const s=this.rectangleDetector.detect();let o=this.detectSolid1(s);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new ie;o=this.shiftToModuleCenter(o);const c=o[0],d=o[1],h=o[2],p=o[3];let w=this.transitionsBetween(c,p)+1,S=this.transitionsBetween(h,p)+1;(w&1)===1&&(w+=1),(S&1)===1&&(S+=1),4*w<7*S&&4*S<7*w&&(w=S=Math.max(w,S));let _=yn.sampleGrid(this.image,c,d,h,p,w,S);return new et(_,[c,d,h,p])}static shiftPoint(s,o,c){let d=(o.getX()-s.getX())/(c+1),h=(o.getY()-s.getY())/(c+1);return new Re(s.getX()+d,s.getY()+h)}static moveAway(s,o,c){let d=s.getX(),h=s.getY();return d<o?d-=1:d+=1,h<c?h-=1:h+=1,new Re(d,h)}detectSolid1(s){let o=s[0],c=s[1],d=s[3],h=s[2],p=this.transitionsBetween(o,c),w=this.transitionsBetween(c,d),S=this.transitionsBetween(d,h),_=this.transitionsBetween(h,o),I=p,k=[h,o,c,d];return I>w&&(I=w,k[0]=o,k[1]=c,k[2]=d,k[3]=h),I>S&&(I=S,k[0]=c,k[1]=d,k[2]=h,k[3]=o),I>_&&(k[0]=d,k[1]=h,k[2]=o,k[3]=c),k}detectSolid2(s){let o=s[0],c=s[1],d=s[2],h=s[3],p=this.transitionsBetween(o,h),w=yn.shiftPoint(c,d,(p+1)*4),S=yn.shiftPoint(d,c,(p+1)*4),_=this.transitionsBetween(w,o),I=this.transitionsBetween(S,h);return _<I?(s[0]=o,s[1]=c,s[2]=d,s[3]=h):(s[0]=c,s[1]=d,s[2]=h,s[3]=o),s}correctTopRight(s){let o=s[0],c=s[1],d=s[2],h=s[3],p=this.transitionsBetween(o,h),w=this.transitionsBetween(c,h),S=yn.shiftPoint(o,c,(w+1)*4),_=yn.shiftPoint(d,c,(p+1)*4);p=this.transitionsBetween(S,h),w=this.transitionsBetween(_,h);let I=new Re(h.getX()+(d.getX()-c.getX())/(p+1),h.getY()+(d.getY()-c.getY())/(p+1)),k=new Re(h.getX()+(o.getX()-c.getX())/(w+1),h.getY()+(o.getY()-c.getY())/(w+1));if(!this.isValid(I))return this.isValid(k)?k:null;if(!this.isValid(k))return I;let P=this.transitionsBetween(S,I)+this.transitionsBetween(_,I),$=this.transitionsBetween(S,k)+this.transitionsBetween(_,k);return P>$?I:k}shiftToModuleCenter(s){let o=s[0],c=s[1],d=s[2],h=s[3],p=this.transitionsBetween(o,h)+1,w=this.transitionsBetween(d,h)+1,S=yn.shiftPoint(o,c,w*4),_=yn.shiftPoint(d,c,p*4);p=this.transitionsBetween(S,h)+1,w=this.transitionsBetween(_,h)+1,(p&1)===1&&(p+=1),(w&1)===1&&(w+=1);let I=(o.getX()+c.getX()+d.getX()+h.getX())/4,k=(o.getY()+c.getY()+d.getY()+h.getY())/4;o=yn.moveAway(o,I,k),c=yn.moveAway(c,I,k),d=yn.moveAway(d,I,k),h=yn.moveAway(h,I,k);let P,$;return S=yn.shiftPoint(o,c,w*4),S=yn.shiftPoint(S,h,p*4),P=yn.shiftPoint(c,o,w*4),P=yn.shiftPoint(P,d,p*4),_=yn.shiftPoint(d,h,w*4),_=yn.shiftPoint(_,c,p*4),$=yn.shiftPoint(h,d,w*4),$=yn.shiftPoint($,o,p*4),[S,P,_,$]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,o,c,d,h,p,w){return Xe.getInstance().sampleGrid(s,p,w,.5,.5,p-.5,.5,p-.5,w-.5,.5,w-.5,o.getX(),o.getY(),h.getX(),h.getY(),d.getX(),d.getY(),c.getX(),c.getY())}transitionsBetween(s,o){let c=Math.trunc(s.getX()),d=Math.trunc(s.getY()),h=Math.trunc(o.getX()),p=Math.trunc(o.getY()),w=Math.abs(p-d)>Math.abs(h-c);if(w){let ee=c;c=d,d=ee,ee=h,h=p,p=ee}let S=Math.abs(h-c),_=Math.abs(p-d),I=-S/2,k=d<p?1:-1,P=c<h?1:-1,$=0,Z=this.image.get(w?d:c,w?c:d);for(let ee=c,ue=d;ee!==h;ee+=P){let pe=this.image.get(w?ue:ee,w?ee:ue);if(pe!==Z&&($++,Z=pe),I+=_,I>0){if(ue===p)break;ue+=k,I-=S}}return $}}class ts{constructor(){this.decoder=new hl}decode(s,o=null){let c,d;if(o!=null&&o.has(ne.PURE_BARCODE)){const _=ts.extractPureBits(s.getBlackMatrix());c=this.decoder.decode(_),d=ts.NO_POINTS}else{const _=new yn(s.getBlackMatrix()).detect();c=this.decoder.decode(_.getBits()),d=_.getPoints()}const h=c.getRawBytes(),p=new Ne(c.getText(),h,8*h.length,d,be.DATA_MATRIX,j.currentTimeMillis()),w=c.getByteSegments();w!=null&&p.putMetadata(Ge.BYTE_SEGMENTS,w);const S=c.getECLevel();return S!=null&&p.putMetadata(Ge.ERROR_CORRECTION_LEVEL,S),p}reset(){}static extractPureBits(s){const o=s.getTopLeftOnBit(),c=s.getBottomRightOnBit();if(o==null||c==null)throw new ie;const d=this.moduleSize(o,s);let h=o[1];const p=c[1];let w=o[0];const _=(c[0]-w+1)/d,I=(p-h+1)/d;if(_<=0||I<=0)throw new ie;const k=d/2;h+=k,w+=k;const P=new Ue(_,I);for(let $=0;$<I;$++){const Z=h+$*d;for(let ee=0;ee<_;ee++)s.get(w+ee*d,Z)&&P.set(ee,$)}return P}static moduleSize(s,o){const c=o.getWidth();let d=s[0];const h=s[1];for(;d<c&&o.get(d,h);)d++;if(d===c)throw new ie;const p=d-s[0];if(p===0)throw new ie;return p}}ts.NO_POINTS=[];class Jh extends oe{constructor(s=500){super(new ts,s)}}var Kn;(function(L){L[L.L=0]="L",L[L.M=1]="M",L[L.Q=2]="Q",L[L.H=3]="H"})(Kn||(Kn={}));class Kt{constructor(s,o,c){this.value=s,this.stringValue=o,this.bits=c,Kt.FOR_BITS.set(c,this),Kt.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return Kt.L;case"M":return Kt.M;case"Q":return Kt.Q;case"H":return Kt.H;default:throw new E(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof Kt))return!1;const o=s;return this.value===o.value}static forBits(s){if(s<0||s>=Kt.FOR_BITS.size)throw new A;return Kt.FOR_BITS.get(s)}}Kt.FOR_BITS=new Map,Kt.FOR_VALUE=new Map,Kt.L=new Kt(Kn.L,"L",1),Kt.M=new Kt(Kn.M,"M",0),Kt.Q=new Kt(Kn.Q,"Q",3),Kt.H=new Kt(Kn.H,"H",2);class Zn{constructor(s){this.errorCorrectionLevel=Kt.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,o){return B.bitCount(s^o)}static decodeFormatInformation(s,o){const c=Zn.doDecodeFormatInformation(s,o);return c!==null?c:Zn.doDecodeFormatInformation(s^Zn.FORMAT_INFO_MASK_QR,o^Zn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,o){let c=Number.MAX_SAFE_INTEGER,d=0;for(const h of Zn.FORMAT_INFO_DECODE_LOOKUP){const p=h[0];if(p===s||p===o)return new Zn(h[1]);let w=Zn.numBitsDiffering(s,p);w<c&&(d=h[1],c=w),s!==o&&(w=Zn.numBitsDiffering(o,p),w<c&&(d=h[1],c=w))}return c<=3?new Zn(d):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof Zn))return!1;const o=s;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Zn.FORMAT_INFO_MASK_QR=21522,Zn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class fe{constructor(s,...o){this.ecCodewordsPerBlock=s,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const o=this.ecBlocks;for(const c of o)s+=c.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class z{constructor(s,o){this.count=s,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ze{constructor(s,o,...c){this.versionNumber=s,this.alignmentPatternCenters=o,this.ecBlocks=c;let d=0;const h=c[0].getECCodewordsPerBlock(),p=c[0].getECBlocks();for(const w of p)d+=w.getCount()*(w.getDataCodewords()+h);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new K;try{return this.getVersionForNumber((s-17)/4)}catch{throw new K}}static getVersionForNumber(s){if(s<1||s>40)throw new A;return Ze.VERSIONS[s-1]}static decodeVersionInformation(s){let o=Number.MAX_SAFE_INTEGER,c=0;for(let d=0;d<Ze.VERSION_DECODE_INFO.length;d++){const h=Ze.VERSION_DECODE_INFO[d];if(h===s)return Ze.getVersionForNumber(d+7);const p=Zn.numBitsDiffering(s,h);p<o&&(c=d+7,o=p)}return o<=3?Ze.getVersionForNumber(c):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),o=new Ue(s);o.setRegion(0,0,9,9),o.setRegion(s-8,0,8,9),o.setRegion(0,s-8,9,8);const c=this.alignmentPatternCenters.length;for(let d=0;d<c;d++){const h=this.alignmentPatternCenters[d]-2;for(let p=0;p<c;p++)d===0&&(p===0||p===c-1)||d===c-1&&p===0||o.setRegion(this.alignmentPatternCenters[p]-2,h,5,5)}return o.setRegion(6,9,1,s-17),o.setRegion(9,6,s-17,1),this.versionNumber>6&&(o.setRegion(s-11,0,3,6),o.setRegion(0,s-11,6,3)),o}toString(){return""+this.versionNumber}}Ze.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ze.VERSIONS=[new Ze(1,new Int32Array(0),new fe(7,new z(1,19)),new fe(10,new z(1,16)),new fe(13,new z(1,13)),new fe(17,new z(1,9))),new Ze(2,Int32Array.from([6,18]),new fe(10,new z(1,34)),new fe(16,new z(1,28)),new fe(22,new z(1,22)),new fe(28,new z(1,16))),new Ze(3,Int32Array.from([6,22]),new fe(15,new z(1,55)),new fe(26,new z(1,44)),new fe(18,new z(2,17)),new fe(22,new z(2,13))),new Ze(4,Int32Array.from([6,26]),new fe(20,new z(1,80)),new fe(18,new z(2,32)),new fe(26,new z(2,24)),new fe(16,new z(4,9))),new Ze(5,Int32Array.from([6,30]),new fe(26,new z(1,108)),new fe(24,new z(2,43)),new fe(18,new z(2,15),new z(2,16)),new fe(22,new z(2,11),new z(2,12))),new Ze(6,Int32Array.from([6,34]),new fe(18,new z(2,68)),new fe(16,new z(4,27)),new fe(24,new z(4,19)),new fe(28,new z(4,15))),new Ze(7,Int32Array.from([6,22,38]),new fe(20,new z(2,78)),new fe(18,new z(4,31)),new fe(18,new z(2,14),new z(4,15)),new fe(26,new z(4,13),new z(1,14))),new Ze(8,Int32Array.from([6,24,42]),new fe(24,new z(2,97)),new fe(22,new z(2,38),new z(2,39)),new fe(22,new z(4,18),new z(2,19)),new fe(26,new z(4,14),new z(2,15))),new Ze(9,Int32Array.from([6,26,46]),new fe(30,new z(2,116)),new fe(22,new z(3,36),new z(2,37)),new fe(20,new z(4,16),new z(4,17)),new fe(24,new z(4,12),new z(4,13))),new Ze(10,Int32Array.from([6,28,50]),new fe(18,new z(2,68),new z(2,69)),new fe(26,new z(4,43),new z(1,44)),new fe(24,new z(6,19),new z(2,20)),new fe(28,new z(6,15),new z(2,16))),new Ze(11,Int32Array.from([6,30,54]),new fe(20,new z(4,81)),new fe(30,new z(1,50),new z(4,51)),new fe(28,new z(4,22),new z(4,23)),new fe(24,new z(3,12),new z(8,13))),new Ze(12,Int32Array.from([6,32,58]),new fe(24,new z(2,92),new z(2,93)),new fe(22,new z(6,36),new z(2,37)),new fe(26,new z(4,20),new z(6,21)),new fe(28,new z(7,14),new z(4,15))),new Ze(13,Int32Array.from([6,34,62]),new fe(26,new z(4,107)),new fe(22,new z(8,37),new z(1,38)),new fe(24,new z(8,20),new z(4,21)),new fe(22,new z(12,11),new z(4,12))),new Ze(14,Int32Array.from([6,26,46,66]),new fe(30,new z(3,115),new z(1,116)),new fe(24,new z(4,40),new z(5,41)),new fe(20,new z(11,16),new z(5,17)),new fe(24,new z(11,12),new z(5,13))),new Ze(15,Int32Array.from([6,26,48,70]),new fe(22,new z(5,87),new z(1,88)),new fe(24,new z(5,41),new z(5,42)),new fe(30,new z(5,24),new z(7,25)),new fe(24,new z(11,12),new z(7,13))),new Ze(16,Int32Array.from([6,26,50,74]),new fe(24,new z(5,98),new z(1,99)),new fe(28,new z(7,45),new z(3,46)),new fe(24,new z(15,19),new z(2,20)),new fe(30,new z(3,15),new z(13,16))),new Ze(17,Int32Array.from([6,30,54,78]),new fe(28,new z(1,107),new z(5,108)),new fe(28,new z(10,46),new z(1,47)),new fe(28,new z(1,22),new z(15,23)),new fe(28,new z(2,14),new z(17,15))),new Ze(18,Int32Array.from([6,30,56,82]),new fe(30,new z(5,120),new z(1,121)),new fe(26,new z(9,43),new z(4,44)),new fe(28,new z(17,22),new z(1,23)),new fe(28,new z(2,14),new z(19,15))),new Ze(19,Int32Array.from([6,30,58,86]),new fe(28,new z(3,113),new z(4,114)),new fe(26,new z(3,44),new z(11,45)),new fe(26,new z(17,21),new z(4,22)),new fe(26,new z(9,13),new z(16,14))),new Ze(20,Int32Array.from([6,34,62,90]),new fe(28,new z(3,107),new z(5,108)),new fe(26,new z(3,41),new z(13,42)),new fe(30,new z(15,24),new z(5,25)),new fe(28,new z(15,15),new z(10,16))),new Ze(21,Int32Array.from([6,28,50,72,94]),new fe(28,new z(4,116),new z(4,117)),new fe(26,new z(17,42)),new fe(28,new z(17,22),new z(6,23)),new fe(30,new z(19,16),new z(6,17))),new Ze(22,Int32Array.from([6,26,50,74,98]),new fe(28,new z(2,111),new z(7,112)),new fe(28,new z(17,46)),new fe(30,new z(7,24),new z(16,25)),new fe(24,new z(34,13))),new Ze(23,Int32Array.from([6,30,54,78,102]),new fe(30,new z(4,121),new z(5,122)),new fe(28,new z(4,47),new z(14,48)),new fe(30,new z(11,24),new z(14,25)),new fe(30,new z(16,15),new z(14,16))),new Ze(24,Int32Array.from([6,28,54,80,106]),new fe(30,new z(6,117),new z(4,118)),new fe(28,new z(6,45),new z(14,46)),new fe(30,new z(11,24),new z(16,25)),new fe(30,new z(30,16),new z(2,17))),new Ze(25,Int32Array.from([6,32,58,84,110]),new fe(26,new z(8,106),new z(4,107)),new fe(28,new z(8,47),new z(13,48)),new fe(30,new z(7,24),new z(22,25)),new fe(30,new z(22,15),new z(13,16))),new Ze(26,Int32Array.from([6,30,58,86,114]),new fe(28,new z(10,114),new z(2,115)),new fe(28,new z(19,46),new z(4,47)),new fe(28,new z(28,22),new z(6,23)),new fe(30,new z(33,16),new z(4,17))),new Ze(27,Int32Array.from([6,34,62,90,118]),new fe(30,new z(8,122),new z(4,123)),new fe(28,new z(22,45),new z(3,46)),new fe(30,new z(8,23),new z(26,24)),new fe(30,new z(12,15),new z(28,16))),new Ze(28,Int32Array.from([6,26,50,74,98,122]),new fe(30,new z(3,117),new z(10,118)),new fe(28,new z(3,45),new z(23,46)),new fe(30,new z(4,24),new z(31,25)),new fe(30,new z(11,15),new z(31,16))),new Ze(29,Int32Array.from([6,30,54,78,102,126]),new fe(30,new z(7,116),new z(7,117)),new fe(28,new z(21,45),new z(7,46)),new fe(30,new z(1,23),new z(37,24)),new fe(30,new z(19,15),new z(26,16))),new Ze(30,Int32Array.from([6,26,52,78,104,130]),new fe(30,new z(5,115),new z(10,116)),new fe(28,new z(19,47),new z(10,48)),new fe(30,new z(15,24),new z(25,25)),new fe(30,new z(23,15),new z(25,16))),new Ze(31,Int32Array.from([6,30,56,82,108,134]),new fe(30,new z(13,115),new z(3,116)),new fe(28,new z(2,46),new z(29,47)),new fe(30,new z(42,24),new z(1,25)),new fe(30,new z(23,15),new z(28,16))),new Ze(32,Int32Array.from([6,34,60,86,112,138]),new fe(30,new z(17,115)),new fe(28,new z(10,46),new z(23,47)),new fe(30,new z(10,24),new z(35,25)),new fe(30,new z(19,15),new z(35,16))),new Ze(33,Int32Array.from([6,30,58,86,114,142]),new fe(30,new z(17,115),new z(1,116)),new fe(28,new z(14,46),new z(21,47)),new fe(30,new z(29,24),new z(19,25)),new fe(30,new z(11,15),new z(46,16))),new Ze(34,Int32Array.from([6,34,62,90,118,146]),new fe(30,new z(13,115),new z(6,116)),new fe(28,new z(14,46),new z(23,47)),new fe(30,new z(44,24),new z(7,25)),new fe(30,new z(59,16),new z(1,17))),new Ze(35,Int32Array.from([6,30,54,78,102,126,150]),new fe(30,new z(12,121),new z(7,122)),new fe(28,new z(12,47),new z(26,48)),new fe(30,new z(39,24),new z(14,25)),new fe(30,new z(22,15),new z(41,16))),new Ze(36,Int32Array.from([6,24,50,76,102,128,154]),new fe(30,new z(6,121),new z(14,122)),new fe(28,new z(6,47),new z(34,48)),new fe(30,new z(46,24),new z(10,25)),new fe(30,new z(2,15),new z(64,16))),new Ze(37,Int32Array.from([6,28,54,80,106,132,158]),new fe(30,new z(17,122),new z(4,123)),new fe(28,new z(29,46),new z(14,47)),new fe(30,new z(49,24),new z(10,25)),new fe(30,new z(24,15),new z(46,16))),new Ze(38,Int32Array.from([6,32,58,84,110,136,162]),new fe(30,new z(4,122),new z(18,123)),new fe(28,new z(13,46),new z(32,47)),new fe(30,new z(48,24),new z(14,25)),new fe(30,new z(42,15),new z(32,16))),new Ze(39,Int32Array.from([6,26,54,82,110,138,166]),new fe(30,new z(20,117),new z(4,118)),new fe(28,new z(40,47),new z(7,48)),new fe(30,new z(43,24),new z(22,25)),new fe(30,new z(10,15),new z(67,16))),new Ze(40,Int32Array.from([6,30,58,86,114,142,170]),new fe(30,new z(19,118),new z(6,119)),new fe(28,new z(18,47),new z(31,48)),new fe(30,new z(34,24),new z(34,25)),new fe(30,new z(20,15),new z(61,16)))];var kn;(function(L){L[L.DATA_MASK_000=0]="DATA_MASK_000",L[L.DATA_MASK_001=1]="DATA_MASK_001",L[L.DATA_MASK_010=2]="DATA_MASK_010",L[L.DATA_MASK_011=3]="DATA_MASK_011",L[L.DATA_MASK_100=4]="DATA_MASK_100",L[L.DATA_MASK_101=5]="DATA_MASK_101",L[L.DATA_MASK_110=6]="DATA_MASK_110",L[L.DATA_MASK_111=7]="DATA_MASK_111"})(kn||(kn={}));class Qn{constructor(s,o){this.value=s,this.isMasked=o}unmaskBitMatrix(s,o){for(let c=0;c<o;c++)for(let d=0;d<o;d++)this.isMasked(c,d)&&s.flip(d,c)}}Qn.values=new Map([[kn.DATA_MASK_000,new Qn(kn.DATA_MASK_000,(L,s)=>(L+s&1)===0)],[kn.DATA_MASK_001,new Qn(kn.DATA_MASK_001,(L,s)=>(L&1)===0)],[kn.DATA_MASK_010,new Qn(kn.DATA_MASK_010,(L,s)=>s%3===0)],[kn.DATA_MASK_011,new Qn(kn.DATA_MASK_011,(L,s)=>(L+s)%3===0)],[kn.DATA_MASK_100,new Qn(kn.DATA_MASK_100,(L,s)=>(Math.floor(L/2)+Math.floor(s/3)&1)===0)],[kn.DATA_MASK_101,new Qn(kn.DATA_MASK_101,(L,s)=>L*s%6===0)],[kn.DATA_MASK_110,new Qn(kn.DATA_MASK_110,(L,s)=>L*s%6<3)],[kn.DATA_MASK_111,new Qn(kn.DATA_MASK_111,(L,s)=>(L+s+L*s%3&1)===0)]]);class e0{constructor(s){const o=s.getHeight();if(o<21||(o&3)!==1)throw new K;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let h=0;h<6;h++)s=this.copyBit(h,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let h=5;h>=0;h--)s=this.copyBit(8,h,s);const o=this.bitMatrix.getHeight();let c=0;const d=o-7;for(let h=o-1;h>=d;h--)c=this.copyBit(8,h,c);for(let h=o-8;h<o;h++)c=this.copyBit(h,8,c);if(this.parsedFormatInfo=Zn.decodeFormatInformation(s,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new K}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),o=Math.floor((s-17)/4);if(o<=6)return Ze.getVersionForNumber(o);let c=0;const d=s-11;for(let p=5;p>=0;p--)for(let w=s-9;w>=d;w--)c=this.copyBit(w,p,c);let h=Ze.decodeVersionInformation(c);if(h!==null&&h.getDimensionForVersion()===s)return this.parsedVersion=h,h;c=0;for(let p=5;p>=0;p--)for(let w=s-9;w>=d;w--)c=this.copyBit(p,w,c);if(h=Ze.decodeVersionInformation(c),h!==null&&h.getDimensionForVersion()===s)return this.parsedVersion=h,h;throw new K}copyBit(s,o,c){return(this.isMirror?this.bitMatrix.get(o,s):this.bitMatrix.get(s,o))?c<<1|1:c<<1}readCodewords(){const s=this.readFormatInformation(),o=this.readVersion(),c=Qn.values.get(s.getDataMask()),d=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,d);const h=o.buildFunctionPattern();let p=!0;const w=new Uint8Array(o.getTotalCodewords());let S=0,_=0,I=0;for(let k=d-1;k>0;k-=2){k===6&&k--;for(let P=0;P<d;P++){const $=p?d-1-P:P;for(let Z=0;Z<2;Z++)h.get(k-Z,$)||(I++,_<<=1,this.bitMatrix.get(k-Z,$)&&(_|=1),I===8&&(w[S++]=_,I=0,_=0))}p=!p}if(S!==o.getTotalCodewords())throw new K;return w}remask(){if(this.parsedFormatInfo===null)return;const s=Qn.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,o)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let o=0,c=s.getWidth();o<c;o++)for(let d=o+1,h=s.getHeight();d<h;d++)s.get(o,d)!==s.get(d,o)&&(s.flip(d,o),s.flip(o,d))}}class gl{constructor(s,o){this.numDataCodewords=s,this.codewords=o}static getDataBlocks(s,o,c){if(s.length!==o.getTotalCodewords())throw new A;const d=o.getECBlocksForLevel(c);let h=0;const p=d.getECBlocks();for(const Z of p)h+=Z.getCount();const w=new Array(h);let S=0;for(const Z of p)for(let ee=0;ee<Z.getCount();ee++){const ue=Z.getDataCodewords(),pe=d.getECCodewordsPerBlock()+ue;w[S++]=new gl(ue,new Uint8Array(pe))}const _=w[0].codewords.length;let I=w.length-1;for(;I>=0&&w[I].codewords.length!==_;)I--;I++;const k=_-d.getECCodewordsPerBlock();let P=0;for(let Z=0;Z<k;Z++)for(let ee=0;ee<S;ee++)w[ee].codewords[Z]=s[P++];for(let Z=I;Z<S;Z++)w[Z].codewords[k]=s[P++];const $=w[0].codewords.length;for(let Z=k;Z<$;Z++)for(let ee=0;ee<S;ee++){const ue=ee<I?Z:Z+1;w[ee].codewords[ue]=s[P++]}return w}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ii;(function(L){L[L.TERMINATOR=0]="TERMINATOR",L[L.NUMERIC=1]="NUMERIC",L[L.ALPHANUMERIC=2]="ALPHANUMERIC",L[L.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",L[L.BYTE=4]="BYTE",L[L.ECI=5]="ECI",L[L.KANJI=6]="KANJI",L[L.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",L[L.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",L[L.HANZI=9]="HANZI"})(Ii||(Ii={}));class Qe{constructor(s,o,c,d){this.value=s,this.stringValue=o,this.characterCountBitsForVersions=c,this.bits=d,Qe.FOR_BITS.set(d,this),Qe.FOR_VALUE.set(s,this)}static forBits(s){const o=Qe.FOR_BITS.get(s);if(o===void 0)throw new A;return o}getCharacterCountBits(s){const o=s.getVersionNumber();let c;return o<=9?c=0:o<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof Qe))return!1;const o=s;return this.value===o.value}toString(){return this.stringValue}}Qe.FOR_BITS=new Map,Qe.FOR_VALUE=new Map,Qe.TERMINATOR=new Qe(Ii.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Qe.NUMERIC=new Qe(Ii.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Qe.ALPHANUMERIC=new Qe(Ii.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Qe.STRUCTURED_APPEND=new Qe(Ii.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Qe.BYTE=new Qe(Ii.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Qe.ECI=new Qe(Ii.ECI,"ECI",Int32Array.from([0,0,0]),7),Qe.KANJI=new Qe(Ii.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Qe.FNC1_FIRST_POSITION=new Qe(Ii.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Qe.FNC1_SECOND_POSITION=new Qe(Ii.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Qe.HANZI=new Qe(Ii.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class mn{static decode(s,o,c,d){const h=new wi(s);let p=new he;const w=new Array;let S=-1,_=-1;try{let I=null,k=!1,P;do{if(h.available()<4)P=Qe.TERMINATOR;else{const $=h.readBits(4);P=Qe.forBits($)}switch(P){case Qe.TERMINATOR:break;case Qe.FNC1_FIRST_POSITION:case Qe.FNC1_SECOND_POSITION:k=!0;break;case Qe.STRUCTURED_APPEND:if(h.available()<16)throw new K;S=h.readBits(8),_=h.readBits(8);break;case Qe.ECI:const $=mn.parseECIValue(h);if(I=Q.getCharacterSetECIByValue($),I===null)throw new K;break;case Qe.HANZI:const Z=h.readBits(4),ee=h.readBits(P.getCharacterCountBits(o));Z===mn.GB2312_SUBSET&&mn.decodeHanziSegment(h,p,ee);break;default:const ue=h.readBits(P.getCharacterCountBits(o));switch(P){case Qe.NUMERIC:mn.decodeNumericSegment(h,p,ue);break;case Qe.ALPHANUMERIC:mn.decodeAlphanumericSegment(h,p,ue,k);break;case Qe.BYTE:mn.decodeByteSegment(h,p,ue,I,w,d);break;case Qe.KANJI:mn.decodeKanjiSegment(h,p,ue);break;default:throw new K}break}}while(P!==Qe.TERMINATOR)}catch{throw new K}return new Mt(s,p.toString(),w.length===0?null:w,c===null?null:c.toString(),S,_)}static decodeHanziSegment(s,o,c){if(c*13>s.available())throw new K;const d=new Uint8Array(2*c);let h=0;for(;c>0;){const p=s.readBits(13);let w=p/96<<8&4294967295|p%96;w<959?w+=41377:w+=42657,d[h]=w>>8&255,d[h+1]=w&255,h+=2,c--}try{o.append(je.decode(d,_e.GB2312))}catch(p){throw new K(p)}}static decodeKanjiSegment(s,o,c){if(c*13>s.available())throw new K;const d=new Uint8Array(2*c);let h=0;for(;c>0;){const p=s.readBits(13);let w=p/192<<8&4294967295|p%192;w<7936?w+=33088:w+=49472,d[h]=w>>8,d[h+1]=w,h+=2,c--}try{o.append(je.decode(d,_e.SHIFT_JIS))}catch(p){throw new K(p)}}static decodeByteSegment(s,o,c,d,h,p){if(8*c>s.available())throw new K;const w=new Uint8Array(c);for(let _=0;_<c;_++)w[_]=s.readBits(8);let S;d===null?S=_e.guessEncoding(w,p):S=d.getName();try{o.append(je.decode(w,S))}catch(_){throw new K(_)}h.push(w)}static toAlphaNumericChar(s){if(s>=mn.ALPHANUMERIC_CHARS.length)throw new K;return mn.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,o,c,d){const h=o.length();for(;c>1;){if(s.available()<11)throw new K;const p=s.readBits(11);o.append(mn.toAlphaNumericChar(Math.floor(p/45))),o.append(mn.toAlphaNumericChar(p%45)),c-=2}if(c===1){if(s.available()<6)throw new K;o.append(mn.toAlphaNumericChar(s.readBits(6)))}if(d)for(let p=h;p<o.length();p++)o.charAt(p)==="%"&&(p<o.length()-1&&o.charAt(p+1)==="%"?o.deleteCharAt(p+1):o.setCharAt(p,""))}static decodeNumericSegment(s,o,c){for(;c>=3;){if(s.available()<10)throw new K;const d=s.readBits(10);if(d>=1e3)throw new K;o.append(mn.toAlphaNumericChar(Math.floor(d/100))),o.append(mn.toAlphaNumericChar(Math.floor(d/10)%10)),o.append(mn.toAlphaNumericChar(d%10)),c-=3}if(c===2){if(s.available()<7)throw new K;const d=s.readBits(7);if(d>=100)throw new K;o.append(mn.toAlphaNumericChar(Math.floor(d/10))),o.append(mn.toAlphaNumericChar(d%10))}else if(c===1){if(s.available()<4)throw new K;const d=s.readBits(4);if(d>=10)throw new K;o.append(mn.toAlphaNumericChar(d))}}static parseECIValue(s){const o=s.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){const c=s.readBits(8);return(o&63)<<8&4294967295|c}if((o&224)===192){const c=s.readBits(16);return(o&31)<<16&4294967295|c}throw new K}}mn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",mn.GB2312_SUBSET=1;class Bf{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const o=s[0];s[0]=s[2],s[2]=o}}class ml{constructor(){this.rsDecoder=new xt(Be.QR_CODE_FIELD_256)}decodeBooleanArray(s,o){return this.decodeBitMatrix(Ue.parseFromBooleanArray(s),o)}decodeBitMatrix(s,o){const c=new e0(s);let d=null;try{return this.decodeBitMatrixParser(c,o)}catch(h){d=h}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const h=this.decodeBitMatrixParser(c,o);return h.setOther(new Bf(!0)),h}catch(h){throw d!==null?d:h}}decodeBitMatrixParser(s,o){const c=s.readVersion(),d=s.readFormatInformation().getErrorCorrectionLevel(),h=s.readCodewords(),p=gl.getDataBlocks(h,c,d);let w=0;for(const I of p)w+=I.getNumDataCodewords();const S=new Uint8Array(w);let _=0;for(const I of p){const k=I.getCodewords(),P=I.getNumDataCodewords();this.correctErrors(k,P);for(let $=0;$<P;$++)S[_++]=k[$]}return mn.decode(S,c,d,o)}correctErrors(s,o){const c=new Int32Array(s);try{this.rsDecoder.decode(c,s.length-o)}catch{throw new O}for(let d=0;d<o;d++)s[d]=c[d]}}class ho extends Re{constructor(s,o,c){super(s,o),this.estimatedModuleSize=c}aboutEquals(s,o,c){if(Math.abs(o-this.getY())<=s&&Math.abs(c-this.getX())<=s){const d=Math.abs(s-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(s,o,c){const d=(this.getX()+o)/2,h=(this.getY()+s)/2,p=(this.estimatedModuleSize+c)/2;return new ho(d,h,p)}}class ra{constructor(s,o,c,d,h,p,w){this.image=s,this.startX=o,this.startY=c,this.width=d,this.height=h,this.moduleSize=p,this.resultPointCallback=w,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,o=this.height,c=this.width,d=s+c,h=this.startY+o/2,p=new Int32Array(3),w=this.image;for(let S=0;S<o;S++){const _=h+((S&1)===0?Math.floor((S+1)/2):-Math.floor((S+1)/2));p[0]=0,p[1]=0,p[2]=0;let I=s;for(;I<d&&!w.get(I,_);)I++;let k=0;for(;I<d;){if(w.get(I,_))if(k===1)p[1]++;else if(k===2){if(this.foundPatternCross(p)){const P=this.handlePossibleCenter(p,_,I);if(P!==null)return P}p[0]=p[2],p[1]=1,p[2]=0,k=1}else p[++k]++;else k===1&&k++,p[k]++;I++}if(this.foundPatternCross(p)){const P=this.handlePossibleCenter(p,_,d);if(P!==null)return P}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ie}static centerFromEnd(s,o){return o-s[2]-s[1]/2}foundPatternCross(s){const o=this.moduleSize,c=o/2;for(let d=0;d<3;d++)if(Math.abs(o-s[d])>=c)return!1;return!0}crossCheckVertical(s,o,c,d){const h=this.image,p=h.getHeight(),w=this.crossCheckStateCount;w[0]=0,w[1]=0,w[2]=0;let S=s;for(;S>=0&&h.get(o,S)&&w[1]<=c;)w[1]++,S--;if(S<0||w[1]>c)return NaN;for(;S>=0&&!h.get(o,S)&&w[0]<=c;)w[0]++,S--;if(w[0]>c)return NaN;for(S=s+1;S<p&&h.get(o,S)&&w[1]<=c;)w[1]++,S++;if(S===p||w[1]>c)return NaN;for(;S<p&&!h.get(o,S)&&w[2]<=c;)w[2]++,S++;if(w[2]>c)return NaN;const _=w[0]+w[1]+w[2];return 5*Math.abs(_-d)>=2*d?NaN:this.foundPatternCross(w)?ra.centerFromEnd(w,S):NaN}handlePossibleCenter(s,o,c){const d=s[0]+s[1]+s[2],h=ra.centerFromEnd(s,c),p=this.crossCheckVertical(o,h,2*s[1],d);if(!isNaN(p)){const w=(s[0]+s[1]+s[2])/3;for(const _ of this.possibleCenters)if(_.aboutEquals(w,p,h))return _.combineEstimate(p,h,w);const S=new ho(h,p,w);this.possibleCenters.push(S),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(S)}return null}}class Qs extends Re{constructor(s,o,c,d){super(s,o),this.estimatedModuleSize=c,this.count=d,d===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,o,c){if(Math.abs(o-this.getY())<=s&&Math.abs(c-this.getX())<=s){const d=Math.abs(s-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(s,o,c){const d=this.count+1,h=(this.count*this.getX()+o)/d,p=(this.count*this.getY()+s)/d,w=(this.count*this.estimatedModuleSize+c)/d;return new Qs(h,p,w,d)}}class aa{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class jn{constructor(s,o){this.image=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const o=s!=null&&s.get(ne.TRY_HARDER)!==void 0,c=s!=null&&s.get(ne.PURE_BARCODE)!==void 0,d=this.image,h=d.getHeight(),p=d.getWidth();let w=Math.floor(3*h/(4*jn.MAX_MODULES));(w<jn.MIN_SKIP||o)&&(w=jn.MIN_SKIP);let S=!1;const _=new Int32Array(5);for(let k=w-1;k<h&&!S;k+=w){_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0;let P=0;for(let $=0;$<p;$++)if(d.get($,k))(P&1)===1&&P++,_[P]++;else if((P&1)===0)if(P===4)if(jn.foundPatternCross(_)){if(this.handlePossibleCenter(_,k,$,c)===!0)if(w=2,this.hasSkipped===!0)S=this.haveMultiplyConfirmedCenters();else{const ee=this.findRowSkip();ee>_[2]&&(k+=ee-_[2]-w,$=p-1)}else{_[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,P=3;continue}P=0,_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0}else _[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,P=3;else _[++P]++;else _[P]++;jn.foundPatternCross(_)&&this.handlePossibleCenter(_,k,p,c)===!0&&(w=_[0],this.hasSkipped&&(S=this.haveMultiplyConfirmedCenters()))}const I=this.selectBestPatterns();return Re.orderBestPatterns(I),new aa(I)}static centerFromEnd(s,o){return o-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let o=0;for(let h=0;h<5;h++){const p=s[h];if(p===0)return!1;o+=p}if(o<7)return!1;const c=o/7,d=c/2;return Math.abs(c-s[0])<d&&Math.abs(c-s[1])<d&&Math.abs(3*c-s[2])<3*d&&Math.abs(c-s[3])<d&&Math.abs(c-s[4])<d}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,o,c,d){const h=this.getCrossCheckStateCount();let p=0;const w=this.image;for(;s>=p&&o>=p&&w.get(o-p,s-p);)h[2]++,p++;if(s<p||o<p)return!1;for(;s>=p&&o>=p&&!w.get(o-p,s-p)&&h[1]<=c;)h[1]++,p++;if(s<p||o<p||h[1]>c)return!1;for(;s>=p&&o>=p&&w.get(o-p,s-p)&&h[0]<=c;)h[0]++,p++;if(h[0]>c)return!1;const S=w.getHeight(),_=w.getWidth();for(p=1;s+p<S&&o+p<_&&w.get(o+p,s+p);)h[2]++,p++;if(s+p>=S||o+p>=_)return!1;for(;s+p<S&&o+p<_&&!w.get(o+p,s+p)&&h[3]<c;)h[3]++,p++;if(s+p>=S||o+p>=_||h[3]>=c)return!1;for(;s+p<S&&o+p<_&&w.get(o+p,s+p)&&h[4]<c;)h[4]++,p++;if(h[4]>=c)return!1;const I=h[0]+h[1]+h[2]+h[3]+h[4];return Math.abs(I-d)<2*d&&jn.foundPatternCross(h)}crossCheckVertical(s,o,c,d){const h=this.image,p=h.getHeight(),w=this.getCrossCheckStateCount();let S=s;for(;S>=0&&h.get(o,S);)w[2]++,S--;if(S<0)return NaN;for(;S>=0&&!h.get(o,S)&&w[1]<=c;)w[1]++,S--;if(S<0||w[1]>c)return NaN;for(;S>=0&&h.get(o,S)&&w[0]<=c;)w[0]++,S--;if(w[0]>c)return NaN;for(S=s+1;S<p&&h.get(o,S);)w[2]++,S++;if(S===p)return NaN;for(;S<p&&!h.get(o,S)&&w[3]<c;)w[3]++,S++;if(S===p||w[3]>=c)return NaN;for(;S<p&&h.get(o,S)&&w[4]<c;)w[4]++,S++;if(w[4]>=c)return NaN;const _=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(_-d)>=2*d?NaN:jn.foundPatternCross(w)?jn.centerFromEnd(w,S):NaN}crossCheckHorizontal(s,o,c,d){const h=this.image,p=h.getWidth(),w=this.getCrossCheckStateCount();let S=s;for(;S>=0&&h.get(S,o);)w[2]++,S--;if(S<0)return NaN;for(;S>=0&&!h.get(S,o)&&w[1]<=c;)w[1]++,S--;if(S<0||w[1]>c)return NaN;for(;S>=0&&h.get(S,o)&&w[0]<=c;)w[0]++,S--;if(w[0]>c)return NaN;for(S=s+1;S<p&&h.get(S,o);)w[2]++,S++;if(S===p)return NaN;for(;S<p&&!h.get(S,o)&&w[3]<c;)w[3]++,S++;if(S===p||w[3]>=c)return NaN;for(;S<p&&h.get(S,o)&&w[4]<c;)w[4]++,S++;if(w[4]>=c)return NaN;const _=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(_-d)>=d?NaN:jn.foundPatternCross(w)?jn.centerFromEnd(w,S):NaN}handlePossibleCenter(s,o,c,d){const h=s[0]+s[1]+s[2]+s[3]+s[4];let p=jn.centerFromEnd(s,c),w=this.crossCheckVertical(o,Math.floor(p),s[2],h);if(!isNaN(w)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(w),s[2],h),!isNaN(p)&&(!d||this.crossCheckDiagonal(Math.floor(w),Math.floor(p),s[2],h)))){const S=h/7;let _=!1;const I=this.possibleCenters;for(let k=0,P=I.length;k<P;k++){const $=I[k];if($.aboutEquals(S,w,p)){I[k]=$.combineEstimate(w,p,S),_=!0;break}}if(!_){const k=new Qs(p,w,S);I.push(k),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(k)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const c of this.possibleCenters)if(c.getCount()>=jn.CENTER_QUORUM)if(o==null)o=c;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-c.getX())-Math.abs(o.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,o=0;const c=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=jn.CENTER_QUORUM&&(s++,o+=p.getEstimatedModuleSize());if(s<3)return!1;const d=o/c;let h=0;for(const p of this.possibleCenters)h+=Math.abs(p.getEstimatedModuleSize()-d);return h<=.05*o}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new ie;const o=this.possibleCenters;let c;if(s>3){let d=0,h=0;for(const S of this.possibleCenters){const _=S.getEstimatedModuleSize();d+=_,h+=_*_}c=d/s;let p=Math.sqrt(h/s-c*c);o.sort((S,_)=>{const I=Math.abs(_.getEstimatedModuleSize()-c),k=Math.abs(S.getEstimatedModuleSize()-c);return I<k?-1:I>k?1:0});const w=Math.max(.2*c,p);for(let S=0;S<o.length&&o.length>3;S++){const _=o[S];Math.abs(_.getEstimatedModuleSize()-c)>w&&(o.splice(S,1),S--)}}if(o.length>3){let d=0;for(const h of o)d+=h.getEstimatedModuleSize();c=d/o.length,o.sort((h,p)=>{if(p.getCount()===h.getCount()){const w=Math.abs(p.getEstimatedModuleSize()-c),S=Math.abs(h.getEstimatedModuleSize()-c);return w<S?1:w>S?-1:0}else return p.getCount()-h.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}jn.CENTER_QUORUM=2,jn.MIN_SKIP=3,jn.MAX_MODULES=57;class Cr{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(ne.NEED_RESULT_POINT_CALLBACK);const c=new jn(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(c)}processFinderPatternInfo(s){const o=s.getTopLeft(),c=s.getTopRight(),d=s.getBottomLeft(),h=this.calculateModuleSize(o,c,d);if(h<1)throw new ie("No pattern found in proccess finder.");const p=Cr.computeDimension(o,c,d,h),w=Ze.getProvisionalVersionForDimension(p),S=w.getDimensionForVersion()-7;let _=null;if(w.getAlignmentPatternCenters().length>0){const $=c.getX()-o.getX()+d.getX(),Z=c.getY()-o.getY()+d.getY(),ee=1-3/S,ue=Math.floor(o.getX()+ee*($-o.getX())),pe=Math.floor(o.getY()+ee*(Z-o.getY()));for(let Me=4;Me<=16;Me<<=1)try{_=this.findAlignmentInRegion(h,ue,pe,Me);break}catch(ke){if(!(ke instanceof ie))throw ke}}const I=Cr.createTransform(o,c,d,_,p),k=Cr.sampleGrid(this.image,I,p);let P;return _===null?P=[d,o,c]:P=[d,o,c,_],new et(k,P)}static createTransform(s,o,c,d,h){const p=h-3.5;let w,S,_,I;return d!==null?(w=d.getX(),S=d.getY(),_=p-3,I=_):(w=o.getX()-s.getX()+c.getX(),S=o.getY()-s.getY()+c.getY(),_=p,I=p),$t.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,_,I,3.5,p,s.getX(),s.getY(),o.getX(),o.getY(),w,S,c.getX(),c.getY())}static sampleGrid(s,o,c){return Xe.getInstance().sampleGridWithTransform(s,c,c,o)}static computeDimension(s,o,c,d){const h=mt.round(Re.distance(s,o)/d),p=mt.round(Re.distance(s,c)/d);let w=Math.floor((h+p)/2)+7;switch(w&3){case 0:w++;break;case 2:w--;break;case 3:throw new ie("Dimensions could be not found.")}return w}calculateModuleSize(s,o,c){return(this.calculateModuleSizeOneWay(s,o)+this.calculateModuleSizeOneWay(s,c))/2}calculateModuleSizeOneWay(s,o){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(o.getX()),Math.floor(o.getY())),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(c)?d/7:isNaN(d)?c/7:(c+d)/14}sizeOfBlackWhiteBlackRunBothWays(s,o,c,d){let h=this.sizeOfBlackWhiteBlackRun(s,o,c,d),p=1,w=s-(c-s);w<0?(p=s/(s-w),w=0):w>=this.image.getWidth()&&(p=(this.image.getWidth()-1-s)/(w-s),w=this.image.getWidth()-1);let S=Math.floor(o-(d-o)*p);return p=1,S<0?(p=o/(o-S),S=0):S>=this.image.getHeight()&&(p=(this.image.getHeight()-1-o)/(S-o),S=this.image.getHeight()-1),w=Math.floor(s+(w-s)*p),h+=this.sizeOfBlackWhiteBlackRun(s,o,w,S),h-1}sizeOfBlackWhiteBlackRun(s,o,c,d){const h=Math.abs(d-o)>Math.abs(c-s);if(h){let $=s;s=o,o=$,$=c,c=d,d=$}const p=Math.abs(c-s),w=Math.abs(d-o);let S=-p/2;const _=s<c?1:-1,I=o<d?1:-1;let k=0;const P=c+_;for(let $=s,Z=o;$!==P;$+=_){const ee=h?Z:$,ue=h?$:Z;if(k===1===this.image.get(ee,ue)){if(k===2)return mt.distance($,Z,s,o);k++}if(S+=w,S>0){if(Z===d)break;Z+=I,S-=p}}return k===2?mt.distance(c+_,d,s,o):NaN}findAlignmentInRegion(s,o,c,d){const h=Math.floor(d*s),p=Math.max(0,o-h),w=Math.min(this.image.getWidth()-1,o+h);if(w-p<s*3)throw new ie("Alignment top exceeds estimated module size.");const S=Math.max(0,c-h),_=Math.min(this.image.getHeight()-1,c+h);if(_-S<s*3)throw new ie("Alignment bottom exceeds estimated module size.");return new ra(this.image,p,S,w-p,_-S,s,this.resultPointCallback).find()}}class Ms{constructor(){this.decoder=new ml}getDecoder(){return this.decoder}decode(s,o){let c,d;if(o!=null&&o.get(ne.PURE_BARCODE)!==void 0){const S=Ms.extractPureBits(s.getBlackMatrix());c=this.decoder.decodeBitMatrix(S,o),d=Ms.NO_POINTS}else{const S=new Cr(s.getBlackMatrix()).detect(o);c=this.decoder.decodeBitMatrix(S.getBits(),o),d=S.getPoints()}c.getOther()instanceof Bf&&c.getOther().applyMirroredCorrection(d);const h=new Ne(c.getText(),c.getRawBytes(),void 0,d,be.QR_CODE,void 0),p=c.getByteSegments();p!==null&&h.putMetadata(Ge.BYTE_SEGMENTS,p);const w=c.getECLevel();return w!==null&&h.putMetadata(Ge.ERROR_CORRECTION_LEVEL,w),c.hasStructuredAppend()&&(h.putMetadata(Ge.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),h.putMetadata(Ge.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),h}reset(){}static extractPureBits(s){const o=s.getTopLeftOnBit(),c=s.getBottomRightOnBit();if(o===null||c===null)throw new ie;const d=this.moduleSize(o,s);let h=o[1],p=c[1],w=o[0],S=c[0];if(w>=S||h>=p)throw new ie;if(p-h!==S-w&&(S=w+(p-h),S>=s.getWidth()))throw new ie;const _=Math.round((S-w+1)/d),I=Math.round((p-h+1)/d);if(_<=0||I<=0)throw new ie;if(I!==_)throw new ie;const k=Math.floor(d/2);h+=k,w+=k;const P=w+Math.floor((_-1)*d)-S;if(P>0){if(P>k)throw new ie;w-=P}const $=h+Math.floor((I-1)*d)-p;if($>0){if($>k)throw new ie;h-=$}const Z=new Ue(_,I);for(let ee=0;ee<I;ee++){const ue=h+Math.floor(ee*d);for(let pe=0;pe<_;pe++)s.get(w+Math.floor(pe*d),ue)&&Z.set(pe,ee)}return Z}static moduleSize(s,o){const c=o.getHeight(),d=o.getWidth();let h=s[0],p=s[1],w=!0,S=0;for(;h<d&&p<c;){if(w!==o.get(h,p)){if(++S===5)break;w=!w}h++,p++}if(h===d||p===c)throw new ie;return(h-s[0])/7}}Ms.NO_POINTS=new Array;class tt{PDF417Common(){}static getBitCountSum(s){return mt.sum(s)}static toIntArray(s){if(s==null||!s.length)return tt.EMPTY_INT_ARRAY;const o=new Int32Array(s.length);let c=0;for(const d of s)o[c++]=d;return o}static getCodeword(s){const o=q.binarySearch(tt.SYMBOL_TABLE,s&262143);return o<0?-1:(tt.CODEWORD_TABLE[o]-1)%tt.NUMBER_OF_CODEWORDS}}tt.NUMBER_OF_CODEWORDS=929,tt.MAX_CODEWORDS_IN_BARCODE=tt.NUMBER_OF_CODEWORDS-1,tt.MIN_ROWS_IN_BARCODE=3,tt.MAX_ROWS_IN_BARCODE=90,tt.MODULES_IN_CODEWORD=17,tt.MODULES_IN_STOP_PATTERN=18,tt.BARS_IN_MODULE=8,tt.EMPTY_INT_ARRAY=new Int32Array([]),tt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),tt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ds{constructor(s,o){this.bits=s,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class bt{static detectMultiple(s,o,c){let d=s.getBlackMatrix(),h=bt.detect(c,d);return h.length||(d=d.clone(),d.rotate180(),h=bt.detect(c,d)),new Ds(d,h)}static detect(s,o){const c=new Array;let d=0,h=0,p=!1;for(;d<o.getHeight();){const w=bt.findVertices(o,d,h);if(w[0]==null&&w[3]==null){if(!p)break;p=!1,h=0;for(const S of c)S[1]!=null&&(d=Math.trunc(Math.max(d,S[1].getY()))),S[3]!=null&&(d=Math.max(d,Math.trunc(S[3].getY())));d+=bt.ROW_STEP;continue}if(p=!0,c.push(w),!s)break;w[2]!=null?(h=Math.trunc(w[2].getX()),d=Math.trunc(w[2].getY())):(h=Math.trunc(w[4].getX()),d=Math.trunc(w[4].getY()))}return c}static findVertices(s,o,c){const d=s.getHeight(),h=s.getWidth(),p=new Array(8);return bt.copyToResult(p,bt.findRowsWithPattern(s,d,h,o,c,bt.START_PATTERN),bt.INDEXES_START_PATTERN),p[4]!=null&&(c=Math.trunc(p[4].getX()),o=Math.trunc(p[4].getY())),bt.copyToResult(p,bt.findRowsWithPattern(s,d,h,o,c,bt.STOP_PATTERN),bt.INDEXES_STOP_PATTERN),p}static copyToResult(s,o,c){for(let d=0;d<c.length;d++)s[c[d]]=o[d]}static findRowsWithPattern(s,o,c,d,h,p){const w=new Array(4);let S=!1;const _=new Int32Array(p.length);for(;d<o;d+=bt.ROW_STEP){let k=bt.findGuardPattern(s,h,d,c,!1,p,_);if(k!=null){for(;d>0;){const P=bt.findGuardPattern(s,h,--d,c,!1,p,_);if(P!=null)k=P;else{d++;break}}w[0]=new Re(k[0],d),w[1]=new Re(k[1],d),S=!0;break}}let I=d+1;if(S){let k=0,P=Int32Array.from([Math.trunc(w[0].getX()),Math.trunc(w[1].getX())]);for(;I<o;I++){const $=bt.findGuardPattern(s,P[0],I,c,!1,p,_);if($!=null&&Math.abs(P[0]-$[0])<bt.MAX_PATTERN_DRIFT&&Math.abs(P[1]-$[1])<bt.MAX_PATTERN_DRIFT)P=$,k=0;else{if(k>bt.SKIPPED_ROW_COUNT_MAX)break;k++}}I-=k+1,w[2]=new Re(P[0],I),w[3]=new Re(P[1],I)}return I-d<bt.BARCODE_MIN_HEIGHT&&q.fill(w,null),w}static findGuardPattern(s,o,c,d,h,p,w){q.fillWithin(w,0,w.length,0);let S=o,_=0;for(;s.get(S,c)&&S>0&&_++<bt.MAX_PIXEL_DRIFT;)S--;let I=S,k=0,P=p.length;for(let $=h;I<d;I++)if(s.get(I,c)!==$)w[k]++;else{if(k===P-1){if(bt.patternMatchVariance(w,p,bt.MAX_INDIVIDUAL_VARIANCE)<bt.MAX_AVG_VARIANCE)return new Int32Array([S,I]);S+=w[0]+w[1],j.arraycopy(w,2,w,0,k-1),w[k-1]=0,w[k]=0,k--}else k++;w[k]=1,$=!$}return k===P-1&&bt.patternMatchVariance(w,p,bt.MAX_INDIVIDUAL_VARIANCE)<bt.MAX_AVG_VARIANCE?new Int32Array([S,I-1]):null}static patternMatchVariance(s,o,c){let d=s.length,h=0,p=0;for(let _=0;_<d;_++)h+=s[_],p+=o[_];if(h<p)return 1/0;let w=h/p;c*=w;let S=0;for(let _=0;_<d;_++){let I=s[_],k=o[_]*w,P=I>k?I-k:k-I;if(P>c)return 1/0;S+=P}return S/h}}bt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),bt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),bt.MAX_AVG_VARIANCE=.42,bt.MAX_INDIVIDUAL_VARIANCE=.8,bt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),bt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),bt.MAX_PIXEL_DRIFT=3,bt.MAX_PATTERN_DRIFT=5,bt.SKIPPED_ROW_COUNT_MAX=25,bt.ROW_STEP=5,bt.BARCODE_MIN_HEIGHT=10;class Sn{constructor(s,o){if(o.length===0)throw new A;this.field=s;let c=o.length;if(c>1&&o[0]===0){let d=1;for(;d<c&&o[d]===0;)d++;d===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-d),j.arraycopy(o,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let d=0;for(let h of this.coefficients)d=this.field.add(d,h);return d}let o=this.coefficients[0],c=this.coefficients.length;for(let d=1;d<c;d++)o=this.field.add(this.field.multiply(s,o),this.coefficients[d]);return o}add(s){if(!this.field.equals(s.field))throw new A("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let o=this.coefficients,c=s.coefficients;if(o.length>c.length){let p=o;o=c,c=p}let d=new Int32Array(c.length),h=c.length-o.length;j.arraycopy(c,0,d,0,h);for(let p=h;p<c.length;p++)d[p]=this.field.add(o[p-h],c[p]);return new Sn(this.field,d)}subtract(s){if(!this.field.equals(s.field))throw new A("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof Sn?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new A("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new Sn(this.field,new Int32Array([0]));let o=this.coefficients,c=o.length,d=s.coefficients,h=d.length,p=new Int32Array(c+h-1);for(let w=0;w<c;w++){let S=o[w];for(let _=0;_<h;_++)p[w+_]=this.field.add(p[w+_],this.field.multiply(S,d[_]))}return new Sn(this.field,p)}negative(){let s=this.coefficients.length,o=new Int32Array(s);for(let c=0;c<s;c++)o[c]=this.field.subtract(0,this.coefficients[c]);return new Sn(this.field,o)}multiplyScalar(s){if(s===0)return new Sn(this.field,new Int32Array([0]));if(s===1)return this;let o=this.coefficients.length,c=new Int32Array(o);for(let d=0;d<o;d++)c[d]=this.field.multiply(this.coefficients[d],s);return new Sn(this.field,c)}multiplyByMonomial(s,o){if(s<0)throw new A;if(o===0)return new Sn(this.field,new Int32Array([0]));let c=this.coefficients.length,d=new Int32Array(c+s);for(let h=0;h<c;h++)d[h]=this.field.multiply(this.coefficients[h],o);return new Sn(this.field,d)}toString(){let s=new he;for(let o=this.getDegree();o>=0;o--){let c=this.getCoefficient(o);c!==0&&(c<0?(s.append(" - "),c=-c):s.length()>0&&s.append(" + "),(o===0||c!==1)&&s.append(c),o!==0&&(o===1?s.append("x"):(s.append("x^"),s.append(o))))}return s.toString()}}class Js{add(s,o){return(s+o)%this.modulus}subtract(s,o){return(this.modulus+s-o)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new A;return this.logTable[s]}inverse(s){if(s===0)throw new Fe;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,o){return s===0||o===0?0:this.expTable[(this.logTable[s]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class go extends Js{constructor(s,o){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let c=1;for(let d=0;d<s;d++)this.expTable[d]=c,c=c*o%s;for(let d=0;d<s-1;d++)this.logTable[this.expTable[d]]=d;this.zero=new Sn(this,new Int32Array([0])),this.one=new Sn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,o){if(s<0)throw new A;if(o===0)return this.zero;let c=new Int32Array(s+1);return c[0]=o,new Sn(this,c)}}go.PDF417_GF=new go(tt.NUMBER_OF_CODEWORDS,3);class mo{constructor(){this.field=go.PDF417_GF}decode(s,o,c){let d=new Sn(this.field,s),h=new Int32Array(o),p=!1;for(let Z=o;Z>0;Z--){let ee=d.evaluateAt(this.field.exp(Z));h[o-Z]=ee,ee!==0&&(p=!0)}if(!p)return 0;let w=this.field.getOne();if(c!=null)for(const Z of c){let ee=this.field.exp(s.length-1-Z),ue=new Sn(this.field,new Int32Array([this.field.subtract(0,ee),1]));w=w.multiply(ue)}let S=new Sn(this.field,h),_=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),S,o),I=_[0],k=_[1],P=this.findErrorLocations(I),$=this.findErrorMagnitudes(k,I,P);for(let Z=0;Z<P.length;Z++){let ee=s.length-1-this.field.log(P[Z]);if(ee<0)throw O.getChecksumInstance();s[ee]=this.field.subtract(s[ee],$[Z])}return P.length}runEuclideanAlgorithm(s,o,c){if(s.getDegree()<o.getDegree()){let P=s;s=o,o=P}let d=s,h=o,p=this.field.getZero(),w=this.field.getOne();for(;h.getDegree()>=Math.round(c/2);){let P=d,$=p;if(d=h,p=w,d.isZero())throw O.getChecksumInstance();h=P;let Z=this.field.getZero(),ee=d.getCoefficient(d.getDegree()),ue=this.field.inverse(ee);for(;h.getDegree()>=d.getDegree()&&!h.isZero();){let pe=h.getDegree()-d.getDegree(),Me=this.field.multiply(h.getCoefficient(h.getDegree()),ue);Z=Z.add(this.field.buildMonomial(pe,Me)),h=h.subtract(d.multiplyByMonomial(pe,Me))}w=Z.multiply(p).subtract($).negative()}let S=w.getCoefficient(0);if(S===0)throw O.getChecksumInstance();let _=this.field.inverse(S),I=w.multiply(_),k=h.multiply(_);return[I,k]}findErrorLocations(s){let o=s.getDegree(),c=new Int32Array(o),d=0;for(let h=1;h<this.field.getSize()&&d<o;h++)s.evaluateAt(h)===0&&(c[d]=this.field.inverse(h),d++);if(d!==o)throw O.getChecksumInstance();return c}findErrorMagnitudes(s,o,c){let d=o.getDegree(),h=new Int32Array(d);for(let _=1;_<=d;_++)h[d-_]=this.field.multiply(_,o.getCoefficient(_));let p=new Sn(this.field,h),w=c.length,S=new Int32Array(w);for(let _=0;_<w;_++){let I=this.field.inverse(c[_]),k=this.field.subtract(0,s.evaluateAt(I)),P=this.field.inverse(p.evaluateAt(I));S[_]=this.field.multiply(k,P)}return S}}class er{constructor(s,o,c,d,h){s instanceof er?this.constructor_2(s):this.constructor_1(s,o,c,d,h)}constructor_1(s,o,c,d,h){const p=o==null||c==null,w=d==null||h==null;if(p&&w)throw new ie;p?(o=new Re(0,d.getY()),c=new Re(0,h.getY())):w&&(d=new Re(s.getWidth()-1,o.getY()),h=new Re(s.getWidth()-1,c.getY())),this.image=s,this.topLeft=o,this.bottomLeft=c,this.topRight=d,this.bottomRight=h,this.minX=Math.trunc(Math.min(o.getX(),c.getX())),this.maxX=Math.trunc(Math.max(d.getX(),h.getX())),this.minY=Math.trunc(Math.min(o.getY(),d.getY())),this.maxY=Math.trunc(Math.max(c.getY(),h.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,o){return s==null?o:o==null?s:new er(s.image,s.topLeft,s.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(s,o,c){let d=this.topLeft,h=this.bottomLeft,p=this.topRight,w=this.bottomRight;if(s>0){let S=c?this.topLeft:this.topRight,_=Math.trunc(S.getY()-s);_<0&&(_=0);let I=new Re(S.getX(),_);c?d=I:p=I}if(o>0){let S=c?this.bottomLeft:this.bottomRight,_=Math.trunc(S.getY()+o);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);let I=new Re(S.getX(),_);c?h=I:w=I}return new er(this.image,d,h,p,w)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class pl{constructor(s,o,c,d){this.columnCount=s,this.errorCorrectionLevel=d,this.rowCountUpperPart=o,this.rowCountLowerPart=c,this.rowCount=o+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class tr{constructor(){this.buffer=""}static form(s,o){let c=-1;function d(p,w,S,_,I,k){if(p==="%%")return"%";if(o[++c]===void 0)return;p=_?parseInt(_.substr(1)):void 0;let P=I?parseInt(I.substr(1)):void 0,$;switch(k){case"s":$=o[c];break;case"c":$=o[c][0];break;case"f":$=parseFloat(o[c]).toFixed(p);break;case"p":$=parseFloat(o[c]).toPrecision(p);break;case"e":$=parseFloat(o[c]).toExponential(p);break;case"x":$=parseInt(o[c]).toString(P||16);break;case"d":$=parseFloat(parseInt(o[c],P||10).toPrecision(p)).toFixed(0);break}$=typeof $=="object"?JSON.stringify($):(+$).toString(P);let Z=parseInt(S),ee=S&&S[0]+""=="0"?"0":" ";for(;$.length<Z;)$=w!==void 0?$+ee:ee+$;return $}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(h,d)}format(s,...o){this.buffer+=tr.form(s,o)}toString(){return this.buffer}}class oa{constructor(s){this.boundingBox=new er(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let o=this.getCodeword(s);if(o!=null)return o;for(let c=1;c<oa.MAX_NEARBY_DISTANCE;c++){let d=this.imageRowToCodewordIndex(s)-c;if(d>=0&&(o=this.codewords[d],o!=null)||(d=this.imageRowToCodewordIndex(s)+c,d<this.codewords.length&&(o=this.codewords[d],o!=null)))return o}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,o){this.codewords[this.imageRowToCodewordIndex(s)]=o}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new tr;let o=0;for(const c of this.codewords){if(c==null){s.format("%3d:    |   %n",o++);continue}s.format("%3d: %3d|%3d%n",o++,c.getRowNumber(),c.getValue())}return s.toString()}}oa.MAX_NEARBY_DISTANCE=5;class zn{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let o=this.values.get(s);o==null&&(o=0),o++,this.values.set(s,o)}getValue(){let s=-1,o=new Array;for(const[c,d]of this.values.entries()){const h={getKey:()=>c,getValue:()=>d};h.getValue()>s?(s=h.getValue(),o=[],o.push(h.getKey())):h.getValue()===s&&o.push(h.getKey())}return tt.toIntArray(o)}getConfidence(s){return this.values.get(s)}}class nr extends oa{constructor(s,o){super(s),this._isLeft=o}setRowNumbers(){for(let s of this.getCodewords())s!=null&&s.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,s);let c=this.getBoundingBox(),d=this._isLeft?c.getTopLeft():c.getTopRight(),h=this._isLeft?c.getBottomLeft():c.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),w=this.imageRowToCodewordIndex(Math.trunc(h.getY())),S=-1,_=1,I=0;for(let k=p;k<w;k++){if(o[k]==null)continue;let P=o[k],$=P.getRowNumber()-S;if($===0)I++;else if($===1)_=Math.max(_,I),I=1,S=P.getRowNumber();else if($<0||P.getRowNumber()>=s.getRowCount()||$>k)o[k]=null;else{let Z;_>2?Z=(_-2)*$:Z=$;let ee=Z>=k;for(let ue=1;ue<=Z&&!ee;ue++)ee=o[k-ue]!=null;ee?o[k]=null:(S=P.getRowNumber(),I=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let o=new Int32Array(s.getRowCount());for(let c of this.getCodewords())if(c!=null){let d=c.getRowNumber();if(d>=o.length)continue;o[d]++}return o}adjustIncompleteIndicatorColumnRowNumbers(s){let o=this.getBoundingBox(),c=this._isLeft?o.getTopLeft():o.getTopRight(),d=this._isLeft?o.getBottomLeft():o.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),w=this.getCodewords(),S=-1;for(let _=h;_<p;_++){if(w[_]==null)continue;let I=w[_];I.setRowNumberAsRowIndicatorColumn();let k=I.getRowNumber()-S;k===0||(k===1?S=I.getRowNumber():I.getRowNumber()>=s.getRowCount()?w[_]=null:S=I.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),o=new zn,c=new zn,d=new zn,h=new zn;for(let w of s){if(w==null)continue;w.setRowNumberAsRowIndicatorColumn();let S=w.getValue()%30,_=w.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:c.setValue(S*3+1);break;case 1:h.setValue(S/3),d.setValue(S%3);break;case 2:o.setValue(S+1);break}}if(o.getValue().length===0||c.getValue().length===0||d.getValue().length===0||h.getValue().length===0||o.getValue()[0]<1||c.getValue()[0]+d.getValue()[0]<tt.MIN_ROWS_IN_BARCODE||c.getValue()[0]+d.getValue()[0]>tt.MAX_ROWS_IN_BARCODE)return null;let p=new pl(o.getValue()[0],c.getValue()[0],d.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(s,p),p}removeIncorrectCodewords(s,o){for(let c=0;c<s.length;c++){let d=s[c];if(s[c]==null)continue;let h=d.getValue()%30,p=d.getRowNumber();if(p>o.getRowCount()){s[c]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:h*3+1!==o.getRowCountUpperPart()&&(s[c]=null);break;case 1:(Math.trunc(h/3)!==o.getErrorCorrectionLevel()||h%3!==o.getRowCountLowerPart())&&(s[c]=null);break;case 2:h+1!==o.getColumnCount()&&(s[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ir{constructor(s,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=tt.MAX_CODEWORDS_IN_BARCODE,o;do o=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s!=null&&s.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let c=this.detectionResultColumns[o].getCodewords();for(let d=0;d<c.length;d++)c[d]!=null&&(c[d].hasValidRowNumber()||this.adjustRowNumbers(o,d,c))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<s.length;c++)if(s[c]!=null&&o[c]!=null&&s[c].getRowNumber()===o[c].getRowNumber())for(let d=1;d<=this.barcodeColumnCount;d++){let h=this.detectionResultColumns[d].getCodewords()[c];h!=null&&(h.setRowNumber(s[c].getRowNumber()),h.hasValidRowNumber()||(this.detectionResultColumns[d].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<o.length;c++){if(o[c]==null)continue;let d=o[c].getRowNumber(),h=0;for(let p=this.barcodeColumnCount+1;p>0&&h<this.ADJUST_ROW_NUMBER_SKIP;p--){let w=this.detectionResultColumns[p].getCodewords()[c];w!=null&&(h=ir.adjustRowNumberIfValid(d,h,w),w.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,o=this.detectionResultColumns[0].getCodewords();for(let c=0;c<o.length;c++){if(o[c]==null)continue;let d=o[c].getRowNumber(),h=0;for(let p=1;p<this.barcodeColumnCount+1&&h<this.ADJUST_ROW_NUMBER_SKIP;p++){let w=this.detectionResultColumns[p].getCodewords()[c];w!=null&&(h=ir.adjustRowNumberIfValid(d,h,w),w.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,o,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(s)?(c.setRowNumber(s),o=0):++o),o}adjustRowNumbers(s,o,c){if(!this.detectionResultColumns[s-1])return;let d=c[o],h=this.detectionResultColumns[s-1].getCodewords(),p=h;this.detectionResultColumns[s+1]!=null&&(p=this.detectionResultColumns[s+1].getCodewords());let w=new Array(14);w[2]=h[o],w[3]=p[o],o>0&&(w[0]=c[o-1],w[4]=h[o-1],w[5]=p[o-1]),o>1&&(w[8]=c[o-2],w[10]=h[o-2],w[11]=p[o-2]),o<c.length-1&&(w[1]=c[o+1],w[6]=h[o+1],w[7]=p[o+1]),o<c.length-2&&(w[9]=c[o+2],w[12]=h[o+2],w[13]=p[o+2]);for(let S of w)if(ir.adjustRowNumber(d,S))return}static adjustRowNumber(s,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===s.getBucket()?(s.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,o){this.detectionResultColumns[s]=o}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new tr;for(let c=0;c<s.getCodewords().length;c++){o.format("CW %3d:",c);for(let d=0;d<this.barcodeColumnCount+2;d++){if(this.detectionResultColumns[d]==null){o.format("    |   ");continue}let h=this.detectionResultColumns[d].getCodewords()[c];if(h==null){o.format("    |   ");continue}o.format(" %3d|%3d",h.getRowNumber(),h.getValue())}o.format("%n")}return o.toString()}}class Ls{constructor(s,o,c,d){this.rowNumber=Ls.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(o),this.bucket=Math.trunc(c),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==Ls.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}Ls.BARCODE_ROW_UNKNOWN=-1;class vi{static initialize(){for(let s=0;s<tt.SYMBOL_TABLE.length;s++){let o=tt.SYMBOL_TABLE[s],c=o&1;for(let d=0;d<tt.BARS_IN_MODULE;d++){let h=0;for(;(o&1)===c;)h+=1,o>>=1;c=o&1,vi.RATIOS_TABLE[s]||(vi.RATIOS_TABLE[s]=new Array(tt.BARS_IN_MODULE)),vi.RATIOS_TABLE[s][tt.BARS_IN_MODULE-d-1]=Math.fround(h/tt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let o=vi.getDecodedCodewordValue(vi.sampleBitCounts(s));return o!==-1?o:vi.getClosestDecodedValue(s)}static sampleBitCounts(s){let o=mt.sum(s),c=new Int32Array(tt.BARS_IN_MODULE),d=0,h=0;for(let p=0;p<tt.MODULES_IN_CODEWORD;p++){let w=o/(2*tt.MODULES_IN_CODEWORD)+p*o/tt.MODULES_IN_CODEWORD;h+s[d]<=w&&(h+=s[d],d++),c[d]++}return c}static getDecodedCodewordValue(s){let o=vi.getBitValue(s);return tt.getCodeword(o)===-1?-1:o}static getBitValue(s){let o=0;for(let c=0;c<s.length;c++)for(let d=0;d<s[c];d++)o=o<<1|(c%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(s){let o=mt.sum(s),c=new Array(tt.BARS_IN_MODULE);if(o>1)for(let p=0;p<c.length;p++)c[p]=Math.fround(s[p]/o);let d=Te.MAX_VALUE,h=-1;this.bSymbolTableReady||vi.initialize();for(let p=0;p<vi.RATIOS_TABLE.length;p++){let w=0,S=vi.RATIOS_TABLE[p];for(let _=0;_<tt.BARS_IN_MODULE;_++){let I=Math.fround(S[_]-c[_]);if(w+=Math.fround(I*I),w>=d)break}w<d&&(d=w,h=tt.SYMBOL_TABLE[p])}return h}}vi.bSymbolTableReady=!1,vi.RATIOS_TABLE=new Array(tt.SYMBOL_TABLE.length).map(L=>new Array(tt.BARS_IN_MODULE));class xl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class yl{static parseLong(s,o=void 0){return parseInt(s,o)}}class la extends x{}la.kind="NullPointerException";class bl{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,o,c){if(s==null)throw new la;if(o<0||o>s.length||c<0||o+c>s.length||o+c<0)throw new U;if(c===0)return;for(let d=0;d<c;d++)this.write(s[o+d])}flush(){}close(){}}class Pf extends x{}class t0 extends bl{constructor(s=32){if(super(),this.count=0,s<0)throw new A("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let c=this.buf.length<<1;if(c-s<0&&(c=s),c<0){if(s<0)throw new Pf;c=B.MAX_VALUE}this.buf=q.copyOfUint8Array(this.buf,c)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,o,c){if(o<0||o>s.length||c<0||o+c-s.length>0)throw new U;this.ensureCapacity(this.count+c),j.arraycopy(s,o,this.buf,this.count,c),this.count+=c}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return q.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var Zt;(function(L){L[L.ALPHA=0]="ALPHA",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.PUNCT=3]="PUNCT",L[L.ALPHA_SHIFT=4]="ALPHA_SHIFT",L[L.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Zt||(Zt={}));function Uf(){if(typeof window<"u")return window.BigInt||null;if(typeof $d<"u")return $d.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ca;function sr(L){if(typeof ca>"u"&&(ca=Uf()),ca===null)throw new Error("BigInt is not supported!");return ca(L)}function n0(){let L=[];L[0]=sr(1);let s=sr(900);L[1]=s;for(let o=2;o<16;o++)L[o]=L[o-1]*s;return L}class ye{static decode(s,o){let c=new he(""),d=Q.ISO8859_1;c.enableDecoding(d);let h=1,p=s[h++],w=new xl;for(;h<s[0];){switch(p){case ye.TEXT_COMPACTION_MODE_LATCH:h=ye.textCompaction(s,h,c);break;case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:h=ye.byteCompaction(p,s,d,h,c);break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h++]);break;case ye.NUMERIC_COMPACTION_MODE_LATCH:h=ye.numericCompaction(s,h,c);break;case ye.ECI_CHARSET:Q.getCharacterSetECIByValue(s[h++]);break;case ye.ECI_GENERAL_PURPOSE:h+=2;break;case ye.ECI_USER_DEFINED:h++;break;case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:h=ye.decodeMacroBlock(s,h,w);break;case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:throw new K;default:h--,h=ye.textCompaction(s,h,c);break}if(h<s.length)p=s[h++];else throw K.getFormatInstance()}if(c.length()===0)throw K.getFormatInstance();let S=new Mt(null,c.toString(),null,o);return S.setOther(w),S}static decodeMacroBlock(s,o,c){if(o+ye.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw K.getFormatInstance();let d=new Int32Array(ye.NUMBER_OF_SEQUENCE_CODEWORDS);for(let w=0;w<ye.NUMBER_OF_SEQUENCE_CODEWORDS;w++,o++)d[w]=s[o];c.setSegmentIndex(B.parseInt(ye.decodeBase900toBase10(d,ye.NUMBER_OF_SEQUENCE_CODEWORDS)));let h=new he;o=ye.textCompaction(s,o,h),c.setFileId(h.toString());let p=-1;for(s[o]===ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=o+1);o<s[0];)switch(s[o]){case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,s[o]){case ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let w=new he;o=ye.textCompaction(s,o+1,w),c.setFileName(w.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let S=new he;o=ye.textCompaction(s,o+1,S),c.setSender(S.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let _=new he;o=ye.textCompaction(s,o+1,_),c.setAddressee(_.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let I=new he;o=ye.numericCompaction(s,o+1,I),c.setSegmentCount(B.parseInt(I.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let k=new he;o=ye.numericCompaction(s,o+1,k),c.setTimestamp(yl.parseLong(k.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let P=new he;o=ye.numericCompaction(s,o+1,P),c.setChecksum(B.parseInt(P.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let $=new he;o=ye.numericCompaction(s,o+1,$),c.setFileSize(yl.parseLong($.toString()));break;default:throw K.getFormatInstance()}break;case ye.MACRO_PDF417_TERMINATOR:o++,c.setLastSegment(!0);break;default:throw K.getFormatInstance()}if(p!==-1){let w=o-p;c.isLastSegment()&&w--,c.setOptionalData(q.copyOfRange(s,p,p+w))}return o}static textCompaction(s,o,c){let d=new Int32Array((s[0]-o)*2),h=new Int32Array((s[0]-o)*2),p=0,w=!1;for(;o<s[0]&&!w;){let S=s[o++];if(S<ye.TEXT_COMPACTION_MODE_LATCH)d[p]=S/30,d[p+1]=S%30,p+=2;else switch(S){case ye.TEXT_COMPACTION_MODE_LATCH:d[p++]=ye.TEXT_COMPACTION_MODE_LATCH;break;case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:o--,w=!0;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d[p]=ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,S=s[o++],h[p]=S,p++;break}}return ye.decodeTextCompaction(d,h,p,c),o}static decodeTextCompaction(s,o,c,d){let h=Zt.ALPHA,p=Zt.ALPHA,w=0;for(;w<c;){let S=s[w],_="";switch(h){case Zt.ALPHA:if(S<26)_=String.fromCharCode(65+S);else switch(S){case 26:_=" ";break;case ye.LL:h=Zt.LOWER;break;case ye.ML:h=Zt.MIXED;break;case ye.PS:p=h,h=Zt.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(o[w]);break;case ye.TEXT_COMPACTION_MODE_LATCH:h=Zt.ALPHA;break}break;case Zt.LOWER:if(S<26)_=String.fromCharCode(97+S);else switch(S){case 26:_=" ";break;case ye.AS:p=h,h=Zt.ALPHA_SHIFT;break;case ye.ML:h=Zt.MIXED;break;case ye.PS:p=h,h=Zt.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(o[w]);break;case ye.TEXT_COMPACTION_MODE_LATCH:h=Zt.ALPHA;break}break;case Zt.MIXED:if(S<ye.PL)_=ye.MIXED_CHARS[S];else switch(S){case ye.PL:h=Zt.PUNCT;break;case 26:_=" ";break;case ye.LL:h=Zt.LOWER;break;case ye.AL:h=Zt.ALPHA;break;case ye.PS:p=h,h=Zt.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(o[w]);break;case ye.TEXT_COMPACTION_MODE_LATCH:h=Zt.ALPHA;break}break;case Zt.PUNCT:if(S<ye.PAL)_=ye.PUNCT_CHARS[S];else switch(S){case ye.PAL:h=Zt.ALPHA;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(o[w]);break;case ye.TEXT_COMPACTION_MODE_LATCH:h=Zt.ALPHA;break}break;case Zt.ALPHA_SHIFT:if(h=p,S<26)_=String.fromCharCode(65+S);else switch(S){case 26:_=" ";break;case ye.TEXT_COMPACTION_MODE_LATCH:h=Zt.ALPHA;break}break;case Zt.PUNCT_SHIFT:if(h=p,S<ye.PAL)_=ye.PUNCT_CHARS[S];else switch(S){case ye.PAL:h=Zt.ALPHA;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(o[w]);break;case ye.TEXT_COMPACTION_MODE_LATCH:h=Zt.ALPHA;break}break}_!==""&&d.append(_),w++}}static byteCompaction(s,o,c,d,h){let p=new t0,w=0,S=0,_=!1;switch(s){case ye.BYTE_COMPACTION_MODE_LATCH:let I=new Int32Array(6),k=o[d++];for(;d<o[0]&&!_;)switch(I[w++]=k,S=900*S+k,k=o[d++],k){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:d--,_=!0;break;default:if(w%5===0&&w>0){for(let P=0;P<6;++P)p.write(Number(sr(S)>>sr(8*(5-P))));S=0,w=0}break}d===o[0]&&k<ye.TEXT_COMPACTION_MODE_LATCH&&(I[w++]=k);for(let P=0;P<w;P++)p.write(I[P]);break;case ye.BYTE_COMPACTION_MODE_LATCH_6:for(;d<o[0]&&!_;){let P=o[d++];if(P<ye.TEXT_COMPACTION_MODE_LATCH)w++,S=900*S+P;else switch(P){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:d--,_=!0;break}if(w%5===0&&w>0){for(let $=0;$<6;++$)p.write(Number(sr(S)>>sr(8*(5-$))));S=0,w=0}}break}return h.append(je.decode(p.toByteArray(),c)),d}static numericCompaction(s,o,c){let d=0,h=!1,p=new Int32Array(ye.MAX_NUMERIC_CODEWORDS);for(;o<s[0]&&!h;){let w=s[o++];if(o===s[0]&&(h=!0),w<ye.TEXT_COMPACTION_MODE_LATCH)p[d]=w,d++;else switch(w){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:o--,h=!0;break}(d%ye.MAX_NUMERIC_CODEWORDS===0||w===ye.NUMERIC_COMPACTION_MODE_LATCH||h)&&d>0&&(c.append(ye.decodeBase900toBase10(p,d)),d=0)}return o}static decodeBase900toBase10(s,o){let c=sr(0);for(let h=0;h<o;h++)c+=ye.EXP900[o-h-1]*sr(s[h]);let d=c.toString();if(d.charAt(0)!=="1")throw new K;return d.substring(1)}}ye.TEXT_COMPACTION_MODE_LATCH=900,ye.BYTE_COMPACTION_MODE_LATCH=901,ye.NUMERIC_COMPACTION_MODE_LATCH=902,ye.BYTE_COMPACTION_MODE_LATCH_6=924,ye.ECI_USER_DEFINED=925,ye.ECI_GENERAL_PURPOSE=926,ye.ECI_CHARSET=927,ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ye.MACRO_PDF417_TERMINATOR=922,ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ye.MAX_NUMERIC_CODEWORDS=15,ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ye.PL=25,ye.LL=27,ye.AS=27,ye.ML=28,ye.AL=28,ye.PS=29,ye.PAL=29,ye.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ye.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ye.EXP900=Uf()?n0():[],ye.NUMBER_OF_SEQUENCE_CODEWORDS=2;class At{constructor(){}static decode(s,o,c,d,h,p,w){let S=new er(s,o,c,d,h),_=null,I=null,k;for(let Z=!0;;Z=!1){if(o!=null&&(_=At.getRowIndicatorColumn(s,S,o,!0,p,w)),d!=null&&(I=At.getRowIndicatorColumn(s,S,d,!1,p,w)),k=At.merge(_,I),k==null)throw ie.getNotFoundInstance();let ee=k.getBoundingBox();if(Z&&ee!=null&&(ee.getMinY()<S.getMinY()||ee.getMaxY()>S.getMaxY()))S=ee;else break}k.setBoundingBox(S);let P=k.getBarcodeColumnCount()+1;k.setDetectionResultColumn(0,_),k.setDetectionResultColumn(P,I);let $=_!=null;for(let Z=1;Z<=P;Z++){let ee=$?Z:P-Z;if(k.getDetectionResultColumn(ee)!==void 0)continue;let ue;ee===0||ee===P?ue=new nr(S,ee===0):ue=new oa(S),k.setDetectionResultColumn(ee,ue);let pe=-1,Me=pe;for(let ke=S.getMinY();ke<=S.getMaxY();ke++){if(pe=At.getStartColumn(k,ee,ke,$),pe<0||pe>S.getMaxX()){if(Me===-1)continue;pe=Me}let Ie=At.detectCodeword(s,S.getMinX(),S.getMaxX(),$,pe,ke,p,w);Ie!=null&&(ue.setCodeword(ke,Ie),Me=pe,p=Math.min(p,Ie.getWidth()),w=Math.max(w,Ie.getWidth()))}}return At.createDecoderResult(k)}static merge(s,o){if(s==null&&o==null)return null;let c=At.getBarcodeMetadata(s,o);if(c==null)return null;let d=er.merge(At.adjustBoundingBox(s),At.adjustBoundingBox(o));return new ir(c,d)}static adjustBoundingBox(s){if(s==null)return null;let o=s.getRowHeights();if(o==null)return null;let c=At.getMax(o),d=0;for(let w of o)if(d+=c-w,w>0)break;let h=s.getCodewords();for(let w=0;d>0&&h[w]==null;w++)d--;let p=0;for(let w=o.length-1;w>=0&&(p+=c-o[w],!(o[w]>0));w--);for(let w=h.length-1;p>0&&h[w]==null;w--)p--;return s.getBoundingBox().addMissingRows(d,p,s.isLeft())}static getMax(s){let o=-1;for(let c of s)o=Math.max(o,c);return o}static getBarcodeMetadata(s,o){let c;if(s==null||(c=s.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let d;return o==null||(d=o.getBarcodeMetadata())==null?c:c.getColumnCount()!==d.getColumnCount()&&c.getErrorCorrectionLevel()!==d.getErrorCorrectionLevel()&&c.getRowCount()!==d.getRowCount()?null:c}static getRowIndicatorColumn(s,o,c,d,h,p){let w=new nr(o,d);for(let S=0;S<2;S++){let _=S===0?1:-1,I=Math.trunc(Math.trunc(c.getX()));for(let k=Math.trunc(Math.trunc(c.getY()));k<=o.getMaxY()&&k>=o.getMinY();k+=_){let P=At.detectCodeword(s,0,s.getWidth(),d,I,k,h,p);P!=null&&(w.setCodeword(k,P),d?I=P.getStartX():I=P.getEndX())}}return w}static adjustCodewordCount(s,o){let c=o[0][1],d=c.getValue(),h=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-At.getNumberOfECCodeWords(s.getBarcodeECLevel());if(d.length===0){if(h<1||h>tt.MAX_CODEWORDS_IN_BARCODE)throw ie.getNotFoundInstance();c.setValue(h)}else d[0]!==h&&c.setValue(h)}static createDecoderResult(s){let o=At.createBarcodeMatrix(s);At.adjustCodewordCount(s,o);let c=new Array,d=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),h=[],p=new Array;for(let S=0;S<s.getBarcodeRowCount();S++)for(let _=0;_<s.getBarcodeColumnCount();_++){let I=o[S][_+1].getValue(),k=S*s.getBarcodeColumnCount()+_;I.length===0?c.push(k):I.length===1?d[k]=I[0]:(p.push(k),h.push(I))}let w=new Array(h.length);for(let S=0;S<w.length;S++)w[S]=h[S];return At.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),d,tt.toIntArray(c),tt.toIntArray(p),w)}static createDecoderResultFromAmbiguousValues(s,o,c,d,h){let p=new Int32Array(d.length),w=100;for(;w-- >0;){for(let S=0;S<p.length;S++)o[d[S]]=h[S][p[S]];try{return At.decodeCodewords(o,s,c)}catch(S){if(!(S instanceof O))throw S}if(p.length===0)throw O.getChecksumInstance();for(let S=0;S<p.length;S++)if(p[S]<h[S].length-1){p[S]++;break}else if(p[S]=0,S===p.length-1)throw O.getChecksumInstance()}throw O.getChecksumInstance()}static createBarcodeMatrix(s){let o=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let d=0;d<o.length;d++)for(let h=0;h<o[d].length;h++)o[d][h]=new zn;let c=0;for(let d of s.getDetectionResultColumns()){if(d!=null){for(let h of d.getCodewords())if(h!=null){let p=h.getRowNumber();if(p>=0){if(p>=o.length)continue;o[p][c].setValue(h.getValue())}}}c++}return o}static isValidBarcodeColumn(s,o){return o>=0&&o<=s.getBarcodeColumnCount()+1}static getStartColumn(s,o,c,d){let h=d?1:-1,p=null;if(At.isValidBarcodeColumn(s,o-h)&&(p=s.getDetectionResultColumn(o-h).getCodeword(c)),p!=null)return d?p.getEndX():p.getStartX();if(p=s.getDetectionResultColumn(o).getCodewordNearby(c),p!=null)return d?p.getStartX():p.getEndX();if(At.isValidBarcodeColumn(s,o-h)&&(p=s.getDetectionResultColumn(o-h).getCodewordNearby(c)),p!=null)return d?p.getEndX():p.getStartX();let w=0;for(;At.isValidBarcodeColumn(s,o-h);){o-=h;for(let S of s.getDetectionResultColumn(o).getCodewords())if(S!=null)return(d?S.getEndX():S.getStartX())+h*w*(S.getEndX()-S.getStartX());w++}return d?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,o,c,d,h,p,w,S){h=At.adjustCodewordStartColumn(s,o,c,d,h,p);let _=At.getModuleBitCount(s,o,c,d,h,p);if(_==null)return null;let I,k=mt.sum(_);if(d)I=h+k;else{for(let Z=0;Z<_.length/2;Z++){let ee=_[Z];_[Z]=_[_.length-1-Z],_[_.length-1-Z]=ee}I=h,h=I-k}if(!At.checkCodewordSkew(k,w,S))return null;let P=vi.getDecodedValue(_),$=tt.getCodeword(P);return $===-1?null:new Ls(h,I,At.getCodewordBucketNumber(P),$)}static getModuleBitCount(s,o,c,d,h,p){let w=h,S=new Int32Array(8),_=0,I=d?1:-1,k=d;for(;(d?w<c:w>=o)&&_<S.length;)s.get(w,p)===k?(S[_]++,w+=I):(_++,k=!k);return _===S.length||w===(d?c:o)&&_===S.length-1?S:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,o,c,d,h,p){let w=h,S=d?-1:1;for(let _=0;_<2;_++){for(;(d?w>=o:w<c)&&d===s.get(w,p);){if(Math.abs(h-w)>At.CODEWORD_SKEW_SIZE)return h;w+=S}S=-S,d=!d}return w}static checkCodewordSkew(s,o,c){return o-At.CODEWORD_SKEW_SIZE<=s&&s<=c+At.CODEWORD_SKEW_SIZE}static decodeCodewords(s,o,c){if(s.length===0)throw K.getFormatInstance();let d=1<<o+1,h=At.correctErrors(s,c,d);At.verifyCodewordCount(s,d);let p=ye.decode(s,""+o);return p.setErrorsCorrected(h),p.setErasures(c.length),p}static correctErrors(s,o,c){if(o!=null&&o.length>c/2+At.MAX_ERRORS||c<0||c>At.MAX_EC_CODEWORDS)throw O.getChecksumInstance();return At.errorCorrection.decode(s,c,o)}static verifyCodewordCount(s,o){if(s.length<4)throw K.getFormatInstance();let c=s[0];if(c>s.length)throw K.getFormatInstance();if(c===0)if(o<s.length)s[0]=s.length-o;else throw K.getFormatInstance()}static getBitCountForCodeword(s){let o=new Int32Array(8),c=0,d=o.length-1;for(;!((s&1)!==c&&(c=s&1,d--,d<0));)o[d]++,s>>=1;return o}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return At.getCodewordBucketNumber(At.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let o=new tr;for(let c=0;c<s.length;c++){o.format("Row %2d: ",c);for(let d=0;d<s[c].length;d++){let h=s[c][d];h.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",h.getValue()[0],h.getConfidence(h.getValue()[0]))}o.format("%n")}return o.toString()}}At.CODEWORD_SKEW_SIZE=2,At.MAX_ERRORS=3,At.MAX_EC_CODEWORDS=512,At.errorCorrection=new mo;class Jn{decode(s,o=null){let c=Jn.decode(s,o,!1);if(c==null||c.length===0||c[0]==null)throw ie.getNotFoundInstance();return c[0]}decodeMultiple(s,o=null){try{return Jn.decode(s,o,!0)}catch(c){throw c instanceof K||c instanceof O?ie.getNotFoundInstance():c}}static decode(s,o,c){const d=new Array,h=bt.detectMultiple(s,o,c);for(const p of h.getPoints()){const w=At.decode(h.getBits(),p[4],p[5],p[6],p[7],Jn.getMinCodewordWidth(p),Jn.getMaxCodewordWidth(p)),S=new Ne(w.getText(),w.getRawBytes(),void 0,p,be.PDF_417);S.putMetadata(Ge.ERROR_CORRECTION_LEVEL,w.getECLevel());const _=w.getOther();_!=null&&S.putMetadata(Ge.PDF417_EXTRA_METADATA,_),d.push(S)}return d.map(p=>p)}static getMaxWidth(s,o){return s==null||o==null?0:Math.trunc(Math.abs(s.getX()-o.getX()))}static getMinWidth(s,o){return s==null||o==null?B.MAX_VALUE:Math.trunc(Math.abs(s.getX()-o.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(Jn.getMaxWidth(s[0],s[4]),Jn.getMaxWidth(s[6],s[2])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN),Math.max(Jn.getMaxWidth(s[1],s[5]),Jn.getMaxWidth(s[7],s[3])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(Jn.getMinWidth(s[0],s[4]),Jn.getMinWidth(s[6],s[2])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN),Math.min(Jn.getMinWidth(s[1],s[5]),Jn.getMinWidth(s[7],s[3])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN)))}reset(){}}class po extends x{}po.kind="ReaderException";class Ff{constructor(s,o){this.verbose=s===!0,o&&this.setHints(o)}decode(s,o){return o&&this.setHints(o),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const o=!r(s)&&s.get(ne.TRY_HARDER)===!0,c=r(s)?null:s.get(ne.POSSIBLE_FORMATS),d=new Array;if(!r(c)){const h=c.some(p=>p===be.UPC_A||p===be.UPC_E||p===be.EAN_13||p===be.EAN_8||p===be.CODABAR||p===be.CODE_39||p===be.CODE_93||p===be.CODE_128||p===be.ITF||p===be.RSS_14||p===be.RSS_EXPANDED);h&&!o&&d.push(new Ks(s,this.verbose)),c.includes(be.QR_CODE)&&d.push(new Ms),c.includes(be.DATA_MATRIX)&&d.push(new ts),c.includes(be.AZTEC)&&d.push(new Gt),c.includes(be.PDF_417)&&d.push(new Jn),h&&o&&d.push(new Ks(s,this.verbose))}d.length===0&&(o||d.push(new Ks(s,this.verbose)),d.push(new Ms),d.push(new ts),d.push(new Gt),d.push(new Jn),o&&d.push(new Ks(s,this.verbose))),this.readers=d}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new po("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(s,this.hints)}catch(c){if(c instanceof po)continue}throw new ie("No MultiFormat Readers were able to detect the code.")}}class i0 extends oe{constructor(s=null,o=500){const c=new Ff;c.setHints(s),super(c,o)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class s0 extends oe{constructor(s=500){super(new Jn,s)}}class r0 extends oe{constructor(s=500){super(new Ms,s)}}var xo;(function(L){L[L.ERROR_CORRECTION=0]="ERROR_CORRECTION",L[L.CHARACTER_SET=1]="CHARACTER_SET",L[L.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",L[L.MIN_SIZE=3]="MIN_SIZE",L[L.MAX_SIZE=4]="MAX_SIZE",L[L.MARGIN=5]="MARGIN",L[L.PDF417_COMPACT=6]="PDF417_COMPACT",L[L.PDF417_COMPACTION=7]="PDF417_COMPACTION",L[L.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",L[L.AZTEC_LAYERS=9]="AZTEC_LAYERS",L[L.QR_VERSION=10]="QR_VERSION"})(xo||(xo={}));var Bn=xo;class Vc{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new Ae(s,Int32Array.from([1])))}buildGenerator(s){const o=this.cachedGenerators;if(s>=o.length){let c=o[o.length-1];const d=this.field;for(let h=o.length;h<=s;h++){const p=c.multiply(new Ae(d,Int32Array.from([1,d.exp(h-1+d.getGeneratorBase())])));o.push(p),c=p}}return o[s]}encode(s,o){if(o===0)throw new A("No error correction bytes");const c=s.length-o;if(c<=0)throw new A("No data bytes provided");const d=this.buildGenerator(o),h=new Int32Array(c);j.arraycopy(s,0,h,0,c);let p=new Ae(this.field,h);p=p.multiplyByMonomial(o,1);const S=p.divide(d)[1].getCoefficients(),_=o-S.length;for(let I=0;I<_;I++)s[c+I]=0;j.arraycopy(S,0,s,c+_,S.length)}}class bn{constructor(){}static applyMaskPenaltyRule1(s){return bn.applyMaskPenaltyRule1Internal(s,!0)+bn.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let o=0;const c=s.getArray(),d=s.getWidth(),h=s.getHeight();for(let p=0;p<h-1;p++){const w=c[p];for(let S=0;S<d-1;S++){const _=w[S];_===w[S+1]&&_===c[p+1][S]&&_===c[p+1][S+1]&&o++}}return bn.N2*o}static applyMaskPenaltyRule3(s){let o=0;const c=s.getArray(),d=s.getWidth(),h=s.getHeight();for(let p=0;p<h;p++)for(let w=0;w<d;w++){const S=c[p];w+6<d&&S[w]===1&&S[w+1]===0&&S[w+2]===1&&S[w+3]===1&&S[w+4]===1&&S[w+5]===0&&S[w+6]===1&&(bn.isWhiteHorizontal(S,w-4,w)||bn.isWhiteHorizontal(S,w+7,w+11))&&o++,p+6<h&&c[p][w]===1&&c[p+1][w]===0&&c[p+2][w]===1&&c[p+3][w]===1&&c[p+4][w]===1&&c[p+5][w]===0&&c[p+6][w]===1&&(bn.isWhiteVertical(c,w,p-4,p)||bn.isWhiteVertical(c,w,p+7,p+11))&&o++}return o*bn.N3}static isWhiteHorizontal(s,o,c){o=Math.max(o,0),c=Math.min(c,s.length);for(let d=o;d<c;d++)if(s[d]===1)return!1;return!0}static isWhiteVertical(s,o,c,d){c=Math.max(c,0),d=Math.min(d,s.length);for(let h=c;h<d;h++)if(s[h][o]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let o=0;const c=s.getArray(),d=s.getWidth(),h=s.getHeight();for(let S=0;S<h;S++){const _=c[S];for(let I=0;I<d;I++)_[I]===1&&o++}const p=s.getHeight()*s.getWidth();return Math.floor(Math.abs(o*2-p)*10/p)*bn.N4}static getDataMaskBit(s,o,c){let d,h;switch(s){case 0:d=c+o&1;break;case 1:d=c&1;break;case 2:d=o%3;break;case 3:d=(c+o)%3;break;case 4:d=Math.floor(c/2)+Math.floor(o/3)&1;break;case 5:h=c*o,d=(h&1)+h%3;break;case 6:h=c*o,d=(h&1)+h%3&1;break;case 7:h=c*o,d=h%3+(c+o&1)&1;break;default:throw new A("Invalid mask pattern: "+s)}return d===0}static applyMaskPenaltyRule1Internal(s,o){let c=0;const d=o?s.getHeight():s.getWidth(),h=o?s.getWidth():s.getHeight(),p=s.getArray();for(let w=0;w<d;w++){let S=0,_=-1;for(let I=0;I<h;I++){const k=o?p[w][I]:p[I][w];k===_?S++:(S>=5&&(c+=bn.N1+(S-5)),S=1,_=k)}S>=5&&(c+=bn.N1+(S-5))}return c}}bn.N1=3,bn.N2=3,bn.N3=40,bn.N4=10;class yo{constructor(s,o){this.width=s,this.height=o;const c=new Array(o);for(let d=0;d!==o;d++)c[d]=new Uint8Array(s);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(s,o){return this.bytes[o][s]}getArray(){return this.bytes}setNumber(s,o,c){this.bytes[o][s]=c}setBoolean(s,o,c){this.bytes[o][s]=c?1:0}clear(s){for(const o of this.bytes)q.fill(o,s)}equals(s){if(!(s instanceof yo))return!1;const o=s;if(this.width!==o.width||this.height!==o.height)return!1;for(let c=0,d=this.height;c<d;++c){const h=this.bytes[c],p=o.bytes[c];for(let w=0,S=this.width;w<S;++w)if(h[w]!==p[w])return!1}return!0}toString(){const s=new he;for(let o=0,c=this.height;o<c;++o){const d=this.bytes[o];for(let h=0,p=this.width;h<p;++h)switch(d[h]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class Ar{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new he;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<Ar.NUM_MASK_PATTERNS}}Ar.NUM_MASK_PATTERNS=8;class en extends x{}en.kind="WriterException";class it{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,o,c,d,h){it.clearMatrix(h),it.embedBasicPatterns(c,h),it.embedTypeInfo(o,d,h),it.maybeEmbedVersionInfo(c,h),it.embedDataBits(s,d,h)}static embedBasicPatterns(s,o){it.embedPositionDetectionPatternsAndSeparators(o),it.embedDarkDotAtLeftBottomCorner(o),it.maybeEmbedPositionAdjustmentPatterns(s,o),it.embedTimingPatterns(o)}static embedTypeInfo(s,o,c){const d=new V;it.makeTypeInfoBits(s,o,d);for(let h=0,p=d.getSize();h<p;++h){const w=d.get(d.getSize()-1-h),S=it.TYPE_INFO_COORDINATES[h],_=S[0],I=S[1];if(c.setBoolean(_,I,w),h<8){const k=c.getWidth()-h-1;c.setBoolean(k,8,w)}else{const P=c.getHeight()-7+(h-8);c.setBoolean(8,P,w)}}}static maybeEmbedVersionInfo(s,o){if(s.getVersionNumber()<7)return;const c=new V;it.makeVersionInfoBits(s,c);let d=6*3-1;for(let h=0;h<6;++h)for(let p=0;p<3;++p){const w=c.get(d);d--,o.setBoolean(h,o.getHeight()-11+p,w),o.setBoolean(o.getHeight()-11+p,h,w)}}static embedDataBits(s,o,c){let d=0,h=-1,p=c.getWidth()-1,w=c.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);w>=0&&w<c.getHeight();){for(let S=0;S<2;++S){const _=p-S;if(!it.isEmpty(c.get(_,w)))continue;let I;d<s.getSize()?(I=s.get(d),++d):I=!1,o!==255&&bn.getDataMaskBit(o,_,w)&&(I=!I),c.setBoolean(_,w,I)}w+=h}h=-h,w+=h,p-=2}if(d!==s.getSize())throw new en("Not all bits consumed: "+d+"/"+s.getSize())}static findMSBSet(s){return 32-B.numberOfLeadingZeros(s)}static calculateBCHCode(s,o){if(o===0)throw new A("0 polynomial");const c=it.findMSBSet(o);for(s<<=c-1;it.findMSBSet(s)>=c;)s^=o<<it.findMSBSet(s)-c;return s}static makeTypeInfoBits(s,o,c){if(!Ar.isValidMaskPattern(o))throw new en("Invalid mask pattern");const d=s.getBits()<<3|o;c.appendBits(d,5);const h=it.calculateBCHCode(d,it.TYPE_INFO_POLY);c.appendBits(h,10);const p=new V;if(p.appendBits(it.TYPE_INFO_MASK_PATTERN,15),c.xor(p),c.getSize()!==15)throw new en("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(s,o){o.appendBits(s.getVersionNumber(),6);const c=it.calculateBCHCode(s.getVersionNumber(),it.VERSION_INFO_POLY);if(o.appendBits(c,12),o.getSize()!==18)throw new en("should not happen but we got: "+o.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let o=8;o<s.getWidth()-8;++o){const c=(o+1)%2;it.isEmpty(s.get(o,6))&&s.setNumber(o,6,c),it.isEmpty(s.get(6,o))&&s.setNumber(6,o,c)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new en;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,o,c){for(let d=0;d<8;++d){if(!it.isEmpty(c.get(s+d,o)))throw new en;c.setNumber(s+d,o,0)}}static embedVerticalSeparationPattern(s,o,c){for(let d=0;d<7;++d){if(!it.isEmpty(c.get(s,o+d)))throw new en;c.setNumber(s,o+d,0)}}static embedPositionAdjustmentPattern(s,o,c){for(let d=0;d<5;++d){const h=it.POSITION_ADJUSTMENT_PATTERN[d];for(let p=0;p<5;++p)c.setNumber(s+p,o+d,h[p])}}static embedPositionDetectionPattern(s,o,c){for(let d=0;d<7;++d){const h=it.POSITION_DETECTION_PATTERN[d];for(let p=0;p<7;++p)c.setNumber(s+p,o+d,h[p])}}static embedPositionDetectionPatternsAndSeparators(s){const o=it.POSITION_DETECTION_PATTERN[0].length;it.embedPositionDetectionPattern(0,0,s),it.embedPositionDetectionPattern(s.getWidth()-o,0,s),it.embedPositionDetectionPattern(0,s.getWidth()-o,s);const c=8;it.embedHorizontalSeparationPattern(0,c-1,s),it.embedHorizontalSeparationPattern(s.getWidth()-c,c-1,s),it.embedHorizontalSeparationPattern(0,s.getWidth()-c,s);const d=7;it.embedVerticalSeparationPattern(d,0,s),it.embedVerticalSeparationPattern(s.getHeight()-d-1,0,s),it.embedVerticalSeparationPattern(d,s.getHeight()-d,s)}static maybeEmbedPositionAdjustmentPatterns(s,o){if(s.getVersionNumber()<2)return;const c=s.getVersionNumber()-1,d=it.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let h=0,p=d.length;h!==p;h++){const w=d[h];if(w>=0)for(let S=0;S!==p;S++){const _=d[S];_>=0&&it.isEmpty(o.get(_,w))&&it.embedPositionAdjustmentPattern(_-2,w-2,o)}}}}it.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),it.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),it.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),it.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),it.VERSION_INFO_POLY=7973,it.TYPE_INFO_POLY=1335,it.TYPE_INFO_MASK_PATTERN=21522;class a0{constructor(s,o){this.dataBytes=s,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class cn{constructor(){}static calculateMaskPenalty(s){return bn.applyMaskPenaltyRule1(s)+bn.applyMaskPenaltyRule2(s)+bn.applyMaskPenaltyRule3(s)+bn.applyMaskPenaltyRule4(s)}static encode(s,o,c=null){let d=cn.DEFAULT_BYTE_MODE_ENCODING;const h=c!==null&&c.get(Bn.CHARACTER_SET)!==void 0;h&&(d=c.get(Bn.CHARACTER_SET).toString());const p=this.chooseMode(s,d),w=new V;if(p===Qe.BYTE&&(h||cn.DEFAULT_BYTE_MODE_ENCODING!==d)){const ke=Q.getCharacterSetECIByName(d);ke!==void 0&&this.appendECI(ke,w)}this.appendModeInfo(p,w);const S=new V;this.appendBytes(s,p,S,d);let _;if(c!==null&&c.get(Bn.QR_VERSION)!==void 0){const ke=Number.parseInt(c.get(Bn.QR_VERSION).toString(),10);_=Ze.getVersionForNumber(ke);const Ie=this.calculateBitsNeeded(p,w,S,_);if(!this.willFit(Ie,_,o))throw new en("Data too big for requested version")}else _=this.recommendVersion(o,p,w,S);const I=new V;I.appendBitArray(w);const k=p===Qe.BYTE?S.getSizeInBytes():s.length;this.appendLengthInfo(k,_,p,I),I.appendBitArray(S);const P=_.getECBlocksForLevel(o),$=_.getTotalCodewords()-P.getTotalECCodewords();this.terminateBits($,I);const Z=this.interleaveWithECBytes(I,_.getTotalCodewords(),$,P.getNumBlocks()),ee=new Ar;ee.setECLevel(o),ee.setMode(p),ee.setVersion(_);const ue=_.getDimensionForVersion(),pe=new yo(ue,ue),Me=this.chooseMaskPattern(Z,o,_,pe);return ee.setMaskPattern(Me),it.buildMatrix(Z,o,_,Me,pe),ee.setMatrix(pe),ee}static recommendVersion(s,o,c,d){const h=this.calculateBitsNeeded(o,c,d,Ze.getVersionForNumber(1)),p=this.chooseVersion(h,s),w=this.calculateBitsNeeded(o,c,d,p);return this.chooseVersion(w,s)}static calculateBitsNeeded(s,o,c,d){return o.getSize()+s.getCharacterCountBits(d)+c.getSize()}static getAlphanumericCode(s){return s<cn.ALPHANUMERIC_TABLE.length?cn.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,o=null){if(Q.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(s))return Qe.KANJI;let c=!1,d=!1;for(let h=0,p=s.length;h<p;++h){const w=s.charAt(h);if(cn.isDigit(w))c=!0;else if(this.getAlphanumericCode(w.charCodeAt(0))!==-1)d=!0;else return Qe.BYTE}return d?Qe.ALPHANUMERIC:c?Qe.NUMERIC:Qe.BYTE}static isOnlyDoubleByteKanji(s){let o;try{o=je.encode(s,Q.SJIS)}catch{return!1}const c=o.length;if(c%2!==0)return!1;for(let d=0;d<c;d+=2){const h=o[d]&255;if((h<129||h>159)&&(h<224||h>235))return!1}return!0}static chooseMaskPattern(s,o,c,d){let h=Number.MAX_SAFE_INTEGER,p=-1;for(let w=0;w<Ar.NUM_MASK_PATTERNS;w++){it.buildMatrix(s,o,c,w,d);let S=this.calculateMaskPenalty(d);S<h&&(h=S,p=w)}return p}static chooseVersion(s,o){for(let c=1;c<=40;c++){const d=Ze.getVersionForNumber(c);if(cn.willFit(s,d,o))return d}throw new en("Data too big")}static willFit(s,o,c){const d=o.getTotalCodewords(),p=o.getECBlocksForLevel(c).getTotalECCodewords(),w=d-p,S=(s+7)/8;return w>=S}static terminateBits(s,o){const c=s*8;if(o.getSize()>c)throw new en("data bits cannot fit in the QR Code"+o.getSize()+" > "+c);for(let p=0;p<4&&o.getSize()<c;++p)o.appendBit(!1);const d=o.getSize()&7;if(d>0)for(let p=d;p<8;p++)o.appendBit(!1);const h=s-o.getSizeInBytes();for(let p=0;p<h;++p)o.appendBits((p&1)===0?236:17,8);if(o.getSize()!==c)throw new en("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,o,c,d,h,p){if(d>=c)throw new en("Block ID too large");const w=s%c,S=c-w,_=Math.floor(s/c),I=_+1,k=Math.floor(o/c),P=k+1,$=_-k,Z=I-P;if($!==Z)throw new en("EC bytes mismatch");if(c!==S+w)throw new en("RS blocks mismatch");if(s!==(k+$)*S+(P+Z)*w)throw new en("Total bytes mismatch");d<S?(h[0]=k,p[0]=$):(h[0]=P,p[0]=Z)}static interleaveWithECBytes(s,o,c,d){if(s.getSizeInBytes()!==c)throw new en("Number of bits and data bytes does not match");let h=0,p=0,w=0;const S=new Array;for(let I=0;I<d;++I){const k=new Int32Array(1),P=new Int32Array(1);cn.getNumDataBytesAndNumECBytesForBlockID(o,c,d,I,k,P);const $=k[0],Z=new Uint8Array($);s.toBytes(8*h,Z,0,$);const ee=cn.generateECBytes(Z,P[0]);S.push(new a0(Z,ee)),p=Math.max(p,$),w=Math.max(w,ee.length),h+=k[0]}if(c!==h)throw new en("Data bytes does not match offset");const _=new V;for(let I=0;I<p;++I)for(const k of S){const P=k.getDataBytes();I<P.length&&_.appendBits(P[I],8)}for(let I=0;I<w;++I)for(const k of S){const P=k.getErrorCorrectionBytes();I<P.length&&_.appendBits(P[I],8)}if(o!==_.getSizeInBytes())throw new en("Interleaving error: "+o+" and "+_.getSizeInBytes()+" differ.");return _}static generateECBytes(s,o){const c=s.length,d=new Int32Array(c+o);for(let p=0;p<c;p++)d[p]=s[p]&255;new Vc(Be.QR_CODE_FIELD_256).encode(d,o);const h=new Uint8Array(o);for(let p=0;p<o;p++)h[p]=d[c+p];return h}static appendModeInfo(s,o){o.appendBits(s.getBits(),4)}static appendLengthInfo(s,o,c,d){const h=c.getCharacterCountBits(o);if(s>=1<<h)throw new en(s+" is bigger than "+((1<<h)-1));d.appendBits(s,h)}static appendBytes(s,o,c,d){switch(o){case Qe.NUMERIC:cn.appendNumericBytes(s,c);break;case Qe.ALPHANUMERIC:cn.appendAlphanumericBytes(s,c);break;case Qe.BYTE:cn.append8BitBytes(s,c,d);break;case Qe.KANJI:cn.appendKanjiBytes(s,c);break;default:throw new en("Invalid mode: "+o)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const o=cn.getDigit(s);return o>=0&&o<=9}static appendNumericBytes(s,o){const c=s.length;let d=0;for(;d<c;){const h=cn.getDigit(s.charAt(d));if(d+2<c){const p=cn.getDigit(s.charAt(d+1)),w=cn.getDigit(s.charAt(d+2));o.appendBits(h*100+p*10+w,10),d+=3}else if(d+1<c){const p=cn.getDigit(s.charAt(d+1));o.appendBits(h*10+p,7),d+=2}else o.appendBits(h,4),d++}}static appendAlphanumericBytes(s,o){const c=s.length;let d=0;for(;d<c;){const h=cn.getAlphanumericCode(s.charCodeAt(d));if(h===-1)throw new en;if(d+1<c){const p=cn.getAlphanumericCode(s.charCodeAt(d+1));if(p===-1)throw new en;o.appendBits(h*45+p,11),d+=2}else o.appendBits(h,6),d++}}static append8BitBytes(s,o,c){let d;try{d=je.encode(s,c)}catch(h){throw new en(h)}for(let h=0,p=d.length;h!==p;h++){const w=d[h];o.appendBits(w,8)}}static appendKanjiBytes(s,o){let c;try{c=je.encode(s,Q.SJIS)}catch(h){throw new en(h)}const d=c.length;for(let h=0;h<d;h+=2){const p=c[h]&255,w=c[h+1]&255,S=p<<8&4294967295|w;let _=-1;if(S>=33088&&S<=40956?_=S-33088:S>=57408&&S<=60351&&(_=S-49472),_===-1)throw new en("Invalid byte sequence");const I=(_>>8)*192+(_&255);o.appendBits(I,13)}}static appendECI(s,o){o.appendBits(Qe.ECI.getBits(),4),o.appendBits(s.getValue(),8)}}cn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),cn.DEFAULT_BYTE_MODE_ENCODING=Q.UTF8.getName();class Tr{write(s,o,c,d=null){if(s.length===0)throw new A("Found empty contents");if(o<0||c<0)throw new A("Requested dimensions are too small: "+o+"x"+c);let h=Kt.L,p=Tr.QUIET_ZONE_SIZE;d!==null&&(d.get(Bn.ERROR_CORRECTION)!==void 0&&(h=Kt.fromString(d.get(Bn.ERROR_CORRECTION).toString())),d.get(Bn.MARGIN)!==void 0&&(p=Number.parseInt(d.get(Bn.MARGIN).toString(),10)));const w=cn.encode(s,h,d);return this.renderResult(w,o,c,p)}writeToDom(s,o,c,d,h=null){typeof s=="string"&&(s=document.querySelector(s));const p=this.write(o,c,d,h);s&&s.appendChild(p)}renderResult(s,o,c,d){const h=s.getMatrix();if(h===null)throw new Ke;const p=h.getWidth(),w=h.getHeight(),S=p+d*2,_=w+d*2,I=Math.max(o,S),k=Math.max(c,_),P=Math.min(Math.floor(I/S),Math.floor(k/_)),$=Math.floor((I-p*P)/2),Z=Math.floor((k-w*P)/2),ee=this.createSVGElement(I,k);for(let ue=0,pe=Z;ue<w;ue++,pe+=P)for(let Me=0,ke=$;Me<p;Me++,ke+=P)if(h.get(Me,ue)===1){const Ie=this.createSvgRectElement(ke,pe,P,P);ee.appendChild(Ie)}return ee}createSVGElement(s,o){const c=document.createElementNS(Tr.SVG_NS,"svg");return c.setAttributeNS(null,"height",s.toString()),c.setAttributeNS(null,"width",o.toString()),c}createSvgRectElement(s,o,c,d){const h=document.createElementNS(Tr.SVG_NS,"rect");return h.setAttributeNS(null,"x",s.toString()),h.setAttributeNS(null,"y",o.toString()),h.setAttributeNS(null,"height",c.toString()),h.setAttributeNS(null,"width",d.toString()),h.setAttributeNS(null,"fill","#000000"),h}}Tr.QUIET_ZONE_SIZE=4,Tr.SVG_NS="http://www.w3.org/2000/svg";class ua{encode(s,o,c,d,h){if(s.length===0)throw new A("Found empty contents");if(o!==be.QR_CODE)throw new A("Can only encode QR_CODE, but got "+o);if(c<0||d<0)throw new A(`Requested dimensions are too small: ${c}x${d}`);let p=Kt.L,w=ua.QUIET_ZONE_SIZE;h!==null&&(h.get(Bn.ERROR_CORRECTION)!==void 0&&(p=Kt.fromString(h.get(Bn.ERROR_CORRECTION).toString())),h.get(Bn.MARGIN)!==void 0&&(w=Number.parseInt(h.get(Bn.MARGIN).toString(),10)));const S=cn.encode(s,p,h);return ua.renderResult(S,c,d,w)}static renderResult(s,o,c,d){const h=s.getMatrix();if(h===null)throw new Ke;const p=h.getWidth(),w=h.getHeight(),S=p+d*2,_=w+d*2,I=Math.max(o,S),k=Math.max(c,_),P=Math.min(Math.floor(I/S),Math.floor(k/_)),$=Math.floor((I-p*P)/2),Z=Math.floor((k-w*P)/2),ee=new Ue(I,k);for(let ue=0,pe=Z;ue<w;ue++,pe+=P)for(let Me=0,ke=$;Me<p;Me++,ke+=P)h.get(Me,ue)===1&&ee.setRegion(ke,pe,P,P);return ee}}ua.QUIET_ZONE_SIZE=4;class o0{encode(s,o,c,d,h){let p;switch(o){case be.QR_CODE:p=new ua;break;default:throw new A("No encoder available for format "+o)}return p.encode(s,o,c,d,h)}}class gs extends Le{constructor(s,o,c,d,h,p,w,S){if(super(p,w),this.yuvData=s,this.dataWidth=o,this.dataHeight=c,this.left=d,this.top=h,d+p>o||h+w>c)throw new A("Crop rectangle does not fit within image data.");S&&this.reverseHorizontal(p,w)}getRow(s,o){if(s<0||s>=this.getHeight())throw new A("Requested row is outside the image: "+s);const c=this.getWidth();(o==null||o.length<c)&&(o=new Uint8ClampedArray(c));const d=(s+this.top)*this.dataWidth+this.left;return j.arraycopy(this.yuvData,d,o,0,c),o}getMatrix(){const s=this.getWidth(),o=this.getHeight();if(s===this.dataWidth&&o===this.dataHeight)return this.yuvData;const c=s*o,d=new Uint8ClampedArray(c);let h=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return j.arraycopy(this.yuvData,h,d,0,c),d;for(let p=0;p<o;p++){const w=p*s;j.arraycopy(this.yuvData,h,d,w,s),h+=this.dataWidth}return d}isCropSupported(){return!0}crop(s,o,c,d){return new gs(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+o,c,d,!1)}renderThumbnail(){const s=this.getWidth()/gs.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/gs.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(s*o),d=this.yuvData;let h=this.top*this.dataWidth+this.left;for(let p=0;p<o;p++){const w=p*s;for(let S=0;S<s;S++){const _=d[h+S*gs.THUMBNAIL_SCALE_FACTOR]&255;c[w+S]=4278190080|_*65793}h+=this.dataWidth*gs.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/gs.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/gs.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,o){const c=this.yuvData;for(let d=0,h=this.top*this.dataWidth+this.left;d<o;d++,h+=this.dataWidth){const p=h+s/2;for(let w=h,S=h+s-1;w<p;w++,S--){const _=c[w];c[w]=c[S],c[S]=_}}}invert(){return new Ve(this)}}gs.THUMBNAIL_SCALE_FACTOR=2;class bo extends Le{constructor(s,o,c,d,h,p,w){if(super(o,c),this.dataWidth=d,this.dataHeight=h,this.left=p,this.top=w,s.BYTES_PER_ELEMENT===4){const S=o*c,_=new Uint8ClampedArray(S);for(let I=0;I<S;I++){const k=s[I],P=k>>16&255,$=k>>7&510,Z=k&255;_[I]=(P+$+Z)/4&255}this.luminances=_}else this.luminances=s;if(d===void 0&&(this.dataWidth=o),h===void 0&&(this.dataHeight=c),p===void 0&&(this.left=0),w===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+c>this.dataHeight)throw new A("Crop rectangle does not fit within image data.")}getRow(s,o){if(s<0||s>=this.getHeight())throw new A("Requested row is outside the image: "+s);const c=this.getWidth();(o==null||o.length<c)&&(o=new Uint8ClampedArray(c));const d=(s+this.top)*this.dataWidth+this.left;return j.arraycopy(this.luminances,d,o,0,c),o}getMatrix(){const s=this.getWidth(),o=this.getHeight();if(s===this.dataWidth&&o===this.dataHeight)return this.luminances;const c=s*o,d=new Uint8ClampedArray(c);let h=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return j.arraycopy(this.luminances,h,d,0,c),d;for(let p=0;p<o;p++){const w=p*s;j.arraycopy(this.luminances,h,d,w,s),h+=this.dataWidth}return d}isCropSupported(){return!0}crop(s,o,c,d){return new bo(this.luminances,c,d,this.dataWidth,this.dataHeight,this.left+s,this.top+o)}invert(){return new Ve(this)}}class fa extends Q{static forName(s){return this.getCharacterSetECIByName(s)}}class zc{}zc.ISO_8859_1=Q.ISO8859_1;class Hc{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class $c{static singletonList(s){return[s]}static min(s,o){return s.sort(o)[0]}}class Vf{constructor(s){this.previous=s}getPrevious(){return this.previous}}class _r extends Vf{constructor(s,o,c){super(s),this.value=o,this.bitCount=c}appendTo(s,o){s.appendBits(this.value,this.bitCount)}add(s,o){return new _r(this,s,o)}addBinaryShift(s,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new _r(this,s,o)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+B.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class wl extends _r{constructor(s,o,c){super(s,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=c}appendTo(s,o){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):c===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(o[this.binaryShiftStart+c],8)}addBinaryShift(s,o){return new wl(this,s,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function da(L,s,o){return new wl(L,s,o)}function wo(L,s,o){return new _r(L,s,o)}const l0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],rr=0,vo=1,Mi=2,ha=3,Ei=4,c0=new _r(null,0,0),ga=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function zf(L){for(let s of L)q.fill(s,-1);return L[rr][Ei]=0,L[vo][Ei]=0,L[vo][rr]=28,L[ha][Ei]=0,L[Mi][Ei]=0,L[Mi][rr]=15,L}const Gc=zf(q.createInt32Array(6,6));class Vi{constructor(s,o,c,d){this.token=s,this.mode=o,this.binaryShiftByteCount=c,this.bitCount=d}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,o){let c=this.bitCount,d=this.token;if(s!==this.mode){let p=ga[this.mode][s];d=wo(d,p&65535,p>>16),c+=p>>16}let h=s===Mi?4:5;return d=wo(d,o,h),new Vi(d,s,0,c+h)}shiftAndAppend(s,o){let c=this.token,d=this.mode===Mi?4:5;return c=wo(c,Gc[this.mode][s],d),c=wo(c,o,5),new Vi(c,this.mode,0,this.bitCount+d+5)}addBinaryShiftChar(s){let o=this.token,c=this.mode,d=this.bitCount;if(this.mode===Ei||this.mode===Mi){let w=ga[c][rr];o=wo(o,w&65535,w>>16),d+=w>>16,c=rr}let h=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new Vi(o,c,this.binaryShiftByteCount+1,d+h);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(s+1)),p}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=da(o,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new Vi(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let o=this.bitCount+(ga[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?o+=Vi.calculateBinaryShiftCost(s)-Vi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(o+=10),o<=s.bitCount}toBitArray(s){let o=[];for(let d=this.endBinaryShift(s.length).token;d!==null;d=d.getPrevious())o.unshift(d);let c=new V;for(const d of o)d.appendTo(c,s);return c}toString(){return _e.format("%s bits=%d bytes=%d",l0[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}Vi.INITIAL_STATE=new Vi(c0,rr,0,0);function qc(L){const s=_e.getCharCode(" "),o=_e.getCharCode("."),c=_e.getCharCode(",");L[rr][s]=1;const d=_e.getCharCode("Z"),h=_e.getCharCode("A");for(let P=h;P<=d;P++)L[rr][P]=P-h+2;L[vo][s]=1;const p=_e.getCharCode("z"),w=_e.getCharCode("a");for(let P=w;P<=p;P++)L[vo][P]=P-w+2;L[Mi][s]=1;const S=_e.getCharCode("9"),_=_e.getCharCode("0");for(let P=_;P<=S;P++)L[Mi][P]=P-_+2;L[Mi][c]=12,L[Mi][o]=13;const I=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let P=0;P<I.length;P++)L[ha][_e.getCharCode(I[P])]=P;const k=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let P=0;P<k.length;P++)_e.getCharCode(k[P])>0&&(L[Ei][_e.getCharCode(k[P])]=P);return L}const vl=qc(q.createInt32Array(5,256));class ma{constructor(s){this.text=s}encode(){const s=_e.getCharCode(" "),o=_e.getCharCode(`
`);let c=$c.singletonList(Vi.INITIAL_STATE);for(let h=0;h<this.text.length;h++){let p,w=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case _e.getCharCode("\r"):p=w===o?2:0;break;case _e.getCharCode("."):p=w===s?3:0;break;case _e.getCharCode(","):p=w===s?4:0;break;case _e.getCharCode(":"):p=w===s?5:0;break;default:p=0}p>0?(c=ma.updateStateListForPair(c,h,p),h++):c=this.updateStateListForChar(c,h)}return $c.min(c,(h,p)=>h.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,o){const c=[];for(let d of s)this.updateStateForChar(d,o,c);return ma.simplifyStates(c)}updateStateForChar(s,o,c){let d=this.text[o]&255,h=vl[s.getMode()][d]>0,p=null;for(let w=0;w<=Ei;w++){let S=vl[w][d];if(S>0){if(p==null&&(p=s.endBinaryShift(o)),!h||w===s.getMode()||w===Mi){const _=p.latchAndAppend(w,S);c.push(_)}if(!h&&Gc[s.getMode()][w]>=0){const _=p.shiftAndAppend(w,S);c.push(_)}}}if(s.getBinaryShiftByteCount()>0||vl[s.getMode()][d]===0){let w=s.addBinaryShiftChar(o);c.push(w)}}static updateStateListForPair(s,o,c){const d=[];for(let h of s)this.updateStateForPair(h,o,c,d);return this.simplifyStates(d)}static updateStateForPair(s,o,c,d){let h=s.endBinaryShift(o);if(d.push(h.latchAndAppend(Ei,c)),s.getMode()!==Ei&&d.push(h.shiftAndAppend(Ei,c)),c===3||c===4){let p=h.latchAndAppend(Mi,16-c).latchAndAppend(Mi,1);d.push(p)}if(s.getBinaryShiftByteCount()>0){let p=s.addBinaryShiftChar(o).addBinaryShiftChar(o+1);d.push(p)}}static simplifyStates(s){let o=[];for(const c of s){let d=!0;for(const h of o){if(h.isBetterThanOrEqualTo(c)){d=!1;break}c.isBetterThanOrEqualTo(h)&&(o=o.filter(p=>p!==h))}d&&o.push(c)}return o}}class Ft{constructor(){}static encodeBytes(s){return Ft.encode(s,Ft.DEFAULT_EC_PERCENT,Ft.DEFAULT_AZTEC_LAYERS)}static encode(s,o,c){let d=new ma(s).encode(),h=B.truncDivision(d.getSize()*o,100)+11,p=d.getSize()+h,w,S,_,I,k;if(c!==Ft.DEFAULT_AZTEC_LAYERS){if(w=c<0,S=Math.abs(c),S>(w?Ft.MAX_NB_BITS_COMPACT:Ft.MAX_NB_BITS))throw new A(_e.format("Illegal value %s for layers",c));_=Ft.totalBitsInLayer(S,w),I=Ft.WORD_SIZE[S];let Ie=_-_%I;if(k=Ft.stuffBits(d,I),k.getSize()+h>Ie)throw new A("Data to large for user specified layer");if(w&&k.getSize()>I*64)throw new A("Data to large for user specified layer")}else{I=0,k=null;for(let Ie=0;;Ie++){if(Ie>Ft.MAX_NB_BITS)throw new A("Data too large for an Aztec code");if(w=Ie<=3,S=w?Ie+1:Ie,_=Ft.totalBitsInLayer(S,w),p>_)continue;(k==null||I!==Ft.WORD_SIZE[S])&&(I=Ft.WORD_SIZE[S],k=Ft.stuffBits(d,I));let wt=_-_%I;if(!(w&&k.getSize()>I*64)&&k.getSize()+h<=wt)break}}let P=Ft.generateCheckWords(k,_,I),$=k.getSize()/I,Z=Ft.generateModeMessage(w,S,$),ee=(w?11:14)+S*4,ue=new Int32Array(ee),pe;if(w){pe=ee;for(let Ie=0;Ie<ue.length;Ie++)ue[Ie]=Ie}else{pe=ee+1+2*B.truncDivision(B.truncDivision(ee,2)-1,15);let Ie=B.truncDivision(ee,2),wt=B.truncDivision(pe,2);for(let pt=0;pt<Ie;pt++){let gi=pt+B.truncDivision(pt,15);ue[Ie-pt-1]=wt-gi-1,ue[Ie+pt]=wt+gi+1}}let Me=new Ue(pe);for(let Ie=0,wt=0;Ie<S;Ie++){let pt=(S-Ie)*4+(w?9:12);for(let gi=0;gi<pt;gi++){let zi=gi*2;for(let Si=0;Si<2;Si++)P.get(wt+zi+Si)&&Me.set(ue[Ie*2+Si],ue[Ie*2+gi]),P.get(wt+pt*2+zi+Si)&&Me.set(ue[Ie*2+gi],ue[ee-1-Ie*2-Si]),P.get(wt+pt*4+zi+Si)&&Me.set(ue[ee-1-Ie*2-Si],ue[ee-1-Ie*2-gi]),P.get(wt+pt*6+zi+Si)&&Me.set(ue[ee-1-Ie*2-gi],ue[Ie*2+Si])}wt+=pt*8}if(Ft.drawModeMessage(Me,w,pe,Z),w)Ft.drawBullsEye(Me,B.truncDivision(pe,2),5);else{Ft.drawBullsEye(Me,B.truncDivision(pe,2),7);for(let Ie=0,wt=0;Ie<B.truncDivision(ee,2)-1;Ie+=15,wt+=16)for(let pt=B.truncDivision(pe,2)&1;pt<pe;pt+=2)Me.set(B.truncDivision(pe,2)-wt,pt),Me.set(B.truncDivision(pe,2)+wt,pt),Me.set(pt,B.truncDivision(pe,2)-wt),Me.set(pt,B.truncDivision(pe,2)+wt)}let ke=new Hc;return ke.setCompact(w),ke.setSize(pe),ke.setLayers(S),ke.setCodeWords($),ke.setMatrix(Me),ke}static drawBullsEye(s,o,c){for(let d=0;d<c;d+=2)for(let h=o-d;h<=o+d;h++)s.set(h,o-d),s.set(h,o+d),s.set(o-d,h),s.set(o+d,h);s.set(o-c,o-c),s.set(o-c+1,o-c),s.set(o-c,o-c+1),s.set(o+c,o-c),s.set(o+c,o-c+1),s.set(o+c,o+c-1)}static generateModeMessage(s,o,c){let d=new V;return s?(d.appendBits(o-1,2),d.appendBits(c-1,6),d=Ft.generateCheckWords(d,28,4)):(d.appendBits(o-1,5),d.appendBits(c-1,11),d=Ft.generateCheckWords(d,40,4)),d}static drawModeMessage(s,o,c,d){let h=B.truncDivision(c,2);if(o)for(let p=0;p<7;p++){let w=h-3+p;d.get(p)&&s.set(w,h-5),d.get(p+7)&&s.set(h+5,w),d.get(20-p)&&s.set(w,h+5),d.get(27-p)&&s.set(h-5,w)}else for(let p=0;p<10;p++){let w=h-5+p+B.truncDivision(p,5);d.get(p)&&s.set(w,h-7),d.get(p+10)&&s.set(h+7,w),d.get(29-p)&&s.set(w,h+7),d.get(39-p)&&s.set(h-7,w)}}static generateCheckWords(s,o,c){let d=s.getSize()/c,h=new Vc(Ft.getGF(c)),p=B.truncDivision(o,c),w=Ft.bitsToWords(s,c,p);h.encode(w,p-d);let S=o%c,_=new V;_.appendBits(0,S);for(const I of Array.from(w))_.appendBits(I,c);return _}static bitsToWords(s,o,c){let d=new Int32Array(c),h,p;for(h=0,p=s.getSize()/o;h<p;h++){let w=0;for(let S=0;S<o;S++)w|=s.get(h*o+S)?1<<o-S-1:0;d[h]=w}return d}static getGF(s){switch(s){case 4:return Be.AZTEC_PARAM;case 6:return Be.AZTEC_DATA_6;case 8:return Be.AZTEC_DATA_8;case 10:return Be.AZTEC_DATA_10;case 12:return Be.AZTEC_DATA_12;default:throw new A("Unsupported word size "+s)}}static stuffBits(s,o){let c=new V,d=s.getSize(),h=(1<<o)-2;for(let p=0;p<d;p+=o){let w=0;for(let S=0;S<o;S++)(p+S>=d||s.get(p+S))&&(w|=1<<o-1-S);(w&h)===h?(c.appendBits(w&h,o),p--):(w&h)===0?(c.appendBits(w|1,o),p--):c.appendBits(w,o)}return c}static totalBitsInLayer(s,o){return((o?88:112)+16*s)*s}}Ft.DEFAULT_EC_PERCENT=33,Ft.DEFAULT_AZTEC_LAYERS=0,Ft.MAX_NB_BITS=32,Ft.MAX_NB_BITS_COMPACT=4,Ft.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class El{encode(s,o,c,d){return this.encodeWithHints(s,o,c,d,null)}encodeWithHints(s,o,c,d,h){let p=zc.ISO_8859_1,w=Ft.DEFAULT_EC_PERCENT,S=Ft.DEFAULT_AZTEC_LAYERS;return h!=null&&(h.has(Bn.CHARACTER_SET)&&(p=fa.forName(h.get(Bn.CHARACTER_SET).toString())),h.has(Bn.ERROR_CORRECTION)&&(w=B.parseInt(h.get(Bn.ERROR_CORRECTION).toString())),h.has(Bn.AZTEC_LAYERS)&&(S=B.parseInt(h.get(Bn.AZTEC_LAYERS).toString()))),El.encodeLayers(s,o,c,d,p,w,S)}static encodeLayers(s,o,c,d,h,p,w){if(o!==be.AZTEC)throw new A("Can only encode AZTEC, but got "+o);let S=Ft.encode(_e.getBytes(s,h),p,w);return El.renderResult(S,c,d)}static renderResult(s,o,c){let d=s.getMatrix();if(d==null)throw new Ke;let h=d.getWidth(),p=d.getHeight(),w=Math.max(o,h),S=Math.max(c,p),_=Math.min(w/h,S/p),I=(w-h*_)/2,k=(S-p*_)/2,P=new Ue(w,S);for(let $=0,Z=k;$<p;$++,Z+=_)for(let ee=0,ue=I;ee<h;ee++,ue+=_)d.get(ee,$)&&P.setRegion(ue,Z,_,_);return P}}n.AbstractExpandedDecoder=fo,n.ArgumentException=E,n.ArithmeticException=Fe,n.AztecCode=Hc,n.AztecCodeReader=Gt,n.AztecCodeWriter=El,n.AztecDecoder=yt,n.AztecDetector=Dt,n.AztecDetectorResult=Ct,n.AztecEncoder=Ft,n.AztecHighLevelEncoder=ma,n.AztecPoint=We,n.BarcodeFormat=be,n.Binarizer=M,n.BinaryBitmap=N,n.BitArray=V,n.BitMatrix=Ue,n.BitSource=wi,n.BrowserAztecCodeReader=rt,n.BrowserBarcodeReader=jf,n.BrowserCodeReader=oe,n.BrowserDatamatrixCodeReader=Jh,n.BrowserMultiFormatReader=i0,n.BrowserPDF417Reader=s0,n.BrowserQRCodeReader=r0,n.BrowserQRCodeSvgWriter=Tr,n.CharacterSetECI=Q,n.ChecksumException=O,n.Code128Reader=De,n.Code39Reader=ct,n.DataMatrixDecodedBitStreamParser=Zs,n.DataMatrixReader=ts,n.DecodeHintType=ne,n.DecoderResult=Mt,n.DefaultGridSampler=Oe,n.DetectorResult=et,n.EAN13Reader=Ji,n.EncodeHintType=Bn,n.Exception=x,n.FormatException=K,n.GenericGF=Be,n.GenericGFPoly=Ae,n.GlobalHistogramBinarizer=se,n.GridSampler=Wt,n.GridSamplerInstance=Xe,n.HTMLCanvasElementLuminanceSource=Y,n.HybridBinarizer=ce,n.ITFReader=_t,n.IllegalArgumentException=A,n.IllegalStateException=Ke,n.InvertedLuminanceSource=Ve,n.LuminanceSource=Le,n.MathUtils=mt,n.MultiFormatOneDReader=Ks,n.MultiFormatReader=Ff,n.MultiFormatWriter=o0,n.NotFoundException=ie,n.OneDReader=Et,n.PDF417DecodedBitStreamParser=ye,n.PDF417DecoderErrorCorrection=mo,n.PDF417Reader=Jn,n.PDF417ResultMetadata=xl,n.PerspectiveTransform=$t,n.PlanarYUVLuminanceSource=gs,n.QRCodeByteMatrix=yo,n.QRCodeDataMask=Qn,n.QRCodeDecodedBitStreamParser=mn,n.QRCodeDecoderErrorCorrectionLevel=Kt,n.QRCodeDecoderFormatInformation=Zn,n.QRCodeEncoder=cn,n.QRCodeEncoderQRCode=Ar,n.QRCodeMaskUtil=bn,n.QRCodeMatrixUtil=it,n.QRCodeMode=Qe,n.QRCodeReader=Ms,n.QRCodeVersion=Ze,n.QRCodeWriter=ua,n.RGBLuminanceSource=bo,n.RSS14Reader=qt,n.RSSExpandedReader=Ce,n.ReaderException=po,n.ReedSolomonDecoder=xt,n.ReedSolomonEncoder=Vc,n.ReedSolomonException=nt,n.Result=Ne,n.ResultMetadataType=Ge,n.ResultPoint=Re,n.StringUtils=_e,n.UnsupportedOperationException=we,n.VideoInputDevice=X,n.WhiteRectangleDetector=vt,n.WriterException=en,n.ZXingArrays=q,n.ZXingCharset=fa,n.ZXingInteger=B,n.ZXingStandardCharsets=zc,n.ZXingStringBuilder=he,n.ZXingStringEncoding=je,n.ZXingSystem=j,n.createAbstractExpandedDecoder=Pc,Object.defineProperty(n,"__esModule",{value:!0})})}(Gu,Gu.exports)),Gu.exports}var pn=PV();const UV=Mm(pn),FV=d3({__proto__:null,default:UV},[pn]);var Hv=function(){function t(e,n,r){if(this.formatMap=new Map([[$e.QR_CODE,pn.BarcodeFormat.QR_CODE],[$e.AZTEC,pn.BarcodeFormat.AZTEC],[$e.CODABAR,pn.BarcodeFormat.CODABAR],[$e.CODE_39,pn.BarcodeFormat.CODE_39],[$e.CODE_93,pn.BarcodeFormat.CODE_93],[$e.CODE_128,pn.BarcodeFormat.CODE_128],[$e.DATA_MATRIX,pn.BarcodeFormat.DATA_MATRIX],[$e.MAXICODE,pn.BarcodeFormat.MAXICODE],[$e.ITF,pn.BarcodeFormat.ITF],[$e.EAN_13,pn.BarcodeFormat.EAN_13],[$e.EAN_8,pn.BarcodeFormat.EAN_8],[$e.PDF_417,pn.BarcodeFormat.PDF_417],[$e.RSS_14,pn.BarcodeFormat.RSS_14],[$e.RSS_EXPANDED,pn.BarcodeFormat.RSS_EXPANDED],[$e.UPC_A,pn.BarcodeFormat.UPC_A],[$e.UPC_E,pn.BarcodeFormat.UPC_E],[$e.UPC_EAN_EXTENSION,pn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!FV)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var l=this.createZXingFormats(e),u=new Map;u.set(pn.DecodeHintType.POSSIBLE_FORMATS,l),u.set(pn.DecodeHintType.TRY_HARDER,!1),this.hints=u}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,l){try{r(n.decode(e))}catch(u){l(u)}})},t.prototype.decode=function(e){var n=new pn.MultiFormatReader(this.verbose,this.hints),r=new pn.HTMLCanvasElementLuminanceSource(e),l=new pn.BinaryBitmap(new pn.HybridBinarizer(r)),u=n.decode(l);return{text:u.text,format:_C.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,l){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,l=e;r<l.length;r++){var u=l[r];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.logError("".concat(u," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),VV=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(E){try{x(r.next(E))}catch(A){g(A)}}function b(E){try{x(r.throw(E))}catch(A){g(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},zV=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(x){return function(E){return b([x,E])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(E){x=[6,E],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},$v=function(){function t(e,n,r){if(this.formatMap=new Map([[$e.QR_CODE,"qr_code"],[$e.AZTEC,"aztec"],[$e.CODABAR,"codabar"],[$e.CODE_39,"code_39"],[$e.CODE_93,"code_93"],[$e.CODE_128,"code_128"],[$e.DATA_MATRIX,"data_matrix"],[$e.ITF,"itf"],[$e.EAN_13,"ean_13"],[$e.EAN_8,"ean_8"],[$e.PDF_417,"pdf417"],[$e.UPC_A,"upc_a"],[$e.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var l=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return VV(this,void 0,void 0,function(){var n,r;return zV(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=l.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:_C.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,l=0,u=e;l<u.length;l++){var g=u[l],y=g.boundingBox.width*g.boundingBox.height;y>r&&(r=y,n=g)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,l=e;r<l.length;r++){var u=l[r];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.warn("".concat(u," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,l){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Gv=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(E){try{x(r.next(E))}catch(A){g(A)}}function b(E){try{x(r.throw(E))}catch(A){g(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},qv=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(x){return function(E){return b([x,E])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(E){x=[6,E],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},HV=function(){function t(e,n,r,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&$v.isSupported()?(this.primaryDecoder=new $v(e,r,l),this.secondaryDecoder=new Hv(e,r,l)):this.primaryDecoder=new Hv(e,r,l)}return t.prototype.decodeAsync=function(e){return Gv(this,void 0,void 0,function(){var n;return qv(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Gv(this,void 0,void 0,function(){var n,r;return qv(this,function(l){switch(l.label){case 0:n=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,l.sent()];case 3:if(r=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var l=r[n];e+=l}var u=e/this.executionResults.length;console.log("".concat(u," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Up=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,l){r.__proto__=l}||function(r,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(r[u]=l[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mh=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(E){try{x(r.next(E))}catch(A){g(A)}}function b(E){try{x(r.throw(E))}catch(A){g(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},Dh=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(x){return function(E){return b([x,E])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(E){x=[6,E],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},IC=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),$V=function(t){Up(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var l={advanced:[r]};return this.track.applyConstraints(l)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(IC),GV=function(t){Up(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}($V),qV=function(t){Up(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(IC),YV=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new GV(this.track)},t.prototype.torchFeature=function(){return new qV(this.track)},t}(),XV=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,l=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,l),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,l){return Mh(this,void 0,void 0,function(){var u,g;return Dh(this,function(y){switch(y.label){case 0:return u=new t(e,n,l),r.aspectRatio?(g={aspectRatio:r.aspectRatio},[4,u.getFirstTrackOrFail().applyConstraints(g)]):[3,2];case 1:y.sent(),y.label=2;case 2:return u.setupSurface(),[2,u]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Mh(this,void 0,void 0,function(){return Dh(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var l=e.mediaStream.getVideoTracks(),u=l.length,g=0;e.mediaStream.getVideoTracks().forEach(function(y){e.mediaStream.removeTrack(y),y.stop(),++g,g>=u&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new YV(this.getFirstTrackOrFail())},t}(),WV=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return Mh(this,void 0,void 0,function(){return Dh(this,function(l){return[2,XV.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return Mh(this,void 0,void 0,function(){var n,r;return Dh(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=l.sent(),[2,new t(r)]}})})},t}(),Yv=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(E){try{x(r.next(E))}catch(A){g(A)}}function b(E){try{x(r.throw(E))}catch(A){g(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},Xv=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(x){return function(E){return b([x,E])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(E){x=[6,E],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},KV=function(){function t(){}return t.failIfNotSupported=function(){return Yv(this,void 0,void 0,function(){return Xv(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Yv(this,void 0,void 0,function(){return Xv(this,function(n){return[2,WV.create(e)]})})},t}(),ZV=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(E){try{x(r.next(E))}catch(A){g(A)}}function b(E){try{x(r.throw(E))}catch(A){g(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},QV=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(x){return function(E){return b([x,E])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(E){x=[6,E],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},JV=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=dc.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=dc.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return ZV(this,void 0,void 0,function(){var e,n,r,l,u,g,y;return QV(this,function(b){switch(b.label){case 0:return e=function(x){for(var E=x.getVideoTracks(),A=0,N=E;A<N.length;A++){var O=N[A];O.enabled=!1,O.stop(),x.removeTrack(O)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=b.sent(),l=[],u=0,g=r;u<g.length;u++)y=g[u],y.kind==="videoinput"&&l.push({id:y.deviceId,label:y.label});return e(n),[2,l]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(u){for(var g=[],y=0,b=u;y<b.length;y++){var x=b[y];x.kind==="video"&&g.push({id:x.id,label:x.label})}e(g)},l=MediaStreamTrack;l.getSources(r)})},t}(),Mn;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Mn||(Mn={}));var ez=function(){function t(){this.state=Mn.NOT_STARTED,this.onGoingTransactionNewState=Mn.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Mn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Mn.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Mn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Mn.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Mn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Mn.UNKNOWN:throw"Transition from unknown is not allowed";case Mn.NOT_STARTED:this.failIfNewStateIs(e,[Mn.PAUSED]);break;case Mn.SCANNING:break;case Mn.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,l=n;r<l.length;r++){var u=l[r];if(e===u)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),tz=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Mn.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Mn.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Mn.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Mn.PAUSED},t}(),nz=function(){function t(){}return t.create=function(){return new tz(new ez)},t}(),iz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,l){r.__proto__=l}||function(r,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(r[u]=l[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),us=function(t){iz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Hs),sz=function(){function t(e,n){this.logger=n,this.fps=us.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=us.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?OC.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!hr(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),Wv=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new RC(this.verbose),this.qrcode=new HV(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=nz.create()}return t.prototype.start=function(e,n,r,l){var u=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var g;l?g=l:g=this.verbose?this.logger.log:function(){};var y=sz.create(n,this.logger);this.clearElement();var b=!1;y.videoConstraints&&(y.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var x=b,E=document.getElementById(this.elementId);E.clientWidth?E.clientWidth:us.DEFAULT_WIDTH,E.style.position="relative",this.shouldScan=!0,this.element=E;var A=this,N=this.stateManagerProxy.startTransition(Mn.SCANNING);return new Promise(function(O,M){var j=x?y.videoConstraints:A.createVideoConstraints(e);if(!j){N.cancel(),M("videoConstraints should be defined");return}var U={};(!x||y.aspectRatio)&&(U.aspectRatio=y.aspectRatio);var H={onRenderSurfaceReady:function(q,B){A.setupUi(q,B,y),A.isScanning=!0,A.foreverScan(y,r,g)}};KV.failIfNotSupported().then(function(q){q.create(j).then(function(B){return B.render(u.element,U,H).then(function(V){A.renderedCamera=V,N.execute(),O(null)}).catch(function(V){N.cancel(),M(V)})}).catch(function(B){N.cancel(),M(dc.errorGettingUserMedia(B))})}).catch(function(q){N.cancel(),M(dc.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Mn.PAUSED),this.showPausedState(),(hr(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Mn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Mn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var u=document.getElementById(us.SHADED_REGION_ELEMENT_ID);u&&e.element.removeChild(u)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),r(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),n.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(hr(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,u){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var g=new Image;g.onload=function(){var y=g.width,b=g.height,x=document.getElementById(r.elementId),E=x.clientWidth?x.clientWidth:us.DEFAULT_WIDTH,A=Math.max(x.clientHeight?x.clientHeight:b,us.FILE_SCAN_MIN_HEIGHT),N=r.computeCanvasDrawConfig(y,b,E,A);if(n){var O=r.createCanvasElement(E,A,"qr-canvas-visible");O.style.display="inline-block",x.appendChild(O);var M=O.getContext("2d");if(!M)throw"Unable to get 2d context from canvas";M.canvas.width=E,M.canvas.height=A,M.drawImage(g,0,0,y,b,N.x,N.y,N.width,N.height)}var j=us.FILE_SCAN_HIDDEN_CANVAS_PADDING,U=Math.max(g.width,N.width),H=Math.max(g.height,N.height),q=U+2*j,B=H+2*j,V=r.createCanvasElement(q,B);x.appendChild(V);var G=V.getContext("2d");if(!G)throw"Unable to get 2d context from canvas";G.canvas.width=q,G.canvas.height=B,G.drawImage(g,0,0,y,b,j,j,U,H);try{r.qrcode.decodeRobustlyAsync(V).then(function(ne){l(Fv.createFromQrcodeResult(ne))}).catch(u)}catch(ne){u("QR code parse error, error = ".concat(ne))}},g.onerror=u,g.onabort=u,g.onstalled=u,g.onsuspend=u,g.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return JV.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!OC.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[$e.QR_CODE,$e.AZTEC,$e.CODABAR,$e.CODE_39,$e.CODE_93,$e.CODE_128,$e.DATA_MATRIX,$e.MAXICODE,$e.ITF,$e.EAN_13,$e.EAN_8,$e.PDF_417,$e.RSS_14,$e.RSS_EXPANDED,$e.UPC_A,$e.UPC_E,$e.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],l=0,u=e.formatsToSupport;l<u.length;l++){var g=u[l];kV(g)?r.push(g):this.logger.warn("Invalid format: ".concat(g," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(hr(e))return!0;if(!hr(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(hr(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return hr(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var l=this,u=r.qrbox;this.validateQrboxConfig(u);var g=this.toQrdimensions(e,n,u),y=function(x){if(x<us.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(us.MIN_QR_BOX_SIZE,"px.")},b=function(x){return x>e&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),x=e),x};y(g.width),y(g.height),g.width=b(g.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var l=hr(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(l);var u=this.toQrdimensions(e,n,l);u.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var g=r.isShadedBoxEnabled()&&u.height<=n,y={x:0,y:0,width:e,height:n},b=g?this.getShadedRegionBounds(e,n,u):y,x=this.createCanvasElement(b.width,b.height),E={willReadFrequently:!0},A=x.getContext("2d",E);A.canvas.width=b.width,A.canvas.height=b.height,this.element.append(x),g&&this.possiblyInsertShadingElement(this.element,e,n,u),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=A,this.canvasElement=x},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=dc.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return e(l.text,Fv.createFromQrcodeResult(l)),r.possiblyUpdateShaders(!0),!0}).catch(function(l){r.possiblyUpdateShaders(!1);var u=dc.codeParseError(l);return n(u,NC.createFrom(u)),!1})},t.prototype.foreverScan=function(e,n,r){var l=this;if(this.shouldScan&&this.renderedCamera){var u=this.renderedCamera.getSurface(),g=u.videoWidth/u.clientWidth,y=u.videoHeight/u.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*g,x=this.qrRegion.height*y,E=this.qrRegion.x*g,A=this.qrRegion.y*y;this.context.drawImage(u,E,A,b,x,0,0,this.qrRegion.width,this.qrRegion.height);var N=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(e,n,r)},l.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(O){!O&&e.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(n,r).finally(function(){N()})):N()}).catch(function(O){l.logger.logError("Error happend while scanning context",O),N()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",l={user:!0,environment:!0},u="exact",g=function(M){if(M in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(M,"'")},y=Object.keys(e);if(y.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(y.length," keys");var b=Object.keys(e)[0];if(b!==n&&b!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(b===n){var x=e.facingMode;if(typeof x=="string"){if(g(x))return{facingMode:x}}else if(typeof x=="object")if(u in x){if(g(x["".concat(u)]))return{facingMode:{exact:x["".concat(u)]}}}else throw"'facingMode' should be string or object with"+" ".concat(u," as key.");else{var E=typeof x;throw"Invalid type of 'facingMode' = ".concat(E)}}else{var A=e.deviceId;if(typeof A=="string")return{deviceId:A};if(typeof A=="object"){if(u in A)return{deviceId:{exact:A["".concat(u)]}};throw"'deviceId' should be string or object with"+" ".concat(u," as key.")}else{var N=typeof A;throw"Invalid type of 'deviceId' = ".concat(N)}}}var O=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(O)},t.prototype.computeCanvasDrawConfig=function(e,n,r,l){if(e<=r&&n<=l){var u=(r-e)/2,g=(l-n)/2;return{x:u,y:g,width:e,height:n}}else{var y=e,b=n;return e>r&&(n=r/e*n,e=r),n>l&&(e=l/n*e,n=l),this.logger.log("Image downsampled from "+"".concat(y,"X").concat(b)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,l)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?us.BORDER_SHADER_MATCH_COLOR:us.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var l=e,u=n,g=document.createElement("canvas");return g.style.width="".concat(l,"px"),g.style.height="".concat(u,"px"),g.style.display="none",g.id=hr(r)?"qr-canvas":r,g},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,l){if(!(n-l.width<1||r-l.height<1)){var u=document.createElement("div");u.style.position="absolute";var g=(n-l.width)/2,y=(r-l.height)/2;if(u.style.borderLeft="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderRight="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderTop="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderBottom="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),u.style.boxSizing="border-box",u.style.top="0px",u.style.bottom="0px",u.style.left="0px",u.style.right="0px",u.id="".concat(us.SHADED_REGION_ELEMENT_ID),n-l.width<11||r-l.height<11)this.hasBorderShaders=!1;else{var b=5,x=40;this.insertShaderBorders(u,x,b,-b,null,0,!0),this.insertShaderBorders(u,x,b,-b,null,0,!1),this.insertShaderBorders(u,x,b,null,-b,0,!0),this.insertShaderBorders(u,x,b,null,-b,0,!1),this.insertShaderBorders(u,b,x+b,-b,null,-b,!0),this.insertShaderBorders(u,b,x+b,null,-b,-b,!0),this.insertShaderBorders(u,b,x+b,-b,null,-b,!1),this.insertShaderBorders(u,b,x+b,null,-b,-b,!1),this.hasBorderShaders=!0}e.append(u)}},t.prototype.insertShaderBorders=function(e,n,r,l,u,g,y){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=us.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(n,"px"),b.style.height="".concat(r,"px"),l!==null&&(b.style.top="".concat(l,"px")),u!==null&&(b.style.bottom="".concat(u,"px")),y?b.style.left="".concat(g,"px"):b.style.right="".concat(g,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),e.appendChild(b)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Fp="data:image/svg+xml;base64,",rz=Fp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",az=Fp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Kv=Fp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",oz="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Zv=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),lz=function(){function t(){this.data=Zv.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=Zv.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),cz=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Vv.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),l=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(l);var u=document.createElement("a");u.innerText=Vv.reportIssues(),u.href="https://github.com/mebjas/html5-qrcode/issues",u.target="new",u.style.color="white",this.infoDiv.appendChild(u),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),uz=function(){function t(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Kv,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=oz,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Kv,this.infoIcon.style.opacity="0.6")},t}(),fz=function(){function t(){var e=this;this.infoDiv=new cz,this.infoIcon=new uz(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),dz=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(E){try{x(r.next(E))}catch(A){g(A)}}function b(E){try{x(r.throw(E))}catch(A){g(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},hz=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(x){return function(E){return b([x,E])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(E){x=[6,E],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Qv=function(){function t(){}return t.hasPermissions=function(){return dz(this,void 0,void 0,function(){var e,n,r,l;return hz(this,function(u){switch(u.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=u.sent(),n=0,r=e;n<r.length;n++)if(l=r[n],l.kind==="videoinput"&&l.label)return[2,!0];return[2,!1]}})})},t}(),Ba=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var r=n[e];if(t.isCameraScanType(r))return!0}return!1},t.isCameraScanType=function(e){return e===oo.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===oo.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Hs.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Hs.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,l=e;r<l.length;r++){var u=l[r];if(!Hs.DEFAULT_SUPPORTED_SCAN_TYPE.includes(u))throw"Unsupported scan type ".concat(u)}return e},t}(),ds=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),Xr=function(){function t(){}return t.createElement=function(e,n){var r=document.createElement(e);return r.id=n,r.classList.add(ds.ALL_ELEMENT_CLASS),e==="button"&&r.setAttribute("type","button"),r},t}(),MC=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function y(E){try{x(r.next(E))}catch(A){g(A)}}function b(E){try{x(r.throw(E))}catch(A){g(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},DC=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(x){return function(E){return b([x,E])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(E){x=[6,E],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Jv=function(){function t(e,n,r){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=r}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return MC(this,void 0,void 0,function(){var e,n;return DC(this,function(r){switch(r.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=r.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?rn.torchOffButton():rn.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(e,n){var r=e?rn.torchOnFailedMessage():rn.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),gz=function(){function t(e,n){this.onTorchActionFailureCallback=n,this.torchButton=Xr.createElement("button",ds.TORCH_BUTTON_ID),this.torchController=new Jv(e,this,n)}return t.prototype.render=function(e,n){var r=this;this.torchButton.innerText=rn.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var l=this;this.torchButton.addEventListener("click",function(u){return MC(r,void 0,void 0,function(){return DC(this,function(g){switch(g.label){case 0:return[4,l.torchController.flipState()];case 1:return g.sent(),l.torchController.isTorchEnabled()?(l.torchButton.classList.remove(ds.TORCH_BUTTON_CLASS_TORCH_OFF),l.torchButton.classList.add(ds.TORCH_BUTTON_CLASS_TORCH_ON)):(l.torchButton.classList.remove(ds.TORCH_BUTTON_CLASS_TORCH_ON),l.torchButton.classList.add(ds.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new Jv(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=rn.torchOnButton(),this.torchController.reset()},t.create=function(e,n,r,l){var u=new t(n,l);return u.render(e,r),u},t}(),mz=function(){function t(e,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var l=document.createElement("label");l.setAttribute("for",this.getFileScanInputId()),l.style.display="inline-block",this.fileBasedScanRegion.appendChild(l),this.fileSelectionButton=Xr.createElement("button",ds.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(y){l.click()}),l.append(this.fileSelectionButton),this.fileScanInput=Xr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",l.appendChild(this.fileScanInput);var u=this;this.fileScanInput.addEventListener("change",function(y){if(!(y==null||y.target==null)){var b=y.target;if(!(b.files&&b.files.length===0)){var x=b.files,E=x[0],A=E.name;u.setImageNameToButton(A),r(E)}}});var g=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(g),this.fileBasedScanRegion.addEventListener("dragenter",function(y){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionActiveBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(y){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionDefaultBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(y){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionActiveBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(y){y.stopPropagation(),y.preventDefault(),u.fileBasedScanRegion.style.border=u.fileBasedScanRegionDefaultBorder();var b=y.dataTransfer;if(b){var x=b.files;if(!x||x.length===0)return;for(var E=!1,A=0;A<x.length;++A){var N=x.item(A);if(N){var O=/image.*/;if(N.type.match(O)){E=!0;var M=N.name;u.setImageNameToButton(M),r(N),g.innerText=rn.dragAndDropMessage();break}}}E||(g.innerText=rn.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=rn.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var r=e.substring(0,8),l=e.length,u=e.substring(l-8,l);e="".concat(r,"....").concat(u)}var g=rn.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=g},t.prototype.setInitialValueToButton=function(){var e=rn.fileSelectionChooseImage()+" - "+rn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,r){var l=new t(e,n,r);return l},t}(),pz=function(){function t(e){this.selectElement=Xr.createElement("select",ds.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var l=rn.selectCamera();n.innerText="".concat(l," (").concat(this.cameras.length,")  ")}for(var u=1,g=0,y=this.cameras;g<y.length;g++){var b=y[g],x=b.id,E=b.label==null?x:b.label;(!E||E==="")&&(E=[rn.anonymousCameraPrefix(),u++].join(" "));var A=document.createElement("option");A.value=x,A.innerText=E,this.options.push(A),this.selectElement.appendChild(A)}n.appendChild(this.selectElement),e.appendChild(n)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var n=0,r=this.options;n<r.length;n++){var l=r[n];if(l.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var r=new t(n);return r.render(e),r},t}(),xz=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Xr.createElement("input",ds.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=rn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var l=this;this.rangeInput.addEventListener("input",function(){return l.onValueChange()}),this.rangeInput.addEventListener("change",function(){return l.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=rn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,n,r,l){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=l.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var r=new t;return r.render(e,n),r},t}(),fs;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(fs||(fs={}));function yz(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function bz(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var wz=function(){function t(e,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Ba(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new RC(this.verbose),this.persistedDataManager=new lz,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(u,g){if(e)e(u,g);else{if(r.lastMatchFound===u)return;r.lastMatchFound=u,r.setHeaderMessage(rn.lastMatch(u),fs.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(u,g){n&&n(u,g)};var l=document.getElementById(this.elementId);if(!l)throw"HTML Element with id=".concat(this.elementId," not found");l.innerHTML="",this.createBasicLayout(l),this.html5Qrcode=new Wv(this.getScanRegionId(),bz(this.config,this.verbose))},t.prototype.pause=function(e){(hr(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,n=function(){var r=document.getElementById(e.elementId);r&&(r.innerHTML="",e.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,l){if(!e.html5Qrcode){r();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(u){if(!e.html5Qrcode){r();return}e.html5Qrcode.clear(),n(),r()}).catch(function(u){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",u),l(u)}):(e.html5Qrcode.clear(),n(),r())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Hs.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Hs.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Hs.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Hs.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Hs.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Hs.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Hs.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),Ba.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var l=document.createElement("div"),u=this.getDashboardId();l.id=u,l.style.width="100%",e.appendChild(l),this.setupInitialDashboard(l)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var r=new fz;r.renderInto(n);var l=document.createElement("div");l.id=this.getHeaderMessageContainerId(),l.style.display="none",l.style.textAlign="center",l.style.fontSize="14px",l.style.padding="2px 10px",l.style.margin="4px",l.style.borderTop="1px solid #f6f6f6",n.appendChild(l)},t.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},t.prototype.createCameraListUi=function(e,n,r){var l=this;l.showHideScanTypeSwapLink(!1),l.setHeaderMessage(rn.cameraPermissionRequesting());var u=function(){r||l.createPermissionButton(e,n)};Wv.getCameras().then(function(g){l.persistedDataManager.setHasPermission(!0),l.showHideScanTypeSwapLink(!0),l.resetHeaderMessage(),g&&g.length>0?(e.removeChild(n),l.renderCameraSelection(g)):(l.setHeaderMessage(rn.noCameraFound(),fs.STATUS_WARNING),u())}).catch(function(g){l.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:u(),l.setHeaderMessage(g,fs.STATUS_WARNING),l.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,n){var r=this,l=Xr.createElement("button",this.getCameraPermissionButtonId());l.innerText=rn.cameraPermissionTitle(),l.addEventListener("click",function(){l.disabled=!0,r.createCameraListUi(e,n,l)}),n.appendChild(l)},t.prototype.createPermissionsUi=function(e,n){var r=this;if(Ba.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Qv.hasPermissions().then(function(l){l?r.createCameraListUi(e,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n))}).catch(function(l){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Ba.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var l=document.createElement("div");l.style.textAlign="center",r.appendChild(l),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,l),this.renderFileScanUi(n)},t.prototype.renderFileScanUi=function(e){var n=Ba.isFileScanType(this.currentScanType),r=this,l=function(u){if(!r.html5Qrcode)throw"html5Qrcode not defined";Ba.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(rn.loadingImage()),r.html5Qrcode.scanFileV2(u,!0).then(function(g){r.resetHeaderMessage(),r.qrCodeSuccessCallback(g.decodedText,g)}).catch(function(g){r.setHeaderMessage(g,fs.STATUS_WARNING),r.qrCodeErrorCallback(g,NC.createFrom(g))}))};this.fileSelectionUi=mz.create(e,n,l)},t.prototype.renderCameraSelection=function(e){var n=this,r=this,l=document.getElementById(this.getDashboardSectionCameraScanRegionId());l.style.textAlign="center";var u=xz.create(l,!1),g=function(j){var U=j.zoomFeature();if(U.isSupported()){u.setOnCameraZoomValueChangeCallback(function(q){U.apply(q)});var H=1;n.config.defaultZoomValueIfSupported&&(H=n.config.defaultZoomValueIfSupported),H=jV(H,U.min(),U.max()),u.setValues(U.min(),U.max(),H,U.step()),u.show()}},y=pz.create(l,e),b=document.createElement("span"),x=Xr.createElement("button",ds.CAMERA_START_BUTTON_ID);x.innerText=rn.scanButtonStartScanningText(),b.appendChild(x);var E=Xr.createElement("button",ds.CAMERA_STOP_BUTTON_ID);E.innerText=rn.scanButtonStopScanningText(),E.style.display="none",E.disabled=!0,b.appendChild(E);var A,N=function(j){if(!j.torchFeature().isSupported()){A&&A.hide();return}A?A.updateTorchCapability(j.torchFeature()):A=gz.create(b,j.torchFeature(),{display:"none",marginLeft:"5px"},function(U){r.setHeaderMessage(U,fs.STATUS_WARNING)}),A.show()};l.appendChild(b);var O=function(j){j||(x.style.display="none"),x.innerText=rn.scanButtonStartScanningText(),x.style.opacity="1",x.disabled=!1,j&&(x.style.display="inline-block")};if(x.addEventListener("click",function(j){x.innerText=rn.scanButtonScanningStarting(),y.disable(),x.disabled=!0,x.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var U=y.getValue();r.persistedDataManager.setLastUsedCameraId(U),r.html5Qrcode.start(U,yz(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(H){E.disabled=!1,E.style.display="inline-block",O(!1);var q=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&N(q),n.config.showZoomSliderIfSupported===!0&&g(q)}).catch(function(H){r.showHideScanTypeSwapLink(!0),y.enable(),O(!0),r.setHeaderMessage(H,fs.STATUS_WARNING)})}),y.hasSingleItem()&&x.click(),E.addEventListener("click",function(j){if(!r.html5Qrcode)throw"html5Qrcode not defined";E.disabled=!0,r.html5Qrcode.stop().then(function(U){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),y.enable(),x.disabled=!1,E.style.display="none",x.style.display="inline-block",A&&(A.reset(),A.hide()),u.removeOnCameraZoomValueChangeCallback(),u.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(U){E.disabled=!1,r.setHeaderMessage(U,fs.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var M=r.persistedDataManager.getLastUsedCameraId();y.hasValue(M)?(y.setValue(M),x.click()):r.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,n=rn.textIfCameraScanSelected(),r=rn.textIfFileScanSelected(),l=document.getElementById(this.getDashboardSectionId()),u=document.createElement("div");u.style.textAlign="center";var g=Xr.createElement("span",this.getDashboardSectionSwapLinkId());g.style.textDecoration="underline",g.style.cursor="pointer",g.innerText=Ba.isCameraScanType(this.currentScanType)?n:r,g.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Ba.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),g.innerText=r,e.currentScanType=oo.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),g.innerText=n,e.currentScanType=oo.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),u.appendChild(g),l.appendChild(u)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Qv.hasPermissions().then(function(r){if(r){var l=document.getElementById(n.getCameraPermissionButtonId());if(!l)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";l.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,n){n||(n=fs.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=e,r.style.display="block",n){case fs.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case fs.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case fs.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=rz,this.cameraScanImage.alt=rn.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=az,this.fileScanImage.alt=rn.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return ds.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return ds.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();function e3({onScan:t,onClose:e}){const{t:n}=Xn(),r=R.useRef(`qr-reader-${Math.random().toString(36).substr(2,9)}`),l=R.useRef(null),[u,g]=R.useState(!1);R.useEffect(()=>{g(!1);const b={fps:10,qrbox:250,rememberLastUsedCamera:!0},x=new wz(r.current,b,!1);l.current=x;const E=N=>{u||(g(!0),x.clear().catch(()=>{}).finally(()=>{t(N)}))},A=N=>{`${N}`.includes("No MultiFormat Readers")||console.error("QR scan error:",N)};return x.render(E,A),()=>{var N;(N=l.current)==null||N.clear().catch(()=>{})}},[t,u]);const y=()=>{var b;g(!1),(b=l.current)==null||b.clear().catch(()=>{}).then(()=>{l.current&&l.current.render(x=>{u||(g(!0),l.current.clear().catch(()=>{}).finally(()=>t(x)))},x=>{`${x}`.includes("No MultiFormat Readers")||console.error("QR scan error:",x)})})};return C.jsx(Wi.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",damping:20},className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:C.jsxs(Wi.div,{initial:{y:-20},animate:{y:0},exit:{y:20},className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-sm",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsx("h3",{className:"text-lg font-bold",children:n("scanStudentQr")}),C.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-800",children:"✕"})]}),C.jsx("div",{id:r.current,style:{width:"100%",height:"300px"},className:"mb-4 bg-gray-50"}),C.jsxs("div",{className:"flex justify-between gap-2",children:[u&&C.jsx("button",{onClick:y,className:"flex-1 px-4 py-2 bg-blue-100 hover:bg-blue-200 rounded-lg",children:n("scanAnother")}),C.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg",children:n("cancel")})]})]})})}const t3=["bg-pink-300","bg-orange-300","bg-yellow-300","bg-lime-300","bg-emerald-300","bg-cyan-300","bg-purple-300","bg-rose-300"],Rg="#f6f6f6",Bs="#6654b3",rc=()=>new Date().toISOString().slice(0,10);let qu=null,Yu=null;try{qu=new Audio("/ding.wav"),Yu=new Audio("/wrongbeep.wav")}catch{}const Og=()=>{try{qu&&(qu.pause(),qu.currentTime=0,qu.play())}catch{}},ah=()=>{try{Yu&&(Yu.pause(),Yu.currentTime=0,Yu.play())}catch{}};function vz(t,e){if(!t||!e)return!1;let n=t.purchased_packages;if(typeof n=="string")try{n=JSON.parse(n)}catch{n=null}return Array.isArray(n)?n.some(r=>r&&r.course_id===e):!1}function Ez(t,e){return!t||!e?!1:!!(t.courses&&typeof t.courses=="object"&&t.courses[e]||t.course_limits&&t.course_limits[e]>0||vz(t,e))}function Sz(){const{t,i18n:e}=Xn(),n=Ns(),[r,l]=R.useState(null),[u,g]=R.useState(!1),[y,b]=R.useState(!1),[x,E]=R.useState(null),[A,N]=R.useState(null);R.useEffect(()=>{if(!x)return;const X=setTimeout(()=>E(null),4e3);return()=>clearTimeout(X)},[x]);const[O,M]=R.useState(!0),[j,U]=R.useState(!0),[H,q]=R.useState(""),[B,V]=R.useState([]),[G,ne]=R.useState([]),[K,ae]=R.useState([]);R.useEffect(()=>{(async()=>{const{data:X}=await Pe.from("courses").select("id,name").order("name");V(X||[]),M(!1);const[le,oe]=await Promise.all([Pe.from("students").select("id,first_name,last_name,courses,course_limits,qr_code_url,purchased_packages"),Pe.from("attendance").select("*").gte("attended_at_ts",rc())]);ne(le.data||[]),ae(oe.data||[]),U(!1)})()},[]);const Q=K.filter(X=>X.approved_by),we=R.useMemo(()=>{const X={};return Q.forEach(le=>{var oe;le.course_id&&(X[oe=le.student_id]??(X[oe]={}),X[le.student_id][le.course_id]=(X[le.student_id][le.course_id]||0)+1)}),X},[Q]),je=R.useMemo(()=>{const X={};return Q.forEach(le=>{var oe;le.course_id&&le.attended_at_ts.slice(0,10)===rc()&&(X[oe=le.course_id]??(X[oe]=new Set),X[le.course_id].add(le.student_id))}),X},[Q]),_e=K.filter(X=>!X.approved_by),he=(X,le)=>{var oe;return((oe=we[X])==null?void 0:oe[le])||0},Ue=(X,le)=>X.course_limits&&X.course_limits[le]||0,ie=(X,le)=>{var oe;return(oe=je[le])==null?void 0:oe.has(X)};async function se(X){await Pe.from("attendance").delete().eq("id",X.id),ae(le=>le.filter(oe=>oe.id!==X.id))}async function ce(X,le){const oe=`${X.id}|${le}`;if(H===oe)return;q(oe);const{data:{user:Ne}}=await Pe.auth.getUser(),Ye=Ne==null?void 0:Ne.id;try{if(ie(X.id,le)){const be=K.find(ht=>ht.student_id===X.id&&ht.course_id===le&&ht.attended_at_ts.slice(0,10)===rc());be&&(await Pe.from("attendance").delete().eq("id",be.id),ae(ht=>ht.filter(Ge=>Ge.id!==be.id))),E({message:t("uncheckedStudent",{first:X.first_name,last:X.last_name}),type:"error"})}else{if(Ue(X,le)&&he(X.id,le)>=Ue(X,le)){E({message:t("overLimit",{first:X.first_name,last:X.last_name}),type:"error"}),ah();return}const{data:be,error:ht}=await Pe.from("attendance").insert({student_id:X.id,course_id:le,attended_at_ts:rc(),approved_by:Ye}).select();if(ht)throw ht;ae(Ge=>[...Ge,be[0]]),E({message:t("checkedInStudent",{first:X.first_name,last:X.last_name}),type:"success"}),Og()}}finally{q(""),b(!1)}}async function Le(X){const le=X.trim(),oe=G.find(be=>be.id===le);if(b(!1),!oe){ah(),E({message:t("unknownCode"),type:"error"});return}if(K.some(be=>be.student_id===le&&be.attended_at_ts.slice(0,10)===rc())){ah(),E({message:t("alreadyScanned",{first:oe.first_name,last:oe.last_name}),type:"error"});return}const{data:Ne,error:Ye}=await Pe.from("attendance").insert({student_id:le,course_id:null,attended_at_ts:rc()}).select();Ye?(ah(),E({message:t("scanFailed"),type:"error"})):(ae(be=>[...be,Ne[0]]),Og(),E({message:t("pendingStudent",{first:oe.first_name,last:oe.last_name}),type:"success"}))}async function Ve(X,le){if(!le.length)return;const{data:{user:oe}}=await Pe.auth.getUser(),Ne=oe==null?void 0:oe.id,Ye=G.find(be=>be.id===X.student_id);if(await Pe.from("attendance").update({course_id:le[0],approved_by:Ne}).eq("id",X.id),le.length>1){const be=le.slice(1).map(ht=>({student_id:X.student_id,course_id:ht,attended_at_ts:X.attended_at_ts,approved_by:Ne}));await Pe.from("attendance").insert(be)}ae(be=>{const ht=be.filter(xn=>xn.id!==X.id),Ge={...X,course_id:le[0],approved_by:Ne},Mt=[...ht,Ge];return le.length>1&&le.slice(1).forEach(xn=>Mt.push({...X,id:crypto.randomUUID(),course_id:xn,approved_by:Ne})),Mt}),Og(),E({message:t("checkedInStudent",{first:Ye.first_name,last:Ye.last_name}),type:"success"})}const Y=C.jsx(Bu,{children:x&&C.jsxs(Wi.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",stiffness:300},className:`fixed bottom-4 left-1/2 transform -translate-x-1/2 
                      max-w-md w-full px-4 py-3 rounded-xl shadow-lg flex 
                      justify-between items-center z-50 ${x.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[C.jsx("span",{children:x.message}),C.jsx("button",{onClick:()=>E(null),className:"text-xl font-bold leading-none",children:"×"})]},"banner")});return u?j?C.jsx("div",{className:"p-6 text-center",children:t("loadingPending")}):C.jsxs(C.Fragment,{children:[Y,C.jsxs("main",{style:{background:Rg},className:"min-h-screen p-6",children:[C.jsxs("header",{className:"flex items-center gap-4 mb-4",children:[C.jsx("button",{onClick:()=>g(!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 shadow",children:C.jsx(sm,{className:"w-6 h-6 text-gray-700"})}),C.jsx("h2",{className:"text-2xl font-bold",style:{color:Bs},children:t("pendingCheckins")})]}),_e.length===0?C.jsx("p",{className:"text-gray-500",children:t("noPendingCheckins")}):_e.map(X=>{const le=G.find(oe=>oe.id===X.student_id);return le?C.jsx(Cz,{row:X,student:le,courses:B,onApprove:Ve,onDelete:se},X.id):null})]})]}):C.jsxs("div",{style:{background:Rg},className:"min-h-screen",children:[Y,C.jsx(Bu,{mode:"wait",children:r==null?C.jsxs("main",{className:"min-h-screen p-6 flex flex-col items-center gap-8",style:{background:Rg},children:[C.jsxs("div",{className:"w-full max-w-5xl flex justify-between items-center mb-6",children:[C.jsx("h1",{className:"text-3xl font-extrabold",style:{color:Bs},children:t("takeAttendance")}),C.jsxs("div",{className:"flex gap-3",children:[C.jsxs("button",{onClick:()=>g(!0),className:"relative p-2 bg-yellow-400 text-white rounded-full shadow",children:[C.jsx(y9,{className:"w-5 h-5"}),_e.length>0&&C.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-[10px] px-1 rounded-full",children:_e.length})]}),C.jsx(Wi.button,{whileTap:{scale:.92},onClick:()=>b(!0),className:"p-2",style:{background:Bs,color:"#fff",borderRadius:"9999px",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.12)"},children:C.jsx(ew,{className:"w-6 h-6"})})]})]}),C.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-7 w-full max-w-4xl",children:O?Array(6).fill(0).map((X,le)=>C.jsx(Wi.div,{initial:{opacity:.3},animate:{opacity:1},className:"w-32 h-32 bg-gray-200 rounded-2xl"},le)):B.map((X,le)=>C.jsx(Wi.button,{whileHover:{scale:1.06},whileTap:{scale:.95},onClick:()=>l(X),className:`${t3[le%t3.length]} w-32 h-32 md:w-40 md:h-40 rounded-2xl shadow-lg
                                 flex items-center justify-center text-white font-bold text-lg transition-all duration-150`,style:{boxShadow:"0 3px 16px 0 rgba(102,84,179,0.06)"},children:X.name},X.id))}),C.jsx(Bu,{children:y&&C.jsx(e3,{onScan:Le,onClose:()=>b(!1)},"scanner-grid")})]}):j?C.jsx("div",{className:"p-6 text-center",children:t("loadingStudents")}):C.jsxs(Wi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-6 space-y-6",children:[C.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[C.jsx("button",{onClick:()=>l(null),className:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 shadow",children:C.jsx(sm,{className:"w-6 h-6 text-gray-700"})}),C.jsx("h2",{className:"text-2xl font-bold",style:{color:Bs},children:r.name}),C.jsx(Wi.button,{whileTap:{scale:.92},onClick:()=>b(!0),className:"ml-auto p-2",style:{background:Bs,color:"#fff",borderRadius:"9999px",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.12)"},children:C.jsx(ew,{className:"w-6 h-6"})})]}),C.jsxs("table",{className:"min-w-full bg-white rounded-xl shadow",style:{boxShadow:"0 2px 12px 0 rgba(102,84,179,0.05)"},children:[C.jsx("thead",{style:{background:"#ede9fe"},children:C.jsxs("tr",{children:[C.jsx("th",{className:"px-3 py-2 text-left font-semibold",style:{color:Bs},children:t("student")}),C.jsx("th",{className:"px-3 py-2 font-semibold",style:{color:Bs},children:t("slots")}),C.jsx("th",{className:"px-3 py-2 font-semibold",style:{color:Bs},children:t("usedLimit")}),C.jsx("th",{className:"px-3 py-2 font-semibold",style:{color:Bs},children:t("check")}),C.jsx("th",{className:"px-3 py-2 font-semibold",style:{color:Bs},children:"QR"})]})}),C.jsx("tbody",{children:G.filter(X=>Ez(X,r.id)).map(X=>{const le=he(X.id,r.id),oe=Ue(X,r.id),Ne=ie(X.id,r.id),Ye=H===`${X.id}|${r.id}`;return C.jsxs(Wi.tr,{whileHover:{backgroundColor:"#f3f4f6"},className:"border-t transition",children:[C.jsxs("td",{onClick:()=>n(`/myschool/student/${X.id}`),className:"px-3 py-1 text-blue-700 font-semibold hover:underline cursor-pointer",children:[X.first_name," ",X.last_name]}),C.jsx("td",{className:"px-3 py-1 text-gray-700",children:X.courses&&X.courses[r.id]?Object.entries(X.courses[r.id]).flatMap(([be,ht])=>ht.map(Ge=>`${be} ${Ge}`)).join(", "):""}),C.jsxs("td",{className:"px-3 py-1 text-center",children:[le,"/",oe||t("unlimited")]}),C.jsx("td",{className:"px-3 py-1 text-center",children:C.jsx(Wi.button,{whileTap:{scale:.82},disabled:Ye,onClick:()=>ce(X,r.id),className:`w-9 h-9 rounded-full transition font-bold ${Ne?"bg-green-500 text-white":oe&&le>=oe?"bg-gray-200 text-gray-400":"bg-gray-300 text-gray-700 hover:bg-gray-400"}`,children:"✓"})}),C.jsx("td",{className:"px-3 py-1 text-center",children:C.jsx("button",{onClick:()=>N(X.qr_code_url),disabled:!X.qr_code_url,className:"px-3 py-1 bg-purple-100 hover:bg-purple-200 rounded-full text-xs text-[#6654b3] font-bold disabled:opacity-50",children:"QR"})})]},X.id)})})]}),C.jsx(Bu,{children:y&&C.jsx(e3,{onScan:X=>{const le=X.trim(),oe=G.find(Ne=>Ne.id===le);oe&&ce(oe,r.id)},onClose:()=>b(!1)},"scanner-detail")})]},"detail")}),C.jsx(Bu,{children:A&&C.jsx(Wi.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20},className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:C.jsxs(Wi.div,{initial:{y:-20},animate:{y:0},exit:{y:20},className:"bg-white p-6 rounded-xl shadow-lg text-center",children:[C.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:Bs},children:t("studentQrCode")}),C.jsx("img",{src:A,alt:"QR",className:"mx-auto max-w-xs mb-4"}),C.jsxs("div",{className:"flex justify-center gap-4",children:[C.jsx("a",{href:A,download:!0,className:"px-4 py-2 bg-blue-100 hover:bg-blue-200 rounded-lg",children:t("download")}),C.jsx("button",{onClick:()=>{const X=window.open("");X&&(X.document.write(`<img src="${A}" onload="window.print();window.close()" />`),X.document.close())},className:"px-4 py-2 bg-green-100 hover:bg-green-200 rounded-lg",children:t("print")}),C.jsx("button",{onClick:()=>N(null),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg",children:t("close")})]})]})},"qrModal")})]})}function Cz({row:t,student:e,courses:n,onApprove:r,onDelete:l}){const{t:u}=Xn(),[g,y]=R.useState([]),b=Object.keys(e.courses||{});return C.jsxs(Wi.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},exit:{opacity:0,y:16},className:"border border-gray-100 bg-white p-4 mb-4 rounded-2xl shadow",style:{boxShadow:"0 2px 10px 0 rgba(102,84,179,0.04)"},children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsxs("h3",{className:"font-semibold text-[#6654b3]",children:[e.first_name," ",e.last_name]}),C.jsx("button",{onClick:()=>l(t),className:"text-gray-400 hover:text-red-500 text-lg px-2 font-bold",children:"×"})]}),C.jsx("div",{className:"flex flex-wrap gap-3 mb-3",children:b.map(x=>{var E;return C.jsxs("label",{className:"inline-flex items-center gap-2 px-2 py-1 rounded-lg bg-[#ede9fe] text-[#6654b3] font-semibold cursor-pointer",children:[C.jsx("input",{type:"checkbox",checked:g.includes(x),onChange:A=>y(N=>A.target.checked?[...N,x]:N.filter(O=>O!==x)),className:"accent-[#6654b3]"}),(E=n.find(A=>A.id===x))==null?void 0:E.name]},x)})}),C.jsx("button",{disabled:!g.length,onClick:()=>r(t,g),className:"px-5 py-2 bg-green-600 hover:bg-green-700 text-white rounded-full font-bold disabled:opacity-50 transition",children:u("approve")})]})}function Az(){const{t}=Xn();return C.jsx("div",{className:"text-2xl font-bold",children:t("billingComingSoon")},si.language)}function Tz(){return C.jsx("div",{className:"text-2xl font-bold",children:"Reports Page (coming soon)"})}function _z(){const{t}=Xn();return C.jsx("div",{className:"text-2xl font-bold",children:t("Messaging Page (coming soon)")},si.language)}const Nz="#f6f6f6";function Rz(){const{t}=Xn(),{user:e}=Uh(),n=(e==null?void 0:e.role)==="admin",[r,l]=R.useState([]),[u,g]=R.useState(!1),[y,b]=R.useState(null),[x,E]=R.useState(!1),[A,N]=R.useState(""),[O,M]=R.useState(""),[j,U]=R.useState(""),[H,q]=R.useState("staff"),[B,V]=R.useState(!1),[G,ne]=R.useState(null),[K,ae]=R.useState(!1);R.useEffect(()=>{Q()},[]);async function Q(){g(!0),b(null);const{data:he,error:Ue}=await Pe.from("profiles").select("*").order("role",{ascending:!1});if(Ue)b(Ue.message);else{const ie=he;l(n?ie:ie.filter(se=>se.id===(e==null?void 0:e.id)))}g(!1)}async function we(he){var Le;he.preventDefault(),V(!0),b(null);const{data:Ue,error:ie}=await Pe.auth.admin.createUser({email:A.trim().toLowerCase(),password:j,email_confirm:!0});if(ie){b(ie.message),V(!1);return}const se=(Le=Ue.user)==null?void 0:Le.id;if(!se){b(t("noUserIdError")),V(!1);return}const{error:ce}=await Pe.from("profiles").insert([{id:se,email:A.trim().toLowerCase(),full_name:O.trim()||null,role:H}]);ce?b(ce.message):(N(""),M(""),U(""),q("staff"),Q()),V(!1)}async function je(){if(!G)return;ae(!0);const{error:he}=await Pe.from("profiles").update({full_name:G.full_name,role:G.role}).eq("id",G.id);he?alert(he.message):(ne(null),Q()),ae(!1)}async function _e(he){he.role!=="admin"&&window.confirm(t("confirmRemoveStaff"))&&(await Pe.from("profiles").delete().eq("id",he.id),Q())}return C.jsxs("div",{className:"py-8 px-2 min-h-screen",style:{background:Nz},children:[C.jsxs("div",{className:"max-w-5xl mx-auto flex justify-between items-center mb-8",children:[C.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-[#6654b3]",children:t("settingsTitle")}),n&&C.jsx("button",{onClick:()=>E(he=>!he),className:"flex items-center gap-2 bg-[#6654b3] hover:bg-[#5542a0] text-white px-5 py-2 rounded-full transition font-semibold shadow",children:x?C.jsxs(C.Fragment,{children:[C.jsx(gE,{className:"w-5 h-5"}),t("closeInvite")]}):C.jsxs(C.Fragment,{children:[C.jsx(I9,{className:"w-5 h-5"}),t("inviteUser")]})})]}),x&&n&&C.jsxs("div",{className:"bg-white shadow rounded-2xl p-6 max-w-xl mx-auto mb-8 border border-purple-100",children:[y&&C.jsx("p",{className:"text-red-600 mb-3",children:y}),C.jsxs("form",{onSubmit:we,className:"grid gap-4 sm:grid-cols-2",children:[C.jsx("input",{type:"email",required:!0,placeholder:t("email"),value:A,onChange:he=>N(he.target.value),className:"border rounded px-3 py-2",autoFocus:!0}),C.jsx("input",{type:"text",required:!0,placeholder:t("fullName"),value:O,onChange:he=>M(he.target.value),className:"border rounded px-3 py-2"}),C.jsx("input",{type:"password",required:!0,placeholder:t("tempPassword"),value:j,onChange:he=>U(he.target.value),className:"border rounded px-3 py-2"}),C.jsxs("select",{value:H,onChange:he=>q(he.target.value),className:"border rounded px-3 py-2",children:[C.jsx("option",{value:"staff",children:t("roleStaff")}),C.jsx("option",{value:"admin",children:t("roleAdmin")})]}),C.jsx("div",{className:"sm:col-span-2 flex justify-end mt-2",children:C.jsx("button",{disabled:B,className:"bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-full font-bold transition disabled:opacity-60",children:t(B?"inviting":"sendInvite")})})]})]}),C.jsxs("div",{className:"max-w-5xl mx-auto",children:[C.jsx("h2",{className:"text-2xl font-bold text-[#6654b3] mb-5",children:t("teamMembers")}),u?C.jsx("p",{children:t("loading")}):r.length===0?C.jsx("p",{className:"text-gray-500",children:t("noUsers")}):C.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:r.map(he=>C.jsxs("div",{className:"bg-white rounded-2xl border border-purple-100 shadow p-6 flex flex-col justify-between",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-lg font-bold text-[#6654b3]",children:he.full_name??"—"}),C.jsx("p",{className:"text-sm text-gray-500 mt-1",children:he.email}),C.jsx("span",{className:"inline-block mt-2 text-xs font-medium bg-[#f6f6f6] px-3 py-1 rounded-full text-[#6654b3] border border-purple-100",children:t("role_"+he.role)})]}),C.jsxs("div",{className:"mt-6 flex gap-2",children:[C.jsxs("button",{onClick:()=>n&&ne(he),disabled:!n,className:`flex-1 flex items-center justify-center gap-1 border rounded-full py-2 transition font-semibold
                      ${n?"border-purple-200 hover:bg-[#f6f6f6]":"opacity-50 cursor-not-allowed"}`,children:[C.jsx(R9,{className:"w-5 h-5"}),t("edit")]}),n&&he.role==="staff"&&C.jsxs("button",{onClick:()=>_e(he),className:"flex-1 flex items-center justify-center gap-1 border border-red-200 text-red-600 rounded-full py-2 hover:bg-red-50 font-semibold",children:[C.jsx(L9,{className:"w-5 h-5"}),t("delete")]})]})]},he.id))})]}),G&&C.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:C.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md space-y-4 border border-purple-100",children:[C.jsx("h2",{className:"text-xl font-bold text-[#6654b3]",children:t("editUser")}),C.jsxs("label",{className:"block text-sm font-semibold text-[#6654b3]",children:[t("fullName"),C.jsx("input",{value:G.full_name??"",onChange:he=>ne({...G,full_name:he.target.value}),className:"w-full border rounded px-3 py-2 mt-1"})]}),C.jsxs("label",{className:"block text-sm font-semibold text-[#6654b3]",children:[t("emailReadOnly"),C.jsx("input",{value:G.email??"",disabled:!0,className:"w-full border rounded px-3 py-2 mt-1 bg-gray-100"})]}),(e==null?void 0:e.id)!==G.id&&C.jsxs("label",{className:"block text-sm font-semibold text-[#6654b3]",children:[t("role"),C.jsxs("select",{value:G.role,onChange:he=>ne({...G,role:he.target.value}),className:"w-full border rounded px-3 py-2 mt-1",children:[C.jsx("option",{value:"staff",children:t("roleStaff")}),C.jsx("option",{value:"admin",children:t("roleAdmin")})]})]}),C.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[C.jsx("button",{onClick:()=>ne(null),className:"px-4 py-2 rounded-full border border-purple-200 hover:bg-[#f6f6f6] text-[#6654b3] font-semibold",children:t("cancel")}),C.jsx("button",{onClick:je,disabled:K,className:"bg-[#6654b3] text-white px-4 py-2 rounded-full font-semibold disabled:opacity-50",children:t(K?"saving":"save")})]})]})})]})}const Oz=new kI;function Iz(){return C.jsx(FI,{client:Oz,children:C.jsx(cI,{children:C.jsxs(UO,{children:[C.jsx(Gn,{path:"/login",element:C.jsx(e9,{})}),C.jsxs(Gn,{element:C.jsx($9,{children:C.jsx(H9,{})}),children:[C.jsx(Gn,{path:"/dashboard",element:C.jsx(nV,{})}),C.jsx(Gn,{path:"/myschool/students",element:C.jsx(gV,{})}),C.jsx(Gn,{path:"/myschool/student/:id",element:C.jsx(SV,{})}),C.jsx(Gn,{path:"/admissions",element:C.jsx(Bv,{})}),C.jsx(Gn,{path:"/apply/:token",element:C.jsx(Bv,{publicMode:!0})}),C.jsx(Gn,{path:"/attendance",element:C.jsx(Sz,{})}),C.jsx(Gn,{path:"/billing",element:C.jsx(Az,{})}),C.jsx(Gn,{path:"/reports",element:C.jsx(Tz,{})}),C.jsx(Gn,{path:"/messaging",element:C.jsx(_z,{})}),C.jsx(Gn,{path:"/settings",element:C.jsx(Rz,{})}),C.jsx(Gn,{path:"/review",element:C.jsx(bw,{})}),C.jsx(Gn,{path:"/myschool/courses",element:C.jsx(cV,{})}),C.jsx(Gn,{path:"/myschool/students/inactive",element:C.jsx(IV,{})}),C.jsx(Gn,{path:"/notifications",element:C.jsx(sV,{})}),C.jsx(Gn,{path:"/review-hub",element:C.jsx(bw,{})}),C.jsx(Gn,{index:!0,element:C.jsx(gb,{to:"/dashboard",replace:!0})})]}),C.jsx(Gn,{path:"*",element:C.jsx(gb,{to:"/login",replace:!0})})]})})})}GR.createRoot(document.getElementById("root")).render(C.jsx(R.StrictMode,{children:C.jsx(V9,{children:C.jsx(Iz,{})})}));
