var j2=t=>{throw TypeError(t)};var K1=(t,e,n)=>e.has(t)||j2("Cannot "+n);var J=(t,e,n)=>(K1(t,e,"read from private field"),n?n.call(t):e.get(t)),rt=(t,e,n)=>e.has(t)?j2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ye=(t,e,n,r)=>(K1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),wt=(t,e,n)=>(K1(t,e,"access private method"),n);var Gf=(t,e,n,r)=>({set _(l){Ye(t,e,l,n)},get _(){return J(t,e,r)}});function u3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const l in r)if(l!=="default"&&!(l in t)){const u=Object.getOwnPropertyDescriptor(r,l);u&&Object.defineProperty(t,l,u.get?u:{enumerable:!0,get:()=>r[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var qf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function GA(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var l=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,l.get?l:{enumerable:!0,get:function(){return t[r]}})}),n}var Z1={exports:{}},Ou={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P2;function qA(){if(P2)return Ou;P2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,u){var h=null;if(u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),"key"in l){u={};for(var y in l)y!=="key"&&(u[y]=l[y])}else u=l;return l=u.ref,{$$typeof:t,type:r,key:h,ref:l!==void 0?l:null,props:u}}return Ou.Fragment=e,Ou.jsx=n,Ou.jsxs=n,Ou}var B2;function YA(){return B2||(B2=1,Z1.exports=qA()),Z1.exports}var E=YA();const ft=t=>typeof t=="string",Iu=()=>{let t,e;const n=new Promise((r,l)=>{t=r,e=l});return n.resolve=t,n.reject=e,n},U2=t=>t==null?"":""+t,XA=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},WA=/###/g,F2=t=>t&&t.indexOf("###")>-1?t.replace(WA,"."):t,V2=t=>!t||ft(t),Wu=(t,e,n)=>{const r=ft(e)?e.split("."):e;let l=0;for(;l<r.length-1;){if(V2(t))return{};const u=F2(r[l]);!t[u]&&n&&(t[u]=new n),Object.prototype.hasOwnProperty.call(t,u)?t=t[u]:t={},++l}return V2(t)?{}:{obj:t,k:F2(r[l])}},H2=(t,e,n)=>{const{obj:r,k:l}=Wu(t,e,Object);if(r!==void 0||e.length===1){r[l]=n;return}let u=e[e.length-1],h=e.slice(0,e.length-1),y=Wu(t,h,Object);for(;y.obj===void 0&&h.length;)u=`${h[h.length-1]}.${u}`,h=h.slice(0,h.length-1),y=Wu(t,h,Object),y!=null&&y.obj&&typeof y.obj[`${y.k}.${u}`]<"u"&&(y.obj=void 0);y.obj[`${y.k}.${u}`]=n},KA=(t,e,n,r)=>{const{obj:l,k:u}=Wu(t,e,Object);l[u]=l[u]||[],l[u].push(n)},xh=(t,e)=>{const{obj:n,k:r}=Wu(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},ZA=(t,e,n)=>{const r=xh(t,n);return r!==void 0?r:xh(e,n)},d3=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?ft(t[r])||t[r]instanceof String||ft(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):d3(t[r],e[r],n):t[r]=e[r]);return t},Kl=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var QA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const JA=t=>ft(t)?t.replace(/[&<>"'\/]/g,e=>QA[e]):t;class e4{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const t4=[" ",",","?","!",";"],n4=new e4(20),s4=(t,e,n)=>{e=e||"",n=n||"";const r=t4.filter(h=>e.indexOf(h)<0&&n.indexOf(h)<0);if(r.length===0)return!0;const l=n4.getRegExp(`(${r.map(h=>h==="?"?"\\?":h).join("|")})`);let u=!l.test(t);if(!u){const h=t.indexOf(n);h>0&&!l.test(t.substring(0,h))&&(u=!0)}return u},kg=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let l=t;for(let u=0;u<r.length;){if(!l||typeof l!="object")return;let h,y="";for(let b=u;b<r.length;++b)if(b!==u&&(y+=n),y+=r[b],h=l[y],h!==void 0){if(["string","number","boolean"].indexOf(typeof h)>-1&&b<r.length-1)continue;u+=b-u+1;break}l=h}return l},od=t=>t==null?void 0:t.replace("_","-"),i4={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class yh{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||i4,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,l){return l&&!this.debug?null:(ft(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new yh(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new yh(this.logger,e)}}var xr=new yh;class Bh{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const l=this.observers[r].get(n)||0;this.observers[r].set(n,l+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([l,u])=>{for(let h=0;h<u;h++)l(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([l,u])=>{for(let h=0;h<u;h++)l.apply(l,[e,...n])})}}class z2 extends Bh{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,l={}){var x,S;const u=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,h=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure;let y;e.indexOf(".")>-1?y=e.split("."):(y=[e,n],r&&(Array.isArray(r)?y.push(...r):ft(r)&&u?y.push(...r.split(u)):y.push(r)));const b=xh(this.data,y);return!b&&!n&&!r&&e.indexOf(".")>-1&&(e=y[0],n=y[1],r=y.slice(2).join(".")),b||!h||!ft(r)?b:kg((S=(x=this.data)==null?void 0:x[e])==null?void 0:S[n],r,u)}addResource(e,n,r,l,u={silent:!1}){const h=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator;let y=[e,n];r&&(y=y.concat(h?r.split(h):r)),e.indexOf(".")>-1&&(y=e.split("."),l=n,n=y[1]),this.addNamespaces(n),H2(this.data,y,l),u.silent||this.emit("added",e,n,r,l)}addResources(e,n,r,l={silent:!1}){for(const u in r)(ft(r[u])||Array.isArray(r[u]))&&this.addResource(e,n,u,r[u],{silent:!0});l.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,l,u,h={silent:!1,skipCopy:!1}){let y=[e,n];e.indexOf(".")>-1&&(y=e.split("."),l=r,r=n,n=y[1]),this.addNamespaces(n);let b=xh(this.data,y)||{};h.skipCopy||(r=JSON.parse(JSON.stringify(r))),l?d3(b,r,u):b={...b,...r},H2(this.data,y,b),h.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(l=>n[l]&&Object.keys(n[l]).length>0)}toJSON(){return this.data}}var f3={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,l){return t.forEach(u=>{var h;e=((h=this.processors[u])==null?void 0:h.process(e,n,r,l))??e}),e}};const $2={},G2=t=>!ft(t)&&typeof t!="boolean"&&typeof t!="number";class bh extends Bh{constructor(e,n={}){super(),XA(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=xr.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const l=this.resolve(e,r);return(l==null?void 0:l.res)!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const l=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let u=n.ns||this.options.defaultNS||[];const h=r&&e.indexOf(r)>-1,y=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!s4(e,r,l);if(h&&!y){const b=e.match(this.interpolator.nestingRegexp);if(b&&b.length>0)return{key:e,namespaces:ft(u)?[u]:u};const x=e.split(r);(r!==l||r===l&&this.options.ns.indexOf(x[0])>-1)&&(u=x.shift()),e=x.join(l)}return{key:e,namespaces:ft(u)?[u]:u}}translate(e,n,r){let l=typeof n=="object"?{...n}:n;if(typeof l!="object"&&this.options.overloadTranslationOptionHandler&&(l=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(l={...l}),l||(l={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const u=l.returnDetails!==void 0?l.returnDetails:this.options.returnDetails,h=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,{key:y,namespaces:b}=this.extractFromKey(e[e.length-1],l),x=b[b.length-1];let S=l.nsSeparator!==void 0?l.nsSeparator:this.options.nsSeparator;S===void 0&&(S=":");const A=l.lng||this.language,N=l.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((A==null?void 0:A.toLowerCase())==="cimode")return N?u?{res:`${x}${S}${y}`,usedKey:y,exactUsedKey:y,usedLng:A,usedNS:x,usedParams:this.getUsedParamsDetails(l)}:`${x}${S}${y}`:u?{res:y,usedKey:y,exactUsedKey:y,usedLng:A,usedNS:x,usedParams:this.getUsedParamsDetails(l)}:y;const I=this.resolve(e,l);let M=I==null?void 0:I.res;const j=(I==null?void 0:I.usedKey)||y,U=(I==null?void 0:I.exactUsedKey)||y,$=["[object Number]","[object Function]","[object RegExp]"],Y=l.joinArrays!==void 0?l.joinArrays:this.options.joinArrays,P=!this.i18nFormat||this.i18nFormat.handleAsObject,V=l.count!==void 0&&!ft(l.count),z=bh.hasDefaultValue(l),Z=V?this.pluralResolver.getSuffix(A,l.count,l):"",W=l.ordinal&&V?this.pluralResolver.getSuffix(A,l.count,{ordinal:!1}):"",ae=V&&!l.ordinal&&l.count===0,X=ae&&l[`defaultValue${this.options.pluralSeparator}zero`]||l[`defaultValue${Z}`]||l[`defaultValue${W}`]||l.defaultValue;let be=M;P&&!M&&z&&(be=X);const Ae=G2(be),ve=Object.prototype.toString.apply(be);if(P&&be&&Ae&&$.indexOf(ve)<0&&!(ft(Y)&&Array.isArray(be))){if(!l.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const ce=this.options.returnedObjectHandler?this.options.returnedObjectHandler(j,be,{...l,ns:b}):`key '${y} (${this.language})' returned an object instead of string.`;return u?(I.res=ce,I.usedParams=this.getUsedParamsDetails(l),I):ce}if(h){const ce=Array.isArray(be),Fe=ce?[]:{},se=ce?U:j;for(const re in be)if(Object.prototype.hasOwnProperty.call(be,re)){const le=`${se}${h}${re}`;z&&!M?Fe[re]=this.translate(le,{...l,defaultValue:G2(X)?X[re]:void 0,joinArrays:!1,ns:b}):Fe[re]=this.translate(le,{...l,joinArrays:!1,ns:b}),Fe[re]===le&&(Fe[re]=be[re])}M=Fe}}else if(P&&ft(Y)&&Array.isArray(M))M=M.join(Y),M&&(M=this.extendTranslation(M,e,l,r));else{let ce=!1,Fe=!1;!this.isValidLookup(M)&&z&&(ce=!0,M=X),this.isValidLookup(M)||(Fe=!0,M=y);const re=(l.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Fe?void 0:M,le=z&&X!==M&&this.options.updateMissing;if(Fe||ce||le){if(this.logger.log(le?"updateKey":"missingKey",A,x,y,le?X:M),h){const te=this.resolve(y,{...l,keySeparator:!1});te&&te.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let De=[];const $e=this.languageUtils.getFallbackCodes(this.options.fallbackLng,l.lng||this.language);if(this.options.saveMissingTo==="fallback"&&$e&&$e[0])for(let te=0;te<$e.length;te++)De.push($e[te]);else this.options.saveMissingTo==="all"?De=this.languageUtils.toResolveHierarchy(l.lng||this.language):De.push(l.lng||this.language);const H=(te,ge,pe)=>{var ze;const Be=z&&pe!==M?pe:re;this.options.missingKeyHandler?this.options.missingKeyHandler(te,x,ge,Be,le,l):(ze=this.backendConnector)!=null&&ze.saveMissing&&this.backendConnector.saveMissing(te,x,ge,Be,le,l),this.emit("missingKey",te,x,ge,M)};this.options.saveMissing&&(this.options.saveMissingPlurals&&V?De.forEach(te=>{const ge=this.pluralResolver.getSuffixes(te,l);ae&&l[`defaultValue${this.options.pluralSeparator}zero`]&&ge.indexOf(`${this.options.pluralSeparator}zero`)<0&&ge.push(`${this.options.pluralSeparator}zero`),ge.forEach(pe=>{H([te],y+pe,l[`defaultValue${pe}`]||X)})}):H(De,y,X))}M=this.extendTranslation(M,e,l,I,r),Fe&&M===y&&this.options.appendNamespaceToMissingKey&&(M=`${x}${S}${y}`),(Fe||ce)&&this.options.parseMissingKeyHandler&&(M=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${x}${S}${y}`:y,ce?M:void 0,l))}return u?(I.res=M,I.usedParams=this.getUsedParamsDetails(l),I):M}extendTranslation(e,n,r,l,u){var b,x;if((b=this.i18nFormat)!=null&&b.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const S=ft(e)&&(((x=r==null?void 0:r.interpolation)==null?void 0:x.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let A;if(S){const I=e.match(this.interpolator.nestingRegexp);A=I&&I.length}let N=r.replace&&!ft(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(N={...this.options.interpolation.defaultVariables,...N}),e=this.interpolator.interpolate(e,N,r.lng||this.language||l.usedLng,r),S){const I=e.match(this.interpolator.nestingRegexp),M=I&&I.length;A<M&&(r.nest=!1)}!r.lng&&l&&l.res&&(r.lng=this.language||l.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...I)=>(u==null?void 0:u[0])===I[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${I[0]} in key: ${n[0]}`),null):this.translate(...I,n),r)),r.interpolation&&this.interpolator.reset()}const h=r.postProcess||this.options.postProcess,y=ft(h)?[h]:h;return e!=null&&(y!=null&&y.length)&&r.applyPostProcessor!==!1&&(e=f3.handle(y,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...l,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,l,u,h,y;return ft(e)&&(e=[e]),e.forEach(b=>{if(this.isValidLookup(r))return;const x=this.extractFromKey(b,n),S=x.key;l=S;let A=x.namespaces;this.options.fallbackNS&&(A=A.concat(this.options.fallbackNS));const N=n.count!==void 0&&!ft(n.count),I=N&&!n.ordinal&&n.count===0,M=n.context!==void 0&&(ft(n.context)||typeof n.context=="number")&&n.context!=="",j=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);A.forEach(U=>{var $,Y;this.isValidLookup(r)||(y=U,!$2[`${j[0]}-${U}`]&&(($=this.utils)!=null&&$.hasLoadedNamespace)&&!((Y=this.utils)!=null&&Y.hasLoadedNamespace(y))&&($2[`${j[0]}-${U}`]=!0,this.logger.warn(`key "${l}" for languages "${j.join(", ")}" won't get resolved as namespace "${y}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),j.forEach(P=>{var Z;if(this.isValidLookup(r))return;h=P;const V=[S];if((Z=this.i18nFormat)!=null&&Z.addLookupKeys)this.i18nFormat.addLookupKeys(V,S,P,U,n);else{let W;N&&(W=this.pluralResolver.getSuffix(P,n.count,n));const ae=`${this.options.pluralSeparator}zero`,X=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(N&&(V.push(S+W),n.ordinal&&W.indexOf(X)===0&&V.push(S+W.replace(X,this.options.pluralSeparator)),I&&V.push(S+ae)),M){const be=`${S}${this.options.contextSeparator}${n.context}`;V.push(be),N&&(V.push(be+W),n.ordinal&&W.indexOf(X)===0&&V.push(be+W.replace(X,this.options.pluralSeparator)),I&&V.push(be+ae))}}let z;for(;z=V.pop();)this.isValidLookup(r)||(u=z,r=this.getResource(P,U,z,n))}))})}),{res:r,usedKey:l,exactUsedKey:u,usedLng:h,usedNS:y}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,l={}){var u;return(u=this.i18nFormat)!=null&&u.getResource?this.i18nFormat.getResource(e,n,r,l):this.resourceStore.getResource(e,n,r,l)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ft(e.replace);let l=r?e.replace:e;if(r&&typeof e.count<"u"&&(l.count=e.count),this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),!r){l={...l};for(const u of n)delete l[u]}return l}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class q2{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=xr.create("languageUtils")}getScriptPartFromCode(e){if(e=od(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=od(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(ft(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const l=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(l))&&(n=l)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const l=this.getScriptPartFromCode(r);if(this.isSupportedCode(l))return n=l;const u=this.getLanguagePartFromCode(r);if(this.isSupportedCode(u))return n=u;n=this.options.supportedLngs.find(h=>{if(h===u)return h;if(!(h.indexOf("-")<0&&u.indexOf("-")<0)&&(h.indexOf("-")>0&&u.indexOf("-")<0&&h.substring(0,h.indexOf("-"))===u||h.indexOf(u)===0&&u.length>1))return h})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),ft(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),l=[],u=h=>{h&&(this.isSupportedCode(h)?l.push(h):this.logger.warn(`rejecting language code not found in supportedLngs: ${h}`))};return ft(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&u(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&u(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&u(this.getLanguagePartFromCode(e))):ft(e)&&u(this.formatLanguageCode(e)),r.forEach(h=>{l.indexOf(h)<0&&u(this.formatLanguageCode(h))}),l}}const Y2={zero:0,one:1,two:2,few:3,many:4,other:5},X2={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class r4{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=xr.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=od(e==="dev"?"en":e),l=n.ordinal?"ordinal":"cardinal",u=JSON.stringify({cleanedCode:r,type:l});if(u in this.pluralRulesCache)return this.pluralRulesCache[u];let h;try{h=new Intl.PluralRules(r,{type:l})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),X2;if(!e.match(/-|_/))return X2;const b=this.languageUtils.getLanguagePartFromCode(e);h=this.getRule(b,n)}return this.pluralRulesCache[u]=h,h}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(l=>`${n}${l}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((l,u)=>Y2[l]-Y2[u]).map(l=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${l}`):[]}getSuffix(e,n,r={}){const l=this.getRule(e,r);return l?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${l.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const W2=(t,e,n,r=".",l=!0)=>{let u=ZA(t,e,n);return!u&&l&&ft(n)&&(u=kg(t,n,r),u===void 0&&(u=kg(e,n,r))),u},Q1=t=>t.replace(/\$/g,"$$$$");class a4{constructor(e={}){var n;this.logger=xr.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:l,prefix:u,prefixEscaped:h,suffix:y,suffixEscaped:b,formatSeparator:x,unescapeSuffix:S,unescapePrefix:A,nestingPrefix:N,nestingPrefixEscaped:I,nestingSuffix:M,nestingSuffixEscaped:j,nestingOptionsSeparator:U,maxReplaces:$,alwaysFormat:Y}=e.interpolation;this.escape=n!==void 0?n:JA,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=l!==void 0?l:!1,this.prefix=u?Kl(u):h||"{{",this.suffix=y?Kl(y):b||"}}",this.formatSeparator=x||",",this.unescapePrefix=S?"":A||"-",this.unescapeSuffix=this.unescapePrefix?"":S||"",this.nestingPrefix=N?Kl(N):I||Kl("$t("),this.nestingSuffix=M?Kl(M):j||Kl(")"),this.nestingOptionsSeparator=U||",",this.maxReplaces=$||1e3,this.alwaysFormat=Y!==void 0?Y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,l){var I;let u,h,y;const b=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},x=M=>{if(M.indexOf(this.formatSeparator)<0){const Y=W2(n,b,M,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(Y,void 0,r,{...l,...n,interpolationkey:M}):Y}const j=M.split(this.formatSeparator),U=j.shift().trim(),$=j.join(this.formatSeparator).trim();return this.format(W2(n,b,U,this.options.keySeparator,this.options.ignoreJSONStructure),$,r,{...l,...n,interpolationkey:U})};this.resetRegExp();const S=(l==null?void 0:l.missingInterpolationHandler)||this.options.missingInterpolationHandler,A=((I=l==null?void 0:l.interpolation)==null?void 0:I.skipOnVariables)!==void 0?l.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:M=>Q1(M)},{regex:this.regexp,safeValue:M=>this.escapeValue?Q1(this.escape(M)):Q1(M)}].forEach(M=>{for(y=0;u=M.regex.exec(e);){const j=u[1].trim();if(h=x(j),h===void 0)if(typeof S=="function"){const $=S(e,u,l);h=ft($)?$:""}else if(l&&Object.prototype.hasOwnProperty.call(l,j))h="";else if(A){h=u[0];continue}else this.logger.warn(`missed to pass in variable ${j} for interpolating ${e}`),h="";else!ft(h)&&!this.useRawValueToEscape&&(h=U2(h));const U=M.safeValue(h);if(e=e.replace(u[0],U),A?(M.regex.lastIndex+=h.length,M.regex.lastIndex-=u[0].length):M.regex.lastIndex=0,y++,y>=this.maxReplaces)break}}),e}nest(e,n,r={}){let l,u,h;const y=(b,x)=>{const S=this.nestingOptionsSeparator;if(b.indexOf(S)<0)return b;const A=b.split(new RegExp(`${S}[ ]*{`));let N=`{${A[1]}`;b=A[0],N=this.interpolate(N,h);const I=N.match(/'/g),M=N.match(/"/g);(((I==null?void 0:I.length)??0)%2===0&&!M||M.length%2!==0)&&(N=N.replace(/'/g,'"'));try{h=JSON.parse(N),x&&(h={...x,...h})}catch(j){return this.logger.warn(`failed parsing options string in nesting for key ${b}`,j),`${b}${S}${N}`}return h.defaultValue&&h.defaultValue.indexOf(this.prefix)>-1&&delete h.defaultValue,b};for(;l=this.nestingRegexp.exec(e);){let b=[];h={...r},h=h.replace&&!ft(h.replace)?h.replace:h,h.applyPostProcessor=!1,delete h.defaultValue;const x=/{.*}/.test(l[1])?l[1].lastIndexOf("}")+1:l[1].indexOf(this.formatSeparator);if(x!==-1&&(b=l[1].slice(x).split(this.formatSeparator).map(S=>S.trim()).filter(Boolean),l[1]=l[1].slice(0,x)),u=n(y.call(this,l[1].trim(),h),h),u&&l[0]===e&&!ft(u))return u;ft(u)||(u=U2(u)),u||(this.logger.warn(`missed to resolve ${l[1]} for nesting ${e}`),u=""),b.length&&(u=b.reduce((S,A)=>this.format(S,A,r.lng,{...r,interpolationkey:l[1].trim()}),u.trim())),e=e.replace(l[0],u),this.regexp.lastIndex=0}return e}}const o4=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const l=r[1].substring(0,r[1].length-1);e==="currency"&&l.indexOf(":")<0?n.currency||(n.currency=l.trim()):e==="relativetime"&&l.indexOf(":")<0?n.range||(n.range=l.trim()):l.split(";").forEach(h=>{if(h){const[y,...b]=h.split(":"),x=b.join(":").trim().replace(/^'+|'+$/g,""),S=y.trim();n[S]||(n[S]=x),x==="false"&&(n[S]=!1),x==="true"&&(n[S]=!0),isNaN(x)||(n[S]=parseInt(x,10))}})}return{formatName:e,formatOptions:n}},K2=t=>{const e={};return(n,r,l)=>{let u=l;l&&l.interpolationkey&&l.formatParams&&l.formatParams[l.interpolationkey]&&l[l.interpolationkey]&&(u={...u,[l.interpolationkey]:void 0});const h=r+JSON.stringify(u);let y=e[h];return y||(y=t(od(r),l),e[h]=y),y(n)}},l4=t=>(e,n,r)=>t(od(n),r)(e);class c4{constructor(e={}){this.logger=xr.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?K2:l4;this.formats={number:r((l,u)=>{const h=new Intl.NumberFormat(l,{...u});return y=>h.format(y)}),currency:r((l,u)=>{const h=new Intl.NumberFormat(l,{...u,style:"currency"});return y=>h.format(y)}),datetime:r((l,u)=>{const h=new Intl.DateTimeFormat(l,{...u});return y=>h.format(y)}),relativetime:r((l,u)=>{const h=new Intl.RelativeTimeFormat(l,{...u});return y=>h.format(y,u.range||"day")}),list:r((l,u)=>{const h=new Intl.ListFormat(l,{...u});return y=>h.format(y)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=K2(n)}format(e,n,r,l={}){const u=n.split(this.formatSeparator);if(u.length>1&&u[0].indexOf("(")>1&&u[0].indexOf(")")<0&&u.find(y=>y.indexOf(")")>-1)){const y=u.findIndex(b=>b.indexOf(")")>-1);u[0]=[u[0],...u.splice(1,y)].join(this.formatSeparator)}return u.reduce((y,b)=>{var A;const{formatName:x,formatOptions:S}=o4(b);if(this.formats[x]){let N=y;try{const I=((A=l==null?void 0:l.formatParams)==null?void 0:A[l.interpolationkey])||{},M=I.locale||I.lng||l.locale||l.lng||r;N=this.formats[x](y,M,{...S,...l,...I})}catch(I){this.logger.warn(I)}return N}else this.logger.warn(`there was no format function for ${x}`);return y},e)}}const u4=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class d4 extends Bh{constructor(e,n,r,l={}){var u,h;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=l,this.logger=xr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=l.maxParallelReads||10,this.readingCalls=0,this.maxRetries=l.maxRetries>=0?l.maxRetries:5,this.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,this.state={},this.queue=[],(h=(u=this.backend)==null?void 0:u.init)==null||h.call(u,r,l.backend,l)}queueLoad(e,n,r,l){const u={},h={},y={},b={};return e.forEach(x=>{let S=!0;n.forEach(A=>{const N=`${x}|${A}`;!r.reload&&this.store.hasResourceBundle(x,A)?this.state[N]=2:this.state[N]<0||(this.state[N]===1?h[N]===void 0&&(h[N]=!0):(this.state[N]=1,S=!1,h[N]===void 0&&(h[N]=!0),u[N]===void 0&&(u[N]=!0),b[A]===void 0&&(b[A]=!0)))}),S||(y[x]=!0)}),(Object.keys(u).length||Object.keys(h).length)&&this.queue.push({pending:h,pendingCount:Object.keys(h).length,loaded:{},errors:[],callback:l}),{toLoad:Object.keys(u),pending:Object.keys(h),toLoadLanguages:Object.keys(y),toLoadNamespaces:Object.keys(b)}}loaded(e,n,r){const l=e.split("|"),u=l[0],h=l[1];n&&this.emit("failedLoading",u,h,n),!n&&r&&this.store.addResourceBundle(u,h,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const y={};this.queue.forEach(b=>{KA(b.loaded,[u],h),u4(b,e),n&&b.errors.push(n),b.pendingCount===0&&!b.done&&(Object.keys(b.loaded).forEach(x=>{y[x]||(y[x]={});const S=b.loaded[x];S.length&&S.forEach(A=>{y[x][A]===void 0&&(y[x][A]=!0)})}),b.done=!0,b.errors.length?b.callback(b.errors):b.callback())}),this.emit("loaded",y),this.queue=this.queue.filter(b=>!b.done)}read(e,n,r,l=0,u=this.retryTimeout,h){if(!e.length)return h(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:l,wait:u,callback:h});return}this.readingCalls++;const y=(x,S)=>{if(this.readingCalls--,this.waitingReads.length>0){const A=this.waitingReads.shift();this.read(A.lng,A.ns,A.fcName,A.tried,A.wait,A.callback)}if(x&&S&&l<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,l+1,u*2,h)},u);return}h(x,S)},b=this.backend[r].bind(this.backend);if(b.length===2){try{const x=b(e,n);x&&typeof x.then=="function"?x.then(S=>y(null,S)).catch(y):y(null,x)}catch(x){y(x)}return}return b(e,n,y)}prepareLoading(e,n,r={},l){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();ft(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ft(n)&&(n=[n]);const u=this.queueLoad(e,n,r,l);if(!u.toLoad.length)return u.pending.length||l(),null;u.toLoad.forEach(h=>{this.loadOne(h)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),l=r[0],u=r[1];this.read(l,u,"read",void 0,void 0,(h,y)=>{h&&this.logger.warn(`${n}loading namespace ${u} for language ${l} failed`,h),!h&&y&&this.logger.log(`${n}loaded namespace ${u} for language ${l}`,y),this.loaded(e,h,y)})}saveMissing(e,n,r,l,u,h={},y=()=>{}){var b,x,S,A,N;if((x=(b=this.services)==null?void 0:b.utils)!=null&&x.hasLoadedNamespace&&!((A=(S=this.services)==null?void 0:S.utils)!=null&&A.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((N=this.backend)!=null&&N.create){const I={...h,isUpdate:u},M=this.backend.create.bind(this.backend);if(M.length<6)try{let j;M.length===5?j=M(e,n,r,l,I):j=M(e,n,r,l),j&&typeof j.then=="function"?j.then(U=>y(null,U)).catch(y):y(null,j)}catch(j){y(j)}else M(e,n,r,l,y,I)}!e||!e[0]||this.store.addResource(e[0],n,r,l)}}}const Z2=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ft(t[1])&&(e.defaultValue=t[1]),ft(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Q2=t=>{var e,n;return ft(t.ns)&&(t.ns=[t.ns]),ft(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ft(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Yf=()=>{},f4=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class ld extends Bh{constructor(e={},n){if(super(),this.options=Q2(e),this.services={},this.logger=xr,this.modules={external:[]},f4(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(ft(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=Z2();this.options={...r,...this.options,...Q2(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const l=x=>x?typeof x=="function"?new x:x:null;if(!this.options.isClone){this.modules.logger?xr.init(l(this.modules.logger),this.options):xr.init(null,this.options);let x;this.modules.formatter?x=this.modules.formatter:x=c4;const S=new q2(this.options);this.store=new z2(this.options.resources,this.options);const A=this.services;A.logger=xr,A.resourceStore=this.store,A.languageUtils=S,A.pluralResolver=new r4(S,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),x&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(A.formatter=l(x),A.formatter.init&&A.formatter.init(A,this.options),this.options.interpolation.format=A.formatter.format.bind(A.formatter)),A.interpolator=new a4(this.options),A.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},A.backendConnector=new d4(l(this.modules.backend),A.resourceStore,A,this.options),A.backendConnector.on("*",(I,...M)=>{this.emit(I,...M)}),this.modules.languageDetector&&(A.languageDetector=l(this.modules.languageDetector),A.languageDetector.init&&A.languageDetector.init(A,this.options.detection,this.options)),this.modules.i18nFormat&&(A.i18nFormat=l(this.modules.i18nFormat),A.i18nFormat.init&&A.i18nFormat.init(this)),this.translator=new bh(this.services,this.options),this.translator.on("*",(I,...M)=>{this.emit(I,...M)}),this.modules.external.forEach(I=>{I.init&&I.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Yf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const x=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);x.length>0&&x[0]!=="dev"&&(this.options.lng=x[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(x=>{this[x]=(...S)=>this.store[x](...S)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(x=>{this[x]=(...S)=>(this.store[x](...S),this)});const y=Iu(),b=()=>{const x=(S,A)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),y.resolve(A),n(S,A)};if(this.languages&&!this.isInitialized)return x(null,this.t.bind(this));this.changeLanguage(this.options.lng,x)};return this.options.resources||!this.options.initAsync?b():setTimeout(b,0),y}loadResources(e,n=Yf){var u,h;let r=n;const l=ft(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((l==null?void 0:l.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const y=[],b=x=>{if(!x||x==="cimode")return;this.services.languageUtils.toResolveHierarchy(x).forEach(A=>{A!=="cimode"&&y.indexOf(A)<0&&y.push(A)})};l?b(l):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(S=>b(S)),(h=(u=this.options.preload)==null?void 0:u.forEach)==null||h.call(u,x=>b(x)),this.services.backendConnector.load(y,this.options.ns,x=>{!x&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(x)})}else r(null)}reloadResources(e,n,r){const l=Iu();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Yf),this.services.backendConnector.reload(e,n,u=>{l.resolve(),r(u)}),l}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&f3.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Iu();this.emit("languageChanging",e);const l=y=>{this.language=y,this.languages=this.services.languageUtils.toResolveHierarchy(y),this.resolvedLanguage=void 0,this.setResolvedLanguage(y)},u=(y,b)=>{b?this.isLanguageChangingTo===e&&(l(b),this.translator.changeLanguage(b),this.isLanguageChangingTo=void 0,this.emit("languageChanged",b),this.logger.log("languageChanged",b)):this.isLanguageChangingTo=void 0,r.resolve((...x)=>this.t(...x)),n&&n(y,(...x)=>this.t(...x))},h=y=>{var S,A;!e&&!y&&this.services.languageDetector&&(y=[]);const b=ft(y)?y:y&&y[0],x=this.store.hasLanguageSomeTranslations(b)?b:this.services.languageUtils.getBestMatchFromCodes(ft(y)?[y]:y);x&&(this.language||l(x),this.translator.language||this.translator.changeLanguage(x),(A=(S=this.services.languageDetector)==null?void 0:S.cacheUserLanguage)==null||A.call(S,x)),this.loadResources(x,N=>{u(N,x)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?h(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(h):this.services.languageDetector.detect(h):h(e),r}getFixedT(e,n,r){const l=(u,h,...y)=>{let b;typeof h!="object"?b=this.options.overloadTranslationOptionHandler([u,h].concat(y)):b={...h},b.lng=b.lng||l.lng,b.lngs=b.lngs||l.lngs,b.ns=b.ns||l.ns,b.keyPrefix!==""&&(b.keyPrefix=b.keyPrefix||r||l.keyPrefix);const x=this.options.keySeparator||".";let S;return b.keyPrefix&&Array.isArray(u)?S=u.map(A=>`${b.keyPrefix}${x}${A}`):S=b.keyPrefix?`${b.keyPrefix}${x}${u}`:u,this.t(S,b)};return ft(e)?l.lng=e:l.lngs=e,l.ns=n,l.keyPrefix=r,l}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,u=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const h=(y,b)=>{const x=this.services.backendConnector.state[`${y}|${b}`];return x===-1||x===0||x===2};if(n.precheck){const y=n.precheck(this,h);if(y!==void 0)return y}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||h(r,e)&&(!l||h(u,e)))}loadNamespaces(e,n){const r=Iu();return this.options.ns?(ft(e)&&(e=[e]),e.forEach(l=>{this.options.ns.indexOf(l)<0&&this.options.ns.push(l)}),this.loadResources(l=>{r.resolve(),n&&n(l)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Iu();ft(e)&&(e=[e]);const l=this.options.preload||[],u=e.filter(h=>l.indexOf(h)<0&&this.services.languageUtils.isSupportedCode(h));return u.length?(this.options.preload=l.concat(u),this.loadResources(h=>{r.resolve(),n&&n(h)}),r):(n&&n(),Promise.resolve())}dir(e){var l,u;if(e||(e=this.resolvedLanguage||(((l=this.languages)==null?void 0:l.length)>0?this.languages[0]:this.language)),!e)return"rtl";if(Intl.Locale){const h=new Intl.Locale(e);if(h&&h.getTextInfo){const y=h.getTextInfo();if(y&&y.direction)return y.direction}}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((u=this.services)==null?void 0:u.languageUtils)||new q2(Z2());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new ld(e,n)}cloneInstance(e={},n=Yf){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const l={...this.options,...e,isClone:!0},u=new ld(l);if((e.debug!==void 0||e.prefix!==void 0)&&(u.logger=u.logger.clone(e)),["store","services","language"].forEach(y=>{u[y]=this[y]}),u.services={...this.services},u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},r){const y=Object.keys(this.store.data).reduce((b,x)=>(b[x]={...this.store.data[x]},b[x]=Object.keys(b[x]).reduce((S,A)=>(S[A]={...b[x][A]},S),b[x]),b),{});u.store=new z2(y,l),u.services.resourceStore=u.store}return u.translator=new bh(u.services,l),u.translator.on("*",(y,...b)=>{u.emit(y,...b)}),u.init(l,n),u.translator.options=l,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Jn=ld.createInstance();Jn.createInstance=ld.createInstance;Jn.createInstance;Jn.dir;Jn.init;Jn.loadResources;Jn.reloadResources;Jn.use;Jn.changeLanguage;Jn.getFixedT;Jn.t;Jn.exists;Jn.setDefaultNamespace;Jn.hasLoadedNamespace;Jn.loadNamespaces;Jn.loadLanguages;var J1={exports:{}},bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J2;function h4(){if(J2)return bt;J2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.iterator;function N(H){return H===null||typeof H!="object"?null:(H=A&&H[A]||H["@@iterator"],typeof H=="function"?H:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,j={};function U(H,te,ge){this.props=H,this.context=te,this.refs=j,this.updater=ge||I}U.prototype.isReactComponent={},U.prototype.setState=function(H,te){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,te,"setState")},U.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function $(){}$.prototype=U.prototype;function Y(H,te,ge){this.props=H,this.context=te,this.refs=j,this.updater=ge||I}var P=Y.prototype=new $;P.constructor=Y,M(P,U.prototype),P.isPureReactComponent=!0;var V=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},Z=Object.prototype.hasOwnProperty;function W(H,te,ge,pe,Be,ze){return ge=ze.ref,{$$typeof:t,type:H,key:te,ref:ge!==void 0?ge:null,props:ze}}function ae(H,te){return W(H.type,te,void 0,void 0,void 0,H.props)}function X(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function be(H){var te={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ge){return te[ge]})}var Ae=/\/+/g;function ve(H,te){return typeof H=="object"&&H!==null&&H.key!=null?be(""+H.key):te.toString(36)}function ce(){}function Fe(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(ce,ce):(H.status="pending",H.then(function(te){H.status==="pending"&&(H.status="fulfilled",H.value=te)},function(te){H.status==="pending"&&(H.status="rejected",H.reason=te)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function se(H,te,ge,pe,Be){var ze=typeof H;(ze==="undefined"||ze==="boolean")&&(H=null);var Ee=!1;if(H===null)Ee=!0;else switch(ze){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(H.$$typeof){case t:case e:Ee=!0;break;case S:return Ee=H._init,se(Ee(H._payload),te,ge,pe,Be)}}if(Ee)return Be=Be(H),Ee=pe===""?"."+ve(H,0):pe,V(Be)?(ge="",Ee!=null&&(ge=Ee.replace(Ae,"$&/")+"/"),se(Be,te,ge,"",function(pt){return pt})):Be!=null&&(X(Be)&&(Be=ae(Be,ge+(Be.key==null||H&&H.key===Be.key?"":(""+Be.key).replace(Ae,"$&/")+"/")+Ee)),te.push(Be)),1;Ee=0;var At=pe===""?".":pe+":";if(V(H))for(var Ze=0;Ze<H.length;Ze++)pe=H[Ze],ze=At+ve(pe,Ze),Ee+=se(pe,te,ge,ze,Be);else if(Ze=N(H),typeof Ze=="function")for(H=Ze.call(H),Ze=0;!(pe=H.next()).done;)pe=pe.value,ze=At+ve(pe,Ze++),Ee+=se(pe,te,ge,ze,Be);else if(ze==="object"){if(typeof H.then=="function")return se(Fe(H),te,ge,pe,Be);throw te=String(H),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function re(H,te,ge){if(H==null)return H;var pe=[],Be=0;return se(H,pe,"","",function(ze){return te.call(ge,ze,Be++)}),pe}function le(H){if(H._status===-1){var te=H._result;te=te(),te.then(function(ge){(H._status===0||H._status===-1)&&(H._status=1,H._result=ge)},function(ge){(H._status===0||H._status===-1)&&(H._status=2,H._result=ge)}),H._status===-1&&(H._status=0,H._result=te)}if(H._status===1)return H._result.default;throw H._result}var De=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)};function $e(){}return bt.Children={map:re,forEach:function(H,te,ge){re(H,function(){te.apply(this,arguments)},ge)},count:function(H){var te=0;return re(H,function(){te++}),te},toArray:function(H){return re(H,function(te){return te})||[]},only:function(H){if(!X(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},bt.Component=U,bt.Fragment=n,bt.Profiler=l,bt.PureComponent=Y,bt.StrictMode=r,bt.Suspense=b,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,bt.__COMPILER_RUNTIME={__proto__:null,c:function(H){return z.H.useMemoCache(H)}},bt.cache=function(H){return function(){return H.apply(null,arguments)}},bt.cloneElement=function(H,te,ge){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var pe=M({},H.props),Be=H.key,ze=void 0;if(te!=null)for(Ee in te.ref!==void 0&&(ze=void 0),te.key!==void 0&&(Be=""+te.key),te)!Z.call(te,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&te.ref===void 0||(pe[Ee]=te[Ee]);var Ee=arguments.length-2;if(Ee===1)pe.children=ge;else if(1<Ee){for(var At=Array(Ee),Ze=0;Ze<Ee;Ze++)At[Ze]=arguments[Ze+2];pe.children=At}return W(H.type,Be,void 0,void 0,ze,pe)},bt.createContext=function(H){return H={$$typeof:h,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:u,_context:H},H},bt.createElement=function(H,te,ge){var pe,Be={},ze=null;if(te!=null)for(pe in te.key!==void 0&&(ze=""+te.key),te)Z.call(te,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Be[pe]=te[pe]);var Ee=arguments.length-2;if(Ee===1)Be.children=ge;else if(1<Ee){for(var At=Array(Ee),Ze=0;Ze<Ee;Ze++)At[Ze]=arguments[Ze+2];Be.children=At}if(H&&H.defaultProps)for(pe in Ee=H.defaultProps,Ee)Be[pe]===void 0&&(Be[pe]=Ee[pe]);return W(H,ze,void 0,void 0,null,Be)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(H){return{$$typeof:y,render:H}},bt.isValidElement=X,bt.lazy=function(H){return{$$typeof:S,_payload:{_status:-1,_result:H},_init:le}},bt.memo=function(H,te){return{$$typeof:x,type:H,compare:te===void 0?null:te}},bt.startTransition=function(H){var te=z.T,ge={};z.T=ge;try{var pe=H(),Be=z.S;Be!==null&&Be(ge,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then($e,De)}catch(ze){De(ze)}finally{z.T=te}},bt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},bt.use=function(H){return z.H.use(H)},bt.useActionState=function(H,te,ge){return z.H.useActionState(H,te,ge)},bt.useCallback=function(H,te){return z.H.useCallback(H,te)},bt.useContext=function(H){return z.H.useContext(H)},bt.useDebugValue=function(){},bt.useDeferredValue=function(H,te){return z.H.useDeferredValue(H,te)},bt.useEffect=function(H,te,ge){var pe=z.H;if(typeof ge=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return pe.useEffect(H,te)},bt.useId=function(){return z.H.useId()},bt.useImperativeHandle=function(H,te,ge){return z.H.useImperativeHandle(H,te,ge)},bt.useInsertionEffect=function(H,te){return z.H.useInsertionEffect(H,te)},bt.useLayoutEffect=function(H,te){return z.H.useLayoutEffect(H,te)},bt.useMemo=function(H,te){return z.H.useMemo(H,te)},bt.useOptimistic=function(H,te){return z.H.useOptimistic(H,te)},bt.useReducer=function(H,te,ge){return z.H.useReducer(H,te,ge)},bt.useRef=function(H){return z.H.useRef(H)},bt.useState=function(H){return z.H.useState(H)},bt.useSyncExternalStore=function(H,te,ge){return z.H.useSyncExternalStore(H,te,ge)},bt.useTransition=function(){return z.H.useTransition()},bt.version="19.1.0",bt}var eb;function Uh(){return eb||(eb=1,J1.exports=h4()),J1.exports}var R=Uh();const ct=jm(R),tb=u3({__proto__:null,default:ct},[R]),g4=(t,e,n,r)=>{var u,h,y,b;const l=[n,{code:e,...r||{}}];if((h=(u=t==null?void 0:t.services)==null?void 0:u.logger)!=null&&h.forward)return t.services.logger.forward(l,"warn","react-i18next::",!0);tl(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),(b=(y=t==null?void 0:t.services)==null?void 0:y.logger)!=null&&b.warn?t.services.logger.warn(...l):console!=null&&console.warn&&console.warn(...l)},nb={},Lg=(t,e,n,r)=>{tl(n)&&nb[n]||(tl(n)&&(nb[n]=new Date),g4(t,e,n,r))},h3=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},jg=(t,e,n)=>{t.loadNamespaces(e,h3(t,n))},sb=(t,e,n,r)=>{if(tl(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return jg(t,n,r);n.forEach(l=>{t.options.ns.indexOf(l)<0&&t.options.ns.push(l)}),t.loadLanguages(e,h3(t,r))},m4=(t,e,n={})=>!e.languages||!e.languages.length?(Lg(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,l)=>{var u;if(((u=n.bindI18n)==null?void 0:u.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!l(r.isLanguageChangingTo,t))return!1}}),tl=t=>typeof t=="string",p4=t=>typeof t=="object"&&t!==null,x4=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,y4={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},b4=t=>y4[t],w4=t=>t.replace(x4,b4);let Pg={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:w4};const v4=(t={})=>{Pg={...Pg,...t}},S4=()=>Pg;let g3;const E4=t=>{g3=t},C4=()=>g3,A4={type:"3rdParty",init(t){v4(t.options.react),E4(t)}},T4=R.createContext();class _4{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const N4=(t,e)=>{const n=R.useRef();return R.useEffect(()=>{n.current=t},[t,e]),n.current},m3=(t,e,n,r)=>t.getFixedT(e,n,r),R4=(t,e,n,r)=>R.useCallback(m3(t,e,n,r),[t,e,n,r]),Pn=(t,e={})=>{var V,z,Z,W;const{i18n:n}=e,{i18n:r,defaultNS:l}=R.useContext(T4)||{},u=n||r||C4();if(u&&!u.reportNamespaces&&(u.reportNamespaces=new _4),!u){Lg(u,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const ae=(be,Ae)=>tl(Ae)?Ae:p4(Ae)&&tl(Ae.defaultValue)?Ae.defaultValue:Array.isArray(be)?be[be.length-1]:be,X=[ae,{},!1];return X.t=ae,X.i18n={},X.ready=!1,X}(V=u.options.react)!=null&&V.wait&&Lg(u,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const h={...S4(),...u.options.react,...e},{useSuspense:y,keyPrefix:b}=h;let x=l||((z=u.options)==null?void 0:z.defaultNS);x=tl(x)?[x]:x||["translation"],(W=(Z=u.reportNamespaces).addUsedNamespaces)==null||W.call(Z,x);const S=(u.isInitialized||u.initializedStoreOnce)&&x.every(ae=>m4(ae,u,h)),A=R4(u,e.lng||null,h.nsMode==="fallback"?x:x[0],b),N=()=>A,I=()=>m3(u,e.lng||null,h.nsMode==="fallback"?x:x[0],b),[M,j]=R.useState(N);let U=x.join();e.lng&&(U=`${e.lng}${U}`);const $=N4(U),Y=R.useRef(!0);R.useEffect(()=>{const{bindI18n:ae,bindI18nStore:X}=h;Y.current=!0,!S&&!y&&(e.lng?sb(u,e.lng,x,()=>{Y.current&&j(I)}):jg(u,x,()=>{Y.current&&j(I)})),S&&$&&$!==U&&Y.current&&j(I);const be=()=>{Y.current&&j(I)};return ae&&(u==null||u.on(ae,be)),X&&(u==null||u.store.on(X,be)),()=>{Y.current=!1,u&&(ae==null||ae.split(" ").forEach(Ae=>u.off(Ae,be))),X&&u&&X.split(" ").forEach(Ae=>u.store.off(Ae,be))}},[u,U]),R.useEffect(()=>{Y.current&&S&&j(N)},[u,b,S]);const P=[M,u,S];if(P.t=M,P.i18n=u,P.ready=S,S||!S&&!y)return P;throw new Promise(ae=>{e.lng?sb(u,e.lng,x,()=>ae()):jg(u,x,()=>ae())})},O4="Welcome",I4="Login",M4="Logout",D4="Select at least one course.",k4="Please enter a nick name.",L4="Student {{nick}} added!",j4="Application submitted!",P4="Thank you!",B4="Your application has been received.",U4="Our staff will contact you via LINE or phone.",F4="You may close this page.",V4="Wonder Kids Admissions",H4="Fill out the application form below. {{staffMsg}}",z4="Students will be enrolled instantly.",$4="Our staff will contact you to confirm your admission.",G4="Student Info",q4="Nick Name",Y4="First Name",X4="Last Name",W4="Date of Birth",K4="Parent / Guardian",Z4="Line App ID",Q4="Phone",J4="Courses",e5="Loading courses",t5="No courses available.",n5="({{count}} seats)",s5="+ Time",i5="Hours Purchased:",r5="Payment Receipt",a5="Choose Files",o5="Adding",l5="Add Student",c5="Submitting",u5="Submit Application",d5="Refresh Public Admissions Link",f5="Show Public Admissions Link",h5="Copy",g5="Loading pending",m5="Pending Check-ins",p5="No pending check-ins.",x5="Take Attendance",y5="Loading students",b5="Student",w5="Slots",v5="Used / Limit",S5="Check",E5="",C5="Student QR Code",A5="Download",T5="Print",_5="Close",N5="Approve",R5="Unchecked {{first}} {{last}}",O5="Over limit for {{first}} {{last}}",I5="Checked in {{first}} {{last}}",M5="Unknown code",D5="{{first}} {{last}} already scanned",k5="Scan failed",L5="Pending: {{first}} {{last}}",j5="Billing Page (coming soon)",P5="Check Courses",B5="Manage Courses",U5="Select Course",F5="Select Day",V5="Select Time",H5="Loading",z5="No students found.",$5="Nick name",G5="Full name",q5="Course",Y5="Days",X5="Times",W5="Capacity",K5="Edit",Z5="+ Add Course",Q5="Edit Course",J5="New Course",eT="Name",tT="Days:",nT="{{day}} Times:",sT="Save",iT="Cancel",rT="Enter a name",aT="Delete this course?",oT="Monday",lT="Tuesday",cT="Wednesday",uT="Thursday",dT="Friday",fT="Saturday",hT="Sunday",gT="Add New Student",mT="Students (active)",pT="Students (inactive)",xT="Review",yT="Fast, beautiful, mobile-friendly management for your school.",bT="Scan Student QR",wT="Scan another",vT="Sign In",ST="Signing In",ET="Email",CT="Password",AT="you@example.com",TT="No notifications.",_T="Read",NT="New application  {{name}}",RT="Course limit reached  {{name}}",OT="Edit request from {{name}}",IT="New Applications",MT="Renewals",DT="Course Changes",kT="Select All",LT="Unselect All",jT="Reject",PT="Approve {{count}} item(s)?",BT="Reject (delete) {{count}} item(s)?",UT="Submitted by",FT="Line ID",VT="Submitted at",HT="Hours",zT="Open",$T="Receipts",GT="View Receipts ({{count}})",qT="Settings",YT="Close",XT="Invite User",WT="Temp password",KT="Role",ZT="Staff",QT="Admin",JT="Send Invite",e6="Inviting",t6="Team Members",n6="No users.",s6="Edit User",i6="E-mail (read-only)",r6="Saving",a6="Auth returned no user id",o6="Remove this staff account?",l6="Staff",c6="Admin",u6="Home",d6="Reports",f6="Messaging",h6="Billing",g6="Settings",m6="Back",p6="Delete Student",x6="Add New Course",y6="Select...",b6="Day",w6="Time Slot",v6="Hours to Purchase",S6="Upload Receipt",E6="Submit",C6="Not found.",A6="Joined",T6="Enrolled Courses",_6="Days & Times",N6="Hours Left",R6="Status",O6="Receipt",I6="Actions",M6="Attendance",D6="Ongoing",k6="Renewal Needed",L6="View",j6="Hide",P6="Renew",B6="Delete student?",U6="Attendance History",F6="No records",V6="Renew {{course}}",H6="Add-course request submitted.",z6="Renewal request submitted.",$6="Cancelled",G6="Edit Day",q6="Edit Time",Y6="Profile information missing. Please reload and try again.",X6="Students (Inactive)",W6="Search students",K6="Parent Phone",Z6="Line ID",Q6="Action",J6="Renew Enrollment",e8="All fields are required.",t8="Failed to upload the file.",n8="Renew Now",s8="Submit Renewal Request",i8="Export Students ({{count}})",r8="Export CSV",a8="Students",o8="No.",l8="{{count}} hours",c8="Select hour package",u8="Please select an hour package for each course.",d8="Total",f8="Show details",h8="Hide details",g8="baht",m8="Cancellations",p8="No receipt uploaded",x8="Cancel course",y8="Course cancellation request submitted for review.",b8="Cancel this course?",w8="Submit cancellation",v8="Cancellation pending approval",S8="Course cancelled",E8="Cancellation request rejected",C8="Purchased Packages",A8="Price",T8="Hour Packages",_8="No packages defined",N8="+ Add Package",R8="Times for {{day}}",O8="Course Name",I8="Choose a course to see students",M8="Inactive",D8="Students (Inactive)",k8="Used",L8="Purchased",j8="Add Existing Student (Offline Package)",P8="Hours remaining",B8="Used days (enter date, press Enter)",U8="YYYYMMDD",F8="Full day",V8="Used hours",H8="Enter the used hours for each selected course.",z8="Used hours cannot exceed the package hours ({{count}})",$8={welcome:O4,login:I4,logout:M4,selectCourseError:D4,enterNickError:k4,studentAdded:L4,applicationSubmitted:j4,thankYou:P4,applicationReceived:B4,staffWillContact:U4,youMayClose:F4,admissionsTitle:V4,admissionsIntro:H4,enrollInstant:z4,contactToConfirm:$4,studentInfo:G4,nickName:q4,firstName:Y4,lastName:X4,dob:W4,guardian:K4,lineAppId:Z4,phone:Q4,courses:J4,loadingCourses:e5,noCourses:t5,seats:n5,addTime:s5,hoursPurchased:i5,paymentReceipt:r5,chooseFiles:a5,adding:o5,addStudent:l5,submitting:c5,submitApplication:u5,refreshPublicAdmissionsLink:d5,showPublicAdmissionsLink:f5,copy:h5,loadingPending:g5,pendingCheckins:m5,noPendingCheckins:p5,takeAttendance:x5,loadingStudents:y5,student:b5,slots:w5,usedLimit:v5,check:S5,unlimited:E5,studentQrCode:C5,download:A5,print:T5,close:_5,approve:N5,uncheckedStudent:R5,overLimit:O5,checkedInStudent:I5,unknownCode:M5,alreadyScanned:D5,scanFailed:k5,pendingStudent:L5,billingComingSoon:j5,checkCourses:P5,manageCourses:B5,selectCourse:U5,selectDay:F5,selectTime:V5,loading:H5,noStudentsFound:z5,nickname:$5,fullName:G5,course:q5,days:Y5,times:X5,capacity:W5,edit:K5,delete:"Delete",addCourse:Z5,editCourse:Q5,newCourse:J5,name:eT,daysColon:tT,timesColon:nT,save:sT,cancel:iT,enterName:rT,deleteThisCourse:aT,monday:oT,tuesday:lT,wednesday:cT,thursday:uT,friday:dT,saturday:fT,sunday:hT,addNewStudent:gT,studentsActive:mT,studentsInactive:pT,review:xT,homepageSlogan:yT,scanStudentQr:bT,scanAnother:wT,signIn:vT,signingIn:ST,email:ET,password:CT,emailPlaceholder:AT,noNotifications:TT,markRead:_T,newApplication:NT,courseLimitReached:RT,editRequestFrom:OT,newApplications:IT,renewals:MT,courseChanges:DT,selectAll:kT,unselectAll:LT,reject:jT,approveConfirm:PT,rejectConfirm:BT,submittedBy:UT,lineId:FT,submittedAt:VT,hours:HT,open:zT,receipts:$T,viewReceipts:GT,settingsTitle:qT,closeInvite:YT,inviteUser:XT,tempPassword:WT,role:KT,roleStaff:ZT,roleAdmin:QT,sendInvite:JT,inviting:e6,teamMembers:t6,noUsers:n6,editUser:s6,emailReadOnly:i6,saving:r6,noUserIdError:a6,confirmRemoveStaff:o6,role_staff:l6,role_admin:c6,home:u6,reports:d6,messaging:f6,billing:h6,settings:g6,back:m6,deleteStudent:p6,addNewCourse:x6,select:y6,day:b6,timeSlot:w6,hoursToPurchase:v6,uploadReceipt:S6,submit:E6,studentNotFound:C6,joined:A6,enrolledCourses:T6,daysTimes:_6,hoursLeft:N6,status:R6,receipt:O6,actions:I6,attendance:M6,ongoing:D6,renewalNeeded:k6,view:L6,hide:j6,renew:P6,deleteStudentConfirm:B6,attendanceHistory:U6,noRecords:F6,submitRenew:V6,submitAdd:H6,submitRenewal:z6,cancelled:$6,editDay:G6,editTime:q6,profileMissingError:Y6,inactiveStudents:X6,searchStudents:W6,export:"Export",parentPhone:K6,lineID:Z6,action:Q6,renewEnrollment:J6,allFieldsRequired:e8,uploadError:t8,renewNow:n8,submitRenewalRequest:s8,exportStudents:i8,exportCSV:r8,students:a8,no:o8,hoursLabel:l8,chooseHourPackage:c8,selectHourPackageError:u8,totalPrice:d8,showDetail:f8,hideDetail:h8,baht:g8,cancellations:m8,noReceipt:p8,cancelCourse:x8,cancelRequest:y8,cancelConfirm:b8,cancelSubmit:w8,cancelPending:v8,cancelApproved:S8,cancelRejected:E8,purchasedPackages:C8,price:A8,hourPackages:T8,noPackagesDefined:_8,addPackage:N8,timesForDay:R8,courseName:O8,chooseCourseToSeeStudents:I8,inactive:M8,studentsNeedingRenewal:D8,used:k8,purchased:L8,addExistingStudent:j8,hoursRemaining:P8,usedDays:B8,YYYYMMDD:U8,fullDay:F8,usedHours:V8,enterUsedHoursError:H8,usedHoursTooMany:z8},G8="",q8="",Y8="",X8=" 1 ",W8="",K8=" {{nick}} !",Z8="!",Q8="!",J8="",e_=" LINE ",t_="",n_="",s_=" {{staffMsg}}",i_="",r_="",a_="",o_="",l_="",c_="",u_="",d_="",f_="LINE ID",h_="",g_="",m_="",p_="",x_="({{count}} )",y_="+ ",b_=":",w_="",v_="",S_="",E_="",C_="",A_="",T_="",__="",N_="",R_="",O_="",I_="",M_="",D_="",k_="",L_="",j_=" / ",P_="",B_="",U_="",F_="",V_="",H_="",z_="",$_=" {{first}} {{last}}",G_=" {{first}} {{last}}",q_=" {{first}} {{last}}",Y_="",X_="{{first}} {{last}} ",W_="",K_=": {{first}} {{last}}",Z_=" (  )",Q_="",J_="",eN="",tN="",nN="",sN="",iN="",rN="",aN="-",oN="",lN="",cN="",uN="",dN="",fN="+ ",hN="",gN="",mN="",pN=":",xN="{{day}} :",yN="",bN="",wN="",vN="?",SN="",EN="",CN="",AN="",TN="",_N="",NN="",RN="",ON=" ()",IN=" ()",MN="",DN="  ",kN=" QR ",LN="",jN="",PN="",BN="",UN="",FN="you@example.com",VN="",HN="",zN="  {{name}}",$N="  {{name}}",GN=" {{name}}",qN="",YN="",XN="",WN="",KN="",ZN="",QN=" {{count}} ?",JN=" () {{count}} ?",eR="",tR="",nR="",sR="",iR="",rR="",aR=" ({{count}})",oR="",lR="",cR="",uR="",dR="",fR="",hR="",gR="",mR="",pR="",xR="",yR="",bR=" ()",wR="",vR="",SR="?",ER="",CR="",AR="",TR="",_R="",NR="",RR="",OR="",IR="",MR="",DR="...",kR="",LR="",jR="",PR="",BR="",UR="",FR="",VR="",HR="",zR="",$R="",GR="",qR="",YR="",XR="",WR="",KR="",ZR="",QR="",JR="?",e7="",t7="",n7=" {{course}}",s7="",i7="",r7="",a7="",o7="",l7=" ",c7=" ()",u7="",d7="",f7="",h7="",g7="",m7="",p7="",x7="",y7=" ({{count}})",b7=" CSV",w7="",v7="",S7="{{count}} ",E7="",C7="",A7="",T7="",_7="",N7="",R7="",O7="",I7="",M7=" ",D7="?",k7="",L7="",j7="",P7="",B7="",U7="",F7="",V7="",H7="+ ",z7="{{day}}",$7="",G7="",q7="",Y7="",X7="",W7="",K7="/",Z7="",Q7=" ( Enter)",J7="--",eO="",tO="",nO="",sO="",iO=" ({{count}})",rO={welcome:G8,login:q8,logout:Y8,selectCourseError:X8,enterNickError:W8,studentAdded:K8,applicationSubmitted:Z8,thankYou:Q8,applicationReceived:J8,staffWillContact:e_,youMayClose:t_,admissionsTitle:n_,admissionsIntro:s_,enrollInstant:i_,contactToConfirm:r_,studentInfo:a_,nickName:o_,firstName:l_,lastName:c_,dob:u_,guardian:d_,lineAppId:f_,phone:h_,courses:g_,loadingCourses:m_,noCourses:p_,seats:x_,addTime:y_,hoursPurchased:b_,paymentReceipt:w_,chooseFiles:v_,adding:S_,addStudent:E_,submitting:C_,submitApplication:A_,refreshPublicAdmissionsLink:T_,showPublicAdmissionsLink:__,copy:N_,loadingPending:R_,pendingCheckins:O_,noPendingCheckins:I_,takeAttendance:M_,loadingStudents:D_,student:k_,slots:L_,usedLimit:j_,check:P_,unlimited:B_,studentQrCode:U_,download:F_,print:V_,close:H_,approve:z_,uncheckedStudent:$_,overLimit:G_,checkedInStudent:q_,unknownCode:Y_,alreadyScanned:X_,scanFailed:W_,pendingStudent:K_,billingComingSoon:Z_,checkCourses:Q_,manageCourses:J_,selectCourse:eN,selectDay:tN,selectTime:nN,loading:sN,noStudentsFound:iN,nickname:rN,fullName:aN,course:oN,days:lN,times:cN,capacity:uN,edit:dN,delete:"",addCourse:fN,editCourse:hN,newCourse:gN,name:mN,daysColon:pN,timesColon:xN,save:yN,cancel:bN,enterName:wN,deleteThisCourse:vN,monday:SN,tuesday:EN,wednesday:CN,thursday:AN,friday:TN,saturday:_N,sunday:NN,addNewStudent:RN,studentsActive:ON,studentsInactive:IN,review:MN,homepageSlogan:DN,scanStudentQr:kN,scanAnother:LN,signIn:jN,signingIn:PN,email:BN,password:UN,emailPlaceholder:FN,noNotifications:VN,markRead:HN,newApplication:zN,courseLimitReached:$N,editRequestFrom:GN,newApplications:qN,renewals:YN,courseChanges:XN,selectAll:WN,unselectAll:KN,reject:ZN,approveConfirm:QN,rejectConfirm:JN,submittedBy:eR,lineId:tR,submittedAt:nR,hours:sR,open:iR,receipts:rR,viewReceipts:aR,settingsTitle:oR,closeInvite:lR,inviteUser:cR,tempPassword:uR,role:dR,roleStaff:fR,roleAdmin:hR,sendInvite:gR,inviting:mR,teamMembers:pR,noUsers:xR,editUser:yR,emailReadOnly:bR,saving:wR,noUserIdError:vR,confirmRemoveStaff:SR,role_staff:ER,role_admin:CR,home:AR,reports:TR,messaging:_R,billing:NR,settings:RR,back:OR,deleteStudent:IR,addNewCourse:MR,select:DR,day:kR,timeSlot:LR,hoursToPurchase:jR,uploadReceipt:PR,submit:BR,studentNotFound:UR,joined:FR,enrolledCourses:VR,daysTimes:HR,hoursLeft:zR,status:$R,receipt:GR,actions:qR,attendance:YR,ongoing:XR,renewalNeeded:WR,view:KR,hide:ZR,renew:QR,deleteStudentConfirm:JR,attendanceHistory:e7,noRecords:t7,submitRenew:n7,submitAdd:s7,submitRenewal:i7,cancelled:r7,editDay:a7,editTime:o7,profileMissingError_th:l7,inactiveStudents:c7,searchStudents:u7,export:"",parentPhone:d7,lineID:f7,action:h7,allFieldsRequired:g7,uploadError:m7,renewNow:p7,submitRenewalRequest:x7,exportStudents:y7,exportCSV:b7,students:w7,no:v7,hoursLabel:S7,chooseHourPackage:E7,selectHourPackageError:C7,totalPrice:A7,showDetail:T7,hideDetail:_7,baht:N7,cancellations:R7,noReceipt:O7,cancelCourse:I7,cancelRequest:M7,cancelConfirm:D7,cancelSubmit:k7,cancelPending:L7,cancelApproved:j7,cancelRejected:P7,purchasedPackages:B7,price:U7,hourPackages:F7,noPackagesDefined:V7,addPackage:H7,timesForDay:z7,courseName:$7,chooseCourseToSeeStudents:G7,inactive:q7,used:Y7,purchased:X7,studentsNeedingRenewal:W7,usedPurchased:K7,addExistingStudent:Z7,usedDays:Q7,YYYYMMDD:J7,fullDay:eO,usedHours:tO,hoursRemaining:nO,enterUsedHoursError:sO,usedHoursTooMany:iO},aO=typeof window<"u"&&localStorage.getItem("lang"),ib="en";Jn.use(A4).init({resources:{en:{translation:$8},th:{translation:rO}},lng:aO||ib,fallbackLng:ib,interpolation:{escapeValue:!1}});typeof window<"u"&&(window.i18n=Jn);var eg={exports:{}},Mu={},tg={exports:{}},ng={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb;function oO(){return rb||(rb=1,function(t){function e(re,le){var De=re.length;re.push(le);e:for(;0<De;){var $e=De-1>>>1,H=re[$e];if(0<l(H,le))re[$e]=le,re[De]=H,De=$e;else break e}}function n(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var le=re[0],De=re.pop();if(De!==le){re[0]=De;e:for(var $e=0,H=re.length,te=H>>>1;$e<te;){var ge=2*($e+1)-1,pe=re[ge],Be=ge+1,ze=re[Be];if(0>l(pe,De))Be<H&&0>l(ze,pe)?(re[$e]=ze,re[Be]=De,$e=Be):(re[$e]=pe,re[ge]=De,$e=ge);else if(Be<H&&0>l(ze,De))re[$e]=ze,re[Be]=De,$e=Be;else break e}}return le}function l(re,le){var De=re.sortIndex-le.sortIndex;return De!==0?De:re.id-le.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var h=Date,y=h.now();t.unstable_now=function(){return h.now()-y}}var b=[],x=[],S=1,A=null,N=3,I=!1,M=!1,j=!1,U=!1,$=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function V(re){for(var le=n(x);le!==null;){if(le.callback===null)r(x);else if(le.startTime<=re)r(x),le.sortIndex=le.expirationTime,e(b,le);else break;le=n(x)}}function z(re){if(j=!1,V(re),!M)if(n(b)!==null)M=!0,Z||(Z=!0,ve());else{var le=n(x);le!==null&&se(z,le.startTime-re)}}var Z=!1,W=-1,ae=5,X=-1;function be(){return U?!0:!(t.unstable_now()-X<ae)}function Ae(){if(U=!1,Z){var re=t.unstable_now();X=re;var le=!0;try{e:{M=!1,j&&(j=!1,Y(W),W=-1),I=!0;var De=N;try{t:{for(V(re),A=n(b);A!==null&&!(A.expirationTime>re&&be());){var $e=A.callback;if(typeof $e=="function"){A.callback=null,N=A.priorityLevel;var H=$e(A.expirationTime<=re);if(re=t.unstable_now(),typeof H=="function"){A.callback=H,V(re),le=!0;break t}A===n(b)&&r(b),V(re)}else r(b);A=n(b)}if(A!==null)le=!0;else{var te=n(x);te!==null&&se(z,te.startTime-re),le=!1}}break e}finally{A=null,N=De,I=!1}le=void 0}}finally{le?ve():Z=!1}}}var ve;if(typeof P=="function")ve=function(){P(Ae)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Fe=ce.port2;ce.port1.onmessage=Ae,ve=function(){Fe.postMessage(null)}}else ve=function(){$(Ae,0)};function se(re,le){W=$(function(){re(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_next=function(re){switch(N){case 1:case 2:case 3:var le=3;break;default:le=N}var De=N;N=le;try{return re()}finally{N=De}},t.unstable_requestPaint=function(){U=!0},t.unstable_runWithPriority=function(re,le){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var De=N;N=re;try{return le()}finally{N=De}},t.unstable_scheduleCallback=function(re,le,De){var $e=t.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?$e+De:$e):De=$e,re){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=De+H,re={id:S++,callback:le,priorityLevel:re,startTime:De,expirationTime:H,sortIndex:-1},De>$e?(re.sortIndex=De,e(x,re),n(b)===null&&re===n(x)&&(j?(Y(W),W=-1):j=!0,se(z,De-$e))):(re.sortIndex=H,e(b,re),M||I||(M=!0,Z||(Z=!0,ve()))),re},t.unstable_shouldYield=be,t.unstable_wrapCallback=function(re){var le=N;return function(){var De=N;N=le;try{return re.apply(this,arguments)}finally{N=De}}}}(ng)),ng}var ab;function lO(){return ab||(ab=1,tg.exports=oO()),tg.exports}var sg={exports:{}},Ss={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ob;function cO(){if(ob)return Ss;ob=1;var t=Uh();function e(b){var x="https://react.dev/errors/"+b;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)x+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+b+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(b,x,S){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:A==null?null:""+A,children:b,containerInfo:x,implementation:S}}var h=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(b,x){if(b==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Ss.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ss.createPortal=function(b,x){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(b,x,null,S)},Ss.flushSync=function(b){var x=h.T,S=r.p;try{if(h.T=null,r.p=2,b)return b()}finally{h.T=x,r.p=S,r.d.f()}},Ss.preconnect=function(b,x){typeof b=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(b,x))},Ss.prefetchDNS=function(b){typeof b=="string"&&r.d.D(b)},Ss.preinit=function(b,x){if(typeof b=="string"&&x&&typeof x.as=="string"){var S=x.as,A=y(S,x.crossOrigin),N=typeof x.integrity=="string"?x.integrity:void 0,I=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;S==="style"?r.d.S(b,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:A,integrity:N,fetchPriority:I}):S==="script"&&r.d.X(b,{crossOrigin:A,integrity:N,fetchPriority:I,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Ss.preinitModule=function(b,x){if(typeof b=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var S=y(x.as,x.crossOrigin);r.d.M(b,{crossOrigin:S,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(b)},Ss.preload=function(b,x){if(typeof b=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var S=x.as,A=y(S,x.crossOrigin);r.d.L(b,S,{crossOrigin:A,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Ss.preloadModule=function(b,x){if(typeof b=="string")if(x){var S=y(x.as,x.crossOrigin);r.d.m(b,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:S,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(b)},Ss.requestFormReset=function(b){r.d.r(b)},Ss.unstable_batchedUpdates=function(b,x){return b(x)},Ss.useFormState=function(b,x,S){return h.H.useFormState(b,x,S)},Ss.useFormStatus=function(){return h.H.useHostTransitionStatus()},Ss.version="19.1.0",Ss}var lb;function p3(){if(lb)return sg.exports;lb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sg.exports=cO(),sg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb;function uO(){if(cb)return Mu;cb=1;var t=lO(),e=Uh(),n=p3();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function u(s){var a=s,d=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(d=a.return),s=a.return;while(s)}return a.tag===3?d:null}function h(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function y(s){if(u(s)!==s)throw Error(r(188))}function b(s){var a=s.alternate;if(!a){if(a=u(s),a===null)throw Error(r(188));return a!==s?null:s}for(var d=s,m=a;;){var v=d.return;if(v===null)break;var T=v.alternate;if(T===null){if(m=v.return,m!==null){d=m;continue}break}if(v.child===T.child){for(T=v.child;T;){if(T===d)return y(v),s;if(T===m)return y(v),a;T=T.sibling}throw Error(r(188))}if(d.return!==m.return)d=v,m=T;else{for(var D=!1,F=v.child;F;){if(F===d){D=!0,d=v,m=T;break}if(F===m){D=!0,m=v,d=T;break}F=F.sibling}if(!D){for(F=T.child;F;){if(F===d){D=!0,d=T,m=v;break}if(F===m){D=!0,m=T,d=v;break}F=F.sibling}if(!D)throw Error(r(189))}}if(d.alternate!==m)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?s:a}function x(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=x(s),a!==null)return a;s=s.sibling}return null}var S=Object.assign,A=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),P=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),be=Symbol.for("react.memo_cache_sentinel"),Ae=Symbol.iterator;function ve(s){return s===null||typeof s!="object"?null:(s=Ae&&s[Ae]||s["@@iterator"],typeof s=="function"?s:null)}var ce=Symbol.for("react.client.reference");function Fe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ce?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case M:return"Fragment";case U:return"Profiler";case j:return"StrictMode";case z:return"Suspense";case Z:return"SuspenseList";case X:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case I:return"Portal";case P:return(s.displayName||"Context")+".Provider";case Y:return(s._context.displayName||"Context")+".Consumer";case V:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case W:return a=s.displayName||null,a!==null?a:Fe(s.type)||"Memo";case ae:a=s._payload,s=s._init;try{return Fe(s(a))}catch{}}return null}var se=Array.isArray,re=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De={pending:!1,data:null,method:null,action:null},$e=[],H=-1;function te(s){return{current:s}}function ge(s){0>H||(s.current=$e[H],$e[H]=null,H--)}function pe(s,a){H++,$e[H]=s.current,s.current=a}var Be=te(null),ze=te(null),Ee=te(null),At=te(null);function Ze(s,a){switch(pe(Ee,a),pe(ze,s),pe(Be,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?u2(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=u2(a),s=d2(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ge(Be),pe(Be,s)}function pt(){ge(Be),ge(ze),ge(Ee)}function wn(s){s.memoizedState!==null&&pe(At,s);var a=Be.current,d=d2(a,s.type);a!==d&&(pe(ze,s),pe(Be,d))}function Re(s){ze.current===s&&(ge(Be),ge(ze)),At.current===s&&(ge(At),Au._currentValue=De)}var ie=Object.prototype.hasOwnProperty,Se=t.unstable_scheduleCallback,Ie=t.unstable_cancelCallback,Oe=t.unstable_shouldYield,Le=t.unstable_requestPaint,We=t.unstable_now,st=t.unstable_getCurrentPriorityLevel,Ge=t.unstable_ImmediatePriority,vt=t.unstable_UserBlockingPriority,He=t.unstable_NormalPriority,ui=t.unstable_LowPriority,Yi=t.unstable_IdlePriority,Ls=t.log,ia=t.unstable_setDisableYieldValue,Bn=null,Ue=null;function at(s){if(typeof Ls=="function"&&ia(s),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(Bn,s)}catch{}}var tt=Math.clz32?Math.clz32:Ft,Ut=Math.log,cn=Math.LN2;function Ft(s){return s>>>=0,s===0?32:31-(Ut(s)/cn|0)|0}var St=256,je=4194304;function kt(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Nt(s,a,d){var m=s.pendingLanes;if(m===0)return 0;var v=0,T=s.suspendedLanes,D=s.pingedLanes;s=s.warmLanes;var F=m&134217727;return F!==0?(m=F&~T,m!==0?v=kt(m):(D&=F,D!==0?v=kt(D):d||(d=F&~s,d!==0&&(v=kt(d))))):(F=m&~T,F!==0?v=kt(F):D!==0?v=kt(D):d||(d=m&~s,d!==0&&(v=kt(d)))),v===0?0:a!==0&&a!==v&&(a&T)===0&&(T=v&-v,d=a&-a,T>=d||T===32&&(d&4194048)!==0)?a:v}function Pt(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function js(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ms(){var s=St;return St<<=1,(St&4194048)===0&&(St=256),s}function ra(){var s=je;return je<<=1,(je&62914560)===0&&(je=4194304),s}function Tt(s){for(var a=[],d=0;31>d;d++)a.push(s);return a}function Ks(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function kd(s,a,d,m,v,T){var D=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var F=s.entanglements,K=s.expirationTimes,he=s.hiddenUpdates;for(d=D&~d;0<d;){var Ce=31-tt(d),_e=1<<Ce;F[Ce]=0,K[Ce]=-1;var me=he[Ce];if(me!==null)for(he[Ce]=null,Ce=0;Ce<me.length;Ce++){var ye=me[Ce];ye!==null&&(ye.lane&=-536870913)}d&=~_e}m!==0&&Pc(s,m,0),T!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=T&~(D&~a))}function Pc(s,a,d){s.pendingLanes|=a,s.suspendedLanes&=~a;var m=31-tt(a);s.entangledLanes|=a,s.entanglements[m]=s.entanglements[m]|1073741824|d&4194090}function Ps(s,a){var d=s.entangledLanes|=a;for(s=s.entanglements;d;){var m=31-tt(d),v=1<<m;v&a|s[m]&a&&(s[m]|=a),d&=~v}}function fo(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Un(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Er(){var s=le.p;return s!==0?s:(s=window.event,s===void 0?32:O2(s.type))}function dl(s,a){var d=le.p;try{return le.p=s,a()}finally{le.p=d}}var $n=Math.random().toString(36).slice(2),es="__reactFiber$"+$n,vn="__reactProps$"+$n,Xi="__reactContainer$"+$n,ts="__reactEvents$"+$n,Cr="__reactListeners$"+$n,Bs="__reactHandles$"+$n,qe="__reactResources$"+$n,di="__reactMarker$"+$n;function ho(s){delete s[es],delete s[vn],delete s[ts],delete s[Cr],delete s[Bs]}function Rn(s){var a=s[es];if(a)return a;for(var d=s.parentNode;d;){if(a=d[Xi]||d[es]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(s=m2(s);s!==null;){if(d=s[es])return d;s=m2(s)}return a}s=d,d=s.parentNode}return null}function Zs(s){if(s=s[es]||s[Xi]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function Wi(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function Oi(s){var a=s[qe];return a||(a=s[qe]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Yt(s){s[di]=!0}var Ld=new Set,jd={};function ns(s,a){Sn(s,a),Sn(s+"Capture",a)}function Sn(s,a){for(jd[s]=a,s=0;s<a.length;s++)Ld.add(a[s])}var an=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bc={},Ii={};function Uc(s){return ie.call(Ii,s)?!0:ie.call(Bc,s)?!1:an.test(s)?Ii[s]=!0:(Bc[s]=!0,!1)}function Ne(s,a,d){if(Uc(a))if(d===null)s.removeAttribute(a);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var m=a.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+d)}}function fl(s,a,d){if(d===null)s.removeAttribute(a);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+d)}}function Vt(s,a,d,m){if(m===null)s.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(a,d,""+m)}}var Ki,Pd;function Rt(s){if(Ki===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);Ki=a&&a[1]||"",Pd=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ki+s+Pd}var Lt=!1;function Et(s,a){if(!s||Lt)return"";Lt=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(a){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(ye){var me=ye}Reflect.construct(s,[],_e)}else{try{_e.call()}catch(ye){me=ye}s.call(_e.prototype)}}else{try{throw Error()}catch(ye){me=ye}(_e=s())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(ye){if(ye&&me&&typeof ye.stack=="string")return[ye.stack,me.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=m.DetermineComponentFrameRoot(),D=T[0],F=T[1];if(D&&F){var K=D.split(`
`),he=F.split(`
`);for(v=m=0;m<K.length&&!K[m].includes("DetermineComponentFrameRoot");)m++;for(;v<he.length&&!he[v].includes("DetermineComponentFrameRoot");)v++;if(m===K.length||v===he.length)for(m=K.length-1,v=he.length-1;1<=m&&0<=v&&K[m]!==he[v];)v--;for(;1<=m&&0<=v;m--,v--)if(K[m]!==he[v]){if(m!==1||v!==1)do if(m--,v--,0>v||K[m]!==he[v]){var Ce=`
`+K[m].replace(" at new "," at ");return s.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",s.displayName)),Ce}while(1<=m&&0<=v);break}}}finally{Lt=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?Rt(d):""}function Fc(s){switch(s.tag){case 26:case 27:case 5:return Rt(s.type);case 16:return Rt("Lazy");case 13:return Rt("Suspense");case 19:return Rt("SuspenseList");case 0:case 15:return Et(s.type,!1);case 11:return Et(s.type.render,!1);case 1:return Et(s.type,!0);case 31:return Rt("Activity");default:return""}}function hl(s){try{var a="";do a+=Fc(s),s=s.return;while(s);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function ps(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function En(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Zi(s){var a=En(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),m=""+s[a];if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,T=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return v.call(this)},set:function(D){m=""+D,T.call(this,D)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(D){m=""+D},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function gl(s){s._valueTracker||(s._valueTracker=Zi(s))}function fn(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var d=a.getValue(),m="";return s&&(m=En(s)?s.checked?"true":"false":s.value),s=m,s!==d?(a.setValue(s),!0):!1}function Qs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var n0=/[\n"\\]/g;function Gn(s){return s.replace(n0,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function $t(s,a,d,m,v,T,D,F){s.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.type=D:s.removeAttribute("type"),a!=null?D==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+ps(a)):s.value!==""+ps(a)&&(s.value=""+ps(a)):D!=="submit"&&D!=="reset"||s.removeAttribute("value"),a!=null?de(s,D,ps(a)):d!=null?de(s,D,ps(d)):m!=null&&s.removeAttribute("value"),v==null&&T!=null&&(s.defaultChecked=!!T),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?s.name=""+ps(F):s.removeAttribute("name")}function qn(s,a,d,m,v,T,D,F){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.type=T),a!=null||d!=null){if(!(T!=="submit"&&T!=="reset"||a!=null))return;d=d!=null?""+ps(d):"",a=a!=null?""+ps(a):d,F||a===s.value||(s.value=a),s.defaultValue=a}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=F?s.checked:!!m,s.defaultChecked=!!m,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(s.name=D)}function de(s,a,d){a==="number"&&Qs(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function G(s,a,d,m){if(s=s.options,a){a={};for(var v=0;v<d.length;v++)a["$"+d[v]]=!0;for(d=0;d<s.length;d++)v=a.hasOwnProperty("$"+s[d].value),s[d].selected!==v&&(s[d].selected=v),v&&m&&(s[d].defaultSelected=!0)}else{for(d=""+ps(d),a=null,v=0;v<s.length;v++){if(s[v].value===d){s[v].selected=!0,m&&(s[v].defaultSelected=!0);return}a!==null||s[v].disabled||(a=s[v])}a!==null&&(a.selected=!0)}}function Qe(s,a,d){if(a!=null&&(a=""+ps(a),a!==s.value&&(s.value=a),d==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=d!=null?""+ps(d):""}function On(s,a,d,m){if(a==null){if(m!=null){if(d!=null)throw Error(r(92));if(se(m)){if(1<m.length)throw Error(r(93));m=m[0]}d=m}d==null&&(d=""),a=d}d=ps(a),s.defaultValue=d,m=s.textContent,m===d&&m!==""&&m!==null&&(s.value=m)}function Yn(s,a){if(a){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=a;return}}s.textContent=a}var s0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ml(s,a,d){var m=a.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":m?s.setProperty(a,d):typeof d!="number"||d===0||s0.has(a)?a==="float"?s.cssFloat=d:s[a]=(""+d).trim():s[a]=d+"px"}function Ns(s,a,d){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||a!=null&&a.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var v in a)m=a[v],a.hasOwnProperty(v)&&d[v]!==m&&ml(s,v,m)}else for(var T in a)a.hasOwnProperty(T)&&ml(s,T,a[T])}function Je(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var un=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pl(s){return Bd.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var go=null;function aa(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Qi=null,oa=null;function In(s){var a=Zs(s);if(a&&(s=a.stateNode)){var d=s[vn]||null;e:switch(s=a.stateNode,a.type){case"input":if($t(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),a=d.name,d.type==="radio"&&a!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Gn(""+a)+'"][type="radio"]'),a=0;a<d.length;a++){var m=d[a];if(m!==s&&m.form===s.form){var v=m[vn]||null;if(!v)throw Error(r(90));$t(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<d.length;a++)m=d[a],m.form===s.form&&fn(m)}break e;case"textarea":Qe(s,d.value,d.defaultValue);break e;case"select":a=d.value,a!=null&&G(s,!!d.multiple,a,!1)}}}var Ar=!1;function Mi(s,a,d){if(Ar)return s(a,d);Ar=!0;try{var m=s(a);return m}finally{if(Ar=!1,(Qi!==null||oa!==null)&&(Cf(),Qi&&(a=Qi,s=oa,oa=Qi=null,In(a),s)))for(a=0;a<s.length;a++)In(s[a])}}function nt(s,a){var d=s.stateNode;if(d===null)return null;var m=d[vn]||null;if(m===null)return null;d=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(r(231,a,typeof d));return d}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gt=!1;if(Di)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){gt=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{gt=!1}var Ji=null,mo=null,po=null;function er(){if(po)return po;var s,a=mo,d=a.length,m,v="value"in Ji?Ji.value:Ji.textContent,T=v.length;for(s=0;s<d&&a[s]===v[s];s++);var D=d-s;for(m=1;m<=D&&a[d-m]===v[T-m];m++);return po=v.slice(s,1<m?1-m:void 0)}function xl(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function tr(){return!0}function la(){return!1}function Fn(s){function a(d,m,v,T,D){this._reactName=d,this._targetInst=v,this.type=m,this.nativeEvent=T,this.target=D,this.currentTarget=null;for(var F in s)s.hasOwnProperty(F)&&(d=s[F],this[F]=d?d(T):T[F]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?tr:la,this.isPropagationStopped=la,this}return S(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),a}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sr=Fn(nr),ki=S({},nr,{view:0,detail:0}),xs=Fn(ki),yl,bl,ca,wl=S({},ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ca&&(ca&&s.type==="mousemove"?(yl=s.screenX-ca.screenX,bl=s.screenY-ca.screenY):bl=yl=0,ca=s),yl)},movementY:function(s){return"movementY"in s?s.movementY:bl}}),Ud=Fn(wl),i0=S({},wl,{dataTransfer:0}),Gt=Fn(i0),Fd=S({},ki,{relatedTarget:0}),ua=Fn(Fd),ir=S({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),r0=Fn(ir),we=S({},nr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),yt=Fn(we),Xn=S({},nr,{data:0}),xo=Fn(Xn),Vd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l0(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=o0[s])?!!a[s]:!1}function yo(){return l0}var Mn=S({},ki,{key:function(s){if(s.key){var a=Vd[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=xl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?a0[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yo,charCode:function(s){return s.type==="keypress"?xl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?xl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Vc=Fn(Mn),hn=S({},wl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bo=Fn(hn),Tr=S({},ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yo}),Xt=Fn(Tr),it=S({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),c0=Fn(it),nn=S({},wl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),_r=Fn(nn),da=S({},nr,{newState:0,oldState:0}),u0=Fn(da),fi=[9,13,27,32],wo=Di&&"CompositionEvent"in window,fa=null;Di&&"documentMode"in document&&(fa=document.documentMode);var Hc=Di&&"TextEvent"in window&&!fa,zc=Di&&(!wo||fa&&8<fa&&11>=fa),$c=" ",Hd=!1;function Nr(s,a){switch(s){case"keyup":return fi.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ha=!1;function vo(s,a){switch(s){case"compositionend":return vl(a);case"keypress":return a.which!==32?null:(Hd=!0,$c);case"textInput":return s=a.data,s===$c&&Hd?null:s;default:return null}}function d0(s,a){if(ha)return s==="compositionend"||!wo&&Nr(s,a)?(s=er(),po=mo=Ji=null,ha=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return zc&&a.locale!=="ko"?null:a.data;default:return null}}var rr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function So(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!rr[s.type]:a==="textarea"}function Rs(s,a,d,m){Qi?oa?oa.push(m):oa=[m]:Qi=m,a=Of(a,"onChange"),0<a.length&&(d=new sr("onChange","change",null,d,m),s.push({event:d,listeners:a}))}var ga=null,ys=null;function f0(s){r2(s,0)}function ma(s){var a=Wi(s);if(fn(a))return s}function zd(s,a){if(s==="change")return a}var Gc=!1;if(Di){var Us;if(Di){var qc="oninput"in document;if(!qc){var Sl=document.createElement("div");Sl.setAttribute("oninput","return;"),qc=typeof Sl.oninput=="function"}Us=qc}else Us=!1;Gc=Us&&(!document.documentMode||9<document.documentMode)}function pa(){ga&&(ga.detachEvent("onpropertychange",Dt),ys=ga=null)}function Dt(s){if(s.propertyName==="value"&&ma(ys)){var a=[];Rs(a,ys,s,aa(s)),Mi(f0,a)}}function El(s,a,d){s==="focusin"?(pa(),ga=a,ys=d,ga.attachEvent("onpropertychange",Dt)):s==="focusout"&&pa()}function k(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ma(ys)}function i(s,a){if(s==="click")return ma(a)}function o(s,a){if(s==="input"||s==="change")return ma(a)}function c(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var f=typeof Object.is=="function"?Object.is:c;function g(s,a){if(f(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var d=Object.keys(s),m=Object.keys(a);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var v=d[m];if(!ie.call(a,v)||!f(s[v],a[v]))return!1}return!0}function p(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function w(s,a){var d=p(s);s=0;for(var m;d;){if(d.nodeType===3){if(m=s+d.textContent.length,s<=a&&m>=a)return{node:d,offset:a-s};s=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=p(d)}}function C(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?C(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function _(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Qs(s.document);a instanceof s.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)s=a.contentWindow;else break;a=Qs(s.document)}return a}function O(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var L=Di&&"documentMode"in document&&11>=document.documentMode,B=null,q=null,Q=null,ee=!1;function ue(s,a,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;ee||B==null||B!==Qs(m)||(m=B,"selectionStart"in m&&O(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Q&&g(Q,m)||(Q=m,m=Of(q,"onSelect"),0<m.length&&(a=new sr("onSelect","select",null,a,d),s.push({event:a,listeners:m}),a.target=B)))}function xe(s,a){var d={};return d[s.toLowerCase()]=a.toLowerCase(),d["Webkit"+s]="webkit"+a,d["Moz"+s]="moz"+a,d}var ke={animationend:xe("Animation","AnimationEnd"),animationiteration:xe("Animation","AnimationIteration"),animationstart:xe("Animation","AnimationStart"),transitionrun:xe("Transition","TransitionRun"),transitionstart:xe("Transition","TransitionStart"),transitioncancel:xe("Transition","TransitionCancel"),transitionend:xe("Transition","TransitionEnd")},Pe={},Me={};Di&&(Me=document.createElement("div").style,"AnimationEvent"in window||(delete ke.animationend.animation,delete ke.animationiteration.animation,delete ke.animationstart.animation),"TransitionEvent"in window||delete ke.transitionend.transition);function mt(s){if(Pe[s])return Pe[s];if(!ke[s])return s;var a=ke[s],d;for(d in a)if(a.hasOwnProperty(d)&&d in Me)return Pe[s]=a[d];return s}var ht=mt("animationend"),us=mt("animationiteration"),Fs=mt("animationstart"),bs=mt("transitionrun"),Wt=mt("transitionstart"),Wn=mt("transitioncancel"),ws=mt("transitionend"),Rr=new Map,ar="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ar.push("scrollEnd");function Js(s,a){Rr.set(s,a),ns(a,[s])}var $d=new WeakMap;function hi(s,a){if(typeof s=="object"&&s!==null){var d=$d.get(s);return d!==void 0?d:(a={value:s,source:a,stack:hl(a)},$d.set(s,a),a)}return{value:s,source:a,stack:hl(a)}}var gi=[],Cl=0,h0=0;function Gd(){for(var s=Cl,a=h0=Cl=0;a<s;){var d=gi[a];gi[a++]=null;var m=gi[a];gi[a++]=null;var v=gi[a];gi[a++]=null;var T=gi[a];if(gi[a++]=null,m!==null&&v!==null){var D=m.pending;D===null?v.next=v:(v.next=D.next,D.next=v),m.pending=v}T!==0&&zp(d,v,T)}}function qd(s,a,d,m){gi[Cl++]=s,gi[Cl++]=a,gi[Cl++]=d,gi[Cl++]=m,h0|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function g0(s,a,d,m){return qd(s,a,d,m),Yd(s)}function Al(s,a){return qd(s,null,null,a),Yd(s)}function zp(s,a,d){s.lanes|=d;var m=s.alternate;m!==null&&(m.lanes|=d);for(var v=!1,T=s.return;T!==null;)T.childLanes|=d,m=T.alternate,m!==null&&(m.childLanes|=d),T.tag===22&&(s=T.stateNode,s===null||s._visibility&1||(v=!0)),s=T,T=T.return;return s.tag===3?(T=s.stateNode,v&&a!==null&&(v=31-tt(d),s=T.hiddenUpdates,m=s[v],m===null?s[v]=[a]:m.push(a),a.lane=d|536870912),T):null}function Yd(s){if(50<xu)throw xu=0,w1=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Tl={};function OC(s,a,d,m){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(s,a,d,m){return new OC(s,a,d,m)}function m0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Or(s,a){var d=s.alternate;return d===null?(d=ei(s.tag,a,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=a,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&65011712,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,a=s.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function $p(s,a){s.flags&=65011714;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,a=d.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Xd(s,a,d,m,v,T){var D=0;if(m=s,typeof s=="function")m0(s)&&(D=1);else if(typeof s=="string")D=MA(s,d,Be.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case X:return s=ei(31,d,a,v),s.elementType=X,s.lanes=T,s;case M:return Eo(d.children,v,T,a);case j:D=8,v|=24;break;case U:return s=ei(12,d,a,v|2),s.elementType=U,s.lanes=T,s;case z:return s=ei(13,d,a,v),s.elementType=z,s.lanes=T,s;case Z:return s=ei(19,d,a,v),s.elementType=Z,s.lanes=T,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case $:case P:D=10;break e;case Y:D=9;break e;case V:D=11;break e;case W:D=14;break e;case ae:D=16,m=null;break e}D=29,d=Error(r(130,s===null?"null":typeof s,"")),m=null}return a=ei(D,d,a,v),a.elementType=s,a.type=m,a.lanes=T,a}function Eo(s,a,d,m){return s=ei(7,s,m,a),s.lanes=d,s}function p0(s,a,d){return s=ei(6,s,null,a),s.lanes=d,s}function x0(s,a,d){return a=ei(4,s.children!==null?s.children:[],s.key,a),a.lanes=d,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var _l=[],Nl=0,Wd=null,Kd=0,mi=[],pi=0,Co=null,Ir=1,Mr="";function Ao(s,a){_l[Nl++]=Kd,_l[Nl++]=Wd,Wd=s,Kd=a}function Gp(s,a,d){mi[pi++]=Ir,mi[pi++]=Mr,mi[pi++]=Co,Co=s;var m=Ir;s=Mr;var v=32-tt(m)-1;m&=~(1<<v),d+=1;var T=32-tt(a)+v;if(30<T){var D=v-v%5;T=(m&(1<<D)-1).toString(32),m>>=D,v-=D,Ir=1<<32-tt(a)+v|d<<v|m,Mr=T+s}else Ir=1<<T|d<<v|m,Mr=s}function y0(s){s.return!==null&&(Ao(s,1),Gp(s,1,0))}function b0(s){for(;s===Wd;)Wd=_l[--Nl],_l[Nl]=null,Kd=_l[--Nl],_l[Nl]=null;for(;s===Co;)Co=mi[--pi],mi[pi]=null,Mr=mi[--pi],mi[pi]=null,Ir=mi[--pi],mi[pi]=null}var Os=null,Cn=null,zt=!1,To=null,or=!1,w0=Error(r(519));function _o(s){var a=Error(r(418,""));throw Wc(hi(a,s)),w0}function qp(s){var a=s.stateNode,d=s.type,m=s.memoizedProps;switch(a[es]=s,a[vn]=m,d){case"dialog":It("cancel",a),It("close",a);break;case"iframe":case"object":case"embed":It("load",a);break;case"video":case"audio":for(d=0;d<bu.length;d++)It(bu[d],a);break;case"source":It("error",a);break;case"img":case"image":case"link":It("error",a),It("load",a);break;case"details":It("toggle",a);break;case"input":It("invalid",a),qn(a,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),gl(a);break;case"select":It("invalid",a);break;case"textarea":It("invalid",a),On(a,m.value,m.defaultValue,m.children),gl(a)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||a.textContent===""+d||m.suppressHydrationWarning===!0||c2(a.textContent,d)?(m.popover!=null&&(It("beforetoggle",a),It("toggle",a)),m.onScroll!=null&&It("scroll",a),m.onScrollEnd!=null&&It("scrollend",a),m.onClick!=null&&(a.onclick=If),a=!0):a=!1,a||_o(s)}function Yp(s){for(Os=s.return;Os;)switch(Os.tag){case 5:case 13:or=!1;return;case 27:case 3:or=!0;return;default:Os=Os.return}}function Yc(s){if(s!==Os)return!1;if(!zt)return Yp(s),zt=!0,!1;var a=s.tag,d;if((d=a!==3&&a!==27)&&((d=a===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||j1(s.type,s.memoizedProps)),d=!d),d&&Cn&&_o(s),Yp(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(d=s.data,d==="/$"){if(a===0){Cn=ji(s.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++;s=s.nextSibling}Cn=null}}else a===27?(a=Cn,Ma(s.type)?(s=F1,F1=null,Cn=s):Cn=a):Cn=Os?ji(s.stateNode.nextSibling):null;return!0}function Xc(){Cn=Os=null,zt=!1}function Xp(){var s=To;return s!==null&&(zs===null?zs=s:zs.push.apply(zs,s),To=null),s}function Wc(s){To===null?To=[s]:To.push(s)}var v0=te(null),No=null,Dr=null;function xa(s,a,d){pe(v0,a._currentValue),a._currentValue=d}function kr(s){s._currentValue=v0.current,ge(v0)}function S0(s,a,d){for(;s!==null;){var m=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),s===d)break;s=s.return}}function E0(s,a,d,m){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var T=v.dependencies;if(T!==null){var D=v.child;T=T.firstContext;e:for(;T!==null;){var F=T;T=v;for(var K=0;K<a.length;K++)if(F.context===a[K]){T.lanes|=d,F=T.alternate,F!==null&&(F.lanes|=d),S0(T.return,d,s),m||(D=null);break e}T=F.next}}else if(v.tag===18){if(D=v.return,D===null)throw Error(r(341));D.lanes|=d,T=D.alternate,T!==null&&(T.lanes|=d),S0(D,d,s),D=null}else D=v.child;if(D!==null)D.return=v;else for(D=v;D!==null;){if(D===s){D=null;break}if(v=D.sibling,v!==null){v.return=D.return,D=v;break}D=D.return}v=D}}function Kc(s,a,d,m){s=null;for(var v=a,T=!1;v!==null;){if(!T){if((v.flags&524288)!==0)T=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var D=v.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var F=v.type;f(v.pendingProps.value,D.value)||(s!==null?s.push(F):s=[F])}}else if(v===At.current){if(D=v.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(Au):s=[Au])}v=v.return}s!==null&&E0(a,s,d,m),a.flags|=262144}function Zd(s){for(s=s.firstContext;s!==null;){if(!f(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ro(s){No=s,Dr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function vs(s){return Wp(No,s)}function Qd(s,a){return No===null&&Ro(s),Wp(s,a)}function Wp(s,a){var d=a._currentValue;if(a={context:a,memoizedValue:d,next:null},Dr===null){if(s===null)throw Error(r(308));Dr=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Dr=Dr.next=a;return d}var IC=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(d,m){s.push(m)}};this.abort=function(){a.aborted=!0,s.forEach(function(d){return d()})}},MC=t.unstable_scheduleCallback,DC=t.unstable_NormalPriority,Kn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function C0(){return{controller:new IC,data:new Map,refCount:0}}function Zc(s){s.refCount--,s.refCount===0&&MC(DC,function(){s.controller.abort()})}var Qc=null,A0=0,Rl=0,Ol=null;function kC(s,a){if(Qc===null){var d=Qc=[];A0=0,Rl=_1(),Ol={status:"pending",value:void 0,then:function(m){d.push(m)}}}return A0++,a.then(Kp,Kp),a}function Kp(){if(--A0===0&&Qc!==null){Ol!==null&&(Ol.status="fulfilled");var s=Qc;Qc=null,Rl=0,Ol=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function LC(s,a){var d=[],m={status:"pending",value:null,reason:null,then:function(v){d.push(v)}};return s.then(function(){m.status="fulfilled",m.value=a;for(var v=0;v<d.length;v++)(0,d[v])(a)},function(v){for(m.status="rejected",m.reason=v,v=0;v<d.length;v++)(0,d[v])(void 0)}),m}var Zp=re.S;re.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&kC(s,a),Zp!==null&&Zp(s,a)};var Oo=te(null);function T0(){var s=Oo.current;return s!==null?s:on.pooledCache}function Jd(s,a){a===null?pe(Oo,Oo.current):pe(Oo,a.pool)}function Qp(){var s=T0();return s===null?null:{parent:Kn._currentValue,pool:s}}var Jc=Error(r(460)),Jp=Error(r(474)),ef=Error(r(542)),_0={then:function(){}};function ex(s){return s=s.status,s==="fulfilled"||s==="rejected"}function tf(){}function tx(s,a,d){switch(d=s[d],d===void 0?s.push(a):d!==a&&(a.then(tf,tf),a=d),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,sx(s),s;default:if(typeof a.status=="string")a.then(tf,tf);else{if(s=on,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(m){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=m}},function(m){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=m}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,sx(s),s}throw eu=a,Jc}}var eu=null;function nx(){if(eu===null)throw Error(r(459));var s=eu;return eu=null,s}function sx(s){if(s===Jc||s===ef)throw Error(r(483))}var ya=!1;function N0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function R0(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ba(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function wa(s,a,d){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Kt&2)!==0){var v=m.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),m.pending=a,a=Yd(s),zp(s,null,d),a}return qd(s,m,a,d),Yd(s)}function tu(s,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194048)!==0)){var m=a.lanes;m&=s.pendingLanes,d|=m,a.lanes=d,Ps(s,d)}}function O0(s,a){var d=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var v=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var D={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};T===null?v=T=D:T=T.next=D,d=d.next}while(d!==null);T===null?v=T=a:T=T.next=a}else v=T=a;d={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:T,shared:m.shared,callbacks:m.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=a:s.next=a,d.lastBaseUpdate=a}var I0=!1;function nu(){if(I0){var s=Ol;if(s!==null)throw s}}function su(s,a,d,m){I0=!1;var v=s.updateQueue;ya=!1;var T=v.firstBaseUpdate,D=v.lastBaseUpdate,F=v.shared.pending;if(F!==null){v.shared.pending=null;var K=F,he=K.next;K.next=null,D===null?T=he:D.next=he,D=K;var Ce=s.alternate;Ce!==null&&(Ce=Ce.updateQueue,F=Ce.lastBaseUpdate,F!==D&&(F===null?Ce.firstBaseUpdate=he:F.next=he,Ce.lastBaseUpdate=K))}if(T!==null){var _e=v.baseState;D=0,Ce=he=K=null,F=T;do{var me=F.lane&-536870913,ye=me!==F.lane;if(ye?(Bt&me)===me:(m&me)===me){me!==0&&me===Rl&&(I0=!0),Ce!==null&&(Ce=Ce.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var ut=s,ot=F;me=a;var tn=d;switch(ot.tag){case 1:if(ut=ot.payload,typeof ut=="function"){_e=ut.call(tn,_e,me);break e}_e=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=ot.payload,me=typeof ut=="function"?ut.call(tn,_e,me):ut,me==null)break e;_e=S({},_e,me);break e;case 2:ya=!0}}me=F.callback,me!==null&&(s.flags|=64,ye&&(s.flags|=8192),ye=v.callbacks,ye===null?v.callbacks=[me]:ye.push(me))}else ye={lane:me,tag:F.tag,payload:F.payload,callback:F.callback,next:null},Ce===null?(he=Ce=ye,K=_e):Ce=Ce.next=ye,D|=me;if(F=F.next,F===null){if(F=v.shared.pending,F===null)break;ye=F,F=ye.next,ye.next=null,v.lastBaseUpdate=ye,v.shared.pending=null}}while(!0);Ce===null&&(K=_e),v.baseState=K,v.firstBaseUpdate=he,v.lastBaseUpdate=Ce,T===null&&(v.shared.lanes=0),Na|=D,s.lanes=D,s.memoizedState=_e}}function ix(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function rx(s,a){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)ix(d[s],a)}var Il=te(null),nf=te(0);function ax(s,a){s=Vr,pe(nf,s),pe(Il,a),Vr=s|a.baseLanes}function M0(){pe(nf,Vr),pe(Il,Il.current)}function D0(){Vr=nf.current,ge(Il),ge(nf)}var va=0,Ct=null,Jt=null,Vn=null,sf=!1,Ml=!1,Io=!1,rf=0,iu=0,Dl=null,jC=0;function Dn(){throw Error(r(321))}function k0(s,a){if(a===null)return!1;for(var d=0;d<a.length&&d<s.length;d++)if(!f(s[d],a[d]))return!1;return!0}function L0(s,a,d,m,v,T){return va=T,Ct=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,re.H=s===null||s.memoizedState===null?zx:$x,Io=!1,T=d(m,v),Io=!1,Ml&&(T=lx(a,d,m,v)),ox(s),T}function ox(s){re.H=df;var a=Jt!==null&&Jt.next!==null;if(va=0,Vn=Jt=Ct=null,sf=!1,iu=0,Dl=null,a)throw Error(r(300));s===null||ss||(s=s.dependencies,s!==null&&Zd(s)&&(ss=!0))}function lx(s,a,d,m){Ct=s;var v=0;do{if(Ml&&(Dl=null),iu=0,Ml=!1,25<=v)throw Error(r(301));if(v+=1,Vn=Jt=null,s.updateQueue!=null){var T=s.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}re.H=zC,T=a(d,m)}while(Ml);return T}function PC(){var s=re.H,a=s.useState()[0];return a=typeof a.then=="function"?ru(a):a,s=s.useState()[0],(Jt!==null?Jt.memoizedState:null)!==s&&(Ct.flags|=1024),a}function j0(){var s=rf!==0;return rf=0,s}function P0(s,a,d){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~d}function B0(s){if(sf){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}sf=!1}va=0,Vn=Jt=Ct=null,Ml=!1,iu=rf=0,Dl=null}function Vs(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?Ct.memoizedState=Vn=s:Vn=Vn.next=s,Vn}function Hn(){if(Jt===null){var s=Ct.alternate;s=s!==null?s.memoizedState:null}else s=Jt.next;var a=Vn===null?Ct.memoizedState:Vn.next;if(a!==null)Vn=a,Jt=s;else{if(s===null)throw Ct.alternate===null?Error(r(467)):Error(r(310));Jt=s,s={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Vn===null?Ct.memoizedState=Vn=s:Vn=Vn.next=s}return Vn}function U0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ru(s){var a=iu;return iu+=1,Dl===null&&(Dl=[]),s=tx(Dl,s,a),a=Ct,(Vn===null?a.memoizedState:Vn.next)===null&&(a=a.alternate,re.H=a===null||a.memoizedState===null?zx:$x),s}function af(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ru(s);if(s.$$typeof===P)return vs(s)}throw Error(r(438,String(s)))}function F0(s){var a=null,d=Ct.updateQueue;if(d!==null&&(a=d.memoCache),a==null){var m=Ct.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(a={data:m.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),d===null&&(d=U0(),Ct.updateQueue=d),d.memoCache=a,d=a.data[a.index],d===void 0)for(d=a.data[a.index]=Array(s),m=0;m<s;m++)d[m]=be;return a.index++,d}function Lr(s,a){return typeof a=="function"?a(s):a}function of(s){var a=Hn();return V0(a,Jt,s)}function V0(s,a,d){var m=s.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=d;var v=s.baseQueue,T=m.pending;if(T!==null){if(v!==null){var D=v.next;v.next=T.next,T.next=D}a.baseQueue=v=T,m.pending=null}if(T=s.baseState,v===null)s.memoizedState=T;else{a=v.next;var F=D=null,K=null,he=a,Ce=!1;do{var _e=he.lane&-536870913;if(_e!==he.lane?(Bt&_e)===_e:(va&_e)===_e){var me=he.revertLane;if(me===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),_e===Rl&&(Ce=!0);else if((va&me)===me){he=he.next,me===Rl&&(Ce=!0);continue}else _e={lane:0,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},K===null?(F=K=_e,D=T):K=K.next=_e,Ct.lanes|=me,Na|=me;_e=he.action,Io&&d(T,_e),T=he.hasEagerState?he.eagerState:d(T,_e)}else me={lane:_e,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},K===null?(F=K=me,D=T):K=K.next=me,Ct.lanes|=_e,Na|=_e;he=he.next}while(he!==null&&he!==a);if(K===null?D=T:K.next=F,!f(T,s.memoizedState)&&(ss=!0,Ce&&(d=Ol,d!==null)))throw d;s.memoizedState=T,s.baseState=D,s.baseQueue=K,m.lastRenderedState=T}return v===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function H0(s){var a=Hn(),d=a.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=s;var m=d.dispatch,v=d.pending,T=a.memoizedState;if(v!==null){d.pending=null;var D=v=v.next;do T=s(T,D.action),D=D.next;while(D!==v);f(T,a.memoizedState)||(ss=!0),a.memoizedState=T,a.baseQueue===null&&(a.baseState=T),d.lastRenderedState=T}return[T,m]}function cx(s,a,d){var m=Ct,v=Hn(),T=zt;if(T){if(d===void 0)throw Error(r(407));d=d()}else d=a();var D=!f((Jt||v).memoizedState,d);D&&(v.memoizedState=d,ss=!0),v=v.queue;var F=fx.bind(null,m,v,s);if(au(2048,8,F,[s]),v.getSnapshot!==a||D||Vn!==null&&Vn.memoizedState.tag&1){if(m.flags|=2048,kl(9,lf(),dx.bind(null,m,v,d,a),null),on===null)throw Error(r(349));T||(va&124)!==0||ux(m,a,d)}return d}function ux(s,a,d){s.flags|=16384,s={getSnapshot:a,value:d},a=Ct.updateQueue,a===null?(a=U0(),Ct.updateQueue=a,a.stores=[s]):(d=a.stores,d===null?a.stores=[s]:d.push(s))}function dx(s,a,d,m){a.value=d,a.getSnapshot=m,hx(a)&&gx(s)}function fx(s,a,d){return d(function(){hx(a)&&gx(s)})}function hx(s){var a=s.getSnapshot;s=s.value;try{var d=a();return!f(s,d)}catch{return!0}}function gx(s){var a=Al(s,2);a!==null&&ri(a,s,2)}function z0(s){var a=Vs();if(typeof s=="function"){var d=s;if(s=d(),Io){at(!0);try{d()}finally{at(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:s},a}function mx(s,a,d,m){return s.baseState=d,V0(s,Jt,typeof m=="function"?m:Lr)}function BC(s,a,d,m,v){if(uf(s))throw Error(r(485));if(s=a.action,s!==null){var T={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){T.listeners.push(D)}};re.T!==null?d(!0):T.isTransition=!1,m(T),d=a.pending,d===null?(T.next=a.pending=T,px(a,T)):(T.next=d.next,a.pending=d.next=T)}}function px(s,a){var d=a.action,m=a.payload,v=s.state;if(a.isTransition){var T=re.T,D={};re.T=D;try{var F=d(v,m),K=re.S;K!==null&&K(D,F),xx(s,a,F)}catch(he){$0(s,a,he)}finally{re.T=T}}else try{T=d(v,m),xx(s,a,T)}catch(he){$0(s,a,he)}}function xx(s,a,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){yx(s,a,m)},function(m){return $0(s,a,m)}):yx(s,a,d)}function yx(s,a,d){a.status="fulfilled",a.value=d,bx(a),s.state=d,a=s.pending,a!==null&&(d=a.next,d===a?s.pending=null:(d=d.next,a.next=d,px(s,d)))}function $0(s,a,d){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do a.status="rejected",a.reason=d,bx(a),a=a.next;while(a!==m)}s.action=null}function bx(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function wx(s,a){return a}function vx(s,a){if(zt){var d=on.formState;if(d!==null){e:{var m=Ct;if(zt){if(Cn){t:{for(var v=Cn,T=or;v.nodeType!==8;){if(!T){v=null;break t}if(v=ji(v.nextSibling),v===null){v=null;break t}}T=v.data,v=T==="F!"||T==="F"?v:null}if(v){Cn=ji(v.nextSibling),m=v.data==="F!";break e}}_o(m)}m=!1}m&&(a=d[0])}}return d=Vs(),d.memoizedState=d.baseState=a,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wx,lastRenderedState:a},d.queue=m,d=Fx.bind(null,Ct,m),m.dispatch=d,m=z0(!1),T=W0.bind(null,Ct,!1,m.queue),m=Vs(),v={state:a,dispatch:null,action:s,pending:null},m.queue=v,d=BC.bind(null,Ct,v,T,d),v.dispatch=d,m.memoizedState=s,[a,d,!1]}function Sx(s){var a=Hn();return Ex(a,Jt,s)}function Ex(s,a,d){if(a=V0(s,a,wx)[0],s=of(Lr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var m=ru(a)}catch(D){throw D===Jc?ef:D}else m=a;a=Hn();var v=a.queue,T=v.dispatch;return d!==a.memoizedState&&(Ct.flags|=2048,kl(9,lf(),UC.bind(null,v,d),null)),[m,T,s]}function UC(s,a){s.action=a}function Cx(s){var a=Hn(),d=Jt;if(d!==null)return Ex(a,d,s);Hn(),a=a.memoizedState,d=Hn();var m=d.queue.dispatch;return d.memoizedState=s,[a,m,!1]}function kl(s,a,d,m){return s={tag:s,create:d,deps:m,inst:a,next:null},a=Ct.updateQueue,a===null&&(a=U0(),Ct.updateQueue=a),d=a.lastEffect,d===null?a.lastEffect=s.next=s:(m=d.next,d.next=s,s.next=m,a.lastEffect=s),s}function lf(){return{destroy:void 0,resource:void 0}}function Ax(){return Hn().memoizedState}function cf(s,a,d,m){var v=Vs();m=m===void 0?null:m,Ct.flags|=s,v.memoizedState=kl(1|a,lf(),d,m)}function au(s,a,d,m){var v=Hn();m=m===void 0?null:m;var T=v.memoizedState.inst;Jt!==null&&m!==null&&k0(m,Jt.memoizedState.deps)?v.memoizedState=kl(a,T,d,m):(Ct.flags|=s,v.memoizedState=kl(1|a,T,d,m))}function Tx(s,a){cf(8390656,8,s,a)}function _x(s,a){au(2048,8,s,a)}function Nx(s,a){return au(4,2,s,a)}function Rx(s,a){return au(4,4,s,a)}function Ox(s,a){if(typeof a=="function"){s=s();var d=a(s);return function(){typeof d=="function"?d():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Ix(s,a,d){d=d!=null?d.concat([s]):null,au(4,4,Ox.bind(null,a,s),d)}function G0(){}function Mx(s,a){var d=Hn();a=a===void 0?null:a;var m=d.memoizedState;return a!==null&&k0(a,m[1])?m[0]:(d.memoizedState=[s,a],s)}function Dx(s,a){var d=Hn();a=a===void 0?null:a;var m=d.memoizedState;if(a!==null&&k0(a,m[1]))return m[0];if(m=s(),Io){at(!0);try{s()}finally{at(!1)}}return d.memoizedState=[m,a],m}function q0(s,a,d){return d===void 0||(va&1073741824)!==0?s.memoizedState=a:(s.memoizedState=d,s=jy(),Ct.lanes|=s,Na|=s,d)}function kx(s,a,d,m){return f(d,a)?d:Il.current!==null?(s=q0(s,d,m),f(s,a)||(ss=!0),s):(va&42)===0?(ss=!0,s.memoizedState=d):(s=jy(),Ct.lanes|=s,Na|=s,a)}function Lx(s,a,d,m,v){var T=le.p;le.p=T!==0&&8>T?T:8;var D=re.T,F={};re.T=F,W0(s,!1,a,d);try{var K=v(),he=re.S;if(he!==null&&he(F,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var Ce=LC(K,m);ou(s,a,Ce,ii(s))}else ou(s,a,m,ii(s))}catch(_e){ou(s,a,{then:function(){},status:"rejected",reason:_e},ii())}finally{le.p=T,re.T=D}}function FC(){}function Y0(s,a,d,m){if(s.tag!==5)throw Error(r(476));var v=jx(s).queue;Lx(s,v,a,De,d===null?FC:function(){return Px(s),d(m)})}function jx(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:De,baseState:De,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:De},next:null};var d={};return a.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:d},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function Px(s){var a=jx(s).next.queue;ou(s,a,{},ii())}function X0(){return vs(Au)}function Bx(){return Hn().memoizedState}function Ux(){return Hn().memoizedState}function VC(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var d=ii();s=ba(d);var m=wa(a,s,d);m!==null&&(ri(m,a,d),tu(m,a,d)),a={cache:C0()},s.payload=a;return}a=a.return}}function HC(s,a,d){var m=ii();d={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},uf(s)?Vx(a,d):(d=g0(s,a,d,m),d!==null&&(ri(d,s,m),Hx(d,a,m)))}function Fx(s,a,d){var m=ii();ou(s,a,d,m)}function ou(s,a,d,m){var v={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(uf(s))Vx(a,v);else{var T=s.alternate;if(s.lanes===0&&(T===null||T.lanes===0)&&(T=a.lastRenderedReducer,T!==null))try{var D=a.lastRenderedState,F=T(D,d);if(v.hasEagerState=!0,v.eagerState=F,f(F,D))return qd(s,a,v,0),on===null&&Gd(),!1}catch{}finally{}if(d=g0(s,a,v,m),d!==null)return ri(d,s,m),Hx(d,a,m),!0}return!1}function W0(s,a,d,m){if(m={lane:2,revertLane:_1(),action:m,hasEagerState:!1,eagerState:null,next:null},uf(s)){if(a)throw Error(r(479))}else a=g0(s,d,m,2),a!==null&&ri(a,s,2)}function uf(s){var a=s.alternate;return s===Ct||a!==null&&a===Ct}function Vx(s,a){Ml=sf=!0;var d=s.pending;d===null?a.next=a:(a.next=d.next,d.next=a),s.pending=a}function Hx(s,a,d){if((d&4194048)!==0){var m=a.lanes;m&=s.pendingLanes,d|=m,a.lanes=d,Ps(s,d)}}var df={readContext:vs,use:af,useCallback:Dn,useContext:Dn,useEffect:Dn,useImperativeHandle:Dn,useLayoutEffect:Dn,useInsertionEffect:Dn,useMemo:Dn,useReducer:Dn,useRef:Dn,useState:Dn,useDebugValue:Dn,useDeferredValue:Dn,useTransition:Dn,useSyncExternalStore:Dn,useId:Dn,useHostTransitionStatus:Dn,useFormState:Dn,useActionState:Dn,useOptimistic:Dn,useMemoCache:Dn,useCacheRefresh:Dn},zx={readContext:vs,use:af,useCallback:function(s,a){return Vs().memoizedState=[s,a===void 0?null:a],s},useContext:vs,useEffect:Tx,useImperativeHandle:function(s,a,d){d=d!=null?d.concat([s]):null,cf(4194308,4,Ox.bind(null,a,s),d)},useLayoutEffect:function(s,a){return cf(4194308,4,s,a)},useInsertionEffect:function(s,a){cf(4,2,s,a)},useMemo:function(s,a){var d=Vs();a=a===void 0?null:a;var m=s();if(Io){at(!0);try{s()}finally{at(!1)}}return d.memoizedState=[m,a],m},useReducer:function(s,a,d){var m=Vs();if(d!==void 0){var v=d(a);if(Io){at(!0);try{d(a)}finally{at(!1)}}}else v=a;return m.memoizedState=m.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},m.queue=s,s=s.dispatch=HC.bind(null,Ct,s),[m.memoizedState,s]},useRef:function(s){var a=Vs();return s={current:s},a.memoizedState=s},useState:function(s){s=z0(s);var a=s.queue,d=Fx.bind(null,Ct,a);return a.dispatch=d,[s.memoizedState,d]},useDebugValue:G0,useDeferredValue:function(s,a){var d=Vs();return q0(d,s,a)},useTransition:function(){var s=z0(!1);return s=Lx.bind(null,Ct,s.queue,!0,!1),Vs().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,d){var m=Ct,v=Vs();if(zt){if(d===void 0)throw Error(r(407));d=d()}else{if(d=a(),on===null)throw Error(r(349));(Bt&124)!==0||ux(m,a,d)}v.memoizedState=d;var T={value:d,getSnapshot:a};return v.queue=T,Tx(fx.bind(null,m,T,s),[s]),m.flags|=2048,kl(9,lf(),dx.bind(null,m,T,d,a),null),d},useId:function(){var s=Vs(),a=on.identifierPrefix;if(zt){var d=Mr,m=Ir;d=(m&~(1<<32-tt(m)-1)).toString(32)+d,a=""+a+"R"+d,d=rf++,0<d&&(a+="H"+d.toString(32)),a+=""}else d=jC++,a=""+a+"r"+d.toString(32)+"";return s.memoizedState=a},useHostTransitionStatus:X0,useFormState:vx,useActionState:vx,useOptimistic:function(s){var a=Vs();a.memoizedState=a.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=d,a=W0.bind(null,Ct,!0,d),d.dispatch=a,[s,a]},useMemoCache:F0,useCacheRefresh:function(){return Vs().memoizedState=VC.bind(null,Ct)}},$x={readContext:vs,use:af,useCallback:Mx,useContext:vs,useEffect:_x,useImperativeHandle:Ix,useInsertionEffect:Nx,useLayoutEffect:Rx,useMemo:Dx,useReducer:of,useRef:Ax,useState:function(){return of(Lr)},useDebugValue:G0,useDeferredValue:function(s,a){var d=Hn();return kx(d,Jt.memoizedState,s,a)},useTransition:function(){var s=of(Lr)[0],a=Hn().memoizedState;return[typeof s=="boolean"?s:ru(s),a]},useSyncExternalStore:cx,useId:Bx,useHostTransitionStatus:X0,useFormState:Sx,useActionState:Sx,useOptimistic:function(s,a){var d=Hn();return mx(d,Jt,s,a)},useMemoCache:F0,useCacheRefresh:Ux},zC={readContext:vs,use:af,useCallback:Mx,useContext:vs,useEffect:_x,useImperativeHandle:Ix,useInsertionEffect:Nx,useLayoutEffect:Rx,useMemo:Dx,useReducer:H0,useRef:Ax,useState:function(){return H0(Lr)},useDebugValue:G0,useDeferredValue:function(s,a){var d=Hn();return Jt===null?q0(d,s,a):kx(d,Jt.memoizedState,s,a)},useTransition:function(){var s=H0(Lr)[0],a=Hn().memoizedState;return[typeof s=="boolean"?s:ru(s),a]},useSyncExternalStore:cx,useId:Bx,useHostTransitionStatus:X0,useFormState:Cx,useActionState:Cx,useOptimistic:function(s,a){var d=Hn();return Jt!==null?mx(d,Jt,s,a):(d.baseState=s,[s,d.queue.dispatch])},useMemoCache:F0,useCacheRefresh:Ux},Ll=null,lu=0;function ff(s){var a=lu;return lu+=1,Ll===null&&(Ll=[]),tx(Ll,s,a)}function cu(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function hf(s,a){throw a.$$typeof===A?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Gx(s){var a=s._init;return a(s._payload)}function qx(s){function a(oe,ne){if(s){var fe=oe.deletions;fe===null?(oe.deletions=[ne],oe.flags|=16):fe.push(ne)}}function d(oe,ne){if(!s)return null;for(;ne!==null;)a(oe,ne),ne=ne.sibling;return null}function m(oe){for(var ne=new Map;oe!==null;)oe.key!==null?ne.set(oe.key,oe):ne.set(oe.index,oe),oe=oe.sibling;return ne}function v(oe,ne){return oe=Or(oe,ne),oe.index=0,oe.sibling=null,oe}function T(oe,ne,fe){return oe.index=fe,s?(fe=oe.alternate,fe!==null?(fe=fe.index,fe<ne?(oe.flags|=67108866,ne):fe):(oe.flags|=67108866,ne)):(oe.flags|=1048576,ne)}function D(oe){return s&&oe.alternate===null&&(oe.flags|=67108866),oe}function F(oe,ne,fe,Te){return ne===null||ne.tag!==6?(ne=p0(fe,oe.mode,Te),ne.return=oe,ne):(ne=v(ne,fe),ne.return=oe,ne)}function K(oe,ne,fe,Te){var Ke=fe.type;return Ke===M?Ce(oe,ne,fe.props.children,Te,fe.key):ne!==null&&(ne.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===ae&&Gx(Ke)===ne.type)?(ne=v(ne,fe.props),cu(ne,fe),ne.return=oe,ne):(ne=Xd(fe.type,fe.key,fe.props,null,oe.mode,Te),cu(ne,fe),ne.return=oe,ne)}function he(oe,ne,fe,Te){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==fe.containerInfo||ne.stateNode.implementation!==fe.implementation?(ne=x0(fe,oe.mode,Te),ne.return=oe,ne):(ne=v(ne,fe.children||[]),ne.return=oe,ne)}function Ce(oe,ne,fe,Te,Ke){return ne===null||ne.tag!==7?(ne=Eo(fe,oe.mode,Te,Ke),ne.return=oe,ne):(ne=v(ne,fe),ne.return=oe,ne)}function _e(oe,ne,fe){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=p0(""+ne,oe.mode,fe),ne.return=oe,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case N:return fe=Xd(ne.type,ne.key,ne.props,null,oe.mode,fe),cu(fe,ne),fe.return=oe,fe;case I:return ne=x0(ne,oe.mode,fe),ne.return=oe,ne;case ae:var Te=ne._init;return ne=Te(ne._payload),_e(oe,ne,fe)}if(se(ne)||ve(ne))return ne=Eo(ne,oe.mode,fe,null),ne.return=oe,ne;if(typeof ne.then=="function")return _e(oe,ff(ne),fe);if(ne.$$typeof===P)return _e(oe,Qd(oe,ne),fe);hf(oe,ne)}return null}function me(oe,ne,fe,Te){var Ke=ne!==null?ne.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Ke!==null?null:F(oe,ne,""+fe,Te);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case N:return fe.key===Ke?K(oe,ne,fe,Te):null;case I:return fe.key===Ke?he(oe,ne,fe,Te):null;case ae:return Ke=fe._init,fe=Ke(fe._payload),me(oe,ne,fe,Te)}if(se(fe)||ve(fe))return Ke!==null?null:Ce(oe,ne,fe,Te,null);if(typeof fe.then=="function")return me(oe,ne,ff(fe),Te);if(fe.$$typeof===P)return me(oe,ne,Qd(oe,fe),Te);hf(oe,fe)}return null}function ye(oe,ne,fe,Te,Ke){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return oe=oe.get(fe)||null,F(ne,oe,""+Te,Ke);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case N:return oe=oe.get(Te.key===null?fe:Te.key)||null,K(ne,oe,Te,Ke);case I:return oe=oe.get(Te.key===null?fe:Te.key)||null,he(ne,oe,Te,Ke);case ae:var _t=Te._init;return Te=_t(Te._payload),ye(oe,ne,fe,Te,Ke)}if(se(Te)||ve(Te))return oe=oe.get(fe)||null,Ce(ne,oe,Te,Ke,null);if(typeof Te.then=="function")return ye(oe,ne,fe,ff(Te),Ke);if(Te.$$typeof===P)return ye(oe,ne,fe,Qd(ne,Te),Ke);hf(ne,Te)}return null}function ut(oe,ne,fe,Te){for(var Ke=null,_t=null,et=ne,lt=ne=0,rs=null;et!==null&&lt<fe.length;lt++){et.index>lt?(rs=et,et=null):rs=et.sibling;var Ht=me(oe,et,fe[lt],Te);if(Ht===null){et===null&&(et=rs);break}s&&et&&Ht.alternate===null&&a(oe,et),ne=T(Ht,ne,lt),_t===null?Ke=Ht:_t.sibling=Ht,_t=Ht,et=rs}if(lt===fe.length)return d(oe,et),zt&&Ao(oe,lt),Ke;if(et===null){for(;lt<fe.length;lt++)et=_e(oe,fe[lt],Te),et!==null&&(ne=T(et,ne,lt),_t===null?Ke=et:_t.sibling=et,_t=et);return zt&&Ao(oe,lt),Ke}for(et=m(et);lt<fe.length;lt++)rs=ye(et,oe,lt,fe[lt],Te),rs!==null&&(s&&rs.alternate!==null&&et.delete(rs.key===null?lt:rs.key),ne=T(rs,ne,lt),_t===null?Ke=rs:_t.sibling=rs,_t=rs);return s&&et.forEach(function(Pa){return a(oe,Pa)}),zt&&Ao(oe,lt),Ke}function ot(oe,ne,fe,Te){if(fe==null)throw Error(r(151));for(var Ke=null,_t=null,et=ne,lt=ne=0,rs=null,Ht=fe.next();et!==null&&!Ht.done;lt++,Ht=fe.next()){et.index>lt?(rs=et,et=null):rs=et.sibling;var Pa=me(oe,et,Ht.value,Te);if(Pa===null){et===null&&(et=rs);break}s&&et&&Pa.alternate===null&&a(oe,et),ne=T(Pa,ne,lt),_t===null?Ke=Pa:_t.sibling=Pa,_t=Pa,et=rs}if(Ht.done)return d(oe,et),zt&&Ao(oe,lt),Ke;if(et===null){for(;!Ht.done;lt++,Ht=fe.next())Ht=_e(oe,Ht.value,Te),Ht!==null&&(ne=T(Ht,ne,lt),_t===null?Ke=Ht:_t.sibling=Ht,_t=Ht);return zt&&Ao(oe,lt),Ke}for(et=m(et);!Ht.done;lt++,Ht=fe.next())Ht=ye(et,oe,lt,Ht.value,Te),Ht!==null&&(s&&Ht.alternate!==null&&et.delete(Ht.key===null?lt:Ht.key),ne=T(Ht,ne,lt),_t===null?Ke=Ht:_t.sibling=Ht,_t=Ht);return s&&et.forEach(function($A){return a(oe,$A)}),zt&&Ao(oe,lt),Ke}function tn(oe,ne,fe,Te){if(typeof fe=="object"&&fe!==null&&fe.type===M&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case N:e:{for(var Ke=fe.key;ne!==null;){if(ne.key===Ke){if(Ke=fe.type,Ke===M){if(ne.tag===7){d(oe,ne.sibling),Te=v(ne,fe.props.children),Te.return=oe,oe=Te;break e}}else if(ne.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===ae&&Gx(Ke)===ne.type){d(oe,ne.sibling),Te=v(ne,fe.props),cu(Te,fe),Te.return=oe,oe=Te;break e}d(oe,ne);break}else a(oe,ne);ne=ne.sibling}fe.type===M?(Te=Eo(fe.props.children,oe.mode,Te,fe.key),Te.return=oe,oe=Te):(Te=Xd(fe.type,fe.key,fe.props,null,oe.mode,Te),cu(Te,fe),Te.return=oe,oe=Te)}return D(oe);case I:e:{for(Ke=fe.key;ne!==null;){if(ne.key===Ke)if(ne.tag===4&&ne.stateNode.containerInfo===fe.containerInfo&&ne.stateNode.implementation===fe.implementation){d(oe,ne.sibling),Te=v(ne,fe.children||[]),Te.return=oe,oe=Te;break e}else{d(oe,ne);break}else a(oe,ne);ne=ne.sibling}Te=x0(fe,oe.mode,Te),Te.return=oe,oe=Te}return D(oe);case ae:return Ke=fe._init,fe=Ke(fe._payload),tn(oe,ne,fe,Te)}if(se(fe))return ut(oe,ne,fe,Te);if(ve(fe)){if(Ke=ve(fe),typeof Ke!="function")throw Error(r(150));return fe=Ke.call(fe),ot(oe,ne,fe,Te)}if(typeof fe.then=="function")return tn(oe,ne,ff(fe),Te);if(fe.$$typeof===P)return tn(oe,ne,Qd(oe,fe),Te);hf(oe,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint"?(fe=""+fe,ne!==null&&ne.tag===6?(d(oe,ne.sibling),Te=v(ne,fe),Te.return=oe,oe=Te):(d(oe,ne),Te=p0(fe,oe.mode,Te),Te.return=oe,oe=Te),D(oe)):d(oe,ne)}return function(oe,ne,fe,Te){try{lu=0;var Ke=tn(oe,ne,fe,Te);return Ll=null,Ke}catch(et){if(et===Jc||et===ef)throw et;var _t=ei(29,et,null,oe.mode);return _t.lanes=Te,_t.return=oe,_t}finally{}}}var jl=qx(!0),Yx=qx(!1),xi=te(null),lr=null;function Sa(s){var a=s.alternate;pe(Zn,Zn.current&1),pe(xi,s),lr===null&&(a===null||Il.current!==null||a.memoizedState!==null)&&(lr=s)}function Xx(s){if(s.tag===22){if(pe(Zn,Zn.current),pe(xi,s),lr===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(lr=s)}}else Ea()}function Ea(){pe(Zn,Zn.current),pe(xi,xi.current)}function jr(s){ge(xi),lr===s&&(lr=null),ge(Zn)}var Zn=te(0);function gf(s){for(var a=s;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||U1(d)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function K0(s,a,d,m){a=s.memoizedState,d=d(m,a),d=d==null?a:S({},a,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Z0={enqueueSetState:function(s,a,d){s=s._reactInternals;var m=ii(),v=ba(m);v.payload=a,d!=null&&(v.callback=d),a=wa(s,v,m),a!==null&&(ri(a,s,m),tu(a,s,m))},enqueueReplaceState:function(s,a,d){s=s._reactInternals;var m=ii(),v=ba(m);v.tag=1,v.payload=a,d!=null&&(v.callback=d),a=wa(s,v,m),a!==null&&(ri(a,s,m),tu(a,s,m))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var d=ii(),m=ba(d);m.tag=2,a!=null&&(m.callback=a),a=wa(s,m,d),a!==null&&(ri(a,s,d),tu(a,s,d))}};function Wx(s,a,d,m,v,T,D){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,T,D):a.prototype&&a.prototype.isPureReactComponent?!g(d,m)||!g(v,T):!0}function Kx(s,a,d,m){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,m),a.state!==s&&Z0.enqueueReplaceState(a,a.state,null)}function Mo(s,a){var d=a;if("ref"in a){d={};for(var m in a)m!=="ref"&&(d[m]=a[m])}if(s=s.defaultProps){d===a&&(d=S({},d));for(var v in s)d[v]===void 0&&(d[v]=s[v])}return d}var mf=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Zx(s){mf(s)}function Qx(s){console.error(s)}function Jx(s){mf(s)}function pf(s,a){try{var d=s.onUncaughtError;d(a.value,{componentStack:a.stack})}catch(m){setTimeout(function(){throw m})}}function ey(s,a,d){try{var m=s.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Q0(s,a,d){return d=ba(d),d.tag=3,d.payload={element:null},d.callback=function(){pf(s,a)},d}function ty(s){return s=ba(s),s.tag=3,s}function ny(s,a,d,m){var v=d.type.getDerivedStateFromError;if(typeof v=="function"){var T=m.value;s.payload=function(){return v(T)},s.callback=function(){ey(a,d,m)}}var D=d.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(s.callback=function(){ey(a,d,m),typeof v!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var F=m.stack;this.componentDidCatch(m.value,{componentStack:F!==null?F:""})})}function $C(s,a,d,m,v){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(a=d.alternate,a!==null&&Kc(a,d,v,!0),d=xi.current,d!==null){switch(d.tag){case 13:return lr===null?S1():d.alternate===null&&An===0&&(An=3),d.flags&=-257,d.flags|=65536,d.lanes=v,m===_0?d.flags|=16384:(a=d.updateQueue,a===null?d.updateQueue=new Set([m]):a.add(m),C1(s,m,v)),!1;case 22:return d.flags|=65536,m===_0?d.flags|=16384:(a=d.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=a):(d=a.retryQueue,d===null?a.retryQueue=new Set([m]):d.add(m)),C1(s,m,v)),!1}throw Error(r(435,d.tag))}return C1(s,m,v),S1(),!1}if(zt)return a=xi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=v,m!==w0&&(s=Error(r(422),{cause:m}),Wc(hi(s,d)))):(m!==w0&&(a=Error(r(423),{cause:m}),Wc(hi(a,d))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,m=hi(m,d),v=Q0(s.stateNode,m,v),O0(s,v),An!==4&&(An=2)),!1;var T=Error(r(520),{cause:m});if(T=hi(T,d),pu===null?pu=[T]:pu.push(T),An!==4&&(An=2),a===null)return!0;m=hi(m,d),d=a;do{switch(d.tag){case 3:return d.flags|=65536,s=v&-v,d.lanes|=s,s=Q0(d.stateNode,m,s),O0(d,s),!1;case 1:if(a=d.type,T=d.stateNode,(d.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ra===null||!Ra.has(T))))return d.flags|=65536,v&=-v,d.lanes|=v,v=ty(v),ny(v,s,d,m),O0(d,v),!1}d=d.return}while(d!==null);return!1}var sy=Error(r(461)),ss=!1;function ds(s,a,d,m){a.child=s===null?Yx(a,null,d,m):jl(a,s.child,d,m)}function iy(s,a,d,m,v){d=d.render;var T=a.ref;if("ref"in m){var D={};for(var F in m)F!=="ref"&&(D[F]=m[F])}else D=m;return Ro(a),m=L0(s,a,d,D,T,v),F=j0(),s!==null&&!ss?(P0(s,a,v),Pr(s,a,v)):(zt&&F&&y0(a),a.flags|=1,ds(s,a,m,v),a.child)}function ry(s,a,d,m,v){if(s===null){var T=d.type;return typeof T=="function"&&!m0(T)&&T.defaultProps===void 0&&d.compare===null?(a.tag=15,a.type=T,ay(s,a,T,m,v)):(s=Xd(d.type,null,m,a,a.mode,v),s.ref=a.ref,s.return=a,a.child=s)}if(T=s.child,!a1(s,v)){var D=T.memoizedProps;if(d=d.compare,d=d!==null?d:g,d(D,m)&&s.ref===a.ref)return Pr(s,a,v)}return a.flags|=1,s=Or(T,m),s.ref=a.ref,s.return=a,a.child=s}function ay(s,a,d,m,v){if(s!==null){var T=s.memoizedProps;if(g(T,m)&&s.ref===a.ref)if(ss=!1,a.pendingProps=m=T,a1(s,v))(s.flags&131072)!==0&&(ss=!0);else return a.lanes=s.lanes,Pr(s,a,v)}return J0(s,a,d,m,v)}function oy(s,a,d){var m=a.pendingProps,v=m.children,T=s!==null?s.memoizedState:null;if(m.mode==="hidden"){if((a.flags&128)!==0){if(m=T!==null?T.baseLanes|d:d,s!==null){for(v=a.child=s.child,T=0;v!==null;)T=T|v.lanes|v.childLanes,v=v.sibling;a.childLanes=T&~m}else a.childLanes=0,a.child=null;return ly(s,a,m,d)}if((d&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Jd(a,T!==null?T.cachePool:null),T!==null?ax(a,T):M0(),Xx(a);else return a.lanes=a.childLanes=536870912,ly(s,a,T!==null?T.baseLanes|d:d,d)}else T!==null?(Jd(a,T.cachePool),ax(a,T),Ea(),a.memoizedState=null):(s!==null&&Jd(a,null),M0(),Ea());return ds(s,a,v,d),a.child}function ly(s,a,d,m){var v=T0();return v=v===null?null:{parent:Kn._currentValue,pool:v},a.memoizedState={baseLanes:d,cachePool:v},s!==null&&Jd(a,null),M0(),Xx(a),s!==null&&Kc(s,a,m,!0),null}function xf(s,a){var d=a.ref;if(d===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(s===null||s.ref!==d)&&(a.flags|=4194816)}}function J0(s,a,d,m,v){return Ro(a),d=L0(s,a,d,m,void 0,v),m=j0(),s!==null&&!ss?(P0(s,a,v),Pr(s,a,v)):(zt&&m&&y0(a),a.flags|=1,ds(s,a,d,v),a.child)}function cy(s,a,d,m,v,T){return Ro(a),a.updateQueue=null,d=lx(a,m,d,v),ox(s),m=j0(),s!==null&&!ss?(P0(s,a,T),Pr(s,a,T)):(zt&&m&&y0(a),a.flags|=1,ds(s,a,d,T),a.child)}function uy(s,a,d,m,v){if(Ro(a),a.stateNode===null){var T=Tl,D=d.contextType;typeof D=="object"&&D!==null&&(T=vs(D)),T=new d(m,T),a.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Z0,a.stateNode=T,T._reactInternals=a,T=a.stateNode,T.props=m,T.state=a.memoizedState,T.refs={},N0(a),D=d.contextType,T.context=typeof D=="object"&&D!==null?vs(D):Tl,T.state=a.memoizedState,D=d.getDerivedStateFromProps,typeof D=="function"&&(K0(a,d,D,m),T.state=a.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(D=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),D!==T.state&&Z0.enqueueReplaceState(T,T.state,null),su(a,m,T,v),nu(),T.state=a.memoizedState),typeof T.componentDidMount=="function"&&(a.flags|=4194308),m=!0}else if(s===null){T=a.stateNode;var F=a.memoizedProps,K=Mo(d,F);T.props=K;var he=T.context,Ce=d.contextType;D=Tl,typeof Ce=="object"&&Ce!==null&&(D=vs(Ce));var _e=d.getDerivedStateFromProps;Ce=typeof _e=="function"||typeof T.getSnapshotBeforeUpdate=="function",F=a.pendingProps!==F,Ce||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(F||he!==D)&&Kx(a,T,m,D),ya=!1;var me=a.memoizedState;T.state=me,su(a,m,T,v),nu(),he=a.memoizedState,F||me!==he||ya?(typeof _e=="function"&&(K0(a,d,_e,m),he=a.memoizedState),(K=ya||Wx(a,d,K,m,me,he,D))?(Ce||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=he),T.props=m,T.state=he,T.context=D,m=K):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{T=a.stateNode,R0(s,a),D=a.memoizedProps,Ce=Mo(d,D),T.props=Ce,_e=a.pendingProps,me=T.context,he=d.contextType,K=Tl,typeof he=="object"&&he!==null&&(K=vs(he)),F=d.getDerivedStateFromProps,(he=typeof F=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==_e||me!==K)&&Kx(a,T,m,K),ya=!1,me=a.memoizedState,T.state=me,su(a,m,T,v),nu();var ye=a.memoizedState;D!==_e||me!==ye||ya||s!==null&&s.dependencies!==null&&Zd(s.dependencies)?(typeof F=="function"&&(K0(a,d,F,m),ye=a.memoizedState),(Ce=ya||Wx(a,d,Ce,m,me,ye,K)||s!==null&&s.dependencies!==null&&Zd(s.dependencies))?(he||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(m,ye,K),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(m,ye,K)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||D===s.memoizedProps&&me===s.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&me===s.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=ye),T.props=m,T.state=ye,T.context=K,m=Ce):(typeof T.componentDidUpdate!="function"||D===s.memoizedProps&&me===s.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&me===s.memoizedState||(a.flags|=1024),m=!1)}return T=m,xf(s,a),m=(a.flags&128)!==0,T||m?(T=a.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:T.render(),a.flags|=1,s!==null&&m?(a.child=jl(a,s.child,null,v),a.child=jl(a,null,d,v)):ds(s,a,d,v),a.memoizedState=T.state,s=a.child):s=Pr(s,a,v),s}function dy(s,a,d,m){return Xc(),a.flags|=256,ds(s,a,d,m),a.child}var e1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function t1(s){return{baseLanes:s,cachePool:Qp()}}function n1(s,a,d){return s=s!==null?s.childLanes&~d:0,a&&(s|=yi),s}function fy(s,a,d){var m=a.pendingProps,v=!1,T=(a.flags&128)!==0,D;if((D=T)||(D=s!==null&&s.memoizedState===null?!1:(Zn.current&2)!==0),D&&(v=!0,a.flags&=-129),D=(a.flags&32)!==0,a.flags&=-33,s===null){if(zt){if(v?Sa(a):Ea(),zt){var F=Cn,K;if(K=F){e:{for(K=F,F=or;K.nodeType!==8;){if(!F){F=null;break e}if(K=ji(K.nextSibling),K===null){F=null;break e}}F=K}F!==null?(a.memoizedState={dehydrated:F,treeContext:Co!==null?{id:Ir,overflow:Mr}:null,retryLane:536870912,hydrationErrors:null},K=ei(18,null,null,0),K.stateNode=F,K.return=a,a.child=K,Os=a,Cn=null,K=!0):K=!1}K||_o(a)}if(F=a.memoizedState,F!==null&&(F=F.dehydrated,F!==null))return U1(F)?a.lanes=32:a.lanes=536870912,null;jr(a)}return F=m.children,m=m.fallback,v?(Ea(),v=a.mode,F=yf({mode:"hidden",children:F},v),m=Eo(m,v,d,null),F.return=a,m.return=a,F.sibling=m,a.child=F,v=a.child,v.memoizedState=t1(d),v.childLanes=n1(s,D,d),a.memoizedState=e1,m):(Sa(a),s1(a,F))}if(K=s.memoizedState,K!==null&&(F=K.dehydrated,F!==null)){if(T)a.flags&256?(Sa(a),a.flags&=-257,a=i1(s,a,d)):a.memoizedState!==null?(Ea(),a.child=s.child,a.flags|=128,a=null):(Ea(),v=m.fallback,F=a.mode,m=yf({mode:"visible",children:m.children},F),v=Eo(v,F,d,null),v.flags|=2,m.return=a,v.return=a,m.sibling=v,a.child=m,jl(a,s.child,null,d),m=a.child,m.memoizedState=t1(d),m.childLanes=n1(s,D,d),a.memoizedState=e1,a=v);else if(Sa(a),U1(F)){if(D=F.nextSibling&&F.nextSibling.dataset,D)var he=D.dgst;D=he,m=Error(r(419)),m.stack="",m.digest=D,Wc({value:m,source:null,stack:null}),a=i1(s,a,d)}else if(ss||Kc(s,a,d,!1),D=(d&s.childLanes)!==0,ss||D){if(D=on,D!==null&&(m=d&-d,m=(m&42)!==0?1:fo(m),m=(m&(D.suspendedLanes|d))!==0?0:m,m!==0&&m!==K.retryLane))throw K.retryLane=m,Al(s,m),ri(D,s,m),sy;F.data==="$?"||S1(),a=i1(s,a,d)}else F.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=K.treeContext,Cn=ji(F.nextSibling),Os=a,zt=!0,To=null,or=!1,s!==null&&(mi[pi++]=Ir,mi[pi++]=Mr,mi[pi++]=Co,Ir=s.id,Mr=s.overflow,Co=a),a=s1(a,m.children),a.flags|=4096);return a}return v?(Ea(),v=m.fallback,F=a.mode,K=s.child,he=K.sibling,m=Or(K,{mode:"hidden",children:m.children}),m.subtreeFlags=K.subtreeFlags&65011712,he!==null?v=Or(he,v):(v=Eo(v,F,d,null),v.flags|=2),v.return=a,m.return=a,m.sibling=v,a.child=m,m=v,v=a.child,F=s.child.memoizedState,F===null?F=t1(d):(K=F.cachePool,K!==null?(he=Kn._currentValue,K=K.parent!==he?{parent:he,pool:he}:K):K=Qp(),F={baseLanes:F.baseLanes|d,cachePool:K}),v.memoizedState=F,v.childLanes=n1(s,D,d),a.memoizedState=e1,m):(Sa(a),d=s.child,s=d.sibling,d=Or(d,{mode:"visible",children:m.children}),d.return=a,d.sibling=null,s!==null&&(D=a.deletions,D===null?(a.deletions=[s],a.flags|=16):D.push(s)),a.child=d,a.memoizedState=null,d)}function s1(s,a){return a=yf({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function yf(s,a){return s=ei(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function i1(s,a,d){return jl(a,s.child,null,d),s=s1(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function hy(s,a,d){s.lanes|=a;var m=s.alternate;m!==null&&(m.lanes|=a),S0(s.return,a,d)}function r1(s,a,d,m,v){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:v}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=d,T.tailMode=v)}function gy(s,a,d){var m=a.pendingProps,v=m.revealOrder,T=m.tail;if(ds(s,a,m.children,d),m=Zn.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&hy(s,d,a);else if(s.tag===19)hy(s,d,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}switch(pe(Zn,m),v){case"forwards":for(d=a.child,v=null;d!==null;)s=d.alternate,s!==null&&gf(s)===null&&(v=d),d=d.sibling;d=v,d===null?(v=a.child,a.child=null):(v=d.sibling,d.sibling=null),r1(a,!1,v,d,T);break;case"backwards":for(d=null,v=a.child,a.child=null;v!==null;){if(s=v.alternate,s!==null&&gf(s)===null){a.child=v;break}s=v.sibling,v.sibling=d,d=v,v=s}r1(a,!0,d,null,T);break;case"together":r1(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Pr(s,a,d){if(s!==null&&(a.dependencies=s.dependencies),Na|=a.lanes,(d&a.childLanes)===0)if(s!==null){if(Kc(s,a,d,!1),(d&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,d=Or(s,s.pendingProps),a.child=d,d.return=a;s.sibling!==null;)s=s.sibling,d=d.sibling=Or(s,s.pendingProps),d.return=a;d.sibling=null}return a.child}function a1(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Zd(s)))}function GC(s,a,d){switch(a.tag){case 3:Ze(a,a.stateNode.containerInfo),xa(a,Kn,s.memoizedState.cache),Xc();break;case 27:case 5:wn(a);break;case 4:Ze(a,a.stateNode.containerInfo);break;case 10:xa(a,a.type,a.memoizedProps.value);break;case 13:var m=a.memoizedState;if(m!==null)return m.dehydrated!==null?(Sa(a),a.flags|=128,null):(d&a.child.childLanes)!==0?fy(s,a,d):(Sa(a),s=Pr(s,a,d),s!==null?s.sibling:null);Sa(a);break;case 19:var v=(s.flags&128)!==0;if(m=(d&a.childLanes)!==0,m||(Kc(s,a,d,!1),m=(d&a.childLanes)!==0),v){if(m)return gy(s,a,d);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),pe(Zn,Zn.current),m)break;return null;case 22:case 23:return a.lanes=0,oy(s,a,d);case 24:xa(a,Kn,s.memoizedState.cache)}return Pr(s,a,d)}function my(s,a,d){if(s!==null)if(s.memoizedProps!==a.pendingProps)ss=!0;else{if(!a1(s,d)&&(a.flags&128)===0)return ss=!1,GC(s,a,d);ss=(s.flags&131072)!==0}else ss=!1,zt&&(a.flags&1048576)!==0&&Gp(a,Kd,a.index);switch(a.lanes=0,a.tag){case 16:e:{s=a.pendingProps;var m=a.elementType,v=m._init;if(m=v(m._payload),a.type=m,typeof m=="function")m0(m)?(s=Mo(m,s),a.tag=1,a=uy(null,a,m,s,d)):(a.tag=0,a=J0(null,a,m,s,d));else{if(m!=null){if(v=m.$$typeof,v===V){a.tag=11,a=iy(null,a,m,s,d);break e}else if(v===W){a.tag=14,a=ry(null,a,m,s,d);break e}}throw a=Fe(m)||m,Error(r(306,a,""))}}return a;case 0:return J0(s,a,a.type,a.pendingProps,d);case 1:return m=a.type,v=Mo(m,a.pendingProps),uy(s,a,m,v,d);case 3:e:{if(Ze(a,a.stateNode.containerInfo),s===null)throw Error(r(387));m=a.pendingProps;var T=a.memoizedState;v=T.element,R0(s,a),su(a,m,null,d);var D=a.memoizedState;if(m=D.cache,xa(a,Kn,m),m!==T.cache&&E0(a,[Kn],d,!0),nu(),m=D.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:D.cache},a.updateQueue.baseState=T,a.memoizedState=T,a.flags&256){a=dy(s,a,m,d);break e}else if(m!==v){v=hi(Error(r(424)),a),Wc(v),a=dy(s,a,m,d);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Cn=ji(s.firstChild),Os=a,zt=!0,To=null,or=!0,d=Yx(a,null,m,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Xc(),m===v){a=Pr(s,a,d);break e}ds(s,a,m,d)}a=a.child}return a;case 26:return xf(s,a),s===null?(d=b2(a.type,null,a.pendingProps,null))?a.memoizedState=d:zt||(d=a.type,s=a.pendingProps,m=Mf(Ee.current).createElement(d),m[es]=a,m[vn]=s,hs(m,d,s),Yt(m),a.stateNode=m):a.memoizedState=b2(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return wn(a),s===null&&zt&&(m=a.stateNode=p2(a.type,a.pendingProps,Ee.current),Os=a,or=!0,v=Cn,Ma(a.type)?(F1=v,Cn=ji(m.firstChild)):Cn=v),ds(s,a,a.pendingProps.children,d),xf(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&zt&&((v=m=Cn)&&(m=bA(m,a.type,a.pendingProps,or),m!==null?(a.stateNode=m,Os=a,Cn=ji(m.firstChild),or=!1,v=!0):v=!1),v||_o(a)),wn(a),v=a.type,T=a.pendingProps,D=s!==null?s.memoizedProps:null,m=T.children,j1(v,T)?m=null:D!==null&&j1(v,D)&&(a.flags|=32),a.memoizedState!==null&&(v=L0(s,a,PC,null,null,d),Au._currentValue=v),xf(s,a),ds(s,a,m,d),a.child;case 6:return s===null&&zt&&((s=d=Cn)&&(d=wA(d,a.pendingProps,or),d!==null?(a.stateNode=d,Os=a,Cn=null,s=!0):s=!1),s||_o(a)),null;case 13:return fy(s,a,d);case 4:return Ze(a,a.stateNode.containerInfo),m=a.pendingProps,s===null?a.child=jl(a,null,m,d):ds(s,a,m,d),a.child;case 11:return iy(s,a,a.type,a.pendingProps,d);case 7:return ds(s,a,a.pendingProps,d),a.child;case 8:return ds(s,a,a.pendingProps.children,d),a.child;case 12:return ds(s,a,a.pendingProps.children,d),a.child;case 10:return m=a.pendingProps,xa(a,a.type,m.value),ds(s,a,m.children,d),a.child;case 9:return v=a.type._context,m=a.pendingProps.children,Ro(a),v=vs(v),m=m(v),a.flags|=1,ds(s,a,m,d),a.child;case 14:return ry(s,a,a.type,a.pendingProps,d);case 15:return ay(s,a,a.type,a.pendingProps,d);case 19:return gy(s,a,d);case 31:return m=a.pendingProps,d=a.mode,m={mode:m.mode,children:m.children},s===null?(d=yf(m,d),d.ref=a.ref,a.child=d,d.return=a,a=d):(d=Or(s.child,m),d.ref=a.ref,a.child=d,d.return=a,a=d),a;case 22:return oy(s,a,d);case 24:return Ro(a),m=vs(Kn),s===null?(v=T0(),v===null&&(v=on,T=C0(),v.pooledCache=T,T.refCount++,T!==null&&(v.pooledCacheLanes|=d),v=T),a.memoizedState={parent:m,cache:v},N0(a),xa(a,Kn,v)):((s.lanes&d)!==0&&(R0(s,a),su(a,null,null,d),nu()),v=s.memoizedState,T=a.memoizedState,v.parent!==m?(v={parent:m,cache:m},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),xa(a,Kn,m)):(m=T.cache,xa(a,Kn,m),m!==v.cache&&E0(a,[Kn],d,!0))),ds(s,a,a.pendingProps.children,d),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Br(s){s.flags|=4}function py(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!C2(a)){if(a=xi.current,a!==null&&((Bt&4194048)===Bt?lr!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||a!==lr))throw eu=_0,Jp;s.flags|=8192}}function bf(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?ra():536870912,s.lanes|=a,Fl|=a)}function uu(s,a){if(!zt)switch(s.tailMode){case"hidden":a=s.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function yn(s){var a=s.alternate!==null&&s.alternate.child===s.child,d=0,m=0;if(a)for(var v=s.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=m,s.childLanes=d,a}function qC(s,a,d){var m=a.pendingProps;switch(b0(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(a),null;case 1:return yn(a),null;case 3:return d=a.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),a.memoizedState.cache!==m&&(a.flags|=2048),kr(Kn),pt(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(Yc(a)?Br(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Xp())),yn(a),null;case 26:return d=a.memoizedState,s===null?(Br(a),d!==null?(yn(a),py(a,d)):(yn(a),a.flags&=-16777217)):d?d!==s.memoizedState?(Br(a),yn(a),py(a,d)):(yn(a),a.flags&=-16777217):(s.memoizedProps!==m&&Br(a),yn(a),a.flags&=-16777217),null;case 27:Re(a),d=Ee.current;var v=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==m&&Br(a);else{if(!m){if(a.stateNode===null)throw Error(r(166));return yn(a),null}s=Be.current,Yc(a)?qp(a):(s=p2(v,m,d),a.stateNode=s,Br(a))}return yn(a),null;case 5:if(Re(a),d=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==m&&Br(a);else{if(!m){if(a.stateNode===null)throw Error(r(166));return yn(a),null}if(s=Be.current,Yc(a))qp(a);else{switch(v=Mf(Ee.current),s){case 1:s=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:s=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":s=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":s=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":s=v.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof m.is=="string"?v.createElement("select",{is:m.is}):v.createElement("select"),m.multiple?s.multiple=!0:m.size&&(s.size=m.size);break;default:s=typeof m.is=="string"?v.createElement(d,{is:m.is}):v.createElement(d)}}s[es]=a,s[vn]=m;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)s.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=s;e:switch(hs(s,d,m),d){case"button":case"input":case"select":case"textarea":s=!!m.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Br(a)}}return yn(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==m&&Br(a);else{if(typeof m!="string"&&a.stateNode===null)throw Error(r(166));if(s=Ee.current,Yc(a)){if(s=a.stateNode,d=a.memoizedProps,m=null,v=Os,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}s[es]=a,s=!!(s.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||c2(s.nodeValue,d)),s||_o(a)}else s=Mf(s).createTextNode(m),s[es]=a,a.stateNode=s}return yn(a),null;case 13:if(m=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=Yc(a),m!==null&&m.dehydrated!==null){if(s===null){if(!v)throw Error(r(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[es]=a}else Xc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;yn(a),v=!1}else v=Xp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return a.flags&256?(jr(a),a):(jr(a),null)}if(jr(a),(a.flags&128)!==0)return a.lanes=d,a;if(d=m!==null,s=s!==null&&s.memoizedState!==null,d){m=a.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool);var T=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(T=m.memoizedState.cachePool.pool),T!==v&&(m.flags|=2048)}return d!==s&&d&&(a.child.flags|=8192),bf(a,a.updateQueue),yn(a),null;case 4:return pt(),s===null&&I1(a.stateNode.containerInfo),yn(a),null;case 10:return kr(a.type),yn(a),null;case 19:if(ge(Zn),v=a.memoizedState,v===null)return yn(a),null;if(m=(a.flags&128)!==0,T=v.rendering,T===null)if(m)uu(v,!1);else{if(An!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(T=gf(s),T!==null){for(a.flags|=128,uu(v,!1),s=T.updateQueue,a.updateQueue=s,bf(a,s),a.subtreeFlags=0,s=d,d=a.child;d!==null;)$p(d,s),d=d.sibling;return pe(Zn,Zn.current&1|2),a.child}s=s.sibling}v.tail!==null&&We()>Sf&&(a.flags|=128,m=!0,uu(v,!1),a.lanes=4194304)}else{if(!m)if(s=gf(T),s!==null){if(a.flags|=128,m=!0,s=s.updateQueue,a.updateQueue=s,bf(a,s),uu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!T.alternate&&!zt)return yn(a),null}else 2*We()-v.renderingStartTime>Sf&&d!==536870912&&(a.flags|=128,m=!0,uu(v,!1),a.lanes=4194304);v.isBackwards?(T.sibling=a.child,a.child=T):(s=v.last,s!==null?s.sibling=T:a.child=T,v.last=T)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=We(),a.sibling=null,s=Zn.current,pe(Zn,m?s&1|2:s&1),a):(yn(a),null);case 22:case 23:return jr(a),D0(),m=a.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(a.flags|=8192):m&&(a.flags|=8192),m?(d&536870912)!==0&&(a.flags&128)===0&&(yn(a),a.subtreeFlags&6&&(a.flags|=8192)):yn(a),d=a.updateQueue,d!==null&&bf(a,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),m=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(m=a.memoizedState.cachePool.pool),m!==d&&(a.flags|=2048),s!==null&&ge(Oo),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),kr(Kn),yn(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function YC(s,a){switch(b0(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return kr(Kn),pt(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Re(a),null;case 13:if(jr(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Xc()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ge(Zn),null;case 4:return pt(),null;case 10:return kr(a.type),null;case 22:case 23:return jr(a),D0(),s!==null&&ge(Oo),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return kr(Kn),null;case 25:return null;default:return null}}function xy(s,a){switch(b0(a),a.tag){case 3:kr(Kn),pt();break;case 26:case 27:case 5:Re(a);break;case 4:pt();break;case 13:jr(a);break;case 19:ge(Zn);break;case 10:kr(a.type);break;case 22:case 23:jr(a),D0(),s!==null&&ge(Oo);break;case 24:kr(Kn)}}function du(s,a){try{var d=a.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var v=m.next;d=v;do{if((d.tag&s)===s){m=void 0;var T=d.create,D=d.inst;m=T(),D.destroy=m}d=d.next}while(d!==v)}}catch(F){sn(a,a.return,F)}}function Ca(s,a,d){try{var m=a.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var T=v.next;m=T;do{if((m.tag&s)===s){var D=m.inst,F=D.destroy;if(F!==void 0){D.destroy=void 0,v=a;var K=d,he=F;try{he()}catch(Ce){sn(v,K,Ce)}}}m=m.next}while(m!==T)}}catch(Ce){sn(a,a.return,Ce)}}function yy(s){var a=s.updateQueue;if(a!==null){var d=s.stateNode;try{rx(a,d)}catch(m){sn(s,s.return,m)}}}function by(s,a,d){d.props=Mo(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(m){sn(s,a,m)}}function fu(s,a){try{var d=s.ref;if(d!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof d=="function"?s.refCleanup=d(m):d.current=m}}catch(v){sn(s,a,v)}}function cr(s,a){var d=s.ref,m=s.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(v){sn(s,a,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(v){sn(s,a,v)}else d.current=null}function wy(s){var a=s.type,d=s.memoizedProps,m=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(v){sn(s,s.return,v)}}function o1(s,a,d){try{var m=s.stateNode;gA(m,s.type,d,a),m[vn]=a}catch(v){sn(s,s.return,v)}}function vy(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ma(s.type)||s.tag===4}function l1(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||vy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ma(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function c1(s,a,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,a?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(s,a):(a=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,a.appendChild(s),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=If));else if(m!==4&&(m===27&&Ma(s.type)&&(d=s.stateNode,a=null),s=s.child,s!==null))for(c1(s,a,d),s=s.sibling;s!==null;)c1(s,a,d),s=s.sibling}function wf(s,a,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,a?d.insertBefore(s,a):d.appendChild(s);else if(m!==4&&(m===27&&Ma(s.type)&&(d=s.stateNode),s=s.child,s!==null))for(wf(s,a,d),s=s.sibling;s!==null;)wf(s,a,d),s=s.sibling}function Sy(s){var a=s.stateNode,d=s.memoizedProps;try{for(var m=s.type,v=a.attributes;v.length;)a.removeAttributeNode(v[0]);hs(a,m,d),a[es]=s,a[vn]=d}catch(T){sn(s,s.return,T)}}var Ur=!1,kn=!1,u1=!1,Ey=typeof WeakSet=="function"?WeakSet:Set,is=null;function XC(s,a){if(s=s.containerInfo,k1=Bf,s=_(s),O(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var v=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var D=0,F=-1,K=-1,he=0,Ce=0,_e=s,me=null;t:for(;;){for(var ye;_e!==d||v!==0&&_e.nodeType!==3||(F=D+v),_e!==T||m!==0&&_e.nodeType!==3||(K=D+m),_e.nodeType===3&&(D+=_e.nodeValue.length),(ye=_e.firstChild)!==null;)me=_e,_e=ye;for(;;){if(_e===s)break t;if(me===d&&++he===v&&(F=D),me===T&&++Ce===m&&(K=D),(ye=_e.nextSibling)!==null)break;_e=me,me=_e.parentNode}_e=ye}d=F===-1||K===-1?null:{start:F,end:K}}else d=null}d=d||{start:0,end:0}}else d=null;for(L1={focusedElem:s,selectionRange:d},Bf=!1,is=a;is!==null;)if(a=is,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,is=s;else for(;is!==null;){switch(a=is,T=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&T!==null){s=void 0,d=a,v=T.memoizedProps,T=T.memoizedState,m=d.stateNode;try{var ut=Mo(d.type,v,d.elementType===d.type);s=m.getSnapshotBeforeUpdate(ut,T),m.__reactInternalSnapshotBeforeUpdate=s}catch(ot){sn(d,d.return,ot)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,d=s.nodeType,d===9)B1(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":B1(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,is=s;break}is=a.return}}function Cy(s,a,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:Aa(s,d),m&4&&du(5,d);break;case 1:if(Aa(s,d),m&4)if(s=d.stateNode,a===null)try{s.componentDidMount()}catch(D){sn(d,d.return,D)}else{var v=Mo(d.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(v,a,s.__reactInternalSnapshotBeforeUpdate)}catch(D){sn(d,d.return,D)}}m&64&&yy(d),m&512&&fu(d,d.return);break;case 3:if(Aa(s,d),m&64&&(s=d.updateQueue,s!==null)){if(a=null,d.child!==null)switch(d.child.tag){case 27:case 5:a=d.child.stateNode;break;case 1:a=d.child.stateNode}try{rx(s,a)}catch(D){sn(d,d.return,D)}}break;case 27:a===null&&m&4&&Sy(d);case 26:case 5:Aa(s,d),a===null&&m&4&&wy(d),m&512&&fu(d,d.return);break;case 12:Aa(s,d);break;case 13:Aa(s,d),m&4&&_y(s,d),m&64&&(s=d.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(d=sA.bind(null,d),vA(s,d))));break;case 22:if(m=d.memoizedState!==null||Ur,!m){a=a!==null&&a.memoizedState!==null||kn,v=Ur;var T=kn;Ur=m,(kn=a)&&!T?Ta(s,d,(d.subtreeFlags&8772)!==0):Aa(s,d),Ur=v,kn=T}break;case 30:break;default:Aa(s,d)}}function Ay(s){var a=s.alternate;a!==null&&(s.alternate=null,Ay(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&ho(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var gn=null,Hs=!1;function Fr(s,a,d){for(d=d.child;d!==null;)Ty(s,a,d),d=d.sibling}function Ty(s,a,d){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(Bn,d)}catch{}switch(d.tag){case 26:kn||cr(d,a),Fr(s,a,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:kn||cr(d,a);var m=gn,v=Hs;Ma(d.type)&&(gn=d.stateNode,Hs=!1),Fr(s,a,d),vu(d.stateNode),gn=m,Hs=v;break;case 5:kn||cr(d,a);case 6:if(m=gn,v=Hs,gn=null,Fr(s,a,d),gn=m,Hs=v,gn!==null)if(Hs)try{(gn.nodeType===9?gn.body:gn.nodeName==="HTML"?gn.ownerDocument.body:gn).removeChild(d.stateNode)}catch(T){sn(d,a,T)}else try{gn.removeChild(d.stateNode)}catch(T){sn(d,a,T)}break;case 18:gn!==null&&(Hs?(s=gn,g2(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,d.stateNode),Ru(s)):g2(gn,d.stateNode));break;case 4:m=gn,v=Hs,gn=d.stateNode.containerInfo,Hs=!0,Fr(s,a,d),gn=m,Hs=v;break;case 0:case 11:case 14:case 15:kn||Ca(2,d,a),kn||Ca(4,d,a),Fr(s,a,d);break;case 1:kn||(cr(d,a),m=d.stateNode,typeof m.componentWillUnmount=="function"&&by(d,a,m)),Fr(s,a,d);break;case 21:Fr(s,a,d);break;case 22:kn=(m=kn)||d.memoizedState!==null,Fr(s,a,d),kn=m;break;default:Fr(s,a,d)}}function _y(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ru(s)}catch(d){sn(a,a.return,d)}}function WC(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Ey),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Ey),a;default:throw Error(r(435,s.tag))}}function d1(s,a){var d=WC(s);a.forEach(function(m){var v=iA.bind(null,s,m);d.has(m)||(d.add(m),m.then(v,v))})}function ti(s,a){var d=a.deletions;if(d!==null)for(var m=0;m<d.length;m++){var v=d[m],T=s,D=a,F=D;e:for(;F!==null;){switch(F.tag){case 27:if(Ma(F.type)){gn=F.stateNode,Hs=!1;break e}break;case 5:gn=F.stateNode,Hs=!1;break e;case 3:case 4:gn=F.stateNode.containerInfo,Hs=!0;break e}F=F.return}if(gn===null)throw Error(r(160));Ty(T,D,v),gn=null,Hs=!1,T=v.alternate,T!==null&&(T.return=null),v.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Ny(a,s),a=a.sibling}var Li=null;function Ny(s,a){var d=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ti(a,s),ni(s),m&4&&(Ca(3,s,s.return),du(3,s),Ca(5,s,s.return));break;case 1:ti(a,s),ni(s),m&512&&(kn||d===null||cr(d,d.return)),m&64&&Ur&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var v=Li;if(ti(a,s),ni(s),m&512&&(kn||d===null||cr(d,d.return)),m&4){var T=d!==null?d.memoizedState:null;if(m=s.memoizedState,d===null)if(m===null)if(s.stateNode===null){e:{m=s.type,d=s.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":T=v.getElementsByTagName("title")[0],(!T||T[di]||T[es]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=v.createElement(m),v.head.insertBefore(T,v.querySelector("head > title"))),hs(T,m,d),T[es]=s,Yt(T),m=T;break e;case"link":var D=S2("link","href",v).get(m+(d.href||""));if(D){for(var F=0;F<D.length;F++)if(T=D[F],T.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&T.getAttribute("rel")===(d.rel==null?null:d.rel)&&T.getAttribute("title")===(d.title==null?null:d.title)&&T.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){D.splice(F,1);break t}}T=v.createElement(m),hs(T,m,d),v.head.appendChild(T);break;case"meta":if(D=S2("meta","content",v).get(m+(d.content||""))){for(F=0;F<D.length;F++)if(T=D[F],T.getAttribute("content")===(d.content==null?null:""+d.content)&&T.getAttribute("name")===(d.name==null?null:d.name)&&T.getAttribute("property")===(d.property==null?null:d.property)&&T.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&T.getAttribute("charset")===(d.charSet==null?null:d.charSet)){D.splice(F,1);break t}}T=v.createElement(m),hs(T,m,d),v.head.appendChild(T);break;default:throw Error(r(468,m))}T[es]=s,Yt(T),m=T}s.stateNode=m}else E2(v,s.type,s.stateNode);else s.stateNode=v2(v,m,s.memoizedProps);else T!==m?(T===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):T.count--,m===null?E2(v,s.type,s.stateNode):v2(v,m,s.memoizedProps)):m===null&&s.stateNode!==null&&o1(s,s.memoizedProps,d.memoizedProps)}break;case 27:ti(a,s),ni(s),m&512&&(kn||d===null||cr(d,d.return)),d!==null&&m&4&&o1(s,s.memoizedProps,d.memoizedProps);break;case 5:if(ti(a,s),ni(s),m&512&&(kn||d===null||cr(d,d.return)),s.flags&32){v=s.stateNode;try{Yn(v,"")}catch(ye){sn(s,s.return,ye)}}m&4&&s.stateNode!=null&&(v=s.memoizedProps,o1(s,v,d!==null?d.memoizedProps:v)),m&1024&&(u1=!0);break;case 6:if(ti(a,s),ni(s),m&4){if(s.stateNode===null)throw Error(r(162));m=s.memoizedProps,d=s.stateNode;try{d.nodeValue=m}catch(ye){sn(s,s.return,ye)}}break;case 3:if(Lf=null,v=Li,Li=Df(a.containerInfo),ti(a,s),Li=v,ni(s),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Ru(a.containerInfo)}catch(ye){sn(s,s.return,ye)}u1&&(u1=!1,Ry(s));break;case 4:m=Li,Li=Df(s.stateNode.containerInfo),ti(a,s),ni(s),Li=m;break;case 12:ti(a,s),ni(s);break;case 13:ti(a,s),ni(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(x1=We()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,d1(s,m)));break;case 22:v=s.memoizedState!==null;var K=d!==null&&d.memoizedState!==null,he=Ur,Ce=kn;if(Ur=he||v,kn=Ce||K,ti(a,s),kn=Ce,Ur=he,ni(s),m&8192)e:for(a=s.stateNode,a._visibility=v?a._visibility&-2:a._visibility|1,v&&(d===null||K||Ur||kn||Do(s)),d=null,a=s;;){if(a.tag===5||a.tag===26){if(d===null){K=d=a;try{if(T=K.stateNode,v)D=T.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{F=K.stateNode;var _e=K.memoizedProps.style,me=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;F.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch(ye){sn(K,K.return,ye)}}}else if(a.tag===6){if(d===null){K=a;try{K.stateNode.nodeValue=v?"":K.memoizedProps}catch(ye){sn(K,K.return,ye)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;d===a&&(d=null),a=a.return}d===a&&(d=null),a.sibling.return=a.return,a=a.sibling}m&4&&(m=s.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,d1(s,d))));break;case 19:ti(a,s),ni(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,d1(s,m)));break;case 30:break;case 21:break;default:ti(a,s),ni(s)}}function ni(s){var a=s.flags;if(a&2){try{for(var d,m=s.return;m!==null;){if(vy(m)){d=m;break}m=m.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var v=d.stateNode,T=l1(s);wf(s,T,v);break;case 5:var D=d.stateNode;d.flags&32&&(Yn(D,""),d.flags&=-33);var F=l1(s);wf(s,F,D);break;case 3:case 4:var K=d.stateNode.containerInfo,he=l1(s);c1(s,he,K);break;default:throw Error(r(161))}}catch(Ce){sn(s,s.return,Ce)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Ry(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Ry(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Aa(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Cy(s,a.alternate,a),a=a.sibling}function Do(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Ca(4,a,a.return),Do(a);break;case 1:cr(a,a.return);var d=a.stateNode;typeof d.componentWillUnmount=="function"&&by(a,a.return,d),Do(a);break;case 27:vu(a.stateNode);case 26:case 5:cr(a,a.return),Do(a);break;case 22:a.memoizedState===null&&Do(a);break;case 30:Do(a);break;default:Do(a)}s=s.sibling}}function Ta(s,a,d){for(d=d&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var m=a.alternate,v=s,T=a,D=T.flags;switch(T.tag){case 0:case 11:case 15:Ta(v,T,d),du(4,T);break;case 1:if(Ta(v,T,d),m=T,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(he){sn(m,m.return,he)}if(m=T,v=m.updateQueue,v!==null){var F=m.stateNode;try{var K=v.shared.hiddenCallbacks;if(K!==null)for(v.shared.hiddenCallbacks=null,v=0;v<K.length;v++)ix(K[v],F)}catch(he){sn(m,m.return,he)}}d&&D&64&&yy(T),fu(T,T.return);break;case 27:Sy(T);case 26:case 5:Ta(v,T,d),d&&m===null&&D&4&&wy(T),fu(T,T.return);break;case 12:Ta(v,T,d);break;case 13:Ta(v,T,d),d&&D&4&&_y(v,T);break;case 22:T.memoizedState===null&&Ta(v,T,d),fu(T,T.return);break;case 30:break;default:Ta(v,T,d)}a=a.sibling}}function f1(s,a){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&Zc(d))}function h1(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Zc(s))}function ur(s,a,d,m){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Oy(s,a,d,m),a=a.sibling}function Oy(s,a,d,m){var v=a.flags;switch(a.tag){case 0:case 11:case 15:ur(s,a,d,m),v&2048&&du(9,a);break;case 1:ur(s,a,d,m);break;case 3:ur(s,a,d,m),v&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Zc(s)));break;case 12:if(v&2048){ur(s,a,d,m),s=a.stateNode;try{var T=a.memoizedProps,D=T.id,F=T.onPostCommit;typeof F=="function"&&F(D,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(K){sn(a,a.return,K)}}else ur(s,a,d,m);break;case 13:ur(s,a,d,m);break;case 23:break;case 22:T=a.stateNode,D=a.alternate,a.memoizedState!==null?T._visibility&2?ur(s,a,d,m):hu(s,a):T._visibility&2?ur(s,a,d,m):(T._visibility|=2,Pl(s,a,d,m,(a.subtreeFlags&10256)!==0)),v&2048&&f1(D,a);break;case 24:ur(s,a,d,m),v&2048&&h1(a.alternate,a);break;default:ur(s,a,d,m)}}function Pl(s,a,d,m,v){for(v=v&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var T=s,D=a,F=d,K=m,he=D.flags;switch(D.tag){case 0:case 11:case 15:Pl(T,D,F,K,v),du(8,D);break;case 23:break;case 22:var Ce=D.stateNode;D.memoizedState!==null?Ce._visibility&2?Pl(T,D,F,K,v):hu(T,D):(Ce._visibility|=2,Pl(T,D,F,K,v)),v&&he&2048&&f1(D.alternate,D);break;case 24:Pl(T,D,F,K,v),v&&he&2048&&h1(D.alternate,D);break;default:Pl(T,D,F,K,v)}a=a.sibling}}function hu(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var d=s,m=a,v=m.flags;switch(m.tag){case 22:hu(d,m),v&2048&&f1(m.alternate,m);break;case 24:hu(d,m),v&2048&&h1(m.alternate,m);break;default:hu(d,m)}a=a.sibling}}var gu=8192;function Bl(s){if(s.subtreeFlags&gu)for(s=s.child;s!==null;)Iy(s),s=s.sibling}function Iy(s){switch(s.tag){case 26:Bl(s),s.flags&gu&&s.memoizedState!==null&&kA(Li,s.memoizedState,s.memoizedProps);break;case 5:Bl(s);break;case 3:case 4:var a=Li;Li=Df(s.stateNode.containerInfo),Bl(s),Li=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=gu,gu=16777216,Bl(s),gu=a):Bl(s));break;default:Bl(s)}}function My(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function mu(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var d=0;d<a.length;d++){var m=a[d];is=m,ky(m,s)}My(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Dy(s),s=s.sibling}function Dy(s){switch(s.tag){case 0:case 11:case 15:mu(s),s.flags&2048&&Ca(9,s,s.return);break;case 3:mu(s);break;case 12:mu(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,vf(s)):mu(s);break;default:mu(s)}}function vf(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var d=0;d<a.length;d++){var m=a[d];is=m,ky(m,s)}My(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Ca(8,a,a.return),vf(a);break;case 22:d=a.stateNode,d._visibility&2&&(d._visibility&=-3,vf(a));break;default:vf(a)}s=s.sibling}}function ky(s,a){for(;is!==null;){var d=is;switch(d.tag){case 0:case 11:case 15:Ca(8,d,a);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Zc(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,is=m;else e:for(d=s;is!==null;){m=is;var v=m.sibling,T=m.return;if(Ay(m),m===d){is=null;break e}if(v!==null){v.return=T,is=v;break e}is=T}}}var KC={getCacheForType:function(s){var a=vs(Kn),d=a.data.get(s);return d===void 0&&(d=s(),a.data.set(s,d)),d}},ZC=typeof WeakMap=="function"?WeakMap:Map,Kt=0,on=null,Ot=null,Bt=0,Zt=0,si=null,_a=!1,Ul=!1,g1=!1,Vr=0,An=0,Na=0,ko=0,m1=0,yi=0,Fl=0,pu=null,zs=null,p1=!1,x1=0,Sf=1/0,Ef=null,Ra=null,fs=0,Oa=null,Vl=null,Hl=0,y1=0,b1=null,Ly=null,xu=0,w1=null;function ii(){if((Kt&2)!==0&&Bt!==0)return Bt&-Bt;if(re.T!==null){var s=Rl;return s!==0?s:_1()}return Er()}function jy(){yi===0&&(yi=(Bt&536870912)===0||zt?ms():536870912);var s=xi.current;return s!==null&&(s.flags|=32),yi}function ri(s,a,d){(s===on&&(Zt===2||Zt===9)||s.cancelPendingCommit!==null)&&(zl(s,0),Ia(s,Bt,yi,!1)),Ks(s,d),((Kt&2)===0||s!==on)&&(s===on&&((Kt&2)===0&&(ko|=d),An===4&&Ia(s,Bt,yi,!1)),dr(s))}function Py(s,a,d){if((Kt&6)!==0)throw Error(r(327));var m=!d&&(a&124)===0&&(a&s.expiredLanes)===0||Pt(s,a),v=m?eA(s,a):E1(s,a,!0),T=m;do{if(v===0){Ul&&!m&&Ia(s,a,0,!1);break}else{if(d=s.current.alternate,T&&!QC(d)){v=E1(s,a,!1),T=!1;continue}if(v===2){if(T=a,s.errorRecoveryDisabledLanes&T)var D=0;else D=s.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){a=D;e:{var F=s;v=pu;var K=F.current.memoizedState.isDehydrated;if(K&&(zl(F,D).flags|=256),D=E1(F,D,!1),D!==2){if(g1&&!K){F.errorRecoveryDisabledLanes|=T,ko|=T,v=4;break e}T=zs,zs=v,T!==null&&(zs===null?zs=T:zs.push.apply(zs,T))}v=D}if(T=!1,v!==2)continue}}if(v===1){zl(s,0),Ia(s,a,0,!0);break}e:{switch(m=s,T=v,T){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Ia(m,a,yi,!_a);break e;case 2:zs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(v=x1+300-We(),10<v)){if(Ia(m,a,yi,!_a),Nt(m,0,!0)!==0)break e;m.timeoutHandle=f2(By.bind(null,m,d,zs,Ef,p1,a,yi,ko,Fl,_a,T,2,-0,0),v);break e}By(m,d,zs,Ef,p1,a,yi,ko,Fl,_a,T,0,-0,0)}}break}while(!0);dr(s)}function By(s,a,d,m,v,T,D,F,K,he,Ce,_e,me,ye){if(s.timeoutHandle=-1,_e=a.subtreeFlags,(_e&8192||(_e&16785408)===16785408)&&(Cu={stylesheets:null,count:0,unsuspend:DA},Iy(a),_e=LA(),_e!==null)){s.cancelPendingCommit=_e(Gy.bind(null,s,a,T,d,m,v,D,F,K,Ce,1,me,ye)),Ia(s,T,D,!he);return}Gy(s,a,T,d,m,v,D,F,K)}function QC(s){for(var a=s;;){var d=a.tag;if((d===0||d===11||d===15)&&a.flags&16384&&(d=a.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var v=d[m],T=v.getSnapshot;v=v.value;try{if(!f(T(),v))return!1}catch{return!1}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ia(s,a,d,m){a&=~m1,a&=~ko,s.suspendedLanes|=a,s.pingedLanes&=~a,m&&(s.warmLanes|=a),m=s.expirationTimes;for(var v=a;0<v;){var T=31-tt(v),D=1<<T;m[T]=-1,v&=~D}d!==0&&Pc(s,d,a)}function Cf(){return(Kt&6)===0?(yu(0),!1):!0}function v1(){if(Ot!==null){if(Zt===0)var s=Ot.return;else s=Ot,Dr=No=null,B0(s),Ll=null,lu=0,s=Ot;for(;s!==null;)xy(s.alternate,s),s=s.return;Ot=null}}function zl(s,a){var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,pA(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),v1(),on=s,Ot=d=Or(s.current,null),Bt=a,Zt=0,si=null,_a=!1,Ul=Pt(s,a),g1=!1,Fl=yi=m1=ko=Na=An=0,zs=pu=null,p1=!1,(a&8)!==0&&(a|=a&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=a;0<m;){var v=31-tt(m),T=1<<v;a|=s[v],m&=~T}return Vr=a,Gd(),d}function Uy(s,a){Ct=null,re.H=df,a===Jc||a===ef?(a=nx(),Zt=3):a===Jp?(a=nx(),Zt=4):Zt=a===sy?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,si=a,Ot===null&&(An=1,pf(s,hi(a,s.current)))}function Fy(){var s=re.H;return re.H=df,s===null?df:s}function Vy(){var s=re.A;return re.A=KC,s}function S1(){An=4,_a||(Bt&4194048)!==Bt&&xi.current!==null||(Ul=!0),(Na&134217727)===0&&(ko&134217727)===0||on===null||Ia(on,Bt,yi,!1)}function E1(s,a,d){var m=Kt;Kt|=2;var v=Fy(),T=Vy();(on!==s||Bt!==a)&&(Ef=null,zl(s,a)),a=!1;var D=An;e:do try{if(Zt!==0&&Ot!==null){var F=Ot,K=si;switch(Zt){case 8:v1(),D=6;break e;case 3:case 2:case 9:case 6:xi.current===null&&(a=!0);var he=Zt;if(Zt=0,si=null,$l(s,F,K,he),d&&Ul){D=0;break e}break;default:he=Zt,Zt=0,si=null,$l(s,F,K,he)}}JC(),D=An;break}catch(Ce){Uy(s,Ce)}while(!0);return a&&s.shellSuspendCounter++,Dr=No=null,Kt=m,re.H=v,re.A=T,Ot===null&&(on=null,Bt=0,Gd()),D}function JC(){for(;Ot!==null;)Hy(Ot)}function eA(s,a){var d=Kt;Kt|=2;var m=Fy(),v=Vy();on!==s||Bt!==a?(Ef=null,Sf=We()+500,zl(s,a)):Ul=Pt(s,a);e:do try{if(Zt!==0&&Ot!==null){a=Ot;var T=si;t:switch(Zt){case 1:Zt=0,si=null,$l(s,a,T,1);break;case 2:case 9:if(ex(T)){Zt=0,si=null,zy(a);break}a=function(){Zt!==2&&Zt!==9||on!==s||(Zt=7),dr(s)},T.then(a,a);break e;case 3:Zt=7;break e;case 4:Zt=5;break e;case 7:ex(T)?(Zt=0,si=null,zy(a)):(Zt=0,si=null,$l(s,a,T,7));break;case 5:var D=null;switch(Ot.tag){case 26:D=Ot.memoizedState;case 5:case 27:var F=Ot;if(!D||C2(D)){Zt=0,si=null;var K=F.sibling;if(K!==null)Ot=K;else{var he=F.return;he!==null?(Ot=he,Af(he)):Ot=null}break t}}Zt=0,si=null,$l(s,a,T,5);break;case 6:Zt=0,si=null,$l(s,a,T,6);break;case 8:v1(),An=6;break e;default:throw Error(r(462))}}tA();break}catch(Ce){Uy(s,Ce)}while(!0);return Dr=No=null,re.H=m,re.A=v,Kt=d,Ot!==null?0:(on=null,Bt=0,Gd(),An)}function tA(){for(;Ot!==null&&!Oe();)Hy(Ot)}function Hy(s){var a=my(s.alternate,s,Vr);s.memoizedProps=s.pendingProps,a===null?Af(s):Ot=a}function zy(s){var a=s,d=a.alternate;switch(a.tag){case 15:case 0:a=cy(d,a,a.pendingProps,a.type,void 0,Bt);break;case 11:a=cy(d,a,a.pendingProps,a.type.render,a.ref,Bt);break;case 5:B0(a);default:xy(d,a),a=Ot=$p(a,Vr),a=my(d,a,Vr)}s.memoizedProps=s.pendingProps,a===null?Af(s):Ot=a}function $l(s,a,d,m){Dr=No=null,B0(a),Ll=null,lu=0;var v=a.return;try{if($C(s,v,a,d,Bt)){An=1,pf(s,hi(d,s.current)),Ot=null;return}}catch(T){if(v!==null)throw Ot=v,T;An=1,pf(s,hi(d,s.current)),Ot=null;return}a.flags&32768?(zt||m===1?s=!0:Ul||(Bt&536870912)!==0?s=!1:(_a=s=!0,(m===2||m===9||m===3||m===6)&&(m=xi.current,m!==null&&m.tag===13&&(m.flags|=16384))),$y(a,s)):Af(a)}function Af(s){var a=s;do{if((a.flags&32768)!==0){$y(a,_a);return}s=a.return;var d=qC(a.alternate,a,Vr);if(d!==null){Ot=d;return}if(a=a.sibling,a!==null){Ot=a;return}Ot=a=s}while(a!==null);An===0&&(An=5)}function $y(s,a){do{var d=YC(s.alternate,s);if(d!==null){d.flags&=32767,Ot=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!a&&(s=s.sibling,s!==null)){Ot=s;return}Ot=s=d}while(s!==null);An=6,Ot=null}function Gy(s,a,d,m,v,T,D,F,K){s.cancelPendingCommit=null;do Tf();while(fs!==0);if((Kt&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(T=a.lanes|a.childLanes,T|=h0,kd(s,d,T,D,F,K),s===on&&(Ot=on=null,Bt=0),Vl=a,Oa=s,Hl=d,y1=T,b1=v,Ly=m,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,rA(He,function(){return Ky(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||m){m=re.T,re.T=null,v=le.p,le.p=2,D=Kt,Kt|=4;try{XC(s,a,d)}finally{Kt=D,le.p=v,re.T=m}}fs=1,qy(),Yy(),Xy()}}function qy(){if(fs===1){fs=0;var s=Oa,a=Vl,d=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||d){d=re.T,re.T=null;var m=le.p;le.p=2;var v=Kt;Kt|=4;try{Ny(a,s);var T=L1,D=_(s.containerInfo),F=T.focusedElem,K=T.selectionRange;if(D!==F&&F&&F.ownerDocument&&C(F.ownerDocument.documentElement,F)){if(K!==null&&O(F)){var he=K.start,Ce=K.end;if(Ce===void 0&&(Ce=he),"selectionStart"in F)F.selectionStart=he,F.selectionEnd=Math.min(Ce,F.value.length);else{var _e=F.ownerDocument||document,me=_e&&_e.defaultView||window;if(me.getSelection){var ye=me.getSelection(),ut=F.textContent.length,ot=Math.min(K.start,ut),tn=K.end===void 0?ot:Math.min(K.end,ut);!ye.extend&&ot>tn&&(D=tn,tn=ot,ot=D);var oe=w(F,ot),ne=w(F,tn);if(oe&&ne&&(ye.rangeCount!==1||ye.anchorNode!==oe.node||ye.anchorOffset!==oe.offset||ye.focusNode!==ne.node||ye.focusOffset!==ne.offset)){var fe=_e.createRange();fe.setStart(oe.node,oe.offset),ye.removeAllRanges(),ot>tn?(ye.addRange(fe),ye.extend(ne.node,ne.offset)):(fe.setEnd(ne.node,ne.offset),ye.addRange(fe))}}}}for(_e=[],ye=F;ye=ye.parentNode;)ye.nodeType===1&&_e.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<_e.length;F++){var Te=_e[F];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}Bf=!!k1,L1=k1=null}finally{Kt=v,le.p=m,re.T=d}}s.current=a,fs=2}}function Yy(){if(fs===2){fs=0;var s=Oa,a=Vl,d=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||d){d=re.T,re.T=null;var m=le.p;le.p=2;var v=Kt;Kt|=4;try{Cy(s,a.alternate,a)}finally{Kt=v,le.p=m,re.T=d}}fs=3}}function Xy(){if(fs===4||fs===3){fs=0,Le();var s=Oa,a=Vl,d=Hl,m=Ly;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?fs=5:(fs=0,Vl=Oa=null,Wy(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(Ra=null),Un(d),a=a.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(Bn,a,void 0,(a.current.flags&128)===128)}catch{}if(m!==null){a=re.T,v=le.p,le.p=2,re.T=null;try{for(var T=s.onRecoverableError,D=0;D<m.length;D++){var F=m[D];T(F.value,{componentStack:F.stack})}}finally{re.T=a,le.p=v}}(Hl&3)!==0&&Tf(),dr(s),v=s.pendingLanes,(d&4194090)!==0&&(v&42)!==0?s===w1?xu++:(xu=0,w1=s):xu=0,yu(0)}}function Wy(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Zc(a)))}function Tf(s){return qy(),Yy(),Xy(),Ky()}function Ky(){if(fs!==5)return!1;var s=Oa,a=y1;y1=0;var d=Un(Hl),m=re.T,v=le.p;try{le.p=32>d?32:d,re.T=null,d=b1,b1=null;var T=Oa,D=Hl;if(fs=0,Vl=Oa=null,Hl=0,(Kt&6)!==0)throw Error(r(331));var F=Kt;if(Kt|=4,Dy(T.current),Oy(T,T.current,D,d),Kt=F,yu(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(Bn,T)}catch{}return!0}finally{le.p=v,re.T=m,Wy(s,a)}}function Zy(s,a,d){a=hi(d,a),a=Q0(s.stateNode,a,2),s=wa(s,a,2),s!==null&&(Ks(s,2),dr(s))}function sn(s,a,d){if(s.tag===3)Zy(s,s,d);else for(;a!==null;){if(a.tag===3){Zy(a,s,d);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ra===null||!Ra.has(m))){s=hi(d,s),d=ty(2),m=wa(a,d,2),m!==null&&(ny(d,m,a,s),Ks(m,2),dr(m));break}}a=a.return}}function C1(s,a,d){var m=s.pingCache;if(m===null){m=s.pingCache=new ZC;var v=new Set;m.set(a,v)}else v=m.get(a),v===void 0&&(v=new Set,m.set(a,v));v.has(d)||(g1=!0,v.add(d),s=nA.bind(null,s,a,d),a.then(s,s))}function nA(s,a,d){var m=s.pingCache;m!==null&&m.delete(a),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,on===s&&(Bt&d)===d&&(An===4||An===3&&(Bt&62914560)===Bt&&300>We()-x1?(Kt&2)===0&&zl(s,0):m1|=d,Fl===Bt&&(Fl=0)),dr(s)}function Qy(s,a){a===0&&(a=ra()),s=Al(s,a),s!==null&&(Ks(s,a),dr(s))}function sA(s){var a=s.memoizedState,d=0;a!==null&&(d=a.retryLane),Qy(s,d)}function iA(s,a){var d=0;switch(s.tag){case 13:var m=s.stateNode,v=s.memoizedState;v!==null&&(d=v.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(a),Qy(s,d)}function rA(s,a){return Se(s,a)}var _f=null,Gl=null,A1=!1,Nf=!1,T1=!1,Lo=0;function dr(s){s!==Gl&&s.next===null&&(Gl===null?_f=Gl=s:Gl=Gl.next=s),Nf=!0,A1||(A1=!0,oA())}function yu(s,a){if(!T1&&Nf){T1=!0;do for(var d=!1,m=_f;m!==null;){if(s!==0){var v=m.pendingLanes;if(v===0)var T=0;else{var D=m.suspendedLanes,F=m.pingedLanes;T=(1<<31-tt(42|s)+1)-1,T&=v&~(D&~F),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(d=!0,n2(m,T))}else T=Bt,T=Nt(m,m===on?T:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(T&3)===0||Pt(m,T)||(d=!0,n2(m,T));m=m.next}while(d);T1=!1}}function aA(){Jy()}function Jy(){Nf=A1=!1;var s=0;Lo!==0&&(mA()&&(s=Lo),Lo=0);for(var a=We(),d=null,m=_f;m!==null;){var v=m.next,T=e2(m,a);T===0?(m.next=null,d===null?_f=v:d.next=v,v===null&&(Gl=d)):(d=m,(s!==0||(T&3)!==0)&&(Nf=!0)),m=v}yu(s)}function e2(s,a){for(var d=s.suspendedLanes,m=s.pingedLanes,v=s.expirationTimes,T=s.pendingLanes&-62914561;0<T;){var D=31-tt(T),F=1<<D,K=v[D];K===-1?((F&d)===0||(F&m)!==0)&&(v[D]=js(F,a)):K<=a&&(s.expiredLanes|=F),T&=~F}if(a=on,d=Bt,d=Nt(s,s===a?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,d===0||s===a&&(Zt===2||Zt===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&Ie(m),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||Pt(s,d)){if(a=d&-d,a===s.callbackPriority)return a;switch(m!==null&&Ie(m),Un(d)){case 2:case 8:d=vt;break;case 32:d=He;break;case 268435456:d=Yi;break;default:d=He}return m=t2.bind(null,s),d=Se(d,m),s.callbackPriority=a,s.callbackNode=d,a}return m!==null&&m!==null&&Ie(m),s.callbackPriority=2,s.callbackNode=null,2}function t2(s,a){if(fs!==0&&fs!==5)return s.callbackNode=null,s.callbackPriority=0,null;var d=s.callbackNode;if(Tf()&&s.callbackNode!==d)return null;var m=Bt;return m=Nt(s,s===on?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(Py(s,m,a),e2(s,We()),s.callbackNode!=null&&s.callbackNode===d?t2.bind(null,s):null)}function n2(s,a){if(Tf())return null;Py(s,a,!0)}function oA(){xA(function(){(Kt&6)!==0?Se(Ge,aA):Jy()})}function _1(){return Lo===0&&(Lo=ms()),Lo}function s2(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:pl(""+s)}function i2(s,a){var d=a.ownerDocument.createElement("input");return d.name=a.name,d.value=a.value,s.id&&d.setAttribute("form",s.id),a.parentNode.insertBefore(d,a),s=new FormData(s),d.parentNode.removeChild(d),s}function lA(s,a,d,m,v){if(a==="submit"&&d&&d.stateNode===v){var T=s2((v[vn]||null).action),D=m.submitter;D&&(a=(a=D[vn]||null)?s2(a.formAction):D.getAttribute("formAction"),a!==null&&(T=a,D=null));var F=new sr("action","action",null,m,v);s.push({event:F,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Lo!==0){var K=D?i2(v,D):new FormData(v);Y0(d,{pending:!0,data:K,method:v.method,action:T},null,K)}}else typeof T=="function"&&(F.preventDefault(),K=D?i2(v,D):new FormData(v),Y0(d,{pending:!0,data:K,method:v.method,action:T},T,K))},currentTarget:v}]})}}for(var N1=0;N1<ar.length;N1++){var R1=ar[N1],cA=R1.toLowerCase(),uA=R1[0].toUpperCase()+R1.slice(1);Js(cA,"on"+uA)}Js(ht,"onAnimationEnd"),Js(us,"onAnimationIteration"),Js(Fs,"onAnimationStart"),Js("dblclick","onDoubleClick"),Js("focusin","onFocus"),Js("focusout","onBlur"),Js(bs,"onTransitionRun"),Js(Wt,"onTransitionStart"),Js(Wn,"onTransitionCancel"),Js(ws,"onTransitionEnd"),Sn("onMouseEnter",["mouseout","mouseover"]),Sn("onMouseLeave",["mouseout","mouseover"]),Sn("onPointerEnter",["pointerout","pointerover"]),Sn("onPointerLeave",["pointerout","pointerover"]),ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ns("onBeforeInput",["compositionend","keypress","textInput","paste"]),ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bu));function r2(s,a){a=(a&4)!==0;for(var d=0;d<s.length;d++){var m=s[d],v=m.event;m=m.listeners;e:{var T=void 0;if(a)for(var D=m.length-1;0<=D;D--){var F=m[D],K=F.instance,he=F.currentTarget;if(F=F.listener,K!==T&&v.isPropagationStopped())break e;T=F,v.currentTarget=he;try{T(v)}catch(Ce){mf(Ce)}v.currentTarget=null,T=K}else for(D=0;D<m.length;D++){if(F=m[D],K=F.instance,he=F.currentTarget,F=F.listener,K!==T&&v.isPropagationStopped())break e;T=F,v.currentTarget=he;try{T(v)}catch(Ce){mf(Ce)}v.currentTarget=null,T=K}}}}function It(s,a){var d=a[ts];d===void 0&&(d=a[ts]=new Set);var m=s+"__bubble";d.has(m)||(a2(a,s,2,!1),d.add(m))}function O1(s,a,d){var m=0;a&&(m|=4),a2(d,s,m,a)}var Rf="_reactListening"+Math.random().toString(36).slice(2);function I1(s){if(!s[Rf]){s[Rf]=!0,Ld.forEach(function(d){d!=="selectionchange"&&(dA.has(d)||O1(d,!1,s),O1(d,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Rf]||(a[Rf]=!0,O1("selectionchange",!1,a))}}function a2(s,a,d,m){switch(O2(a)){case 2:var v=BA;break;case 8:v=UA;break;default:v=G1}d=v.bind(null,a,d,s),v=void 0,!gt||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),m?v!==void 0?s.addEventListener(a,d,{capture:!0,passive:v}):s.addEventListener(a,d,!0):v!==void 0?s.addEventListener(a,d,{passive:v}):s.addEventListener(a,d,!1)}function M1(s,a,d,m,v){var T=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var D=m.tag;if(D===3||D===4){var F=m.stateNode.containerInfo;if(F===v)break;if(D===4)for(D=m.return;D!==null;){var K=D.tag;if((K===3||K===4)&&D.stateNode.containerInfo===v)return;D=D.return}for(;F!==null;){if(D=Rn(F),D===null)return;if(K=D.tag,K===5||K===6||K===26||K===27){m=T=D;continue e}F=F.parentNode}}m=m.return}Mi(function(){var he=T,Ce=aa(d),_e=[];e:{var me=Rr.get(s);if(me!==void 0){var ye=sr,ut=s;switch(s){case"keypress":if(xl(d)===0)break e;case"keydown":case"keyup":ye=Vc;break;case"focusin":ut="focus",ye=ua;break;case"focusout":ut="blur",ye=ua;break;case"beforeblur":case"afterblur":ye=ua;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=Ud;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Gt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Xt;break;case ht:case us:case Fs:ye=r0;break;case ws:ye=c0;break;case"scroll":case"scrollend":ye=xs;break;case"wheel":ye=_r;break;case"copy":case"cut":case"paste":ye=yt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=bo;break;case"toggle":case"beforetoggle":ye=u0}var ot=(a&4)!==0,tn=!ot&&(s==="scroll"||s==="scrollend"),oe=ot?me!==null?me+"Capture":null:me;ot=[];for(var ne=he,fe;ne!==null;){var Te=ne;if(fe=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||fe===null||oe===null||(Te=nt(ne,oe),Te!=null&&ot.push(wu(ne,Te,fe))),tn)break;ne=ne.return}0<ot.length&&(me=new ye(me,ut,null,d,Ce),_e.push({event:me,listeners:ot}))}}if((a&7)===0){e:{if(me=s==="mouseover"||s==="pointerover",ye=s==="mouseout"||s==="pointerout",me&&d!==go&&(ut=d.relatedTarget||d.fromElement)&&(Rn(ut)||ut[Xi]))break e;if((ye||me)&&(me=Ce.window===Ce?Ce:(me=Ce.ownerDocument)?me.defaultView||me.parentWindow:window,ye?(ut=d.relatedTarget||d.toElement,ye=he,ut=ut?Rn(ut):null,ut!==null&&(tn=u(ut),ot=ut.tag,ut!==tn||ot!==5&&ot!==27&&ot!==6)&&(ut=null)):(ye=null,ut=he),ye!==ut)){if(ot=Ud,Te="onMouseLeave",oe="onMouseEnter",ne="mouse",(s==="pointerout"||s==="pointerover")&&(ot=bo,Te="onPointerLeave",oe="onPointerEnter",ne="pointer"),tn=ye==null?me:Wi(ye),fe=ut==null?me:Wi(ut),me=new ot(Te,ne+"leave",ye,d,Ce),me.target=tn,me.relatedTarget=fe,Te=null,Rn(Ce)===he&&(ot=new ot(oe,ne+"enter",ut,d,Ce),ot.target=fe,ot.relatedTarget=tn,Te=ot),tn=Te,ye&&ut)t:{for(ot=ye,oe=ut,ne=0,fe=ot;fe;fe=ql(fe))ne++;for(fe=0,Te=oe;Te;Te=ql(Te))fe++;for(;0<ne-fe;)ot=ql(ot),ne--;for(;0<fe-ne;)oe=ql(oe),fe--;for(;ne--;){if(ot===oe||oe!==null&&ot===oe.alternate)break t;ot=ql(ot),oe=ql(oe)}ot=null}else ot=null;ye!==null&&o2(_e,me,ye,ot,!1),ut!==null&&tn!==null&&o2(_e,tn,ut,ot,!0)}}e:{if(me=he?Wi(he):window,ye=me.nodeName&&me.nodeName.toLowerCase(),ye==="select"||ye==="input"&&me.type==="file")var Ke=zd;else if(So(me))if(Gc)Ke=o;else{Ke=k;var _t=El}else ye=me.nodeName,!ye||ye.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?he&&Je(he.elementType)&&(Ke=zd):Ke=i;if(Ke&&(Ke=Ke(s,he))){Rs(_e,Ke,d,Ce);break e}_t&&_t(s,me,he),s==="focusout"&&he&&me.type==="number"&&he.memoizedProps.value!=null&&de(me,"number",me.value)}switch(_t=he?Wi(he):window,s){case"focusin":(So(_t)||_t.contentEditable==="true")&&(B=_t,q=he,Q=null);break;case"focusout":Q=q=B=null;break;case"mousedown":ee=!0;break;case"contextmenu":case"mouseup":case"dragend":ee=!1,ue(_e,d,Ce);break;case"selectionchange":if(L)break;case"keydown":case"keyup":ue(_e,d,Ce)}var et;if(wo)e:{switch(s){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else ha?Nr(s,d)&&(lt="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(lt="onCompositionStart");lt&&(zc&&d.locale!=="ko"&&(ha||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&ha&&(et=er()):(Ji=Ce,mo="value"in Ji?Ji.value:Ji.textContent,ha=!0)),_t=Of(he,lt),0<_t.length&&(lt=new xo(lt,s,null,d,Ce),_e.push({event:lt,listeners:_t}),et?lt.data=et:(et=vl(d),et!==null&&(lt.data=et)))),(et=Hc?vo(s,d):d0(s,d))&&(lt=Of(he,"onBeforeInput"),0<lt.length&&(_t=new xo("onBeforeInput","beforeinput",null,d,Ce),_e.push({event:_t,listeners:lt}),_t.data=et)),lA(_e,s,he,d,Ce)}r2(_e,a)})}function wu(s,a,d){return{instance:s,listener:a,currentTarget:d}}function Of(s,a){for(var d=a+"Capture",m=[];s!==null;){var v=s,T=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||T===null||(v=nt(s,d),v!=null&&m.unshift(wu(s,v,T)),v=nt(s,a),v!=null&&m.push(wu(s,v,T))),s.tag===3)return m;s=s.return}return[]}function ql(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function o2(s,a,d,m,v){for(var T=a._reactName,D=[];d!==null&&d!==m;){var F=d,K=F.alternate,he=F.stateNode;if(F=F.tag,K!==null&&K===m)break;F!==5&&F!==26&&F!==27||he===null||(K=he,v?(he=nt(d,T),he!=null&&D.unshift(wu(d,he,K))):v||(he=nt(d,T),he!=null&&D.push(wu(d,he,K)))),d=d.return}D.length!==0&&s.push({event:a,listeners:D})}var fA=/\r\n?/g,hA=/\u0000|\uFFFD/g;function l2(s){return(typeof s=="string"?s:""+s).replace(fA,`
`).replace(hA,"")}function c2(s,a){return a=l2(a),l2(s)===a}function If(){}function en(s,a,d,m,v,T){switch(d){case"children":typeof m=="string"?a==="body"||a==="textarea"&&m===""||Yn(s,m):(typeof m=="number"||typeof m=="bigint")&&a!=="body"&&Yn(s,""+m);break;case"className":fl(s,"class",m);break;case"tabIndex":fl(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":fl(s,d,m);break;case"style":Ns(s,m,T);break;case"data":if(a!=="object"){fl(s,"data",m);break}case"src":case"href":if(m===""&&(a!=="a"||d!=="href")){s.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(d);break}m=pl(""+m),s.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(d==="formAction"?(a!=="input"&&en(s,a,"name",v.name,v,null),en(s,a,"formEncType",v.formEncType,v,null),en(s,a,"formMethod",v.formMethod,v,null),en(s,a,"formTarget",v.formTarget,v,null)):(en(s,a,"encType",v.encType,v,null),en(s,a,"method",v.method,v,null),en(s,a,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(d);break}m=pl(""+m),s.setAttribute(d,m);break;case"onClick":m!=null&&(s.onclick=If);break;case"onScroll":m!=null&&It("scroll",s);break;case"onScrollEnd":m!=null&&It("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(v.children!=null)throw Error(r(60));s.innerHTML=d}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}d=pl(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,""+m):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":m===!0?s.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,m):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(d,m):s.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(d):s.setAttribute(d,m);break;case"popover":It("beforetoggle",s),It("toggle",s),Ne(s,"popover",m);break;case"xlinkActuate":Vt(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Vt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Vt(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Vt(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Vt(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Vt(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Vt(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Vt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Vt(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Ne(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=un.get(d)||d,Ne(s,d,m))}}function D1(s,a,d,m,v,T){switch(d){case"style":Ns(s,m,T);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(v.children!=null)throw Error(r(60));s.innerHTML=d}}break;case"children":typeof m=="string"?Yn(s,m):(typeof m=="number"||typeof m=="bigint")&&Yn(s,""+m);break;case"onScroll":m!=null&&It("scroll",s);break;case"onScrollEnd":m!=null&&It("scrollend",s);break;case"onClick":m!=null&&(s.onclick=If);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jd.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(v=d.endsWith("Capture"),a=d.slice(2,v?d.length-7:void 0),T=s[vn]||null,T=T!=null?T[d]:null,typeof T=="function"&&s.removeEventListener(a,T,v),typeof m=="function")){typeof T!="function"&&T!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(a,m,v);break e}d in s?s[d]=m:m===!0?s.setAttribute(d,""):Ne(s,d,m)}}}function hs(s,a,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",s),It("load",s);var m=!1,v=!1,T;for(T in d)if(d.hasOwnProperty(T)){var D=d[T];if(D!=null)switch(T){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:en(s,a,T,D,d,null)}}v&&en(s,a,"srcSet",d.srcSet,d,null),m&&en(s,a,"src",d.src,d,null);return;case"input":It("invalid",s);var F=T=D=v=null,K=null,he=null;for(m in d)if(d.hasOwnProperty(m)){var Ce=d[m];if(Ce!=null)switch(m){case"name":v=Ce;break;case"type":D=Ce;break;case"checked":K=Ce;break;case"defaultChecked":he=Ce;break;case"value":T=Ce;break;case"defaultValue":F=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(r(137,a));break;default:en(s,a,m,Ce,d,null)}}qn(s,T,F,K,he,D,v,!1),gl(s);return;case"select":It("invalid",s),m=D=T=null;for(v in d)if(d.hasOwnProperty(v)&&(F=d[v],F!=null))switch(v){case"value":T=F;break;case"defaultValue":D=F;break;case"multiple":m=F;default:en(s,a,v,F,d,null)}a=T,d=D,s.multiple=!!m,a!=null?G(s,!!m,a,!1):d!=null&&G(s,!!m,d,!0);return;case"textarea":It("invalid",s),T=v=m=null;for(D in d)if(d.hasOwnProperty(D)&&(F=d[D],F!=null))switch(D){case"value":m=F;break;case"defaultValue":v=F;break;case"children":T=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:en(s,a,D,F,d,null)}On(s,m,v,T),gl(s);return;case"option":for(K in d)if(d.hasOwnProperty(K)&&(m=d[K],m!=null))switch(K){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:en(s,a,K,m,d,null)}return;case"dialog":It("beforetoggle",s),It("toggle",s),It("cancel",s),It("close",s);break;case"iframe":case"object":It("load",s);break;case"video":case"audio":for(m=0;m<bu.length;m++)It(bu[m],s);break;case"image":It("error",s),It("load",s);break;case"details":It("toggle",s);break;case"embed":case"source":case"link":It("error",s),It("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in d)if(d.hasOwnProperty(he)&&(m=d[he],m!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:en(s,a,he,m,d,null)}return;default:if(Je(a)){for(Ce in d)d.hasOwnProperty(Ce)&&(m=d[Ce],m!==void 0&&D1(s,a,Ce,m,d,void 0));return}}for(F in d)d.hasOwnProperty(F)&&(m=d[F],m!=null&&en(s,a,F,m,d,null))}function gA(s,a,d,m){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,T=null,D=null,F=null,K=null,he=null,Ce=null;for(ye in d){var _e=d[ye];if(d.hasOwnProperty(ye)&&_e!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":K=_e;default:m.hasOwnProperty(ye)||en(s,a,ye,null,m,_e)}}for(var me in m){var ye=m[me];if(_e=d[me],m.hasOwnProperty(me)&&(ye!=null||_e!=null))switch(me){case"type":T=ye;break;case"name":v=ye;break;case"checked":he=ye;break;case"defaultChecked":Ce=ye;break;case"value":D=ye;break;case"defaultValue":F=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,a));break;default:ye!==_e&&en(s,a,me,ye,m,_e)}}$t(s,D,F,K,he,Ce,T,v);return;case"select":ye=D=F=me=null;for(T in d)if(K=d[T],d.hasOwnProperty(T)&&K!=null)switch(T){case"value":break;case"multiple":ye=K;default:m.hasOwnProperty(T)||en(s,a,T,null,m,K)}for(v in m)if(T=m[v],K=d[v],m.hasOwnProperty(v)&&(T!=null||K!=null))switch(v){case"value":me=T;break;case"defaultValue":F=T;break;case"multiple":D=T;default:T!==K&&en(s,a,v,T,m,K)}a=F,d=D,m=ye,me!=null?G(s,!!d,me,!1):!!m!=!!d&&(a!=null?G(s,!!d,a,!0):G(s,!!d,d?[]:"",!1));return;case"textarea":ye=me=null;for(F in d)if(v=d[F],d.hasOwnProperty(F)&&v!=null&&!m.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:en(s,a,F,null,m,v)}for(D in m)if(v=m[D],T=d[D],m.hasOwnProperty(D)&&(v!=null||T!=null))switch(D){case"value":me=v;break;case"defaultValue":ye=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==T&&en(s,a,D,v,m,T)}Qe(s,me,ye);return;case"option":for(var ut in d)if(me=d[ut],d.hasOwnProperty(ut)&&me!=null&&!m.hasOwnProperty(ut))switch(ut){case"selected":s.selected=!1;break;default:en(s,a,ut,null,m,me)}for(K in m)if(me=m[K],ye=d[K],m.hasOwnProperty(K)&&me!==ye&&(me!=null||ye!=null))switch(K){case"selected":s.selected=me&&typeof me!="function"&&typeof me!="symbol";break;default:en(s,a,K,me,m,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ot in d)me=d[ot],d.hasOwnProperty(ot)&&me!=null&&!m.hasOwnProperty(ot)&&en(s,a,ot,null,m,me);for(he in m)if(me=m[he],ye=d[he],m.hasOwnProperty(he)&&me!==ye&&(me!=null||ye!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(137,a));break;default:en(s,a,he,me,m,ye)}return;default:if(Je(a)){for(var tn in d)me=d[tn],d.hasOwnProperty(tn)&&me!==void 0&&!m.hasOwnProperty(tn)&&D1(s,a,tn,void 0,m,me);for(Ce in m)me=m[Ce],ye=d[Ce],!m.hasOwnProperty(Ce)||me===ye||me===void 0&&ye===void 0||D1(s,a,Ce,me,m,ye);return}}for(var oe in d)me=d[oe],d.hasOwnProperty(oe)&&me!=null&&!m.hasOwnProperty(oe)&&en(s,a,oe,null,m,me);for(_e in m)me=m[_e],ye=d[_e],!m.hasOwnProperty(_e)||me===ye||me==null&&ye==null||en(s,a,_e,me,m,ye)}var k1=null,L1=null;function Mf(s){return s.nodeType===9?s:s.ownerDocument}function u2(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function d2(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function j1(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var P1=null;function mA(){var s=window.event;return s&&s.type==="popstate"?s===P1?!1:(P1=s,!0):(P1=null,!1)}var f2=typeof setTimeout=="function"?setTimeout:void 0,pA=typeof clearTimeout=="function"?clearTimeout:void 0,h2=typeof Promise=="function"?Promise:void 0,xA=typeof queueMicrotask=="function"?queueMicrotask:typeof h2<"u"?function(s){return h2.resolve(null).then(s).catch(yA)}:f2;function yA(s){setTimeout(function(){throw s})}function Ma(s){return s==="head"}function g2(s,a){var d=a,m=0,v=0;do{var T=d.nextSibling;if(s.removeChild(d),T&&T.nodeType===8)if(d=T.data,d==="/$"){if(0<m&&8>m){d=m;var D=s.ownerDocument;if(d&1&&vu(D.documentElement),d&2&&vu(D.body),d&4)for(d=D.head,vu(d),D=d.firstChild;D;){var F=D.nextSibling,K=D.nodeName;D[di]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&D.rel.toLowerCase()==="stylesheet"||d.removeChild(D),D=F}}if(v===0){s.removeChild(T),Ru(a);return}v--}else d==="$"||d==="$?"||d==="$!"?v++:m=d.charCodeAt(0)-48;else m=0;d=T}while(d);Ru(a)}function B1(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var d=a;switch(a=a.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":B1(d),ho(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function bA(s,a,d,m){for(;s.nodeType===1;){var v=d;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[di])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(T=s.getAttribute("rel"),T==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(T!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(T=s.getAttribute("src"),(T!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&T&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var T=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===T)return s}else return s;if(s=ji(s.nextSibling),s===null)break}return null}function wA(s,a,d){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=ji(s.nextSibling),s===null))return null;return s}function U1(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function vA(s,a){var d=s.ownerDocument;if(s.data!=="$?"||d.readyState==="complete")a();else{var m=function(){a(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function ji(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var F1=null;function m2(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return s;a--}else d==="/$"&&a++}s=s.previousSibling}return null}function p2(s,a,d){switch(a=Mf(d),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function vu(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);ho(s)}var bi=new Map,x2=new Set;function Df(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Hr=le.d;le.d={f:SA,r:EA,D:CA,C:AA,L:TA,m:_A,X:RA,S:NA,M:OA};function SA(){var s=Hr.f(),a=Cf();return s||a}function EA(s){var a=Zs(s);a!==null&&a.tag===5&&a.type==="form"?Px(a):Hr.r(s)}var Yl=typeof document>"u"?null:document;function y2(s,a,d){var m=Yl;if(m&&typeof a=="string"&&a){var v=Gn(a);v='link[rel="'+s+'"][href="'+v+'"]',typeof d=="string"&&(v+='[crossorigin="'+d+'"]'),x2.has(v)||(x2.add(v),s={rel:s,crossOrigin:d,href:a},m.querySelector(v)===null&&(a=m.createElement("link"),hs(a,"link",s),Yt(a),m.head.appendChild(a)))}}function CA(s){Hr.D(s),y2("dns-prefetch",s,null)}function AA(s,a){Hr.C(s,a),y2("preconnect",s,a)}function TA(s,a,d){Hr.L(s,a,d);var m=Yl;if(m&&s&&a){var v='link[rel="preload"][as="'+Gn(a)+'"]';a==="image"&&d&&d.imageSrcSet?(v+='[imagesrcset="'+Gn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(v+='[imagesizes="'+Gn(d.imageSizes)+'"]')):v+='[href="'+Gn(s)+'"]';var T=v;switch(a){case"style":T=Xl(s);break;case"script":T=Wl(s)}bi.has(T)||(s=S({rel:"preload",href:a==="image"&&d&&d.imageSrcSet?void 0:s,as:a},d),bi.set(T,s),m.querySelector(v)!==null||a==="style"&&m.querySelector(Su(T))||a==="script"&&m.querySelector(Eu(T))||(a=m.createElement("link"),hs(a,"link",s),Yt(a),m.head.appendChild(a)))}}function _A(s,a){Hr.m(s,a);var d=Yl;if(d&&s){var m=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+Gn(m)+'"][href="'+Gn(s)+'"]',T=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Wl(s)}if(!bi.has(T)&&(s=S({rel:"modulepreload",href:s},a),bi.set(T,s),d.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Eu(T)))return}m=d.createElement("link"),hs(m,"link",s),Yt(m),d.head.appendChild(m)}}}function NA(s,a,d){Hr.S(s,a,d);var m=Yl;if(m&&s){var v=Oi(m).hoistableStyles,T=Xl(s);a=a||"default";var D=v.get(T);if(!D){var F={loading:0,preload:null};if(D=m.querySelector(Su(T)))F.loading=5;else{s=S({rel:"stylesheet",href:s,"data-precedence":a},d),(d=bi.get(T))&&V1(s,d);var K=D=m.createElement("link");Yt(K),hs(K,"link",s),K._p=new Promise(function(he,Ce){K.onload=he,K.onerror=Ce}),K.addEventListener("load",function(){F.loading|=1}),K.addEventListener("error",function(){F.loading|=2}),F.loading|=4,kf(D,a,m)}D={type:"stylesheet",instance:D,count:1,state:F},v.set(T,D)}}}function RA(s,a){Hr.X(s,a);var d=Yl;if(d&&s){var m=Oi(d).hoistableScripts,v=Wl(s),T=m.get(v);T||(T=d.querySelector(Eu(v)),T||(s=S({src:s,async:!0},a),(a=bi.get(v))&&H1(s,a),T=d.createElement("script"),Yt(T),hs(T,"link",s),d.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(v,T))}}function OA(s,a){Hr.M(s,a);var d=Yl;if(d&&s){var m=Oi(d).hoistableScripts,v=Wl(s),T=m.get(v);T||(T=d.querySelector(Eu(v)),T||(s=S({src:s,async:!0,type:"module"},a),(a=bi.get(v))&&H1(s,a),T=d.createElement("script"),Yt(T),hs(T,"link",s),d.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(v,T))}}function b2(s,a,d,m){var v=(v=Ee.current)?Df(v):null;if(!v)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(a=Xl(d.href),d=Oi(v).hoistableStyles,m=d.get(a),m||(m={type:"style",instance:null,count:0,state:null},d.set(a,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=Xl(d.href);var T=Oi(v).hoistableStyles,D=T.get(s);if(D||(v=v.ownerDocument||v,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(s,D),(T=v.querySelector(Su(s)))&&!T._p&&(D.instance=T,D.state.loading=5),bi.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},bi.set(s,d),T||IA(v,s,d,D.state))),a&&m===null)throw Error(r(528,""));return D}if(a&&m!==null)throw Error(r(529,""));return null;case"script":return a=d.async,d=d.src,typeof d=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Wl(d),d=Oi(v).hoistableScripts,m=d.get(a),m||(m={type:"script",instance:null,count:0,state:null},d.set(a,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Xl(s){return'href="'+Gn(s)+'"'}function Su(s){return'link[rel="stylesheet"]['+s+"]"}function w2(s){return S({},s,{"data-precedence":s.precedence,precedence:null})}function IA(s,a,d,m){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?m.loading=1:(a=s.createElement("link"),m.preload=a,a.addEventListener("load",function(){return m.loading|=1}),a.addEventListener("error",function(){return m.loading|=2}),hs(a,"link",d),Yt(a),s.head.appendChild(a))}function Wl(s){return'[src="'+Gn(s)+'"]'}function Eu(s){return"script[async]"+s}function v2(s,a,d){if(a.count++,a.instance===null)switch(a.type){case"style":var m=s.querySelector('style[data-href~="'+Gn(d.href)+'"]');if(m)return a.instance=m,Yt(m),m;var v=S({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),Yt(m),hs(m,"style",v),kf(m,d.precedence,s),a.instance=m;case"stylesheet":v=Xl(d.href);var T=s.querySelector(Su(v));if(T)return a.state.loading|=4,a.instance=T,Yt(T),T;m=w2(d),(v=bi.get(v))&&V1(m,v),T=(s.ownerDocument||s).createElement("link"),Yt(T);var D=T;return D._p=new Promise(function(F,K){D.onload=F,D.onerror=K}),hs(T,"link",m),a.state.loading|=4,kf(T,d.precedence,s),a.instance=T;case"script":return T=Wl(d.src),(v=s.querySelector(Eu(T)))?(a.instance=v,Yt(v),v):(m=d,(v=bi.get(T))&&(m=S({},d),H1(m,v)),s=s.ownerDocument||s,v=s.createElement("script"),Yt(v),hs(v,"link",m),s.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(m=a.instance,a.state.loading|=4,kf(m,d.precedence,s));return a.instance}function kf(s,a,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,T=v,D=0;D<m.length;D++){var F=m[D];if(F.dataset.precedence===a)T=F;else if(T!==v)break}T?T.parentNode.insertBefore(s,T.nextSibling):(a=d.nodeType===9?d.head:d,a.insertBefore(s,a.firstChild))}function V1(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function H1(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Lf=null;function S2(s,a,d){if(Lf===null){var m=new Map,v=Lf=new Map;v.set(d,m)}else v=Lf,m=v.get(d),m||(m=new Map,v.set(d,m));if(m.has(s))return m;for(m.set(s,null),d=d.getElementsByTagName(s),v=0;v<d.length;v++){var T=d[v];if(!(T[di]||T[es]||s==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var D=T.getAttribute(a)||"";D=s+D;var F=m.get(D);F?F.push(T):m.set(D,[T])}}return m}function E2(s,a,d){s=s.ownerDocument||s,s.head.insertBefore(d,a==="title"?s.querySelector("head > title"):null)}function MA(s,a,d){if(d===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function C2(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Cu=null;function DA(){}function kA(s,a,d){if(Cu===null)throw Error(r(475));var m=Cu;if(a.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var v=Xl(d.href),T=s.querySelector(Su(v));if(T){s=T._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(m.count++,m=jf.bind(m),s.then(m,m)),a.state.loading|=4,a.instance=T,Yt(T);return}T=s.ownerDocument||s,d=w2(d),(v=bi.get(v))&&V1(d,v),T=T.createElement("link"),Yt(T);var D=T;D._p=new Promise(function(F,K){D.onload=F,D.onerror=K}),hs(T,"link",d),a.instance=T}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(m.count++,a=jf.bind(m),s.addEventListener("load",a),s.addEventListener("error",a))}}function LA(){if(Cu===null)throw Error(r(475));var s=Cu;return s.stylesheets&&s.count===0&&z1(s,s.stylesheets),0<s.count?function(a){var d=setTimeout(function(){if(s.stylesheets&&z1(s,s.stylesheets),s.unsuspend){var m=s.unsuspend;s.unsuspend=null,m()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(d)}}:null}function jf(){if(this.count--,this.count===0){if(this.stylesheets)z1(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Pf=null;function z1(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Pf=new Map,a.forEach(jA,s),Pf=null,jf.call(s))}function jA(s,a){if(!(a.state.loading&4)){var d=Pf.get(s);if(d)var m=d.get(null);else{d=new Map,Pf.set(s,d);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<v.length;T++){var D=v[T];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(d.set(D.dataset.precedence,D),m=D)}m&&d.set(null,m)}v=a.instance,D=v.getAttribute("data-precedence"),T=d.get(D)||m,T===m&&d.set(null,v),d.set(D,v),this.count++,m=jf.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),T?T.parentNode.insertBefore(v,T.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),a.state.loading|=4}}var Au={$$typeof:P,Provider:null,Consumer:null,_currentValue:De,_currentValue2:De,_threadCount:0};function PA(s,a,d,m,v,T,D,F){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tt(0),this.hiddenUpdates=Tt(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=T,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function A2(s,a,d,m,v,T,D,F,K,he,Ce,_e){return s=new PA(s,a,d,D,F,K,he,_e),a=1,T===!0&&(a|=24),T=ei(3,null,null,a),s.current=T,T.stateNode=s,a=C0(),a.refCount++,s.pooledCache=a,a.refCount++,T.memoizedState={element:m,isDehydrated:d,cache:a},N0(T),s}function T2(s){return s?(s=Tl,s):Tl}function _2(s,a,d,m,v,T){v=T2(v),m.context===null?m.context=v:m.pendingContext=v,m=ba(a),m.payload={element:d},T=T===void 0?null:T,T!==null&&(m.callback=T),d=wa(s,m,a),d!==null&&(ri(d,s,a),tu(d,s,a))}function N2(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<a?d:a}}function $1(s,a){N2(s,a),(s=s.alternate)&&N2(s,a)}function R2(s){if(s.tag===13){var a=Al(s,67108864);a!==null&&ri(a,s,67108864),$1(s,67108864)}}var Bf=!0;function BA(s,a,d,m){var v=re.T;re.T=null;var T=le.p;try{le.p=2,G1(s,a,d,m)}finally{le.p=T,re.T=v}}function UA(s,a,d,m){var v=re.T;re.T=null;var T=le.p;try{le.p=8,G1(s,a,d,m)}finally{le.p=T,re.T=v}}function G1(s,a,d,m){if(Bf){var v=q1(m);if(v===null)M1(s,a,m,Uf,d),I2(s,m);else if(VA(v,s,a,d,m))m.stopPropagation();else if(I2(s,m),a&4&&-1<FA.indexOf(s)){for(;v!==null;){var T=Zs(v);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var D=kt(T.pendingLanes);if(D!==0){var F=T;for(F.pendingLanes|=2,F.entangledLanes|=2;D;){var K=1<<31-tt(D);F.entanglements[1]|=K,D&=~K}dr(T),(Kt&6)===0&&(Sf=We()+500,yu(0))}}break;case 13:F=Al(T,2),F!==null&&ri(F,T,2),Cf(),$1(T,2)}if(T=q1(m),T===null&&M1(s,a,m,Uf,d),T===v)break;v=T}v!==null&&m.stopPropagation()}else M1(s,a,m,null,d)}}function q1(s){return s=aa(s),Y1(s)}var Uf=null;function Y1(s){if(Uf=null,s=Rn(s),s!==null){var a=u(s);if(a===null)s=null;else{var d=a.tag;if(d===13){if(s=h(a),s!==null)return s;s=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Uf=s,null}function O2(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(st()){case Ge:return 2;case vt:return 8;case He:case ui:return 32;case Yi:return 268435456;default:return 32}default:return 32}}var X1=!1,Da=null,ka=null,La=null,Tu=new Map,_u=new Map,ja=[],FA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function I2(s,a){switch(s){case"focusin":case"focusout":Da=null;break;case"dragenter":case"dragleave":ka=null;break;case"mouseover":case"mouseout":La=null;break;case"pointerover":case"pointerout":Tu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":_u.delete(a.pointerId)}}function Nu(s,a,d,m,v,T){return s===null||s.nativeEvent!==T?(s={blockedOn:a,domEventName:d,eventSystemFlags:m,nativeEvent:T,targetContainers:[v]},a!==null&&(a=Zs(a),a!==null&&R2(a)),s):(s.eventSystemFlags|=m,a=s.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),s)}function VA(s,a,d,m,v){switch(a){case"focusin":return Da=Nu(Da,s,a,d,m,v),!0;case"dragenter":return ka=Nu(ka,s,a,d,m,v),!0;case"mouseover":return La=Nu(La,s,a,d,m,v),!0;case"pointerover":var T=v.pointerId;return Tu.set(T,Nu(Tu.get(T)||null,s,a,d,m,v)),!0;case"gotpointercapture":return T=v.pointerId,_u.set(T,Nu(_u.get(T)||null,s,a,d,m,v)),!0}return!1}function M2(s){var a=Rn(s.target);if(a!==null){var d=u(a);if(d!==null){if(a=d.tag,a===13){if(a=h(d),a!==null){s.blockedOn=a,dl(s.priority,function(){if(d.tag===13){var m=ii();m=fo(m);var v=Al(d,m);v!==null&&ri(v,d,m),$1(d,m)}});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ff(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var d=q1(s.nativeEvent);if(d===null){d=s.nativeEvent;var m=new d.constructor(d.type,d);go=m,d.target.dispatchEvent(m),go=null}else return a=Zs(d),a!==null&&R2(a),s.blockedOn=d,!1;a.shift()}return!0}function D2(s,a,d){Ff(s)&&d.delete(a)}function HA(){X1=!1,Da!==null&&Ff(Da)&&(Da=null),ka!==null&&Ff(ka)&&(ka=null),La!==null&&Ff(La)&&(La=null),Tu.forEach(D2),_u.forEach(D2)}function Vf(s,a){s.blockedOn===a&&(s.blockedOn=null,X1||(X1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,HA)))}var Hf=null;function k2(s){Hf!==s&&(Hf=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Hf===s&&(Hf=null);for(var a=0;a<s.length;a+=3){var d=s[a],m=s[a+1],v=s[a+2];if(typeof m!="function"){if(Y1(m||d)===null)continue;break}var T=Zs(d);T!==null&&(s.splice(a,3),a-=3,Y0(T,{pending:!0,data:v,method:d.method,action:m},m,v))}}))}function Ru(s){function a(K){return Vf(K,s)}Da!==null&&Vf(Da,s),ka!==null&&Vf(ka,s),La!==null&&Vf(La,s),Tu.forEach(a),_u.forEach(a);for(var d=0;d<ja.length;d++){var m=ja[d];m.blockedOn===s&&(m.blockedOn=null)}for(;0<ja.length&&(d=ja[0],d.blockedOn===null);)M2(d),d.blockedOn===null&&ja.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var v=d[m],T=d[m+1],D=v[vn]||null;if(typeof T=="function")D||k2(d);else if(D){var F=null;if(T&&T.hasAttribute("formAction")){if(v=T,D=T[vn]||null)F=D.formAction;else if(Y1(v)!==null)continue}else F=D.action;typeof F=="function"?d[m+1]=F:(d.splice(m,3),m-=3),k2(d)}}}function W1(s){this._internalRoot=s}zf.prototype.render=W1.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var d=a.current,m=ii();_2(d,m,s,a,null,null)},zf.prototype.unmount=W1.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;_2(s.current,2,null,s,null,null),Cf(),a[Xi]=null}};function zf(s){this._internalRoot=s}zf.prototype.unstable_scheduleHydration=function(s){if(s){var a=Er();s={blockedOn:null,target:s,priority:a};for(var d=0;d<ja.length&&a!==0&&a<ja[d].priority;d++);ja.splice(d,0,s),d===0&&M2(s)}};var L2=e.version;if(L2!=="19.1.0")throw Error(r(527,L2,"19.1.0"));le.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=b(a),s=s!==null?x(s):null,s=s===null?null:s.stateNode,s};var zA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:re,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$f.isDisabled&&$f.supportsFiber)try{Bn=$f.inject(zA),Ue=$f}catch{}}return Mu.createRoot=function(s,a){if(!l(s))throw Error(r(299));var d=!1,m="",v=Zx,T=Qx,D=Jx,F=null;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(D=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(F=a.unstable_transitionCallbacks)),a=A2(s,1,!1,null,null,d,m,v,T,D,F,null),s[Xi]=a.current,I1(s),new W1(a)},Mu.hydrateRoot=function(s,a,d){if(!l(s))throw Error(r(299));var m=!1,v="",T=Zx,D=Qx,F=Jx,K=null,he=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(D=d.onCaughtError),d.onRecoverableError!==void 0&&(F=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(K=d.unstable_transitionCallbacks),d.formState!==void 0&&(he=d.formState)),a=A2(s,1,!0,a,d??null,m,v,T,D,F,K,he),a.context=T2(null),d=a.current,m=ii(),m=fo(m),v=ba(m),v.callback=null,wa(d,v,m),d=m,a.current.lanes=d,Ks(a,d),dr(a),s[Xi]=a.current,I1(s),new zf(a)},Mu.version="19.1.0",Mu}var ub;function dO(){if(ub)return eg.exports;ub=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),eg.exports=uO(),eg.exports}var fO=dO(),Du={},db;function hO(){if(db)return Du;db=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.parse=h,Du.serialize=x;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,u=(()=>{const N=function(){};return N.prototype=Object.create(null),N})();function h(N,I){const M=new u,j=N.length;if(j<2)return M;const U=(I==null?void 0:I.decode)||S;let $=0;do{const Y=N.indexOf("=",$);if(Y===-1)break;const P=N.indexOf(";",$),V=P===-1?j:P;if(Y>V){$=N.lastIndexOf(";",Y-1)+1;continue}const z=y(N,$,Y),Z=b(N,Y,z),W=N.slice(z,Z);if(M[W]===void 0){let ae=y(N,Y+1,V),X=b(N,V,ae);const be=U(N.slice(ae,X));M[W]=be}$=V+1}while($<j);return M}function y(N,I,M){do{const j=N.charCodeAt(I);if(j!==32&&j!==9)return I}while(++I<M);return M}function b(N,I,M){for(;I>M;){const j=N.charCodeAt(--I);if(j!==32&&j!==9)return I+1}return M}function x(N,I,M){const j=(M==null?void 0:M.encode)||encodeURIComponent;if(!t.test(N))throw new TypeError(`argument name is invalid: ${N}`);const U=j(I);if(!e.test(U))throw new TypeError(`argument val is invalid: ${I}`);let $=N+"="+U;if(!M)return $;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);$+="; Max-Age="+M.maxAge}if(M.domain){if(!n.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);$+="; Domain="+M.domain}if(M.path){if(!r.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);$+="; Path="+M.path}if(M.expires){if(!A(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);$+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&($+="; HttpOnly"),M.secure&&($+="; Secure"),M.partitioned&&($+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":$+="; Priority=Low";break;case"medium":$+="; Priority=Medium";break;case"high":$+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":$+="; SameSite=Strict";break;case"lax":$+="; SameSite=Lax";break;case"none":$+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return $}function S(N){if(N.indexOf("%")===-1)return N;try{return decodeURIComponent(N)}catch{return N}}function A(N){return l.call(N)==="[object Date]"}return Du}hO();var fb="popstate";function gO(t={}){function e(l,u){let{pathname:h="/",search:y="",hash:b=""}=ll(l.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Bg("",{pathname:h,search:y,hash:b},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(l,u){let h=l.document.querySelector("base"),y="";if(h&&h.getAttribute("href")){let b=l.location.href,x=b.indexOf("#");y=x===-1?b:b.slice(0,x)}return y+"#"+(typeof u=="string"?u:cd(u))}function r(l,u){Ti(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return pO(e,n,r,t)}function pn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ti(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mO(){return Math.random().toString(36).substring(2,10)}function hb(t,e){return{usr:t.state,key:t.key,idx:e}}function Bg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ll(e):e,state:n,key:e&&e.key||r||mO()}}function cd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ll(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function pO(t,e,n,r={}){let{window:l=document.defaultView,v5Compat:u=!1}=r,h=l.history,y="POP",b=null,x=S();x==null&&(x=0,h.replaceState({...h.state,idx:x},""));function S(){return(h.state||{idx:null}).idx}function A(){y="POP";let U=S(),$=U==null?null:U-x;x=U,b&&b({action:y,location:j.location,delta:$})}function N(U,$){y="PUSH";let Y=Bg(j.location,U,$);n&&n(Y,U),x=S()+1;let P=hb(Y,x),V=j.createHref(Y);try{h.pushState(P,"",V)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;l.location.assign(V)}u&&b&&b({action:y,location:j.location,delta:1})}function I(U,$){y="REPLACE";let Y=Bg(j.location,U,$);n&&n(Y,U),x=S();let P=hb(Y,x),V=j.createHref(Y);h.replaceState(P,"",V),u&&b&&b({action:y,location:j.location,delta:0})}function M(U){return xO(U)}let j={get action(){return y},get location(){return t(l,h)},listen(U){if(b)throw new Error("A history only accepts one active listener");return l.addEventListener(fb,A),b=U,()=>{l.removeEventListener(fb,A),b=null}},createHref(U){return e(l,U)},createURL:M,encodeLocation(U){let $=M(U);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:N,replace:I,go(U){return h.go(U)}};return j}function xO(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),pn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:cd(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function x3(t,e,n="/"){return yO(t,e,n,!1)}function yO(t,e,n,r){let l=typeof e=="string"?ll(e):e,u=Jr(l.pathname||"/",n);if(u==null)return null;let h=y3(t);bO(h);let y=null;for(let b=0;y==null&&b<h.length;++b){let x=OO(u);y=NO(h[b],x,r)}return y}function y3(t,e=[],n=[],r=""){let l=(u,h,y)=>{let b={relativePath:y===void 0?u.path||"":y,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};b.relativePath.startsWith("/")&&(pn(b.relativePath.startsWith(r),`Absolute route path "${b.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(r.length));let x=Kr([r,b.relativePath]),S=n.concat(b);u.children&&u.children.length>0&&(pn(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),y3(u.children,e,S,x)),!(u.path==null&&!u.index)&&e.push({path:x,score:TO(x,u.index),routesMeta:S})};return t.forEach((u,h)=>{var y;if(u.path===""||!((y=u.path)!=null&&y.includes("?")))l(u,h);else for(let b of b3(u.path))l(u,h,b)}),e}function b3(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(r.length===0)return l?[u,""]:[u];let h=b3(r.join("/")),y=[];return y.push(...h.map(b=>b===""?u:[u,b].join("/"))),l&&y.push(...h),y.map(b=>t.startsWith("/")&&b===""?"/":b)}function bO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_O(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var wO=/^:[\w-]+$/,vO=3,SO=2,EO=1,CO=10,AO=-2,gb=t=>t==="*";function TO(t,e){let n=t.split("/"),r=n.length;return n.some(gb)&&(r+=AO),e&&(r+=SO),n.filter(l=>!gb(l)).reduce((l,u)=>l+(wO.test(u)?vO:u===""?EO:CO),r)}function _O(t,e){return t.length===e.length&&t.slice(0,-1).every((r,l)=>r===e[l])?t[t.length-1]-e[e.length-1]:0}function NO(t,e,n=!1){let{routesMeta:r}=t,l={},u="/",h=[];for(let y=0;y<r.length;++y){let b=r[y],x=y===r.length-1,S=u==="/"?e:e.slice(u.length)||"/",A=wh({path:b.relativePath,caseSensitive:b.caseSensitive,end:x},S),N=b.route;if(!A&&x&&n&&!r[r.length-1].route.index&&(A=wh({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},S)),!A)return null;Object.assign(l,A.params),h.push({params:l,pathname:Kr([u,A.pathname]),pathnameBase:kO(Kr([u,A.pathnameBase])),route:N}),A.pathnameBase!=="/"&&(u=Kr([u,A.pathnameBase]))}return h}function wh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=RO(t.path,t.caseSensitive,t.end),l=e.match(n);if(!l)return null;let u=l[0],h=u.replace(/(.)\/+$/,"$1"),y=l.slice(1);return{params:r.reduce((x,{paramName:S,isOptional:A},N)=>{if(S==="*"){let M=y[N]||"";h=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const I=y[N];return A&&!I?x[S]=void 0:x[S]=(I||"").replace(/%2F/g,"/"),x},{}),pathname:u,pathnameBase:h,pattern:t}}function RO(t,e=!1,n=!0){Ti(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,y,b)=>(r.push({paramName:y,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),r]}function OO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ti(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Jr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function IO(t,e="/"){let{pathname:n,search:r="",hash:l=""}=typeof t=="string"?ll(t):t;return{pathname:n?n.startsWith("/")?n:MO(n,e):e,search:LO(r),hash:jO(l)}}function MO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function ig(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Pm(t){let e=DO(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Bm(t,e,n,r=!1){let l;typeof t=="string"?l=ll(t):(l={...t},pn(!l.pathname||!l.pathname.includes("?"),ig("?","pathname","search",l)),pn(!l.pathname||!l.pathname.includes("#"),ig("#","pathname","hash",l)),pn(!l.search||!l.search.includes("#"),ig("#","search","hash",l)));let u=t===""||l.pathname==="",h=u?"/":l.pathname,y;if(h==null)y=n;else{let A=e.length-1;if(!r&&h.startsWith("..")){let N=h.split("/");for(;N[0]==="..";)N.shift(),A-=1;l.pathname=N.join("/")}y=A>=0?e[A]:"/"}let b=IO(l,y),x=h&&h!=="/"&&h.endsWith("/"),S=(u||h===".")&&n.endsWith("/");return!b.pathname.endsWith("/")&&(x||S)&&(b.pathname+="/"),b}var Kr=t=>t.join("/").replace(/\/\/+/g,"/"),kO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),LO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,jO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function PO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var w3=["POST","PUT","PATCH","DELETE"];new Set(w3);var BO=["GET",...w3];new Set(BO);var Rc=R.createContext(null);Rc.displayName="DataRouter";var Fh=R.createContext(null);Fh.displayName="DataRouterState";var v3=R.createContext({isTransitioning:!1});v3.displayName="ViewTransition";var UO=R.createContext(new Map);UO.displayName="Fetchers";var FO=R.createContext(null);FO.displayName="Await";var qi=R.createContext(null);qi.displayName="Navigation";var Ed=R.createContext(null);Ed.displayName="Location";var _i=R.createContext({outlet:null,matches:[],isDataRoute:!1});_i.displayName="Route";var Um=R.createContext(null);Um.displayName="RouteError";function VO(t,{relative:e}={}){pn(Oc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(qi),{hash:l,pathname:u,search:h}=Cd(t,{relative:e}),y=u;return n!=="/"&&(y=u==="/"?n:Kr([n,u])),r.createHref({pathname:y,search:h,hash:l})}function Oc(){return R.useContext(Ed)!=null}function vr(){return pn(Oc(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Ed).location}var S3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function E3(t){R.useContext(qi).static||R.useLayoutEffect(t)}function Ni(){let{isDataRoute:t}=R.useContext(_i);return t?sI():HO()}function HO(){pn(Oc(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(Rc),{basename:e,navigator:n}=R.useContext(qi),{matches:r}=R.useContext(_i),{pathname:l}=vr(),u=JSON.stringify(Pm(r)),h=R.useRef(!1);return E3(()=>{h.current=!0}),R.useCallback((b,x={})=>{if(Ti(h.current,S3),!h.current)return;if(typeof b=="number"){n.go(b);return}let S=Bm(b,JSON.parse(u),l,x.relative==="path");t==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:Kr([e,S.pathname])),(x.replace?n.replace:n.push)(S,x.state,x)},[e,n,u,l,t])}var zO=R.createContext(null);function $O(t){let e=R.useContext(_i).outlet;return e&&R.createElement(zO.Provider,{value:t},e)}function GO(){let{matches:t}=R.useContext(_i),e=t[t.length-1];return e?e.params:{}}function Cd(t,{relative:e}={}){let{matches:n}=R.useContext(_i),{pathname:r}=vr(),l=JSON.stringify(Pm(n));return R.useMemo(()=>Bm(t,JSON.parse(l),r,e==="path"),[t,l,r,e])}function qO(t,e){return C3(t,e)}function C3(t,e,n,r){var $;pn(Oc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=R.useContext(qi),{matches:u}=R.useContext(_i),h=u[u.length-1],y=h?h.params:{},b=h?h.pathname:"/",x=h?h.pathnameBase:"/",S=h&&h.route;{let Y=S&&S.path||"";A3(b,!S||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let A=vr(),N;if(e){let Y=typeof e=="string"?ll(e):e;pn(x==="/"||(($=Y.pathname)==null?void 0:$.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),N=Y}else N=A;let I=N.pathname||"/",M=I;if(x!=="/"){let Y=x.replace(/^\//,"").split("/");M="/"+I.replace(/^\//,"").split("/").slice(Y.length).join("/")}let j=x3(t,{pathname:M});Ti(S||j!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Ti(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=ZO(j&&j.map(Y=>Object.assign({},Y,{params:Object.assign({},y,Y.params),pathname:Kr([x,l.encodeLocation?l.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?x:Kr([x,l.encodeLocation?l.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),u,n,r);return e&&U?R.createElement(Ed.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},U):U}function YO(){let t=nI(),e=PO(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",t),h=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:u},"ErrorBoundary")," or"," ",R.createElement("code",{style:u},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:l},n):null,h)}var XO=R.createElement(YO,null),WO=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?R.createElement(_i.Provider,{value:this.props.routeContext},R.createElement(Um.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KO({routeContext:t,match:e,children:n}){let r=R.useContext(Rc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(_i.Provider,{value:t},n)}function ZO(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,u=n==null?void 0:n.errors;if(u!=null){let b=l.findIndex(x=>x.route.id&&(u==null?void 0:u[x.route.id])!==void 0);pn(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,b+1))}let h=!1,y=-1;if(n)for(let b=0;b<l.length;b++){let x=l[b];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(y=b),x.route.id){let{loaderData:S,errors:A}=n,N=x.route.loader&&!S.hasOwnProperty(x.route.id)&&(!A||A[x.route.id]===void 0);if(x.route.lazy||N){h=!0,y>=0?l=l.slice(0,y+1):l=[l[0]];break}}}return l.reduceRight((b,x,S)=>{let A,N=!1,I=null,M=null;n&&(A=u&&x.route.id?u[x.route.id]:void 0,I=x.route.errorElement||XO,h&&(y<0&&S===0?(A3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,M=null):y===S&&(N=!0,M=x.route.hydrateFallbackElement||null)));let j=e.concat(l.slice(0,S+1)),U=()=>{let $;return A?$=I:N?$=M:x.route.Component?$=R.createElement(x.route.Component,null):x.route.element?$=x.route.element:$=b,R.createElement(KO,{match:x,routeContext:{outlet:b,matches:j,isDataRoute:n!=null},children:$})};return n&&(x.route.ErrorBoundary||x.route.errorElement||S===0)?R.createElement(WO,{location:n.location,revalidation:n.revalidation,component:I,error:A,children:U(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):U()},null)}function Fm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QO(t){let e=R.useContext(Rc);return pn(e,Fm(t)),e}function JO(t){let e=R.useContext(Fh);return pn(e,Fm(t)),e}function eI(t){let e=R.useContext(_i);return pn(e,Fm(t)),e}function Vm(t){let e=eI(t),n=e.matches[e.matches.length-1];return pn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function tI(){return Vm("useRouteId")}function nI(){var r;let t=R.useContext(Um),e=JO("useRouteError"),n=Vm("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function sI(){let{router:t}=QO("useNavigate"),e=Vm("useNavigate"),n=R.useRef(!1);return E3(()=>{n.current=!0}),R.useCallback(async(l,u={})=>{Ti(n.current,S3),n.current&&(typeof l=="number"?t.navigate(l):await t.navigate(l,{fromRouteId:e,...u}))},[t,e])}var mb={};function A3(t,e,n){!e&&!mb[t]&&(mb[t]=!0,Ti(!1,n))}R.memo(iI);function iI({routes:t,future:e,state:n}){return C3(t,void 0,n,e)}function pb({to:t,replace:e,state:n,relative:r}){pn(Oc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=R.useContext(qi);Ti(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=R.useContext(_i),{pathname:h}=vr(),y=Ni(),b=Bm(t,Pm(u),h,r==="path"),x=JSON.stringify(b);return R.useEffect(()=>{y(JSON.parse(x),{replace:e,state:n,relative:r})},[y,x,r,e,n]),null}function rI(t){return $O(t.context)}function Ln(t){pn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aI({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:l,static:u=!1}){pn(!Oc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=t.replace(/^\/*/,"/"),y=R.useMemo(()=>({basename:h,navigator:l,static:u,future:{}}),[h,l,u]);typeof n=="string"&&(n=ll(n));let{pathname:b="/",search:x="",hash:S="",state:A=null,key:N="default"}=n,I=R.useMemo(()=>{let M=Jr(b,h);return M==null?null:{location:{pathname:M,search:x,hash:S,state:A,key:N},navigationType:r}},[h,b,x,S,A,N,r]);return Ti(I!=null,`<Router basename="${h}"> is not able to match the URL "${b}${x}${S}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:R.createElement(qi.Provider,{value:y},R.createElement(Ed.Provider,{children:e,value:I}))}function oI({children:t,location:e}){return qO(Ug(t),e)}function Ug(t,e=[]){let n=[];return R.Children.forEach(t,(r,l)=>{if(!R.isValidElement(r))return;let u=[...e,l];if(r.type===R.Fragment){n.push.apply(n,Ug(r.props.children,u));return}pn(r.type===Ln,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let h={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=Ug(r.props.children,u)),n.push(h)}),n}var uh="get",dh="application/x-www-form-urlencoded";function Vh(t){return t!=null&&typeof t.tagName=="string"}function lI(t){return Vh(t)&&t.tagName.toLowerCase()==="button"}function cI(t){return Vh(t)&&t.tagName.toLowerCase()==="form"}function uI(t){return Vh(t)&&t.tagName.toLowerCase()==="input"}function dI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fI(t,e){return t.button===0&&(!e||e==="_self")&&!dI(t)}var Xf=null;function hI(){if(Xf===null)try{new FormData(document.createElement("form"),0),Xf=!1}catch{Xf=!0}return Xf}var gI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rg(t){return t!=null&&!gI.has(t)?(Ti(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dh}"`),null):t}function mI(t,e){let n,r,l,u,h;if(cI(t)){let y=t.getAttribute("action");r=y?Jr(y,e):null,n=t.getAttribute("method")||uh,l=rg(t.getAttribute("enctype"))||dh,u=new FormData(t)}else if(lI(t)||uI(t)&&(t.type==="submit"||t.type==="image")){let y=t.form;if(y==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=t.getAttribute("formaction")||y.getAttribute("action");if(r=b?Jr(b,e):null,n=t.getAttribute("formmethod")||y.getAttribute("method")||uh,l=rg(t.getAttribute("formenctype"))||rg(y.getAttribute("enctype"))||dh,u=new FormData(y,t),!hI()){let{name:x,type:S,value:A}=t;if(S==="image"){let N=x?`${x}.`:"";u.append(`${N}x`,"0"),u.append(`${N}y`,"0")}else x&&u.append(x,A)}}else{if(Vh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=uh,r=null,l=dh,h=t}return u&&l==="text/plain"&&(h=u,u=void 0),{action:r,method:n.toLowerCase(),encType:l,formData:u,body:h}}function Hm(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function pI(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xI(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function yI(t,e,n){let r=await Promise.all(t.map(async l=>{let u=e.routes[l.route.id];if(u){let h=await pI(u,n);return h.links?h.links():[]}return[]}));return SI(r.flat(1).filter(xI).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function xb(t,e,n,r,l,u){let h=(b,x)=>n[x]?b.route.id!==n[x].route.id:!0,y=(b,x)=>{var S;return n[x].pathname!==b.pathname||((S=n[x].route.path)==null?void 0:S.endsWith("*"))&&n[x].params["*"]!==b.params["*"]};return u==="assets"?e.filter((b,x)=>h(b,x)||y(b,x)):u==="data"?e.filter((b,x)=>{var A;let S=r.routes[b.route.id];if(!S||!S.hasLoader)return!1;if(h(b,x)||y(b,x))return!0;if(b.route.shouldRevalidate){let N=b.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((A=n[0])==null?void 0:A.params)||{},nextUrl:new URL(t,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function bI(t,e,{includeHydrateFallback:n}={}){return wI(t.map(r=>{let l=e.routes[r.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function wI(t){return[...new Set(t)]}function vI(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function SI(t,e){let n=new Set;return new Set(e),t.reduce((r,l)=>{let u=JSON.stringify(vI(l));return n.has(u)||(n.add(u),r.push({key:u,link:l})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var EI=new Set([100,101,204,205]);function CI(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Jr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function T3(){let t=R.useContext(Rc);return Hm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function AI(){let t=R.useContext(Fh);return Hm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var zm=R.createContext(void 0);zm.displayName="FrameworkContext";function _3(){let t=R.useContext(zm);return Hm(t,"You must render this element inside a <HydratedRouter> element"),t}function TI(t,e){let n=R.useContext(zm),[r,l]=R.useState(!1),[u,h]=R.useState(!1),{onFocus:y,onBlur:b,onMouseEnter:x,onMouseLeave:S,onTouchStart:A}=e,N=R.useRef(null);R.useEffect(()=>{if(t==="render"&&h(!0),t==="viewport"){let j=$=>{$.forEach(Y=>{h(Y.isIntersecting)})},U=new IntersectionObserver(j,{threshold:.5});return N.current&&U.observe(N.current),()=>{U.disconnect()}}},[t]),R.useEffect(()=>{if(r){let j=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(j)}}},[r]);let I=()=>{l(!0)},M=()=>{l(!1),h(!1)};return n?t!=="intent"?[u,N,{}]:[u,N,{onFocus:ku(y,I),onBlur:ku(b,M),onMouseEnter:ku(x,I),onMouseLeave:ku(S,M),onTouchStart:ku(A,I)}]:[!1,N,{}]}function ku(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function _I({page:t,...e}){let{router:n}=T3(),r=R.useMemo(()=>x3(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?R.createElement(RI,{page:t,matches:r,...e}):null}function NI(t){let{manifest:e,routeModules:n}=_3(),[r,l]=R.useState([]);return R.useEffect(()=>{let u=!1;return yI(t,e,n).then(h=>{u||l(h)}),()=>{u=!0}},[t,e,n]),r}function RI({page:t,matches:e,...n}){let r=vr(),{manifest:l,routeModules:u}=_3(),{basename:h}=T3(),{loaderData:y,matches:b}=AI(),x=R.useMemo(()=>xb(t,e,b,l,r,"data"),[t,e,b,l,r]),S=R.useMemo(()=>xb(t,e,b,l,r,"assets"),[t,e,b,l,r]),A=R.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let M=new Set,j=!1;if(e.forEach($=>{var P;let Y=l.routes[$.route.id];!Y||!Y.hasLoader||(!x.some(V=>V.route.id===$.route.id)&&$.route.id in y&&((P=u[$.route.id])!=null&&P.shouldRevalidate)||Y.hasClientLoader?j=!0:M.add($.route.id))}),M.size===0)return[];let U=CI(t,h);return j&&M.size>0&&U.searchParams.set("_routes",e.filter($=>M.has($.route.id)).map($=>$.route.id).join(",")),[U.pathname+U.search]},[h,y,r,l,x,e,t,u]),N=R.useMemo(()=>bI(S,l),[S,l]),I=NI(S);return R.createElement(R.Fragment,null,A.map(M=>R.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),N.map(M=>R.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),I.map(({key:M,link:j})=>R.createElement("link",{key:M,...j})))}function OI(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var N3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{N3&&(window.__reactRouterVersion="7.6.3")}catch{}function II({basename:t,children:e,window:n}){let r=R.useRef();r.current==null&&(r.current=gO({window:n,v5Compat:!0}));let l=r.current,[u,h]=R.useState({action:l.action,location:l.location}),y=R.useCallback(b=>{R.startTransition(()=>h(b))},[h]);return R.useLayoutEffect(()=>l.listen(y),[l,y]),R.createElement(aI,{basename:t,children:e,location:u.location,navigationType:u.action,navigator:l})}var R3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vh=R.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:l,reloadDocument:u,replace:h,state:y,target:b,to:x,preventScrollReset:S,viewTransition:A,...N},I){let{basename:M}=R.useContext(qi),j=typeof x=="string"&&R3.test(x),U,$=!1;if(typeof x=="string"&&j&&(U=x,N3))try{let X=new URL(window.location.href),be=x.startsWith("//")?new URL(X.protocol+x):new URL(x),Ae=Jr(be.pathname,M);be.origin===X.origin&&Ae!=null?x=Ae+be.search+be.hash:$=!0}catch{Ti(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=VO(x,{relative:l}),[P,V,z]=TI(r,N),Z=LI(x,{replace:h,state:y,target:b,preventScrollReset:S,relative:l,viewTransition:A});function W(X){e&&e(X),X.defaultPrevented||Z(X)}let ae=R.createElement("a",{...N,...z,href:U||Y,onClick:$||u?e:W,ref:OI(I,V),target:b,"data-discover":!j&&n==="render"?"true":void 0});return P&&!j?R.createElement(R.Fragment,null,ae,R.createElement(_I,{page:Y})):ae});vh.displayName="Link";var MI=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:l=!1,style:u,to:h,viewTransition:y,children:b,...x},S){let A=Cd(h,{relative:x.relative}),N=vr(),I=R.useContext(Fh),{navigator:M,basename:j}=R.useContext(qi),U=I!=null&&FI(A)&&y===!0,$=M.encodeLocation?M.encodeLocation(A).pathname:A.pathname,Y=N.pathname,P=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;n||(Y=Y.toLowerCase(),P=P?P.toLowerCase():null,$=$.toLowerCase()),P&&j&&(P=Jr(P,j)||P);const V=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let z=Y===$||!l&&Y.startsWith($)&&Y.charAt(V)==="/",Z=P!=null&&(P===$||!l&&P.startsWith($)&&P.charAt($.length)==="/"),W={isActive:z,isPending:Z,isTransitioning:U},ae=z?e:void 0,X;typeof r=="function"?X=r(W):X=[r,z?"active":null,Z?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let be=typeof u=="function"?u(W):u;return R.createElement(vh,{...x,"aria-current":ae,className:X,ref:S,style:be,to:h,viewTransition:y},typeof b=="function"?b(W):b)});MI.displayName="NavLink";var DI=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:l,state:u,method:h=uh,action:y,onSubmit:b,relative:x,preventScrollReset:S,viewTransition:A,...N},I)=>{let M=BI(),j=UI(y,{relative:x}),U=h.toLowerCase()==="get"?"get":"post",$=typeof y=="string"&&R3.test(y),Y=P=>{if(b&&b(P),P.defaultPrevented)return;P.preventDefault();let V=P.nativeEvent.submitter,z=(V==null?void 0:V.getAttribute("formmethod"))||h;M(V||P.currentTarget,{fetcherKey:e,method:z,navigate:n,replace:l,state:u,relative:x,preventScrollReset:S,viewTransition:A})};return R.createElement("form",{ref:I,method:U,action:j,onSubmit:r?b:Y,...N,"data-discover":!$&&t==="render"?"true":void 0})});DI.displayName="Form";function kI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function O3(t){let e=R.useContext(Rc);return pn(e,kI(t)),e}function LI(t,{target:e,replace:n,state:r,preventScrollReset:l,relative:u,viewTransition:h}={}){let y=Ni(),b=vr(),x=Cd(t,{relative:u});return R.useCallback(S=>{if(fI(S,e)){S.preventDefault();let A=n!==void 0?n:cd(b)===cd(x);y(t,{replace:A,state:r,preventScrollReset:l,relative:u,viewTransition:h})}},[b,y,x,n,r,e,t,l,u,h])}var jI=0,PI=()=>`__${String(++jI)}__`;function BI(){let{router:t}=O3("useSubmit"),{basename:e}=R.useContext(qi),n=tI();return R.useCallback(async(r,l={})=>{let{action:u,method:h,encType:y,formData:b,body:x}=mI(r,e);if(l.navigate===!1){let S=l.fetcherKey||PI();await t.fetch(S,n,l.action||u,{preventScrollReset:l.preventScrollReset,formData:b,body:x,formMethod:l.method||h,formEncType:l.encType||y,flushSync:l.flushSync})}else await t.navigate(l.action||u,{preventScrollReset:l.preventScrollReset,formData:b,body:x,formMethod:l.method||h,formEncType:l.encType||y,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[t,e,n])}function UI(t,{relative:e}={}){let{basename:n}=R.useContext(qi),r=R.useContext(_i);pn(r,"useFormAction must be used inside a RouteContext");let[l]=r.matches.slice(-1),u={...Cd(t||".",{relative:e})},h=vr();if(t==null){u.search=h.search;let y=new URLSearchParams(u.search),b=y.getAll("index");if(b.some(S=>S==="")){y.delete("index"),b.filter(A=>A).forEach(A=>y.append("index",A));let S=y.toString();u.search=S?`?${S}`:""}}return(!t||t===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Kr([n,u.pathname])),cd(u)}function FI(t,e={}){let n=R.useContext(v3);pn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=O3("useViewTransitionState"),l=Cd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let u=Jr(n.currentLocation.pathname,r)||n.currentLocation.pathname,h=Jr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return wh(l.pathname,h)!=null||wh(l.pathname,u)!=null}[...EI];var VI=p3(),Ic=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},rl=typeof window>"u"||"Deno"in globalThis;function Ds(){}function HI(t,e){return typeof t=="function"?t(e):t}function Fg(t){return typeof t=="number"&&t>=0&&t!==1/0}function I3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function so(t,e){return typeof t=="function"?t(e):t}function $i(t,e){return typeof t=="function"?t(e):t}function yb(t,e){const{type:n="all",exact:r,fetchStatus:l,predicate:u,queryKey:h,stale:y}=t;if(h){if(r){if(e.queryHash!==$m(h,e.options))return!1}else if(!ud(e.queryKey,h))return!1}if(n!=="all"){const b=e.isActive();if(n==="active"&&!b||n==="inactive"&&b)return!1}return!(typeof y=="boolean"&&e.isStale()!==y||l&&l!==e.state.fetchStatus||u&&!u(e))}function bb(t,e){const{exact:n,status:r,predicate:l,mutationKey:u}=t;if(u){if(!e.options.mutationKey)return!1;if(n){if(al(e.options.mutationKey)!==al(u))return!1}else if(!ud(e.options.mutationKey,u))return!1}return!(r&&e.state.status!==r||l&&!l(e))}function $m(t,e){return((e==null?void 0:e.queryKeyHashFn)||al)(t)}function al(t){return JSON.stringify(t,(e,n)=>Vg(n)?Object.keys(n).sort().reduce((r,l)=>(r[l]=n[l],r),{}):n)}function ud(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ud(t[n],e[n])):!1}function M3(t,e){if(t===e)return t;const n=wb(t)&&wb(e);if(n||Vg(t)&&Vg(e)){const r=n?t:Object.keys(t),l=r.length,u=n?e:Object.keys(e),h=u.length,y=n?[]:{},b=new Set(r);let x=0;for(let S=0;S<h;S++){const A=n?S:u[S];(!n&&b.has(A)||n)&&t[A]===void 0&&e[A]===void 0?(y[A]=void 0,x++):(y[A]=M3(t[A],e[A]),y[A]===t[A]&&t[A]!==void 0&&x++)}return l===h&&x===l?t:y}return e}function Sh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function wb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Vg(t){if(!vb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!vb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function vb(t){return Object.prototype.toString.call(t)==="[object Object]"}function zI(t){return new Promise(e=>{setTimeout(e,t)})}function Hg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?M3(t,e):e}function $I(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function GI(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Gm=Symbol();function D3(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Gm?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function k3(t,e){return typeof t=="function"?t(...e):!!t}var qo,Ga,gc,e3,qI=(e3=class extends Ic{constructor(){super();rt(this,qo);rt(this,Ga);rt(this,gc);Ye(this,gc,e=>{if(!rl&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){J(this,Ga)||this.setEventListener(J(this,gc))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,Ga))==null||e.call(this),Ye(this,Ga,void 0))}setEventListener(e){var n;Ye(this,gc,e),(n=J(this,Ga))==null||n.call(this),Ye(this,Ga,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){J(this,qo)!==e&&(Ye(this,qo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof J(this,qo)=="boolean"?J(this,qo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},qo=new WeakMap,Ga=new WeakMap,gc=new WeakMap,e3),qm=new qI,mc,qa,pc,t3,YI=(t3=class extends Ic{constructor(){super();rt(this,mc,!0);rt(this,qa);rt(this,pc);Ye(this,pc,e=>{if(!rl&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){J(this,qa)||this.setEventListener(J(this,pc))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,qa))==null||e.call(this),Ye(this,qa,void 0))}setEventListener(e){var n;Ye(this,pc,e),(n=J(this,qa))==null||n.call(this),Ye(this,qa,e(this.setOnline.bind(this)))}setOnline(e){J(this,mc)!==e&&(Ye(this,mc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return J(this,mc)}},mc=new WeakMap,qa=new WeakMap,pc=new WeakMap,t3),Eh=new YI;function zg(){let t,e;const n=new Promise((l,u)=>{t=l,e=u});n.status="pending",n.catch(()=>{});function r(l){Object.assign(n,l),delete n.resolve,delete n.reject}return n.resolve=l=>{r({status:"fulfilled",value:l}),t(l)},n.reject=l=>{r({status:"rejected",reason:l}),e(l)},n}function XI(t){return Math.min(1e3*2**t,3e4)}function L3(t){return(t??"online")==="online"?Eh.isOnline():!0}var j3=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ag(t){return t instanceof j3}function P3(t){let e=!1,n=0,r=!1,l;const u=zg(),h=j=>{var U;r||(N(new j3(j)),(U=t.abort)==null||U.call(t))},y=()=>{e=!0},b=()=>{e=!1},x=()=>qm.isFocused()&&(t.networkMode==="always"||Eh.isOnline())&&t.canRun(),S=()=>L3(t.networkMode)&&t.canRun(),A=j=>{var U;r||(r=!0,(U=t.onSuccess)==null||U.call(t,j),l==null||l(),u.resolve(j))},N=j=>{var U;r||(r=!0,(U=t.onError)==null||U.call(t,j),l==null||l(),u.reject(j))},I=()=>new Promise(j=>{var U;l=$=>{(r||x())&&j($)},(U=t.onPause)==null||U.call(t)}).then(()=>{var j;l=void 0,r||(j=t.onContinue)==null||j.call(t)}),M=()=>{if(r)return;let j;const U=n===0?t.initialPromise:void 0;try{j=U??t.fn()}catch($){j=Promise.reject($)}Promise.resolve(j).then(A).catch($=>{var Z;if(r)return;const Y=t.retry??(rl?0:3),P=t.retryDelay??XI,V=typeof P=="function"?P(n,$):P,z=Y===!0||typeof Y=="number"&&n<Y||typeof Y=="function"&&Y(n,$);if(e||!z){N($);return}n++,(Z=t.onFail)==null||Z.call(t,n,$),zI(V).then(()=>x()?void 0:I()).then(()=>{e?N($):M()})})};return{promise:u,cancel:h,continue:()=>(l==null||l(),u),cancelRetry:y,continueRetry:b,canStart:S,start:()=>(S()?M():I().then(M),u)}}var WI=t=>setTimeout(t,0);function KI(){let t=[],e=0,n=y=>{y()},r=y=>{y()},l=WI;const u=y=>{e?t.push(y):l(()=>{n(y)})},h=()=>{const y=t;t=[],y.length&&l(()=>{r(()=>{y.forEach(b=>{n(b)})})})};return{batch:y=>{let b;e++;try{b=y()}finally{e--,e||h()}return b},batchCalls:y=>(...b)=>{u(()=>{y(...b)})},schedule:u,setNotifyFunction:y=>{n=y},setBatchNotifyFunction:y=>{r=y},setScheduler:y=>{l=y}}}var Qn=KI(),Yo,n3,B3=(n3=class{constructor(){rt(this,Yo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Fg(this.gcTime)&&Ye(this,Yo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(rl?1/0:5*60*1e3))}clearGcTimeout(){J(this,Yo)&&(clearTimeout(J(this,Yo)),Ye(this,Yo,void 0))}},Yo=new WeakMap,n3),xc,Xo,Ei,Wo,As,bd,Ko,Fi,zr,s3,ZI=(s3=class extends B3{constructor(e){super();rt(this,Fi);rt(this,xc);rt(this,Xo);rt(this,Ei);rt(this,Wo);rt(this,As);rt(this,bd);rt(this,Ko);Ye(this,Ko,!1),Ye(this,bd,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ye(this,Wo,e.client),Ye(this,Ei,J(this,Wo).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ye(this,xc,QI(this.options)),this.state=e.state??J(this,xc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=J(this,As))==null?void 0:e.promise}setOptions(e){this.options={...J(this,bd),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&J(this,Ei).remove(this)}setData(e,n){const r=Hg(this.state.data,e,this.options);return wt(this,Fi,zr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){wt(this,Fi,zr).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,l;const n=(r=J(this,As))==null?void 0:r.promise;return(l=J(this,As))==null||l.cancel(e),n?n.then(Ds).catch(Ds):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,xc))}isActive(){return this.observers.some(e=>$i(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Gm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>so(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!I3(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=J(this,As))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=J(this,As))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),J(this,Ei).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(J(this,As)&&(J(this,Ko)?J(this,As).cancel({revert:!0}):J(this,As).cancelRetry()),this.scheduleGc()),J(this,Ei).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||wt(this,Fi,zr).call(this,{type:"invalidate"})}fetch(e,n){var x,S,A;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(J(this,As))return J(this,As).continueRetry(),J(this,As).promise}if(e&&this.setOptions(e),!this.options.queryFn){const N=this.observers.find(I=>I.options.queryFn);N&&this.setOptions(N.options)}const r=new AbortController,l=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(Ye(this,Ko,!0),r.signal)})},u=()=>{const N=D3(this.options,n),M=(()=>{const j={client:J(this,Wo),queryKey:this.queryKey,meta:this.meta};return l(j),j})();return Ye(this,Ko,!1),this.options.persister?this.options.persister(N,M,this):N(M)},y=(()=>{const N={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:J(this,Wo),state:this.state,fetchFn:u};return l(N),N})();(x=this.options.behavior)==null||x.onFetch(y,this),Ye(this,Xo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((S=y.fetchOptions)==null?void 0:S.meta))&&wt(this,Fi,zr).call(this,{type:"fetch",meta:(A=y.fetchOptions)==null?void 0:A.meta});const b=N=>{var I,M,j,U;ag(N)&&N.silent||wt(this,Fi,zr).call(this,{type:"error",error:N}),ag(N)||((M=(I=J(this,Ei).config).onError)==null||M.call(I,N,this),(U=(j=J(this,Ei).config).onSettled)==null||U.call(j,this.state.data,N,this)),this.scheduleGc()};return Ye(this,As,P3({initialPromise:n==null?void 0:n.initialPromise,fn:y.fetchFn,abort:r.abort.bind(r),onSuccess:N=>{var I,M,j,U;if(N===void 0){b(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(N)}catch($){b($);return}(M=(I=J(this,Ei).config).onSuccess)==null||M.call(I,N,this),(U=(j=J(this,Ei).config).onSettled)==null||U.call(j,N,this.state.error,this),this.scheduleGc()},onError:b,onFail:(N,I)=>{wt(this,Fi,zr).call(this,{type:"failed",failureCount:N,error:I})},onPause:()=>{wt(this,Fi,zr).call(this,{type:"pause"})},onContinue:()=>{wt(this,Fi,zr).call(this,{type:"continue"})},retry:y.options.retry,retryDelay:y.options.retryDelay,networkMode:y.options.networkMode,canRun:()=>!0})),J(this,As).start()}},xc=new WeakMap,Xo=new WeakMap,Ei=new WeakMap,Wo=new WeakMap,As=new WeakMap,bd=new WeakMap,Ko=new WeakMap,Fi=new WeakSet,zr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...U3(r.data,this.options),fetchMeta:e.meta??null};case"success":return Ye(this,Xo,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const l=e.error;return ag(l)&&l.revert&&J(this,Xo)?{...J(this,Xo),fetchStatus:"idle"}:{...r,error:l,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Qn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),J(this,Ei).notify({query:this,type:"updated",action:e})})},s3);function U3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:L3(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function QI(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var gr,i3,JI=(i3=class extends Ic{constructor(e={}){super();rt(this,gr);this.config=e,Ye(this,gr,new Map)}build(e,n,r){const l=n.queryKey,u=n.queryHash??$m(l,n);let h=this.get(u);return h||(h=new ZI({client:e,queryKey:l,queryHash:u,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(l)}),this.add(h)),h}add(e){J(this,gr).has(e.queryHash)||(J(this,gr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=J(this,gr).get(e.queryHash);n&&(e.destroy(),n===e&&J(this,gr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Qn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return J(this,gr).get(e)}getAll(){return[...J(this,gr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>yb(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>yb(e,r)):n}notify(e){Qn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Qn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Qn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},gr=new WeakMap,i3),mr,Is,Zo,pr,Ua,r3,eM=(r3=class extends B3{constructor(e){super();rt(this,pr);rt(this,mr);rt(this,Is);rt(this,Zo);this.mutationId=e.mutationId,Ye(this,Is,e.mutationCache),Ye(this,mr,[]),this.state=e.state||F3(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){J(this,mr).includes(e)||(J(this,mr).push(e),this.clearGcTimeout(),J(this,Is).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ye(this,mr,J(this,mr).filter(n=>n!==e)),this.scheduleGc(),J(this,Is).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){J(this,mr).length||(this.state.status==="pending"?this.scheduleGc():J(this,Is).remove(this))}continue(){var e;return((e=J(this,Zo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var u,h,y,b,x,S,A,N,I,M,j,U,$,Y,P,V,z,Z,W,ae;const n=()=>{wt(this,pr,Ua).call(this,{type:"continue"})};Ye(this,Zo,P3({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(X,be)=>{wt(this,pr,Ua).call(this,{type:"failed",failureCount:X,error:be})},onPause:()=>{wt(this,pr,Ua).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,Is).canRun(this)}));const r=this.state.status==="pending",l=!J(this,Zo).canStart();try{if(r)n();else{wt(this,pr,Ua).call(this,{type:"pending",variables:e,isPaused:l}),await((h=(u=J(this,Is).config).onMutate)==null?void 0:h.call(u,e,this));const be=await((b=(y=this.options).onMutate)==null?void 0:b.call(y,e));be!==this.state.context&&wt(this,pr,Ua).call(this,{type:"pending",context:be,variables:e,isPaused:l})}const X=await J(this,Zo).start();return await((S=(x=J(this,Is).config).onSuccess)==null?void 0:S.call(x,X,e,this.state.context,this)),await((N=(A=this.options).onSuccess)==null?void 0:N.call(A,X,e,this.state.context)),await((M=(I=J(this,Is).config).onSettled)==null?void 0:M.call(I,X,null,this.state.variables,this.state.context,this)),await((U=(j=this.options).onSettled)==null?void 0:U.call(j,X,null,e,this.state.context)),wt(this,pr,Ua).call(this,{type:"success",data:X}),X}catch(X){try{throw await((Y=($=J(this,Is).config).onError)==null?void 0:Y.call($,X,e,this.state.context,this)),await((V=(P=this.options).onError)==null?void 0:V.call(P,X,e,this.state.context)),await((Z=(z=J(this,Is).config).onSettled)==null?void 0:Z.call(z,void 0,X,this.state.variables,this.state.context,this)),await((ae=(W=this.options).onSettled)==null?void 0:ae.call(W,void 0,X,e,this.state.context)),X}finally{wt(this,pr,Ua).call(this,{type:"error",error:X})}}finally{J(this,Is).runNext(this)}}},mr=new WeakMap,Is=new WeakMap,Zo=new WeakMap,pr=new WeakSet,Ua=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Qn.batch(()=>{J(this,mr).forEach(r=>{r.onMutationUpdate(e)}),J(this,Is).notify({mutation:this,type:"updated",action:e})})},r3);function F3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qr,Vi,wd,a3,tM=(a3=class extends Ic{constructor(e={}){super();rt(this,qr);rt(this,Vi);rt(this,wd);this.config=e,Ye(this,qr,new Set),Ye(this,Vi,new Map),Ye(this,wd,0)}build(e,n,r){const l=new eM({mutationCache:this,mutationId:++Gf(this,wd)._,options:e.defaultMutationOptions(n),state:r});return this.add(l),l}add(e){J(this,qr).add(e);const n=Wf(e);if(typeof n=="string"){const r=J(this,Vi).get(n);r?r.push(e):J(this,Vi).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(J(this,qr).delete(e)){const n=Wf(e);if(typeof n=="string"){const r=J(this,Vi).get(n);if(r)if(r.length>1){const l=r.indexOf(e);l!==-1&&r.splice(l,1)}else r[0]===e&&J(this,Vi).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Wf(e);if(typeof n=="string"){const r=J(this,Vi).get(n),l=r==null?void 0:r.find(u=>u.state.status==="pending");return!l||l===e}else return!0}runNext(e){var r;const n=Wf(e);if(typeof n=="string"){const l=(r=J(this,Vi).get(n))==null?void 0:r.find(u=>u!==e&&u.state.isPaused);return(l==null?void 0:l.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Qn.batch(()=>{J(this,qr).forEach(e=>{this.notify({type:"removed",mutation:e})}),J(this,qr).clear(),J(this,Vi).clear()})}getAll(){return Array.from(J(this,qr))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>bb(n,r))}findAll(e={}){return this.getAll().filter(n=>bb(e,n))}notify(e){Qn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Qn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ds))))}},qr=new WeakMap,Vi=new WeakMap,wd=new WeakMap,a3);function Wf(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Sb(t){return{onFetch:(e,n)=>{var S,A,N,I,M;const r=e.options,l=(N=(A=(S=e.fetchOptions)==null?void 0:S.meta)==null?void 0:A.fetchMore)==null?void 0:N.direction,u=((I=e.state.data)==null?void 0:I.pages)||[],h=((M=e.state.data)==null?void 0:M.pageParams)||[];let y={pages:[],pageParams:[]},b=0;const x=async()=>{let j=!1;const U=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(e.signal.aborted?j=!0:e.signal.addEventListener("abort",()=>{j=!0}),e.signal)})},$=D3(e.options,e.fetchOptions),Y=async(P,V,z)=>{if(j)return Promise.reject();if(V==null&&P.pages.length)return Promise.resolve(P);const W=(()=>{const Ae={client:e.client,queryKey:e.queryKey,pageParam:V,direction:z?"backward":"forward",meta:e.options.meta};return U(Ae),Ae})(),ae=await $(W),{maxPages:X}=e.options,be=z?GI:$I;return{pages:be(P.pages,ae,X),pageParams:be(P.pageParams,V,X)}};if(l&&u.length){const P=l==="backward",V=P?nM:Eb,z={pages:u,pageParams:h},Z=V(r,z);y=await Y(z,Z,P)}else{const P=t??u.length;do{const V=b===0?h[0]??r.initialPageParam:Eb(r,y);if(b>0&&V==null)break;y=await Y(y,V),b++}while(b<P)}return y};e.options.persister?e.fetchFn=()=>{var j,U;return(U=(j=e.options).persister)==null?void 0:U.call(j,x,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=x}}}function Eb(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function nM(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Tn,Ya,Xa,yc,bc,Wa,wc,vc,o3,sM=(o3=class{constructor(t={}){rt(this,Tn);rt(this,Ya);rt(this,Xa);rt(this,yc);rt(this,bc);rt(this,Wa);rt(this,wc);rt(this,vc);Ye(this,Tn,t.queryCache||new JI),Ye(this,Ya,t.mutationCache||new tM),Ye(this,Xa,t.defaultOptions||{}),Ye(this,yc,new Map),Ye(this,bc,new Map),Ye(this,Wa,0)}mount(){Gf(this,Wa)._++,J(this,Wa)===1&&(Ye(this,wc,qm.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,Tn).onFocus())})),Ye(this,vc,Eh.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,Tn).onOnline())})))}unmount(){var t,e;Gf(this,Wa)._--,J(this,Wa)===0&&((t=J(this,wc))==null||t.call(this),Ye(this,wc,void 0),(e=J(this,vc))==null||e.call(this),Ye(this,vc,void 0))}isFetching(t){return J(this,Tn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return J(this,Ya).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,Tn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=J(this,Tn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(so(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return J(this,Tn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),l=J(this,Tn).get(r.queryHash),u=l==null?void 0:l.state.data,h=HI(e,u);if(h!==void 0)return J(this,Tn).build(this,r).setData(h,{...n,manual:!0})}setQueriesData(t,e,n){return Qn.batch(()=>J(this,Tn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,Tn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=J(this,Tn);Qn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=J(this,Tn);return Qn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Qn.batch(()=>J(this,Tn).findAll(t).map(l=>l.cancel(n)));return Promise.all(r).then(Ds).catch(Ds)}invalidateQueries(t,e={}){return Qn.batch(()=>(J(this,Tn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Qn.batch(()=>J(this,Tn).findAll(t).filter(l=>!l.isDisabled()&&!l.isStatic()).map(l=>{let u=l.fetch(void 0,n);return n.throwOnError||(u=u.catch(Ds)),l.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(r).then(Ds)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=J(this,Tn).build(this,e);return n.isStaleByTime(so(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ds).catch(Ds)}fetchInfiniteQuery(t){return t.behavior=Sb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ds).catch(Ds)}ensureInfiniteQueryData(t){return t.behavior=Sb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Eh.isOnline()?J(this,Ya).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,Tn)}getMutationCache(){return J(this,Ya)}getDefaultOptions(){return J(this,Xa)}setDefaultOptions(t){Ye(this,Xa,t)}setQueryDefaults(t,e){J(this,yc).set(al(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...J(this,yc).values()],n={};return e.forEach(r=>{ud(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){J(this,bc).set(al(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...J(this,bc).values()],n={};return e.forEach(r=>{ud(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...J(this,Xa).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=$m(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Gm&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...J(this,Xa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){J(this,Tn).clear(),J(this,Ya).clear()}},Tn=new WeakMap,Ya=new WeakMap,Xa=new WeakMap,yc=new WeakMap,bc=new WeakMap,Wa=new WeakMap,wc=new WeakMap,vc=new WeakMap,o3),Gs,jt,vd,Ms,Qo,Sc,Ka,Za,Sd,Ec,Cc,Jo,el,Qa,Ac,qt,Uu,$g,Gg,qg,Yg,Xg,Wg,Kg,V3,l3,iM=(l3=class extends Ic{constructor(e,n){super();rt(this,qt);rt(this,Gs);rt(this,jt);rt(this,vd);rt(this,Ms);rt(this,Qo);rt(this,Sc);rt(this,Ka);rt(this,Za);rt(this,Sd);rt(this,Ec);rt(this,Cc);rt(this,Jo);rt(this,el);rt(this,Qa);rt(this,Ac,new Set);this.options=n,Ye(this,Gs,e),Ye(this,Za,null),Ye(this,Ka,zg()),this.options.experimental_prefetchInRender||J(this,Ka).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(J(this,jt).addObserver(this),Cb(J(this,jt),this.options)?wt(this,qt,Uu).call(this):this.updateResult(),wt(this,qt,Yg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Zg(J(this,jt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Zg(J(this,jt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,wt(this,qt,Xg).call(this),wt(this,qt,Wg).call(this),J(this,jt).removeObserver(this)}setOptions(e){const n=this.options,r=J(this,jt);if(this.options=J(this,Gs).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof $i(this.options.enabled,J(this,jt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");wt(this,qt,Kg).call(this),J(this,jt).setOptions(this.options),n._defaulted&&!Sh(this.options,n)&&J(this,Gs).getQueryCache().notify({type:"observerOptionsUpdated",query:J(this,jt),observer:this});const l=this.hasListeners();l&&Ab(J(this,jt),r,this.options,n)&&wt(this,qt,Uu).call(this),this.updateResult(),l&&(J(this,jt)!==r||$i(this.options.enabled,J(this,jt))!==$i(n.enabled,J(this,jt))||so(this.options.staleTime,J(this,jt))!==so(n.staleTime,J(this,jt)))&&wt(this,qt,$g).call(this);const u=wt(this,qt,Gg).call(this);l&&(J(this,jt)!==r||$i(this.options.enabled,J(this,jt))!==$i(n.enabled,J(this,jt))||u!==J(this,Qa))&&wt(this,qt,qg).call(this,u)}getOptimisticResult(e){const n=J(this,Gs).getQueryCache().build(J(this,Gs),e),r=this.createResult(n,e);return aM(this,r)&&(Ye(this,Ms,r),Ye(this,Sc,this.options),Ye(this,Qo,J(this,jt).state)),r}getCurrentResult(){return J(this,Ms)}trackResult(e,n){return new Proxy(e,{get:(r,l)=>(this.trackProp(l),n==null||n(l),Reflect.get(r,l))})}trackProp(e){J(this,Ac).add(e)}getCurrentQuery(){return J(this,jt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=J(this,Gs).defaultQueryOptions(e),r=J(this,Gs).getQueryCache().build(J(this,Gs),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return wt(this,qt,Uu).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),J(this,Ms)))}createResult(e,n){var X;const r=J(this,jt),l=this.options,u=J(this,Ms),h=J(this,Qo),y=J(this,Sc),x=e!==r?e.state:J(this,vd),{state:S}=e;let A={...S},N=!1,I;if(n._optimisticResults){const be=this.hasListeners(),Ae=!be&&Cb(e,n),ve=be&&Ab(e,r,n,l);(Ae||ve)&&(A={...A,...U3(S.data,e.options)}),n._optimisticResults==="isRestoring"&&(A.fetchStatus="idle")}let{error:M,errorUpdatedAt:j,status:U}=A;I=A.data;let $=!1;if(n.placeholderData!==void 0&&I===void 0&&U==="pending"){let be;u!=null&&u.isPlaceholderData&&n.placeholderData===(y==null?void 0:y.placeholderData)?(be=u.data,$=!0):be=typeof n.placeholderData=="function"?n.placeholderData((X=J(this,Cc))==null?void 0:X.state.data,J(this,Cc)):n.placeholderData,be!==void 0&&(U="success",I=Hg(u==null?void 0:u.data,be,n),N=!0)}if(n.select&&I!==void 0&&!$)if(u&&I===(h==null?void 0:h.data)&&n.select===J(this,Sd))I=J(this,Ec);else try{Ye(this,Sd,n.select),I=n.select(I),I=Hg(u==null?void 0:u.data,I,n),Ye(this,Ec,I),Ye(this,Za,null)}catch(be){Ye(this,Za,be)}J(this,Za)&&(M=J(this,Za),I=J(this,Ec),j=Date.now(),U="error");const Y=A.fetchStatus==="fetching",P=U==="pending",V=U==="error",z=P&&Y,Z=I!==void 0,ae={status:U,fetchStatus:A.fetchStatus,isPending:P,isSuccess:U==="success",isError:V,isInitialLoading:z,isLoading:z,data:I,dataUpdatedAt:A.dataUpdatedAt,error:M,errorUpdatedAt:j,failureCount:A.fetchFailureCount,failureReason:A.fetchFailureReason,errorUpdateCount:A.errorUpdateCount,isFetched:A.dataUpdateCount>0||A.errorUpdateCount>0,isFetchedAfterMount:A.dataUpdateCount>x.dataUpdateCount||A.errorUpdateCount>x.errorUpdateCount,isFetching:Y,isRefetching:Y&&!P,isLoadingError:V&&!Z,isPaused:A.fetchStatus==="paused",isPlaceholderData:N,isRefetchError:V&&Z,isStale:Ym(e,n),refetch:this.refetch,promise:J(this,Ka)};if(this.options.experimental_prefetchInRender){const be=ce=>{ae.status==="error"?ce.reject(ae.error):ae.data!==void 0&&ce.resolve(ae.data)},Ae=()=>{const ce=Ye(this,Ka,ae.promise=zg());be(ce)},ve=J(this,Ka);switch(ve.status){case"pending":e.queryHash===r.queryHash&&be(ve);break;case"fulfilled":(ae.status==="error"||ae.data!==ve.value)&&Ae();break;case"rejected":(ae.status!=="error"||ae.error!==ve.reason)&&Ae();break}}return ae}updateResult(){const e=J(this,Ms),n=this.createResult(J(this,jt),this.options);if(Ye(this,Qo,J(this,jt).state),Ye(this,Sc,this.options),J(this,Qo).data!==void 0&&Ye(this,Cc,J(this,jt)),Sh(n,e))return;Ye(this,Ms,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:l}=this.options,u=typeof l=="function"?l():l;if(u==="all"||!u&&!J(this,Ac).size)return!0;const h=new Set(u??J(this,Ac));return this.options.throwOnError&&h.add("error"),Object.keys(J(this,Ms)).some(y=>{const b=y;return J(this,Ms)[b]!==e[b]&&h.has(b)})};wt(this,qt,V3).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&wt(this,qt,Yg).call(this)}},Gs=new WeakMap,jt=new WeakMap,vd=new WeakMap,Ms=new WeakMap,Qo=new WeakMap,Sc=new WeakMap,Ka=new WeakMap,Za=new WeakMap,Sd=new WeakMap,Ec=new WeakMap,Cc=new WeakMap,Jo=new WeakMap,el=new WeakMap,Qa=new WeakMap,Ac=new WeakMap,qt=new WeakSet,Uu=function(e){wt(this,qt,Kg).call(this);let n=J(this,jt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Ds)),n},$g=function(){wt(this,qt,Xg).call(this);const e=so(this.options.staleTime,J(this,jt));if(rl||J(this,Ms).isStale||!Fg(e))return;const r=I3(J(this,Ms).dataUpdatedAt,e)+1;Ye(this,Jo,setTimeout(()=>{J(this,Ms).isStale||this.updateResult()},r))},Gg=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(J(this,jt)):this.options.refetchInterval)??!1},qg=function(e){wt(this,qt,Wg).call(this),Ye(this,Qa,e),!(rl||$i(this.options.enabled,J(this,jt))===!1||!Fg(J(this,Qa))||J(this,Qa)===0)&&Ye(this,el,setInterval(()=>{(this.options.refetchIntervalInBackground||qm.isFocused())&&wt(this,qt,Uu).call(this)},J(this,Qa)))},Yg=function(){wt(this,qt,$g).call(this),wt(this,qt,qg).call(this,wt(this,qt,Gg).call(this))},Xg=function(){J(this,Jo)&&(clearTimeout(J(this,Jo)),Ye(this,Jo,void 0))},Wg=function(){J(this,el)&&(clearInterval(J(this,el)),Ye(this,el,void 0))},Kg=function(){const e=J(this,Gs).getQueryCache().build(J(this,Gs),this.options);if(e===J(this,jt))return;const n=J(this,jt);Ye(this,jt,e),Ye(this,vd,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},V3=function(e){Qn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(J(this,Ms))}),J(this,Gs).getQueryCache().notify({query:J(this,jt),type:"observerResultsUpdated"})})},l3);function rM(t,e){return $i(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Cb(t,e){return rM(t,e)||t.state.data!==void 0&&Zg(t,e,e.refetchOnMount)}function Zg(t,e,n){if($i(e.enabled,t)!==!1&&so(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Ym(t,e)}return!1}function Ab(t,e,n,r){return(t!==e||$i(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Ym(t,n)}function Ym(t,e){return $i(e.enabled,t)!==!1&&t.isStaleByTime(so(e.staleTime,t))}function aM(t,e){return!Sh(t.getCurrentResult(),e)}var Ja,eo,qs,Yr,Qr,fh,Qg,c3,oM=(c3=class extends Ic{constructor(n,r){super();rt(this,Qr);rt(this,Ja);rt(this,eo);rt(this,qs);rt(this,Yr);Ye(this,Ja,n),this.setOptions(r),this.bindMethods(),wt(this,Qr,fh).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var l;const r=this.options;this.options=J(this,Ja).defaultMutationOptions(n),Sh(this.options,r)||J(this,Ja).getMutationCache().notify({type:"observerOptionsUpdated",mutation:J(this,qs),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&al(r.mutationKey)!==al(this.options.mutationKey)?this.reset():((l=J(this,qs))==null?void 0:l.state.status)==="pending"&&J(this,qs).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=J(this,qs))==null||n.removeObserver(this)}onMutationUpdate(n){wt(this,Qr,fh).call(this),wt(this,Qr,Qg).call(this,n)}getCurrentResult(){return J(this,eo)}reset(){var n;(n=J(this,qs))==null||n.removeObserver(this),Ye(this,qs,void 0),wt(this,Qr,fh).call(this),wt(this,Qr,Qg).call(this)}mutate(n,r){var l;return Ye(this,Yr,r),(l=J(this,qs))==null||l.removeObserver(this),Ye(this,qs,J(this,Ja).getMutationCache().build(J(this,Ja),this.options)),J(this,qs).addObserver(this),J(this,qs).execute(n)}},Ja=new WeakMap,eo=new WeakMap,qs=new WeakMap,Yr=new WeakMap,Qr=new WeakSet,fh=function(){var r;const n=((r=J(this,qs))==null?void 0:r.state)??F3();Ye(this,eo,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Qg=function(n){Qn.batch(()=>{var r,l,u,h,y,b,x,S;if(J(this,Yr)&&this.hasListeners()){const A=J(this,eo).variables,N=J(this,eo).context;(n==null?void 0:n.type)==="success"?((l=(r=J(this,Yr)).onSuccess)==null||l.call(r,n.data,A,N),(h=(u=J(this,Yr)).onSettled)==null||h.call(u,n.data,null,A,N)):(n==null?void 0:n.type)==="error"&&((b=(y=J(this,Yr)).onError)==null||b.call(y,n.error,A,N),(S=(x=J(this,Yr)).onSettled)==null||S.call(x,void 0,n.error,A,N))}this.listeners.forEach(A=>{A(J(this,eo))})})},c3),H3=R.createContext(void 0),Mc=t=>{const e=R.useContext(H3);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},lM=({client:t,children:e})=>(R.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),E.jsx(H3.Provider,{value:t,children:e})),z3=R.createContext(!1),cM=()=>R.useContext(z3);z3.Provider;function uM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var dM=R.createContext(uM()),fM=()=>R.useContext(dM),hM=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},gM=t=>{R.useEffect(()=>{t.clearReset()},[t])},mM=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:l})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(l&&t.data===void 0||k3(n,[t.error,r])),pM=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},xM=(t,e)=>t.isLoading&&t.isFetching&&!e,yM=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Tb=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function bM(t,e,n){var A,N,I,M,j;const r=cM(),l=fM(),u=Mc(),h=u.defaultQueryOptions(t);(N=(A=u.getDefaultOptions().queries)==null?void 0:A._experimental_beforeQuery)==null||N.call(A,h),h._optimisticResults=r?"isRestoring":"optimistic",pM(h),hM(h,l),gM(l);const y=!u.getQueryCache().get(h.queryHash),[b]=R.useState(()=>new e(u,h)),x=b.getOptimisticResult(h),S=!r&&t.subscribed!==!1;if(R.useSyncExternalStore(R.useCallback(U=>{const $=S?b.subscribe(Qn.batchCalls(U)):Ds;return b.updateResult(),$},[b,S]),()=>b.getCurrentResult(),()=>b.getCurrentResult()),R.useEffect(()=>{b.setOptions(h)},[h,b]),yM(h,x))throw Tb(h,b,l);if(mM({result:x,errorResetBoundary:l,throwOnError:h.throwOnError,query:u.getQueryCache().get(h.queryHash),suspense:h.suspense}))throw x.error;if((M=(I=u.getDefaultOptions().queries)==null?void 0:I._experimental_afterQuery)==null||M.call(I,h,x),h.experimental_prefetchInRender&&!rl&&xM(x,r)){const U=y?Tb(h,b,l):(j=u.getQueryCache().get(h.queryHash))==null?void 0:j.promise;U==null||U.catch(Ds).finally(()=>{b.updateResult()})}return h.notifyOnChangeProps?x:b.trackResult(x)}function cs(t,e){return bM(t,iM)}function _b(t,e){const n=Mc(),[r]=R.useState(()=>new oM(n,t));R.useEffect(()=>{r.setOptions(t)},[r,t]);const l=R.useSyncExternalStore(R.useCallback(h=>r.subscribe(Qn.batchCalls(h)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),u=R.useCallback((h,y)=>{r.mutate(h,y).catch(Ds)},[r]);if(l.error&&k3(r.options.throwOnError,[l.error]))throw l.error;return{...l,mutate:u,mutateAsync:l.mutate}}const wM="modulepreload",vM=function(t){return"/sms/"+t},Nb={},Ad=function(e,n,r){let l=Promise.resolve();if(n&&n.length>0){let h=function(x){return Promise.all(x.map(S=>Promise.resolve(S).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const y=document.querySelector("meta[property=csp-nonce]"),b=(y==null?void 0:y.nonce)||(y==null?void 0:y.getAttribute("nonce"));l=h(n.map(x=>{if(x=vM(x),x in Nb)return;Nb[x]=!0;const S=x.endsWith(".css"),A=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${A}`))return;const N=document.createElement("link");if(N.rel=S?"stylesheet":wM,S||(N.as="script"),N.crossOrigin="",N.href=x,b&&N.setAttribute("nonce",b),document.head.appendChild(N),S)return new Promise((I,M)=>{N.addEventListener("load",I),N.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${x}`)))})}))}function u(h){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=h,window.dispatchEvent(y),!y.defaultPrevented)throw h}return l.then(h=>{for(const y of h||[])y.status==="rejected"&&u(y.reason);return e().catch(u)})},SM=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ad(async()=>{const{default:r}=await Promise.resolve().then(()=>Dc);return{default:r}},[]).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Xm extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class EM extends Xm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Rb extends Xm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ob extends Xm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Jg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Jg||(Jg={}));var CM=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(S){try{x(r.next(S))}catch(A){h(A)}}function b(S){try{x(r.throw(S))}catch(A){h(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};class AM{constructor(e,{headers:n={},customFetch:r,region:l=Jg.Any}={}){this.url=e,this.headers=n,this.region=l,this.fetch=SM(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return CM(this,void 0,void 0,function*(){try{const{headers:l,method:u,body:h}=n;let y={},{region:b}=n;b||(b=this.region);const x=new URL(`${this.url}/${e}`);b&&b!=="any"&&(y["x-region"]=b,x.searchParams.set("forceFunctionRegion",b));let S;h&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",S=h):typeof h=="string"?(y["Content-Type"]="text/plain",S=h):typeof FormData<"u"&&h instanceof FormData?S=h:(y["Content-Type"]="application/json",S=JSON.stringify(h)));const A=yield this.fetch(x.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),l),body:S}).catch(j=>{throw new EM(j)}),N=A.headers.get("x-relay-error");if(N&&N==="true")throw new Rb(A);if(!A.ok)throw new Ob(A);let I=((r=A.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),M;return I==="application/json"?M=yield A.json():I==="application/octet-stream"?M=yield A.blob():I==="text/event-stream"?M=A:I==="multipart/form-data"?M=yield A.formData():M=yield A.text(),{data:M,error:null,response:A}}catch(l){return{data:null,error:l,response:l instanceof Ob||l instanceof Rb?l.context:void 0}}})}}var as={},Zl={},Ql={},Jl={},ec={},tc={},TM=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Tc=TM();const _M=Tc.fetch,$3=Tc.fetch.bind(Tc),G3=Tc.Headers,NM=Tc.Request,RM=Tc.Response,Dc=Object.freeze(Object.defineProperty({__proto__:null,Headers:G3,Request:NM,Response:RM,default:$3,fetch:_M},Symbol.toStringTag,{value:"Module"})),OM=GA(Dc);var Kf={},Ib;function q3(){if(Ib)return Kf;Ib=1,Object.defineProperty(Kf,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Kf.default=t,Kf}var Mb;function Y3(){if(Mb)return tc;Mb=1;var t=tc&&tc.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(tc,"__esModule",{value:!0});const e=t(OM),n=t(q3());class r{constructor(u){this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=u.headers,this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=u.shouldThrowOnError,this.signal=u.signal,this.isMaybeSingle=u.isMaybeSingle,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,h){return this.headers=Object.assign({},this.headers),this.headers[u]=h,this}then(u,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const y=this.fetch;let b=y(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async x=>{var S,A,N;let I=null,M=null,j=null,U=x.status,$=x.statusText;if(x.ok){if(this.method!=="HEAD"){const z=await x.text();z===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?M=z:M=JSON.parse(z))}const P=(S=this.headers.Prefer)===null||S===void 0?void 0:S.match(/count=(exact|planned|estimated)/),V=(A=x.headers.get("content-range"))===null||A===void 0?void 0:A.split("/");P&&V&&V.length>1&&(j=parseInt(V[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(M)&&(M.length>1?(I={code:"PGRST116",details:`Results contain ${M.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},M=null,j=null,U=406,$="Not Acceptable"):M.length===1?M=M[0]:M=null)}else{const P=await x.text();try{I=JSON.parse(P),Array.isArray(I)&&x.status===404&&(M=[],I=null,U=200,$="OK")}catch{x.status===404&&P===""?(U=204,$="No Content"):I={message:P}}if(I&&this.isMaybeSingle&&(!((N=I==null?void 0:I.details)===null||N===void 0)&&N.includes("0 rows"))&&(I=null,U=200,$="OK"),I&&this.shouldThrowOnError)throw new n.default(I)}return{error:I,data:M,count:j,status:U,statusText:$}});return this.shouldThrowOnError||(b=b.catch(x=>{var S,A,N;return{error:{message:`${(S=x==null?void 0:x.name)!==null&&S!==void 0?S:"FetchError"}: ${x==null?void 0:x.message}`,details:`${(A=x==null?void 0:x.stack)!==null&&A!==void 0?A:""}`,hint:"",code:`${(N=x==null?void 0:x.code)!==null&&N!==void 0?N:""}`},data:null,count:null,status:0,statusText:""}})),b.then(u,h)}returns(){return this}overrideTypes(){return this}}return tc.default=r,tc}var Db;function X3(){if(Db)return ec;Db=1;var t=ec&&ec.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ec,"__esModule",{value:!0});const e=t(Y3());class n extends e.default{select(l){let u=!1;const h=(l??"*").split("").map(y=>/\s/.test(y)&&!u?"":(y==='"'&&(u=!u),y)).join("");return this.url.searchParams.set("select",h),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(l,{ascending:u=!0,nullsFirst:h,foreignTable:y,referencedTable:b=y}={}){const x=b?`${b}.order`:"order",S=this.url.searchParams.get(x);return this.url.searchParams.set(x,`${S?`${S},`:""}${l}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:u,referencedTable:h=u}={}){const y=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(y,`${l}`),this}range(l,u,{foreignTable:h,referencedTable:y=h}={}){const b=typeof y>"u"?"offset":`${y}.offset`,x=typeof y>"u"?"limit":`${y}.limit`;return this.url.searchParams.set(b,`${l}`),this.url.searchParams.set(x,`${u-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:l=!1,verbose:u=!1,settings:h=!1,buffers:y=!1,wal:b=!1,format:x="text"}={}){var S;const A=[l?"analyze":null,u?"verbose":null,h?"settings":null,y?"buffers":null,b?"wal":null].filter(Boolean).join("|"),N=(S=this.headers.Accept)!==null&&S!==void 0?S:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${x}; for="${N}"; options=${A};`,x==="json"?this:this}rollback(){var l;return((l=this.headers.Prefer)!==null&&l!==void 0?l:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return ec.default=n,ec}var kb;function Wm(){if(kb)return Jl;kb=1;var t=Jl&&Jl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jl,"__esModule",{value:!0});const e=t(X3());class n extends e.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}in(l,u){const h=Array.from(new Set(u)).map(y=>typeof y=="string"&&new RegExp("[,()]").test(y)?`"${y}"`:`${y}`).join(",");return this.url.searchParams.append(l,`in.(${h})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:h,type:y}={}){let b="";y==="plain"?b="pl":y==="phrase"?b="ph":y==="websearch"&&(b="w");const x=h===void 0?"":`(${h})`;return this.url.searchParams.append(l,`${b}fts${x}.${u}`),this}match(l){return Object.entries(l).forEach(([u,h])=>{this.url.searchParams.append(u,`eq.${h}`)}),this}not(l,u,h){return this.url.searchParams.append(l,`not.${u}.${h}`),this}or(l,{foreignTable:u,referencedTable:h=u}={}){const y=h?`${h}.or`:"or";return this.url.searchParams.append(y,`(${l})`),this}filter(l,u,h){return this.url.searchParams.append(l,`${u}.${h}`),this}}return Jl.default=n,Jl}var Lb;function W3(){if(Lb)return Ql;Lb=1;var t=Ql&&Ql.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ql,"__esModule",{value:!0});const e=t(Wm());class n{constructor(l,{headers:u={},schema:h,fetch:y}){this.url=l,this.headers=u,this.schema=h,this.fetch=y}select(l,{head:u=!1,count:h}={}){const y=u?"HEAD":"GET";let b=!1;const x=(l??"*").split("").map(S=>/\s/.test(S)&&!b?"":(S==='"'&&(b=!b),S)).join("");return this.url.searchParams.set("select",x),h&&(this.headers.Prefer=`count=${h}`),new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(l,{count:u,defaultToNull:h=!0}={}){const y="POST",b=[];if(this.headers.Prefer&&b.push(this.headers.Prefer),u&&b.push(`count=${u}`),h||b.push("missing=default"),this.headers.Prefer=b.join(","),Array.isArray(l)){const x=l.reduce((S,A)=>S.concat(Object.keys(A)),[]);if(x.length>0){const S=[...new Set(x)].map(A=>`"${A}"`);this.url.searchParams.set("columns",S.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}upsert(l,{onConflict:u,ignoreDuplicates:h=!1,count:y,defaultToNull:b=!0}={}){const x="POST",S=[`resolution=${h?"ignore":"merge"}-duplicates`];if(u!==void 0&&this.url.searchParams.set("on_conflict",u),this.headers.Prefer&&S.push(this.headers.Prefer),y&&S.push(`count=${y}`),b||S.push("missing=default"),this.headers.Prefer=S.join(","),Array.isArray(l)){const A=l.reduce((N,I)=>N.concat(Object.keys(I)),[]);if(A.length>0){const N=[...new Set(A)].map(I=>`"${I}"`);this.url.searchParams.set("columns",N.join(","))}}return new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}update(l,{count:u}={}){const h="PATCH",y=[];return this.headers.Prefer&&y.push(this.headers.Prefer),u&&y.push(`count=${u}`),this.headers.Prefer=y.join(","),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}delete({count:l}={}){const u="DELETE",h=[];return l&&h.push(`count=${l}`),this.headers.Prefer&&h.unshift(this.headers.Prefer),this.headers.Prefer=h.join(","),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Ql.default=n,Ql}var Lu={},ju={},jb;function IM(){return jb||(jb=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.version=void 0,ju.version="0.0.0-automated"),ju}var Pb;function MM(){if(Pb)return Lu;Pb=1,Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.DEFAULT_HEADERS=void 0;const t=IM();return Lu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Lu}var Bb;function DM(){if(Bb)return Zl;Bb=1;var t=Zl&&Zl.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Zl,"__esModule",{value:!0});const e=t(W3()),n=t(Wm()),r=MM();class l{constructor(h,{headers:y={},schema:b,fetch:x}={}){this.url=h,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),y),this.schemaName=b,this.fetch=x}from(h){const y=new URL(`${this.url}/${h}`);return new e.default(y,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(h){return new l(this.url,{headers:this.headers,schema:h,fetch:this.fetch})}rpc(h,y={},{head:b=!1,get:x=!1,count:S}={}){let A;const N=new URL(`${this.url}/rpc/${h}`);let I;b||x?(A=b?"HEAD":"GET",Object.entries(y).filter(([j,U])=>U!==void 0).map(([j,U])=>[j,Array.isArray(U)?`{${U.join(",")}}`:`${U}`]).forEach(([j,U])=>{N.searchParams.append(j,U)})):(A="POST",I=y);const M=Object.assign({},this.headers);return S&&(M.Prefer=`count=${S}`),new n.default({method:A,url:N,headers:M,schema:this.schemaName,body:I,fetch:this.fetch,allowEmpty:!1})}}return Zl.default=l,Zl}var Ub;function kM(){if(Ub)return as;Ub=1;var t=as&&as.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(as,"__esModule",{value:!0}),as.PostgrestError=as.PostgrestBuilder=as.PostgrestTransformBuilder=as.PostgrestFilterBuilder=as.PostgrestQueryBuilder=as.PostgrestClient=void 0;const e=t(DM());as.PostgrestClient=e.default;const n=t(W3());as.PostgrestQueryBuilder=n.default;const r=t(Wm());as.PostgrestFilterBuilder=r.default;const l=t(X3());as.PostgrestTransformBuilder=l.default;const u=t(Y3());as.PostgrestBuilder=u.default;const h=t(q3());return as.PostgrestError=h.default,as.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:u.default,PostgrestError:h.default},as}var LM=kM();const jM=jm(LM),{PostgrestClient:PM,PostgrestQueryBuilder:iz,PostgrestFilterBuilder:rz,PostgrestTransformBuilder:az,PostgrestBuilder:oz,PostgrestError:lz}=jM;function BM(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const UM=BM(),FM="2.11.15",VM=`realtime-js/${FM}`,HM="1.0.0",K3=1e4,zM=1e3;var Ku;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ku||(Ku={}));var Cs;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Cs||(Cs={}));var Hi;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Hi||(Hi={}));var em;(function(t){t.websocket="websocket"})(em||(em={}));var Vo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Vo||(Vo={}));class $M{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const l=n.getUint8(1),u=n.getUint8(2);let h=this.HEADER_LENGTH+2;const y=r.decode(e.slice(h,h+l));h=h+l;const b=r.decode(e.slice(h,h+u));h=h+u;const x=JSON.parse(r.decode(e.slice(h,e.byteLength)));return{ref:null,topic:y,event:b,payload:x}}}class Z3{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ln;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ln||(ln={}));const Fb=(t,e,n={})=>{var r;const l=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((u,h)=>(u[h]=GM(h,t,e,l),u),{})},GM=(t,e,n,r)=>{const l=e.find(y=>y.name===t),u=l==null?void 0:l.type,h=n[t];return u&&!r.includes(u)?Q3(u,h):tm(h)},Q3=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return WM(e,n)}switch(t){case ln.bool:return qM(e);case ln.float4:case ln.float8:case ln.int2:case ln.int4:case ln.int8:case ln.numeric:case ln.oid:return YM(e);case ln.json:case ln.jsonb:return XM(e);case ln.timestamp:return KM(e);case ln.abstime:case ln.date:case ln.daterange:case ln.int4range:case ln.int8range:case ln.money:case ln.reltime:case ln.text:case ln.time:case ln.timestamptz:case ln.timetz:case ln.tsrange:case ln.tstzrange:return tm(e);default:return tm(e)}},tm=t=>t,qM=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},YM=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},XM=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},WM=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let u;const h=t.slice(1,n);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(y=>Q3(e,y))}return t},KM=t=>typeof t=="string"?t.replace(" ","T"):t,J3=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class og{constructor(e,n,r={},l=K3){this.channel=e,this.event=n,this.payload=r,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Vb;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Vb||(Vb={}));class Zu{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},l=>{const{onJoin:u,onLeave:h,onSync:y}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zu.syncState(this.state,l,u,h),this.pendingDiffs.forEach(b=>{this.state=Zu.syncDiff(this.state,b,u,h)}),this.pendingDiffs=[],y()}),this.channel._on(r.diff,{},l=>{const{onJoin:u,onLeave:h,onSync:y}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Zu.syncDiff(this.state,l,u,h),y())}),this.onJoin((l,u,h)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:h})}),this.onLeave((l,u,h)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,l){const u=this.cloneDeep(e),h=this.transformState(n),y={},b={};return this.map(u,(x,S)=>{h[x]||(b[x]=S)}),this.map(h,(x,S)=>{const A=u[x];if(A){const N=S.map(U=>U.presence_ref),I=A.map(U=>U.presence_ref),M=S.filter(U=>I.indexOf(U.presence_ref)<0),j=A.filter(U=>N.indexOf(U.presence_ref)<0);M.length>0&&(y[x]=M),j.length>0&&(b[x]=j)}else y[x]=S}),this.syncDiff(u,{joins:y,leaves:b},r,l)}static syncDiff(e,n,r,l){const{joins:u,leaves:h}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),l||(l=()=>{}),this.map(u,(y,b)=>{var x;const S=(x=e[y])!==null&&x!==void 0?x:[];if(e[y]=this.cloneDeep(b),S.length>0){const A=e[y].map(I=>I.presence_ref),N=S.filter(I=>A.indexOf(I.presence_ref)<0);e[y].unshift(...N)}r(y,S,b)}),this.map(h,(y,b)=>{let x=e[y];if(!x)return;const S=b.map(A=>A.presence_ref);x=x.filter(A=>S.indexOf(A.presence_ref)<0),e[y]=x,l(y,x,b),x.length===0&&delete e[y]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const l=e[r];return"metas"in l?n[r]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[r]=l,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hb;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Hb||(Hb={}));var zb;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(zb||(zb={}));var Gr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Gr||(Gr={}));class Km{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Cs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new og(this,Hi.join,this.params,this.timeout),this.rejoinTimer=new Z3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Cs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Cs.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Cs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Cs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Hi.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Zu(this),this.broadcastEndpointURL=J3(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Cs.closed){const{config:{broadcast:u,presence:h,private:y}}=this.params;this._onError(S=>e==null?void 0:e(Gr.CHANNEL_ERROR,S)),this._onClose(()=>e==null?void 0:e(Gr.CLOSED));const b={},x={broadcast:u,presence:h,postgres_changes:(l=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(S=>S.filter))!==null&&l!==void 0?l:[],private:y};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:x},b)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var A;if(this.socket.setAuth(),S===void 0){e==null||e(Gr.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,I=(A=N==null?void 0:N.length)!==null&&A!==void 0?A:0,M=[];for(let j=0;j<I;j++){const U=N[j],{filter:{event:$,schema:Y,table:P,filter:V}}=U,z=S&&S[j];if(z&&z.event===$&&z.schema===Y&&z.table===P&&z.filter===V)M.push(Object.assign(Object.assign({},U),{id:z.id}));else{this.unsubscribe(),this.state=Cs.errored,e==null||e(Gr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,e&&e(Gr.SUBSCRIBED);return}}).receive("error",S=>{this.state=Cs.errored,e==null||e(Gr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Gr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,l;if(!this._canPush()&&e.type==="broadcast"){const{event:u,payload:h}=e,b={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((l=x.body)===null||l===void 0?void 0:l.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,y,b;const x=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((b=(y=(h=this.params)===null||h===void 0?void 0:h.config)===null||y===void 0?void 0:y.broadcast)===null||b===void 0)&&b.ack)&&u("ok"),x.receive("ok",()=>u("ok")),x.receive("error",()=>u("error")),x.receive("timeout",()=>u("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Cs.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Hi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(l=>{r=new og(this,Hi.leave,{},e),r.receive("ok",()=>{n(),l("ok")}).receive("timeout",()=>{n(),l("timed out")}).receive("error",()=>{l("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const l=new AbortController,u=setTimeout(()=>l.abort(),r),h=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:l.signal}));return clearTimeout(u),h}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new og(this,e,n,r);return this._canPush()?l.send():(l.startTimeout(),this.pushBuffer.push(l)),l}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var l,u;const h=e.toLocaleLowerCase(),{close:y,error:b,leave:x,join:S}=Hi;if(r&&[y,b,x,S].indexOf(h)>=0&&r!==this._joinRef())return;let N=this._onMessage(h,n,r);if(n&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(I=>{var M,j,U;return((M=I.filter)===null||M===void 0?void 0:M.event)==="*"||((U=(j=I.filter)===null||j===void 0?void 0:j.event)===null||U===void 0?void 0:U.toLocaleLowerCase())===h}).map(I=>I.callback(N,r)):(u=this.bindings[h])===null||u===void 0||u.filter(I=>{var M,j,U,$,Y,P;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in I){const V=I.id,z=(M=I.filter)===null||M===void 0?void 0:M.event;return V&&((j=n.ids)===null||j===void 0?void 0:j.includes(V))&&(z==="*"||(z==null?void 0:z.toLocaleLowerCase())===((U=n.data)===null||U===void 0?void 0:U.type.toLocaleLowerCase()))}else{const V=(Y=($=I==null?void 0:I.filter)===null||$===void 0?void 0:$.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase();return V==="*"||V===((P=n==null?void 0:n.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return I.type.toLocaleLowerCase()===h}).map(I=>{if(typeof N=="object"&&"ids"in N){const M=N.data,{schema:j,table:U,commit_timestamp:$,type:Y,errors:P}=M;N=Object.assign(Object.assign({},{schema:j,table:U,commit_timestamp:$,eventType:Y,new:{},old:{},errors:P}),this._getPayloadRecords(M))}I.callback(N,r)})}_isClosed(){return this.state===Cs.closed}_isJoined(){return this.state===Cs.joined}_isJoining(){return this.state===Cs.joining}_isLeaving(){return this.state===Cs.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const l=e.toLocaleLowerCase(),u={type:l,filter:n,callback:r};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===r&&Km.isEqual(l.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Hi.close,{},e)}_onError(e){this._on(Hi.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Cs.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Fb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Fb(e.columns,e.old_record)),n}}const $b=()=>{},ZM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class QM{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=K3,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$b,this.ref=0,this.logger=$b,this.conn=null,this.sendBuffer=[],this.serializer=new $M,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=u=>{let h;return u?h=u:typeof fetch>"u"?h=(...y)=>Ad(async()=>{const{default:b}=await Promise.resolve().then(()=>Dc);return{default:b}},void 0).then(({default:b})=>b(...y)):h=fetch,(...y)=>h(...y)},this.endPoint=`${e}/${em.websocket}`,this.httpEndpoint=J3(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const l=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(l&&(this.accessTokenValue=l,this.apiKey=l),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:u=>[1e3,2e3,5e3,1e4][u-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(u,h)=>h(JSON.stringify(u)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Z3(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=UM),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:HM}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ku.connecting:return Vo.Connecting;case Ku.open:return Vo.Open;case Ku.closing:return Vo.Closing;default:return Vo.Closed}}isConnected(){return this.connectionState()===Vo.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,l=this.getChannels().find(u=>u.topic===r);if(l)return l;{const u=new Km(`realtime:${e}`,n,this);return this.channels.push(u),u}}push(e){const{topic:n,event:r,payload:l,ref:u}=e,h=()=>{this.encode(e,y=>{var b;(b=this.conn)===null||b===void 0||b.send(y)})};this.log("push",`${n} ${r} (${u})`,l),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const l={access_token:n,version:VM};n&&r.updateJoinPayload(l),r.joinedOnce&&r._isJoined()&&r._push(Hi.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(zM,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:l,payload:u,ref:h}=n;r==="phoenix"&&l==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),h&&h===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${u.status||""} ${r} ${l} ${h&&"("+h+")"||""}`,u),Array.from(this.channels).filter(y=>y._isMember(r)).forEach(y=>y._trigger(l,u,h)),this.stateChangeCallbacks.message.forEach(y=>y(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Hi.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",l=new URLSearchParams(n);return`${e}${r}${l}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([ZM],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Zm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function os(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class JM extends Zm{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class nm extends Zm{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var eD=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(S){try{x(r.next(S))}catch(A){h(A)}}function b(S){try{x(r.throw(S))}catch(A){h(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};const eS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ad(async()=>{const{default:r}=await Promise.resolve().then(()=>Dc);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},tD=()=>eD(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ad(()=>Promise.resolve().then(()=>Dc),void 0)).Response:Response}),sm=t=>{if(Array.isArray(t))return t.map(n=>sm(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const l=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));e[l]=sm(r)}),e};var cl=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(S){try{x(r.next(S))}catch(A){h(A)}}function b(S){try{x(r.throw(S))}catch(A){h(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};const lg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),nD=(t,e,n)=>cl(void 0,void 0,void 0,function*(){const r=yield tD();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(l=>{e(new JM(lg(l),t.status||500))}).catch(l=>{e(new nm(lg(l),l))}):e(new nm(lg(t),t))}),sD=(t,e,n,r)=>{const l={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(l.body=JSON.stringify(r)),Object.assign(Object.assign({},l),n))};function Td(t,e,n,r,l,u){return cl(this,void 0,void 0,function*(){return new Promise((h,y)=>{t(n,sD(e,r,l,u)).then(b=>{if(!b.ok)throw b;return r!=null&&r.noResolveJson?b:b.json()}).then(b=>h(b)).catch(b=>nD(b,y,r))})})}function Ch(t,e,n,r){return cl(this,void 0,void 0,function*(){return Td(t,"GET",e,n,r)})}function Ha(t,e,n,r,l){return cl(this,void 0,void 0,function*(){return Td(t,"POST",e,r,l,n)})}function iD(t,e,n,r,l){return cl(this,void 0,void 0,function*(){return Td(t,"PUT",e,r,l,n)})}function rD(t,e,n,r){return cl(this,void 0,void 0,function*(){return Td(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function tS(t,e,n,r,l){return cl(this,void 0,void 0,function*(){return Td(t,"DELETE",e,r,l,n)})}var $s=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(S){try{x(r.next(S))}catch(A){h(A)}}function b(S){try{x(r.throw(S))}catch(A){h(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};const aD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class oD{constructor(e,n={},r,l){this.url=e,this.headers=n,this.bucketId=r,this.fetch=eS(l)}uploadOrUpdate(e,n,r,l){return $s(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},Gb),l);let y=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(h.upsert)});const b=h.metadata;typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),b&&u.append("metadata",this.encodeMetadata(b)),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",h.cacheControl),b&&u.append("metadata",this.encodeMetadata(b))):(u=r,y["cache-control"]=`max-age=${h.cacheControl}`,y["content-type"]=h.contentType,b&&(y["x-metadata"]=this.toBase64(this.encodeMetadata(b)))),l!=null&&l.headers&&(y=Object.assign(Object.assign({},y),l.headers));const x=this._removeEmptyFolders(n),S=this._getFinalPath(x),A=yield this.fetch(`${this.url}/object/${S}`,Object.assign({method:e,body:u,headers:y},h!=null&&h.duplex?{duplex:h.duplex}:{})),N=yield A.json();return A.ok?{data:{path:x,id:N.Id,fullPath:N.Key},error:null}:{data:null,error:N}}catch(u){if(os(u))return{data:null,error:u};throw u}})}upload(e,n,r){return $s(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,l){return $s(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(e),h=this._getFinalPath(u),y=new URL(this.url+`/object/upload/sign/${h}`);y.searchParams.set("token",n);try{let b;const x=Object.assign({upsert:Gb.upsert},l),S=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&r instanceof Blob?(b=new FormData,b.append("cacheControl",x.cacheControl),b.append("",r)):typeof FormData<"u"&&r instanceof FormData?(b=r,b.append("cacheControl",x.cacheControl)):(b=r,S["cache-control"]=`max-age=${x.cacheControl}`,S["content-type"]=x.contentType);const A=yield this.fetch(y.toString(),{method:"PUT",body:b,headers:S}),N=yield A.json();return A.ok?{data:{path:u,fullPath:N.Key},error:null}:{data:null,error:N}}catch(b){if(os(b))return{data:null,error:b};throw b}})}createSignedUploadUrl(e,n){return $s(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const l=Object.assign({},this.headers);n!=null&&n.upsert&&(l["x-upsert"]="true");const u=yield Ha(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:l}),h=new URL(this.url+u.url),y=h.searchParams.get("token");if(!y)throw new Zm("No token returned by API");return{data:{signedUrl:h.toString(),path:e,token:y},error:null}}catch(r){if(os(r))return{data:null,error:r};throw r}})}update(e,n,r){return $s(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return $s(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(os(l))return{data:null,error:l};throw l}})}copy(e,n,r){return $s(this,void 0,void 0,function*(){try{return{data:{path:(yield Ha(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(os(l))return{data:null,error:l};throw l}})}createSignedUrl(e,n,r){return $s(this,void 0,void 0,function*(){try{let l=this._getFinalPath(e),u=yield Ha(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const h=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(l){if(os(l))return{data:null,error:l};throw l}})}createSignedUrls(e,n,r){return $s(this,void 0,void 0,function*(){try{const l=yield Ha(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),u=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:l.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(l){if(os(l))return{data:null,error:l};throw l}})}download(e,n){return $s(this,void 0,void 0,function*(){const l=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),h=u?`?${u}`:"";try{const y=this._getFinalPath(e);return{data:yield(yield Ch(this.fetch,`${this.url}/${l}/${y}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(y){if(os(y))return{data:null,error:y};throw y}})}info(e){return $s(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ch(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:sm(r),error:null}}catch(r){if(os(r))return{data:null,error:r};throw r}})}exists(e){return $s(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield rD(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(os(r)&&r instanceof nm){const l=r.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),l=[],u=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&l.push(u);const y=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",b=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});b!==""&&l.push(b);let x=l.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${y}/public/${r}${x}`)}}}remove(e){return $s(this,void 0,void 0,function*(){try{return{data:yield tS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(os(n))return{data:null,error:n};throw n}})}list(e,n,r){return $s(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},aD),n),{prefix:e||""});return{data:yield Ha(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},r),error:null}}catch(l){if(os(l))return{data:null,error:l};throw l}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const lD="2.7.1",cD={"X-Client-Info":`storage-js/${lD}`};var nc=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(S){try{x(r.next(S))}catch(A){h(A)}}function b(S){try{x(r.throw(S))}catch(A){h(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};class uD{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},cD),n),this.fetch=eS(r)}listBuckets(){return nc(this,void 0,void 0,function*(){try{return{data:yield Ch(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(os(e))return{data:null,error:e};throw e}})}getBucket(e){return nc(this,void 0,void 0,function*(){try{return{data:yield Ch(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(os(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return nc(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(os(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return nc(this,void 0,void 0,function*(){try{return{data:yield iD(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(os(r))return{data:null,error:r};throw r}})}emptyBucket(e){return nc(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(os(n))return{data:null,error:n};throw n}})}deleteBucket(e){return nc(this,void 0,void 0,function*(){try{return{data:yield tS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(os(n))return{data:null,error:n};throw n}})}}class dD extends uD{constructor(e,n={},r){super(e,n,r)}from(e){return new oD(this.url,this.headers,e,this.fetch)}}const fD="2.50.3";let Fu="";typeof Deno<"u"?Fu="deno":typeof document<"u"?Fu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fu="react-native":Fu="node";const hD={"X-Client-Info":`supabase-js-${Fu}/${fD}`},gD={headers:hD},mD={schema:"public"},pD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xD={};var yD=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(S){try{x(r.next(S))}catch(A){h(A)}}function b(S){try{x(r.throw(S))}catch(A){h(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};const bD=t=>{let e;return t?e=t:typeof fetch>"u"?e=$3:e=fetch,(...n)=>e(...n)},wD=()=>typeof Headers>"u"?G3:Headers,vD=(t,e,n)=>{const r=bD(n),l=wD();return(u,h)=>yD(void 0,void 0,void 0,function*(){var y;const b=(y=yield e())!==null&&y!==void 0?y:t;let x=new l(h==null?void 0:h.headers);return x.has("apikey")||x.set("apikey",t),x.has("Authorization")||x.set("Authorization",`Bearer ${b}`),r(u,Object.assign(Object.assign({},h),{headers:x}))})};var SD=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(S){try{x(r.next(S))}catch(A){h(A)}}function b(S){try{x(r.throw(S))}catch(A){h(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};function ED(t){return t.endsWith("/")?t:t+"/"}function CD(t,e){var n,r;const{db:l,auth:u,realtime:h,global:y}=t,{db:b,auth:x,realtime:S,global:A}=e,N={db:Object.assign(Object.assign({},b),l),auth:Object.assign(Object.assign({},x),u),realtime:Object.assign(Object.assign({},S),h),global:Object.assign(Object.assign(Object.assign({},A),y),{headers:Object.assign(Object.assign({},(n=A==null?void 0:A.headers)!==null&&n!==void 0?n:{}),(r=y==null?void 0:y.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>SD(this,void 0,void 0,function*(){return""})};return t.accessToken?N.accessToken=t.accessToken:delete N.accessToken,N}const nS="2.70.0",oc=30*1e3,im=3,cg=im*oc,AD="http://localhost:9999",TD="supabase.auth.token",_D={"X-Client-Info":`gotrue-js/${nS}`},rm="X-Supabase-Api-Version",sS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ND=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,RD=6e5;class Qm extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function xt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class OD extends Qm{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function ID(t){return xt(t)&&t.name==="AuthApiError"}class iS extends Qm{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class co extends Qm{constructor(e,n,r,l){super(e,r,l),this.name=n,this.status=r}}class Fa extends co{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function MD(t){return xt(t)&&t.name==="AuthSessionMissingError"}class Zf extends co{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Qf extends co{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Jf extends co{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function DD(t){return xt(t)&&t.name==="AuthImplicitGrantRedirectError"}class qb extends co{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class am extends co{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ug(t){return xt(t)&&t.name==="AuthRetryableFetchError"}class Yb extends co{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Qu extends co{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ah="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xb=` 	
\r=`.split(""),kD=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Xb.length;e+=1)t[Xb[e].charCodeAt(0)]=-2;for(let e=0;e<Ah.length;e+=1)t[Ah[e].charCodeAt(0)]=e;return t})();function Wb(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ah[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ah[r]),e.queuedBits-=6}}function rS(t,e,n){const r=kD[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Kb(t){const e=[],n=h=>{e.push(String.fromCodePoint(h))},r={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=h=>{PD(h,r,n)};for(let h=0;h<t.length;h+=1)rS(t.charCodeAt(h),l,u);return e.join("")}function LD(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function jD(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const l=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|l)+65536,n+=1}LD(r,e)}}function PD(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function BD(t){const e=[],n={queue:0,queuedBits:0},r=l=>{e.push(l)};for(let l=0;l<t.length;l+=1)rS(t.charCodeAt(l),n,r);return new Uint8Array(e)}function UD(t){const e=[];return jD(t,n=>e.push(n)),new Uint8Array(e)}function FD(t){const e=[],n={queue:0,queuedBits:0},r=l=>{e.push(l)};return t.forEach(l=>Wb(l,n,r)),Wb(null,n,r),e.join("")}function VD(t){return Math.round(Date.now()/1e3)+t}function HD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Bi=()=>typeof window<"u"&&typeof document<"u",jo={tested:!1,writable:!1},Ju=()=>{if(!Bi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jo.tested)return jo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),jo.tested=!0,jo.writable=!0}catch{jo.tested=!0,jo.writable=!1}return jo.writable};function zD(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((l,u)=>{e[u]=l})}catch{}return n.searchParams.forEach((r,l)=>{e[l]=r}),e}const aS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ad(async()=>{const{default:r}=await Promise.resolve().then(()=>Dc);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},$D=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",oS=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},eh=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},th=async(t,e)=>{await t.removeItem(e)};class Hh{constructor(){this.promise=new Hh.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Hh.promiseConstructor=Promise;function dg(t){const e=t.split(".");if(e.length!==3)throw new Qu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ND.test(e[r]))throw new Qu("JWT not in base64url format");return{header:JSON.parse(Kb(e[0])),payload:JSON.parse(Kb(e[1])),signature:BD(e[2]),raw:{header:e[0],payload:e[1]}}}async function GD(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function qD(t,e){return new Promise((r,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await t(u);if(!e(u,null,h)){r(h);return}}catch(h){if(!e(u,h)){l(h);return}}})()})}function YD(t){return("0"+t.toString(16)).substr(-2)}function XD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let l="";for(let u=0;u<56;u++)l+=n.charAt(Math.floor(Math.random()*r));return l}return crypto.getRandomValues(e),Array.from(e,YD).join("")}async function WD(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),l=new Uint8Array(r);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function KD(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await WD(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function sc(t,e,n=!1){const r=XD();let l=r;n&&(l+="/PASSWORD_RECOVERY"),await oS(t,`${e}-code-verifier`,l);const u=await KD(r);return[u,r===u?"plain":"s256"]}const ZD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function QD(t){const e=t.headers.get(rm);if(!e||!e.match(ZD))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function JD(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function e9(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const t9=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ic(t){if(!t9.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var n9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(t);l<r.length;l++)e.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(t,r[l])&&(n[r[l]]=t[r[l]]);return n};const Bo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),s9=[502,503,504];async function Zb(t){var e;if(!$D(t))throw new am(Bo(t),0);if(s9.includes(t.status))throw new am(Bo(t),t.status);let n;try{n=await t.json()}catch(u){throw new iS(Bo(u),u)}let r;const l=QD(t);if(l&&l.getTime()>=sS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Yb(Bo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Fa}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new Yb(Bo(n),t.status,n.weak_password.reasons);throw new OD(Bo(n),t.status||500,r)}const i9=(t,e,n,r)=>{const l={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),l.body=JSON.stringify(r),Object.assign(Object.assign({},l),n))};async function Mt(t,e,n,r){var l;const u=Object.assign({},r==null?void 0:r.headers);u[rm]||(u[rm]=sS["2024-01-01"].name),r!=null&&r.jwt&&(u.Authorization=`Bearer ${r.jwt}`);const h=(l=r==null?void 0:r.query)!==null&&l!==void 0?l:{};r!=null&&r.redirectTo&&(h.redirect_to=r.redirectTo);const y=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",b=await r9(t,e,n+y,{headers:u,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(b):{data:Object.assign({},b),error:null}}async function r9(t,e,n,r,l,u){const h=i9(e,r,l,u);let y;try{y=await t(n,Object.assign({},h))}catch(b){throw console.error(b),new am(Bo(b),0)}if(y.ok||await Zb(y),r!=null&&r.noResolveJson)return y;try{return await y.json()}catch(b){await Zb(b)}}function $r(t){var e;let n=null;c9(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=VD(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Qb(t){const e=$r(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function za(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function a9(t){return{data:t,error:null}}function o9(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:l,verification_type:u}=t,h=n9(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),y={action_link:e,email_otp:n,hashed_token:r,redirect_to:l,verification_type:u},b=Object.assign({},h);return{data:{properties:y,user:b},error:null}}function l9(t){return t}function c9(t){return t.access_token&&t.refresh_token&&t.expires_in}const fg=["global","local","others"];var u9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(t);l<r.length;l++)e.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(t,r[l])&&(n[r[l]]=t[r[l]]);return n};class d9{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=aS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=fg[0]){if(fg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fg.join(", ")}`);try{return await Mt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(xt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Mt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:za})}catch(r){if(xt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=u9(e,["options"]),l=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(l.new_email=r==null?void 0:r.newEmail,delete l.newEmail),await Mt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:o9,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(xt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Mt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:za})}catch(n){if(xt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,l,u,h,y,b;try{const x={nextPage:null,lastPage:0,total:0},S=await Mt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(u=(l=e==null?void 0:e.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:l9});if(S.error)throw S.error;const A=await S.json(),N=(h=S.headers.get("x-total-count"))!==null&&h!==void 0?h:0,I=(b=(y=S.headers.get("link"))===null||y===void 0?void 0:y.split(","))!==null&&b!==void 0?b:[];return I.length>0&&(I.forEach(M=>{const j=parseInt(M.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(M.split(";")[1].split("=")[1]);x[`${U}Page`]=j}),x.total=parseInt(N)),{data:Object.assign(Object.assign({},A),x),error:null}}catch(x){if(xt(x))return{data:{users:[]},error:x};throw x}}async getUserById(e){ic(e);try{return await Mt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:za})}catch(n){if(xt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){ic(e);try{return await Mt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:za})}catch(r){if(xt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){ic(e);try{return await Mt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:za})}catch(r){if(xt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ic(e.userId);try{const{data:n,error:r}=await Mt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:n,error:r}}catch(n){if(xt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){ic(e.userId),ic(e.id);try{return{data:await Mt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(xt(n))return{data:null,error:n};throw n}}}const f9={getItem:t=>Ju()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Ju()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Ju()&&globalThis.localStorage.removeItem(t)}};function Jb(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function h9(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const rc={debug:!!(globalThis&&Ju()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class lS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class g9 extends lS{}async function m9(t,e,n){rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),rc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async l=>{if(l){rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,l.name);try{return await n()}finally{rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,l.name)}}else{if(e===0)throw rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new g9(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(rc.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}h9();const p9={url:AD,storageKey:TD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_D,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ew(t,e,n){return await n()}class dd{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=dd.nextInstanceID,dd.nextInstanceID+=1,this.instanceID>0&&Bi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},p9),e);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new d9({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=aS(l.fetch),this.lock=l.lock||ew,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:Bi()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=m9:this.lock=ew,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?l.storage?this.storage=l.storage:Ju()?this.storage=f9:(this.memoryStorage={},this.storage=Jb(this.memoryStorage)):(this.memoryStorage={},this.storage=Jb(this.memoryStorage)),Bi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${nS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=zD(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Bi()&&this.detectSessionInUrl&&r!=="none"){const{data:l,error:u}=await this._getSessionFromURL(n,r);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),DD(u)){const b=(e=u.details)===null||e===void 0?void 0:e.code;if(b==="identity_already_exists"||b==="identity_not_found"||b==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:y}=l;return this._debug("#_initialize()","detected session in URL",h,"redirect type",y),await this._saveSession(h),setTimeout(async()=>{y==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return xt(n)?{error:n}:{error:new iS("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,l;try{const u=await Mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(l=e==null?void 0:e.options)===null||l===void 0?void 0:l.captchaToken}},xform:$r}),{data:h,error:y}=u;if(y||!h)return{data:{user:null,session:null},error:y};const b=h.session,x=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:x,session:b},error:null}}catch(u){if(xt(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(e){var n,r,l;try{let u;if("email"in e){const{email:S,password:A,options:N}=e;let I=null,M=null;this.flowType==="pkce"&&([I,M]=await sc(this.storage,this.storageKey)),u=await Mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:S,password:A,data:(n=N==null?void 0:N.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:I,code_challenge_method:M},xform:$r})}else if("phone"in e){const{phone:S,password:A,options:N}=e;u=await Mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:S,password:A,data:(r=N==null?void 0:N.data)!==null&&r!==void 0?r:{},channel:(l=N==null?void 0:N.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:$r})}else throw new Qf("You must provide either an email or phone number and a password");const{data:h,error:y}=u;if(y||!h)return{data:{user:null,session:null},error:y};const b=h.session,x=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:x,session:b},error:null}}catch(u){if(xt(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(e){try{let n;if("email"in e){const{email:u,password:h,options:y}=e;n=await Mt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Qb})}else if("phone"in e){const{phone:u,password:h,options:y}=e;n=await Mt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Qb})}else throw new Qf("You must provide either an email or phone number and a password");const{data:r,error:l}=n;return l?{data:{user:null,session:null},error:l}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Zf}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:l})}catch(n){if(xt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,l,u;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=e.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,l,u,h,y,b,x,S,A,N,I;let M,j;if("message"in e)M=e.message,j=e.signature;else{const{chain:U,wallet:$,statement:Y,options:P}=e;let V;if(Bi())if(typeof $=="object")V=$;else{const Z=window;if("solana"in Z&&typeof Z.solana=="object"&&("signIn"in Z.solana&&typeof Z.solana.signIn=="function"||"signMessage"in Z.solana&&typeof Z.solana.signMessage=="function"))V=Z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!(P!=null&&P.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=$}const z=new URL((n=P==null?void 0:P.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in V&&V.signIn){const Z=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P==null?void 0:P.signInWithSolana),{version:"1",domain:z.host,uri:z.href}),Y?{statement:Y}:null));let W;if(Array.isArray(Z)&&Z[0]&&typeof Z[0]=="object")W=Z[0];else if(Z&&typeof Z=="object"&&"signedMessage"in Z&&"signature"in Z)W=Z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)M=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),j=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");M=[`${z.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...Y?["",Y,""]:[""],"Version: 1",`URI: ${z.href}`,`Issued At: ${(l=(r=P==null?void 0:P.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=P==null?void 0:P.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((h=P==null?void 0:P.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((y=P==null?void 0:P.signInWithSolana)===null||y===void 0)&&y.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((b=P==null?void 0:P.signInWithSolana)===null||b===void 0)&&b.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((x=P==null?void 0:P.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((A=(S=P==null?void 0:P.signInWithSolana)===null||S===void 0?void 0:S.resources)===null||A===void 0)&&A.length?["Resources",...P.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const Z=await V.signMessage(new TextEncoder().encode(M),"utf8");if(!Z||!(Z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=Z}}try{const{data:U,error:$}=await Mt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:M,signature:FD(j)},!((N=e.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(I=e.options)===null||I===void 0?void 0:I.captchaToken}}:null),xform:$r});if($)throw $;return!U||!U.session||!U.user?{data:{user:null,session:null},error:new Zf}:(U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("SIGNED_IN",U.session)),{data:Object.assign({},U),error:$})}catch(U){if(xt(U))return{data:{user:null,session:null},error:U};throw U}}async _exchangeCodeForSession(e){const n=await eh(this.storage,`${this.storageKey}-code-verifier`),[r,l]=(n??"").split("/");try{const{data:u,error:h}=await Mt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:$r});if(await th(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new Zf}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:h})}catch(u){if(xt(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(e){try{const{options:n,provider:r,token:l,access_token:u,nonce:h}=e,y=await Mt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:l,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:$r}),{data:b,error:x}=y;return x?{data:{user:null,session:null},error:x}:!b||!b.session||!b.user?{data:{user:null,session:null},error:new Zf}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:b,error:x})}catch(n){if(xt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,l,u,h;try{if("email"in e){const{email:y,options:b}=e;let x=null,S=null;this.flowType==="pkce"&&([x,S]=await sc(this.storage,this.storageKey));const{error:A}=await Mt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:y,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},create_user:(r=b==null?void 0:b.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:x,code_challenge_method:S},redirectTo:b==null?void 0:b.emailRedirectTo});return{data:{user:null,session:null},error:A}}if("phone"in e){const{phone:y,options:b}=e,{data:x,error:S}=await Mt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:y,data:(l=b==null?void 0:b.data)!==null&&l!==void 0?l:{},create_user:(u=b==null?void 0:b.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},channel:(h=b==null?void 0:b.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:S}}throw new Qf("You must provide either an email or phone number.")}catch(y){if(xt(y))return{data:{user:null,session:null},error:y};throw y}}async verifyOtp(e){var n,r;try{let l,u;"options"in e&&(l=(n=e.options)===null||n===void 0?void 0:n.redirectTo,u=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:h,error:y}=await Mt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:$r});if(y)throw y;if(!h)throw new Error("An error occurred on token verification.");const b=h.session,x=h.user;return b!=null&&b.access_token&&(await this._saveSession(b),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",b)),{data:{user:x,session:b},error:null}}catch(l){if(xt(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(e){var n,r,l;try{let u=null,h=null;return this.flowType==="pkce"&&([u,h]=await sc(this.storage,this.storageKey)),await Mt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((l=e==null?void 0:e.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:a9})}catch(u){if(xt(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Fa;const{error:l}=await Mt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:l}})}catch(e){if(xt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:l,options:u}=e,{error:h}=await Mt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in e){const{phone:r,type:l,options:u}=e,{data:h,error:y}=await Mt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:y}}throw new Qf("You must provide either an email or phone number and a type")}catch(n){if(xt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await eh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<cg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let h=this.suppressGetSessionWarning;e=new Proxy(e,{get:(b,x,S)=>(!h&&x==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(b,x,S))})}return{data:{session:e},error:null}}const{session:l,error:u}=await this._callRefreshToken(e.refresh_token);return u?{data:{session:null},error:u}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Mt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:za}):await this._useSession(async n=>{var r,l,u;const{data:h,error:y}=n;if(y)throw y;return!(!((r=h.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fa}:await Mt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:za})})}catch(n){if(xt(n))return MD(n)&&(await this._removeSession(),await th(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:l,error:u}=r;if(u)throw u;if(!l.session)throw new Fa;const h=l.session;let y=null,b=null;this.flowType==="pkce"&&e.email!=null&&([y,b]=await sc(this.storage,this.storageKey));const{data:x,error:S}=await Mt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:y,code_challenge_method:b}),jwt:h.access_token,xform:za});if(S)throw S;return h.user=x.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(r){if(xt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Fa;const n=Date.now()/1e3;let r=n,l=!0,u=null;const{payload:h}=dg(e.access_token);if(h.exp&&(r=h.exp,l=r<=n),l){const{session:y,error:b}=await this._callRefreshToken(e.refresh_token);if(b)return{data:{user:null,session:null},error:b};if(!y)return{data:{user:null,session:null},error:null};u=y}else{const{data:y,error:b}=await this._getUser(e.access_token);if(b)throw b;u={access_token:e.access_token,refresh_token:e.refresh_token,user:y.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(n){if(xt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:h,error:y}=n;if(y)throw y;e=(r=h.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Fa;const{session:l,error:u}=await this._callRefreshToken(e.refresh_token);return u?{data:{user:null,session:null},error:u}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(xt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Bi())throw new Jf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Jf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new qb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jf("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new qb("No code detected.");const{data:Y,error:P}=await this._exchangeCodeForSession(e.code);if(P)throw P;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:Y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:l,access_token:u,refresh_token:h,expires_in:y,expires_at:b,token_type:x}=e;if(!u||!y||!h||!x)throw new Jf("No session defined in URL");const S=Math.round(Date.now()/1e3),A=parseInt(y);let N=S+A;b&&(N=parseInt(b));const I=N-S;I*1e3<=oc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${I}s, should have been closer to ${A}s`);const M=N-A;S-M>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",M,N,S):S-M<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",M,N,S);const{data:j,error:U}=await this._getUser(u);if(U)throw U;const $={provider_token:r,provider_refresh_token:l,access_token:u,expires_in:A,expires_at:N,refresh_token:h,token_type:x,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:e.type},error:null}}catch(r){if(xt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await eh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:l,error:u}=n;if(u)return{error:u};const h=(r=l.session)===null||r===void 0?void 0:r.access_token;if(h){const{error:y}=await this.admin.signOut(h,e);if(y&&!(ID(y)&&(y.status===404||y.status===401||y.status===403)))return{error:y}}return e!=="others"&&(await this._removeSession(),await th(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=HD(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,l;try{const{data:{session:u},error:h}=n;if(h)throw h;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",e,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(e))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",u),console.error(u)}})}async resetPasswordForEmail(e,n={}){let r=null,l=null;this.flowType==="pkce"&&([r,l]=await sc(this.storage,this.storageKey,!0));try{return await Mt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:l,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(xt(u))return{data:null,error:u};throw u}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(xt(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:l}=await this._useSession(async u=>{var h,y,b,x,S;const{data:A,error:N}=u;if(N)throw N;const I=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(h=e.options)===null||h===void 0?void 0:h.redirectTo,scopes:(y=e.options)===null||y===void 0?void 0:y.scopes,queryParams:(b=e.options)===null||b===void 0?void 0:b.queryParams,skipBrowserRedirect:!0});return await Mt(this.fetch,"GET",I,{headers:this.headers,jwt:(S=(x=A.session)===null||x===void 0?void 0:x.access_token)!==null&&S!==void 0?S:void 0})});if(l)throw l;return Bi()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(xt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,l;const{data:u,error:h}=n;if(h)throw h;return await Mt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(l=(r=u.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0})})}catch(n){if(xt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await qD(async l=>(l>0&&await GD(200*Math.pow(2,l-1)),this._debug(n,"refreshing attempt",l),await Mt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:$r})),(l,u)=>{const h=200*Math.pow(2,l);return u&&ug(u)&&Date.now()+h-r<oc})}catch(r){if(this._debug(n,"error",r),xt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Bi()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await eh(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const l=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<cg;if(this._debug(n,`session has${l?"":" not"} expired with margin of ${cg}s`),l){if(this.autoRefreshToken&&r.refresh_token){const{error:u}=await this._callRefreshToken(r.refresh_token);u&&(console.error(u),ug(u)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Fa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Hh;const{data:u,error:h}=await this._refreshAccessToken(e);if(h)throw h;if(!u.session)throw new Fa;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const y={session:u.session,error:null};return this.refreshingDeferred.resolve(y),y}catch(u){if(this._debug(l,"error",u),xt(u)){const h={session:null,error:u};return ug(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(h),h}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(e,n,r=!0){const l=`#_notifyAllSubscribers(${e})`;this._debug(l,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async y=>{try{await y.callback(e,n)}catch(b){u.push(b)}});if(await Promise.all(h),u.length>0){for(let y=0;y<u.length;y+=1)console.error(u[y]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await oS(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await th(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Bi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),oc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((r.expires_at*1e3-e)/oc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${oc}ms, refresh threshold is ${im} ticks`),l<=im&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof lS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const l=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&l.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&l.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[u,h]=await sc(this.storage,this.storageKey),y=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});l.push(y.toString())}if(r!=null&&r.queryParams){const u=new URLSearchParams(r.queryParams);l.push(u.toString())}return r!=null&&r.skipBrowserRedirect&&l.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${l.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:l,error:u}=n;return u?{data:null,error:u}:await Mt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(xt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,l;const{data:u,error:h}=n;if(h)return{data:null,error:h};const y=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:b,error:x}=await Mt(this.fetch,"POST",`${this.url}/factors`,{body:y,headers:this.headers,jwt:(r=u==null?void 0:u.session)===null||r===void 0?void 0:r.access_token});return x?{data:null,error:x}:(e.factorType==="totp"&&(!((l=b==null?void 0:b.totp)===null||l===void 0)&&l.qr_code)&&(b.totp.qr_code=`data:image/svg+xml;utf-8,${b.totp.qr_code}`),{data:b,error:null})})}catch(n){if(xt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:l,error:u}=n;if(u)return{data:null,error:u};const{data:h,error:y}=await Mt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});return y?{data:null,error:y}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:y})})}catch(n){if(xt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:l,error:u}=n;return u?{data:null,error:u}:await Mt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(xt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],l=r.filter(h=>h.factor_type==="totp"&&h.status==="verified"),u=r.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:r,totp:l,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:l},error:u}=e;if(u)return{data:null,error:u};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=dg(l.access_token);let y=null;h.aal&&(y=h.aal);let b=y;((r=(n=l.user.factors)===null||n===void 0?void 0:n.filter(A=>A.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(b="aal2");const S=h.amr||[];return{data:{currentLevel:y,nextLevel:b,currentAuthenticationMethods:S},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(h=>h.kid===e);if(r||(r=this.jwks.keys.find(h=>h.kid===e),r&&this.jwks_cached_at+RD>Date.now()))return r;const{data:l,error:u}=await Mt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;if(!l.keys||l.keys.length===0)throw new Qu("JWKS is empty");if(this.jwks=l,this.jwks_cached_at=Date.now(),r=l.keys.find(h=>h.kid===e),!r)throw new Qu("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:I,error:M}=await this.getSession();if(M||!I.session)return{data:null,error:M};r=I.session.access_token}const{header:l,payload:u,signature:h,raw:{header:y,payload:b}}=dg(r);if(JD(u.exp),!l.kid||l.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:I}=await this.getUser(r);if(I)throw I;return{data:{claims:u,header:l,signature:h},error:null}}const x=e9(l.alg),S=await this.fetchJwk(l.kid,n),A=await crypto.subtle.importKey("jwk",S,x,!0,["verify"]);if(!await crypto.subtle.verify(x,A,h,UD(`${y}.${b}`)))throw new Qu("Invalid JWT signature");return{data:{claims:u,header:l,signature:h},error:null}}catch(r){if(xt(r))return{data:null,error:r};throw r}}}dd.nextInstanceID=0;const x9=dd;class y9 extends x9{constructor(e){super(e)}}var b9=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(S){try{x(r.next(S))}catch(A){h(A)}}function b(S){try{x(r.throw(S))}catch(A){h(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};class w9{constructor(e,n,r){var l,u,h;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const y=ED(e),b=new URL(y);this.realtimeUrl=new URL("realtime/v1",b),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",b),this.storageUrl=new URL("storage/v1",b),this.functionsUrl=new URL("functions/v1",b);const x=`sb-${b.hostname.split(".")[0]}-auth-token`,S={db:mD,realtime:xD,auth:Object.assign(Object.assign({},pD),{storageKey:x}),global:gD},A=CD(r??{},S);this.storageKey=(l=A.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(u=A.global.headers)!==null&&u!==void 0?u:{},A.accessToken?(this.accessToken=A.accessToken,this.auth=new Proxy({},{get:(N,I)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(I)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=A.auth)!==null&&h!==void 0?h:{},this.headers,A.global.fetch),this.fetch=vD(n,this._getAccessToken.bind(this),A.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},A.realtime)),this.rest=new PM(new URL("rest/v1",b).href,{headers:this.headers,schema:A.db.schema,fetch:this.fetch}),A.accessToken||this._listenForAuthEvents()}get functions(){return new AM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new dD(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return b9(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:l,storageKey:u,flowType:h,lock:y,debug:b},x,S){const A={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new y9({url:this.authUrl.href,headers:Object.assign(Object.assign({},A),x),storageKey:u,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:l,flowType:h,lock:y,debug:b,fetch:S,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new QM(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const v9=(t,e,n)=>new w9(t,e,n),Ve=v9("https://gsicrcogciklihyflhtc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdzaWNyY29nY2lrbGloeWZsaHRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2NjEzOTgsImV4cCI6MjA2NTIzNzM5OH0.RXaJeqWW0e35fsRTtn5RkrcPnI1e7kIIJnBoIanawI0");typeof window<"u"&&(window.supabase=Ve);function cS(){const{i18n:t}=Pn(),e=t.language==="th"?"th":"en";function n(){const r=e==="en"?"th":"en";t.changeLanguage(r),localStorage.setItem("lang",r)}return E.jsxs("button",{type:"button",onClick:n,className:"relative w-14 h-8 rounded-full border-2 border-[#6654b3] bg-white flex items-center px-1 transition","aria-label":"Toggle language",style:{minWidth:56},children:[E.jsx("span",{className:`absolute left-1 top-1 w-6 h-6 rounded-full bg-[#6654b3] text-white flex items-center justify-center font-bold text-xs transition-transform duration-300 ${e==="th"?"translate-x-6":"translate-x-0"}`,children:e==="en"?"EN":"TH"}),E.jsxs("span",{className:"w-full flex justify-between text-[#6654b3] font-bold text-xs px-2 select-none",children:[E.jsx("span",{children:"EN"}),E.jsx("span",{children:"TH"})]})]})}function S9(){const{t}=Pn(),e=Ni(),[n,r]=R.useState(""),[l,u]=R.useState(""),[h,y]=R.useState(!1),[b,x]=R.useState("");async function S(A){A.preventDefault(),x(""),y(!0);const N=n.trim().toLowerCase(),I=l.trim(),{error:M}=await Ve.auth.signInWithPassword({email:N,password:I});M?x(M.message):e("/dashboard"),y(!1)}return E.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 relative",children:[E.jsx("div",{className:"absolute top-6 right-6 z-10",children:E.jsx(cS,{})}),E.jsxs("form",{onSubmit:S,className:"w-full max-w-md bg-white p-8 rounded shadow",children:[E.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:t("signIn")}),E.jsxs("label",{className:"block mb-4",children:[E.jsx("span",{className:"text-sm",children:t("email")}),E.jsx("input",{type:"email",className:"mt-1 block w-full border rounded px-3 py-2",placeholder:"you@example.com",value:n,onChange:A=>r(A.target.value),required:!0,autoFocus:!0})]}),E.jsxs("label",{className:"block mb-6",children:[E.jsx("span",{className:"text-sm",children:t("password")}),E.jsx("input",{type:"password",className:"mt-1 block w-full border rounded px-3 py-2",placeholder:"",value:l,onChange:A=>u(A.target.value),required:!0})]}),E.jsx("button",{type:"submit",disabled:h,className:"w-full bg-[#6654b3] text-white py-2 rounded hover:bg-[#5542a0] disabled:opacity-50 transition",children:t(h?"signingIn":"signIn")}),b&&E.jsx("p",{className:"mt-4 text-red-600 text-center",children:b})]})]})}function E9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const Th=R.forwardRef(E9);function C9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M7.5 3.75A1.5 1.5 0 0 0 6 5.25v13.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5V15a.75.75 0 0 1 1.5 0v3.75a3 3 0 0 1-3 3h-6a3 3 0 0 1-3-3V5.25a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3V9A.75.75 0 0 1 15 9V5.25a1.5 1.5 0 0 0-1.5-1.5h-6Zm10.72 4.72a.75.75 0 0 1 1.06 0l3 3a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 1 1-1.06-1.06l1.72-1.72H9a.75.75 0 0 1 0-1.5h10.94l-1.72-1.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const A9=R.forwardRef(C9);function T9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"}))}const _9=R.forwardRef(T9);function N9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M5.85 3.5a.75.75 0 0 0-1.117-1 9.719 9.719 0 0 0-2.348 4.876.75.75 0 0 0 1.479.248A8.219 8.219 0 0 1 5.85 3.5ZM19.267 2.5a.75.75 0 1 0-1.118 1 8.22 8.22 0 0 1 1.987 4.124.75.75 0 0 0 1.48-.248A9.72 9.72 0 0 0 19.266 2.5Z"}),R.createElement("path",{fillRule:"evenodd",d:"M12 2.25A6.75 6.75 0 0 0 5.25 9v.75a8.217 8.217 0 0 1-2.119 5.52.75.75 0 0 0 .298 1.206c1.544.57 3.16.99 4.831 1.243a3.75 3.75 0 1 0 7.48 0 24.583 24.583 0 0 0 4.83-1.244.75.75 0 0 0 .298-1.205 8.217 8.217 0 0 1-2.118-5.52V9A6.75 6.75 0 0 0 12 2.25ZM9.75 18c0-.034 0-.067.002-.1a25.05 25.05 0 0 0 4.496 0l.002.1a2.25 2.25 0 1 1-4.5 0Z",clipRule:"evenodd"}))}const R9=R.forwardRef(N9);function O9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M5.25 9a6.75 6.75 0 0 1 13.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 0 1-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 1 1-7.48 0 24.585 24.585 0 0 1-4.831-1.244.75.75 0 0 1-.298-1.205A8.217 8.217 0 0 0 5.25 9.75V9Zm4.502 8.9a2.25 2.25 0 1 0 4.496 0 25.057 25.057 0 0 1-4.496 0Z",clipRule:"evenodd"}))}const uS=R.forwardRef(O9);function I9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M11.25 4.533A9.707 9.707 0 0 0 6 3a9.735 9.735 0 0 0-3.25.555.75.75 0 0 0-.5.707v14.25a.75.75 0 0 0 1 .707A8.237 8.237 0 0 1 6 18.75c1.995 0 3.823.707 5.25 1.886V4.533ZM12.75 20.636A8.214 8.214 0 0 1 18 18.75c.966 0 1.89.166 2.75.47a.75.75 0 0 0 1-.708V4.262a.75.75 0 0 0-.5-.707A9.735 9.735 0 0 0 18 3a9.707 9.707 0 0 0-5.25 1.533v16.103Z"}))}const M9=R.forwardRef(I9);function D9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M4.913 2.658c2.075-.27 4.19-.408 6.337-.408 2.147 0 4.262.139 6.337.408 1.922.25 3.291 1.861 3.405 3.727a4.403 4.403 0 0 0-1.032-.211 50.89 50.89 0 0 0-8.42 0c-2.358.196-4.04 2.19-4.04 4.434v4.286a4.47 4.47 0 0 0 2.433 3.984L7.28 21.53A.75.75 0 0 1 6 21v-4.03a48.527 48.527 0 0 1-1.087-.128C2.905 16.58 1.5 14.833 1.5 12.862V6.638c0-1.97 1.405-3.718 3.413-3.979Z"}),R.createElement("path",{d:"M15.75 7.5c-1.376 0-2.739.057-4.086.169C10.124 7.797 9 9.103 9 10.609v4.285c0 1.507 1.128 2.814 2.67 2.94 1.243.102 2.5.157 3.768.165l2.782 2.781a.75.75 0 0 0 1.28-.53v-2.39l.33-.026c1.542-.125 2.67-1.433 2.67-2.94v-4.286c0-1.505-1.125-2.811-2.664-2.94A49.392 49.392 0 0 0 15.75 7.5Z"}))}const k9=R.forwardRef(D9);function L9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"}))}const j9=R.forwardRef(L9);function P9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M7.502 6h7.128A3.375 3.375 0 0 1 18 9.375v9.375a3 3 0 0 0 3-3V6.108c0-1.505-1.125-2.811-2.664-2.94a48.972 48.972 0 0 0-.673-.05A3 3 0 0 0 15 1.5h-1.5a3 3 0 0 0-2.663 1.618c-.225.015-.45.032-.673.05C8.662 3.295 7.554 4.542 7.502 6ZM13.5 3A1.5 1.5 0 0 0 12 4.5h4.5A1.5 1.5 0 0 0 15 3h-1.5Z",clipRule:"evenodd"}),R.createElement("path",{fillRule:"evenodd",d:"M3 9.375C3 8.339 3.84 7.5 4.875 7.5h9.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V9.375Zm9.586 4.594a.75.75 0 0 0-1.172-.938l-2.476 3.096-.908-.907a.75.75 0 0 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.116-.062l3-3.75Z",clipRule:"evenodd"}))}const B9=R.forwardRef(P9);function U9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z",clipRule:"evenodd"}))}const F9=R.forwardRef(U9);function V9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 0 0-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 0 0-2.282.819l-.922 1.597a1.875 1.875 0 0 0 .432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 0 0 0 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 0 0-.432 2.385l.922 1.597a1.875 1.875 0 0 0 2.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 0 0 2.28-.819l.923-1.597a1.875 1.875 0 0 0-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 0 0 0-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 0 0-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 0 0-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 0 0-1.85-1.567h-1.843ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z",clipRule:"evenodd"}))}const H9=R.forwardRef(V9);function z9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M10.464 8.746c.227-.18.497-.311.786-.394v2.795a2.252 2.252 0 0 1-.786-.393c-.394-.313-.546-.681-.546-1.004 0-.323.152-.691.546-1.004ZM12.75 15.662v-2.824c.347.085.664.228.921.421.427.32.579.686.579.991 0 .305-.152.671-.579.991a2.534 2.534 0 0 1-.921.42Z"}),R.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v.816a3.836 3.836 0 0 0-1.72.756c-.712.566-1.112 1.35-1.112 2.178 0 .829.4 1.612 1.113 2.178.502.4 1.102.647 1.719.756v2.978a2.536 2.536 0 0 1-.921-.421l-.879-.66a.75.75 0 0 0-.9 1.2l.879.66c.533.4 1.169.645 1.821.75V18a.75.75 0 0 0 1.5 0v-.81a4.124 4.124 0 0 0 1.821-.749c.745-.559 1.179-1.344 1.179-2.191 0-.847-.434-1.632-1.179-2.191a4.122 4.122 0 0 0-1.821-.75V8.354c.29.082.559.213.786.393l.415.33a.75.75 0 0 0 .933-1.175l-.415-.33a3.836 3.836 0 0 0-1.719-.755V6Z",clipRule:"evenodd"}))}const $9=R.forwardRef(z9);function G9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),R.createElement("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}))}const q9=R.forwardRef(G9);function Y9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-2.625 6c-.54 0-.828.419-.936.634a1.96 1.96 0 0 0-.189.866c0 .298.059.605.189.866.108.215.395.634.936.634.54 0 .828-.419.936-.634.13-.26.189-.568.189-.866 0-.298-.059-.605-.189-.866-.108-.215-.395-.634-.936-.634Zm4.314.634c.108-.215.395-.634.936-.634.54 0 .828.419.936.634.13.26.189.568.189.866 0 .298-.059.605-.189.866-.108.215-.395.634-.936.634-.54 0-.828-.419-.936-.634a1.96 1.96 0 0 1-.189-.866c0-.298.059-.605.189-.866Zm2.023 6.828a.75.75 0 1 0-1.06-1.06 3.75 3.75 0 0 1-5.304 0 .75.75 0 0 0-1.06 1.06 5.25 5.25 0 0 0 7.424 0Z",clipRule:"evenodd"}))}const tw=R.forwardRef(Y9);function X9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),R.createElement("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"}))}const W9=R.forwardRef(X9);function K9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const Z9=R.forwardRef(K9);function Q9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z",clipRule:"evenodd"}))}const J9=R.forwardRef(Q9);function ek({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 9.375v-4.5ZM4.875 4.5a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 0 1-1.875-1.875v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5ZM6 6.75A.75.75 0 0 1 6.75 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75A.75.75 0 0 1 6 7.5v-.75Zm9.75 0A.75.75 0 0 1 16.5 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 19.125v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875-.75a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM6 16.5a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm9.75 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm-3 3a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Z",clipRule:"evenodd"}))}const nw=R.forwardRef(ek);function tk({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))}const nk=R.forwardRef(tk);function sk({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M5.25 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM2.25 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM18.75 7.5a.75.75 0 0 0-1.5 0v2.25H15a.75.75 0 0 0 0 1.5h2.25v2.25a.75.75 0 0 0 1.5 0v-2.25H21a.75.75 0 0 0 0-1.5h-2.25V7.5Z"}))}const ik=R.forwardRef(sk);function rk({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const dS=R.forwardRef(rk),ak="#6654b3",ok="#f6f6f6",nh=82;function lk(){const{t}=Pn(),e=vr(),n=Ni(),r=e.pathname==="/dashboard",[l,u]=R.useState(!1),h=[{to:"/dashboard",icon:E.jsx(W9,{className:"w-8 h-8"}),active:e.pathname==="/dashboard",key:"home"},{to:"/reports",icon:E.jsx(q9,{className:"w-8 h-8"}),active:e.pathname.startsWith("/reports"),key:"reports"},{to:"/messaging",icon:E.jsx(k9,{className:"w-8 h-8"}),active:e.pathname.startsWith("/messaging"),key:"messaging"},{to:"/billing",icon:E.jsx($9,{className:"w-8 h-8"}),active:e.pathname.startsWith("/billing"),key:"billing"}];function y(){return E.jsxs("nav",{style:{width:nh,minWidth:nh,background:ak,color:ok,borderTopRightRadius:"36px",borderBottomRightRadius:"36px",minHeight:"100vh",height:"100vh",boxShadow:"2px 0 20px 0 rgba(102,84,179,0.08)",zIndex:100,display:"flex",flexDirection:"column",alignItems:"center",padding:0,position:"relative"},className:"relative",children:[E.jsxs("div",{style:{height:56,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[E.jsx("button",{className:"md:hidden absolute top-4 left-4 bg-white/90 text-[#6654b3] rounded-full p-1 shadow",style:{display:l?"block":"none"},onClick:()=>u(!1),"aria-label":"Close menu",children:E.jsx(dS,{className:"w-7 h-7"})}),!r&&E.jsx("button",{className:"hidden md:flex w-12 h-12 items-center justify-center rounded-xl bg-white/90 hover:bg-[#edeaf8] text-[#6654b3] shadow transition",onClick:()=>n(-1),"aria-label":t("back"),children:E.jsx(Th,{className:"w-7 h-7"})})]}),E.jsx("div",{className:"flex-1 w-full flex flex-col items-center",style:{overflowY:"auto",gap:0,paddingTop:10,paddingBottom:10,scrollbarWidth:"none",msOverflowStyle:"none"},children:E.jsxs("div",{className:"flex flex-col items-center w-full",style:{gap:24,minHeight:0,flex:1},children:[h.map(b=>E.jsx(vh,{to:b.to,className:`flex items-center justify-center w-12 h-12 rounded-xl transition
                  ${b.active?"bg-white/80 shadow text-[#6654b3]":"text-white hover:bg-white/20"}`,title:t(b.key),onClick:()=>u(!1),tabIndex:0,children:b.icon},b.key)),E.jsx(vh,{to:"/settings",className:`flex items-center justify-center w-12 h-12 rounded-xl transition
                ${e.pathname==="/settings"?"bg-white/80 shadow text-[#6654b3]":"text-white hover:bg-white/20"}`,title:t("settings"),onClick:()=>u(!1),tabIndex:0,children:E.jsx(H9,{className:"w-8 h-8"})})]})}),E.jsxs("div",{className:"w-full flex flex-col items-center gap-2 pb-3",style:{position:"sticky",bottom:0,zIndex:2},children:[E.jsx(cS,{}),E.jsx("button",{type:"button",title:t("logout"),onClick:()=>n("/logout"),className:"flex items-center justify-center w-12 h-12 rounded-xl transition text-white hover:bg-white/20",style:{border:0,background:"none",outline:"none"},tabIndex:0,children:E.jsx(A9,{className:"w-8 h-8"})})]}),E.jsx("style",{children:`
          nav::-webkit-scrollbar { display: none; }
          `})]})}return E.jsxs(E.Fragment,{children:[E.jsx("button",{className:"fixed top-3 left-3 z-50 bg-[#6654b3] text-white p-2 rounded-xl shadow-lg md:hidden",onClick:()=>u(!0),"aria-label":"Open menu",style:{display:l?"none":void 0},children:E.jsx(_9,{className:"w-8 h-8"})}),E.jsx("aside",{className:`
          fixed top-0 left-0 h-full z-50 transition-transform duration-200 ease-in-out
          ${l?"translate-x-0":"-translate-x-full"}
          md:translate-x-0 md:static md:block
        `,style:{width:nh,minWidth:nh,height:"100vh"},children:E.jsx(y,{})}),l&&E.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 md:hidden",onClick:()=>u(!1)})]})}const fS=R.createContext({user:null,setUser:()=>{}});function _d(){return R.useContext(fS)}function ck({children:t}){const[e,n]=R.useState(null);R.useEffect(()=>{Ve.auth.getSession().then(({data:u})=>{var h;(h=u.session)!=null&&h.user&&r({id:u.session.user.id,email:u.session.user.email??null})});const{data:l}=Ve.auth.onAuthStateChange((u,h)=>{h!=null&&h.user?r({id:h.user.id,email:h.user.email??null}):n(null)});return()=>l.subscription.unsubscribe()},[]);async function r(l){const{data:u,error:h}=await Ve.from("profiles").select("role").eq("id",l.id).single();if(h&&h.code!=="PGRST116"){console.error("loadProfile error",h);return}n({id:l.id,email:l.email,role:(u==null?void 0:u.role)??"staff"})}return E.jsx(fS.Provider,{value:{user:e,setUser:n},children:t})}const uk=82;function dk(){const[t,e]=R.useState(0),[n,r]=R.useState(!1),[l,u]=R.useState(!1),[h,y]=R.useState("avatar.png");R.useState(!1);const b=Ni(),x=vr(),{user:S}=_d(),A=R.useRef(null),N=x.pathname==="/dashboard";R.useEffect(()=>{async function M(){if(!(S!=null&&S.id))return y("avatar.png");const{data:j,error:U}=await Ve.from("profiles").select("avatar_url").eq("id",S.id).single();U||!(j!=null&&j.avatar_url)?y("avatar.png"):y(j.avatar_url)}M()},[S]),R.useEffect(()=>{const M=async()=>{const{count:U}=await Ve.from("notifications").select("*",{head:!0,count:"exact"}).eq("read",!1);e(U||0)};M();const j=Ve.channel(`notifications_feed_${Date.now()}`).on("postgres_changes",{event:"*",schema:"public",table:"notifications"},M).subscribe();return()=>{j.unsubscribe()}},[]);async function I(M){var Z;const j=(Z=M.target.files)==null?void 0:Z[0];if(!j||!(S!=null&&S.id))return;u(!0);const U=j.name.split(".").pop(),$=`${S.id}-${Date.now()}.${U}`,{error:Y}=await Ve.storage.from("avatars").upload($,j,{upsert:!0});if(Y){alert("Upload failed: "+Y.message),u(!1);return}const{data:P}=Ve.storage.from("avatars").getPublicUrl($),V=P.publicUrl,{error:z}=await Ve.from("profiles").update({avatar_url:V}).eq("id",S.id);if(z){alert("Failed to update profile: "+z.message),u(!1);return}y(V),r(!1),u(!1)}return E.jsxs("div",{className:"min-h-screen bg-[#f6f6f6] flex",children:[E.jsx(lk,{}),E.jsxs("div",{className:`
          flex flex-col flex-1 min-h-screen
          transition-all duration-200
          ml-0 md:ml-[${uk}px]
        `,style:{transition:"margin .2s cubic-bezier(.4,0,.2,1)"},children:[E.jsxs("header",{className:"w-full flex items-center px-4 sm:px-8 py-3 shadow-sm",style:{background:"#f6f6f6",borderBottom:"1.5px solid #edeaf8",minHeight:"64px",zIndex:10},children:[E.jsx("div",{className:"flex items-center",style:{minWidth:55,marginLeft:44},children:!N&&E.jsx("button",{className:"md:hidden flex items-center justify-center w-12 h-12 rounded-xl bg-[#6654b3] text-white shadow transition",style:{marginLeft:5},onClick:()=>b(-1),"aria-label":"Back",children:E.jsx(Th,{className:"w-7 h-7"})})}),E.jsx("div",{className:"flex-1 text-center cursor-pointer",onClick:()=>b("/dashboard"),children:E.jsx("span",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight text-[#6654b3] select-none",children:"Wonder Kids"})}),E.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[E.jsxs("button",{onClick:()=>b("/notifications"),className:"relative p-2 rounded-xl hover:bg-[#edeaf8] transition","aria-label":"Notifications",style:{marginLeft:"auto"},children:[E.jsx(uS,{className:"w-7 h-7 text-[#6654b3]"}),t>0&&E.jsx("span",{className:"absolute -top-2 -right-1 bg-[#ec4899] text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-extrabold shadow",children:t})]}),E.jsx("button",{className:"ml-1",style:{background:"none"},onClick:()=>r(!0),"aria-label":"Change profile",children:E.jsx("img",{src:h||"avatar.png",alt:"Profile",className:"w-10 h-10 rounded-full border-2 border-[#c5bdf4] shadow object-cover hover:scale-105 transition"})})]})]}),n&&E.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 max-w-sm w-full flex flex-col items-center",children:[E.jsx("img",{src:h,alt:"Profile preview",className:"w-20 h-20 rounded-full mb-4 border-2 border-[#c5bdf4] shadow object-cover"}),E.jsx("input",{ref:A,type:"file",accept:"image/*",className:"mb-4",onChange:I,disabled:l}),E.jsx("button",{onClick:()=>r(!1),className:"px-5 py-2 rounded-lg bg-[#6654b3] text-white font-bold hover:bg-[#5542a0] transition",disabled:l,children:"Close"})]})}),E.jsx("main",{className:"flex-1 p-0 bg-[#f6f6f6] min-h-[calc(100vh-64px)] transition-all duration-200",children:E.jsx("div",{className:"h-full w-full transition-all",children:E.jsx(rI,{})})})]})]})}function fk({children:t}){return t}function hk({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const _h=R.forwardRef(hk);function gk({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const om=R.forwardRef(gk);function mk({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const pk=R.forwardRef(mk);function xk({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const yk=R.forwardRef(xk);function bk({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const hS=R.forwardRef(bk);function wk({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const gS=R.forwardRef(wk);function vk({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Sk=R.forwardRef(vk);function Ek({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const Ck=R.forwardRef(Ek);function Ak({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const mS=R.forwardRef(Ak);function Tk({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const Jm=R.forwardRef(Tk);function _k({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const lm=R.forwardRef(_k);function Nk({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Rk=R.forwardRef(Nk);function Ok({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ik=R.forwardRef(Ok);function Mk({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const io=R.forwardRef(Mk);function pS(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(n=pS(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Vu(){for(var t,e,n=0,r="",l=arguments.length;n<l;n++)(t=arguments[n])&&(e=pS(t))&&(r&&(r+=" "),r+=e);return r}var Dk=Object.defineProperty,kk=(t,e,n)=>e in t?Dk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hg=(t,e,n)=>(kk(t,typeof e!="symbol"?e+"":e,n),n);let Lk=class{constructor(){hg(this,"current",this.detect()),hg(this,"handoffState","pending"),hg(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},nl=new Lk;function zh(t){var e,n;return nl.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(n=(e=t.current)==null?void 0:e.ownerDocument)!=null?n:document:null:document}function $h(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function sa(){let t=[],e={addEventListener(n,r,l,u){return n.addEventListener(r,l,u),e.add(()=>n.removeEventListener(r,l,u))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return $h(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,l){let u=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:l}),this.add(()=>{Object.assign(n.style,{[r]:u})})},group(n){let r=sa();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let l of t.splice(r,1))l()}},dispose(){for(let n of t.splice(0))n()}};return e}function ep(){let[t]=R.useState(sa);return R.useEffect(()=>()=>t.dispose(),[t]),t}let _s=(t,e)=>{nl.isServer?R.useEffect(t,e):R.useLayoutEffect(t,e)};function ul(t){let e=R.useRef(t);return _s(()=>{e.current=t},[t]),e}let rn=function(t){let e=ul(t);return ct.useCallback((...n)=>e.current(...n),[e])},jk=R.createContext(void 0);function Pk(){return R.useContext(jk)}function cm(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function ea(t,e,...n){if(t in e){let l=e[t];return typeof l=="function"?l(...n):l}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(l=>`"${l}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ea),r}var Nh=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Nh||{}),to=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(to||{});function Ri(){let t=Uk();return R.useCallback(e=>Bk({mergeRefs:t,...e}),[t])}function Bk({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:l,visible:u=!0,name:h,mergeRefs:y}){y=y??Fk;let b=xS(e,t);if(u)return sh(b,n,r,h,y);let x=l??0;if(x&2){let{static:S=!1,...A}=b;if(S)return sh(A,n,r,h,y)}if(x&1){let{unmount:S=!0,...A}=b;return ea(S?0:1,{0(){return null},1(){return sh({...A,hidden:!0,style:{display:"none"}},n,r,h,y)}})}return sh(b,n,r,h,y)}function sh(t,e={},n,r,l){let{as:u=n,children:h,refName:y="ref",...b}=gg(t,["unmount","static"]),x=t.ref!==void 0?{[y]:t.ref}:{},S=typeof h=="function"?h(e):h;"className"in b&&b.className&&typeof b.className=="function"&&(b.className=b.className(e)),b["aria-labelledby"]&&b["aria-labelledby"]===b.id&&(b["aria-labelledby"]=void 0);let A={};if(e){let N=!1,I=[];for(let[M,j]of Object.entries(e))typeof j=="boolean"&&(N=!0),j===!0&&I.push(M.replace(/([A-Z])/g,U=>`-${U.toLowerCase()}`));if(N){A["data-headlessui-state"]=I.join(" ");for(let M of I)A[`data-${M}`]=""}}if(u===R.Fragment&&(Object.keys(Uo(b)).length>0||Object.keys(Uo(A)).length>0))if(!R.isValidElement(S)||Array.isArray(S)&&S.length>1){if(Object.keys(Uo(b)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Uo(b)).concat(Object.keys(Uo(A))).map(N=>`  - ${N}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(N=>`  - ${N}`).join(`
`)].join(`
`))}else{let N=S.props,I=N==null?void 0:N.className,M=typeof I=="function"?(...$)=>cm(I(...$),b.className):cm(I,b.className),j=M?{className:M}:{},U=xS(S.props,Uo(gg(b,["ref"])));for(let $ in A)$ in U&&delete A[$];return R.cloneElement(S,Object.assign({},U,A,x,{ref:l(Vk(S),x.ref)},j))}return R.createElement(u,Object.assign({},gg(b,["ref"]),u!==R.Fragment&&x,u!==R.Fragment&&A),S)}function Uk(){let t=R.useRef([]),e=R.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function Fk(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function xS(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let l in r)l.startsWith("on")&&typeof r[l]=="function"?(n[l]!=null||(n[l]=[]),n[l].push(r[l])):e[l]=r[l];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[l=>{var u;return(u=l==null?void 0:l.preventDefault)==null?void 0:u.call(l)}]);for(let r in n)Object.assign(e,{[r](l,...u){let h=n[r];for(let y of h){if((l instanceof Event||(l==null?void 0:l.nativeEvent)instanceof Event)&&l.defaultPrevented)return;y(l,...u)}}});return e}function Ws(t){var e;return Object.assign(R.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function Uo(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function gg(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function Vk(t){return ct.version.split(".")[0]>="19"?t.props.ref:t.ref}let Hk="span";var Rh=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Rh||{});function zk(t,e){var n;let{features:r=1,...l}=t,u={ref:e,"aria-hidden":(r&2)===2?!0:(n=l["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Ri()({ourProps:u,theirProps:l,slot:{},defaultTag:Hk,name:"Hidden"})}let um=Ws(zk);function yS(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function ro(t){return yS(t)&&"tagName"in t}function ol(t){return ro(t)&&"accessKey"in t}function no(t){return ro(t)&&"tabIndex"in t}function $k(t){return ro(t)&&"style"in t}function Gk(t){return ol(t)&&t.nodeName==="IFRAME"}function qk(t){return ol(t)&&t.nodeName==="INPUT"}let bS=Symbol();function Yk(t,e=!0){return Object.assign(t,{[bS]:e})}function Sr(...t){let e=R.useRef(t);R.useEffect(()=>{e.current=t},[t]);let n=rn(r=>{for(let l of e.current)l!=null&&(typeof l=="function"?l(r):l.current=r)});return t.every(r=>r==null||(r==null?void 0:r[bS]))?void 0:n}let tp=R.createContext(null);tp.displayName="DescriptionContext";function wS(){let t=R.useContext(tp);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,wS),e}return t}function Xk(){let[t,e]=R.useState([]);return[t.length>0?t.join(" "):void 0,R.useMemo(()=>function(n){let r=rn(u=>(e(h=>[...h,u]),()=>e(h=>{let y=h.slice(),b=y.indexOf(u);return b!==-1&&y.splice(b,1),y}))),l=R.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return ct.createElement(tp.Provider,{value:l},n.children)},[e])]}let Wk="p";function Kk(t,e){let n=R.useId(),r=Pk(),{id:l=`headlessui-description-${n}`,...u}=t,h=wS(),y=Sr(e);_s(()=>h.register(l),[l,h.register]);let b=r||!1,x=R.useMemo(()=>({...h.slot,disabled:b}),[h.slot,b]),S={ref:y,...h.props,id:l};return Ri()({ourProps:S,theirProps:u,slot:x,defaultTag:Wk,name:h.name||"Description"})}let Zk=Ws(Kk),Qk=Object.assign(Zk,{});var vS=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(vS||{});let Jk=R.createContext(()=>{});function eL({value:t,children:e}){return ct.createElement(Jk.Provider,{value:t},e)}let SS=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};var tL=Object.defineProperty,nL=(t,e,n)=>e in t?tL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sL=(t,e,n)=>(nL(t,e+"",n),n),ES=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},wi=(t,e,n)=>(ES(t,e,"read from private field"),n?n.call(t):e.get(t)),mg=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},sw=(t,e,n,r)=>(ES(t,e,"write to private field"),e.set(t,n),n),fr,Hu,zu;let iL=class{constructor(e){mg(this,fr,{}),mg(this,Hu,new SS(()=>new Set)),mg(this,zu,new Set),sL(this,"disposables",sa()),sw(this,fr,e)}dispose(){this.disposables.dispose()}get state(){return wi(this,fr)}subscribe(e,n){let r={selector:e,callback:n,current:e(wi(this,fr))};return wi(this,zu).add(r),this.disposables.add(()=>{wi(this,zu).delete(r)})}on(e,n){return wi(this,Hu).get(e).add(n),this.disposables.add(()=>{wi(this,Hu).get(e).delete(n)})}send(e){let n=this.reduce(wi(this,fr),e);if(n!==wi(this,fr)){sw(this,fr,n);for(let r of wi(this,zu)){let l=r.selector(wi(this,fr));CS(r.current,l)||(r.current=l,r.callback(l))}for(let r of wi(this,Hu).get(e.type))r(wi(this,fr),e)}}};fr=new WeakMap,Hu=new WeakMap,zu=new WeakMap;function CS(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:pg(t[Symbol.iterator](),e[Symbol.iterator]()):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?t.size!==e.size?!1:pg(t.entries(),e.entries()):iw(t)&&iw(e)?pg(Object.entries(t)[Symbol.iterator](),Object.entries(e)[Symbol.iterator]()):!1}function pg(t,e){do{let n=t.next(),r=e.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function iw(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||Object.getPrototypeOf(e)===null}var rL=Object.defineProperty,aL=(t,e,n)=>e in t?rL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rw=(t,e,n)=>(aL(t,typeof e!="symbol"?e+"":e,n),n),oL=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(oL||{});let lL={0(t,e){let n=e.id,r=t.stack,l=t.stack.indexOf(n);if(l!==-1){let u=t.stack.slice();return u.splice(l,1),u.push(n),r=u,{...t,stack:r}}return{...t,stack:[...t.stack,n]}},1(t,e){let n=e.id,r=t.stack.indexOf(n);if(r===-1)return t;let l=t.stack.slice();return l.splice(r,1),{...t,stack:l}}},cL=class AS extends iL{constructor(){super(...arguments),rw(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),rw(this,"selectors",{isTop:(e,n)=>e.stack[e.stack.length-1]===n,inStack:(e,n)=>e.stack.includes(n)})}static new(){return new AS({stack:[]})}reduce(e,n){return ea(n.type,lL,e,n)}};const TS=new SS(()=>cL.new());var xg={exports:{}},yg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw;function uL(){if(aw)return yg;aw=1;var t=Uh();function e(b,x){return b===x&&(b!==0||1/b===1/x)||b!==b&&x!==x}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,l=t.useRef,u=t.useEffect,h=t.useMemo,y=t.useDebugValue;return yg.useSyncExternalStoreWithSelector=function(b,x,S,A,N){var I=l(null);if(I.current===null){var M={hasValue:!1,value:null};I.current=M}else M=I.current;I=h(function(){function U(z){if(!$){if($=!0,Y=z,z=A(z),N!==void 0&&M.hasValue){var Z=M.value;if(N(Z,z))return P=Z}return P=z}if(Z=P,n(Y,z))return Z;var W=A(z);return N!==void 0&&N(Z,W)?(Y=z,Z):(Y=z,P=W)}var $=!1,Y,P,V=S===void 0?null:S;return[function(){return U(x())},V===null?void 0:function(){return U(V())}]},[x,S,A,N]);var j=r(b,I[0],I[1]);return u(function(){M.hasValue=!0,M.value=j},[j]),y(j),j},yg}var ow;function dL(){return ow||(ow=1,xg.exports=uL()),xg.exports}var fL=dL();function _S(t,e,n=CS){return fL.useSyncExternalStoreWithSelector(rn(r=>t.subscribe(hL,r)),rn(()=>t.state),rn(()=>t.state),rn(e),n)}function hL(t){return t}function Nd(t,e){let n=R.useId(),r=TS.get(e),[l,u]=_S(r,R.useCallback(h=>[r.selectors.isTop(h,n),r.selectors.inStack(h,n)],[r,n]));return _s(()=>{if(t)return r.actions.push(n),()=>r.actions.pop(n)},[r,t,n]),t?u?l:!0:!1}let dm=new Map,ed=new Map;function lw(t){var e;let n=(e=ed.get(t))!=null?e:0;return ed.set(t,n+1),n!==0?()=>cw(t):(dm.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>cw(t))}function cw(t){var e;let n=(e=ed.get(t))!=null?e:1;if(n===1?ed.delete(t):ed.set(t,n-1),n!==1)return;let r=dm.get(t);r&&(r["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",r["aria-hidden"]),t.inert=r.inert,dm.delete(t))}function gL(t,{allowed:e,disallowed:n}={}){let r=Nd(t,"inert-others");_s(()=>{var l,u;if(!r)return;let h=sa();for(let b of(l=n==null?void 0:n())!=null?l:[])b&&h.add(lw(b));let y=(u=e==null?void 0:e())!=null?u:[];for(let b of y){if(!b)continue;let x=zh(b);if(!x)continue;let S=b.parentElement;for(;S&&S!==x.body;){for(let A of S.children)y.some(N=>A.contains(N))||h.add(lw(A));S=S.parentElement}}return h.dispose},[r,e,n])}function mL(t,e,n){let r=ul(l=>{let u=l.getBoundingClientRect();u.x===0&&u.y===0&&u.width===0&&u.height===0&&n()});R.useEffect(()=>{if(!t)return;let l=e===null?null:ol(e)?e:e.current;if(!l)return;let u=sa();if(typeof ResizeObserver<"u"){let h=new ResizeObserver(()=>r.current(l));h.observe(l),u.add(()=>h.disconnect())}if(typeof IntersectionObserver<"u"){let h=new IntersectionObserver(()=>r.current(l));h.observe(l),u.add(()=>h.disconnect())}return()=>u.dispose()},[e,r,t])}let Oh=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),pL=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Xr=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(Xr||{}),fm=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(fm||{}),xL=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(xL||{});function yL(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Oh)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function bL(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(pL)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var NS=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(NS||{});function wL(t,e=0){var n;return t===((n=zh(t))==null?void 0:n.body)?!1:ea(e,{0(){return t.matches(Oh)},1(){let r=t;for(;r!==null;){if(r.matches(Oh))return!0;r=r.parentElement}return!1}})}var vL=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(vL||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Zr(t){t==null||t.focus({preventScroll:!0})}let SL=["textarea","input"].join(",");function EL(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,SL))!=null?n:!1}function CL(t,e=n=>n){return t.slice().sort((n,r)=>{let l=e(n),u=e(r);if(l===null||u===null)return 0;let h=l.compareDocumentPosition(u);return h&Node.DOCUMENT_POSITION_FOLLOWING?-1:h&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function td(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:l=[]}={}){let u=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,h=Array.isArray(t)?n?CL(t):t:e&64?bL(t):yL(t);l.length>0&&h.length>1&&(h=h.filter(I=>!l.some(M=>M!=null&&"current"in M?(M==null?void 0:M.current)===I:M===I))),r=r??u.activeElement;let y=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),b=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,h.indexOf(r))-1;if(e&4)return Math.max(0,h.indexOf(r))+1;if(e&8)return h.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),x=e&32?{preventScroll:!0}:{},S=0,A=h.length,N;do{if(S>=A||S+A<=0)return 0;let I=b+S;if(e&16)I=(I+A)%A;else{if(I<0)return 3;if(I>=A)return 1}N=h[I],N==null||N.focus(x),S+=y}while(N!==u.activeElement);return e&6&&EL(N)&&N.select(),2}function RS(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function AL(){return/Android/gi.test(window.navigator.userAgent)}function uw(){return RS()||AL()}function ih(t,e,n,r){let l=ul(n);R.useEffect(()=>{if(!t)return;function u(h){l.current(h)}return document.addEventListener(e,u,r),()=>document.removeEventListener(e,u,r)},[t,e,r])}function OS(t,e,n,r){let l=ul(n);R.useEffect(()=>{if(!t)return;function u(h){l.current(h)}return window.addEventListener(e,u,r),()=>window.removeEventListener(e,u,r)},[t,e,r])}const dw=30;function TL(t,e,n){let r=ul(n),l=R.useCallback(function(y,b){if(y.defaultPrevented)return;let x=b(y);if(x===null||!x.getRootNode().contains(x)||!x.isConnected)return;let S=function A(N){return typeof N=="function"?A(N()):Array.isArray(N)||N instanceof Set?N:[N]}(e);for(let A of S)if(A!==null&&(A.contains(x)||y.composed&&y.composedPath().includes(A)))return;return!wL(x,NS.Loose)&&x.tabIndex!==-1&&y.preventDefault(),r.current(y,x)},[r,e]),u=R.useRef(null);ih(t,"pointerdown",y=>{var b,x;uw()||(u.current=((x=(b=y.composedPath)==null?void 0:b.call(y))==null?void 0:x[0])||y.target)},!0),ih(t,"pointerup",y=>{if(uw()||!u.current)return;let b=u.current;return u.current=null,l(y,()=>b)},!0);let h=R.useRef({x:0,y:0});ih(t,"touchstart",y=>{h.current.x=y.touches[0].clientX,h.current.y=y.touches[0].clientY},!0),ih(t,"touchend",y=>{let b={x:y.changedTouches[0].clientX,y:y.changedTouches[0].clientY};if(!(Math.abs(b.x-h.current.x)>=dw||Math.abs(b.y-h.current.y)>=dw))return l(y,()=>no(y.target)?y.target:null)},!0),OS(t,"blur",y=>l(y,()=>Gk(window.document.activeElement)?window.document.activeElement:null),!0)}function Gh(...t){return R.useMemo(()=>zh(...t),[...t])}function IS(t,e,n,r){let l=ul(n);R.useEffect(()=>{t=t??window;function u(h){l.current(h)}return t.addEventListener(e,u,r),()=>t.removeEventListener(e,u,r)},[t,e,r])}function _L(t){return R.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function NL(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(l){return r.add(l),()=>r.delete(l)},dispatch(l,...u){let h=e[l].call(n,...u);h&&(n=h,r.forEach(y=>y()))}}}function RL(){let t;return{before({doc:e}){var n;let r=e.documentElement,l=(n=e.defaultView)!=null?n:window;t=Math.max(0,l.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,l=Math.max(0,r.clientWidth-r.offsetWidth),u=Math.max(0,t-l);n.style(r,"paddingRight",`${u}px`)}}}function OL(){return RS()?{before({doc:t,d:e,meta:n}){function r(l){return n.containers.flatMap(u=>u()).some(u=>u.contains(l))}e.microTask(()=>{var l;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let y=sa();y.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>y.dispose()))}let u=(l=window.scrollY)!=null?l:window.pageYOffset,h=null;e.addEventListener(t,"click",y=>{if(no(y.target))try{let b=y.target.closest("a");if(!b)return;let{hash:x}=new URL(b.href),S=t.querySelector(x);no(S)&&!r(S)&&(h=S)}catch{}},!0),e.addEventListener(t,"touchstart",y=>{if(no(y.target)&&$k(y.target))if(r(y.target)){let b=y.target;for(;b.parentElement&&r(b.parentElement);)b=b.parentElement;e.style(b,"overscrollBehavior","contain")}else e.style(y.target,"touchAction","none")}),e.addEventListener(t,"touchmove",y=>{if(no(y.target)){if(qk(y.target))return;if(r(y.target)){let b=y.target;for(;b.parentElement&&b.dataset.headlessuiPortal!==""&&!(b.scrollHeight>b.clientHeight||b.scrollWidth>b.clientWidth);)b=b.parentElement;b.dataset.headlessuiPortal===""&&y.preventDefault()}else y.preventDefault()}},{passive:!1}),e.add(()=>{var y;let b=(y=window.scrollY)!=null?y:window.pageYOffset;u!==b&&window.scrollTo(0,u),h&&h.isConnected&&(h.scrollIntoView({block:"nearest"}),h=null)})})}}:{}}function IL(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function ML(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let zo=NL(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:sa(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:ML(n)},l=[OL(),RL(),IL()];l.forEach(({before:u})=>u==null?void 0:u(r)),l.forEach(({after:u})=>u==null?void 0:u(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});zo.subscribe(()=>{let t=zo.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",l=n.count!==0;(l&&!r||!l&&r)&&zo.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&zo.dispatch("TEARDOWN",n)}});function DL(t,e,n=()=>({containers:[]})){let r=_L(zo),l=e?r.get(e):void 0,u=l?l.count>0:!1;return _s(()=>{if(!(!e||!t))return zo.dispatch("PUSH",e,n),()=>zo.dispatch("POP",e,n)},[t,e]),u}function kL(t,e,n=()=>[document.body]){let r=Nd(t,"scroll-lock");DL(r,e,l=>{var u;return{containers:[...(u=l.containers)!=null?u:[],n]}})}function LL(t=0){let[e,n]=R.useState(t),r=R.useCallback(b=>n(b),[e]),l=R.useCallback(b=>n(x=>x|b),[e]),u=R.useCallback(b=>(e&b)===b,[e]),h=R.useCallback(b=>n(x=>x&~b),[n]),y=R.useCallback(b=>n(x=>x^b),[n]);return{flags:e,setFlag:r,addFlag:l,hasFlag:u,removeFlag:h,toggleFlag:y}}var jL={},fw,hw;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((fw=process==null?void 0:jL)==null?void 0:fw.NODE_ENV)==="test"&&typeof((hw=Element==null?void 0:Element.prototype)==null?void 0:hw.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var PL=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(PL||{});function BL(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function UL(t,e,n,r){let[l,u]=R.useState(n),{hasFlag:h,addFlag:y,removeFlag:b}=LL(t&&l?3:0),x=R.useRef(!1),S=R.useRef(!1),A=ep();return _s(()=>{var N;if(t){if(n&&u(!0),!e){n&&y(3);return}return(N=r==null?void 0:r.start)==null||N.call(r,n),FL(e,{inFlight:x,prepare(){S.current?S.current=!1:S.current=x.current,x.current=!0,!S.current&&(n?(y(3),b(4)):(y(4),b(2)))},run(){S.current?n?(b(3),y(4)):(b(4),y(3)):n?b(1):y(1)},done(){var I;S.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(x.current=!1,b(7),n||u(!1),(I=r==null?void 0:r.end)==null||I.call(r,n))}})}},[t,n,e,A]),t?[l,{closed:h(1),enter:h(2),leave:h(4),transition:h(2)||h(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function FL(t,{prepare:e,run:n,done:r,inFlight:l}){let u=sa();return HL(t,{prepare:e,inFlight:l}),u.nextFrame(()=>{n(),u.requestAnimationFrame(()=>{u.add(VL(t,r))})}),u.dispose}function VL(t,e){var n,r;let l=sa();if(!t)return l.dispose;let u=!1;l.add(()=>{u=!0});let h=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(y=>y instanceof CSSTransition))!=null?r:[];return h.length===0?(e(),l.dispose):(Promise.allSettled(h.map(y=>y.finished)).then(()=>{u||e()}),l.dispose)}function HL(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function np(t,e){let n=R.useRef([]),r=rn(t);R.useEffect(()=>{let l=[...n.current];for(let[u,h]of e.entries())if(n.current[u]!==h){let y=r(e,l);return n.current=e,y}},[r,...e])}let qh=R.createContext(null);qh.displayName="OpenClosedContext";var Gi=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Gi||{});function Yh(){return R.useContext(qh)}function zL({value:t,children:e}){return ct.createElement(qh.Provider,{value:t},e)}function $L({children:t}){return ct.createElement(qh.Provider,{value:null},t)}function GL(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let $a=[];GL(()=>{function t(e){if(!no(e.target)||e.target===document.body||$a[0]===e.target)return;let n=e.target;n=n.closest(Oh),$a.unshift(n??e.target),$a=$a.filter(r=>r!=null&&r.isConnected),$a.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function MS(t){let e=rn(t),n=R.useRef(!1);R.useEffect(()=>(n.current=!1,()=>{n.current=!0,$h(()=>{n.current&&e()})}),[e])}function qL(){let t=typeof document>"u";return"useSyncExternalStore"in tb?(e=>e.useSyncExternalStore)(tb)(()=>()=>{},()=>!1,()=>!t):!1}function Rd(){let t=qL(),[e,n]=R.useState(nl.isHandoffComplete);return e&&nl.isHandoffComplete===!1&&n(!1),R.useEffect(()=>{e!==!0&&n(!0)},[e]),R.useEffect(()=>nl.handoff(),[]),t?!1:e}let DS=R.createContext(!1);function YL(){return R.useContext(DS)}function gw(t){return ct.createElement(DS.Provider,{value:t.force},t.children)}function XL(t){let e=YL(),n=R.useContext(LS),[r,l]=R.useState(()=>{var u;if(!e&&n!==null)return(u=n.current)!=null?u:null;if(nl.isServer)return null;let h=t==null?void 0:t.getElementById("headlessui-portal-root");if(h)return h;if(t===null)return null;let y=t.createElement("div");return y.setAttribute("id","headlessui-portal-root"),t.body.appendChild(y)});return R.useEffect(()=>{r!==null&&(t!=null&&t.body.contains(r)||t==null||t.body.appendChild(r))},[r,t]),R.useEffect(()=>{e||n!==null&&l(n.current)},[n,l,e]),r}let kS=R.Fragment,WL=Ws(function(t,e){let{ownerDocument:n=null,...r}=t,l=R.useRef(null),u=Sr(Yk(I=>{l.current=I}),e),h=Gh(l),y=n??h,b=XL(y),[x]=R.useState(()=>{var I;return nl.isServer?null:(I=y==null?void 0:y.createElement("div"))!=null?I:null}),S=R.useContext(hm),A=Rd();_s(()=>{!b||!x||b.contains(x)||(x.setAttribute("data-headlessui-portal",""),b.appendChild(x))},[b,x]),_s(()=>{if(x&&S)return S.register(x)},[S,x]),MS(()=>{var I;!b||!x||(yS(x)&&b.contains(x)&&b.removeChild(x),b.childNodes.length<=0&&((I=b.parentElement)==null||I.removeChild(b)))});let N=Ri();return A?!b||!x?null:VI.createPortal(N({ourProps:{ref:u},theirProps:r,slot:{},defaultTag:kS,name:"Portal"}),x):null});function KL(t,e){let n=Sr(e),{enabled:r=!0,ownerDocument:l,...u}=t,h=Ri();return r?ct.createElement(WL,{...u,ownerDocument:l,ref:n}):h({ourProps:{ref:n},theirProps:u,slot:{},defaultTag:kS,name:"Portal"})}let ZL=R.Fragment,LS=R.createContext(null);function QL(t,e){let{target:n,...r}=t,l={ref:Sr(e)},u=Ri();return ct.createElement(LS.Provider,{value:n},u({ourProps:l,theirProps:r,defaultTag:ZL,name:"Popover.Group"}))}let hm=R.createContext(null);function JL(){let t=R.useContext(hm),e=R.useRef([]),n=rn(u=>(e.current.push(u),t&&t.register(u),()=>r(u))),r=rn(u=>{let h=e.current.indexOf(u);h!==-1&&e.current.splice(h,1),t&&t.unregister(u)}),l=R.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,R.useMemo(()=>function({children:u}){return ct.createElement(hm.Provider,{value:l},u)},[l])]}let ej=Ws(KL),jS=Ws(QL),tj=Object.assign(ej,{Group:jS});function nj(t,e=typeof document<"u"?document.defaultView:null,n){let r=Nd(t,"escape");IS(e,"keydown",l=>{r&&(l.defaultPrevented||l.key===vS.Escape&&n(l))})}function sj(){var t;let[e]=R.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=R.useState((t=e==null?void 0:e.matches)!=null?t:!1);return _s(()=>{if(!e)return;function l(u){r(u.matches)}return e.addEventListener("change",l),()=>e.removeEventListener("change",l)},[e]),n}function ij({defaultContainers:t=[],portals:e,mainTreeNode:n}={}){let r=Gh(n),l=rn(()=>{var u,h;let y=[];for(let b of t)b!==null&&(ro(b)?y.push(b):"current"in b&&ro(b.current)&&y.push(b.current));if(e!=null&&e.current)for(let b of e.current)y.push(b);for(let b of(u=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?u:[])b!==document.body&&b!==document.head&&ro(b)&&b.id!=="headlessui-portal-root"&&(n&&(b.contains(n)||b.contains((h=n==null?void 0:n.getRootNode())==null?void 0:h.host))||y.some(x=>b.contains(x))||y.push(b));return y});return{resolveContainers:l,contains:rn(u=>l().some(h=>h.contains(u)))}}let PS=R.createContext(null);function mw({children:t,node:e}){let[n,r]=R.useState(null),l=BS(e??n);return ct.createElement(PS.Provider,{value:l},t,l===null&&ct.createElement(um,{features:Rh.Hidden,ref:u=>{var h,y;if(u){for(let b of(y=(h=zh(u))==null?void 0:h.querySelectorAll("html > *, body > *"))!=null?y:[])if(b!==document.body&&b!==document.head&&ro(b)&&b!=null&&b.contains(u)){r(b);break}}}}))}function BS(t=null){var e;return(e=R.useContext(PS))!=null?e:t}function sp(){let t=R.useRef(!1);return _s(()=>(t.current=!0,()=>{t.current=!1}),[]),t}var $u=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))($u||{});function rj(){let t=R.useRef(0);return OS(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function US(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)ro(n.current)&&e.add(n.current);return e}let aj="div";var Ho=(t=>(t[t.None=0]="None",t[t.InitialFocus=1]="InitialFocus",t[t.TabLock=2]="TabLock",t[t.FocusLock=4]="FocusLock",t[t.RestoreFocus=8]="RestoreFocus",t[t.AutoFocus=16]="AutoFocus",t))(Ho||{});function oj(t,e){let n=R.useRef(null),r=Sr(n,e),{initialFocus:l,initialFocusFallback:u,containers:h,features:y=15,...b}=t;Rd()||(y=0);let x=Gh(n);dj(y,{ownerDocument:x});let S=fj(y,{ownerDocument:x,container:n,initialFocus:l,initialFocusFallback:u});hj(y,{ownerDocument:x,container:n,containers:h,previousActiveElement:S});let A=rj(),N=rn(Y=>{if(!ol(n.current))return;let P=n.current;(V=>V())(()=>{ea(A.current,{[$u.Forwards]:()=>{td(P,Xr.First,{skipElements:[Y.relatedTarget,u]})},[$u.Backwards]:()=>{td(P,Xr.Last,{skipElements:[Y.relatedTarget,u]})}})})}),I=Nd(!!(y&2),"focus-trap#tab-lock"),M=ep(),j=R.useRef(!1),U={ref:r,onKeyDown(Y){Y.key=="Tab"&&(j.current=!0,M.requestAnimationFrame(()=>{j.current=!1}))},onBlur(Y){if(!(y&4))return;let P=US(h);ol(n.current)&&P.add(n.current);let V=Y.relatedTarget;no(V)&&V.dataset.headlessuiFocusGuard!=="true"&&(FS(P,V)||(j.current?td(n.current,ea(A.current,{[$u.Forwards]:()=>Xr.Next,[$u.Backwards]:()=>Xr.Previous})|Xr.WrapAround,{relativeTo:Y.target}):no(Y.target)&&Zr(Y.target)))}},$=Ri();return ct.createElement(ct.Fragment,null,I&&ct.createElement(um,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:N,features:Rh.Focusable}),$({ourProps:U,theirProps:b,defaultTag:aj,name:"FocusTrap"}),I&&ct.createElement(um,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:N,features:Rh.Focusable}))}let lj=Ws(oj),cj=Object.assign(lj,{features:Ho});function uj(t=!0){let e=R.useRef($a.slice());return np(([n],[r])=>{r===!0&&n===!1&&$h(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=$a.slice())},[t,$a,e]),rn(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function dj(t,{ownerDocument:e}){let n=!!(t&8),r=uj(n);np(()=>{n||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&Zr(r())},[n]),MS(()=>{n&&Zr(r())})}function fj(t,{ownerDocument:e,container:n,initialFocus:r,initialFocusFallback:l}){let u=R.useRef(null),h=Nd(!!(t&1),"focus-trap#initial-focus"),y=sp();return np(()=>{if(t===0)return;if(!h){l!=null&&l.current&&Zr(l.current);return}let b=n.current;b&&$h(()=>{if(!y.current)return;let x=e==null?void 0:e.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===x){u.current=x;return}}else if(b.contains(x)){u.current=x;return}if(r!=null&&r.current)Zr(r.current);else{if(t&16){if(td(b,Xr.First|Xr.AutoFocus)!==fm.Error)return}else if(td(b,Xr.First)!==fm.Error)return;if(l!=null&&l.current&&(Zr(l.current),(e==null?void 0:e.activeElement)===l.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}u.current=e==null?void 0:e.activeElement})},[l,h,t]),u}function hj(t,{ownerDocument:e,container:n,containers:r,previousActiveElement:l}){let u=sp(),h=!!(t&4);IS(e==null?void 0:e.defaultView,"focus",y=>{if(!h||!u.current)return;let b=US(r);ol(n.current)&&b.add(n.current);let x=l.current;if(!x)return;let S=y.target;ol(S)?FS(b,S)?(l.current=S,Zr(S)):(y.preventDefault(),y.stopPropagation(),Zr(x)):Zr(l.current)},!0)}function FS(t,e){for(let n of t)if(n.contains(e))return!0;return!1}function VS(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:zS)!==R.Fragment||ct.Children.count(t.children)===1}let Xh=R.createContext(null);Xh.displayName="TransitionContext";var gj=(t=>(t.Visible="visible",t.Hidden="hidden",t))(gj||{});function mj(){let t=R.useContext(Xh);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function pj(){let t=R.useContext(Wh);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let Wh=R.createContext(null);Wh.displayName="NestingContext";function Kh(t){return"children"in t?Kh(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function HS(t,e){let n=ul(t),r=R.useRef([]),l=sp(),u=ep(),h=rn((I,M=to.Hidden)=>{let j=r.current.findIndex(({el:U})=>U===I);j!==-1&&(ea(M,{[to.Unmount](){r.current.splice(j,1)},[to.Hidden](){r.current[j].state="hidden"}}),u.microTask(()=>{var U;!Kh(r)&&l.current&&((U=n.current)==null||U.call(n))}))}),y=rn(I=>{let M=r.current.find(({el:j})=>j===I);return M?M.state!=="visible"&&(M.state="visible"):r.current.push({el:I,state:"visible"}),()=>h(I,to.Unmount)}),b=R.useRef([]),x=R.useRef(Promise.resolve()),S=R.useRef({enter:[],leave:[]}),A=rn((I,M,j)=>{b.current.splice(0),e&&(e.chains.current[M]=e.chains.current[M].filter(([U])=>U!==I)),e==null||e.chains.current[M].push([I,new Promise(U=>{b.current.push(U)})]),e==null||e.chains.current[M].push([I,new Promise(U=>{Promise.all(S.current[M].map(([$,Y])=>Y)).then(()=>U())})]),M==="enter"?x.current=x.current.then(()=>e==null?void 0:e.wait.current).then(()=>j(M)):j(M)}),N=rn((I,M,j)=>{Promise.all(S.current[M].splice(0).map(([U,$])=>$)).then(()=>{var U;(U=b.current.shift())==null||U()}).then(()=>j(M))});return R.useMemo(()=>({children:r,register:y,unregister:h,onStart:A,onStop:N,wait:x,chains:S}),[y,h,r,A,N,S,x])}let zS=R.Fragment,$S=Nh.RenderStrategy;function xj(t,e){var n,r;let{transition:l=!0,beforeEnter:u,afterEnter:h,beforeLeave:y,afterLeave:b,enter:x,enterFrom:S,enterTo:A,entered:N,leave:I,leaveFrom:M,leaveTo:j,...U}=t,[$,Y]=R.useState(null),P=R.useRef(null),V=VS(t),z=Sr(...V?[P,e,Y]:e===null?[]:[e]),Z=(n=U.unmount)==null||n?to.Unmount:to.Hidden,{show:W,appear:ae,initial:X}=mj(),[be,Ae]=R.useState(W?"visible":"hidden"),ve=pj(),{register:ce,unregister:Fe}=ve;_s(()=>ce(P),[ce,P]),_s(()=>{if(Z===to.Hidden&&P.current){if(W&&be!=="visible"){Ae("visible");return}return ea(be,{hidden:()=>Fe(P),visible:()=>ce(P)})}},[be,P,ce,Fe,W,Z]);let se=Rd();_s(()=>{if(V&&se&&be==="visible"&&P.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[P,be,se,V]);let re=X&&!ae,le=ae&&W&&X,De=R.useRef(!1),$e=HS(()=>{De.current||(Ae("hidden"),Fe(P))},ve),H=rn(At=>{De.current=!0;let Ze=At?"enter":"leave";$e.onStart(P,Ze,pt=>{pt==="enter"?u==null||u():pt==="leave"&&(y==null||y())})}),te=rn(At=>{let Ze=At?"enter":"leave";De.current=!1,$e.onStop(P,Ze,pt=>{pt==="enter"?h==null||h():pt==="leave"&&(b==null||b())}),Ze==="leave"&&!Kh($e)&&(Ae("hidden"),Fe(P))});R.useEffect(()=>{V&&l||(H(W),te(W))},[W,V,l]);let ge=!(!l||!V||!se||re),[,pe]=UL(ge,$,W,{start:H,end:te}),Be=Uo({ref:z,className:((r=cm(U.className,le&&x,le&&S,pe.enter&&x,pe.enter&&pe.closed&&S,pe.enter&&!pe.closed&&A,pe.leave&&I,pe.leave&&!pe.closed&&M,pe.leave&&pe.closed&&j,!pe.transition&&W&&N))==null?void 0:r.trim())||void 0,...BL(pe)}),ze=0;be==="visible"&&(ze|=Gi.Open),be==="hidden"&&(ze|=Gi.Closed),W&&be==="hidden"&&(ze|=Gi.Opening),!W&&be==="visible"&&(ze|=Gi.Closing);let Ee=Ri();return ct.createElement(Wh.Provider,{value:$e},ct.createElement(zL,{value:ze},Ee({ourProps:Be,theirProps:U,defaultTag:zS,features:$S,visible:be==="visible",name:"Transition.Child"})))}function yj(t,e){let{show:n,appear:r=!1,unmount:l=!0,...u}=t,h=R.useRef(null),y=VS(t),b=Sr(...y?[h,e]:e===null?[]:[e]);Rd();let x=Yh();if(n===void 0&&x!==null&&(n=(x&Gi.Open)===Gi.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[S,A]=R.useState(n?"visible":"hidden"),N=HS(()=>{n||A("hidden")}),[I,M]=R.useState(!0),j=R.useRef([n]);_s(()=>{I!==!1&&j.current[j.current.length-1]!==n&&(j.current.push(n),M(!1))},[j,n]);let U=R.useMemo(()=>({show:n,appear:r,initial:I}),[n,r,I]);_s(()=>{n?A("visible"):!Kh(N)&&h.current!==null&&A("hidden")},[n,N]);let $={unmount:l},Y=rn(()=>{var z;I&&M(!1),(z=t.beforeEnter)==null||z.call(t)}),P=rn(()=>{var z;I&&M(!1),(z=t.beforeLeave)==null||z.call(t)}),V=Ri();return ct.createElement(Wh.Provider,{value:N},ct.createElement(Xh.Provider,{value:U},V({ourProps:{...$,as:R.Fragment,children:ct.createElement(GS,{ref:b,...$,...u,beforeEnter:Y,beforeLeave:P})},theirProps:{},defaultTag:R.Fragment,features:$S,visible:S==="visible",name:"Transition"})))}function bj(t,e){let n=R.useContext(Xh)!==null,r=Yh()!==null;return ct.createElement(ct.Fragment,null,!n&&r?ct.createElement(gm,{ref:e,...t}):ct.createElement(GS,{ref:e,...t}))}let gm=Ws(yj),GS=Ws(xj),ip=Ws(bj),wj=Object.assign(gm,{Child:ip,Root:gm});var vj=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(vj||{}),Sj=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(Sj||{});let Ej={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},rp=R.createContext(null);rp.displayName="DialogContext";function Zh(t){let e=R.useContext(rp);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Zh),n}return e}function Cj(t,e){return ea(e.type,Ej,t,e)}let pw=Ws(function(t,e){let n=R.useId(),{id:r=`headlessui-dialog-${n}`,open:l,onClose:u,initialFocus:h,role:y="dialog",autoFocus:b=!0,__demoMode:x=!1,unmount:S=!1,...A}=t,N=R.useRef(!1);y=function(){return y==="dialog"||y==="alertdialog"?y:(N.current||(N.current=!0,console.warn(`Invalid role [${y}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let I=Yh();l===void 0&&I!==null&&(l=(I&Gi.Open)===Gi.Open);let M=R.useRef(null),j=Sr(M,e),U=Gh(M),$=l?0:1,[Y,P]=R.useReducer(Cj,{titleId:null,descriptionId:null,panelRef:R.createRef()}),V=rn(()=>u(!1)),z=rn(pe=>P({type:0,id:pe})),Z=Rd()?$===0:!1,[W,ae]=JL(),X={get current(){var pe;return(pe=Y.panelRef.current)!=null?pe:M.current}},be=BS(),{resolveContainers:Ae}=ij({mainTreeNode:be,portals:W,defaultContainers:[X]}),ve=I!==null?(I&Gi.Closing)===Gi.Closing:!1;gL(x||ve?!1:Z,{allowed:rn(()=>{var pe,Be;return[(Be=(pe=M.current)==null?void 0:pe.closest("[data-headlessui-portal]"))!=null?Be:null]}),disallowed:rn(()=>{var pe;return[(pe=be==null?void 0:be.closest("body > *:not(#headlessui-portal-root)"))!=null?pe:null]})});let ce=TS.get(null);_s(()=>{if(Z)return ce.actions.push(r),()=>ce.actions.pop(r)},[ce,r,Z]);let Fe=_S(ce,R.useCallback(pe=>ce.selectors.isTop(pe,r),[ce,r]));TL(Fe,Ae,pe=>{pe.preventDefault(),V()}),nj(Fe,U==null?void 0:U.defaultView,pe=>{pe.preventDefault(),pe.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),V()}),kL(x||ve?!1:Z,U,Ae),mL(Z,M,V);let[se,re]=Xk(),le=R.useMemo(()=>[{dialogState:$,close:V,setTitleId:z,unmount:S},Y],[$,Y,V,z,S]),De=R.useMemo(()=>({open:$===0}),[$]),$e={ref:j,id:r,role:y,tabIndex:-1,"aria-modal":x?void 0:$===0?!0:void 0,"aria-labelledby":Y.titleId,"aria-describedby":se,unmount:S},H=!sj(),te=Ho.None;Z&&!x&&(te|=Ho.RestoreFocus,te|=Ho.TabLock,b&&(te|=Ho.AutoFocus),H&&(te|=Ho.InitialFocus));let ge=Ri();return ct.createElement($L,null,ct.createElement(gw,{force:!0},ct.createElement(tj,null,ct.createElement(rp.Provider,{value:le},ct.createElement(jS,{target:M},ct.createElement(gw,{force:!1},ct.createElement(re,{slot:De},ct.createElement(ae,null,ct.createElement(cj,{initialFocus:h,initialFocusFallback:M,containers:Ae,features:te},ct.createElement(eL,{value:V},ge({ourProps:$e,theirProps:A,slot:De,defaultTag:Aj,features:Tj,visible:$===0,name:"Dialog"})))))))))))}),Aj="div",Tj=Nh.RenderStrategy|Nh.Static;function _j(t,e){let{transition:n=!1,open:r,...l}=t,u=Yh(),h=t.hasOwnProperty("open")||u!==null,y=t.hasOwnProperty("onClose");if(!h&&!y)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!h)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!y)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!u&&typeof t.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${t.open}`);if(typeof t.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${t.onClose}`);return(r!==void 0||n)&&!l.static?ct.createElement(mw,null,ct.createElement(wj,{show:r,transition:n,unmount:l.unmount},ct.createElement(pw,{ref:e,...l}))):ct.createElement(mw,null,ct.createElement(pw,{ref:e,open:r,...l}))}let Nj="div";function Rj(t,e){let n=R.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:l=!1,...u}=t,[{dialogState:h,unmount:y},b]=Zh("Dialog.Panel"),x=Sr(e,b.panelRef),S=R.useMemo(()=>({open:h===0}),[h]),A=rn(U=>{U.stopPropagation()}),N={ref:x,id:r,onClick:A},I=l?ip:R.Fragment,M=l?{unmount:y}:{},j=Ri();return ct.createElement(I,{...M},j({ourProps:N,theirProps:u,slot:S,defaultTag:Nj,name:"Dialog.Panel"}))}let Oj="div";function Ij(t,e){let{transition:n=!1,...r}=t,[{dialogState:l,unmount:u}]=Zh("Dialog.Backdrop"),h=R.useMemo(()=>({open:l===0}),[l]),y={ref:e,"aria-hidden":!0},b=n?ip:R.Fragment,x=n?{unmount:u}:{},S=Ri();return ct.createElement(b,{...x},S({ourProps:y,theirProps:r,slot:h,defaultTag:Oj,name:"Dialog.Backdrop"}))}let Mj="h2";function Dj(t,e){let n=R.useId(),{id:r=`headlessui-dialog-title-${n}`,...l}=t,[{dialogState:u,setTitleId:h}]=Zh("Dialog.Title"),y=Sr(e);R.useEffect(()=>(h(r),()=>h(null)),[r,h]);let b=R.useMemo(()=>({open:u===0}),[u]),x={ref:y,id:r};return Ri()({ourProps:x,theirProps:l,slot:b,defaultTag:Mj,name:"Dialog.Title"})}let kj=Ws(_j),Lj=Ws(Rj);Ws(Ij);let jj=Ws(Dj),Ci=Object.assign(kj,{Panel:Lj,Title:jj,Description:Qk});function Pj(t,e,n,r){var h,y,b;let l=(h=t==null?void 0:t.course_limits)==null?void 0:h[e];if(!l&&Array.isArray(t==null?void 0:t.purchased_packages)){const x=t.purchased_packages.find(S=>S.course_id===e);l=x==null?void 0:x.hours}return!l&&((b=(y=r==null?void 0:r[e])==null?void 0:y.hour_packages)!=null&&b[0])&&(l=r[e].hour_packages[0].hours),l?n.filter(x=>x.course_id===e).length<l:!1}function Bj(t){return t.startsWith("th")?"":"Cannot check in for more hours than purchased for this course."}const ls="#6654b3",xw="#f6f6f6",Uj={new_application:{labelKey:"newApplications",color:ls,text:"#fff"},renewal:{labelKey:"renewals",color:"#e6e1f7",text:ls},edit:{labelKey:"courseChanges",color:"#edeaf7",text:ls},cancel:{labelKey:"cancellations",color:"#fce6e6",text:"#b03535"}};function Fj({urls:t,open:e,onClose:n}){const{t:r}=Pn();return E.jsx(Ci,{open:e,onClose:n,className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:E.jsxs(Ci.Panel,{className:"bg-white rounded-2xl p-6 max-w-lg w-full relative",children:[E.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-[#6654b3]",children:E.jsx(io,{className:"w-6 h-6"})}),E.jsx("h2",{className:"text-lg font-bold mb-2",style:{color:ls},children:r("receipts")}),E.jsx("div",{className:"space-y-3",children:t.map(l=>E.jsxs("div",{className:"rounded-lg border border-[#e1def5] bg-[#f6f6f6] px-3 py-2 flex items-center gap-3",children:[E.jsx("span",{className:"flex-1 truncate",style:{color:ls},children:decodeURIComponent(l.split("/").slice(-1)[0])}),E.jsx("button",{className:"hover:underline text-xs font-bold",style:{color:ls},onClick:()=>window.open(l,"_blank"),children:r("open")}),E.jsxs("button",{className:"hover:underline text-xs font-bold flex items-center gap-1",style:{color:ls},onClick:async()=>{const h=await(await fetch(l)).blob(),y=document.createElement("a");y.href=URL.createObjectURL(h),y.download=l.split("/").slice(-1)[0],y.click()},children:[E.jsx(Sk,{className:"w-4 h-4 inline"})," ",r("download")]}),E.jsxs("button",{className:"hover:underline text-xs font-bold flex items-center gap-1",style:{color:ls},onClick:()=>{const u=document.createElement("iframe");u.style.position="fixed",u.style.right="0",u.style.top="0",u.style.width="0",u.style.height="0",u.src=l,document.body.appendChild(u),u.onload=()=>{var h;(h=u.contentWindow)==null||h.print(),setTimeout(()=>document.body.removeChild(u),1e3)}},children:[E.jsx(Jm,{className:"w-4 h-4 inline"})," ",r("print")]})]},l))})]})})}function Vj(t,e){return t.reduce((n,r)=>{const l=e(r);return(n[l]||(n[l]=[])).push(r),n},{})}function yw(){const{t,i18n:e}=Pn(),n=Mc(),[r,l]=R.useState(null),[u,h]=R.useState({}),[y,b]=R.useState({new_application:!1,renewal:!1,edit:!1,cancel:!1}),{data:x=[]}=cs({queryKey:["courses","names"],queryFn:async()=>{const{data:V}=await Ve.from("courses").select("id,name,hour_packages");return V||[]},staleTime:5*60*1e3}),{data:S=[],isLoading:A}=cs({queryKey:["reviewHub","pending"],queryFn:async()=>{const[V,z]=await Promise.all([Ve.from("applications").select("*").eq("status","pending").order("created_at",{ascending:!0}),Ve.from("application_changes").select("*").eq("status","pending").order("created_at",{ascending:!0})]);return[...(V.data||[]).map(Z=>({...Z,group:"new_application"})),...(z.data||[]).map(Z=>({...Z,group:Z.type}))]},staleTime:20*1e3}),N=R.useMemo(()=>Array.from(new Set((S||[]).map(V=>V.submitted_by).filter(Boolean))),[S]),{data:I={}}=cs({queryKey:["submitters",...N],queryFn:async()=>{const V={};return await Promise.all(N.map(async z=>{const{data:Z}=await Ve.from("profiles").select("full_name,email").eq("id",z).single();Z&&(V[z]=Z)})),V},enabled:N.length>0}),M=R.useMemo(()=>Object.fromEntries(x.map(V=>[V.id,V.name])),[x]),j=R.useMemo(()=>Vj(S,V=>V.group),[S]);function U(V,z){h(Z=>{var W;return{...Z,[V]:new Set([...Array.from(Z[V]||[]),...(W=Z[V])!=null&&W.has(z)?[]:[z]].filter(ae=>{var X;return ae!==z||!((X=Z[V])!=null&&X.has(z))}))}})}function $(V){var Z;const z=new Set(((Z=j[V])==null?void 0:Z.map(W=>W.id))||[]);h(W=>{var ae;return{...W,[V]:((ae=W[V])==null?void 0:ae.size)===z.size?new Set:z}})}async function Y(V){var X,be,Ae,ve,ce,Fe;const z=Array.from(u[V]||[]);if(!z.length)return;const Z=(j[V]||[]).filter(se=>z.includes(se.id)),W=Object.fromEntries(x.map(se=>[se.id,se]));for(const se of Z){let re=se,le=[];if(se.group==="new_application")le=Object.keys(se.course_limits||{});else if(se.type==="renewal")le=Object.keys(((X=se.changes)==null?void 0:X.course_limits)||{}),re={...se,course_limits:((be=se.changes)==null?void 0:be.course_limits)||{},purchased_packages:((Ae=se.changes)==null?void 0:Ae.purchased_packages)||[]};else if(se.type==="edit")le=Object.keys(((ve=se.changes)==null?void 0:ve.course_changes)||{}),re={...se,course_limits:((ce=se.changes)==null?void 0:ce.course_limits)||{},purchased_packages:((Fe=se.changes)==null?void 0:Fe.purchased_packages)||[]};else continue;for(const De of le)if(!Pj(re,De,[],W)){alert(Bj(e.language));return}}if(!window.confirm(t("approveConfirm",{count:z.length})))return;let ae;V==="new_application"?ae=Ve.from("applications").update({status:"approved"}).in("id",z):ae=Ve.from("application_changes").update({status:"approved",reviewed_at:new Date().toISOString()}).in("id",z),await ae,n.invalidateQueries({queryKey:["reviewHub","pending"]}),h(se=>({...se,[V]:new Set}))}async function P(V){const z=Array.from(u[V]||[]);z.length&&window.confirm(t("rejectConfirm",{count:z.length}))&&(V==="new_application"?await Ve.from("applications").delete().in("id",z):await Ve.from("application_changes").delete().in("id",z),n.invalidateQueries({queryKey:["reviewHub","pending"]}),h(Z=>({...Z,[V]:new Set})))}return A?E.jsxs("div",{className:"p-10 flex items-center justify-center",style:{background:xw,minHeight:"100vh"},children:[E.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full",style:{background:ls,marginRight:8}}),E.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full",style:{background:"#e6e1f7",marginRight:8}}),E.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full",style:{background:"#edeaf7"}})]}):E.jsxs("div",{className:"min-h-screen flex flex-col items-center py-8 px-2 sm:px-6 font-sans",style:{background:xw},children:[E.jsx("div",{className:"w-full max-w-5xl space-y-8",children:Object.entries(Uj).map(([V,z])=>{var Z,W,ae,X,be,Ae,ve;return E.jsxs("div",{className:"mb-4 border rounded-2xl shadow-sm",style:{borderColor:"#e1def5",background:"#fff"},children:[E.jsx("button",{className:"w-full flex items-center justify-between px-6 py-4 text-lg font-bold focus:outline-none rounded-t-2xl transition-all",style:{background:z.color,color:z.text,borderTopLeftRadius:16,borderTopRightRadius:16},onClick:()=>b(ce=>({...ce,[V]:!ce[V]})),children:E.jsxs("div",{className:"flex items-center gap-2",children:[y[V]?E.jsx(hS,{className:"w-6 h-6"}):E.jsx(gS,{className:"w-6 h-6"}),t(z.labelKey),E.jsx("span",{className:"ml-2 rounded-full px-3 py-1 text-base font-bold border",style:{background:"#fff",color:ls,borderColor:"#e1def5"},children:((Z=j[V])==null?void 0:Z.length)||0})]})}),y[V]&&E.jsxs("div",{className:"px-4 pb-4 pt-2",children:[E.jsxs("div",{className:"flex flex-wrap gap-2 items-center my-3",children:[E.jsx("button",{className:"rounded-full px-3 py-1 border text-xs font-bold transition",style:{borderColor:ls,color:ls,background:"#f6f6f6"},onClick:()=>$(V),children:((W=u[V])==null?void 0:W.size)===(((ae=j[V])==null?void 0:ae.length)||0)?t("unselectAll"):t("selectAll")}),E.jsxs("button",{className:"px-3 py-1 rounded-full font-bold text-xs transition",style:{background:ls,color:"#fff",opacity:(X=u[V])!=null&&X.size?1:.5},disabled:!((be=u[V])!=null&&be.size),onClick:()=>Y(V),children:[E.jsx(yk,{className:"w-4 h-4 inline"})," ",t("approve")]}),E.jsxs("button",{className:"px-3 py-1 rounded-full font-bold text-xs transition",style:{background:"#ec4899",color:"#fff",opacity:(Ae=u[V])!=null&&Ae.size?1:.5},disabled:!((ve=u[V])!=null&&ve.size),onClick:()=>P(V),children:[E.jsx(Ik,{className:"w-4 h-4 inline"})," ",t("reject")]})]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(j[V]||[]).map(ce=>{var ge,pe,Be,ze,Ee,At,Ze,pt,wn,Re;const Fe=ce.group==="new_application"?ce.payment_receipt_urls||[]:((ge=ce.changes)==null?void 0:ge.receipts)||ce.receipt_urls||[],se=ce.nickname||ce.nick_name||ce.nick||"",re=ce.first_name||ce.first||"",le=ce.last_name||ce.last||"",De=ce.submitted_by?((pe=I[ce.submitted_by])==null?void 0:pe.full_name)||ce.submitted_by:"-";let $e=[],H=[],te=0;return ce.group==="new_application"?($e=Object.entries(ce.courses||{}).map(([ie,Se])=>{var Ie;return{cid:ie,days:Se,hours:((Ie=ce.course_limits)==null?void 0:Ie[ie])||0}}),H=ce.purchased_packages||[],te=ce.total_price||0):(ce.type==="edit"||ce.type==="renewal"||ce.type==="cancel")&&($e=[],ce.type==="edit"?$e=Object.entries(((Be=ce.changes)==null?void 0:Be.course_changes)||{}).map(([ie,Se])=>{var Ie;return{cid:ie,days:Se,hours:((Ie=ce.changes.course_limits)==null?void 0:Ie[ie])||0}}):ce.type==="renewal"?$e=Object.entries(((ze=ce.changes)==null?void 0:ze.course_limits)||{}).map(([ie,Se])=>({cid:ie,days:null,hours:Se})):ce.type==="cancel"&&($e=Object.keys(((Ee=ce.changes)==null?void 0:Ee.cancel_course_ids)||{}).map(ie=>({cid:ie,days:null,hours:0}))),H=((At=ce.changes)==null?void 0:At.purchased_packages)||[],te=((Ze=ce.changes)==null?void 0:Ze.total_price)||0),E.jsxs("div",{className:Vu("rounded-2xl border p-4 space-y-2 flex flex-col relative transition",((pt=u[V])==null?void 0:pt.has(ce.id))&&"ring-2"),style:{borderColor:"#edeaf7",background:"#fff",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.03)",...(wn=u[V])!=null&&wn.has(ce.id)?{boxShadow:`0 0 0 3px ${ls}40`}:{}},children:[E.jsx("label",{className:"absolute top-3 left-3",children:E.jsx("input",{type:"checkbox",checked:(Re=u[V])==null?void 0:Re.has(ce.id),onChange:()=>U(V,ce.id),className:"accent-[#6654b3] w-5 h-5"})}),E.jsxs("div",{className:"pl-8",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E.jsx(Rk,{className:"w-8 h-8",style:{color:ls}}),E.jsxs("div",{children:[E.jsxs("div",{className:"font-bold text-base",style:{color:ls},children:[se?`"${se}"`:""," ",re," ",le]}),E.jsxs("div",{className:"text-xs text-gray-500",children:[E.jsxs("span",{children:[t("submittedBy"),": "]}),E.jsx("span",{children:De})]}),E.jsxs("div",{className:"text-xs text-gray-500",children:[ce.parent_phone&&E.jsxs(E.Fragment,{children:[t("phone"),": ",ce.parent_phone," "]}),ce.parent_line_id&&E.jsxs(E.Fragment,{children:[t("lineId"),": ",ce.parent_line_id," "]}),ce.dob&&E.jsxs(E.Fragment,{children:[t("dob"),": ",new Date(ce.dob).toLocaleDateString("en-GB")]})]})]})]}),E.jsxs("div",{className:"text-xs text-gray-600",children:[t("submittedAt"),": ",new Date(ce.created_at).toLocaleString("en-GB")]}),E.jsxs("div",{className:"my-2",children:[$e.map(ie=>E.jsxs("div",{className:"mb-1",children:[E.jsxs("div",{className:"font-semibold",style:{color:ls},children:[t("course"),": ",M[ie.cid]||ie.cid]}),ie.days&&Object.entries(ie.days).map(([Se,Ie])=>E.jsxs("div",{className:"ml-2 text-sm",children:[E.jsxs("span",{className:"font-semibold",children:[Se,":"]})," ",(Array.isArray(Ie)?Ie:[]).join(", ")]},Se)),typeof ie.hours=="number"&&E.jsxs("div",{className:"ml-2 text-sm",children:[E.jsxs("span",{className:"font-semibold",children:[t("hours"),":"]})," ",ie.hours]})]},ie.cid)),H.length>0&&E.jsxs("div",{className:"mb-2",children:[E.jsx("div",{className:"font-bold text-[#6654b3] mb-1",children:t("purchasedPackages")}),E.jsx("ul",{children:H.map(ie=>{var Se;return E.jsxs("li",{children:[M[ie.course_id]||ie.course_name,": ",ie.hours," ",t("hoursLabel",{count:ie.hours}),"  ",(Se=ie.price)==null?void 0:Se.toLocaleString()," ",t("baht")]},ie.course_id+ie.hours)})}),E.jsxs("div",{className:"mt-1 font-semibold",children:[t("totalPrice"),": ",te==null?void 0:te.toLocaleString()," ",t("baht")]})]})]}),Fe&&Fe.length>0&&E.jsx("div",{className:"mb-2"}),Fe&&Fe.length>0&&E.jsx("button",{className:"rounded-full px-3 py-1 text-xs font-bold",style:{background:"#e6e1f7",color:ls},onClick:()=>l(Fe),children:t("viewReceipts",{count:Fe.length})}),Array.isArray(Fe)&&Fe.length===0&&E.jsx("div",{className:"text-gray-300 text-xs",children:t("noReceipt")})]})]},ce.id)})})]})]},V)})}),r&&E.jsx(Fj,{urls:r,open:!!r,onClose:()=>l(null)}),E.jsx("style",{children:`
        @keyframes fadein { from { opacity:0; transform: scale(0.98);} to { opacity:1; transform: scale(1);} }
      `})]})}const ap=R.createContext({});function op(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const lp=typeof window<"u",qS=lp?R.useLayoutEffect:R.useEffect,Qh=R.createContext(null);function cp(t,e){t.indexOf(e)===-1&&t.push(e)}function up(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ta=(t,e,n)=>n>e?e:n<t?t:n;let dp=()=>{};const na={},YS=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function XS(t){return typeof t=="object"&&t!==null}const WS=t=>/^0[^.\s]+$/u.test(t);function fp(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ai=t=>t,Hj=(t,e)=>n=>e(t(n)),Od=(...t)=>t.reduce(Hj),fd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class hp{constructor(){this.subscriptions=[]}add(e){return cp(this.subscriptions,e),()=>up(this.subscriptions,e)}notify(e,n,r){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](e,n,r);else for(let u=0;u<l;u++){const h=this.subscriptions[u];h&&h(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const yr=t=>t*1e3,br=t=>t/1e3;function KS(t,e){return e?t*(1e3/e):0}const ZS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,zj=1e-7,$j=12;function Gj(t,e,n,r,l){let u,h,y=0;do h=e+(n-e)/2,u=ZS(h,r,l)-t,u>0?n=h:e=h;while(Math.abs(u)>zj&&++y<$j);return h}function Id(t,e,n,r){if(t===e&&n===r)return Ai;const l=u=>Gj(u,0,1,t,n);return u=>u===0||u===1?u:ZS(l(u),e,r)}const QS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,JS=t=>e=>1-t(1-e),eE=Id(.33,1.53,.69,.99),gp=JS(eE),tE=QS(gp),nE=t=>(t*=2)<1?.5*gp(t):.5*(2-Math.pow(2,-10*(t-1))),mp=t=>1-Math.sin(Math.acos(t)),sE=JS(mp),iE=QS(mp),qj=Id(.42,0,1,1),Yj=Id(0,0,.58,1),rE=Id(.42,0,.58,1),Xj=t=>Array.isArray(t)&&typeof t[0]!="number",aE=t=>Array.isArray(t)&&typeof t[0]=="number",Wj={linear:Ai,easeIn:qj,easeInOut:rE,easeOut:Yj,circIn:mp,circInOut:iE,circOut:sE,backIn:gp,backInOut:tE,backOut:eE,anticipate:nE},Kj=t=>typeof t=="string",bw=t=>{if(aE(t)){dp(t.length===4);const[e,n,r,l]=t;return Id(e,n,r,l)}else if(Kj(t))return Wj[t];return t},rh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],ww={value:null};function Zj(t,e){let n=new Set,r=new Set,l=!1,u=!1;const h=new WeakSet;let y={delta:0,timestamp:0,isProcessing:!1},b=0;function x(A){h.has(A)&&(S.schedule(A),t()),b++,A(y)}const S={schedule:(A,N=!1,I=!1)=>{const j=I&&l?n:r;return N&&h.add(A),j.has(A)||j.add(A),A},cancel:A=>{r.delete(A),h.delete(A)},process:A=>{if(y=A,l){u=!0;return}l=!0,[n,r]=[r,n],n.forEach(x),e&&ww.value&&ww.value.frameloop[e].push(b),b=0,n.clear(),l=!1,u&&(u=!1,S.process(A))}};return S}const Qj=40;function oE(t,e){let n=!1,r=!0;const l={delta:0,timestamp:0,isProcessing:!1},u=()=>n=!0,h=rh.reduce((P,V)=>(P[V]=Zj(u,e?V:void 0),P),{}),{setup:y,read:b,resolveKeyframes:x,preUpdate:S,update:A,preRender:N,render:I,postRender:M}=h,j=()=>{const P=na.useManualTiming?l.timestamp:performance.now();n=!1,na.useManualTiming||(l.delta=r?1e3/60:Math.max(Math.min(P-l.timestamp,Qj),1)),l.timestamp=P,l.isProcessing=!0,y.process(l),b.process(l),x.process(l),S.process(l),A.process(l),N.process(l),I.process(l),M.process(l),l.isProcessing=!1,n&&e&&(r=!1,t(j))},U=()=>{n=!0,r=!0,l.isProcessing||t(j)};return{schedule:rh.reduce((P,V)=>{const z=h[V];return P[V]=(Z,W=!1,ae=!1)=>(n||U(),z.schedule(Z,W,ae)),P},{}),cancel:P=>{for(let V=0;V<rh.length;V++)h[rh[V]].cancel(P)},state:l,steps:h}}const{schedule:mn,cancel:ao,state:gs,steps:bg}=oE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ai,!0);let hh;function Jj(){hh=void 0}const Xs={now:()=>(hh===void 0&&Xs.set(gs.isProcessing||na.useManualTiming?gs.timestamp:performance.now()),hh),set:t=>{hh=t,queueMicrotask(Jj)}},lE=t=>e=>typeof e=="string"&&e.startsWith(t),pp=lE("--"),eP=lE("var(--"),xp=t=>eP(t)?tP.test(t.split("/*")[0].trim()):!1,tP=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,kc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},hd={...kc,transform:t=>ta(0,1,t)},ah={...kc,default:1},nd=t=>Math.round(t*1e5)/1e5,yp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function nP(t){return t==null}const sP=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,bp=(t,e)=>n=>!!(typeof n=="string"&&sP.test(n)&&n.startsWith(t)||e&&!nP(n)&&Object.prototype.hasOwnProperty.call(n,e)),cE=(t,e,n)=>r=>{if(typeof r!="string")return r;const[l,u,h,y]=r.match(yp);return{[t]:parseFloat(l),[e]:parseFloat(u),[n]:parseFloat(h),alpha:y!==void 0?parseFloat(y):1}},iP=t=>ta(0,255,t),wg={...kc,transform:t=>Math.round(iP(t))},$o={test:bp("rgb","red"),parse:cE("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+wg.transform(t)+", "+wg.transform(e)+", "+wg.transform(n)+", "+nd(hd.transform(r))+")"};function rP(t){let e="",n="",r="",l="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),l=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),l=t.substring(4,5),e+=e,n+=n,r+=r,l+=l),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:l?parseInt(l,16)/255:1}}const mm={test:bp("#"),parse:rP,transform:$o.transform},Md=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Va=Md("deg"),wr=Md("%"),dt=Md("px"),aP=Md("vh"),oP=Md("vw"),vw={...wr,parse:t=>wr.parse(t)/100,transform:t=>wr.transform(t*100)},lc={test:bp("hsl","hue"),parse:cE("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+wr.transform(nd(e))+", "+wr.transform(nd(n))+", "+nd(hd.transform(r))+")"},zn={test:t=>$o.test(t)||mm.test(t)||lc.test(t),parse:t=>$o.test(t)?$o.parse(t):lc.test(t)?lc.parse(t):mm.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?$o.transform(t):lc.transform(t),getAnimatableNone:t=>{const e=zn.parse(t);return e.alpha=0,zn.transform(e)}},lP=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function cP(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(yp))==null?void 0:e.length)||0)+(((n=t.match(lP))==null?void 0:n.length)||0)>0}const uE="number",dE="color",uP="var",dP="var(",Sw="${}",fP=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},l=[];let u=0;const y=e.replace(fP,b=>(zn.test(b)?(r.color.push(u),l.push(dE),n.push(zn.parse(b))):b.startsWith(dP)?(r.var.push(u),l.push(uP),n.push(b)):(r.number.push(u),l.push(uE),n.push(parseFloat(b))),++u,Sw)).split(Sw);return{values:n,split:y,indexes:r,types:l}}function fE(t){return gd(t).values}function hE(t){const{split:e,types:n}=gd(t),r=e.length;return l=>{let u="";for(let h=0;h<r;h++)if(u+=e[h],l[h]!==void 0){const y=n[h];y===uE?u+=nd(l[h]):y===dE?u+=zn.transform(l[h]):u+=l[h]}return u}}const hP=t=>typeof t=="number"?0:zn.test(t)?zn.getAnimatableNone(t):t;function gP(t){const e=fE(t);return hE(t)(e.map(hP))}const oo={test:cP,parse:fE,createTransformer:hE,getAnimatableNone:gP};function vg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function mP({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let l=0,u=0,h=0;if(!e)l=u=h=n;else{const y=n<.5?n*(1+e):n+e-n*e,b=2*n-y;l=vg(b,y,t+1/3),u=vg(b,y,t),h=vg(b,y,t-1/3)}return{red:Math.round(l*255),green:Math.round(u*255),blue:Math.round(h*255),alpha:r}}function Ih(t,e){return n=>n>0?e:t}const bn=(t,e,n)=>t+(e-t)*n,Sg=(t,e,n)=>{const r=t*t,l=n*(e*e-r)+r;return l<0?0:Math.sqrt(l)},pP=[mm,$o,lc],xP=t=>pP.find(e=>e.test(t));function Ew(t){const e=xP(t);if(!e)return!1;let n=e.parse(t);return e===lc&&(n=mP(n)),n}const Cw=(t,e)=>{const n=Ew(t),r=Ew(e);if(!n||!r)return Ih(t,e);const l={...n};return u=>(l.red=Sg(n.red,r.red,u),l.green=Sg(n.green,r.green,u),l.blue=Sg(n.blue,r.blue,u),l.alpha=bn(n.alpha,r.alpha,u),$o.transform(l))},pm=new Set(["none","hidden"]);function yP(t,e){return pm.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function bP(t,e){return n=>bn(t,e,n)}function wp(t){return typeof t=="number"?bP:typeof t=="string"?xp(t)?Ih:zn.test(t)?Cw:SP:Array.isArray(t)?gE:typeof t=="object"?zn.test(t)?Cw:wP:Ih}function gE(t,e){const n=[...t],r=n.length,l=t.map((u,h)=>wp(u)(u,e[h]));return u=>{for(let h=0;h<r;h++)n[h]=l[h](u);return n}}function wP(t,e){const n={...t,...e},r={};for(const l in n)t[l]!==void 0&&e[l]!==void 0&&(r[l]=wp(t[l])(t[l],e[l]));return l=>{for(const u in r)n[u]=r[u](l);return n}}function vP(t,e){const n=[],r={color:0,var:0,number:0};for(let l=0;l<e.values.length;l++){const u=e.types[l],h=t.indexes[u][r[u]],y=t.values[h]??0;n[l]=y,r[u]++}return n}const SP=(t,e)=>{const n=oo.createTransformer(e),r=gd(t),l=gd(e);return r.indexes.var.length===l.indexes.var.length&&r.indexes.color.length===l.indexes.color.length&&r.indexes.number.length>=l.indexes.number.length?pm.has(t)&&!l.values.length||pm.has(e)&&!r.values.length?yP(t,e):Od(gE(vP(r,l),l.values),n):Ih(t,e)};function mE(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?bn(t,e,n):wp(t)(t,e)}const EP=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>mn.update(e,n),stop:()=>ao(e),now:()=>gs.isProcessing?gs.timestamp:Xs.now()}},pE=(t,e,n=10)=>{let r="";const l=Math.max(Math.round(e/n),2);for(let u=0;u<l;u++)r+=Math.round(t(u/(l-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Mh=2e4;function vp(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Mh;)e+=n,r=t.next(e);return e>=Mh?1/0:e}function CP(t,e=100,n){const r=n({...t,keyframes:[0,e]}),l=Math.min(vp(r),Mh);return{type:"keyframes",ease:u=>r.next(l*u).value/e,duration:br(l)}}const AP=5;function xE(t,e,n){const r=Math.max(e-AP,0);return KS(n-t(r),e-r)}const Nn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Eg=.001;function TP({duration:t=Nn.duration,bounce:e=Nn.bounce,velocity:n=Nn.velocity,mass:r=Nn.mass}){let l,u,h=1-e;h=ta(Nn.minDamping,Nn.maxDamping,h),t=ta(Nn.minDuration,Nn.maxDuration,br(t)),h<1?(l=x=>{const S=x*h,A=S*t,N=S-n,I=xm(x,h),M=Math.exp(-A);return Eg-N/I*M},u=x=>{const A=x*h*t,N=A*n+n,I=Math.pow(h,2)*Math.pow(x,2)*t,M=Math.exp(-A),j=xm(Math.pow(x,2),h);return(-l(x)+Eg>0?-1:1)*((N-I)*M)/j}):(l=x=>{const S=Math.exp(-x*t),A=(x-n)*t+1;return-Eg+S*A},u=x=>{const S=Math.exp(-x*t),A=(n-x)*(t*t);return S*A});const y=5/t,b=NP(l,u,y);if(t=yr(t),isNaN(b))return{stiffness:Nn.stiffness,damping:Nn.damping,duration:t};{const x=Math.pow(b,2)*r;return{stiffness:x,damping:h*2*Math.sqrt(r*x),duration:t}}}const _P=12;function NP(t,e,n){let r=n;for(let l=1;l<_P;l++)r=r-t(r)/e(r);return r}function xm(t,e){return t*Math.sqrt(1-e*e)}const RP=["duration","bounce"],OP=["stiffness","damping","mass"];function Aw(t,e){return e.some(n=>t[n]!==void 0)}function IP(t){let e={velocity:Nn.velocity,stiffness:Nn.stiffness,damping:Nn.damping,mass:Nn.mass,isResolvedFromDuration:!1,...t};if(!Aw(t,OP)&&Aw(t,RP))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),l=r*r,u=2*ta(.05,1,1-(t.bounce||0))*Math.sqrt(l);e={...e,mass:Nn.mass,stiffness:l,damping:u}}else{const n=TP(t);e={...e,...n,mass:Nn.mass},e.isResolvedFromDuration=!0}return e}function Dh(t=Nn.visualDuration,e=Nn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:l}=n;const u=n.keyframes[0],h=n.keyframes[n.keyframes.length-1],y={done:!1,value:u},{stiffness:b,damping:x,mass:S,duration:A,velocity:N,isResolvedFromDuration:I}=IP({...n,velocity:-br(n.velocity||0)}),M=N||0,j=x/(2*Math.sqrt(b*S)),U=h-u,$=br(Math.sqrt(b/S)),Y=Math.abs(U)<5;r||(r=Y?Nn.restSpeed.granular:Nn.restSpeed.default),l||(l=Y?Nn.restDelta.granular:Nn.restDelta.default);let P;if(j<1){const z=xm($,j);P=Z=>{const W=Math.exp(-j*$*Z);return h-W*((M+j*$*U)/z*Math.sin(z*Z)+U*Math.cos(z*Z))}}else if(j===1)P=z=>h-Math.exp(-$*z)*(U+(M+$*U)*z);else{const z=$*Math.sqrt(j*j-1);P=Z=>{const W=Math.exp(-j*$*Z),ae=Math.min(z*Z,300);return h-W*((M+j*$*U)*Math.sinh(ae)+z*U*Math.cosh(ae))/z}}const V={calculatedDuration:I&&A||null,next:z=>{const Z=P(z);if(I)y.done=z>=A;else{let W=z===0?M:0;j<1&&(W=z===0?yr(M):xE(P,z,Z));const ae=Math.abs(W)<=r,X=Math.abs(h-Z)<=l;y.done=ae&&X}return y.value=y.done?h:Z,y},toString:()=>{const z=Math.min(vp(V),Mh),Z=pE(W=>V.next(z*W).value,z,30);return z+"ms "+Z},toTransition:()=>{}};return V}Dh.applyToOptions=t=>{const e=CP(t,100,Dh);return t.ease=e.ease,t.duration=yr(e.duration),t.type="keyframes",t};function ym({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:l=10,bounceStiffness:u=500,modifyTarget:h,min:y,max:b,restDelta:x=.5,restSpeed:S}){const A=t[0],N={done:!1,value:A},I=ae=>y!==void 0&&ae<y||b!==void 0&&ae>b,M=ae=>y===void 0?b:b===void 0||Math.abs(y-ae)<Math.abs(b-ae)?y:b;let j=n*e;const U=A+j,$=h===void 0?U:h(U);$!==U&&(j=$-A);const Y=ae=>-j*Math.exp(-ae/r),P=ae=>$+Y(ae),V=ae=>{const X=Y(ae),be=P(ae);N.done=Math.abs(X)<=x,N.value=N.done?$:be};let z,Z;const W=ae=>{I(N.value)&&(z=ae,Z=Dh({keyframes:[N.value,M(N.value)],velocity:xE(P,ae,N.value),damping:l,stiffness:u,restDelta:x,restSpeed:S}))};return W(0),{calculatedDuration:null,next:ae=>{let X=!1;return!Z&&z===void 0&&(X=!0,V(ae),W(ae)),z!==void 0&&ae>=z?Z.next(ae-z):(!X&&V(ae),N)}}}function MP(t,e,n){const r=[],l=n||na.mix||mE,u=t.length-1;for(let h=0;h<u;h++){let y=l(t[h],t[h+1]);if(e){const b=Array.isArray(e)?e[h]||Ai:e;y=Od(b,y)}r.push(y)}return r}function DP(t,e,{clamp:n=!0,ease:r,mixer:l}={}){const u=t.length;if(dp(u===e.length),u===1)return()=>e[0];if(u===2&&e[0]===e[1])return()=>e[1];const h=t[0]===t[1];t[0]>t[u-1]&&(t=[...t].reverse(),e=[...e].reverse());const y=MP(e,r,l),b=y.length,x=S=>{if(h&&S<t[0])return e[0];let A=0;if(b>1)for(;A<t.length-2&&!(S<t[A+1]);A++);const N=fd(t[A],t[A+1],S);return y[A](N)};return n?S=>x(ta(t[0],t[u-1],S)):x}function kP(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const l=fd(0,e,r);t.push(bn(n,1,l))}}function LP(t){const e=[0];return kP(e,t.length-1),e}function jP(t,e){return t.map(n=>n*e)}function PP(t,e){return t.map(()=>e||rE).splice(0,t.length-1)}function sd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const l=Xj(r)?r.map(bw):bw(r),u={done:!1,value:e[0]},h=jP(n&&n.length===e.length?n:LP(e),t),y=DP(h,e,{ease:Array.isArray(l)?l:PP(e,l)});return{calculatedDuration:t,next:b=>(u.value=y(b),u.done=b>=t,u)}}const BP=t=>t!==null;function Sp(t,{repeat:e,repeatType:n="loop"},r,l=1){const u=t.filter(BP),y=l<0||e&&n!=="loop"&&e%2===1?0:u.length-1;return!y||r===void 0?u[y]:r}const UP={decay:ym,inertia:ym,tween:sd,keyframes:sd,spring:Dh};function yE(t){typeof t.type=="string"&&(t.type=UP[t.type])}class Ep{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const FP=t=>t/100;class Cp extends Ep{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,l;const{motionValue:n}=this.options;n&&n.updatedAt!==Xs.now()&&this.tick(Xs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(l=(r=this.options).onStop)==null||l.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;yE(e);const{type:n=sd,repeat:r=0,repeatDelay:l=0,repeatType:u,velocity:h=0}=e;let{keyframes:y}=e;const b=n||sd;b!==sd&&typeof y[0]!="number"&&(this.mixKeyframes=Od(FP,mE(y[0],y[1])),y=[0,100]);const x=b({...e,keyframes:y});u==="mirror"&&(this.mirroredGenerator=b({...e,keyframes:[...y].reverse(),velocity:-h})),x.calculatedDuration===null&&(x.calculatedDuration=vp(x));const{calculatedDuration:S}=x;this.calculatedDuration=S,this.resolvedDuration=S+l,this.totalDuration=this.resolvedDuration*(r+1)-l,this.generator=x}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:l,mixKeyframes:u,mirroredGenerator:h,resolvedDuration:y,calculatedDuration:b}=this;if(this.startTime===null)return r.next(0);const{delay:x=0,keyframes:S,repeat:A,repeatType:N,repeatDelay:I,type:M,onUpdate:j,finalKeyframe:U}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-l/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const $=this.currentTime-x*(this.playbackSpeed>=0?1:-1),Y=this.playbackSpeed>=0?$<0:$>l;this.currentTime=Math.max($,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let P=this.currentTime,V=r;if(A){const ae=Math.min(this.currentTime,l)/y;let X=Math.floor(ae),be=ae%1;!be&&ae>=1&&(be=1),be===1&&X--,X=Math.min(X,A+1),!!(X%2)&&(N==="reverse"?(be=1-be,I&&(be-=I/y)):N==="mirror"&&(V=h)),P=ta(0,1,be)*y}const z=Y?{done:!1,value:S[0]}:V.next(P);u&&(z.value=u(z.value));let{done:Z}=z;!Y&&b!==null&&(Z=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const W=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Z);return W&&M!==ym&&(z.value=Sp(S,this.options,U,this.speed)),j&&j(z.value),W&&this.finish(),z}then(e,n){return this.finished.then(e,n)}get duration(){return br(this.calculatedDuration)}get time(){return br(this.currentTime)}set time(e){var n;e=yr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Xs.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=br(this.currentTime))}play(){var l,u;if(this.isStopped)return;const{driver:e=EP,startTime:n}=this.options;this.driver||(this.driver=e(h=>this.tick(h))),(u=(l=this.options).onPlay)==null||u.call(l);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Xs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function VP(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Go=t=>t*180/Math.PI,bm=t=>{const e=Go(Math.atan2(t[1],t[0]));return wm(e)},HP={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:bm,rotateZ:bm,skewX:t=>Go(Math.atan(t[1])),skewY:t=>Go(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},wm=t=>(t=t%360,t<0&&(t+=360),t),Tw=bm,_w=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Nw=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),zP={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:_w,scaleY:Nw,scale:t=>(_w(t)+Nw(t))/2,rotateX:t=>wm(Go(Math.atan2(t[6],t[5]))),rotateY:t=>wm(Go(Math.atan2(-t[2],t[0]))),rotateZ:Tw,rotate:Tw,skewX:t=>Go(Math.atan(t[4])),skewY:t=>Go(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function vm(t){return t.includes("scale")?1:0}function Sm(t,e){if(!t||t==="none")return vm(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,l;if(n)r=zP,l=n;else{const y=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=HP,l=y}if(!l)return vm(e);const u=r[e],h=l[1].split(",").map(GP);return typeof u=="function"?u(h):h[u]}const $P=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Sm(n,e)};function GP(t){return parseFloat(t.trim())}const Lc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jc=new Set(Lc),Rw=t=>t===kc||t===dt,qP=new Set(["x","y","z"]),YP=Lc.filter(t=>!qP.has(t));function XP(t){const e=[];return YP.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const sl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Sm(e,"x"),y:(t,{transform:e})=>Sm(e,"y")};sl.translateX=sl.x;sl.translateY=sl.y;const il=new Set;let Em=!1,Cm=!1,Am=!1;function bE(){if(Cm){const t=Array.from(il).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const l=XP(r);l.length&&(n.set(r,l),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const l=n.get(r);l&&l.forEach(([u,h])=>{var y;(y=r.getValue(u))==null||y.set(h)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Cm=!1,Em=!1,il.forEach(t=>t.complete(Am)),il.clear()}function wE(){il.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Cm=!0)})}function WP(){Am=!0,wE(),bE(),Am=!1}class Ap{constructor(e,n,r,l,u,h=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=l,this.element=u,this.isAsync=h}scheduleResolve(){this.state="scheduled",this.isAsync?(il.add(this),Em||(Em=!0,mn.read(wE),mn.resolveKeyframes(bE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:l}=this;if(e[0]===null){const u=l==null?void 0:l.get(),h=e[e.length-1];if(u!==void 0)e[0]=u;else if(r&&n){const y=r.readValue(n,h);y!=null&&(e[0]=y)}e[0]===void 0&&(e[0]=h),l&&u===void 0&&l.set(e[0])}VP(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),il.delete(this)}cancel(){this.state==="scheduled"&&(il.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const KP=t=>t.startsWith("--");function ZP(t,e,n){KP(e)?t.style.setProperty(e,n):t.style[e]=n}const QP=fp(()=>window.ScrollTimeline!==void 0),JP={};function eB(t,e){const n=fp(t);return()=>JP[e]??n()}const vE=eB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Gu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Ow={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gu([0,.65,.55,1]),circOut:Gu([.55,0,1,.45]),backIn:Gu([.31,.01,.66,-.59]),backOut:Gu([.33,1.53,.69,.99])};function SE(t,e){if(t)return typeof t=="function"?vE()?pE(t,e):"ease-out":aE(t)?Gu(t):Array.isArray(t)?t.map(n=>SE(n,e)||Ow.easeOut):Ow[t]}function tB(t,e,n,{delay:r=0,duration:l=300,repeat:u=0,repeatType:h="loop",ease:y="easeOut",times:b}={},x=void 0){const S={[e]:n};b&&(S.offset=b);const A=SE(y,l);Array.isArray(A)&&(S.easing=A);const N={delay:r,duration:l,easing:Array.isArray(A)?"linear":A,fill:"both",iterations:u+1,direction:h==="reverse"?"alternate":"normal"};return x&&(N.pseudoElement=x),t.animate(S,N)}function EE(t){return typeof t=="function"&&"applyToOptions"in t}function nB({type:t,...e}){return EE(t)&&vE()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class sB extends Ep{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:l,pseudoElement:u,allowFlatten:h=!1,finalKeyframe:y,onComplete:b}=e;this.isPseudoElement=!!u,this.allowFlatten=h,this.options=e,dp(typeof e.type!="string");const x=nB(e);this.animation=tB(n,r,l,x,u),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const S=Sp(l,this.options,y,this.speed);this.updateMotionValue?this.updateMotionValue(S):ZP(n,r,S),this.animation.cancel()}b==null||b(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return br(Number(e))}get time(){return br(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=yr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&QP()?(this.animation.timeline=e,Ai):n(this)}}const CE={anticipate:nE,backInOut:tE,circInOut:iE};function iB(t){return t in CE}function rB(t){typeof t.ease=="string"&&iB(t.ease)&&(t.ease=CE[t.ease])}const Iw=10;class aB extends sB{constructor(e){rB(e),yE(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:l,element:u,...h}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const y=new Cp({...h,autoplay:!1}),b=yr(this.finishedTime??this.time);n.setWithVelocity(y.sample(b-Iw).value,y.sample(b).value,Iw),y.stop()}}const Mw=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(oo.test(t)||t==="0")&&!t.startsWith("url("));function oB(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function lB(t,e,n,r){const l=t[0];if(l===null)return!1;if(e==="display"||e==="visibility")return!0;const u=t[t.length-1],h=Mw(l,e),y=Mw(u,e);return!h||!y?!1:oB(t)||(n==="spring"||EE(n))&&r}function Tp(t){return XS(t)&&"offsetHeight"in t}const cB=new Set(["opacity","clipPath","filter","transform"]),uB=fp(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function dB(t){var x;const{motionValue:e,name:n,repeatDelay:r,repeatType:l,damping:u,type:h}=t;if(!Tp((x=e==null?void 0:e.owner)==null?void 0:x.current))return!1;const{onUpdate:y,transformTemplate:b}=e.owner.getProps();return uB()&&n&&cB.has(n)&&(n!=="transform"||!b)&&!y&&!r&&l!=="mirror"&&u!==0&&h!=="inertia"}const fB=40;class hB extends Ep{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:l=0,repeatDelay:u=0,repeatType:h="loop",keyframes:y,name:b,motionValue:x,element:S,...A}){var M;super(),this.stop=()=>{var j,U;this._animation&&(this._animation.stop(),(j=this.stopTimeline)==null||j.call(this)),(U=this.keyframeResolver)==null||U.cancel()},this.createdAt=Xs.now();const N={autoplay:e,delay:n,type:r,repeat:l,repeatDelay:u,repeatType:h,name:b,motionValue:x,element:S,...A},I=(S==null?void 0:S.KeyframeResolver)||Ap;this.keyframeResolver=new I(y,(j,U,$)=>this.onKeyframesResolved(j,U,N,!$),b,x,S),(M=this.keyframeResolver)==null||M.scheduleResolve()}onKeyframesResolved(e,n,r,l){this.keyframeResolver=void 0;const{name:u,type:h,velocity:y,delay:b,isHandoff:x,onUpdate:S}=r;this.resolvedAt=Xs.now(),lB(e,u,h,y)||((na.instantAnimations||!b)&&(S==null||S(Sp(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const N={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>fB?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},I=!x&&dB(N)?new aB({...N,element:N.motionValue.owner.current}):new Cp(N);I.finished.then(()=>this.notifyFinished()).catch(Ai),this.pendingTimeline&&(this.stopTimeline=I.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=I}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),WP()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const gB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function mB(t){const e=gB.exec(t);if(!e)return[,];const[,n,r,l]=e;return[`--${n??r}`,l]}function AE(t,e,n=1){const[r,l]=mB(t);if(!r)return;const u=window.getComputedStyle(e).getPropertyValue(r);if(u){const h=u.trim();return YS(h)?parseFloat(h):h}return xp(l)?AE(l,e,n+1):l}function _p(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const TE=new Set(["width","height","top","left","right","bottom",...Lc]),pB={test:t=>t==="auto",parse:t=>t},_E=t=>e=>e.test(t),NE=[kc,dt,wr,Va,oP,aP,pB],Dw=t=>NE.find(_E(t));function xB(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||WS(t):!0}const yB=new Set(["brightness","contrast","saturate","opacity"]);function bB(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(yp)||[];if(!r)return t;const l=n.replace(r,"");let u=yB.has(e)?1:0;return r!==n&&(u*=100),e+"("+u+l+")"}const wB=/\b([a-z-]*)\(.*?\)/gu,Tm={...oo,getAnimatableNone:t=>{const e=t.match(wB);return e?e.map(bB).join(" "):t}},kw={...kc,transform:Math.round},vB={rotate:Va,rotateX:Va,rotateY:Va,rotateZ:Va,scale:ah,scaleX:ah,scaleY:ah,scaleZ:ah,skew:Va,skewX:Va,skewY:Va,distance:dt,translateX:dt,translateY:dt,translateZ:dt,x:dt,y:dt,z:dt,perspective:dt,transformPerspective:dt,opacity:hd,originX:vw,originY:vw,originZ:dt},Np={borderWidth:dt,borderTopWidth:dt,borderRightWidth:dt,borderBottomWidth:dt,borderLeftWidth:dt,borderRadius:dt,radius:dt,borderTopLeftRadius:dt,borderTopRightRadius:dt,borderBottomRightRadius:dt,borderBottomLeftRadius:dt,width:dt,maxWidth:dt,height:dt,maxHeight:dt,top:dt,right:dt,bottom:dt,left:dt,padding:dt,paddingTop:dt,paddingRight:dt,paddingBottom:dt,paddingLeft:dt,margin:dt,marginTop:dt,marginRight:dt,marginBottom:dt,marginLeft:dt,backgroundPositionX:dt,backgroundPositionY:dt,...vB,zIndex:kw,fillOpacity:hd,strokeOpacity:hd,numOctaves:kw},SB={...Np,color:zn,backgroundColor:zn,outlineColor:zn,fill:zn,stroke:zn,borderColor:zn,borderTopColor:zn,borderRightColor:zn,borderBottomColor:zn,borderLeftColor:zn,filter:Tm,WebkitFilter:Tm},RE=t=>SB[t];function OE(t,e){let n=RE(t);return n!==Tm&&(n=oo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const EB=new Set(["auto","none","0"]);function CB(t,e,n){let r=0,l;for(;r<t.length&&!l;){const u=t[r];typeof u=="string"&&!EB.has(u)&&gd(u).values.length&&(l=t[r]),r++}if(l&&n)for(const u of e)t[u]=OE(n,l)}class AB extends Ap{constructor(e,n,r,l,u){super(e,n,r,l,u,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let b=0;b<e.length;b++){let x=e[b];if(typeof x=="string"&&(x=x.trim(),xp(x))){const S=AE(x,n.current);S!==void 0&&(e[b]=S),b===e.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!TE.has(r)||e.length!==2)return;const[l,u]=e,h=Dw(l),y=Dw(u);if(h!==y)if(Rw(h)&&Rw(y))for(let b=0;b<e.length;b++){const x=e[b];typeof x=="string"&&(e[b]=parseFloat(x))}else sl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let l=0;l<e.length;l++)(e[l]===null||xB(e[l]))&&r.push(l);r.length&&CB(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=sl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const l=n[n.length-1];l!==void 0&&e.getValue(r,l).jump(l,!1)}measureEndState(){var y;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const l=e.getValue(n);l&&l.jump(this.measuredOrigin,!1);const u=r.length-1,h=r[u];r[u]=sl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),(y=this.removedTransforms)!=null&&y.length&&this.removedTransforms.forEach(([b,x])=>{e.getValue(b).set(x)}),this.resolveNoneKeyframes()}}function TB(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const l=(n==null?void 0:n[t])??r.querySelectorAll(t);return l?Array.from(l):[]}return Array.from(t)}const IE=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Lw=30,_B=t=>!isNaN(parseFloat(t));class NB{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,l=!0)=>{var h,y;const u=Xs.now();if(this.updatedAt!==u&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((h=this.events.change)==null||h.notify(this.current),this.dependents))for(const b of this.dependents)b.dirty();l&&((y=this.events.renderRequest)==null||y.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Xs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=_B(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new hp);const r=this.events[e].add(n);return e==="change"?()=>{r(),mn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Xs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Lw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Lw);return KS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _c(t,e){return new NB(t,e)}const{schedule:Rp}=oE(queueMicrotask,!1),Ui={x:!1,y:!1};function ME(){return Ui.x||Ui.y}function RB(t){return t==="x"||t==="y"?Ui[t]?null:(Ui[t]=!0,()=>{Ui[t]=!1}):Ui.x||Ui.y?null:(Ui.x=Ui.y=!0,()=>{Ui.x=Ui.y=!1})}function DE(t,e){const n=TB(t),r=new AbortController,l={passive:!0,...e,signal:r.signal};return[n,l,()=>r.abort()]}function jw(t){return!(t.pointerType==="touch"||ME())}function OB(t,e,n={}){const[r,l,u]=DE(t,n),h=y=>{if(!jw(y))return;const{target:b}=y,x=e(b,y);if(typeof x!="function"||!b)return;const S=A=>{jw(A)&&(x(A),b.removeEventListener("pointerleave",S))};b.addEventListener("pointerleave",S,l)};return r.forEach(y=>{y.addEventListener("pointerenter",h,l)}),u}const kE=(t,e)=>e?t===e?!0:kE(t,e.parentElement):!1,Op=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,IB=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function MB(t){return IB.has(t.tagName)||t.tabIndex!==-1}const gh=new WeakSet;function Pw(t){return e=>{e.key==="Enter"&&t(e)}}function Cg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const DB=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Pw(()=>{if(gh.has(n))return;Cg(n,"down");const l=Pw(()=>{Cg(n,"up")}),u=()=>Cg(n,"cancel");n.addEventListener("keyup",l,e),n.addEventListener("blur",u,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Bw(t){return Op(t)&&!ME()}function kB(t,e,n={}){const[r,l,u]=DE(t,n),h=y=>{const b=y.currentTarget;if(!Bw(y))return;gh.add(b);const x=e(b,y),S=(I,M)=>{window.removeEventListener("pointerup",A),window.removeEventListener("pointercancel",N),gh.has(b)&&gh.delete(b),Bw(I)&&typeof x=="function"&&x(I,{success:M})},A=I=>{S(I,b===window||b===document||n.useGlobalTarget||kE(b,I.target))},N=I=>{S(I,!1)};window.addEventListener("pointerup",A,l),window.addEventListener("pointercancel",N,l)};return r.forEach(y=>{(n.useGlobalTarget?window:y).addEventListener("pointerdown",h,l),Tp(y)&&(y.addEventListener("focus",x=>DB(x,l)),!MB(y)&&!y.hasAttribute("tabindex")&&(y.tabIndex=0))}),u}function LE(t){return XS(t)&&"ownerSVGElement"in t}function LB(t){return LE(t)&&t.tagName==="svg"}const Ts=t=>!!(t&&t.getVelocity),jB=[...NE,zn,oo],PB=t=>jB.find(_E(t)),Ip=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class BB extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,l=Tp(r)&&r.offsetWidth||0,u=this.props.sizeRef.current;u.height=n.offsetHeight||0,u.width=n.offsetWidth||0,u.top=n.offsetTop,u.left=n.offsetLeft,u.right=l-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function UB({children:t,isPresent:e,anchorX:n,root:r}){const l=R.useId(),u=R.useRef(null),h=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=R.useContext(Ip);return R.useInsertionEffect(()=>{const{width:b,height:x,top:S,left:A,right:N}=h.current;if(e||!u.current||!b||!x)return;const I=n==="left"?`left: ${A}`:`right: ${N}`;u.current.dataset.motionPopId=l;const M=document.createElement("style");y&&(M.nonce=y);const j=r??document.head;return j.appendChild(M),M.sheet&&M.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${b}px !important;
            height: ${x}px !important;
            ${I}px !important;
            top: ${S}px !important;
          }
        `),()=>{j.removeChild(M),j.contains(M)&&j.removeChild(M)}},[e]),E.jsx(BB,{isPresent:e,childRef:u,sizeRef:h,children:R.cloneElement(t,{ref:u})})}const FB=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:l,presenceAffectsLayout:u,mode:h,anchorX:y,root:b})=>{const x=op(VB),S=R.useId();let A=!0,N=R.useMemo(()=>(A=!1,{id:S,initial:e,isPresent:n,custom:l,onExitComplete:I=>{x.set(I,!0);for(const M of x.values())if(!M)return;r&&r()},register:I=>(x.set(I,!1),()=>x.delete(I))}),[n,x,r]);return u&&A&&(N={...N}),R.useMemo(()=>{x.forEach((I,M)=>x.set(M,!1))},[n]),R.useEffect(()=>{!n&&!x.size&&r&&r()},[n]),h==="popLayout"&&(t=E.jsx(UB,{isPresent:n,anchorX:y,root:b,children:t})),E.jsx(Qh.Provider,{value:N,children:t})};function VB(){return new Map}function jE(t=!0){const e=R.useContext(Qh);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:l}=e,u=R.useId();R.useEffect(()=>{if(t)return l(u)},[t]);const h=R.useCallback(()=>t&&r&&r(u),[u,r,t]);return!n&&r?[!1,h]:[!0]}const oh=t=>t.key||"";function Uw(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const Pu=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:l=!0,mode:u="sync",propagate:h=!1,anchorX:y="left",root:b})=>{const[x,S]=jE(h),A=R.useMemo(()=>Uw(t),[t]),N=h&&!x?[]:A.map(oh),I=R.useRef(!0),M=R.useRef(A),j=op(()=>new Map),[U,$]=R.useState(A),[Y,P]=R.useState(A);qS(()=>{I.current=!1,M.current=A;for(let Z=0;Z<Y.length;Z++){const W=oh(Y[Z]);N.includes(W)?j.delete(W):j.get(W)!==!0&&j.set(W,!1)}},[Y,N.length,N.join("-")]);const V=[];if(A!==U){let Z=[...A];for(let W=0;W<Y.length;W++){const ae=Y[W],X=oh(ae);N.includes(X)||(Z.splice(W,0,ae),V.push(ae))}return u==="wait"&&V.length&&(Z=V),P(Uw(Z)),$(A),null}const{forceRender:z}=R.useContext(ap);return E.jsx(E.Fragment,{children:Y.map(Z=>{const W=oh(Z),ae=h&&!x?!1:A===Y||N.includes(W),X=()=>{if(j.has(W))j.set(W,!0);else return;let be=!0;j.forEach(Ae=>{Ae||(be=!1)}),be&&(z==null||z(),P(M.current),h&&(S==null||S()),r&&r())};return E.jsx(FB,{isPresent:ae,initial:!I.current||n?void 0:!1,custom:e,presenceAffectsLayout:l,mode:u,root:b,onExitComplete:ae?void 0:X,anchorX:y,children:Z},W)})})},PE=R.createContext({strict:!1}),Fw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Nc={};for(const t in Fw)Nc[t]={isEnabled:e=>Fw[t].some(n=>!!e[n])};function HB(t){for(const e in t)Nc[e]={...Nc[e],...t[e]}}const zB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function kh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||zB.has(t)}let BE=t=>!kh(t);function $B(t){typeof t=="function"&&(BE=e=>e.startsWith("on")?!kh(e):t(e))}try{$B(require("@emotion/is-prop-valid").default)}catch{}function GB(t,e,n){const r={};for(const l in t)l==="values"&&typeof t.values=="object"||(BE(l)||n===!0&&kh(l)||!e&&!kh(l)||t.draggable&&l.startsWith("onDrag"))&&(r[l]=t[l]);return r}function qB(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,l)=>l==="create"?t:(e.has(l)||e.set(l,t(l)),e.get(l))})}const Jh=R.createContext({});function e0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function md(t){return typeof t=="string"||Array.isArray(t)}const Mp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Dp=["initial",...Mp];function t0(t){return e0(t.animate)||Dp.some(e=>md(t[e]))}function UE(t){return!!(t0(t)||t.variants)}function YB(t,e){if(t0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||md(n)?n:void 0,animate:md(r)?r:void 0}}return t.inherit!==!1?e:{}}function XB(t){const{initial:e,animate:n}=YB(t,R.useContext(Jh));return R.useMemo(()=>({initial:e,animate:n}),[Vw(e),Vw(n)])}function Vw(t){return Array.isArray(t)?t.join(" "):t}const WB=Symbol.for("motionComponentSymbol");function cc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function KB(t,e,n){return R.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):cc(n)&&(n.current=r))},[e])}const kp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ZB="framerAppearId",FE="data-"+kp(ZB),VE=R.createContext({});function QB(t,e,n,r,l){var j,U;const{visualElement:u}=R.useContext(Jh),h=R.useContext(PE),y=R.useContext(Qh),b=R.useContext(Ip).reducedMotion,x=R.useRef(null);r=r||h.renderer,!x.current&&r&&(x.current=r(t,{visualState:e,parent:u,props:n,presenceContext:y,blockInitialAnimation:y?y.initial===!1:!1,reducedMotionConfig:b}));const S=x.current,A=R.useContext(VE);S&&!S.projection&&l&&(S.type==="html"||S.type==="svg")&&JB(x.current,n,l,A);const N=R.useRef(!1);R.useInsertionEffect(()=>{S&&N.current&&S.update(n,y)});const I=n[FE],M=R.useRef(!!I&&!((j=window.MotionHandoffIsComplete)!=null&&j.call(window,I))&&((U=window.MotionHasOptimisedAnimation)==null?void 0:U.call(window,I)));return qS(()=>{S&&(N.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),Rp.render(S.render),M.current&&S.animationState&&S.animationState.animateChanges())}),R.useEffect(()=>{S&&(!M.current&&S.animationState&&S.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var $;($=window.MotionHandoffMarkAsComplete)==null||$.call(window,I)}),M.current=!1))}),S}function JB(t,e,n,r){const{layoutId:l,layout:u,drag:h,dragConstraints:y,layoutScroll:b,layoutRoot:x,layoutCrossfade:S}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:HE(t.parent)),t.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!h||y&&cc(y),visualElement:t,animationType:typeof u=="string"?u:"both",initialPromotionConfig:r,crossfade:S,layoutScroll:b,layoutRoot:x})}function HE(t){if(t)return t.options.allowProjection!==!1?t.projection:HE(t.parent)}function eU({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:l}){t&&HB(t);function u(y,b){let x;const S={...R.useContext(Ip),...y,layoutId:tU(y)},{isStatic:A}=S,N=XB(y),I=r(y,A);if(!A&&lp){nU();const M=sU(S);x=M.MeasureLayout,N.visualElement=QB(l,I,S,e,M.ProjectionNode)}return E.jsxs(Jh.Provider,{value:N,children:[x&&N.visualElement?E.jsx(x,{visualElement:N.visualElement,...S}):null,n(l,y,KB(I,N.visualElement,b),I,A,N.visualElement)]})}u.displayName=`motion.${typeof l=="string"?l:`create(${l.displayName??l.name??""})`}`;const h=R.forwardRef(u);return h[WB]=l,h}function tU({layoutId:t}){const e=R.useContext(ap).id;return e&&t!==void 0?e+"-"+t:t}function nU(t,e){R.useContext(PE).strict}function sU(t){const{drag:e,layout:n}=Nc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const pd={};function iU(t){for(const e in t)pd[e]=t[e],pp(e)&&(pd[e].isCSSVariable=!0)}function zE(t,{layout:e,layoutId:n}){return jc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!pd[t]||t==="opacity")}const rU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},aU=Lc.length;function oU(t,e,n){let r="",l=!0;for(let u=0;u<aU;u++){const h=Lc[u],y=t[h];if(y===void 0)continue;let b=!0;if(typeof y=="number"?b=y===(h.startsWith("scale")?1:0):b=parseFloat(y)===0,!b||n){const x=IE(y,Np[h]);if(!b){l=!1;const S=rU[h]||h;r+=`${S}(${x}) `}n&&(e[h]=x)}}return r=r.trim(),n?r=n(e,l?"":r):l&&(r="none"),r}function Lp(t,e,n){const{style:r,vars:l,transformOrigin:u}=t;let h=!1,y=!1;for(const b in e){const x=e[b];if(jc.has(b)){h=!0;continue}else if(pp(b)){l[b]=x;continue}else{const S=IE(x,Np[b]);b.startsWith("origin")?(y=!0,u[b]=S):r[b]=S}}if(e.transform||(h||n?r.transform=oU(e,t.transform,n):r.transform&&(r.transform="none")),y){const{originX:b="50%",originY:x="50%",originZ:S=0}=u;r.transformOrigin=`${b} ${x} ${S}`}}const jp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $E(t,e,n){for(const r in e)!Ts(e[r])&&!zE(r,n)&&(t[r]=e[r])}function lU({transformTemplate:t},e){return R.useMemo(()=>{const n=jp();return Lp(n,e,t),Object.assign({},n.vars,n.style)},[e])}function cU(t,e){const n=t.style||{},r={};return $E(r,n,t),Object.assign(r,lU(t,e)),r}function uU(t,e){const n={},r=cU(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const dU={offset:"stroke-dashoffset",array:"stroke-dasharray"},fU={offset:"strokeDashoffset",array:"strokeDasharray"};function hU(t,e,n=1,r=0,l=!0){t.pathLength=1;const u=l?dU:fU;t[u.offset]=dt.transform(-r);const h=dt.transform(e),y=dt.transform(n);t[u.array]=`${h} ${y}`}function GE(t,{attrX:e,attrY:n,attrScale:r,pathLength:l,pathSpacing:u=1,pathOffset:h=0,...y},b,x,S){if(Lp(t,y,x),b){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:A,style:N}=t;A.transform&&(N.transform=A.transform,delete A.transform),(N.transform||A.transformOrigin)&&(N.transformOrigin=A.transformOrigin??"50% 50%",delete A.transformOrigin),N.transform&&(N.transformBox=(S==null?void 0:S.transformBox)??"fill-box",delete A.transformBox),e!==void 0&&(A.x=e),n!==void 0&&(A.y=n),r!==void 0&&(A.scale=r),l!==void 0&&hU(A,l,u,h,!1)}const qE=()=>({...jp(),attrs:{}}),YE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function gU(t,e,n,r){const l=R.useMemo(()=>{const u=qE();return GE(u,e,YE(r),t.transformTemplate,t.style),{...u.attrs,style:{...u.style}}},[e]);if(t.style){const u={};$E(u,t.style,t),l.style={...u,...l.style}}return l}const mU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Pp(t){return typeof t!="string"||t.includes("-")?!1:!!(mU.indexOf(t)>-1||/[A-Z]/u.test(t))}function pU(t=!1){return(n,r,l,{latestValues:u},h)=>{const b=(Pp(n)?gU:uU)(r,u,h,n),x=GB(r,typeof n=="string",t),S=n!==R.Fragment?{...x,...b,ref:l}:{},{children:A}=r,N=R.useMemo(()=>Ts(A)?A.get():A,[A]);return R.createElement(n,{...S,children:N})}}function Hw(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Bp(t,e,n,r){if(typeof e=="function"){const[l,u]=Hw(r);e=e(n!==void 0?n:t.custom,l,u)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[l,u]=Hw(r);e=e(n!==void 0?n:t.custom,l,u)}return e}function mh(t){return Ts(t)?t.get():t}function xU({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,l){return{latestValues:yU(n,r,l,t),renderState:e()}}const XE=t=>(e,n)=>{const r=R.useContext(Jh),l=R.useContext(Qh),u=()=>xU(t,e,r,l);return n?u():op(u)};function yU(t,e,n,r){const l={},u=r(t,{});for(const N in u)l[N]=mh(u[N]);let{initial:h,animate:y}=t;const b=t0(t),x=UE(t);e&&x&&!b&&t.inherit!==!1&&(h===void 0&&(h=e.initial),y===void 0&&(y=e.animate));let S=n?n.initial===!1:!1;S=S||h===!1;const A=S?y:h;if(A&&typeof A!="boolean"&&!e0(A)){const N=Array.isArray(A)?A:[A];for(let I=0;I<N.length;I++){const M=Bp(t,N[I]);if(M){const{transitionEnd:j,transition:U,...$}=M;for(const Y in $){let P=$[Y];if(Array.isArray(P)){const V=S?P.length-1:0;P=P[V]}P!==null&&(l[Y]=P)}for(const Y in j)l[Y]=j[Y]}}}return l}function Up(t,e,n){var u;const{style:r}=t,l={};for(const h in r)(Ts(r[h])||e.style&&Ts(e.style[h])||zE(h,t)||((u=n==null?void 0:n.getValue(h))==null?void 0:u.liveStyle)!==void 0)&&(l[h]=r[h]);return l}const bU={useVisualState:XE({scrapeMotionValuesFromProps:Up,createRenderState:jp})};function WE(t,e,n){const r=Up(t,e,n);for(const l in t)if(Ts(t[l])||Ts(e[l])){const u=Lc.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;r[u]=t[l]}return r}const wU={useVisualState:XE({scrapeMotionValuesFromProps:WE,createRenderState:qE})};function vU(t,e){return function(r,{forwardMotionProps:l}={forwardMotionProps:!1}){const h={...Pp(r)?wU:bU,preloadedFeatures:t,useRender:pU(l),createVisualElement:e,Component:r};return eU(h)}}function xd(t,e,n){const r=t.getProps();return Bp(r,e,n!==void 0?n:r.custom,t)}const _m=t=>Array.isArray(t);function SU(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,_c(n))}function EU(t){return _m(t)?t[t.length-1]||0:t}function CU(t,e){const n=xd(t,e);let{transitionEnd:r={},transition:l={},...u}=n||{};u={...u,...r};for(const h in u){const y=EU(u[h]);SU(t,h,y)}}function AU(t){return!!(Ts(t)&&t.add)}function Nm(t,e){const n=t.getValue("willChange");if(AU(n))return n.add(e);if(!n&&na.WillChange){const r=new na.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function KE(t){return t.props[FE]}const TU=t=>t!==null;function _U(t,{repeat:e,repeatType:n="loop"},r){const l=t.filter(TU),u=e&&n!=="loop"&&e%2===1?0:l.length-1;return l[u]}const NU={type:"spring",stiffness:500,damping:25,restSpeed:10},RU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),OU={type:"keyframes",duration:.8},IU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},MU=(t,{keyframes:e})=>e.length>2?OU:jc.has(t)?t.startsWith("scale")?RU(e[1]):NU:IU;function DU({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:l,repeat:u,repeatType:h,repeatDelay:y,from:b,elapsed:x,...S}){return!!Object.keys(S).length}const Fp=(t,e,n,r={},l,u)=>h=>{const y=_p(r,t)||{},b=y.delay||r.delay||0;let{elapsed:x=0}=r;x=x-yr(b);const S={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...y,delay:-x,onUpdate:N=>{e.set(N),y.onUpdate&&y.onUpdate(N)},onComplete:()=>{h(),y.onComplete&&y.onComplete()},name:t,motionValue:e,element:u?void 0:l};DU(y)||Object.assign(S,MU(t,S)),S.duration&&(S.duration=yr(S.duration)),S.repeatDelay&&(S.repeatDelay=yr(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let A=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(S.duration=0,S.delay===0&&(A=!0)),(na.instantAnimations||na.skipAnimations)&&(A=!0,S.duration=0,S.delay=0),S.allowFlatten=!y.type&&!y.ease,A&&!u&&e.get()!==void 0){const N=_U(S.keyframes,y);if(N!==void 0){mn.update(()=>{S.onUpdate(N),S.onComplete()});return}}return y.isSync?new Cp(S):new hB(S)};function kU({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function ZE(t,e,{delay:n=0,transitionOverride:r,type:l}={}){let{transition:u=t.getDefaultTransition(),transitionEnd:h,...y}=e;r&&(u=r);const b=[],x=l&&t.animationState&&t.animationState.getState()[l];for(const S in y){const A=t.getValue(S,t.latestValues[S]??null),N=y[S];if(N===void 0||x&&kU(x,S))continue;const I={delay:n,..._p(u||{},S)},M=A.get();if(M!==void 0&&!A.isAnimating&&!Array.isArray(N)&&N===M&&!I.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const $=KE(t);if($){const Y=window.MotionHandoffAnimation($,S,mn);Y!==null&&(I.startTime=Y,j=!0)}}Nm(t,S),A.start(Fp(S,A,N,t.shouldReduceMotion&&TE.has(S)?{type:!1}:I,t,j));const U=A.animation;U&&b.push(U)}return h&&Promise.all(b).then(()=>{mn.update(()=>{h&&CU(t,h)})}),b}function Rm(t,e,n={}){var b;const r=xd(t,e,n.type==="exit"?(b=t.presenceContext)==null?void 0:b.custom:void 0);let{transition:l=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(l=n.transitionOverride);const u=r?()=>Promise.all(ZE(t,r,n)):()=>Promise.resolve(),h=t.variantChildren&&t.variantChildren.size?(x=0)=>{const{delayChildren:S=0,staggerChildren:A,staggerDirection:N}=l;return LU(t,e,x,S,A,N,n)}:()=>Promise.resolve(),{when:y}=l;if(y){const[x,S]=y==="beforeChildren"?[u,h]:[h,u];return x().then(()=>S())}else return Promise.all([u(),h(n.delay)])}function LU(t,e,n=0,r=0,l=0,u=1,h){const y=[],b=t.variantChildren.size,x=(b-1)*l,S=typeof r=="function",A=S?N=>r(N,b):u===1?(N=0)=>N*l:(N=0)=>x-N*l;return Array.from(t.variantChildren).sort(jU).forEach((N,I)=>{N.notify("AnimationStart",e),y.push(Rm(N,e,{...h,delay:n+(S?0:r)+A(I)}).then(()=>N.notify("AnimationComplete",e)))}),Promise.all(y)}function jU(t,e){return t.sortNodePosition(e)}function PU(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const l=e.map(u=>Rm(t,u,n));r=Promise.all(l)}else if(typeof e=="string")r=Rm(t,e,n);else{const l=typeof e=="function"?xd(t,e,n.custom):e;r=Promise.all(ZE(t,l,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function QE(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const BU=Dp.length;function JE(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?JE(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<BU;n++){const r=Dp[n],l=t.props[r];(md(l)||l===!1)&&(e[r]=l)}return e}const UU=[...Mp].reverse(),FU=Mp.length;function VU(t){return e=>Promise.all(e.map(({animation:n,options:r})=>PU(t,n,r)))}function HU(t){let e=VU(t),n=zw(),r=!0;const l=b=>(x,S)=>{var N;const A=xd(t,S,b==="exit"?(N=t.presenceContext)==null?void 0:N.custom:void 0);if(A){const{transition:I,transitionEnd:M,...j}=A;x={...x,...j,...M}}return x};function u(b){e=b(t)}function h(b){const{props:x}=t,S=JE(t.parent)||{},A=[],N=new Set;let I={},M=1/0;for(let U=0;U<FU;U++){const $=UU[U],Y=n[$],P=x[$]!==void 0?x[$]:S[$],V=md(P),z=$===b?Y.isActive:null;z===!1&&(M=U);let Z=P===S[$]&&P!==x[$]&&V;if(Z&&r&&t.manuallyAnimateOnMount&&(Z=!1),Y.protectedKeys={...I},!Y.isActive&&z===null||!P&&!Y.prevProp||e0(P)||typeof P=="boolean")continue;const W=zU(Y.prevProp,P);let ae=W||$===b&&Y.isActive&&!Z&&V||U>M&&V,X=!1;const be=Array.isArray(P)?P:[P];let Ae=be.reduce(l($),{});z===!1&&(Ae={});const{prevResolvedValues:ve={}}=Y,ce={...ve,...Ae},Fe=le=>{ae=!0,N.has(le)&&(X=!0,N.delete(le)),Y.needsAnimating[le]=!0;const De=t.getValue(le);De&&(De.liveStyle=!1)};for(const le in ce){const De=Ae[le],$e=ve[le];if(I.hasOwnProperty(le))continue;let H=!1;_m(De)&&_m($e)?H=!QE(De,$e):H=De!==$e,H?De!=null?Fe(le):N.add(le):De!==void 0&&N.has(le)?Fe(le):Y.protectedKeys[le]=!0}Y.prevProp=P,Y.prevResolvedValues=Ae,Y.isActive&&(I={...I,...Ae}),r&&t.blockInitialAnimation&&(ae=!1),ae&&(!(Z&&W)||X)&&A.push(...be.map(le=>({animation:le,options:{type:$}})))}if(N.size){const U={};if(typeof x.initial!="boolean"){const $=xd(t,Array.isArray(x.initial)?x.initial[0]:x.initial);$&&$.transition&&(U.transition=$.transition)}N.forEach($=>{const Y=t.getBaseTarget($),P=t.getValue($);P&&(P.liveStyle=!0),U[$]=Y??null}),A.push({animation:U})}let j=!!A.length;return r&&(x.initial===!1||x.initial===x.animate)&&!t.manuallyAnimateOnMount&&(j=!1),r=!1,j?e(A):Promise.resolve()}function y(b,x){var A;if(n[b].isActive===x)return Promise.resolve();(A=t.variantChildren)==null||A.forEach(N=>{var I;return(I=N.animationState)==null?void 0:I.setActive(b,x)}),n[b].isActive=x;const S=h(b);for(const N in n)n[N].protectedKeys={};return S}return{animateChanges:h,setActive:y,setAnimateFunction:u,getState:()=>n,reset:()=>{n=zw(),r=!0}}}function zU(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!QE(e,t):!1}function Po(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zw(){return{animate:Po(!0),whileInView:Po(),whileHover:Po(),whileTap:Po(),whileDrag:Po(),whileFocus:Po(),exit:Po()}}class uo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class $U extends uo{constructor(e){super(e),e.animationState||(e.animationState=HU(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();e0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let GU=0;class qU extends uo{constructor(){super(...arguments),this.id=GU++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const l=this.node.animationState.setActive("exit",!e);n&&!e&&l.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const YU={animation:{Feature:$U},exit:{Feature:qU}};function yd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Dd(t){return{point:{x:t.pageX,y:t.pageY}}}const XU=t=>e=>Op(e)&&t(e,Dd(e));function id(t,e,n,r){return yd(t,e,XU(n),r)}function eC({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function WU({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function KU(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const tC=1e-4,ZU=1-tC,QU=1+tC,nC=.01,JU=0-nC,eF=0+nC;function ks(t){return t.max-t.min}function tF(t,e,n){return Math.abs(t-e)<=n}function $w(t,e,n,r=.5){t.origin=r,t.originPoint=bn(e.min,e.max,t.origin),t.scale=ks(n)/ks(e),t.translate=bn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=ZU&&t.scale<=QU||isNaN(t.scale))&&(t.scale=1),(t.translate>=JU&&t.translate<=eF||isNaN(t.translate))&&(t.translate=0)}function rd(t,e,n,r){$w(t.x,e.x,n.x,r?r.originX:void 0),$w(t.y,e.y,n.y,r?r.originY:void 0)}function Gw(t,e,n){t.min=n.min+e.min,t.max=t.min+ks(e)}function nF(t,e,n){Gw(t.x,e.x,n.x),Gw(t.y,e.y,n.y)}function qw(t,e,n){t.min=e.min-n.min,t.max=t.min+ks(e)}function ad(t,e,n){qw(t.x,e.x,n.x),qw(t.y,e.y,n.y)}const Yw=()=>({translate:0,scale:1,origin:0,originPoint:0}),uc=()=>({x:Yw(),y:Yw()}),Xw=()=>({min:0,max:0}),jn=()=>({x:Xw(),y:Xw()});function Si(t){return[t("x"),t("y")]}function Ag(t){return t===void 0||t===1}function Om({scale:t,scaleX:e,scaleY:n}){return!Ag(t)||!Ag(e)||!Ag(n)}function Fo(t){return Om(t)||sC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function sC(t){return Ww(t.x)||Ww(t.y)}function Ww(t){return t&&t!=="0%"}function Lh(t,e,n){const r=t-n,l=e*r;return n+l}function Kw(t,e,n,r,l){return l!==void 0&&(t=Lh(t,l,r)),Lh(t,n,r)+e}function Im(t,e=0,n=1,r,l){t.min=Kw(t.min,e,n,r,l),t.max=Kw(t.max,e,n,r,l)}function iC(t,{x:e,y:n}){Im(t.x,e.translate,e.scale,e.originPoint),Im(t.y,n.translate,n.scale,n.originPoint)}const Zw=.999999999999,Qw=1.0000000000001;function sF(t,e,n,r=!1){const l=n.length;if(!l)return;e.x=e.y=1;let u,h;for(let y=0;y<l;y++){u=n[y],h=u.projectionDelta;const{visualElement:b}=u.options;b&&b.props.style&&b.props.style.display==="contents"||(r&&u.options.layoutScroll&&u.scroll&&u!==u.root&&fc(t,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),h&&(e.x*=h.x.scale,e.y*=h.y.scale,iC(t,h)),r&&Fo(u.latestValues)&&fc(t,u.latestValues))}e.x<Qw&&e.x>Zw&&(e.x=1),e.y<Qw&&e.y>Zw&&(e.y=1)}function dc(t,e){t.min=t.min+e,t.max=t.max+e}function Jw(t,e,n,r,l=.5){const u=bn(t.min,t.max,l);Im(t,e,n,u,r)}function fc(t,e){Jw(t.x,e.x,e.scaleX,e.scale,e.originX),Jw(t.y,e.y,e.scaleY,e.scale,e.originY)}function rC(t,e){return eC(KU(t.getBoundingClientRect(),e))}function iF(t,e,n){const r=rC(t,n),{scroll:l}=e;return l&&(dc(r.x,l.offset.x),dc(r.y,l.offset.y)),r}const aC=({current:t})=>t?t.ownerDocument.defaultView:null,ev=(t,e)=>Math.abs(t-e);function rF(t,e){const n=ev(t.x,e.x),r=ev(t.y,e.y);return Math.sqrt(n**2+r**2)}class oC{constructor(e,n,{transformPagePoint:r,contextWindow:l=window,dragSnapToOrigin:u=!1,distanceThreshold:h=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=_g(this.lastMoveEventInfo,this.history),I=this.startEvent!==null,M=rF(N.offset,{x:0,y:0})>=this.distanceThreshold;if(!I&&!M)return;const{point:j}=N,{timestamp:U}=gs;this.history.push({...j,timestamp:U});const{onStart:$,onMove:Y}=this.handlers;I||($&&$(this.lastMoveEvent,N),this.startEvent=this.lastMoveEvent),Y&&Y(this.lastMoveEvent,N)},this.handlePointerMove=(N,I)=>{this.lastMoveEvent=N,this.lastMoveEventInfo=Tg(I,this.transformPagePoint),mn.update(this.updatePoint,!0)},this.handlePointerUp=(N,I)=>{this.end();const{onEnd:M,onSessionEnd:j,resumeAnimation:U}=this.handlers;if(this.dragSnapToOrigin&&U&&U(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const $=_g(N.type==="pointercancel"?this.lastMoveEventInfo:Tg(I,this.transformPagePoint),this.history);this.startEvent&&M&&M(N,$),j&&j(N,$)},!Op(e))return;this.dragSnapToOrigin=u,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=h,this.contextWindow=l||window;const y=Dd(e),b=Tg(y,this.transformPagePoint),{point:x}=b,{timestamp:S}=gs;this.history=[{...x,timestamp:S}];const{onSessionStart:A}=n;A&&A(e,_g(b,this.history)),this.removeListeners=Od(id(this.contextWindow,"pointermove",this.handlePointerMove),id(this.contextWindow,"pointerup",this.handlePointerUp),id(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ao(this.updatePoint)}}function Tg(t,e){return e?{point:e(t.point)}:t}function tv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function _g({point:t},e){return{point:t,delta:tv(t,lC(e)),offset:tv(t,aF(e)),velocity:oF(e,.1)}}function aF(t){return t[0]}function lC(t){return t[t.length-1]}function oF(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const l=lC(t);for(;n>=0&&(r=t[n],!(l.timestamp-r.timestamp>yr(e)));)n--;if(!r)return{x:0,y:0};const u=br(l.timestamp-r.timestamp);if(u===0)return{x:0,y:0};const h={x:(l.x-r.x)/u,y:(l.y-r.y)/u};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function lF(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?bn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?bn(n,t,r.max):Math.min(t,n)),t}function nv(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function cF(t,{top:e,left:n,bottom:r,right:l}){return{x:nv(t.x,n,l),y:nv(t.y,e,r)}}function sv(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function uF(t,e){return{x:sv(t.x,e.x),y:sv(t.y,e.y)}}function dF(t,e){let n=.5;const r=ks(t),l=ks(e);return l>r?n=fd(e.min,e.max-r,t.min):r>l&&(n=fd(t.min,t.max-l,e.min)),ta(0,1,n)}function fF(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Mm=.35;function hF(t=Mm){return t===!1?t=0:t===!0&&(t=Mm),{x:iv(t,"left","right"),y:iv(t,"top","bottom")}}function iv(t,e,n){return{min:rv(t,e),max:rv(t,n)}}function rv(t,e){return typeof t=="number"?t:t[e]||0}const gF=new WeakMap;class mF{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const u=A=>{const{dragSnapToOrigin:N}=this.getProps();N?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Dd(A).point)},h=(A,N)=>{const{drag:I,dragPropagation:M,onDragStart:j}=this.getProps();if(I&&!M&&(this.openDragLock&&this.openDragLock(),this.openDragLock=RB(I),!this.openDragLock))return;this.latestPointerEvent=A,this.latestPanInfo=N,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Si($=>{let Y=this.getAxisMotionValue($).get()||0;if(wr.test(Y)){const{projection:P}=this.visualElement;if(P&&P.layout){const V=P.layout.layoutBox[$];V&&(Y=ks(V)*(parseFloat(Y)/100))}}this.originPoint[$]=Y}),j&&mn.postRender(()=>j(A,N)),Nm(this.visualElement,"transform");const{animationState:U}=this.visualElement;U&&U.setActive("whileDrag",!0)},y=(A,N)=>{this.latestPointerEvent=A,this.latestPanInfo=N;const{dragPropagation:I,dragDirectionLock:M,onDirectionLock:j,onDrag:U}=this.getProps();if(!I&&!this.openDragLock)return;const{offset:$}=N;if(M&&this.currentDirection===null){this.currentDirection=pF($),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",N.point,$),this.updateAxis("y",N.point,$),this.visualElement.render(),U&&U(A,N)},b=(A,N)=>{this.latestPointerEvent=A,this.latestPanInfo=N,this.stop(A,N),this.latestPointerEvent=null,this.latestPanInfo=null},x=()=>Si(A=>{var N;return this.getAnimationState(A)==="paused"&&((N=this.getAxisMotionValue(A).animation)==null?void 0:N.play())}),{dragSnapToOrigin:S}=this.getProps();this.panSession=new oC(e,{onSessionStart:u,onStart:h,onMove:y,onSessionEnd:b,resumeAnimation:x},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:S,distanceThreshold:r,contextWindow:aC(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,l=n||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!l||!r)return;const{velocity:h}=l;this.startAnimation(h);const{onDragEnd:y}=this.getProps();y&&mn.postRender(()=>y(r,l))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:l}=this.getProps();if(!r||!lh(e,l,this.currentDirection))return;const u=this.getAxisMotionValue(e);let h=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(h=lF(h,this.constraints[e],this.elastic[e])),u.set(h)}resolveConstraints(){var u;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(u=this.visualElement.projection)==null?void 0:u.layout,l=this.constraints;e&&cc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=cF(r.layoutBox,e):this.constraints=!1,this.elastic=hF(n),l!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Si(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=fF(r.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!cc(e))return!1;const r=e.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const u=iF(r,l.root,this.visualElement.getTransformPagePoint());let h=uF(l.layout.layoutBox,u);if(n){const y=n(WU(h));this.hasMutatedConstraints=!!y,y&&(h=eC(y))}return h}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:l,dragTransition:u,dragSnapToOrigin:h,onDragTransitionEnd:y}=this.getProps(),b=this.constraints||{},x=Si(S=>{if(!lh(S,n,this.currentDirection))return;let A=b&&b[S]||{};h&&(A={min:0,max:0});const N=l?200:1e6,I=l?40:1e7,M={type:"inertia",velocity:r?e[S]:0,bounceStiffness:N,bounceDamping:I,timeConstant:750,restDelta:1,restSpeed:10,...u,...A};return this.startAxisValueAnimation(S,M)});return Promise.all(x).then(y)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Nm(this.visualElement,e),r.start(Fp(e,r,0,n,this.visualElement,!1))}stopAnimation(){Si(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Si(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),l=r[n];return l||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Si(n=>{const{drag:r}=this.getProps();if(!lh(n,r,this.currentDirection))return;const{projection:l}=this.visualElement,u=this.getAxisMotionValue(n);if(l&&l.layout){const{min:h,max:y}=l.layout.layoutBox[n];u.set(e[n]-bn(h,y,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!cc(n)||!r||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};Si(h=>{const y=this.getAxisMotionValue(h);if(y&&this.constraints!==!1){const b=y.get();l[h]=dF({min:b,max:b},this.constraints[h])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Si(h=>{if(!lh(h,e,null))return;const y=this.getAxisMotionValue(h),{min:b,max:x}=this.constraints[h];y.set(bn(b,x,l[h]))})}addListeners(){if(!this.visualElement.current)return;gF.set(this.visualElement,this);const e=this.visualElement.current,n=id(e,"pointerdown",b=>{const{drag:x,dragListener:S=!0}=this.getProps();x&&S&&this.start(b)}),r=()=>{const{dragConstraints:b}=this.getProps();cc(b)&&b.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,u=l.addEventListener("measure",r);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),mn.read(r);const h=yd(window,"resize",()=>this.scalePositionWithinConstraints()),y=l.addEventListener("didUpdate",({delta:b,hasLayoutChanged:x})=>{this.isDragging&&x&&(Si(S=>{const A=this.getAxisMotionValue(S);A&&(this.originPoint[S]+=b[S].translate,A.set(A.get()+b[S].translate))}),this.visualElement.render())});return()=>{h(),n(),u(),y&&y()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:l=!1,dragConstraints:u=!1,dragElastic:h=Mm,dragMomentum:y=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:l,dragConstraints:u,dragElastic:h,dragMomentum:y}}}function lh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function pF(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class xF extends uo{constructor(e){super(e),this.removeGroupControls=Ai,this.removeListeners=Ai,this.controls=new mF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ai}unmount(){this.removeGroupControls(),this.removeListeners()}}const av=t=>(e,n)=>{t&&mn.postRender(()=>t(e,n))};class yF extends uo{constructor(){super(...arguments),this.removePointerDownListener=Ai}onPointerDown(e){this.session=new oC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:l}=this.node.getProps();return{onSessionStart:av(e),onStart:av(n),onMove:r,onEnd:(u,h)=>{delete this.session,l&&mn.postRender(()=>l(u,h))}}}mount(){this.removePointerDownListener=id(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ph={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ov(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Bu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(dt.test(t))t=parseFloat(t);else return t;const n=ov(t,e.target.x),r=ov(t,e.target.y);return`${n}% ${r}%`}},bF={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,l=oo.parse(t);if(l.length>5)return r;const u=oo.createTransformer(t),h=typeof l[0]!="number"?1:0,y=n.x.scale*e.x,b=n.y.scale*e.y;l[0+h]/=y,l[1+h]/=b;const x=bn(y,b,.5);return typeof l[2+h]=="number"&&(l[2+h]/=x),typeof l[3+h]=="number"&&(l[3+h]/=x),u(l)}};let lv=!1;class wF extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:l}=this.props,{projection:u}=e;iU(vF),u&&(n.group&&n.group.add(u),r&&r.register&&l&&r.register(u),lv&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),ph.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:l,isPresent:u}=this.props,{projection:h}=r;return h&&(h.isPresent=u,lv=!0,l||e.layoutDependency!==n||n===void 0||e.isPresent!==u?h.willUpdate():this.safeToRemove(),e.isPresent!==u&&(u?h.promote():h.relegate()||mn.postRender(()=>{const y=h.getStack();(!y||!y.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Rp.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:l}=e;l&&(l.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(l),r&&r.deregister&&r.deregister(l))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function cC(t){const[e,n]=jE(),r=R.useContext(ap);return E.jsx(wF,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(VE),isPresent:e,safeToRemove:n})}const vF={borderRadius:{...Bu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bu,borderTopRightRadius:Bu,borderBottomLeftRadius:Bu,borderBottomRightRadius:Bu,boxShadow:bF};function SF(t,e,n){const r=Ts(t)?t:_c(t);return r.start(Fp("",r,e,n)),r.animation}const EF=(t,e)=>t.depth-e.depth;class CF{constructor(){this.children=[],this.isDirty=!1}add(e){cp(this.children,e),this.isDirty=!0}remove(e){up(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(EF),this.isDirty=!1,this.children.forEach(e)}}function AF(t,e){const n=Xs.now(),r=({timestamp:l})=>{const u=l-n;u>=e&&(ao(r),t(u-e))};return mn.setup(r,!0),()=>ao(r)}const uC=["TopLeft","TopRight","BottomLeft","BottomRight"],TF=uC.length,cv=t=>typeof t=="string"?parseFloat(t):t,uv=t=>typeof t=="number"||dt.test(t);function _F(t,e,n,r,l,u){l?(t.opacity=bn(0,n.opacity??1,NF(r)),t.opacityExit=bn(e.opacity??1,0,RF(r))):u&&(t.opacity=bn(e.opacity??1,n.opacity??1,r));for(let h=0;h<TF;h++){const y=`border${uC[h]}Radius`;let b=dv(e,y),x=dv(n,y);if(b===void 0&&x===void 0)continue;b||(b=0),x||(x=0),b===0||x===0||uv(b)===uv(x)?(t[y]=Math.max(bn(cv(b),cv(x),r),0),(wr.test(x)||wr.test(b))&&(t[y]+="%")):t[y]=x}(e.rotate||n.rotate)&&(t.rotate=bn(e.rotate||0,n.rotate||0,r))}function dv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const NF=dC(0,.5,sE),RF=dC(.5,.95,Ai);function dC(t,e,n){return r=>r<t?0:r>e?1:n(fd(t,e,r))}function fv(t,e){t.min=e.min,t.max=e.max}function vi(t,e){fv(t.x,e.x),fv(t.y,e.y)}function hv(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function gv(t,e,n,r,l){return t-=e,t=Lh(t,1/n,r),l!==void 0&&(t=Lh(t,1/l,r)),t}function OF(t,e=0,n=1,r=.5,l,u=t,h=t){if(wr.test(e)&&(e=parseFloat(e),e=bn(h.min,h.max,e/100)-h.min),typeof e!="number")return;let y=bn(u.min,u.max,r);t===u&&(y-=e),t.min=gv(t.min,e,n,y,l),t.max=gv(t.max,e,n,y,l)}function mv(t,e,[n,r,l],u,h){OF(t,e[n],e[r],e[l],e.scale,u,h)}const IF=["x","scaleX","originX"],MF=["y","scaleY","originY"];function pv(t,e,n,r){mv(t.x,e,IF,n?n.x:void 0,r?r.x:void 0),mv(t.y,e,MF,n?n.y:void 0,r?r.y:void 0)}function xv(t){return t.translate===0&&t.scale===1}function fC(t){return xv(t.x)&&xv(t.y)}function yv(t,e){return t.min===e.min&&t.max===e.max}function DF(t,e){return yv(t.x,e.x)&&yv(t.y,e.y)}function bv(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function hC(t,e){return bv(t.x,e.x)&&bv(t.y,e.y)}function wv(t){return ks(t.x)/ks(t.y)}function vv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class kF{constructor(){this.members=[]}add(e){cp(this.members,e),e.scheduleRender()}remove(e){if(up(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(l=>e===l);if(n===0)return!1;let r;for(let l=n;l>=0;l--){const u=this.members[l];if(u.isPresent!==!1){r=u;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:l}=e.options;l===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function LF(t,e,n){let r="";const l=t.x.translate/e.x,u=t.y.translate/e.y,h=(n==null?void 0:n.z)||0;if((l||u||h)&&(r=`translate3d(${l}px, ${u}px, ${h}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:x,rotate:S,rotateX:A,rotateY:N,skewX:I,skewY:M}=n;x&&(r=`perspective(${x}px) ${r}`),S&&(r+=`rotate(${S}deg) `),A&&(r+=`rotateX(${A}deg) `),N&&(r+=`rotateY(${N}deg) `),I&&(r+=`skewX(${I}deg) `),M&&(r+=`skewY(${M}deg) `)}const y=t.x.scale*e.x,b=t.y.scale*e.y;return(y!==1||b!==1)&&(r+=`scale(${y}, ${b})`),r||"none"}const Ng=["","X","Y","Z"],jF=1e3;let PF=0;function Rg(t,e,n,r){const{latestValues:l}=e;l[t]&&(n[t]=l[t],e.setStaticValue(t,0),r&&(r[t]=0))}function gC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=KE(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:l,layoutId:u}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",mn,!(l||u))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&gC(r)}function mC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:l}){return class{constructor(h={},y=e==null?void 0:e()){this.id=PF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(FF),this.nodes.forEach($F),this.nodes.forEach(GF),this.nodes.forEach(VF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=y?y.root||y:this,this.path=y?[...y.path,y]:[],this.parent=y,this.depth=y?y.depth+1:0;for(let b=0;b<this.path.length;b++)this.path[b].shouldResetTransform=!0;this.root===this&&(this.nodes=new CF)}addEventListener(h,y){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new hp),this.eventHandlers.get(h).add(y)}notifyListeners(h,...y){const b=this.eventHandlers.get(h);b&&b.notify(...y)}hasListeners(h){return this.eventHandlers.has(h)}mount(h){if(this.instance)return;this.isSVG=LE(h)&&!LB(h),this.instance=h;const{layoutId:y,layout:b,visualElement:x}=this.options;if(x&&!x.current&&x.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(b||y)&&(this.isLayoutDirty=!0),t){let S,A=0;const N=()=>this.root.updateBlockedByResize=!1;mn.read(()=>{A=window.innerWidth}),t(h,()=>{const I=window.innerWidth;I!==A&&(A=I,this.root.updateBlockedByResize=!0,S&&S(),S=AF(N,250),ph.hasAnimatedSinceResize&&(ph.hasAnimatedSinceResize=!1,this.nodes.forEach(Cv)))})}y&&this.root.registerSharedNode(y,this),this.options.animate!==!1&&x&&(y||b)&&this.addEventListener("didUpdate",({delta:S,hasLayoutChanged:A,hasRelativeLayoutChanged:N,layout:I})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||x.getDefaultTransition()||KF,{onLayoutAnimationStart:j,onLayoutAnimationComplete:U}=x.getProps(),$=!this.targetLayout||!hC(this.targetLayout,I),Y=!A&&N;if(this.options.layoutRoot||this.resumeFrom||Y||A&&($||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={..._p(M,"layout"),onPlay:j,onComplete:U};(x.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(S,Y)}else A||Cv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=I})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ao(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qF),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const A=this.path[S];A.shouldResetTransform=!0,A.updateScroll("snapshot"),A.options.layoutRoot&&A.willUpdate(!1)}const{layoutId:y,layout:b}=this.options;if(y===void 0&&!b)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Sv);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ev);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(zF),this.nodes.forEach(BF),this.nodes.forEach(UF)):this.nodes.forEach(Ev),this.clearAllSnapshots();const y=Xs.now();gs.delta=ta(0,1e3/60,y-gs.timestamp),gs.timestamp=y,gs.isProcessing=!0,bg.update.process(gs),bg.preRender.process(gs),bg.render.process(gs),gs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Rp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(HF),this.sharedNodes.forEach(YF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,mn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){mn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ks(this.snapshot.measuredBox.x)&&!ks(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let b=0;b<this.path.length;b++)this.path[b].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=jn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:y}=this.options;y&&y.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let y=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(y=!1),y&&this.instance){const b=r(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:b,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:b}}}resetTransform(){if(!l)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,y=this.projectionDelta&&!fC(this.projectionDelta),b=this.getTransformTemplate(),x=b?b(this.latestValues,""):void 0,S=x!==this.prevTransformTemplateValue;h&&this.instance&&(y||Fo(this.latestValues)||S)&&(l(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const y=this.measurePageBox();let b=this.removeElementScroll(y);return h&&(b=this.removeTransform(b)),ZF(b),{animationId:this.root.animationId,measuredBox:y,layoutBox:b,latestValues:{},source:this.id}}measurePageBox(){var x;const{visualElement:h}=this.options;if(!h)return jn();const y=h.measureViewportBox();if(!(((x=this.scroll)==null?void 0:x.wasRoot)||this.path.some(QF))){const{scroll:S}=this.root;S&&(dc(y.x,S.offset.x),dc(y.y,S.offset.y))}return y}removeElementScroll(h){var b;const y=jn();if(vi(y,h),(b=this.scroll)!=null&&b.wasRoot)return y;for(let x=0;x<this.path.length;x++){const S=this.path[x],{scroll:A,options:N}=S;S!==this.root&&A&&N.layoutScroll&&(A.wasRoot&&vi(y,h),dc(y.x,A.offset.x),dc(y.y,A.offset.y))}return y}applyTransform(h,y=!1){const b=jn();vi(b,h);for(let x=0;x<this.path.length;x++){const S=this.path[x];!y&&S.options.layoutScroll&&S.scroll&&S!==S.root&&fc(b,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),Fo(S.latestValues)&&fc(b,S.latestValues)}return Fo(this.latestValues)&&fc(b,this.latestValues),b}removeTransform(h){const y=jn();vi(y,h);for(let b=0;b<this.path.length;b++){const x=this.path[b];if(!x.instance||!Fo(x.latestValues))continue;Om(x.latestValues)&&x.updateSnapshot();const S=jn(),A=x.measurePageBox();vi(S,A),pv(y,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,S)}return Fo(this.latestValues)&&pv(y,this.latestValues),y}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var N;const y=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=y.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=y.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=y.isSharedProjectionDirty);const b=!!this.resumingFrom||this!==y;if(!(h||b&&this.isSharedProjectionDirty||this.isProjectionDirty||(N=this.parent)!=null&&N.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:A}=this.options;if(!(!this.layout||!(S||A))){if(this.resolvedRelativeTargetAt=gs.timestamp,!this.targetDelta&&!this.relativeTarget){const I=this.getClosestProjectingParent();I&&I.layout&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jn(),this.relativeTargetOrigin=jn(),ad(this.relativeTargetOrigin,this.layout.layoutBox,I.layout.layoutBox),vi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=jn(),this.targetWithTransforms=jn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),nF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):vi(this.target,this.layout.layoutBox),iC(this.target,this.targetDelta)):vi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const I=this.getClosestProjectingParent();I&&!!I.resumingFrom==!!this.resumingFrom&&!I.options.layoutScroll&&I.target&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jn(),this.relativeTargetOrigin=jn(),ad(this.relativeTargetOrigin,this.target,I.target),vi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Om(this.parent.latestValues)||sC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var M;const h=this.getLead(),y=!!this.resumingFrom||this!==h;let b=!0;if((this.isProjectionDirty||(M=this.parent)!=null&&M.isProjectionDirty)&&(b=!1),y&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(b=!1),this.resolvedRelativeTargetAt===gs.timestamp&&(b=!1),b)return;const{layout:x,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||S))return;vi(this.layoutCorrected,this.layout.layoutBox);const A=this.treeScale.x,N=this.treeScale.y;sF(this.layoutCorrected,this.treeScale,this.path,y),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=jn());const{target:I}=h;if(!I){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hv(this.prevProjectionDelta.x,this.projectionDelta.x),hv(this.prevProjectionDelta.y,this.projectionDelta.y)),rd(this.projectionDelta,this.layoutCorrected,I,this.latestValues),(this.treeScale.x!==A||this.treeScale.y!==N||!vv(this.projectionDelta.x,this.prevProjectionDelta.x)||!vv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",I))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){var y;if((y=this.options.visualElement)==null||y.scheduleRender(),h){const b=this.getStack();b&&b.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=uc(),this.projectionDelta=uc(),this.projectionDeltaWithTransform=uc()}setAnimationOrigin(h,y=!1){const b=this.snapshot,x=b?b.latestValues:{},S={...this.latestValues},A=uc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!y;const N=jn(),I=b?b.source:void 0,M=this.layout?this.layout.source:void 0,j=I!==M,U=this.getStack(),$=!U||U.members.length<=1,Y=!!(j&&!$&&this.options.crossfade===!0&&!this.path.some(WF));this.animationProgress=0;let P;this.mixTargetDelta=V=>{const z=V/1e3;Av(A.x,h.x,z),Av(A.y,h.y,z),this.setTargetDelta(A),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ad(N,this.layout.layoutBox,this.relativeParent.layout.layoutBox),XF(this.relativeTarget,this.relativeTargetOrigin,N,z),P&&DF(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=jn()),vi(P,this.relativeTarget)),j&&(this.animationValues=S,_F(S,x,this.latestValues,z,Y,$)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){var y,b,x;this.notifyListeners("animationStart"),(y=this.currentAnimation)==null||y.stop(),(x=(b=this.resumingFrom)==null?void 0:b.currentAnimation)==null||x.stop(),this.pendingAnimation&&(ao(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=mn.update(()=>{ph.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=_c(0)),this.currentAnimation=SF(this.motionValue,[0,1e3],{...h,velocity:0,isSync:!0,onUpdate:S=>{this.mixTargetDelta(S),h.onUpdate&&h.onUpdate(S)},onStop:()=>{},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(jF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:y,target:b,layout:x,latestValues:S}=h;if(!(!y||!b||!x)){if(this!==h&&this.layout&&x&&pC(this.options.animationType,this.layout.layoutBox,x.layoutBox)){b=this.target||jn();const A=ks(this.layout.layoutBox.x);b.x.min=h.target.x.min,b.x.max=b.x.min+A;const N=ks(this.layout.layoutBox.y);b.y.min=h.target.y.min,b.y.max=b.y.min+N}vi(y,b),fc(y,S),rd(this.projectionDeltaWithTransform,this.layoutCorrected,y,S)}}registerSharedNode(h,y){this.sharedNodes.has(h)||this.sharedNodes.set(h,new kF),this.sharedNodes.get(h).add(y);const x=y.options.initialPromotionConfig;y.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(y):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var y;const{layoutId:h}=this.options;return h?((y=this.getStack())==null?void 0:y.lead)||this:this}getPrevLead(){var y;const{layoutId:h}=this.options;return h?(y=this.getStack())==null?void 0:y.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:y,preserveFollowOpacity:b}={}){const x=this.getStack();x&&x.promote(this,b),h&&(this.projectionDelta=void 0,this.needsReset=!0),y&&this.setOptions({transition:y})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let y=!1;const{latestValues:b}=h;if((b.z||b.rotate||b.rotateX||b.rotateY||b.rotateZ||b.skewX||b.skewY)&&(y=!0),!y)return;const x={};b.z&&Rg("z",h,x,this.animationValues);for(let S=0;S<Ng.length;S++)Rg(`rotate${Ng[S]}`,h,x,this.animationValues),Rg(`skew${Ng[S]}`,h,x,this.animationValues);h.render();for(const S in x)h.setStaticValue(S,x[S]),this.animationValues&&(this.animationValues[S]=x[S]);h.scheduleRender()}applyProjectionStyles(h,y){if(!this.instance||this.isSVG)return;if(!this.isVisible){h.visibility="hidden";return}const b=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,h.visibility="",h.opacity="",h.pointerEvents=mh(y==null?void 0:y.pointerEvents)||"",h.transform=b?b(this.latestValues,""):"none";return}const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){this.options.layoutId&&(h.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,h.pointerEvents=mh(y==null?void 0:y.pointerEvents)||""),this.hasProjected&&!Fo(this.latestValues)&&(h.transform=b?b({},""):"none",this.hasProjected=!1);return}h.visibility="";const S=x.animationValues||x.latestValues;this.applyTransformsToTarget();let A=LF(this.projectionDeltaWithTransform,this.treeScale,S);b&&(A=b(S,A)),h.transform=A;const{x:N,y:I}=this.projectionDelta;h.transformOrigin=`${N.origin*100}% ${I.origin*100}% 0`,x.animationValues?h.opacity=x===this?S.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:h.opacity=x===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const M in pd){if(S[M]===void 0)continue;const{correct:j,applyTo:U,isCSSVariable:$}=pd[M],Y=A==="none"?S[M]:j(S[M],x);if(U){const P=U.length;for(let V=0;V<P;V++)h[U[V]]=Y}else $?this.options.visualElement.renderState.vars[M]=Y:h[M]=Y}this.options.layoutId&&(h.pointerEvents=x===this?mh(y==null?void 0:y.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var y;return(y=h.currentAnimation)==null?void 0:y.stop()}),this.root.nodes.forEach(Sv),this.root.sharedNodes.clear()}}}function BF(t){t.updateLayout()}function UF(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:l}=t.layout,{animationType:u}=t.options,h=e.source!==t.layout.source;u==="size"?Si(A=>{const N=h?e.measuredBox[A]:e.layoutBox[A],I=ks(N);N.min=r[A].min,N.max=N.min+I}):pC(u,e.layoutBox,r)&&Si(A=>{const N=h?e.measuredBox[A]:e.layoutBox[A],I=ks(r[A]);N.max=N.min+I,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[A].max=t.relativeTarget[A].min+I)});const y=uc();rd(y,r,e.layoutBox);const b=uc();h?rd(b,t.applyTransform(l,!0),e.measuredBox):rd(b,r,e.layoutBox);const x=!fC(y);let S=!1;if(!t.resumeFrom){const A=t.getClosestProjectingParent();if(A&&!A.resumeFrom){const{snapshot:N,layout:I}=A;if(N&&I){const M=jn();ad(M,e.layoutBox,N.layoutBox);const j=jn();ad(j,r,I.layoutBox),hC(M,j)||(S=!0),A.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=M,t.relativeParent=A)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:b,layoutDelta:y,hasLayoutChanged:x,hasRelativeLayoutChanged:S})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function FF(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function VF(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function HF(t){t.clearSnapshot()}function Sv(t){t.clearMeasurements()}function Ev(t){t.isLayoutDirty=!1}function zF(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Cv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function $F(t){t.resolveTargetDelta()}function GF(t){t.calcProjection()}function qF(t){t.resetSkewAndRotation()}function YF(t){t.removeLeadSnapshot()}function Av(t,e,n){t.translate=bn(e.translate,0,n),t.scale=bn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Tv(t,e,n,r){t.min=bn(e.min,n.min,r),t.max=bn(e.max,n.max,r)}function XF(t,e,n,r){Tv(t.x,e.x,n.x,r),Tv(t.y,e.y,n.y,r)}function WF(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const KF={duration:.45,ease:[.4,0,.1,1]},_v=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Nv=_v("applewebkit/")&&!_v("chrome/")?Math.round:Ai;function Rv(t){t.min=Nv(t.min),t.max=Nv(t.max)}function ZF(t){Rv(t.x),Rv(t.y)}function pC(t,e,n){return t==="position"||t==="preserve-aspect"&&!tF(wv(e),wv(n),.2)}function QF(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const JF=mC({attachResizeListener:(t,e)=>yd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Og={current:void 0},xC=mC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Og.current){const t=new JF({});t.mount(window),t.setOptions({layoutScroll:!0}),Og.current=t}return Og.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),eV={pan:{Feature:yF},drag:{Feature:xF,ProjectionNode:xC,MeasureLayout:cC}};function Ov(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const l="onHover"+n,u=r[l];u&&mn.postRender(()=>u(e,Dd(e)))}class tV extends uo{mount(){const{current:e}=this.node;e&&(this.unmount=OB(e,(n,r)=>(Ov(this.node,r,"Start"),l=>Ov(this.node,l,"End"))))}unmount(){}}class nV extends uo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Od(yd(this.node.current,"focus",()=>this.onFocus()),yd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Iv(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const l="onTap"+(n==="End"?"":n),u=r[l];u&&mn.postRender(()=>u(e,Dd(e)))}class sV extends uo{mount(){const{current:e}=this.node;e&&(this.unmount=kB(e,(n,r)=>(Iv(this.node,r,"Start"),(l,{success:u})=>Iv(this.node,l,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Dm=new WeakMap,Ig=new WeakMap,iV=t=>{const e=Dm.get(t.target);e&&e(t)},rV=t=>{t.forEach(iV)};function aV({root:t,...e}){const n=t||document;Ig.has(n)||Ig.set(n,{});const r=Ig.get(n),l=JSON.stringify(e);return r[l]||(r[l]=new IntersectionObserver(rV,{root:t,...e})),r[l]}function oV(t,e,n){const r=aV(e);return Dm.set(t,n),r.observe(t),()=>{Dm.delete(t),r.unobserve(t)}}const lV={some:0,all:1};class cV extends uo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:l="some",once:u}=e,h={root:n?n.current:void 0,rootMargin:r,threshold:typeof l=="number"?l:lV[l]},y=b=>{const{isIntersecting:x}=b;if(this.isInView===x||(this.isInView=x,u&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:S,onViewportLeave:A}=this.node.getProps(),N=x?S:A;N&&N(b)};return oV(this.node.current,h,y)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(uV(e,n))&&this.startObserver()}unmount(){}}function uV({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const dV={inView:{Feature:cV},tap:{Feature:sV},focus:{Feature:nV},hover:{Feature:tV}},fV={layout:{ProjectionNode:xC,MeasureLayout:cC}},km={current:null},yC={current:!1};function hV(){if(yC.current=!0,!!lp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>km.current=t.matches;t.addEventListener("change",e),e()}else km.current=!1}const gV=new WeakMap;function mV(t,e,n){for(const r in e){const l=e[r],u=n[r];if(Ts(l))t.addValue(r,l);else if(Ts(u))t.addValue(r,_c(l,{owner:t}));else if(u!==l)if(t.hasValue(r)){const h=t.getValue(r);h.liveStyle===!0?h.jump(l):h.hasAnimated||h.set(l)}else{const h=t.getStaticValue(r);t.addValue(r,_c(h!==void 0?h:l,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Mv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class pV{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:l,blockInitialAnimation:u,visualState:h},y={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ap,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const N=Xs.now();this.renderScheduledAt<N&&(this.renderScheduledAt=N,mn.render(this.render,!1,!0))};const{latestValues:b,renderState:x}=h;this.latestValues=b,this.baseTarget={...b},this.initialValues=n.initial?{...b}:{},this.renderState=x,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=l,this.options=y,this.blockInitialAnimation=!!u,this.isControllingVariants=t0(n),this.isVariantNode=UE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:S,...A}=this.scrapeMotionValuesFromProps(n,{},this);for(const N in A){const I=A[N];b[N]!==void 0&&Ts(I)&&I.set(b[N],!1)}}mount(e){this.current=e,gV.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),yC.current||hV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:km.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ao(this.notifyUpdate),ao(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=jc.has(e);r&&this.onBindTransform&&this.onBindTransform();const l=n.on("change",y=>{this.latestValues[e]=y,this.props.onUpdate&&mn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),u=n.on("renderRequest",this.scheduleRender);let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{l(),u(),h&&h(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Nc){const n=Nc[e];if(!n)continue;const{isEnabled:r,Feature:l}=n;if(!this.features[e]&&l&&r(this.props)&&(this.features[e]=new l(this)),this.features[e]){const u=this.features[e];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Mv.length;r++){const l=Mv[r];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const u="on"+l,h=e[u];h&&(this.propEventSubscriptions[l]=this.on(l,h))}this.prevMotionValues=mV(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=_c(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(YS(r)||WS(r))?r=parseFloat(r):!PB(r)&&oo.test(n)&&(r=OE(e,n)),this.setBaseTarget(e,Ts(r)?r.get():r)),Ts(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var u;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const h=Bp(this.props,n,(u=this.presenceContext)==null?void 0:u.custom);h&&(r=h[e])}if(n&&r!==void 0)return r;const l=this.getBaseTargetFromProps(this.props,e);return l!==void 0&&!Ts(l)?l:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new hp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class bC extends pV{constructor(){super(...arguments),this.KeyframeResolver=AB}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ts(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function wC(t,{style:e,vars:n},r,l){const u=t.style;let h;for(h in e)u[h]=e[h];l==null||l.applyProjectionStyles(u,r);for(h in n)u.setProperty(h,n[h])}function xV(t){return window.getComputedStyle(t)}class yV extends bC{constructor(){super(...arguments),this.type="html",this.renderInstance=wC}readValueFromInstance(e,n){var r;if(jc.has(n))return(r=this.projection)!=null&&r.isProjecting?vm(n):$P(e,n);{const l=xV(e),u=(pp(n)?l.getPropertyValue(n):l[n])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(e,{transformPagePoint:n}){return rC(e,n)}build(e,n,r){Lp(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Up(e,n,r)}}const vC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bV(t,e,n,r){wC(t,e,void 0,r);for(const l in e.attrs)t.setAttribute(vC.has(l)?l:kp(l),e.attrs[l])}class wV extends bC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=jn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(jc.has(n)){const r=RE(n);return r&&r.default||0}return n=vC.has(n)?n:kp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return WE(e,n,r)}build(e,n,r){GE(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,l){bV(e,n,r,l)}mount(e){this.isSVGTag=YE(e.tagName),super.mount(e)}}const vV=(t,e)=>Pp(t)?new wV(e):new yV(e,{allowProjection:t!==R.Fragment}),SV=vU({...YU,...dV,...eV,...fV},vV),Ys=qB(SV);function EV(t){return cs({queryKey:["review_count"],queryFn:async()=>{const[{data:e,error:n},{data:r,error:l}]=await Promise.all([Ve.from("applications").select("id",{count:"exact"}).eq("status","pending"),Ve.from("application_changes").select("id",{count:"exact"}).eq("status","pending")]);if(n||l)throw new Error((n==null?void 0:n.message)||(l==null?void 0:l.message)||"Failed to count reviews");return((e==null?void 0:e.length)||0)+((r==null?void 0:r.length)||0)},staleTime:1e4,enabled:t,initialData:0})}function CV({label:t,icon:e,color:n,onClick:r,badge:l}){return E.jsxs(Ys.button,{onClick:r,className:`relative ${n} text-white font-bold text-lg p-8
                  flex flex-col items-center gap-3 rounded-2xl shadow-lg
                  w-full min-w-[220px] min-h-[150px] transition-all`,whileHover:{scale:1.05},whileTap:{scale:.97},style:{boxShadow:"0 2px 20px 0 rgba(102,84,179,0.08)"},children:[e,E.jsx("span",{className:"mt-2",children:t}),l?E.jsx("span",{className:"absolute top-2 right-4 bg-red-500 text-white rounded-full text-base font-extrabold px-4 py-2 shadow-lg border-2 border-white",style:{minWidth:36,minHeight:36,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",lineHeight:1},children:l}):null]})}function AV(){const{t}=Pn(),e=Ni(),{user:n}=_d(),r=(n==null?void 0:n.role)==="admin",{data:l}=EV(r),u=[{label:t("addNewStudent"),icon:E.jsx(ik,{className:"w-12 h-12"}),color:"bg-green-500 hover:bg-green-600",onClick:()=>e("/admissions")},{label:t("takeAttendance"),icon:E.jsx(B9,{className:"w-12 h-12"}),color:"bg-blue-500 hover:bg-blue-600",onClick:()=>e("/attendance")},{label:t("studentsActive"),icon:E.jsx(tw,{className:"w-14 h-14"}),color:"bg-[#6654b3] hover:bg-[#5542a0]",onClick:()=>e("/myschool/students")},{label:t("studentsInactive"),icon:E.jsx(tw,{className:"w-14 h-14"}),color:"bg-pink-400 hover:bg-pink-500",onClick:()=>e("/myschool/students/inactive")},{label:t("courses"),icon:E.jsx(M9,{className:"w-12 h-12"}),color:"bg-teal-500 hover:bg-teal-600",onClick:()=>e("/myschool/courses")},...r?[{label:t("review"),icon:E.jsx(R9,{className:"w-12 h-12"}),color:"bg-yellow-500 hover:bg-yellow-600",onClick:()=>e("/review"),badge:l&&l>0?l:null}]:[]];return E.jsxs("main",{className:"min-h-screen flex flex-col bg-[#f6f6f6]",children:[E.jsx("div",{className:"flex flex-col items-center pt-10 pb-6",children:E.jsx("p",{className:"text-lg text-[#6654b3] font-medium mb-6 text-center",children:t("homepageSlogan")})}),E.jsx("div",{className:"flex-1 flex flex-col items-center w-full",children:E.jsx("div",{className:"w-full max-w-5xl grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-7 p-5 sm:p-6",children:u.map(h=>E.jsx(CV,{...h},h.label))})})]})}function TV(t,e){switch(t.type){case"new_application":return e("newApplication",{name:t.payload.name||`${t.payload.first} ${t.payload.last}`});case"course_limit":return e("courseLimitReached",{name:t.payload.student_name});case"edit_request":return e("editRequestFrom",{name:t.payload.student_name});default:return e(t.type.replace(/_/g,""),t.payload)||t.type.replace(/_/g," ")}}function Dv(t){const e=new Set,n=[];for(const r of t){const l=`${r.type}_${r.payload.application_id??""}_${r.created_at}`;e.has(l)||(e.add(l),n.push(r))}return n}function _V(){const{t}=Pn(),e=Ni(),[n,r]=R.useState([]),[l,u]=R.useState(!0),h=R.useRef(null);R.useEffect(()=>{(async()=>{const{data:S,error:A}=await Ve.from("notifications").select("*").order("created_at",{ascending:!1}).limit(200);A?console.error(A):r(Dv(S)),u(!1)})()},[]),R.useEffect(()=>{if(!h.current)return h.current=Ve.channel("notifications_live").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications"},({new:S})=>r(A=>Dv([S,...A]))).subscribe(),()=>{h.current&&(Ve.removeChannel(h.current),h.current=null)}},[]);const y=async(S,A)=>{A==null||A.stopPropagation(),!S.read&&(r(N=>N.map(I=>I.id===S.id?{...I,read:!0}:I)),await Ve.from("notifications").update({read:!0}).eq("id",S.id))},b=S=>{switch(S.type){case"new_application":e(`/admissions?view=review&app=${S.payload.application_id}`);break;case"course_limit":case"edit_request":e(`/myschool/student/${S.student_id}`);break;default:return}y(S)};if(l)return E.jsx("p",{className:"p-8",children:t("loading")});const x=n.filter(S=>!S.read).length;return E.jsxs("div",{className:"p-4 sm:p-8 space-y-6 max-w-3xl mx-auto",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[E.jsx(uS,{className:"w-6 h-6 text-[#6654b3]"}),E.jsxs("h1",{className:"text-2xl font-bold text-[#6654b3]",children:[t("notifications")," ",x>0&&E.jsxs("span",{className:"text-[#ec4899]",children:["(",x,")"]})]})]}),n.length===0?E.jsx("p",{className:"text-gray-600",children:t("noNotifications")}):E.jsx("ul",{className:"space-y-4",children:n.map(S=>E.jsx("li",{onClick:()=>b(S),className:`border rounded-xl p-4 cursor-pointer hover:bg-[#ede9fe] transition
                          ${S.read?"bg-white":"bg-purple-50"}`,children:E.jsxs("div",{className:"flex justify-between items-start gap-3",children:[E.jsxs("div",{children:[E.jsx("p",{className:"font-medium",children:TV(S,t)}),E.jsx("p",{className:"text-xs text-gray-500",children:new Date(S.created_at).toLocaleString()})]}),!S.read&&E.jsxs("button",{type:"button",onClick:A=>y(S,A),className:"text-[#6654b3] hover:underline text-xs flex items-center gap-1",children:[E.jsx(j9,{className:"w-4 h-4"})," ",t("markRead")]})]})},S.id))})]})}const NV=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],SC=[];for(let t=6;t<23;++t)SC.push(`${String(t).padStart(2,"0")}:00-${String(t+1).padStart(2,"0")}:00`);function RV(){return cs({queryKey:["courses_full"],queryFn:async()=>{const{data:t,error:e}=await Ve.from("courses").select("id,name,weekdays,times,capacity,hour_packages").order("name");if(e)throw new Error(e.message);return t||[]},staleTime:12e4})}function OV(){return cs({queryKey:["courseFilters"],queryFn:async()=>{const{data:t,error:e}=await Ve.from("courses").select("id,name,weekdays,times").order("name");if(e)throw new Error(e.message);return t||[]},staleTime:12e4})}function IV(t,e,n){return cs({queryKey:["students",t,e,n],queryFn:async()=>{if(!t)return[];const{data:r,error:l}=await Ve.from("students").select("id,first_name,last_name,nick_name,courses");if(l)throw new Error(l.message);return r?e?n?r.filter(u=>{var y,b;return(((b=(y=u.courses)==null?void 0:y[t])==null?void 0:b[e])||[]).some(x=>x===n||x.startsWith(n.split("-")[0]))}):r.filter(u=>{var h,y;return(y=(h=u.courses)==null?void 0:h[t])==null?void 0:y[e]}):r.filter(u=>{var h;return(h=u.courses)==null?void 0:h[t]}):[]},enabled:!!t,staleTime:3e4})}function MV(){const{t}=Pn(),[e,n]=R.useState("check"),[r,l]=R.useState(""),[u,h]=R.useState(""),[y,b]=R.useState(""),{data:x=[],isLoading:S}=OV(),{data:A=[],isLoading:N}=IV(r,u,y);return E.jsx("div",{className:"min-h-screen bg-[#f6f6f6] flex flex-col items-center py-8 px-2",children:E.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[E.jsxs("div",{className:"flex mb-6 border-b border-purple-200",children:[E.jsx("button",{className:`px-5 py-3 font-bold rounded-t-2xl transition ${e==="check"?"bg-white text-[#6654b3] border-x border-t border-purple-200 border-b-0 shadow":"text-gray-400 hover:text-[#6654b3]"}`,onClick:()=>n("check"),children:t("checkCourses")}),E.jsx("button",{className:`ml-3 px-5 py-3 font-bold rounded-t-2xl transition ${e==="manage"?"bg-white text-[#6654b3] border-x border-t border-purple-200 border-b-0 shadow":"text-gray-400 hover:text-[#6654b3]"}`,onClick:()=>n("manage"),children:t("manageCourses")})]}),e==="check"?E.jsx(DV,{courseFilters:x,loadingCourses:S,courseId:r,setCourseId:l,day:u,setDay:h,time:y,setTime:b,filteredStudents:A,loadingStudents:N}):E.jsx(kV,{})]})})}function DV({courseFilters:t,courseId:e,setCourseId:n,day:r,setDay:l,time:u,setTime:h,filteredStudents:y,loadingStudents:b}){const{t:x}=Pn(),S=Ni(),A=t==null?void 0:t.find(M=>M.id===e),N=(A==null?void 0:A.weekdays)||[];let I=[];if(A&&r&&A.times&&A.times[r]){const j=(A.times[r]||[]).map(U=>{if(U.includes("-"))return U;const $=Number(U.slice(0,2));return!isNaN($)&&$>=6&&$<23?`${U}-${String($+1).padStart(2,"0")}:00`:U});I=Array.from(new Set(j)).sort()}return E.jsxs("div",{className:"w-full",children:[E.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[E.jsxs("select",{className:"px-4 py-2 rounded-xl border border-purple-200 text-[#6654b3] bg-white",value:e,onChange:M=>{n(M.target.value),l(""),h("")},children:[E.jsx("option",{value:"",children:x("selectCourse")}),t==null?void 0:t.map(M=>E.jsx("option",{value:M.id,children:M.name},M.id))]}),E.jsxs("select",{className:"px-4 py-2 rounded-xl border border-purple-200 text-[#6654b3] bg-white",value:r,onChange:M=>{l(M.target.value),h("")},disabled:!e,children:[E.jsx("option",{value:"",children:x("selectDay")}),N.map(M=>E.jsx("option",{children:M},M))]}),E.jsxs("select",{className:"px-4 py-2 rounded-xl border border-purple-200 text-[#6654b3] bg-white",value:u,onChange:M=>h(M.target.value),disabled:!e||!r,children:[E.jsx("option",{value:"",children:x("selectTime")}),I.map(M=>E.jsx("option",{children:M},M))]})]}),E.jsx("div",{children:e?b?E.jsx("div",{className:"text-center text-gray-400 py-8",children:x("loadingStudents")}):E.jsxs("table",{className:"w-full bg-white border border-purple-200 rounded-2xl",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{className:"py-3 px-2 text-left font-semibold text-[#6654b3]",children:"#"}),E.jsx("th",{className:"py-3 px-2 text-left font-semibold text-[#6654b3]",children:x("nickName")}),E.jsx("th",{className:"py-3 px-2 text-left font-semibold text-[#6654b3]",children:x("fullName")})]})}),E.jsx("tbody",{children:!y||y.length===0?E.jsx("tr",{children:E.jsx("td",{colSpan:3,className:"text-center text-gray-300 py-8",children:x("noStudentsFound")})}):y.map((M,j)=>E.jsxs("tr",{className:"hover:bg-purple-50 transition",children:[E.jsx("td",{className:"py-2 px-2",children:j+1}),E.jsx("td",{className:"py-2 px-2 text-[#6654b3] font-bold",children:M.nick_name||""}),E.jsxs("td",{className:"py-2 px-2 text-blue-700 font-semibold cursor-pointer hover:underline",onClick:()=>S(`/myschool/student/${M.id}`),children:[M.first_name," ",M.last_name]})]},M.id))})]}):E.jsx("div",{className:"text-center text-gray-400 py-8",children:x("Choose a course to see students")})})]})}function kV(){const{t}=Pn(),e=Mc(),{data:n=[],isLoading:r}=RV(),[l,u]=R.useState(null),[h,y]=R.useState(""),b=_b({mutationFn:async P=>{const V={name:P.name,weekdays:P.weekdays,times:P.times,capacity:P.capacity,hour_packages:P.hour_packages};if(P.id){const{error:z}=await Ve.from("courses").update(V).eq("id",P.id);if(z)throw z}else{const{error:z}=await Ve.from("courses").insert([V]);if(z)throw z}},onSuccess:()=>{u(null),e.invalidateQueries({queryKey:["courses_full"]})},onError:P=>y(P.message)}),x=_b({mutationFn:async P=>{if(!window.confirm(t("deleteCourseConfirm")))return;const{error:V}=await Ve.from("courses").delete().eq("id",P);if(V)throw V},onSuccess:()=>{e.invalidateQueries({queryKey:["courses_full"]})},onError:P=>y(P.message)});function S(P){u(P||{name:"",weekdays:[],times:{},capacity:0,hour_packages:[]}),y("")}function A(P){u(V=>{if(!V)return V;const z=V.weekdays.includes(P)?V.weekdays.filter(W=>W!==P):[...V.weekdays,P],Z={...V.times};return z.includes(P)||delete Z[P],{...V,weekdays:z,times:Z}})}function N(P,V){u(z=>z&&{...z,times:{...z.times,[P]:[...z.times[P]||[],V]}})}function I(P,V){u(z=>z&&{...z,times:{...z.times,[P]:z.times[P].filter((Z,W)=>W!==V)}})}function M(){u(P=>P&&{...P,hour_packages:[...P.hour_packages||[],{hours:1,price:0}]})}function j(P,V,z){u(Z=>{if(!Z)return Z;const W=[...Z.hour_packages||[]];return W[P][V]=z,{...Z,hour_packages:W}})}function U(P){u(V=>{if(!V)return V;const z=[...V.hour_packages||[]];return z.splice(P,1),{...V,hour_packages:z}})}function $(){if(!l||!l.name)return y(t("enterCourseName"));b.mutate(l)}function Y(P){x.mutate(P)}return E.jsxs("div",{className:"relative bg-white rounded-3xl p-6",children:[E.jsx("h2",{className:"text-xl font-bold mb-4 text-[#6654b3]",children:t("manageCourses")}),r?E.jsx("p",{children:t("loadingCourses")}):E.jsxs(E.Fragment,{children:[E.jsxs("table",{className:"w-full mb-4 border border-purple-200 rounded-lg",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("course")}),E.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("days")}),E.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("times")}),E.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("capacity")}),E.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("hourPackages")}),E.jsx("th",{className:"px-4 py-2"})]})}),E.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:n.map(P=>E.jsxs("tr",{className:"hover:bg-purple-50 transition",children:[E.jsx("td",{className:"px-4 py-2",children:P.name}),E.jsx("td",{className:"px-4 py-2",children:(P.weekdays||[]).join(", ")}),E.jsx("td",{className:"px-4 py-2",children:Object.entries(P.times||{}).map(([V,z])=>z.length?E.jsxs("div",{children:[V,": ",z.join(", ")]},V):null)}),E.jsx("td",{className:"px-4 py-2",children:P.capacity}),E.jsx("td",{className:"px-4 py-2",children:(P.hour_packages||[]).map((V,z)=>E.jsxs("div",{children:[V.hours," hours - ",V.price.toLocaleString()," THB"]},z))}),E.jsxs("td",{className:"px-4 py-2 space-x-2",children:[E.jsx("button",{onClick:()=>S(P),className:"bg-gray-100 hover:bg-gray-200 text-blue-600 px-3 py-1 rounded-full text-sm",children:t("edit")}),E.jsx("button",{onClick:()=>Y(P.id),className:"bg-gray-100 hover:bg-gray-200 text-red-600 px-3 py-1 rounded-full text-sm",children:t("delete")})]})]},P.id))})]}),E.jsx("button",{onClick:()=>S(null),className:"bg-[#6654b3] hover:bg-purple-700 text-white px-4 py-2 rounded-full",children:t("addCourse")})]}),l&&E.jsxs("div",{className:"absolute inset-0 bg-white bg-opacity-95 rounded-3xl flex flex-col p-0",style:{minHeight:480,maxHeight:"92vh"},children:[E.jsxs("div",{className:"flex-1 flex flex-col px-6 py-6 overflow-y-auto",style:{minHeight:380,maxHeight:560},children:[E.jsx("h3",{className:"text-lg font-bold mb-3 text-[#6654b3]",children:l.id?t("editCourse"):t("newCourse")}),E.jsxs("label",{className:"block mb-2",children:[t("courseName"),E.jsx("input",{className:"border rounded px-2 py-1 ml-2 w-full",value:l.name,onChange:P=>u(V=>V&&{...V,name:P.target.value})})]}),E.jsxs("label",{className:"block mb-2",children:[t("capacity"),E.jsx("input",{type:"number",min:0,className:"border rounded px-2 py-1 ml-2 w-24",value:l.capacity||0,onChange:P=>u(V=>V&&{...V,capacity:Number(P.target.value)})})]}),E.jsxs("div",{className:"mb-2",children:[E.jsxs("span",{className:"font-semibold",children:[t("days"),":"]}),E.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:NV.map(P=>E.jsxs("label",{className:`border rounded-full px-3 py-1 cursor-pointer ${l.weekdays.includes(P)?"bg-[#6654b3] text-white border-[#6654b3]":"border-gray-300"}`,children:[E.jsx("input",{type:"checkbox",className:"hidden",checked:l.weekdays.includes(P),onChange:()=>A(P)}),P]},P))})]}),l.weekdays.map(P=>E.jsxs("div",{className:"mb-2 ml-4",children:[E.jsx("span",{className:"font-semibold",children:t("timesForDay",{day:P})}),E.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[(l.times[P]||[]).map((V,z)=>E.jsxs("span",{className:"inline-flex items-center bg-gray-200 rounded-full px-3 py-1 mr-2",children:[V,E.jsx("button",{onClick:()=>I(P,z),className:"ml-1 text-red-500",children:""})]},z)),E.jsxs("select",{className:"border rounded px-2 py-1 max-h-40 overflow-y-auto",defaultValue:"",onChange:V=>{V.target.value&&(N(P,V.target.value),V.target.value="")},children:[E.jsx("option",{value:"",children:t("addTime")}),SC.filter(V=>!(l.times[P]||[]).includes(V)).map(V=>E.jsx("option",{children:V},V))]})]})]},P)),E.jsxs("div",{className:"mb-2 mt-4",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:t("hourPackages")}),(l.hour_packages||[]).length===0&&E.jsx("div",{className:"text-gray-400 text-sm mt-1",children:t("noPackagesDefined")}),(l.hour_packages||[]).map((P,V)=>E.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[E.jsx("span",{className:"text-sm",children:t("hours")}),E.jsx("input",{type:"number",min:1,className:"border rounded px-2 py-1 w-20",value:P.hours,onChange:z=>j(V,"hours",Number(z.target.value)),placeholder:"Hours"}),E.jsx("span",{className:"text-sm",children:t("price")}),E.jsx("input",{type:"number",min:0,className:"border rounded px-2 py-1 w-24",value:P.price,onChange:z=>j(V,"price",Number(z.target.value)),placeholder:"Price"}),E.jsx("span",{className:"text-xs",children:"THB"}),E.jsx("button",{type:"button",className:"ml-2 text-red-500 font-bold",onClick:()=>U(V),children:""})]},V)),E.jsx("button",{type:"button",className:"mt-2 bg-gray-100 px-2 py-1 rounded",onClick:M,children:t("addPackage")})]}),h&&E.jsx("p",{className:"text-red-600",children:h})]}),E.jsxs("div",{className:"flex gap-2 px-6 py-4 border-t bg-white rounded-b-3xl",children:[E.jsx("button",{onClick:$,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-full",disabled:b.status==="pending",children:t("save")}),E.jsx("button",{onClick:()=>u(null),className:"bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-full",children:t("cancel")})]})]})]})}function LV(t,e,n=new Date){if(!t||!t.courses||!t.course_limits)return"inactive";let r=!1,l=null;const u={};for(const h of e)u[h.course_id]||(u[h.course_id]=[]),u[h.course_id].push(h);for(const h of Object.keys(t.courses)){const y=(u[h]||[]).length;if((t.course_limits[h]||0)>y){r=!0;break}else{const x=(u[h]||[]).sort((S,A)=>A.attended_at_ts.localeCompare(S.attended_at_ts))[0];x&&(!l||x.attended_at_ts>l)&&(l=x.attended_at_ts)}}if(r)return"active";if(l){const h=new Date(l);if((n.getTime()-h.getTime())/(1e3*60*60*24)>30)return"inactive"}return"needs_renewal"}const ai="#6654b3",jV="#f6f6f6";function PV(){return Ve.from("students").select("id,first_name,last_name,nick_name,parent_phone,parent_line_id,joined_at,courses,course_limits").order("joined_at",{ascending:!1})}function BV(){return Ve.from("attendance").select("student_id,course_id,attended_at_ts,approved_by")}function UV(){const{t}=Pn(),e=Ni(),[n,r]=R.useState(""),[l,u]=R.useState(new Set),[h,y]=R.useState(!1),{data:b,isLoading:x,error:S}=cs({queryKey:["students","withCourses"],queryFn:PV,staleTime:1e3*60*10,refetchOnWindowFocus:!1}),{data:A,isLoading:N,error:I}=cs({queryKey:["attendance","all"],queryFn:BV,staleTime:1e3*60*10,refetchOnWindowFocus:!1}),M=b&&"data"in b&&Array.isArray(b.data)?b.data:[],j=A&&"data"in A&&Array.isArray(A.data)?A.data:[],U=R.useMemo(()=>{const z={};return j.forEach(Z=>{z[Z.student_id]||(z[Z.student_id]=[]),z[Z.student_id].push(Z)}),z},[j]),$=R.useMemo(()=>M.map(z=>({...z,status:LV(z,U[z.id]||[])})),[M,U]),Y=R.useMemo(()=>{const z=n.trim().toLowerCase(),Z=$.filter(W=>W.status==="active");return z?Z.filter(W=>(W.nick_name||"").toLowerCase().includes(z)||W.first_name.toLowerCase().includes(z)||W.last_name.toLowerCase().includes(z)||W.parent_phone.includes(z)||(W.parent_line_id||"").toLowerCase().includes(z)):Z},[$,n]),P=x||N,V=S||I;return E.jsxs("div",{className:"min-h-screen flex flex-col items-center py-8 px-2 sm:px-6 font-sans",style:{background:jV},children:[E.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-3 pb-4",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("h1",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight",style:{color:ai},children:t("students")}),E.jsx("span",{className:"ml-2 px-3 py-1 rounded-full text-lg font-semibold",style:{background:"#ebe7f7",color:ai,border:"1px solid #e1def5"},children:Y.length})]}),E.jsxs("div",{className:"flex gap-2 mt-3 sm:mt-0",children:[E.jsx("input",{type:"text",placeholder:t("searchStudents"),value:n,onChange:z=>r(z.target.value),className:"rounded-2xl border border-[#e1def5] px-4 py-2 bg-white shadow focus:outline-none focus:ring-2 focus:ring-[#6654b3] transition w-56",style:{color:ai}}),E.jsxs("button",{onClick:()=>e("/students/add-existing"),className:"flex items-center gap-1 font-semibold px-4 py-2 rounded-2xl transition active:scale-95",style:{background:ai,color:"#fff",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.06)"},children:[E.jsx(mS,{className:"w-5 h-5"})," ",t("addStudent")]}),E.jsxs("button",{onClick:()=>y(!0),disabled:!l.size,className:"flex items-center gap-1 font-semibold px-4 py-2 rounded-2xl transition active:scale-95 disabled:opacity-60",style:{background:"#ec4899",color:"#fff",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.02)"},children:[E.jsx(_h,{className:"w-5 h-5"})," ",t("export")]})]})]}),E.jsx("div",{className:"w-full max-w-6xl mx-auto overflow-x-auto",children:P?E.jsx("div",{className:"text-center text-[#a7a3c0] py-10",children:t("loading")}):V?E.jsx("div",{className:"text-red-500 py-10 text-center",children:V.message||V.toString()}):E.jsxs("table",{className:"w-full min-w-[650px] rounded-2xl",style:{background:"#fff",borderCollapse:"separate",borderSpacing:0,boxShadow:"0 2px 18px 0 rgba(102,84,179,0.05)",border:"1.5px solid #e1def5"},children:[E.jsx("thead",{style:{background:"#f6f6f6"},children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-2 py-3 rounded-l-2xl",children:E.jsx("input",{type:"checkbox",className:"accent-[#6654b3]",checked:Y.length>0&&Y.every(z=>l.has(z.id)),onChange:z=>{const Z=new Set(l);z.target.checked?Y.forEach(W=>Z.add(W.id)):Y.forEach(W=>Z.delete(W.id)),u(Z)}})}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:ai},children:"#"}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:ai},children:t("nickName")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:ai},children:t("firstName")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:ai},children:t("lastName")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:ai},children:t("parentPhone")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:ai},children:t("lineID")})]})}),E.jsx("tbody",{children:Y.length===0?E.jsx("tr",{children:E.jsx("td",{colSpan:7,className:"text-center text-[#b0b0b0] py-8",children:t("noStudentsFound")})}):Y.map((z,Z)=>E.jsxs("tr",{className:"transition",style:{animation:"fadein 0.3s",background:l.has(z.id)?"#f6e6fa":"inherit"},children:[E.jsx("td",{className:"px-2 py-2 text-center align-middle",children:E.jsx("input",{type:"checkbox",className:"accent-[#6654b3]",checked:l.has(z.id),onChange:W=>{const ae=new Set(l);W.target.checked?ae.add(z.id):ae.delete(z.id),u(ae)}})}),E.jsx("td",{className:"px-2 py-2 align-middle",children:Z+1}),E.jsx("td",{className:"px-2 py-2 align-middle font-semibold",style:{color:ai},children:z.nick_name||E.jsx("span",{className:"text-[#d3d3e0]",children:""})}),E.jsx("td",{className:"px-2 py-2 align-middle font-semibold cursor-pointer hover:underline",style:{color:"#3a38a0"},onClick:()=>e(`/myschool/student/${z.id}`),children:z.first_name}),E.jsx("td",{className:"px-2 py-2 align-middle",children:z.last_name}),E.jsx("td",{className:"px-2 py-2 align-middle font-mono",children:z.parent_phone}),E.jsx("td",{className:"px-2 py-2 align-middle",children:E.jsx("span",{className:"rounded-xl px-2 py-1 text-xs font-semibold",style:{background:"#ebe7f7",color:ai,border:"1px solid #e1def5"},children:z.parent_line_id||""})})]},z.id))})]})}),h&&E.jsx("div",{className:"fixed z-50 inset-0 bg-black/40 flex items-center justify-center",children:E.jsxs("div",{className:"rounded-2xl shadow-lg p-6 max-w-md w-full relative",style:{background:"#fff"},children:[E.jsx("button",{className:"absolute right-4 top-4 text-[#c2bce5] hover:text-[#ec4899]",onClick:()=>y(!1),children:E.jsx(io,{className:"w-6 h-6"})}),E.jsx("h2",{className:"text-lg font-bold mb-3",style:{color:"#ec4899"},children:t("exportStudents",{count:l.size})}),E.jsxs("div",{className:"flex gap-2 justify-between",children:[E.jsxs("button",{onClick:()=>{const z=Y.filter(ve=>l.has(ve.id)),Z=[t("no"),t("nickName"),t("firstName"),t("lastName"),t("parentPhone"),t("lineID")],W=z.map((ve,ce)=>[ce+1,`"${ve.nick_name||""}"`,`"${ve.first_name}"`,`"${ve.last_name}"`,`"${ve.parent_phone}"`,`"${ve.parent_line_id||""}"`]),ae=[Z,...W].map(ve=>ve.join(",")).join(`
`),X=new Blob([ae],{type:"text/csv"}),be=URL.createObjectURL(X),Ae=document.createElement("a");Ae.href=be,Ae.download=`students_export_${Date.now()}.csv`,Ae.click(),URL.revokeObjectURL(be),y(!1)},className:"rounded-xl px-4 py-2 font-semibold flex items-center gap-1",style:{background:"#34d399",color:"#fff"},children:[E.jsx(_h,{className:"w-5 h-5"})," ",t("exportCSV")]}),E.jsxs("button",{onClick:()=>{window.print(),y(!1)},className:"rounded-xl px-4 py-2 font-semibold flex items-center gap-1",style:{background:ai,color:"#fff"},children:[E.jsx(Jm,{className:"w-5 h-5"})," ",t("print")]})]})]})}),E.jsx("style",{children:`
        @keyframes fadein { from { opacity:0; transform: scale(0.98);} to { opacity:1; transform: scale(1);} }
      `})]})}const kv=["bg-pink-50","bg-blue-50","bg-yellow-50","bg-purple-50","bg-green-50","bg-indigo-50"];function FV(t){return kv[t%kv.length]}async function VV(){const{data:{user:t}}=await Ve.auth.getUser();if(!t)return{id:null,role:null};const{data:e}=await Ve.from("profiles").select("role").eq("id",t.id).single();return{id:t.id,role:(e==null?void 0:e.role)||null}}function HV(t){return cs({queryKey:["student",t],queryFn:async()=>{const{data:e}=await Ve.from("students").select("*").eq("id",t).single();return e},enabled:!!t,staleTime:3e5})}function zV(){return cs({queryKey:["courses"],queryFn:async()=>{const{data:t}=await Ve.from("courses").select("*").order("name");return t??[]},staleTime:3e5})}function $V(t){return cs({queryKey:["attendance",t],queryFn:async()=>{const{data:e}=await Ve.from("attendance").select("*").eq("student_id",t);return e||[]},enabled:!!t,staleTime:12e4})}function GV(t){return cs({queryKey:["appchanges",t],queryFn:async()=>{const{data:e}=await Ve.from("application_changes").select("*").eq("student_id",t);return e||[]},enabled:!!t,staleTime:12e4})}function qV(){return cs({queryKey:["profile"],queryFn:VV,staleTime:12e4})}function YV({msg:t,onClear:e}){return ct.useEffect(()=>{if(!t)return;const n=setTimeout(e,3500);return()=>clearTimeout(n)},[t,e]),t?E.jsx("div",{className:"fixed left-1/2 -translate-x-1/2 bottom-8 z-50 bg-[#6654b3] text-white rounded-2xl px-8 py-3 shadow-xl text-lg font-semibold fade-in",children:t}):null}function XV(){var st,Ge,vt,He,ui,Yi,Ls,ia,Bn;const{t,i18n:e}=Pn(),{id:n}=GO(),r=Ni(),l=Mc(),{data:u}=qV(),{data:h,isLoading:y}=HV(n),{data:b}=zV(),{data:x}=$V(n),{data:S}=GV(n),[A,N]=R.useState(!1),[I,M]=R.useState(null),[j,U]=R.useState(null),[$,Y]=R.useState(null),[P,V]=R.useState(null),[z,Z]=R.useState(null),[W,ae]=R.useState(!1),[X,be]=R.useState(null),[Ae,ve]=R.useState(null),[ce,Fe]=R.useState(null),[se,re]=R.useState(!1),[le,De]=R.useState(null),[$e,H]=R.useState(null),[te,ge]=R.useState(""),pe=R.useMemo(()=>Object.fromEntries((b||[]).map(Ue=>[Ue.id,Ue])),[b]);function Be(){return h!=null&&h.courses?Object.keys(h.courses).map((Ue,at)=>{var Ut,cn,Ft;const tt=pe[Ue];return{cid:Ue,idx:at,course:tt,days:h.courses[Ue],hours:((Ut=h.course_limits)==null?void 0:Ut[Ue])||0,cancelled_at:((cn=h.cancelled_at)==null?void 0:cn[Ue])||null,cancelled_by:((Ft=h.cancelled_by)==null?void 0:Ft[Ue])||null}}):[]}function ze(Ue){var cn;const at=Array.isArray(h==null?void 0:h.payment_receipt_urls)?h.payment_receipt_urls:[],tt=((cn=h==null?void 0:h.receipts)==null?void 0:cn[Ue])||[],Ut=(S||[]).filter(Ft=>{var St,je,kt,Nt,Pt,js,ms;return(((je=(St=Ft.changes)==null?void 0:St.course_limits)==null?void 0:je[Ue])||((Nt=(kt=Ft.changes)==null?void 0:kt.course_changes)==null?void 0:Nt[Ue]))&&(((js=(Pt=Ft.changes)==null?void 0:Pt.receipts)==null?void 0:js.length)||((ms=Ft.receipt_urls)==null?void 0:ms.length))}).flatMap(Ft=>{var St,je,kt;return(je=(St=Ft.changes)==null?void 0:St.receipts)!=null&&je.length?Ft.changes.receipts:(kt=Ft.receipt_urls)!=null&&kt.length?Ft.receipt_urls:[]});return[...at,...tt,...Ut]}function Ee(Ue){return(x||[]).filter(at=>at.course_id===Ue)}function At(Ue){var Ut;const at=Ee(Ue).length,tt=((Ut=h==null?void 0:h.course_limits)==null?void 0:Ut[Ue])||0;return{used:at,purchased:tt,left:Math.max(0,tt-at),status:tt-at>0?t("ongoing"):t("renewalNeeded")}}async function Ze(Ue){if(!h||!u||!u.id){ge(e.language.startsWith("th")?" ":"Unable to cancel course. Profile missing.");return}await Ve.from("application_changes").insert([{student_id:h.id,type:"cancel",status:"pending",changes:{cancel_course:Ue}}]),ge(e.language.startsWith("th")?" ":"Course cancellation request submitted for review."),l.invalidateQueries({queryKey:["appchanges",n]})}const pt=I&&((st=pe[I])==null?void 0:st.hour_packages)||[],wn=P!==null?pt[P]:void 0,Re=wn?wn.price:0;async function ie(){if(!I||!j||!$||P==null||!z){ge(e.language.startsWith("th")?"":"Please upload payment receipt");return}if(!h){ge(e.language.startsWith("th")?"":"Student not loaded");return}const Ue=z,at=`${Date.now()}-${Ue.name}`,{data:tt,error:Ut}=await Ve.storage.from("receipts").upload(at,Ue);if(Ut){ge(Ut.message);return}const{data:cn}=Ve.storage.from("receipts").getPublicUrl(tt.path),Ft=wn,St=[{course_id:I,course_name:pe[I].name,hours:Ft.hours,price:Ft.price,day:j,time:$}];await Ve.from("application_changes").insert([{student_id:h.id,type:"edit",status:"pending",changes:{course_changes:{[I]:{[j]:[$]}},course_limits:{[I]:Ft.hours},purchased_packages:St,total_price:Ft.price,receipts:[cn.publicUrl]}}]),N(!1),M(null),U(null),Y(null),V(null),Z(null),ae(!1),ge(e.language.startsWith("th")?" ":"Add course request submitted for review."),l.invalidateQueries({queryKey:["appchanges",n]})}const Se=X&&((Ge=pe[X])==null?void 0:Ge.hour_packages)||[],Ie=Ae!==null?Se[Ae]:void 0,Oe=Ie?Ie.price:0;async function Le(){if(!X||Ae==null||!ce){ge(e.language.startsWith("th")?"":"Please upload payment receipt");return}if(!h){ge(e.language.startsWith("th")?"":"Student not loaded");return}const Ue=ce,at=`${Date.now()}-${Ue.name}`,{data:tt,error:Ut}=await Ve.storage.from("receipts").upload(at,Ue);if(Ut){ge(Ut.message);return}const{data:cn}=Ve.storage.from("receipts").getPublicUrl(tt.path),Ft=Ie,St=[{course_id:X,course_name:pe[X].name,hours:Ft.hours,price:Ft.price}];await Ve.from("application_changes").insert([{student_id:h.id,type:"renewal",status:"pending",changes:{course_limits:{[X]:Ft.hours},purchased_packages:St,total_price:Ft.price,receipts:[cn.publicUrl]}}]),be(null),ve(null),Fe(null),re(!1),ge(e.language.startsWith("th")?"":"Renewal request submitted."),l.invalidateQueries({queryKey:["appchanges",n]})}function We({urls:Ue,title:at}){return E.jsx(Ci,{open:!!Ue,onClose:()=>De(null),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:E.jsxs(Ci.Panel,{className:"bg-white rounded-2xl p-6 max-w-lg w-full shadow-2xl relative",children:[E.jsx("button",{type:"button",onClick:()=>De(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:E.jsx(io,{className:"w-6 h-6"})}),E.jsxs("h2",{className:"text-lg font-bold mb-2",children:[at," ",t("receipt")]}),E.jsx("div",{className:"space-y-3",children:Ue.map(tt=>E.jsxs("div",{className:"rounded-lg border bg-gray-50 px-3 py-2 flex items-center gap-3",children:[E.jsx("span",{className:"flex-1 truncate",children:tt.split("/").slice(-1)[0]}),E.jsx("button",{type:"button",className:"text-blue-600 hover:underline text-sm",onClick:()=>window.open(tt,"_blank"),children:t("open")}),E.jsx("button",{type:"button",className:"text-green-600 hover:underline text-sm",onClick:async()=>{const cn=await(await fetch(tt)).blob(),Ft=document.createElement("a");Ft.href=URL.createObjectURL(cn),Ft.download=tt.split("/").slice(-1)[0],Ft.click()},children:t("download")}),E.jsx("button",{type:"button",className:"text-pink-600 hover:underline text-sm",onClick:()=>{const Ut=document.createElement("iframe");Ut.style.position="fixed",Ut.style.right="0",Ut.style.top="0",Ut.style.width="0",Ut.style.height="0",Ut.src=tt,document.body.appendChild(Ut),Ut.onload=()=>{var cn;(cn=Ut.contentWindow)==null||cn.print(),setTimeout(()=>document.body.removeChild(Ut),1e3)}},children:t("print")})]},tt))})]})})}return y||!u||!b||!x||!S?E.jsxs("div",{className:"min-h-[300px] flex items-center justify-center",children:[E.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full bg-pink-300 mr-2"}),E.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full bg-blue-200 mr-2"}),E.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full bg-yellow-200"})]}):h?E.jsx("div",{className:"p-0 min-h-screen",style:{background:"#f6f6f6"},children:E.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-2 sm:px-10 space-y-8",children:[E.jsx(YV,{msg:te,onClear:()=>ge("")}),E.jsx("div",{className:"flex justify-end w-full",children:(u==null?void 0:u.role)==="admin"&&E.jsxs("button",{type:"button",onClick:async()=>{window.confirm(t("deleteStudentConfirm"))&&(await Ve.from("students").delete().eq("id",h.id),r("/myschool/students"))},className:"rounded-full px-3 py-2 bg-red-50 border border-red-200 text-red-600 hover:bg-red-100 flex items-center gap-1",children:[E.jsx(lm,{className:"w-5 h-5"})," ",t("deleteStudent")]})}),E.jsxs("div",{className:"bg-white rounded-2xl px-6 py-4 flex flex-col gap-2 border border-[#ece6fc]",children:[E.jsxs("div",{className:"font-bold text-2xl text-[#6654b3] mb-1",children:[h.first_name," ",h.last_name]}),E.jsxs("div",{className:"flex flex-wrap gap-x-8 gap-y-1 text-gray-700 text-sm",children:[E.jsxs("div",{children:[E.jsxs("span",{className:"font-semibold text-gray-900",children:[t("dob"),":"]})," ",h.dob?new Date(h.dob).toLocaleDateString("en-GB"):""]}),E.jsxs("div",{children:[E.jsxs("span",{className:"font-semibold text-gray-900",children:[t("phone"),":"]})," ",h.parent_phone]}),E.jsxs("div",{children:[E.jsxs("span",{className:"font-semibold text-gray-900",children:[t("lineId"),":"]})," ",h.parent_line_id]}),E.jsxs("div",{children:[E.jsxs("span",{className:"font-semibold text-gray-900",children:[t("joined"),":"]})," ",h.joined_at?new Date(h.joined_at).toLocaleDateString("en-GB"):""]})]})]}),Array.isArray(h==null?void 0:h.purchased_packages)&&h.purchased_packages.length>0&&E.jsxs("div",{className:"mb-2",children:[E.jsx("div",{className:"font-bold text-[#6654b3] mb-1",children:t("purchasedPackages")}),E.jsx("ul",{children:h.purchased_packages.map(Ue=>E.jsxs("li",{children:[Ue.course_name,": ",Ue.hours," ",t("hoursLabel",{count:Ue.hours}),"  ",Ue.price.toLocaleString()," ",t("baht")]},Ue.course_id+Ue.hours))}),E.jsxs("div",{className:"mt-1 font-semibold",children:[t("totalPrice"),": ",(vt=h.total_price)==null?void 0:vt.toLocaleString()," ",t("baht")]})]}),E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsx("div",{className:"text-lg font-semibold text-[#6654b3]",children:t("enrolledCourses")}),E.jsxs("button",{type:"button",onClick:()=>N(!0),className:"rounded-full bg-[#ece6fc] text-[#6654b3] border border-[#6654b3] px-3 py-2 hover:bg-[#e4d8fd] flex items-center gap-1 transition",children:[E.jsx(mS,{className:"w-5 h-5"})," ",t("addCourse")]})]}),E.jsx("div",{className:"rounded-3xl overflow-x-auto border border-[#ece6fc] bg-white",children:E.jsxs("table",{className:"w-full min-w-[700px] text-sm",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"bg-white",children:[E.jsx("th",{className:"px-4 py-3 text-left font-semibold text-[#6654b3] rounded-tl-3xl",children:"#"}),E.jsx("th",{className:"px-4 py-3 text-left font-semibold text-[#6654b3]",children:t("course")}),E.jsx("th",{className:"px-4 py-3 text-left font-semibold text-[#6654b3]",children:t("daysTimes")}),E.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("hoursLeft")}),E.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("status")}),E.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("receipt")}),E.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("actions")}),E.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3] rounded-tr-3xl",children:t("attendance")})]})}),E.jsx("tbody",{children:Be().map(({cid:Ue,idx:at,course:tt,days:Ut,cancelled_at:cn})=>{const Ft=FV(at),St=ze(Ue),je=Ee(Ue),{purchased:kt,left:Nt,status:Pt}=At(Ue),js=!!cn;return E.jsxs(ct.Fragment,{children:[E.jsxs("tr",{className:Vu(Ft,"transition",js?"bg-red-100/70 text-red-600 opacity-80":"hover:bg-[#ece6fc]/70"),children:[E.jsx("td",{className:"px-4 py-3 text-center",children:at+1}),E.jsx("td",{className:"px-4 py-3",children:(tt==null?void 0:tt.name)||Ue}),E.jsx("td",{className:"px-4 py-3",children:Object.entries(Ut).map(([ms,ra])=>E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"font-bold",children:ms}),Array.isArray(ra)&&ra.map(Tt=>E.jsx("span",{className:"inline-flex items-center ml-2",children:Tt},Tt))]},ms))}),E.jsxs("td",{className:"px-4 py-3 text-center font-mono font-semibold",children:[Nt," / ",kt]}),E.jsx("td",{className:"px-4 py-3 text-center",children:Pt===t("ongoing")?E.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-50 text-green-600 text-xs font-semibold",children:[E.jsx(pk,{className:"w-4 h-4"})," ",t("ongoing")]}):E.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-50 text-yellow-600 text-xs font-semibold",children:[E.jsx(Ck,{className:"w-4 h-4"})," ",t("renewalNeeded")]})}),E.jsx("td",{className:"px-4 py-3 text-center",children:St.length>0?E.jsx("button",{type:"button",className:"rounded-full px-2 py-1 bg-[#f6d6ec] text-[#b03580] hover:bg-pink-200 text-xs",onClick:()=>De({urls:St,title:tt==null?void 0:tt.name}),children:t("viewReceipts",{count:St.length})}):E.jsx("span",{className:"text-gray-300 text-xs",children:""})}),E.jsx("td",{className:"px-4 py-3 text-center",children:E.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[E.jsx("button",{type:"button",className:Vu("rounded-full px-2 py-1 text-xs","bg-[#ece6fc] text-[#6654b3] hover:bg-purple-100",Pt!==t("renewalNeeded")&&"opacity-50 pointer-events-none"),onClick:()=>be(Ue),children:t("renew")}),!js&&E.jsx("button",{type:"button",className:"rounded-full px-2 py-1 bg-red-50 text-red-700 hover:bg-red-100 text-xs",onClick:()=>Ze(Ue),children:t("cancel")}),js&&E.jsxs("span",{className:"block text-xs mt-1 text-red-400",children:[t("cancelled"),E.jsx("br",{}),cn?new Date(cn).toLocaleDateString("en-GB"):""]})]})}),E.jsx("td",{className:"px-4 py-3 text-center",children:E.jsx("button",{type:"button",className:"rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 text-xs px-2 py-1 flex items-center gap-1",onClick:()=>H($e===Ue?null:Ue),children:$e===Ue?E.jsxs(E.Fragment,{children:[E.jsx(hS,{className:"w-4 h-4"})," ",t("hide")]}):E.jsxs(E.Fragment,{children:[E.jsx(gS,{className:"w-4 h-4"})," ",t("view")]})})})]}),$e===Ue&&E.jsx("tr",{children:E.jsx("td",{colSpan:8,className:"bg-white/90",children:E.jsxs("div",{className:"px-4 py-2 text-sm",children:[E.jsx("div",{className:"font-bold text-gray-700 mb-1",children:t("attendanceHistory")}),E.jsxs("div",{className:"flex flex-col gap-1",children:[je.map(ms=>E.jsxs("div",{className:"flex items-center justify-between border-b last:border-0 border-dashed border-gray-200 py-1 px-2",children:[E.jsx("span",{children:new Date(ms.attended_at_ts).toLocaleString("en-GB",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),E.jsx("button",{type:"button",className:"rounded-full px-2 py-0.5 bg-gray-100 text-gray-600 text-xs hover:bg-blue-50",onClick:()=>navigator.clipboard.writeText(ms.attended_at_ts),children:t("copy")})]},ms.id)),je.length===0&&E.jsx("div",{className:"text-gray-400",children:t("noRecords")})]})]})})})]},Ue)})})]})})]}),E.jsx(Ci,{open:A,onClose:()=>N(!1),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:E.jsxs(Ci.Panel,{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[E.jsx("button",{type:"button",onClick:()=>N(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:E.jsx(io,{className:"w-6 h-6"})}),E.jsx("h2",{className:"font-bold text-lg mb-3",children:t("addNewCourse")}),E.jsxs("div",{className:"space-y-2",children:[E.jsxs("label",{className:"block",children:[E.jsx("span",{className:"font-semibold",children:t("course")}),E.jsxs("select",{className:"w-full rounded border px-2 py-1",value:I||"",onChange:Ue=>{M(Ue.target.value),U(null),Y(null),V(null),ae(!1)},children:[E.jsx("option",{value:"",children:t("select")}),b.filter(Ue=>!(h.courses||{})[Ue.id]).map(Ue=>E.jsx("option",{value:Ue.id,children:Ue.name},Ue.id))]})]}),I&&E.jsxs("label",{className:"block",children:[E.jsx("span",{className:"font-semibold",children:t("day")}),E.jsxs("select",{className:"w-full rounded border px-2 py-1",value:j||"",onChange:Ue=>{U(Ue.target.value),Y(null)},children:[E.jsx("option",{value:"",children:t("select")}),(((He=pe[I])==null?void 0:He.weekdays)||[]).map(Ue=>E.jsx("option",{children:Ue},Ue))]})]}),j&&I&&E.jsxs("label",{className:"block",children:[E.jsx("span",{className:"font-semibold",children:t("timeSlot")}),E.jsxs("select",{className:"w-full rounded border px-2 py-1",value:$||"",onChange:Ue=>Y(Ue.target.value),children:[E.jsx("option",{value:"",children:t("select")}),(((Yi=(ui=pe[I])==null?void 0:ui.times)==null?void 0:Yi[j])||[]).map(Ue=>E.jsx("option",{children:Ue},Ue))]})]}),I&&E.jsxs("label",{className:"block",children:[E.jsx("span",{className:"font-semibold",children:t("chooseHourPackage")}),E.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:pt.map((Ue,at)=>E.jsxs("label",{className:Vu("cursor-pointer border rounded-full px-4 py-2 text-sm font-semibold transition",P===at?"bg-[#6654b3] text-white border-[#6654b3]":"bg-white border-gray-300 text-[#6654b3] hover:bg-purple-50"),children:[E.jsx("input",{type:"radio",name:"add-package",className:"hidden",checked:P===at,onChange:()=>{V(at),ae(!1)}}),t("hoursLabel",{count:Ue.hours}),"  ",Ue.price.toLocaleString()," ",t("baht")]},at))}),P!=null&&E.jsxs(E.Fragment,{children:[E.jsx("button",{type:"button",onClick:()=>ae(!W),className:"mt-2 text-sm text-[#6654b3] underline",children:t(W?"hideDetail":"showDetail")}),W&&E.jsxs("div",{className:"border rounded-xl bg-purple-50 px-4 py-2 mt-2 text-sm",children:[E.jsx("div",{className:"font-semibold mb-1",children:(Ls=pe[I])==null?void 0:Ls.name}),E.jsxs("div",{children:[t("hoursLabel",{count:pt[P].hours}),"  ",pt[P].price.toLocaleString()," ",t("baht")]}),E.jsxs("div",{children:[t("day"),": ",j]}),E.jsxs("div",{children:[t("timeSlot"),": ",$]})]})]})]}),E.jsxs("label",{className:"block",children:[E.jsx("span",{className:"font-semibold",children:t("uploadReceipt")}),E.jsx("input",{type:"file",className:"block",accept:"image/*,application/pdf",onChange:Ue=>{var at;return Z(((at=Ue.target.files)==null?void 0:at[0])??null)}}),z&&E.jsx("span",{className:"text-xs text-gray-500",children:z.name})]}),P!=null&&E.jsxs("div",{className:"text-right font-bold text-lg text-[#6654b3] mt-2",children:[t("totalPrice"),": ",Re.toLocaleString()," ",t("baht")]})]}),E.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[E.jsx("button",{type:"button",onClick:()=>N(!1),className:"rounded-full px-4 py-2 border hover:bg-gray-100",children:t("cancel")}),E.jsxs("button",{type:"button",onClick:ie,className:"rounded-full px-4 py-2 bg-green-500 text-white hover:bg-green-600 flex items-center gap-1",children:[E.jsx(om,{className:"w-5 h-5"})," ",t("submit")]})]})]})}),E.jsx(Ci,{open:!!X,onClose:()=>be(null),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:E.jsxs(Ci.Panel,{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[E.jsx("button",{type:"button",onClick:()=>be(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:E.jsx(io,{className:"w-6 h-6"})}),E.jsx("h2",{className:"font-bold text-lg mb-3",children:t("submitRenew",{course:((ia=pe[X||""])==null?void 0:ia.name)||""})}),X&&E.jsxs("label",{className:"block",children:[E.jsx("span",{className:"font-semibold",children:t("chooseHourPackage")}),E.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:Se.map((Ue,at)=>E.jsxs("label",{className:Vu("cursor-pointer border rounded-full px-4 py-2 text-sm font-semibold transition",Ae===at?"bg-[#6654b3] text-white border-[#6654b3]":"bg-white border-gray-300 text-[#6654b3] hover:bg-purple-50"),children:[E.jsx("input",{type:"radio",name:"renew-package",className:"hidden",checked:Ae===at,onChange:()=>{ve(at),re(!1)}}),t("hoursLabel",{count:Ue.hours}),"  ",Ue.price.toLocaleString()," ",t("baht")]},at))}),Ae!=null&&E.jsxs(E.Fragment,{children:[E.jsx("button",{type:"button",onClick:()=>re(!se),className:"mt-2 text-sm text-[#6654b3] underline",children:t(se?"hideDetail":"showDetail")}),se&&E.jsxs("div",{className:"border rounded-xl bg-purple-50 px-4 py-2 mt-2 text-sm",children:[E.jsx("div",{className:"font-semibold mb-1",children:(Bn=pe[X])==null?void 0:Bn.name}),E.jsxs("div",{children:[t("hoursLabel",{count:Se[Ae].hours}),"  ",Se[Ae].price.toLocaleString()," ",t("baht")]})]})]})]}),E.jsxs("label",{className:"block mb-3",children:[E.jsx("span",{className:"font-semibold",children:t("uploadReceipt")}),E.jsx("input",{type:"file",className:"block",accept:"image/*,application/pdf",onChange:Ue=>{var at;return Fe(((at=Ue.target.files)==null?void 0:at[0])??null)}}),ce&&E.jsx("span",{className:"text-xs text-gray-500",children:ce.name})]}),Ae!=null&&E.jsxs("div",{className:"text-right font-bold text-lg text-[#6654b3] mt-2",children:[t("totalPrice"),": ",Oe.toLocaleString()," ",t("baht")]}),E.jsxs("div",{className:"flex justify-end gap-3 mt-2",children:[E.jsx("button",{type:"button",onClick:()=>be(null),className:"rounded-full px-4 py-2 border hover:bg-gray-100",children:t("cancel")}),E.jsxs("button",{type:"button",onClick:Le,className:"rounded-full px-4 py-2 bg-[#6654b3] text-white hover:bg-purple-700 flex items-center gap-1",children:[E.jsx(om,{className:"w-5 h-5"})," ",t("submit")]})]})]})}),le&&E.jsx(We,{urls:le.urls,title:le.title})]})}):E.jsx("div",{className:"p-8 text-pink-500",children:t("studentNotFound")})}const Es="#6654b3",WV="#f6f6f6";function KV(t){const e=["#f6e6fa","#e5f6fb","#faf6e6","#f1e6fa","#e6faea","#e6ebfa"];return e[t%e.length]}async function ZV(){const{data:t}=await Ve.from("students").select("id,first_name,last_name,nick_name,courses,course_limits,cancelled_at,parent_phone,parent_line_id,joined_at"),{data:e}=await Ve.from("attendance").select("student_id,course_id,approved_by"),{data:n}=await Ve.from("courses").select("id,name,hour_packages");if(!t||!e||!n)return[];let r=[];return t.forEach(l=>{var u;if(!(!l.courses||!l.course_limits))for(const h of Object.keys(l.courses)){const y=((u=l.course_limits)==null?void 0:u[h])||0,b=e.filter(A=>A.student_id===l.id&&A.course_id===h&&A.approved_by),x=b.length,S=!!(l.cancelled_at&&l.cancelled_at[h]);y>0&&x>=y&&!S&&r.push({stu:l,cid:h,used:x,purchased:y,attendance:b,course:n.find(A=>A.id===h)||{name:h}})}}),r}function QV(){const{t}=Pn(),e=Ni(),n=Mc(),[r,l]=R.useState(""),[u,h]=R.useState(new Set),[y,b]=R.useState(!1),[x,S]=R.useState(null),[A,N]=R.useState(1),[I,M]=R.useState(null),[j,U]=R.useState(null),{data:$=[],isLoading:Y,error:P}=cs({queryKey:["students","inactive","rows"],queryFn:ZV,staleTime:12e4}),V=R.useMemo(()=>{const X=r.trim().toLowerCase();return X?$.filter(({stu:be,course:Ae})=>[be.nick_name||"",be.first_name,be.last_name,be.parent_phone,be.parent_line_id||"",(Ae==null?void 0:Ae.name)||""].map(ve=>(""+ve).toLowerCase()).some(ve=>ve.includes(X))):$},[$,r]);function z(X){return`${X.stu.id}-${X.cid}`}function Z(){const X=V.filter(re=>u.has(z(re))),be=[t("no"),t("nickName"),t("firstName"),t("lastName"),t("parentPhone"),t("lineID"),t("course"),E.jsxs("th",{children:[t("used"),"/",t("purchased")]}),t("status")],Ae=X.map((re,le)=>{var De;return[le+1,`"${re.stu.nick_name||""}"`,`"${re.stu.first_name}"`,`"${re.stu.last_name}"`,`"${re.stu.parent_phone}"`,`"${re.stu.parent_line_id||""}"`,`"${((De=re.course)==null?void 0:De.name)||re.cid}"`,`"${re.used}/${re.purchased}"`,t("renewalNeeded")]}),ve=[be,...Ae].map(re=>re.join(",")).join(`
`),ce=new Blob([ve],{type:"text/csv"}),Fe=URL.createObjectURL(ce),se=document.createElement("a");se.href=Fe,se.download=`students_renewal_export_${Date.now()}.csv`,se.click(),URL.revokeObjectURL(Fe),b(!1)}async function W(){if(!(x!=null&&x.stu)||!x.cid||!I||A<1)return;const X=I,be=`${Date.now()}-${X.name}`,{data:Ae,error:ve}=await Ve.storage.from("receipts").upload(be,X);if(ve){alert(ve.message);return}const{data:ce}=Ve.storage.from("receipts").getPublicUrl(Ae.path);await Ve.from("application_changes").insert([{student_id:x.stu.id,type:"renewal",status:"pending",changes:{course_limits:{[x.cid]:A},receipts:[ce.publicUrl]}}]),S(null),N(1),M(null),alert(t("submitRenewal")),n.invalidateQueries({queryKey:["students","inactive","rows"]})}async function ae(X,be){const{data:Ae}=await Ve.auth.getUser();if(!(Ae!=null&&Ae.user)){alert(t("profileMissingError"));return}const ve={...X.cancelled_at||{}};ve[be]=new Date().toISOString(),await Ve.from("students").update({cancelled_at:ve}).eq("id",X.id),n.invalidateQueries({queryKey:["students","inactive","rows"]}),U(null)}return E.jsxs("div",{className:"min-h-screen flex flex-col items-center py-8 px-2 sm:px-6 font-sans",style:{background:WV},children:[E.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-3 pb-4",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsxs("h1",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight",style:{color:Es},children:[t("students")," (",t("inactive"),")"]}),E.jsx("span",{className:"ml-2 px-3 py-1 rounded-full text-lg font-semibold",style:{background:"#ebe7f7",color:Es,border:"1px solid #e1def5"},children:V.length})]}),E.jsxs("div",{className:"flex gap-2 mt-3 sm:mt-0",children:[E.jsx("input",{type:"text",placeholder:t("searchStudents"),value:r,onChange:X=>l(X.target.value),className:"rounded-2xl border border-[#e1def5] px-4 py-2 bg-white shadow focus:outline-none focus:ring-2 focus:ring-[#6654b3] transition w-56",style:{color:Es}}),E.jsxs("button",{onClick:()=>b(!0),disabled:!u.size,className:"flex items-center gap-1 font-semibold px-4 py-2 rounded-2xl transition active:scale-95 disabled:opacity-60",style:{background:"#ec4899",color:"#fff",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.02)"},children:[E.jsx(_h,{className:"w-5 h-5"})," ",t("export")]})]})]}),E.jsx("div",{className:"w-full max-w-6xl mx-auto overflow-x-auto",children:Y?E.jsx("div",{className:"text-center text-[#a7a3c0] py-10",children:t("loading")}):P?E.jsx("div",{className:"text-red-500 py-10 text-center",children:P.message||P.toString()}):E.jsxs("table",{className:"w-full min-w-[900px] rounded-2xl",style:{background:"#fff",borderCollapse:"separate",borderSpacing:0,boxShadow:"0 2px 18px 0 rgba(102,84,179,0.05)",border:"1.5px solid #e1def5"},children:[E.jsx("thead",{style:{background:"#f6f6f6"},children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-2 py-3 rounded-l-2xl",children:E.jsx("input",{type:"checkbox",className:"accent-[#6654b3]",checked:V.length>0&&V.every(X=>u.has(z(X))),onChange:X=>{const be=new Set(u);X.target.checked?V.forEach(Ae=>be.add(z(Ae))):V.forEach(Ae=>be.delete(z(Ae))),h(be)}})}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Es},children:"#"}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Es},children:t("nickName")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Es},children:t("firstName")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Es},children:t("lastName")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Es},children:t("parentPhone")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Es},children:t("lineID")}),E.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Es},children:t("course")}),E.jsxs("th",{className:"px-2 py-3 text-center font-semibold",style:{color:Es},children:[t("used"),"/",t("purchased")]}),E.jsx("th",{className:"px-2 py-3 text-center font-semibold",style:{color:Es},children:t("status")}),E.jsx("th",{className:"px-2 py-3 text-center font-semibold rounded-r-2xl",style:{color:Es},children:t("actions")})]})}),E.jsx("tbody",{children:V.length===0?E.jsx("tr",{children:E.jsx("td",{colSpan:11,className:"text-center text-[#b0b0b0] py-8",children:t("noStudentsFound")})}):V.map((X,be)=>{var Ae;return E.jsxs("tr",{className:"transition",style:{animation:"fadein 0.3s",background:u.has(z(X))?KV(be):"inherit"},children:[E.jsx("td",{className:"px-2 py-2 text-center align-middle",children:E.jsx("input",{type:"checkbox",className:"accent-[#6654b3]",checked:u.has(z(X)),onChange:ve=>{const ce=new Set(u);ve.target.checked?ce.add(z(X)):ce.delete(z(X)),h(ce)}})}),E.jsx("td",{className:"px-2 py-2 align-middle",children:be+1}),E.jsx("td",{className:"px-2 py-2 align-middle font-semibold",style:{color:Es},children:X.stu.nick_name||E.jsx("span",{className:"text-[#d3d3e0]",children:""})}),E.jsx("td",{className:"px-2 py-2 align-middle font-semibold cursor-pointer hover:underline",style:{color:"#3a38a0"},onClick:()=>e(`/myschool/student/${X.stu.id}`),children:X.stu.first_name}),E.jsx("td",{className:"px-2 py-2 align-middle",children:X.stu.last_name}),E.jsx("td",{className:"px-2 py-2 align-middle font-mono",children:X.stu.parent_phone}),E.jsx("td",{className:"px-2 py-2 align-middle",children:E.jsx("span",{className:"rounded-xl px-2 py-1 text-xs font-semibold",style:{background:"#ebe7f7",color:Es,border:"1px solid #e1def5"},children:X.stu.parent_line_id||""})}),E.jsx("td",{className:"px-2 py-2 align-middle",children:((Ae=X.course)==null?void 0:Ae.name)||X.cid}),E.jsxs("td",{className:"px-2 py-2 align-middle text-center font-mono",children:[X.used," / ",X.purchased]}),E.jsx("td",{className:"px-2 py-2 align-middle text-center",children:E.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold",style:{background:"#fffbe5",color:"#bfa700",border:"1px solid #f6e38d"},children:t("renewalNeeded")})}),E.jsxs("td",{className:"px-2 py-2 align-middle text-center flex gap-1 justify-center",children:[E.jsx("button",{className:"rounded-full px-3 py-1 bg-[#ece6fc] text-[#6654b3] border border-[#6654b3] hover:bg-[#e4d8fd] text-xs font-semibold",onClick:()=>{S({stu:X.stu,cid:X.cid}),N(1),M(null)},children:t("renew")}),E.jsxs("button",{className:"rounded-full px-3 py-1 bg-red-50 text-red-700 border border-red-300 hover:bg-red-100 text-xs font-semibold flex items-center gap-1",onClick:()=>U({stu:X.stu,cid:X.cid}),children:[E.jsx(lm,{className:"w-4 h-4"}),t("cancelled")]})]})]},z(X))})})]})}),y&&E.jsx("div",{className:"fixed z-50 inset-0 bg-black/40 flex items-center justify-center",children:E.jsxs("div",{className:"rounded-2xl shadow-lg p-6 max-w-md w-full relative",style:{background:"#fff"},children:[E.jsx("button",{className:"absolute right-4 top-4 text-[#c2bce5] hover:text-[#ec4899]",onClick:()=>b(!1),children:E.jsx(io,{className:"w-6 h-6"})}),E.jsx("h2",{className:"text-lg font-bold mb-3",style:{color:"#ec4899"},children:t("exportStudents",{count:u.size})}),E.jsxs("div",{className:"flex gap-2 justify-between",children:[E.jsxs("button",{onClick:Z,className:"rounded-xl px-4 py-2 font-semibold flex items-center gap-1",style:{background:"#34d399",color:"#fff"},children:[E.jsx(_h,{className:"w-5 h-5"})," ",t("exportCSV")]}),E.jsxs("button",{onClick:()=>{window.print(),b(!1)},className:"rounded-xl px-4 py-2 font-semibold flex items-center gap-1",style:{background:Es,color:"#fff"},children:[E.jsx(Jm,{className:"w-5 h-5"})," ",t("print")]})]})]})}),E.jsx(Ci,{open:!!x,onClose:()=>S(null),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:E.jsxs(Ci.Panel,{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[E.jsx("button",{type:"button",onClick:()=>S(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:E.jsx(io,{className:"w-6 h-6"})}),E.jsx("h2",{className:"font-bold text-lg mb-3",children:t("submitRenew")}),E.jsxs("label",{className:"block mb-3",children:[E.jsx("span",{className:"font-semibold",children:t("hoursToPurchase")}),E.jsx("input",{type:"number",className:"w-full rounded border px-2 py-1",min:1,value:A,onChange:X=>N(Number(X.target.value))})]}),E.jsxs("label",{className:"block mb-3",children:[E.jsx("span",{className:"font-semibold",children:t("uploadReceipt")}),E.jsx("input",{type:"file",className:"block",accept:"image/*,application/pdf",onChange:X=>M(X.target.files?X.target.files[0]:null)}),I&&E.jsx("span",{className:"text-xs text-gray-500",children:I.name})]}),E.jsxs("div",{className:"flex justify-end gap-3 mt-2",children:[E.jsx("button",{type:"button",onClick:()=>S(null),className:"rounded-full px-4 py-2 border hover:bg-gray-100",children:t("cancel")}),E.jsxs("button",{type:"button",onClick:W,className:"rounded-full px-4 py-2 bg-[#6654b3] text-white hover:bg-purple-700 flex items-center gap-1",children:[E.jsx(om,{className:"w-5 h-5"})," ",t("submit")]})]})]})}),E.jsx(Ci,{open:!!j,onClose:()=>U(null),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:E.jsxs(Ci.Panel,{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl",children:[E.jsx("button",{type:"button",onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:E.jsx(io,{className:"w-6 h-6"})}),E.jsx("h2",{className:"font-bold text-lg mb-4 text-red-500",children:t("cancelCourse")}),E.jsx("div",{className:"mb-6",children:t("cancelCourseConfirm")}),E.jsxs("div",{className:"flex justify-end gap-3",children:[E.jsx("button",{type:"button",onClick:()=>U(null),className:"rounded-full px-4 py-2 border hover:bg-gray-100",children:t("cancel")}),E.jsxs("button",{type:"button",onClick:()=>ae(j.stu,j.cid),className:"rounded-full px-4 py-2 bg-red-500 text-white hover:bg-red-600 flex items-center gap-1",children:[E.jsx(lm,{className:"w-5 h-5"})," ",t("confirm")]})]})]})}),E.jsx("style",{children:`
        @keyframes fadein { from { opacity:0; transform: scale(0.98);} to { opacity:1; transform: scale(1);} }
      `})]})}function JV(){return cs({queryKey:["courses"],queryFn:async()=>{const{data:t}=await Ve.from("courses").select("id,name,weekdays,times,capacity,hour_packages").order("name");return t??[]},staleTime:3e5})}function eH({msg:t,onClear:e}){return ct.useEffect(()=>{if(!t)return;const n=setTimeout(e,3500);return()=>clearTimeout(n)},[t,e]),t?E.jsx("div",{className:"fixed left-1/2 -translate-x-1/2 bottom-8 z-50 bg-[#6654b3] text-white rounded-2xl px-8 py-3 shadow-xl text-lg font-semibold fade-in",children:t}):null}function tH({onDone:t}){const{t:e}=Pn(),{user:n}=_d(),[r,l]=R.useState(""),[u,h]=R.useState(""),[y,b]=R.useState(""),[x,S]=R.useState(""),[A,N]=R.useState(""),[I,M]=R.useState(""),[j,U]=R.useState({}),[$,Y]=R.useState({}),[P,V]=R.useState({}),[z,Z]=R.useState({}),[W,ae]=R.useState([]),X=R.useRef(null),[be,Ae]=R.useState(!1),[ve,ce]=R.useState(!1),[Fe,se]=R.useState(""),[re,le]=R.useState(""),[De,$e]=R.useState(!1),{data:H=[],isLoading:te}=JV();function ge(ie){U(Se=>{const Ie={...Se};return Ie[ie]?(delete Ie[ie],V(Oe=>{const{[ie]:Le,...We}=Oe;return We}),Y(Oe=>{const Le={...Oe};return delete Le[ie],Le}),Z(Oe=>{const Le={...Oe};return delete Le[ie],Le})):Ie[ie]={},Ie})}function pe(ie,Se){U(Ie=>{const Oe={...Ie},Le={...Oe[ie]||{}};return Le[Se]?delete Le[Se]:Le[Se]=[],Object.keys(Le).length?Oe[ie]=Le:delete Oe[ie],Oe}),Y(Ie=>{const Oe={...Ie};return Oe[ie]||(Oe[ie]={}),Oe[ie][Se]=!1,Oe})}function Be(ie,Se,Ie){Y(Oe=>{const Le={...Oe};return Le[ie]||(Le[ie]={}),Le[ie][Se]=Ie,Le}),U(Oe=>{const Le={...Oe};return Le[ie]=Le[ie]||{},Le[ie][Se]=Ie?[]:[],Le})}function ze(ie,Se,Ie){U(Oe=>{const Le={...Oe};return Le[ie]=Le[ie]||{},Le[ie][Se]=Le[ie][Se]||[],Le[ie][Se].includes(Ie)||Le[ie][Se].push(Ie),Le})}function Ee(ie,Se,Ie){U(Oe=>{const Le={...Oe};return Le[ie][Se].splice(Ie,1),Le[ie][Se].length||delete Le[ie][Se],Object.keys(Le[ie]).length||delete Le[ie],Le})}const At=ie=>ae(Se=>[...Se,...ie]),Ze=ie=>ae(Se=>Se.filter((Ie,Oe)=>Oe!==ie)),pt=Object.entries(P).reduce((ie,[Se,Ie])=>{var We;const Oe=H.find(st=>st.id===Se),Le=(We=Oe==null?void 0:Oe.hour_packages)==null?void 0:We[Ie];return Le?ie+Le.price:ie},0);function wn(ie){const Se=P[ie],Ie=H.find(We=>We.id===ie);if(!Ie||!Ie.hour_packages||Se===void 0)return null;const Oe=Ie.hour_packages[Se],Le=z[ie]||0;return Oe.hours-Le}async function Re(ie){var st;if(ie.preventDefault(),le(""),!Object.keys(j).length)return le(e("selectCourseError"));if(!r.trim())return le(e("enterNickError"));for(const Ge of Object.keys(j)){const vt=H.find(He=>He.id===Ge);if(vt&&((st=vt.hour_packages)!=null&&st.length)&&P[Ge]===void 0)return le(e("selectHourPackageError"));if(P[Ge]!==void 0&&(z[Ge]===void 0||z[Ge]<0))return le(e("enterUsedHoursError")||"Enter used hours for each course.");if(vt&&vt.hour_packages&&P[Ge]!==void 0&&z[Ge]>vt.hour_packages[P[Ge]].hours)return le(e("usedHoursTooMany",{count:vt.hour_packages[P[Ge]].hours})||`Used hours cannot exceed package hours (${vt.hour_packages[P[Ge]].hours})`)}Ae(!0);const Se=[];for(const Ge of W){const vt=`${Date.now()}-${Math.random().toString(36).slice(2)}.${Ge.name.split(".").pop()}`,{data:He,error:ui}=await Ve.storage.from("receipts").upload(vt,Ge,{cacheControl:"3600"});if(ui){le(ui.message),Ae(!1);return}const{data:Yi}=Ve.storage.from("receipts").getPublicUrl(He.path);Se.push(Yi.publicUrl)}const Ie={};for(const Ge of Object.keys(j)){const vt=H.find(He=>He.id===Ge);vt&&Array.isArray(vt.hour_packages)&&P[Ge]!==void 0?Ie[Ge]=vt.hour_packages[P[Ge]]:Ie[Ge]=null}const Oe={};for(const Ge of Object.keys(j))P[Ge]!==void 0&&(Oe[Ge]=Number(z[Ge]||0));const Le={nick_name:r,first_name:u,last_name:y,dob:x,parent_line_id:A,parent_phone:I,courses:j,purchased_packages:Ie,course_limits:Oe,total_price:pt,payment_receipt_urls:Se,joined_at:new Date().toISOString()},{error:We}=await Ve.from("students").insert([Le]);if(We){le(We.message),Ae(!1);return}se(e("studentAdded",{nick:r})),ce(!0),Ae(!1),t&&t()}return ve?E.jsx("div",{className:"min-h-[60vh] flex flex-col justify-center items-center bg-[#f6f6f6]",children:E.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-green-50 to-yellow-50 shadow-xl rounded-3xl px-8 py-12 max-w-md w-full flex flex-col items-center",children:[E.jsx("div",{className:"text-3xl font-extrabold mb-3 text-[#6654b3]",children:e("thankYou")}),E.jsx("div",{className:"text-lg text-gray-700 mb-4 text-center",children:e("studentAdded",{nick:r})})]})}):E.jsx("div",{className:"flex flex-col gap-8 py-10 px-2 sm:px-6 max-w-3xl mx-auto",style:{background:"#f6f6f6"},children:E.jsxs("form",{onSubmit:Re,className:"space-y-8",children:[E.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("studentInfo")}),E.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("nickName")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:r,onChange:ie=>l(ie.target.value),maxLength:40,pattern:".*"})]}),E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("firstName")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:u,onChange:ie=>h(ie.target.value),maxLength:40,pattern:".*"})]}),E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("lastName")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:y,onChange:ie=>b(ie.target.value),maxLength:40,pattern:".*"})]})]}),E.jsxs("label",{className:"flex flex-col gap-1 mt-4 w-full md:w-1/2",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("dob")}),E.jsx("input",{required:!0,type:"date",className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:x,onChange:ie=>S(ie.target.value)})]})]}),E.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("guardian")}),E.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("lineAppId")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:A,onChange:ie=>N(ie.target.value)})]}),E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("phone")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:I,onChange:ie=>M(ie.target.value)})]})]})]}),E.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("courses")}),te?E.jsx("div",{className:"text-gray-400",children:e("loadingCourses")}):H.length===0?E.jsx("div",{className:"text-gray-400",children:e("noCourses")}):H.map(ie=>{var Se;return E.jsxs("div",{className:`mb-2 border ${j[ie.id]?"border-[#6654b3] bg-purple-50":"border-gray-200 bg-white"} rounded-xl p-3 transition-all`,children:[E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[E.jsx("input",{type:"checkbox",checked:!!j[ie.id],onChange:()=>ge(ie.id)}),E.jsx("span",{className:"text-lg",children:ie.name}),E.jsx("span",{className:"text-xs text-gray-400",children:e("seats",{count:ie.capacity})})]}),j[ie.id]&&E.jsxs("div",{className:"ml-8 mt-2 mb-2",children:[ie.weekdays.map(Ie=>{var Oe,Le,We,st,Ge;return E.jsxs("div",{className:"mb-1",children:[E.jsxs("label",{className:"font-semibold mr-2",children:[E.jsx("input",{type:"checkbox",className:"mr-1",checked:!!((Oe=j[ie.id])!=null&&Oe[Ie]),onChange:()=>pe(ie.id,Ie)}),Ie]}),!!((Le=j[ie.id])!=null&&Le[Ie])&&E.jsxs(E.Fragment,{children:[E.jsxs("label",{className:"inline-flex items-center gap-1 font-medium text-[#6654b3] text-sm mb-1 ml-6",children:[E.jsx("input",{type:"checkbox",checked:!!((We=$[ie.id])!=null&&We[Ie]),onChange:vt=>Be(ie.id,Ie,vt.target.checked)}),e("fullDay")]}),!((st=$[ie.id])!=null&&st[Ie])&&E.jsxs("div",{className:"flex flex-wrap gap-1 items-center ml-6",children:[(j[ie.id][Ie]||[]).map((vt,He)=>E.jsxs("span",{className:"inline-flex items-center bg-[#ece6fc] rounded-full px-3 py-1 text-xs mr-2 mt-1",children:[vt,E.jsx("button",{type:"button",className:"ml-1 text-red-500 font-bold",onClick:()=>Ee(ie.id,Ie,He),children:""})]},He)),E.jsxs("select",{className:"border rounded px-2 py-1 text-sm ml-2",defaultValue:"",onChange:vt=>{vt.target.value&&(ze(ie.id,Ie,vt.target.value),vt.target.value="")},children:[E.jsx("option",{value:"",children:e("addTime")}),(((Ge=ie.times)==null?void 0:Ge[Ie])||[]).filter(vt=>!(j[ie.id][Ie]||[]).includes(vt)).map(vt=>E.jsx("option",{children:vt},vt))]})]})]})]},Ie)}),Array.isArray(ie.hour_packages)&&ie.hour_packages.length>0&&E.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("chooseHourPackage")}),E.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:ie.hour_packages.map((Ie,Oe)=>E.jsxs("label",{className:`cursor-pointer border rounded-full px-4 py-2 text-sm font-semibold transition
                              ${P[ie.id]===Oe?"bg-[#6654b3] text-white border-[#6654b3]":"bg-white border-gray-300 text-[#6654b3] hover:bg-purple-50"}`,children:[E.jsx("input",{type:"radio",name:`hour-package-${ie.id}`,className:"hidden",checked:P[ie.id]===Oe,onChange:()=>{V(Le=>({...Le,[ie.id]:Oe})),Z(Le=>({...Le,[ie.id]:0}))}}),e("hoursLabel",{count:Ie.hours}),"  ",Ie.price.toLocaleString()," ",e("baht")]},Oe))}),P[ie.id]!==void 0&&ie.hour_packages&&E.jsxs("div",{className:"flex items-center ml-4 gap-2",children:[E.jsxs("label",{className:"text-sm text-[#6654b3] font-semibold",children:[e("usedHours")||"Used hours",":"]}),E.jsx("input",{type:"number",min:0,max:((Se=ie.hour_packages[P[ie.id]])==null?void 0:Se.hours)??9999,value:z[ie.id]!==void 0?z[ie.id]:"",onChange:Ie=>{let Oe=Number(Ie.target.value);isNaN(Oe)&&(Oe=0);const Le=ie.hour_packages&&P[ie.id]!==void 0?ie.hour_packages[P[ie.id]].hours:0;Z(We=>({...We,[ie.id]:Math.max(0,Math.min(Oe,Le))}))},className:"w-16 border rounded px-2 py-1 text-sm bg-white",placeholder:"0",required:!0}),E.jsxs("span",{className:"ml-2 text-xs font-medium text-green-700 bg-green-100 rounded-full px-3 py-1",children:[e("hoursRemaining"),": ",wn(ie.id)!==null?wn(ie.id):""]})]})]})]})]},ie.id)})]}),E.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("paymentReceipt")}),E.jsxs("div",{className:"mb-4 flex flex-col items-end",children:[E.jsxs("div",{className:"text-lg font-bold text-[#6654b3] mb-1",children:[e("totalPrice"),": ",pt.toLocaleString()," ",e("baht")]}),pt>0&&E.jsx("button",{type:"button",onClick:()=>$e(ie=>!ie),className:"text-sm text-[#6654b3] underline hover:opacity-70 transition px-2",children:e(De?"hideDetail":"showDetail")})]}),De&&pt>0&&E.jsx("div",{className:"mb-4 bg-[#f9f5ff] p-4 rounded-xl shadow-inner text-sm text-[#6654b3]",children:Object.entries(P).map(([ie,Se])=>{var We;const Ie=H.find(st=>st.id===ie),Oe=(We=Ie==null?void 0:Ie.hour_packages)==null?void 0:We[Se];if(!Ie||!Oe)return null;const Le=j[ie];return E.jsxs("div",{className:"mb-3",children:[E.jsxs("div",{className:"font-semibold",children:[Ie.name,": ",e("hoursLabel",{count:Oe.hours}),"  ",Oe.price.toLocaleString()," ",e("baht")]}),E.jsx("ul",{className:"ml-4 mt-1 list-disc",children:Object.entries(Le||{}).map(([st,Ge])=>E.jsxs("li",{children:[E.jsx("span",{className:"font-medium",children:st}),!Ge||Ge.length===0?E.jsx("span",{className:"ml-2 text-xs text-gray-500",children:e("fullDay")}):E.jsx("span",{className:"ml-2",children:Ge.join(", ")})]},st))}),z[ie]!==void 0&&E.jsxs("div",{className:"text-sm mt-1",children:[E.jsxs("span",{className:"text-[#6654b3]",children:[e("usedHours"),": ",z[ie]]}),E.jsxs("span",{className:"ml-4 text-green-700",children:[e("hoursRemaining"),": ",wn(ie)]})]})]},ie)})}),E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx("button",{type:"button",onClick:()=>{var ie;return(ie=X.current)==null?void 0:ie.click()},className:"rounded-full border border-[#ece6fc] bg-purple-50 text-[#6654b3] px-5 py-2 font-semibold hover:bg-purple-100 transition",children:e("chooseFiles")}),E.jsx("input",{ref:X,type:"file",multiple:!0,accept:"image/*,application/pdf",className:"hidden",onChange:ie=>ie.target.files&&At(Array.from(ie.target.files))}),W.length>0&&E.jsx("ul",{className:"mt-2 space-y-1",children:W.map((ie,Se)=>E.jsxs("li",{className:"flex items-center bg-[#ece6fc] rounded-full px-3 py-1 text-sm",children:[E.jsx("span",{className:"truncate max-w-[180px]",children:ie.name}),E.jsx("button",{type:"button",className:"ml-2 text-red-500 font-bold",onClick:()=>Ze(Se),children:""})]},Se))})]})]}),E.jsx(eH,{msg:Fe||re,onClear:()=>{se(""),le("")}}),E.jsx("div",{className:"flex justify-end",children:E.jsx("button",{type:"submit",disabled:be,className:"bg-[#6654b3] hover:bg-purple-700 text-white font-bold px-8 py-3 rounded-xl shadow disabled:opacity-50 transition",children:e(be?"adding":"addStudent")})})]})})}function nH(){return cs({queryKey:["courses"],queryFn:async()=>{const{data:t}=await Ve.from("courses").select("id,name,weekdays,times,capacity,hour_packages").order("name");return t??[]},staleTime:3e5})}function sH(t){return cs({queryKey:["public-admissions-link"],queryFn:async()=>{const{data:e}=await Ve.from("application_links").select("*").order("created_at",{ascending:!1}).limit(1);let n=e&&e[0]&&new Date(e[0].expires_at)>new Date?e[0]:null;if(!n){await Ve.from("application_links").update({expires_at:new Date(Date.now()-60*1e3)}).neq("expires_at",null);const{data:r}=await Ve.from("application_links").insert([{expires_at:new Date(Date.now()+7*24*3600*1e3)}]).select("*").single();n=r}return`${window.location.origin}/apply/${n.id}`},enabled:t,refetchOnWindowFocus:!1})}function iH({msg:t,onClear:e}){return ct.useEffect(()=>{if(!t)return;const n=setTimeout(e,3500);return()=>clearTimeout(n)},[t,e]),t?E.jsx("div",{className:"fixed left-1/2 -translate-x-1/2 bottom-8 z-50 bg-[#6654b3] text-white rounded-2xl px-8 py-3 shadow-xl text-lg font-semibold fade-in",children:t}):null}function Lv({publicMode:t=!1}){const{t:e}=Pn(),{user:n}=_d(),r=(n==null?void 0:n.role)??null,[l,u]=R.useState(""),[h,y]=R.useState(""),[b,x]=R.useState(""),[S,A]=R.useState(""),[N,I]=R.useState(""),[M,j]=R.useState(""),[U,$]=R.useState({}),[Y,P]=R.useState({}),[V,z]=R.useState([]),Z=R.useRef(null),[W,ae]=R.useState(!1),[X,be]=R.useState(!1),[Ae,ve]=R.useState(""),[ce,Fe]=R.useState(""),[se,re]=R.useState(!1),[le,De]=R.useState(!1),{data:$e,refetch:H}=sH(le&&(r==="admin"||r==="staff")),{data:te=[],isLoading:ge}=nH();function pe(Re){$(ie=>{const Se={...ie};return Se[Re]?(delete Se[Re],P(Ie=>{const{[Re]:Oe,...Le}=Ie;return Le})):Se[Re]={},Se})}function Be(Re,ie){$(Se=>{const Ie={...Se},Oe={...Ie[Re]||{}};return Oe[ie]?delete Oe[ie]:Oe[ie]=[],Object.keys(Oe).length?Ie[Re]=Oe:delete Ie[Re],Ie})}function ze(Re,ie,Se){$(Ie=>{const Oe={...Ie};return Oe[Re]=Oe[Re]||{},Oe[Re][ie]=Oe[Re][ie]||[],Oe[Re][ie].includes(Se)||Oe[Re][ie].push(Se),Oe})}function Ee(Re,ie,Se){$(Ie=>{const Oe={...Ie};return Oe[Re][ie].splice(Se,1),Oe[Re][ie].length||delete Oe[Re][ie],Object.keys(Oe[Re]).length||delete Oe[Re],Oe})}const At=Re=>z(ie=>[...ie,...Re]),Ze=Re=>z(ie=>ie.filter((Se,Ie)=>Ie!==Re)),pt=Object.entries(Y).reduce((Re,[ie,Se])=>{var Le;const Ie=te.find(We=>We.id===ie),Oe=(Le=Ie==null?void 0:Ie.hour_packages)==null?void 0:Le[Se];return Oe?Re+Oe.price:Re},0);async function wn(Re){var Oe;if(Re.preventDefault(),Fe(""),!Object.keys(U).length)return Fe(e("selectCourseError"));if(!l.trim())return Fe(e("enterNickError"));for(const Le of Object.keys(U)){const We=te.find(st=>st.id===Le);if(We&&((Oe=We.hour_packages)!=null&&Oe.length)&&Y[Le]===void 0)return Fe(e("selectHourPackageError"))}ae(!0);const ie=[];for(const Le of V){const We=`${Date.now()}-${Math.random().toString(36).slice(2)}.${Le.name.split(".").pop()}`,{data:st,error:Ge}=await Ve.storage.from("receipts").upload(We,Le,{cacheControl:"3600"});if(Ge){Fe(Ge.message),ae(!1);return}const{data:vt}=Ve.storage.from("receipts").getPublicUrl(st.path);ie.push(vt.publicUrl)}const Se={};for(const Le of Object.keys(U)){const We=te.find(st=>st.id===Le);We&&Array.isArray(We.hour_packages)&&Y[Le]!==void 0?Se[Le]=We.hour_packages[Y[Le]]:Se[Le]=null}const Ie={nick_name:l,first_name:h,last_name:b,dob:S,parent_line_id:N,parent_phone:M,courses:U,purchased_packages:Se,total_price:pt,payment_receipt_urls:ie};if(r==="admin"){const{error:Le}=await Ve.from("students").insert([{...Ie,joined_at:new Date().toISOString()}]);if(Le){Fe(Le.message),ae(!1);return}ve(e("studentAdded",{nick:l})),be(!0)}else{const{error:Le}=await Ve.from("applications").insert([{...Ie,status:"pending"}]);if(Le){Fe(Le.message),ae(!1);return}ve(e("applicationSubmitted")),be(!0)}ae(!1)}return ct.useEffect(()=>{if(!t&&X){const Re=setTimeout(()=>be(!1),1200);return()=>clearTimeout(Re)}},[t,X]),t&&X?E.jsx("div",{className:"min-h-[60vh] flex flex-col justify-center items-center bg-[#f6f6f6]",children:E.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-green-50 to-yellow-50 shadow-xl rounded-3xl px-8 py-12 max-w-md w-full flex flex-col items-center",children:[E.jsx("div",{className:"text-3xl font-extrabold mb-3 text-[#6654b3]",children:e("thankYou")}),E.jsxs("div",{className:"text-lg text-gray-700 mb-4 text-center",children:[e("applicationReceived"),E.jsx("br",{}),e("staffWillContact"),E.jsx("br",{}),e("youMayClose")]})]})}):E.jsxs("div",{className:"flex flex-col gap-8 py-10 px-2 sm:px-6 max-w-3xl mx-auto",style:{background:"#f6f6f6"},children:[E.jsxs("header",{className:"mb-4",children:[E.jsx("h1",{className:"text-3xl font-extrabold text-[#6654b3]",children:e("admissionsTitle")}),E.jsx("p",{className:"text-lg text-[#6654b3] mt-2",children:e("admissionsIntro",{staffMsg:e(r==="admin"?"enrollInstant":"contactToConfirm")})})]}),E.jsxs("form",{onSubmit:wn,className:"space-y-8",children:[E.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("studentInfo")}),E.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("nickName")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:l,onChange:Re=>u(Re.target.value),maxLength:40,pattern:".*"})]}),E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("firstName")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:h,onChange:Re=>y(Re.target.value),maxLength:40,pattern:".*"})]}),E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("lastName")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:b,onChange:Re=>x(Re.target.value),maxLength:40,pattern:".*"})]})]}),E.jsxs("label",{className:"flex flex-col gap-1 mt-4 w-full md:w-1/2",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("dob")}),E.jsx("input",{required:!0,type:"date",className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:S,onChange:Re=>A(Re.target.value)})]})]}),E.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("guardian")}),E.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("lineAppId")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:N,onChange:Re=>I(Re.target.value)})]}),E.jsxs("label",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("phone")}),E.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:M,onChange:Re=>j(Re.target.value)})]})]})]}),E.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("courses")}),ge?E.jsx("div",{className:"text-gray-400",children:e("loadingCourses")}):te.length===0?E.jsx("div",{className:"text-gray-400",children:e("noCourses")}):te.map(Re=>E.jsxs("div",{className:`mb-2 border ${U[Re.id]?"border-[#6654b3] bg-purple-50":"border-gray-200 bg-white"} rounded-xl p-3 transition-all`,children:[E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[E.jsx("input",{type:"checkbox",checked:!!U[Re.id],onChange:()=>pe(Re.id)}),E.jsx("span",{className:"text-lg",children:Re.name}),E.jsx("span",{className:"text-xs text-gray-400",children:e("seats",{count:Re.capacity})})]}),U[Re.id]&&E.jsxs("div",{className:"ml-8 mt-2 mb-2",children:[Re.weekdays.map(ie=>{var Se,Ie;return E.jsxs("div",{className:"mb-1",children:[E.jsxs("label",{className:"font-semibold mr-2",children:[E.jsx("input",{type:"checkbox",className:"mr-1",checked:!!((Se=U[Re.id])!=null&&Se[ie]),onChange:()=>Be(Re.id,ie)}),ie]}),!!((Ie=U[Re.id])!=null&&Ie[ie])&&E.jsxs(E.Fragment,{children:[U[Re.id][ie].map((Oe,Le)=>E.jsxs("span",{className:"inline-flex items-center bg-[#ece6fc] rounded-full px-3 py-0.5 text-xs mr-2 mt-1",children:[Oe,E.jsx("button",{type:"button",className:"ml-1 text-red-500 font-bold",onClick:()=>Ee(Re.id,ie,Le),children:""})]},Le)),E.jsxs("select",{className:"border rounded px-2 py-1 text-sm ml-2",defaultValue:"",onChange:Oe=>{Oe.target.value&&(ze(Re.id,ie,Oe.target.value),Oe.target.value="")},children:[E.jsx("option",{value:"",children:e("addTime")}),(Re.times[ie]||[]).filter(Oe=>{var Le;return!((Le=U[Re.id][ie])!=null&&Le.includes(Oe))}).map(Oe=>E.jsx("option",{children:Oe},Oe))]})]})]},ie)}),Array.isArray(Re.hour_packages)&&Re.hour_packages.length>0&&E.jsxs("div",{className:"mt-3",children:[E.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("chooseHourPackage")}),E.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:Re.hour_packages.map((ie,Se)=>E.jsxs("label",{className:`cursor-pointer border rounded-full px-4 py-2 text-sm font-semibold transition
                              ${Y[Re.id]===Se?"bg-[#6654b3] text-white border-[#6654b3]":"bg-white border-gray-300 text-[#6654b3] hover:bg-purple-50"}`,children:[E.jsx("input",{type:"radio",name:`hour-package-${Re.id}`,className:"hidden",checked:Y[Re.id]===Se,onChange:()=>P(Ie=>({...Ie,[Re.id]:Se}))}),e("hoursLabel",{count:ie.hours}),"  ",ie.price.toLocaleString()," ",e("baht")]},Se))})]})]})]},Re.id))]}),E.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("paymentReceipt")}),E.jsxs("div",{className:"mb-4 flex flex-col items-end",children:[E.jsxs("div",{className:"text-lg font-bold text-[#6654b3] mb-1",children:[e("totalPrice"),": ",pt.toLocaleString()," ",e("baht")]}),pt>0&&E.jsx("button",{type:"button",onClick:()=>re(Re=>!Re),className:"text-sm text-[#6654b3] underline hover:opacity-70 transition px-2",children:e(se?"hideDetail":"showDetail")})]}),se&&pt>0&&E.jsx("div",{className:"mb-4 bg-[#f9f5ff] p-4 rounded-xl shadow-inner text-sm text-[#6654b3]",children:Object.entries(Y).map(([Re,ie])=>{var Le;const Se=te.find(We=>We.id===Re),Ie=(Le=Se==null?void 0:Se.hour_packages)==null?void 0:Le[ie];if(!Se||!Ie)return null;const Oe=U[Re];return E.jsxs("div",{className:"mb-3",children:[E.jsxs("div",{className:"font-semibold",children:[Se.name,": ",e("hoursLabel",{count:Ie.hours}),"  ",Ie.price.toLocaleString()," ",e("baht")]}),E.jsx("ul",{className:"ml-4 mt-1 list-disc",children:Object.entries(Oe||{}).map(([We,st])=>E.jsxs("li",{children:[E.jsx("span",{className:"font-medium",children:We}),st&&st.length>0&&E.jsx("span",{className:"ml-2",children:st.join(", ")})]},We))})]},Re)})}),E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx("button",{type:"button",onClick:()=>{var Re;return(Re=Z.current)==null?void 0:Re.click()},className:"rounded-full border border-[#ece6fc] bg-purple-50 text-[#6654b3] px-5 py-2 font-semibold hover:bg-purple-100 transition",children:e("chooseFiles")}),E.jsx("input",{ref:Z,type:"file",multiple:!0,accept:"image/*,application/pdf",className:"hidden",onChange:Re=>Re.target.files&&At(Array.from(Re.target.files))}),V.length>0&&E.jsx("ul",{className:"mt-2 space-y-1",children:V.map((Re,ie)=>E.jsxs("li",{className:"flex items-center bg-[#ece6fc] rounded-full px-3 py-1 text-sm",children:[E.jsx("span",{className:"truncate max-w-[180px]",children:Re.name}),E.jsx("button",{type:"button",className:"ml-2 text-red-500 font-bold",onClick:()=>Ze(ie),children:""})]},ie))})]})]}),E.jsx(iH,{msg:Ae||ce,onClear:()=>{ve(""),Fe("")}}),E.jsx("div",{className:"flex justify-end",children:E.jsx("button",{type:"submit",disabled:W,className:"bg-[#6654b3] hover:bg-purple-700 text-white font-bold px-8 py-3 rounded-xl shadow disabled:opacity-50 transition",children:e(r==="admin"?W?"adding":"addStudent":W?"submitting":"submitApplication")})}),!t&&(r==="admin"||r==="staff")&&E.jsxs("div",{className:"mt-12 flex flex-col items-center gap-2",children:[E.jsx("button",{type:"button",onClick:()=>{De(!0),H()},className:"px-5 py-2 rounded-full font-semibold border bg-[#f6f6f6] text-[#6654b3] border-[#ece6fc] hover:bg-[#ece6fc] transition",children:e($e?"refreshPublicAdmissionsLink":"showPublicAdmissionsLink")}),le&&$e&&E.jsxs("div",{className:"flex items-center gap-2 mt-2 bg-[#ece6fc] px-4 py-2 rounded-xl w-full max-w-lg",children:[E.jsx("input",{readOnly:!0,className:"flex-1 bg-transparent outline-none",value:$e}),E.jsx("button",{onClick:()=>navigator.clipboard.writeText($e),className:"text-[#6654b3] hover:underline font-bold px-2",children:e("copy")})]})]})]})]})}var Xe;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Xe||(Xe={}));var jv=new Map([[Xe.QR_CODE,"QR_CODE"],[Xe.AZTEC,"AZTEC"],[Xe.CODABAR,"CODABAR"],[Xe.CODE_39,"CODE_39"],[Xe.CODE_93,"CODE_93"],[Xe.CODE_128,"CODE_128"],[Xe.DATA_MATRIX,"DATA_MATRIX"],[Xe.MAXICODE,"MAXICODE"],[Xe.ITF,"ITF"],[Xe.EAN_13,"EAN_13"],[Xe.EAN_8,"EAN_8"],[Xe.PDF_417,"PDF_417"],[Xe.RSS_14,"RSS_14"],[Xe.RSS_EXPANDED,"RSS_EXPANDED"],[Xe.UPC_A,"UPC_A"],[Xe.UPC_E,"UPC_E"],[Xe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Pv;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Pv||(Pv={}));function rH(t){return Object.values(Xe).includes(t)}var lo;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(lo||(lo={}));var zi=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[lo.SCAN_TYPE_CAMERA,lo.SCAN_TYPE_FILE],t}(),EC=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!jv.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,jv.get(e))},t}(),Bv=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Lm;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Lm||(Lm={}));var CC=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Lm.UNKWOWN_ERROR}},t}(),AC=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function hr(t){return typeof t>"u"||t===null}function aH(t,e,n){return t>n?n:t<e?e:t}var hc=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Qt=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),Uv=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),TC=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],u=new Set(l),h=Object.keys(e),y=0,b=h;y<b.length;y++){var x=b[y];if(u.has(x))return n.logError("".concat(x," is not supported videoConstaints."),!0),!1}return!0},t}(),qu={exports:{}},oH=qu.exports,Fv;function lH(){return Fv||(Fv=1,function(t,e){(function(n,r){r(e)})(oH,function(n){function r(k){return k==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,i){k.__proto__=i}||function(k,i){for(var o in i)i.hasOwnProperty(o)&&(k[o]=i[o])};function u(k,i){l(k,i);function o(){this.constructor=k}k.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}function h(k,i){var o=Object.setPrototypeOf;o?o(k,i):k.__proto__=i}function y(k,i){i===void 0&&(i=k.constructor);var o=Error.captureStackTrace;o&&o(k,i)}var b=function(k){u(i,k);function i(o){var c=this.constructor,f=k.call(this,o)||this;return Object.defineProperty(f,"name",{value:c.name,enumerable:!1}),h(f,c.prototype),y(f),f}return i}(Error);class x extends b{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}x.kind="Exception";class S extends x{}S.kind="ArgumentException";class A extends x{}A.kind="IllegalArgumentException";class N{constructor(i){if(this.binarizer=i,i===null)throw new A("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,o){return this.binarizer.getBlackRow(i,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,o,c,f){const g=this.binarizer.getLuminanceSource().crop(i,o,c,f);return new N(this.binarizer.createBinarizer(g))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new N(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new N(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class I extends x{static getChecksumInstance(){return new I}}I.kind="ChecksumException";class M{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class j{static arraycopy(i,o,c,f,g){for(;g--;)c[f++]=i[o++]}static currentTimeMillis(){return Date.now()}}class U extends x{}U.kind="IndexOutOfBoundsException";class $ extends U{constructor(i=void 0,o=void 0){super(o),this.index=i,this.message=o}}$.kind="ArrayIndexOutOfBoundsException";class Y{static fill(i,o){for(let c=0,f=i.length;c<f;c++)i[c]=o}static fillWithin(i,o,c,f){Y.rangeCheck(i.length,o,c);for(let g=o;g<c;g++)i[g]=f}static rangeCheck(i,o,c){if(o>c)throw new A("fromIndex("+o+") > toIndex("+c+")");if(o<0)throw new $(o);if(c>i)throw new $(c)}static asList(...i){return i}static create(i,o,c){return Array.from({length:i}).map(g=>Array.from({length:o}).fill(c))}static createInt32Array(i,o,c){return Array.from({length:i}).map(g=>Int32Array.from({length:o}).fill(c))}static equals(i,o){if(!i||!o||!i.length||!o.length||i.length!==o.length)return!1;for(let c=0,f=i.length;c<f;c++)if(i[c]!==o[c])return!1;return!0}static hashCode(i){if(i===null)return 0;let o=1;for(const c of i)o=31*o+c;return o}static fillUint8Array(i,o){for(let c=0;c!==i.length;c++)i[c]=o}static copyOf(i,o){return i.slice(0,o)}static copyOfUint8Array(i,o){if(i.length<=o){const c=new Uint8Array(o);return c.set(i),c}return i.slice(0,o)}static copyOfRange(i,o,c){const f=c-o,g=new Int32Array(f);return j.arraycopy(i,o,g,0,f),g}static binarySearch(i,o,c){c===void 0&&(c=Y.numberComparator);let f=0,g=i.length-1;for(;f<=g;){const p=g+f>>1,w=c(o,i[p]);if(w>0)f=p+1;else if(w<0)g=p-1;else return p}return-f-1}static numberComparator(i,o){return i-o}}class P{static numberOfTrailingZeros(i){let o;if(i===0)return 32;let c=31;return o=i<<16,o!==0&&(c-=16,i=o),o=i<<8,o!==0&&(c-=8,i=o),o=i<<4,o!==0&&(c-=4,i=o),o=i<<2,o!==0&&(c-=2,i=o),c-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let o=1;return i>>>16||(o+=16,i<<=16),i>>>24||(o+=8,i<<=8),i>>>28||(o+=4,i<<=4),i>>>30||(o+=2,i<<=2),o-=i>>>31,o}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,o){return Math.trunc(i/o)}static parseInt(i,o=void 0){return parseInt(i,o)}}P.MIN_VALUE_32_BITS=-2147483648,P.MAX_VALUE=Number.MAX_SAFE_INTEGER;class V{constructor(i,o){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,o==null?this.bits=V.makeArray(i):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const o=V.makeArray(i);j.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const o=this.size;if(i>=o)return o;const c=this.bits;let f=Math.floor(i/32),g=c[f];g&=~((1<<(i&31))-1);const p=c.length;for(;g===0;){if(++f===p)return o;g=c[f]}const w=f*32+P.numberOfTrailingZeros(g);return w>o?o:w}getNextUnset(i){const o=this.size;if(i>=o)return o;const c=this.bits;let f=Math.floor(i/32),g=~c[f];g&=~((1<<(i&31))-1);const p=c.length;for(;g===0;){if(++f===p)return o;g=~c[f]}const w=f*32+P.numberOfTrailingZeros(g);return w>o?o:w}setBulk(i,o){this.bits[Math.floor(i/32)]=o}setRange(i,o){if(o<i||i<0||o>this.size)throw new A;if(o===i)return;o--;const c=Math.floor(i/32),f=Math.floor(o/32),g=this.bits;for(let p=c;p<=f;p++){const w=p>c?0:i&31,_=(2<<(p<f?31:o&31))-(1<<w);g[p]|=_}}clear(){const i=this.bits.length,o=this.bits;for(let c=0;c<i;c++)o[c]=0}isRange(i,o,c){if(o<i||i<0||o>this.size)throw new A;if(o===i)return!0;o--;const f=Math.floor(i/32),g=Math.floor(o/32),p=this.bits;for(let w=f;w<=g;w++){const C=w>f?0:i&31,O=(2<<(w<g?31:o&31))-(1<<C)&4294967295;if((p[w]&O)!==(c?O:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,o){if(o<0||o>32)throw new A("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let c=o;c>0;c--)this.appendBit((i>>c-1&1)===1)}appendBitArray(i){const o=i.size;this.ensureCapacity(this.size+o);for(let c=0;c<o;c++)this.appendBit(i.get(c))}xor(i){if(this.size!==i.size)throw new A("Sizes don't match");const o=this.bits;for(let c=0,f=o.length;c<f;c++)o[c]^=i.bits[c]}toBytes(i,o,c,f){for(let g=0;g<f;g++){let p=0;for(let w=0;w<8;w++)this.get(i)&&(p|=1<<7-w),i++;o[c+g]=p}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),c=o+1,f=this.bits;for(let g=0;g<c;g++){let p=f[g];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,i[o-g]=p}if(this.size!==c*32){const g=c*32-this.size;let p=i[0]>>>g;for(let w=1;w<c;w++){const C=i[w];p|=C<<32-g,i[w-1]=p,p=C>>>g}i[c-1]=p}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof V))return!1;const o=i;return this.size===o.size&&Y.equals(this.bits,o.bits)}hashCode(){return 31*this.size+Y.hashCode(this.bits)}toString(){let i="";for(let o=0,c=this.size;o<c;o++)(o&7)===0&&(i+=" "),i+=this.get(o)?"X":".";return i}clone(){return new V(this.size,this.bits.slice())}}var z;(function(k){k[k.OTHER=0]="OTHER",k[k.PURE_BARCODE=1]="PURE_BARCODE",k[k.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",k[k.TRY_HARDER=3]="TRY_HARDER",k[k.CHARACTER_SET=4]="CHARACTER_SET",k[k.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",k[k.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",k[k.ASSUME_GS1=7]="ASSUME_GS1",k[k.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",k[k.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",k[k.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(z||(z={}));var Z=z;class W extends x{static getFormatInstance(){return new W}}W.kind="FormatException";var ae;(function(k){k[k.Cp437=0]="Cp437",k[k.ISO8859_1=1]="ISO8859_1",k[k.ISO8859_2=2]="ISO8859_2",k[k.ISO8859_3=3]="ISO8859_3",k[k.ISO8859_4=4]="ISO8859_4",k[k.ISO8859_5=5]="ISO8859_5",k[k.ISO8859_6=6]="ISO8859_6",k[k.ISO8859_7=7]="ISO8859_7",k[k.ISO8859_8=8]="ISO8859_8",k[k.ISO8859_9=9]="ISO8859_9",k[k.ISO8859_10=10]="ISO8859_10",k[k.ISO8859_11=11]="ISO8859_11",k[k.ISO8859_13=12]="ISO8859_13",k[k.ISO8859_14=13]="ISO8859_14",k[k.ISO8859_15=14]="ISO8859_15",k[k.ISO8859_16=15]="ISO8859_16",k[k.SJIS=16]="SJIS",k[k.Cp1250=17]="Cp1250",k[k.Cp1251=18]="Cp1251",k[k.Cp1252=19]="Cp1252",k[k.Cp1256=20]="Cp1256",k[k.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",k[k.UTF8=22]="UTF8",k[k.ASCII=23]="ASCII",k[k.Big5=24]="Big5",k[k.GB18030=25]="GB18030",k[k.EUC_KR=26]="EUC_KR"})(ae||(ae={}));class X{constructor(i,o,c,...f){this.valueIdentifier=i,this.name=c,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=f,X.VALUE_IDENTIFIER_TO_ECI.set(i,this),X.NAME_TO_ECI.set(c,this);const g=this.values;for(let p=0,w=g.length;p!==w;p++){const C=g[p];X.VALUES_TO_ECI.set(C,this)}for(const p of f)X.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new W("incorect value");const o=X.VALUES_TO_ECI.get(i);if(o===void 0)throw new W("incorect value");return o}static getCharacterSetECIByName(i){const o=X.NAME_TO_ECI.get(i);if(o===void 0)throw new W("incorect value");return o}equals(i){if(!(i instanceof X))return!1;const o=i;return this.getName()===o.getName()}}X.VALUE_IDENTIFIER_TO_ECI=new Map,X.VALUES_TO_ECI=new Map,X.NAME_TO_ECI=new Map,X.Cp437=new X(ae.Cp437,Int32Array.from([0,2]),"Cp437"),X.ISO8859_1=new X(ae.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),X.ISO8859_2=new X(ae.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),X.ISO8859_3=new X(ae.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),X.ISO8859_4=new X(ae.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),X.ISO8859_5=new X(ae.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),X.ISO8859_6=new X(ae.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),X.ISO8859_7=new X(ae.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),X.ISO8859_8=new X(ae.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),X.ISO8859_9=new X(ae.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),X.ISO8859_10=new X(ae.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),X.ISO8859_11=new X(ae.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),X.ISO8859_13=new X(ae.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),X.ISO8859_14=new X(ae.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),X.ISO8859_15=new X(ae.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),X.ISO8859_16=new X(ae.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),X.SJIS=new X(ae.SJIS,20,"SJIS","Shift_JIS"),X.Cp1250=new X(ae.Cp1250,21,"Cp1250","windows-1250"),X.Cp1251=new X(ae.Cp1251,22,"Cp1251","windows-1251"),X.Cp1252=new X(ae.Cp1252,23,"Cp1252","windows-1252"),X.Cp1256=new X(ae.Cp1256,24,"Cp1256","windows-1256"),X.UnicodeBigUnmarked=new X(ae.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),X.UTF8=new X(ae.UTF8,26,"UTF8","UTF-8"),X.ASCII=new X(ae.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),X.Big5=new X(ae.Big5,28,"Big5"),X.GB18030=new X(ae.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),X.EUC_KR=new X(ae.EUC_KR,30,"EUC_KR","EUC-KR");class be extends x{}be.kind="UnsupportedOperationException";class Ae{static decode(i,o){const c=this.encodingName(o);return this.customDecoder?this.customDecoder(i,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(i,c):new TextDecoder(c).decode(i)}static shouldDecodeOnFallback(i){return!Ae.isBrowser()&&i==="ISO-8859-1"}static encode(i,o){const c=this.encodingName(o);return this.customEncoder?this.customEncoder(i,c):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof X?i:X.getCharacterSetECIByName(i)}static decodeFallback(i,o){const c=this.encodingCharacterSet(o);if(Ae.isDecodeFallbackSupported(c)){let f="";for(let g=0,p=i.length;g<p;g++){let w=i[g].toString(16);w.length<2&&(w="0"+w),f+="%"+w}return decodeURIComponent(f)}if(c.equals(X.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new be(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(X.UTF8)||i.equals(X.ISO8859_1)||i.equals(X.ASCII)}static encodeFallback(i){const c=btoa(unescape(encodeURIComponent(i))).split(""),f=[];for(let g=0;g<c.length;g++)f.push(c[g].charCodeAt(0));return new Uint8Array(f)}}class ve{static castAsNonUtf8Char(i,o=null){const c=o?o.getName():this.ISO88591;return Ae.decode(new Uint8Array([i]),c)}static guessEncoding(i,o){if(o!=null&&o.get(Z.CHARACTER_SET)!==void 0)return o.get(Z.CHARACTER_SET).toString();const c=i.length;let f=!0,g=!0,p=!0,w=0,C=0,_=0,O=0,L=0,B=0,q=0,Q=0,ee=0,ue=0,xe=0;const ke=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let Pe=0;Pe<c&&(f||g||p);Pe++){const Me=i[Pe]&255;p&&(w>0?(Me&128)===0?p=!1:w--:(Me&128)!==0&&((Me&64)===0?p=!1:(w++,(Me&32)===0?C++:(w++,(Me&16)===0?_++:(w++,(Me&8)===0?O++:p=!1))))),f&&(Me>127&&Me<160?f=!1:Me>159&&(Me<192||Me===215||Me===247)&&xe++),g&&(L>0?Me<64||Me===127||Me>252?g=!1:L--:Me===128||Me===160||Me>239?g=!1:Me>160&&Me<224?(B++,Q=0,q++,q>ee&&(ee=q)):Me>127?(L++,q=0,Q++,Q>ue&&(ue=Q)):(q=0,Q=0))}return p&&w>0&&(p=!1),g&&L>0&&(g=!1),p&&(ke||C+_+O>0)?ve.UTF8:g&&(ve.ASSUME_SHIFT_JIS||ee>=3||ue>=3)?ve.SHIFT_JIS:f&&g?ee===2&&B===2||xe*10>=c?ve.SHIFT_JIS:ve.ISO88591:f?ve.ISO88591:g?ve.SHIFT_JIS:p?ve.UTF8:ve.PLATFORM_DEFAULT_ENCODING}static format(i,...o){let c=-1;function f(p,w,C,_,O,L){if(p==="%%")return"%";if(o[++c]===void 0)return;p=_?parseInt(_.substr(1)):void 0;let B=O?parseInt(O.substr(1)):void 0,q;switch(L){case"s":q=o[c];break;case"c":q=o[c][0];break;case"f":q=parseFloat(o[c]).toFixed(p);break;case"p":q=parseFloat(o[c]).toPrecision(p);break;case"e":q=parseFloat(o[c]).toExponential(p);break;case"x":q=parseInt(o[c]).toString(B||16);break;case"d":q=parseFloat(parseInt(o[c],B||10).toPrecision(p)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(B);let Q=parseInt(C),ee=C&&C[0]+""=="0"?"0":" ";for(;q.length<Q;)q=w!==void 0?q+ee:ee+q;return q}let g=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(g,f)}static getBytes(i,o){return Ae.encode(i,o)}static getCharCode(i,o=0){return i.charCodeAt(o)}static getCharAt(i){return String.fromCharCode(i)}}ve.SHIFT_JIS=X.SJIS.getName(),ve.GB2312="GB2312",ve.ISO88591=X.ISO8859_1.getName(),ve.EUC_JP="EUC_JP",ve.UTF8=X.UTF8.getName(),ve.PLATFORM_DEFAULT_ENCODING=ve.UTF8,ve.ASSUME_SHIFT_JIS=!1;class ce{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=ve.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,o,c){for(let f=o;o<o+c;f++)this.append(i[f]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+1)}substring(i,o){return this.value.substring(i,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+o.length)}}class Fe{constructor(i,o,c,f){if(this.width=i,this.height=o,this.rowSize=c,this.bits=f,o==null&&(o=i),this.height=o,i<1||o<1)throw new A("Both dimensions must be greater than 0");c==null&&(c=Math.floor((i+31)/32)),this.rowSize=c,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const o=i.length,c=i[0].length,f=new Fe(c,o);for(let g=0;g<o;g++){const p=i[g];for(let w=0;w<c;w++)p[w]&&f.set(w,g)}return f}static parseFromString(i,o,c){if(i===null)throw new A("stringRepresentation cannot be null");const f=new Array(i.length);let g=0,p=0,w=-1,C=0,_=0;for(;_<i.length;)if(i.charAt(_)===`
`||i.charAt(_)==="\r"){if(g>p){if(w===-1)w=g-p;else if(g-p!==w)throw new A("row lengths do not match");p=g,C++}_++}else if(i.substring(_,_+o.length)===o)_+=o.length,f[g]=!0,g++;else if(i.substring(_,_+c.length)===c)_+=c.length,f[g]=!1,g++;else throw new A("illegal character encountered: "+i.substring(_));if(g>p){if(w===-1)w=g-p;else if(g-p!==w)throw new A("row lengths do not match");C++}const O=new Fe(w,C);for(let L=0;L<g;L++)f[L]&&O.set(Math.floor(L%w),Math.floor(L/w));return O}get(i,o){const c=o*this.rowSize+Math.floor(i/32);return(this.bits[c]>>>(i&31)&1)!==0}set(i,o){const c=o*this.rowSize+Math.floor(i/32);this.bits[c]|=1<<(i&31)&4294967295}unset(i,o){const c=o*this.rowSize+Math.floor(i/32);this.bits[c]&=~(1<<(i&31)&4294967295)}flip(i,o){const c=o*this.rowSize+Math.floor(i/32);this.bits[c]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new A("input matrix dimensions do not match");const o=new V(Math.floor(this.width/32)+1),c=this.rowSize,f=this.bits;for(let g=0,p=this.height;g<p;g++){const w=g*c,C=i.getRow(g,o).getBitArray();for(let _=0;_<c;_++)f[w+_]^=C[_]}}clear(){const i=this.bits,o=i.length;for(let c=0;c<o;c++)i[c]=0}setRegion(i,o,c,f){if(o<0||i<0)throw new A("Left and top must be nonnegative");if(f<1||c<1)throw new A("Height and width must be at least 1");const g=i+c,p=o+f;if(p>this.height||g>this.width)throw new A("The region must fit inside the matrix");const w=this.rowSize,C=this.bits;for(let _=o;_<p;_++){const O=_*w;for(let L=i;L<g;L++)C[O+Math.floor(L/32)]|=1<<(L&31)&4294967295}}getRow(i,o){o==null||o.getSize()<this.width?o=new V(this.width):o.clear();const c=this.rowSize,f=this.bits,g=i*c;for(let p=0;p<c;p++)o.setBulk(p*32,f[g+p]);return o}setRow(i,o){j.arraycopy(o.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),o=this.getHeight();let c=new V(i),f=new V(i);for(let g=0,p=Math.floor((o+1)/2);g<p;g++)c=this.getRow(g,c),f=this.getRow(o-1-g,f),c.reverse(),f.reverse(),this.setRow(g,f),this.setRow(o-1-g,c)}getEnclosingRectangle(){const i=this.width,o=this.height,c=this.rowSize,f=this.bits;let g=i,p=o,w=-1,C=-1;for(let _=0;_<o;_++)for(let O=0;O<c;O++){const L=f[_*c+O];if(L!==0){if(_<p&&(p=_),_>C&&(C=_),O*32<g){let B=0;for(;(L<<31-B&4294967295)===0;)B++;O*32+B<g&&(g=O*32+B)}if(O*32+31>w){let B=31;for(;!(L>>>B);)B--;O*32+B>w&&(w=O*32+B)}}}return w<g||C<p?null:Int32Array.from([g,p,w-g+1,C-p+1])}getTopLeftOnBit(){const i=this.rowSize,o=this.bits;let c=0;for(;c<o.length&&o[c]===0;)c++;if(c===o.length)return null;const f=c/i;let g=c%i*32;const p=o[c];let w=0;for(;(p<<31-w&4294967295)===0;)w++;return g+=w,Int32Array.from([g,f])}getBottomRightOnBit(){const i=this.rowSize,o=this.bits;let c=o.length-1;for(;c>=0&&o[c]===0;)c--;if(c<0)return null;const f=Math.floor(c/i);let g=Math.floor(c%i)*32;const p=o[c];let w=31;for(;!(p>>>w);)w--;return g+=w,Int32Array.from([g,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof Fe))return!1;const o=i;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&Y.equals(this.bits,o.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+Y.hashCode(this.bits),i}toString(i="X ",o="  ",c=`
`){return this.buildToString(i,o,c)}buildToString(i,o,c){let f=new ce;for(let g=0,p=this.height;g<p;g++){for(let w=0,C=this.width;w<C;w++)f.append(this.get(w,g)?i:o);f.append(c)}return f.toString()}clone(){return new Fe(this.width,this.height,this.rowSize,this.bits.slice())}}class se extends x{static getNotFoundInstance(){return new se}}se.kind="NotFoundException";class re extends M{constructor(i){super(i),this.luminances=re.EMPTY,this.buckets=new Int32Array(re.LUMINANCE_BUCKETS)}getBlackRow(i,o){const c=this.getLuminanceSource(),f=c.getWidth();o==null||o.getSize()<f?o=new V(f):o.clear(),this.initArrays(f);const g=c.getRow(i,this.luminances),p=this.buckets;for(let C=0;C<f;C++)p[(g[C]&255)>>re.LUMINANCE_SHIFT]++;const w=re.estimateBlackPoint(p);if(f<3)for(let C=0;C<f;C++)(g[C]&255)<w&&o.set(C);else{let C=g[0]&255,_=g[1]&255;for(let O=1;O<f-1;O++){const L=g[O+1]&255;(_*4-C-L)/2<w&&o.set(O),C=_,_=L}}return o}getBlackMatrix(){const i=this.getLuminanceSource(),o=i.getWidth(),c=i.getHeight(),f=new Fe(o,c);this.initArrays(o);const g=this.buckets;for(let C=1;C<5;C++){const _=Math.floor(c*C/5),O=i.getRow(_,this.luminances),L=Math.floor(o*4/5);for(let B=Math.floor(o/5);B<L;B++){const q=O[B]&255;g[q>>re.LUMINANCE_SHIFT]++}}const p=re.estimateBlackPoint(g),w=i.getMatrix();for(let C=0;C<c;C++){const _=C*o;for(let O=0;O<o;O++)(w[_+O]&255)<p&&f.set(O,C)}return f}createBinarizer(i){return new re(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const o=this.buckets;for(let c=0;c<re.LUMINANCE_BUCKETS;c++)o[c]=0}static estimateBlackPoint(i){const o=i.length;let c=0,f=0,g=0;for(let O=0;O<o;O++)i[O]>g&&(f=O,g=i[O]),i[O]>c&&(c=i[O]);let p=0,w=0;for(let O=0;O<o;O++){const L=O-f,B=i[O]*L*L;B>w&&(p=O,w=B)}if(f>p){const O=f;f=p,p=O}if(p-f<=o/16)throw new se;let C=p-1,_=-1;for(let O=p-1;O>f;O--){const L=O-f,B=L*L*(p-O)*(c-i[O]);B>_&&(C=O,_=B)}return C<<re.LUMINANCE_SHIFT}}re.LUMINANCE_BITS=5,re.LUMINANCE_SHIFT=8-re.LUMINANCE_BITS,re.LUMINANCE_BUCKETS=1<<re.LUMINANCE_BITS,re.EMPTY=Uint8ClampedArray.from([0]);class le extends re{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),o=i.getWidth(),c=i.getHeight();if(o>=le.MINIMUM_DIMENSION&&c>=le.MINIMUM_DIMENSION){const f=i.getMatrix();let g=o>>le.BLOCK_SIZE_POWER;(o&le.BLOCK_SIZE_MASK)!==0&&g++;let p=c>>le.BLOCK_SIZE_POWER;(c&le.BLOCK_SIZE_MASK)!==0&&p++;const w=le.calculateBlackPoints(f,g,p,o,c),C=new Fe(o,c);le.calculateThresholdForBlock(f,g,p,o,c,w,C),this.matrix=C}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new le(i)}static calculateThresholdForBlock(i,o,c,f,g,p,w){const C=g-le.BLOCK_SIZE,_=f-le.BLOCK_SIZE;for(let O=0;O<c;O++){let L=O<<le.BLOCK_SIZE_POWER;L>C&&(L=C);const B=le.cap(O,2,c-3);for(let q=0;q<o;q++){let Q=q<<le.BLOCK_SIZE_POWER;Q>_&&(Q=_);const ee=le.cap(q,2,o-3);let ue=0;for(let ke=-2;ke<=2;ke++){const Pe=p[B+ke];ue+=Pe[ee-2]+Pe[ee-1]+Pe[ee]+Pe[ee+1]+Pe[ee+2]}const xe=ue/25;le.thresholdBlock(i,Q,L,xe,f,w)}}}static cap(i,o,c){return i<o?o:i>c?c:i}static thresholdBlock(i,o,c,f,g,p){for(let w=0,C=c*g+o;w<le.BLOCK_SIZE;w++,C+=g)for(let _=0;_<le.BLOCK_SIZE;_++)(i[C+_]&255)<=f&&p.set(o+_,c+w)}static calculateBlackPoints(i,o,c,f,g){const p=g-le.BLOCK_SIZE,w=f-le.BLOCK_SIZE,C=new Array(c);for(let _=0;_<c;_++){C[_]=new Int32Array(o);let O=_<<le.BLOCK_SIZE_POWER;O>p&&(O=p);for(let L=0;L<o;L++){let B=L<<le.BLOCK_SIZE_POWER;B>w&&(B=w);let q=0,Q=255,ee=0;for(let xe=0,ke=O*f+B;xe<le.BLOCK_SIZE;xe++,ke+=f){for(let Pe=0;Pe<le.BLOCK_SIZE;Pe++){const Me=i[ke+Pe]&255;q+=Me,Me<Q&&(Q=Me),Me>ee&&(ee=Me)}if(ee-Q>le.MIN_DYNAMIC_RANGE)for(xe++,ke+=f;xe<le.BLOCK_SIZE;xe++,ke+=f)for(let Pe=0;Pe<le.BLOCK_SIZE;Pe++)q+=i[ke+Pe]&255}let ue=q>>le.BLOCK_SIZE_POWER*2;if(ee-Q<=le.MIN_DYNAMIC_RANGE&&(ue=Q/2,_>0&&L>0)){const xe=(C[_-1][L]+2*C[_][L-1]+C[_-1][L-1])/4;Q<xe&&(ue=xe)}C[_][L]=ue}}return C}}le.BLOCK_SIZE_POWER=3,le.BLOCK_SIZE=1<<le.BLOCK_SIZE_POWER,le.BLOCK_SIZE_MASK=le.BLOCK_SIZE-1,le.MINIMUM_DIMENSION=le.BLOCK_SIZE*5,le.MIN_DYNAMIC_RANGE=24;class De{constructor(i,o){this.width=i,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,o,c,f){throw new be("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new be("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new be("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let o=new ce;for(let c=0;c<this.height;c++){const f=this.getRow(c,i);for(let g=0;g<this.width;g++){const p=f[g]&255;let w;p<64?w="#":p<128?w="+":p<192?w=".":w=" ",o.append(w)}o.append(`
`)}return o.toString()}}class $e extends De{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,o){const c=this.delegate.getRow(i,o),f=this.getWidth();for(let g=0;g<f;g++)c[g]=255-(c[g]&255);return c}getMatrix(){const i=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(o);for(let f=0;f<o;f++)c[f]=255-(i[f]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(i,o,c,f){return new $e(this.delegate.crop(i,o,c,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new $e(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new $e(this.delegate.rotateCounterClockwise45())}}class H extends De{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=H.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const o=i.getContext("2d").getImageData(0,0,i.width,i.height);return H.toGrayscaleBuffer(o.data,i.width,i.height)}static toGrayscaleBuffer(i,o,c){const f=new Uint8ClampedArray(o*c);for(let g=0,p=0,w=i.length;g<w;g+=4,p++){let C;if(i[g+3]===0)C=255;else{const O=i[g],L=i[g+1],B=i[g+2];C=306*O+601*L+117*B+512>>10}f[p]=C}return f}getRow(i,o){if(i<0||i>=this.getHeight())throw new A("Requested row is outside the image: "+i);const c=this.getWidth(),f=i*c;return o===null?o=this.buffer.slice(f,f+c):(o.length<c&&(o=new Uint8ClampedArray(c)),o.set(this.buffer.slice(f,f+c))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,o,c,f){return super.crop(i,o,c,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const o=this.getTempCanvasElement(),c=o.getContext("2d"),f=i*H.DEGREE_TO_RADIANS,g=this.canvas.width,p=this.canvas.height,w=Math.ceil(Math.abs(Math.cos(f))*g+Math.abs(Math.sin(f))*p),C=Math.ceil(Math.abs(Math.sin(f))*g+Math.abs(Math.cos(f))*p);return o.width=w,o.height=C,c.translate(w/2,C/2),c.rotate(f),c.drawImage(this.canvas,g/-2,p/-2),this.buffer=H.makeBufferFromCanvasImageData(o),this}invert(){return new $e(this)}}H.DEGREE_TO_RADIANS=Math.PI/180;class te{constructor(i,o,c){this.deviceId=i,this.label=o,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ge=(globalThis||qf||self||window||void 0)&&(globalThis||qf||self||window||void 0).__awaiter||function(k,i,o,c){function f(g){return g instanceof o?g:new o(function(p){p(g)})}return new(o||(o=Promise))(function(g,p){function w(O){try{_(c.next(O))}catch(L){p(L)}}function C(O){try{_(c.throw(O))}catch(L){p(L)}}function _(O){O.done?g(O.value):f(O.value).then(w,C)}_((c=c.apply(k,i||[])).next())})};class pe{constructor(i,o=500,c){this.reader=i,this.timeBetweenScansMillis=o,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return ge(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const c of i){const f=c.kind==="video"?"videoinput":c.kind;if(f!=="videoinput")continue;const g=c.deviceId||c.id,p=c.label||`Video device ${o.length+1}`,w=c.groupId,C={deviceId:g,label:p,kind:f,groupId:w};o.push(C)}return o})}getVideoInputDevices(){return ge(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new te(o.deviceId,o.label))})}findDeviceById(i){return ge(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(c=>c.deviceId===i):null})}decodeFromInputVideoDevice(i,o){return ge(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,o)})}decodeOnceFromVideoDevice(i,o){return ge(this,void 0,void 0,function*(){this.reset();let c;i?c={deviceId:{exact:i}}:c={facingMode:"environment"};const f={video:c};return yield this.decodeOnceFromConstraints(f,o)})}decodeOnceFromConstraints(i,o){return ge(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(c,o)})}decodeOnceFromStream(i,o){return ge(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(i,o);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(i,o,c){return ge(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,o,c)})}decodeFromVideoDevice(i,o,c){return ge(this,void 0,void 0,function*(){let f;i?f={deviceId:{exact:i}}:f={facingMode:"environment"};const g={video:f};return yield this.decodeFromConstraints(g,o,c)})}decodeFromConstraints(i,o,c){return ge(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(f,o,c)})}decodeFromStream(i,o,c){return ge(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(i,o);return yield this.decodeContinuously(f,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,o){return ge(this,void 0,void 0,function*(){const c=this.prepareVideoElement(o);return this.addVideoSource(c,i),this.videoElement=c,this.stream=i,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(i){return new Promise((o,c)=>this.playVideoOnLoad(i,()=>o()))}playVideoOnLoad(i,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",o),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return ge(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,o){const c=document.getElementById(i);if(!c)throw new S(`element with id '${i}' not found`);if(c.nodeName.toLowerCase()!==o.toLowerCase())throw new S(`element with id '${i}' must be an ${o} element`);return c}decodeFromImage(i,o){if(!i&&!o)throw new S("either imageElement with a src set or an url must be provided");return o&&!i?this.decodeFromImageUrl(o):this.decodeFromImageElement(i)}decodeFromVideo(i,o){if(!i&&!o)throw new S("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,o,c){if(i===void 0&&o===void 0)throw new S("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrlContinuously(o,c):this.decodeFromVideoElementContinuously(i,c)}decodeFromImageElement(i){if(!i)throw new S("An image element must be provided.");this.reset();const o=this.prepareImageElement(i);this.imageElement=o;let c;return this.isImageLoaded(o)?c=this.decodeOnce(o,!1,!0):c=this._decodeOnLoadImage(o),c}decodeFromVideoElement(i){const o=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(i,o){const c=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(c,o)}_decodeFromVideoElementSetup(i){if(!i)throw new S("A video element must be provided.");this.reset();const o=this.prepareVideoElement(i);return this.videoElement=o,o}decodeFromImageUrl(i){if(!i)throw new S("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const c=this._decodeOnLoadImage(o);return o.src=i,c}decodeFromVideoUrl(i){if(!i)throw new S("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),c=this.decodeFromVideoElement(o);return o.src=i,c}decodeFromVideoUrlContinuously(i,o){if(!i)throw new S("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(c,o);return c.src=i,f}_decodeOnLoadImage(i){return new Promise((o,c)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(o,c),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return ge(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,o){return ge(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,o)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let o;return typeof i>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(o=i),o}prepareVideoElement(i){let o;return!i&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(o=i),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(i,o=!0,c=!0){this._stopAsyncDecode=!1;const f=(g,p)=>{if(this._stopAsyncDecode){p(new se("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const w=this.decode(i);g(w)}catch(w){const C=o&&w instanceof se,O=(w instanceof I||w instanceof W)&&c;if(C||O)return setTimeout(f,this._timeBetweenDecodingAttempts,g,p);p(w)}};return new Promise((g,p)=>f(g,p))}decodeContinuously(i,o){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(i);o(f,null),setTimeout(c,this.timeBetweenScansMillis)}catch(f){o(null,f);const g=f instanceof I||f instanceof W,p=f instanceof se;(g||p)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(i){const o=this.createBinaryBitmap(i);return this.decodeBitmap(o)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,o,c){o||(o={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(i,o,c=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const o=this.getCaptureCanvas(i),c=new H(o),f=new le(c);return new N(f)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const o=this.createCaptureCanvas(i);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let c,f;return typeof i<"u"&&(i instanceof HTMLVideoElement?(c=i.videoWidth,f=i.videoHeight):i instanceof HTMLImageElement&&(c=i.naturalWidth||i.width,f=i.naturalHeight||i.height)),o.style.width=c+"px",o.style.height=f+"px",o.width=c,o.height=f,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,o){try{i.srcObject=o}catch{i.src=URL.createObjectURL(o)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class Be{constructor(i,o,c=o==null?0:8*o.length,f,g,p=j.currentTimeMillis()){this.text=i,this.rawBytes=o,this.numBits=c,this.resultPoints=f,this.format=g,this.timestamp=p,this.text=i,this.rawBytes=o,c==null?this.numBits=o==null?0:8*o.length:this.numBits=c,this.resultPoints=f,this.format=g,this.resultMetadata=null,p==null?this.timestamp=j.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,o)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const o=this.resultPoints;if(o===null)this.resultPoints=i;else if(i!==null&&i.length>0){const c=new Array(o.length+i.length);j.arraycopy(o,0,c,0,o.length),j.arraycopy(i,0,c,o.length,i.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ze;(function(k){k[k.AZTEC=0]="AZTEC",k[k.CODABAR=1]="CODABAR",k[k.CODE_39=2]="CODE_39",k[k.CODE_93=3]="CODE_93",k[k.CODE_128=4]="CODE_128",k[k.DATA_MATRIX=5]="DATA_MATRIX",k[k.EAN_8=6]="EAN_8",k[k.EAN_13=7]="EAN_13",k[k.ITF=8]="ITF",k[k.MAXICODE=9]="MAXICODE",k[k.PDF_417=10]="PDF_417",k[k.QR_CODE=11]="QR_CODE",k[k.RSS_14=12]="RSS_14",k[k.RSS_EXPANDED=13]="RSS_EXPANDED",k[k.UPC_A=14]="UPC_A",k[k.UPC_E=15]="UPC_E",k[k.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ze||(ze={}));var Ee=ze,At;(function(k){k[k.OTHER=0]="OTHER",k[k.ORIENTATION=1]="ORIENTATION",k[k.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",k[k.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",k[k.ISSUE_NUMBER=4]="ISSUE_NUMBER",k[k.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",k[k.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",k[k.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",k[k.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",k[k.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",k[k.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(At||(At={}));var Ze=At;class pt{constructor(i,o,c,f,g=-1,p=-1){this.rawBytes=i,this.text=o,this.byteSegments=c,this.ecLevel=f,this.structuredAppendSequenceNumber=g,this.structuredAppendParity=p,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class wn{exp(i){return this.expTable[i]}log(i){if(i===0)throw new A;return this.logTable[i]}static addOrSubtract(i,o){return i^o}}class Re{constructor(i,o){if(o.length===0)throw new A;this.field=i;const c=o.length;if(c>1&&o[0]===0){let f=1;for(;f<c&&o[f]===0;)f++;f===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-f),j.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const o=this.coefficients;let c;if(i===1){c=0;for(let p=0,w=o.length;p!==w;p++){const C=o[p];c=wn.addOrSubtract(c,C)}return c}c=o[0];const f=o.length,g=this.field;for(let p=1;p<f;p++)c=wn.addOrSubtract(g.multiply(i,c),o[p]);return c}addOrSubtract(i){if(!this.field.equals(i.field))throw new A("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,c=i.coefficients;if(o.length>c.length){const p=o;o=c,c=p}let f=new Int32Array(c.length);const g=c.length-o.length;j.arraycopy(c,0,f,0,g);for(let p=g;p<c.length;p++)f[p]=wn.addOrSubtract(o[p-g],c[p]);return new Re(this.field,f)}multiply(i){if(!this.field.equals(i.field))throw new A("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const o=this.coefficients,c=o.length,f=i.coefficients,g=f.length,p=new Int32Array(c+g-1),w=this.field;for(let C=0;C<c;C++){const _=o[C];for(let O=0;O<g;O++)p[C+O]=wn.addOrSubtract(p[C+O],w.multiply(_,f[O]))}return new Re(w,p)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const o=this.coefficients.length,c=this.field,f=new Int32Array(o),g=this.coefficients;for(let p=0;p<o;p++)f[p]=c.multiply(g[p],i);return new Re(c,f)}multiplyByMonomial(i,o){if(i<0)throw new A;if(o===0)return this.field.getZero();const c=this.coefficients,f=c.length,g=new Int32Array(f+i),p=this.field;for(let w=0;w<f;w++)g[w]=p.multiply(c[w],o);return new Re(p,g)}divide(i){if(!this.field.equals(i.field))throw new A("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new A("Divide by 0");const o=this.field;let c=o.getZero(),f=this;const g=i.getCoefficient(i.getDegree()),p=o.inverse(g);for(;f.getDegree()>=i.getDegree()&&!f.isZero();){const w=f.getDegree()-i.getDegree(),C=o.multiply(f.getCoefficient(f.getDegree()),p),_=i.multiplyByMonomial(w,C),O=o.buildMonomial(w,C);c=c.addOrSubtract(O),f=f.addOrSubtract(_)}return[c,f]}toString(){let i="";for(let o=this.getDegree();o>=0;o--){let c=this.getCoefficient(o);if(c!==0){if(c<0?(i+=" - ",c=-c):i.length>0&&(i+=" + "),o===0||c!==1){const f=this.field.log(c);f===0?i+="1":f===1?i+="a":(i+="a^",i+=f)}o!==0&&(o===1?i+="x":(i+="x^",i+=o))}}return i}}class ie extends x{}ie.kind="ArithmeticException";class Se extends wn{constructor(i,o,c){super(),this.primitive=i,this.size=o,this.generatorBase=c;const f=new Int32Array(o);let g=1;for(let w=0;w<o;w++)f[w]=g,g*=2,g>=o&&(g^=i,g&=o-1);this.expTable=f;const p=new Int32Array(o);for(let w=0;w<o-1;w++)p[f[w]]=w;this.logTable=p,this.zero=new Re(this,Int32Array.from([0])),this.one=new Re(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new A;if(o===0)return this.zero;const c=new Int32Array(i+1);return c[0]=o,new Re(this,c)}inverse(i){if(i===0)throw new ie;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+P.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}Se.AZTEC_DATA_12=new Se(4201,4096,1),Se.AZTEC_DATA_10=new Se(1033,1024,1),Se.AZTEC_DATA_6=new Se(67,64,1),Se.AZTEC_PARAM=new Se(19,16,1),Se.QR_CODE_FIELD_256=new Se(285,256,0),Se.DATA_MATRIX_FIELD_256=new Se(301,256,1),Se.AZTEC_DATA_8=Se.DATA_MATRIX_FIELD_256,Se.MAXICODE_FIELD_64=Se.AZTEC_DATA_6;class Ie extends x{}Ie.kind="ReedSolomonException";class Oe extends x{}Oe.kind="IllegalStateException";class Le{constructor(i){this.field=i}decode(i,o){const c=this.field,f=new Re(c,i),g=new Int32Array(o);let p=!0;for(let q=0;q<o;q++){const Q=f.evaluateAt(c.exp(q+c.getGeneratorBase()));g[g.length-1-q]=Q,Q!==0&&(p=!1)}if(p)return;const w=new Re(c,g),C=this.runEuclideanAlgorithm(c.buildMonomial(o,1),w,o),_=C[0],O=C[1],L=this.findErrorLocations(_),B=this.findErrorMagnitudes(O,L);for(let q=0;q<L.length;q++){const Q=i.length-1-c.log(L[q]);if(Q<0)throw new Ie("Bad error location");i[Q]=Se.addOrSubtract(i[Q],B[q])}}runEuclideanAlgorithm(i,o,c){if(i.getDegree()<o.getDegree()){const q=i;i=o,o=q}const f=this.field;let g=i,p=o,w=f.getZero(),C=f.getOne();for(;p.getDegree()>=(c/2|0);){let q=g,Q=w;if(g=p,w=C,g.isZero())throw new Ie("r_{i-1} was zero");p=q;let ee=f.getZero();const ue=g.getCoefficient(g.getDegree()),xe=f.inverse(ue);for(;p.getDegree()>=g.getDegree()&&!p.isZero();){const ke=p.getDegree()-g.getDegree(),Pe=f.multiply(p.getCoefficient(p.getDegree()),xe);ee=ee.addOrSubtract(f.buildMonomial(ke,Pe)),p=p.addOrSubtract(g.multiplyByMonomial(ke,Pe))}if(C=ee.multiply(w).addOrSubtract(Q),p.getDegree()>=g.getDegree())throw new Oe("Division algorithm failed to reduce polynomial?")}const _=C.getCoefficient(0);if(_===0)throw new Ie("sigmaTilde(0) was zero");const O=f.inverse(_),L=C.multiplyScalar(O),B=p.multiplyScalar(O);return[L,B]}findErrorLocations(i){const o=i.getDegree();if(o===1)return Int32Array.from([i.getCoefficient(1)]);const c=new Int32Array(o);let f=0;const g=this.field;for(let p=1;p<g.getSize()&&f<o;p++)i.evaluateAt(p)===0&&(c[f]=g.inverse(p),f++);if(f!==o)throw new Ie("Error locator degree does not match number of roots");return c}findErrorMagnitudes(i,o){const c=o.length,f=new Int32Array(c),g=this.field;for(let p=0;p<c;p++){const w=g.inverse(o[p]);let C=1;for(let _=0;_<c;_++)if(p!==_){const O=g.multiply(o[_],w),L=(O&1)===0?O|1:O&-2;C=g.multiply(C,L)}f[p]=g.multiply(i.evaluateAt(w),g.inverse(C)),g.getGeneratorBase()!==0&&(f[p]=g.multiply(f[p],w))}return f}}var We;(function(k){k[k.UPPER=0]="UPPER",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.DIGIT=3]="DIGIT",k[k.PUNCT=4]="PUNCT",k[k.BINARY=5]="BINARY"})(We||(We={}));class st{decode(i){this.ddata=i;let o=i.getBits(),c=this.extractBits(o),f=this.correctBits(c),g=st.convertBoolArrayToByteArray(f),p=st.getEncodedData(f),w=new pt(g,p,null,null);return w.setNumBits(f.length),w}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let o=i.length,c=We.UPPER,f=We.UPPER,g="",p=0;for(;p<o;)if(f===We.BINARY){if(o-p<5)break;let w=st.readCode(i,p,5);if(p+=5,w===0){if(o-p<11)break;w=st.readCode(i,p,11)+31,p+=11}for(let C=0;C<w;C++){if(o-p<8){p=o;break}const _=st.readCode(i,p,8);g+=ve.castAsNonUtf8Char(_),p+=8}f=c}else{let w=f===We.DIGIT?4:5;if(o-p<w)break;let C=st.readCode(i,p,w);p+=w;let _=st.getCharacter(f,C);_.startsWith("CTRL_")?(c=f,f=st.getTable(_.charAt(5)),_.charAt(6)==="L"&&(c=f)):(g+=_,f=c)}return g}static getTable(i){switch(i){case"L":return We.LOWER;case"P":return We.PUNCT;case"M":return We.MIXED;case"D":return We.DIGIT;case"B":return We.BINARY;case"U":default:return We.UPPER}}static getCharacter(i,o){switch(i){case We.UPPER:return st.UPPER_TABLE[o];case We.LOWER:return st.LOWER_TABLE[o];case We.MIXED:return st.MIXED_TABLE[o];case We.PUNCT:return st.PUNCT_TABLE[o];case We.DIGIT:return st.DIGIT_TABLE[o];default:throw new Oe("Bad table")}}correctBits(i){let o,c;this.ddata.getNbLayers()<=2?(c=6,o=Se.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,o=Se.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,o=Se.AZTEC_DATA_10):(c=12,o=Se.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),g=i.length/c;if(g<f)throw new W;let p=i.length%c,w=new Int32Array(g);for(let B=0;B<g;B++,p+=c)w[B]=st.readCode(i,p,c);try{new Le(o).decode(w,g-f)}catch(B){throw new W(B)}let C=(1<<c)-1,_=0;for(let B=0;B<f;B++){let q=w[B];if(q===0||q===C)throw new W;(q===1||q===C-1)&&_++}let O=new Array(f*c-_),L=0;for(let B=0;B<f;B++){let q=w[B];if(q===1||q===C-1)O.fill(q>1,L,L+c-1),L+=c-1;else for(let Q=c-1;Q>=0;--Q)O[L++]=(q&1<<Q)!==0}return O}extractBits(i){let o=this.ddata.isCompact(),c=this.ddata.getNbLayers(),f=(o?11:14)+c*4,g=new Int32Array(f),p=new Array(this.totalBitsInLayer(c,o));if(o)for(let w=0;w<g.length;w++)g[w]=w;else{let w=f+1+2*P.truncDivision(P.truncDivision(f,2)-1,15),C=f/2,_=P.truncDivision(w,2);for(let O=0;O<C;O++){let L=O+P.truncDivision(O,15);g[C-O-1]=_-L-1,g[C+O]=_+L+1}}for(let w=0,C=0;w<c;w++){let _=(c-w)*4+(o?9:12),O=w*2,L=f-1-O;for(let B=0;B<_;B++){let q=B*2;for(let Q=0;Q<2;Q++)p[C+q+Q]=i.get(g[O+Q],g[O+B]),p[C+2*_+q+Q]=i.get(g[O+B],g[L-Q]),p[C+4*_+q+Q]=i.get(g[L-Q],g[L-B]),p[C+6*_+q+Q]=i.get(g[L-B],g[O+Q])}C+=_*8}return p}static readCode(i,o,c){let f=0;for(let g=o;g<o+c;g++)f<<=1,i[g]&&(f|=1);return f}static readByte(i,o){let c=i.length-o;return c>=8?st.readCode(i,o,8):st.readCode(i,o,c)<<8-c}static convertBoolArrayToByteArray(i){let o=new Uint8Array((i.length+7)/8);for(let c=0;c<o.length;c++)o[c]=st.readByte(i,8*c);return o}totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}st.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],st.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],st.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],st.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],st.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ge{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,o,c,f){const g=i-c,p=o-f;return Math.sqrt(g*g+p*p)}static sum(i){let o=0;for(let c=0,f=i.length;c!==f;c++){const g=i[c];o+=g}return o}}class vt{static floatToIntBits(i){return i}}vt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class He{constructor(i,o){this.x=i,this.y=o}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof He){const o=i;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*vt.floatToIntBits(this.x)+vt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const o=this.distance(i[0],i[1]),c=this.distance(i[1],i[2]),f=this.distance(i[0],i[2]);let g,p,w;if(c>=o&&c>=f?(p=i[0],g=i[1],w=i[2]):f>=c&&f>=o?(p=i[1],g=i[0],w=i[2]):(p=i[2],g=i[0],w=i[1]),this.crossProductZ(g,p,w)<0){const C=g;g=w,w=C}i[0]=g,i[1]=p,i[2]=w}static distance(i,o){return Ge.distance(i.x,i.y,o.x,o.y)}static crossProductZ(i,o,c){const f=o.x,g=o.y;return(c.x-f)*(i.y-g)-(c.y-g)*(i.x-f)}}class ui{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Yi extends ui{constructor(i,o,c,f,g){super(i,o),this.compact=c,this.nbDatablocks=f,this.nbLayers=g}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ls{constructor(i,o,c,f){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),o==null&&(o=Ls.INIT_SIZE),c==null&&(c=i.getWidth()/2|0),f==null&&(f=i.getHeight()/2|0);const g=o/2|0;if(this.leftInit=c-g,this.rightInit=c+g,this.upInit=f-g,this.downInit=f+g,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new se}detect(){let i=this.leftInit,o=this.rightInit,c=this.upInit,f=this.downInit,g=!1,p=!0,w=!1,C=!1,_=!1,O=!1,L=!1;const B=this.width,q=this.height;for(;p;){p=!1;let Q=!0;for(;(Q||!C)&&o<B;)Q=this.containsBlackPoint(c,f,o,!1),Q?(o++,p=!0,C=!0):C||o++;if(o>=B){g=!0;break}let ee=!0;for(;(ee||!_)&&f<q;)ee=this.containsBlackPoint(i,o,f,!0),ee?(f++,p=!0,_=!0):_||f++;if(f>=q){g=!0;break}let ue=!0;for(;(ue||!O)&&i>=0;)ue=this.containsBlackPoint(c,f,i,!1),ue?(i--,p=!0,O=!0):O||i--;if(i<0){g=!0;break}let xe=!0;for(;(xe||!L)&&c>=0;)xe=this.containsBlackPoint(i,o,c,!0),xe?(c--,p=!0,L=!0):L||c--;if(c<0){g=!0;break}p&&(w=!0)}if(!g&&w){const Q=o-i;let ee=null;for(let Pe=1;ee===null&&Pe<Q;Pe++)ee=this.getBlackPointOnSegment(i,f-Pe,i+Pe,f);if(ee==null)throw new se;let ue=null;for(let Pe=1;ue===null&&Pe<Q;Pe++)ue=this.getBlackPointOnSegment(i,c+Pe,i+Pe,c);if(ue==null)throw new se;let xe=null;for(let Pe=1;xe===null&&Pe<Q;Pe++)xe=this.getBlackPointOnSegment(o,c+Pe,o-Pe,c);if(xe==null)throw new se;let ke=null;for(let Pe=1;ke===null&&Pe<Q;Pe++)ke=this.getBlackPointOnSegment(o,f-Pe,o-Pe,f);if(ke==null)throw new se;return this.centerEdges(ke,ee,xe,ue)}else throw new se}getBlackPointOnSegment(i,o,c,f){const g=Ge.round(Ge.distance(i,o,c,f)),p=(c-i)/g,w=(f-o)/g,C=this.image;for(let _=0;_<g;_++){const O=Ge.round(i+_*p),L=Ge.round(o+_*w);if(C.get(O,L))return new He(O,L)}return null}centerEdges(i,o,c,f){const g=i.getX(),p=i.getY(),w=o.getX(),C=o.getY(),_=c.getX(),O=c.getY(),L=f.getX(),B=f.getY(),q=Ls.CORR;return g<this.width/2?[new He(L-q,B+q),new He(w+q,C+q),new He(_-q,O-q),new He(g+q,p-q)]:[new He(L+q,B+q),new He(w+q,C-q),new He(_-q,O+q),new He(g-q,p-q)]}containsBlackPoint(i,o,c,f){const g=this.image;if(f){for(let p=i;p<=o;p++)if(g.get(p,c))return!0}else for(let p=i;p<=o;p++)if(g.get(c,p))return!0;return!1}}Ls.INIT_SIZE=10,Ls.CORR=1;class ia{static checkAndNudgePoints(i,o){const c=i.getWidth(),f=i.getHeight();let g=!0;for(let p=0;p<o.length&&g;p+=2){const w=Math.floor(o[p]),C=Math.floor(o[p+1]);if(w<-1||w>c||C<-1||C>f)throw new se;g=!1,w===-1?(o[p]=0,g=!0):w===c&&(o[p]=c-1,g=!0),C===-1?(o[p+1]=0,g=!0):C===f&&(o[p+1]=f-1,g=!0)}g=!0;for(let p=o.length-2;p>=0&&g;p-=2){const w=Math.floor(o[p]),C=Math.floor(o[p+1]);if(w<-1||w>c||C<-1||C>f)throw new se;g=!1,w===-1?(o[p]=0,g=!0):w===c&&(o[p]=c-1,g=!0),C===-1?(o[p+1]=0,g=!0):C===f&&(o[p+1]=f-1,g=!0)}}}class Bn{constructor(i,o,c,f,g,p,w,C,_){this.a11=i,this.a21=o,this.a31=c,this.a12=f,this.a22=g,this.a32=p,this.a13=w,this.a23=C,this.a33=_}static quadrilateralToQuadrilateral(i,o,c,f,g,p,w,C,_,O,L,B,q,Q,ee,ue){const xe=Bn.quadrilateralToSquare(i,o,c,f,g,p,w,C);return Bn.squareToQuadrilateral(_,O,L,B,q,Q,ee,ue).times(xe)}transformPoints(i){const o=i.length,c=this.a11,f=this.a12,g=this.a13,p=this.a21,w=this.a22,C=this.a23,_=this.a31,O=this.a32,L=this.a33;for(let B=0;B<o;B+=2){const q=i[B],Q=i[B+1],ee=g*q+C*Q+L;i[B]=(c*q+p*Q+_)/ee,i[B+1]=(f*q+w*Q+O)/ee}}transformPointsWithValues(i,o){const c=this.a11,f=this.a12,g=this.a13,p=this.a21,w=this.a22,C=this.a23,_=this.a31,O=this.a32,L=this.a33,B=i.length;for(let q=0;q<B;q++){const Q=i[q],ee=o[q],ue=g*Q+C*ee+L;i[q]=(c*Q+p*ee+_)/ue,o[q]=(f*Q+w*ee+O)/ue}}static squareToQuadrilateral(i,o,c,f,g,p,w,C){const _=i-c+g-w,O=o-f+p-C;if(_===0&&O===0)return new Bn(c-i,g-c,i,f-o,p-f,o,0,0,1);{const L=c-g,B=w-g,q=f-p,Q=C-p,ee=L*Q-B*q,ue=(_*Q-B*O)/ee,xe=(L*O-_*q)/ee;return new Bn(c-i+ue*c,w-i+xe*w,i,f-o+ue*f,C-o+xe*C,o,ue,xe,1)}}static quadrilateralToSquare(i,o,c,f,g,p,w,C){return Bn.squareToQuadrilateral(i,o,c,f,g,p,w,C).buildAdjoint()}buildAdjoint(){return new Bn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new Bn(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class Ue extends ia{sampleGrid(i,o,c,f,g,p,w,C,_,O,L,B,q,Q,ee,ue,xe,ke,Pe){const Me=Bn.quadrilateralToQuadrilateral(f,g,p,w,C,_,O,L,B,q,Q,ee,ue,xe,ke,Pe);return this.sampleGridWithTransform(i,o,c,Me)}sampleGridWithTransform(i,o,c,f){if(o<=0||c<=0)throw new se;const g=new Fe(o,c),p=new Float32Array(2*o);for(let w=0;w<c;w++){const C=p.length,_=w+.5;for(let O=0;O<C;O+=2)p[O]=O/2+.5,p[O+1]=_;f.transformPoints(p),ia.checkAndNudgePoints(i,p);try{for(let O=0;O<C;O+=2)i.get(Math.floor(p[O]),Math.floor(p[O+1]))&&g.set(O/2,w)}catch{throw new se}}return g}}class at{static setGridSampler(i){at.gridSampler=i}static getInstance(){return at.gridSampler}}at.gridSampler=new Ue;class tt{constructor(i,o){this.x=i,this.y=o}toResultPoint(){return new He(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ut{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let o=this.getMatrixCenter(),c=this.getBullsEyeCorners(o);if(i){let p=c[0];c[0]=c[2],c[2]=p}this.extractParameters(c);let f=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),g=this.getMatrixCornerPoints(c);return new Yi(f,g,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new se;let o=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(i[0],i[1],o),this.sampleLine(i[1],i[2],o),this.sampleLine(i[2],i[3],o),this.sampleLine(i[3],i[0],o)]);this.shift=this.getRotation(c,o);let f=0;for(let p=0;p<4;p++){let w=c[(this.shift+p)%4];this.compact?(f<<=7,f+=w>>1&127):(f<<=10,f+=(w>>2&992)+(w>>1&31))}let g=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(g>>6)+1,this.nbDataBlocks=(g&63)+1):(this.nbLayers=(g>>11)+1,this.nbDataBlocks=(g&2047)+1)}getRotation(i,o){let c=0;i.forEach((f,g,p)=>{let w=(f>>o-2<<1)+(f&1);c=(c<<3)+w}),c=((c&1)<<11)+(c>>1);for(let f=0;f<4;f++)if(P.bitCount(c^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new se}getCorrectedParameterData(i,o){let c,f;o?(c=7,f=2):(c=10,f=4);let g=c-f,p=new Int32Array(c);for(let C=c-1;C>=0;--C)p[C]=i&15,i>>=4;try{new Le(Se.AZTEC_PARAM).decode(p,g)}catch{throw new se}let w=0;for(let C=0;C<f;C++)w=(w<<4)+p[C];return w}getBullsEyeCorners(i){let o=i,c=i,f=i,g=i,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let L=this.getFirstDifferent(o,p,1,-1),B=this.getFirstDifferent(c,p,1,1),q=this.getFirstDifferent(f,p,-1,1),Q=this.getFirstDifferent(g,p,-1,-1);if(this.nbCenterLayers>2){let ee=this.distancePoint(Q,L)*this.nbCenterLayers/(this.distancePoint(g,o)*(this.nbCenterLayers+2));if(ee<.75||ee>1.25||!this.isWhiteOrBlackRectangle(L,B,q,Q))break}o=L,c=B,f=q,g=Q,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new se;this.compact=this.nbCenterLayers===5;let w=new He(o.getX()+.5,o.getY()-.5),C=new He(c.getX()+.5,c.getY()+.5),_=new He(f.getX()-.5,f.getY()+.5),O=new He(g.getX()-.5,g.getY()-.5);return this.expandSquare([w,C,_,O],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,o,c,f;try{let w=new Ls(this.image).detect();i=w[0],o=w[1],c=w[2],f=w[3]}catch{let C=this.image.getWidth()/2,_=this.image.getHeight()/2;i=this.getFirstDifferent(new tt(C+7,_-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new tt(C+7,_+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new tt(C-7,_+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new tt(C-7,_-7),!1,-1,-1).toResultPoint()}let g=Ge.round((i.getX()+f.getX()+o.getX()+c.getX())/4),p=Ge.round((i.getY()+f.getY()+o.getY()+c.getY())/4);try{let w=new Ls(this.image,15,g,p).detect();i=w[0],o=w[1],c=w[2],f=w[3]}catch{i=this.getFirstDifferent(new tt(g+7,p-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new tt(g+7,p+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new tt(g-7,p+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new tt(g-7,p-7),!1,-1,-1).toResultPoint()}return g=Ge.round((i.getX()+f.getX()+o.getX()+c.getX())/4),p=Ge.round((i.getY()+f.getY()+o.getY()+c.getY())/4),new tt(g,p)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,o,c,f,g){let p=at.getInstance(),w=this.getDimension(),C=w/2-this.nbCenterLayers,_=w/2+this.nbCenterLayers;return p.sampleGrid(i,w,w,C,C,_,C,_,_,C,_,o.getX(),o.getY(),c.getX(),c.getY(),f.getX(),f.getY(),g.getX(),g.getY())}sampleLine(i,o,c){let f=0,g=this.distanceResultPoint(i,o),p=g/c,w=i.getX(),C=i.getY(),_=p*(o.getX()-i.getX())/g,O=p*(o.getY()-i.getY())/g;for(let L=0;L<c;L++)this.image.get(Ge.round(w+L*_),Ge.round(C+L*O))&&(f|=1<<c-L-1);return f}isWhiteOrBlackRectangle(i,o,c,f){let g=3;i=new tt(i.getX()-g,i.getY()+g),o=new tt(o.getX()-g,o.getY()-g),c=new tt(c.getX()+g,c.getY()-g),f=new tt(f.getX()+g,f.getY()+g);let p=this.getColor(f,i);if(p===0)return!1;let w=this.getColor(i,o);return w!==p||(w=this.getColor(o,c),w!==p)?!1:(w=this.getColor(c,f),w===p)}getColor(i,o){let c=this.distancePoint(i,o),f=(o.getX()-i.getX())/c,g=(o.getY()-i.getY())/c,p=0,w=i.getX(),C=i.getY(),_=this.image.get(i.getX(),i.getY()),O=Math.ceil(c);for(let B=0;B<O;B++)w+=f,C+=g,this.image.get(Ge.round(w),Ge.round(C))!==_&&p++;let L=p/c;return L>.1&&L<.9?0:L<=.1===_?1:-1}getFirstDifferent(i,o,c,f){let g=i.getX()+c,p=i.getY()+f;for(;this.isValid(g,p)&&this.image.get(g,p)===o;)g+=c,p+=f;for(g-=c,p-=f;this.isValid(g,p)&&this.image.get(g,p)===o;)g+=c;for(g-=c;this.isValid(g,p)&&this.image.get(g,p)===o;)p+=f;return p-=f,new tt(g,p)}expandSquare(i,o,c){let f=c/(2*o),g=i[0].getX()-i[2].getX(),p=i[0].getY()-i[2].getY(),w=(i[0].getX()+i[2].getX())/2,C=(i[0].getY()+i[2].getY())/2,_=new He(w+f*g,C+f*p),O=new He(w-f*g,C-f*p);g=i[1].getX()-i[3].getX(),p=i[1].getY()-i[3].getY(),w=(i[1].getX()+i[3].getX())/2,C=(i[1].getY()+i[3].getY())/2;let L=new He(w+f*g,C+f*p),B=new He(w-f*g,C-f*p);return[_,L,O,B]}isValid(i,o){return i>=0&&i<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(i){let o=Ge.round(i.getX()),c=Ge.round(i.getY());return this.isValid(o,c)}distancePoint(i,o){return Ge.distance(i.getX(),i.getY(),o.getX(),o.getY())}distanceResultPoint(i,o){return Ge.distance(i.getX(),i.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(P.truncDivision(this.nbLayers-4,8)+1)+15}}class cn{decode(i,o=null){let c=null,f=new Ut(i.getBlackMatrix()),g=null,p=null;try{let O=f.detectMirror(!1);g=O.getPoints(),this.reportFoundResultPoints(o,g),p=new st().decode(O)}catch(O){c=O}if(p==null)try{let O=f.detectMirror(!0);g=O.getPoints(),this.reportFoundResultPoints(o,g),p=new st().decode(O)}catch(O){throw c??O}let w=new Be(p.getText(),p.getRawBytes(),p.getNumBits(),g,Ee.AZTEC,j.currentTimeMillis()),C=p.getByteSegments();C!=null&&w.putMetadata(Ze.BYTE_SEGMENTS,C);let _=p.getECLevel();return _!=null&&w.putMetadata(Ze.ERROR_CORRECTION_LEVEL,_),w}reportFoundResultPoints(i,o){if(i!=null){let c=i.get(Z.NEED_RESULT_POINT_CALLBACK);c!=null&&o.forEach((f,g,p)=>{c.foundPossibleResultPoint(f)})}}reset(){}}class Ft extends pe{constructor(i=500){super(new cn,i)}}class St{decode(i,o){try{return this.doDecode(i,o)}catch{if(o&&o.get(Z.TRY_HARDER)===!0&&i.isRotateSupported()){const g=i.rotateCounterClockwise(),p=this.doDecode(g,o),w=p.getResultMetadata();let C=270;w!==null&&w.get(Ze.ORIENTATION)===!0&&(C=C+w.get(Ze.ORIENTATION)%360),p.putMetadata(Ze.ORIENTATION,C);const _=p.getResultPoints();if(_!==null){const O=g.getHeight();for(let L=0;L<_.length;L++)_[L]=new He(O-_[L].getY()-1,_[L].getX())}return p}else throw new se}}reset(){}doDecode(i,o){const c=i.getWidth(),f=i.getHeight();let g=new V(c);const p=o&&o.get(Z.TRY_HARDER)===!0,w=Math.max(1,f>>(p?8:5));let C;p?C=f:C=15;const _=Math.trunc(f/2);for(let O=0;O<C;O++){const L=Math.trunc((O+1)/2),B=(O&1)===0,q=_+w*(B?L:-L);if(q<0||q>=f)break;try{g=i.getBlackRow(q,g)}catch{continue}for(let Q=0;Q<2;Q++){if(Q===1&&(g.reverse(),o&&o.get(Z.NEED_RESULT_POINT_CALLBACK)===!0)){const ee=new Map;o.forEach((ue,xe)=>ee.set(xe,ue)),ee.delete(Z.NEED_RESULT_POINT_CALLBACK),o=ee}try{const ee=this.decodeRow(q,g,o);if(Q===1){ee.putMetadata(Ze.ORIENTATION,180);const ue=ee.getResultPoints();ue!==null&&(ue[0]=new He(c-ue[0].getX()-1,ue[0].getY()),ue[1]=new He(c-ue[1].getX()-1,ue[1].getY()))}return ee}catch{}}}throw new se}static recordPattern(i,o,c){const f=c.length;for(let _=0;_<f;_++)c[_]=0;const g=i.getSize();if(o>=g)throw new se;let p=!i.get(o),w=0,C=o;for(;C<g;){if(i.get(C)!==p)c[w]++;else{if(++w===f)break;c[w]=1,p=!p}C++}if(!(w===f||w===f-1&&C===g))throw new se}static recordPatternInReverse(i,o,c){let f=c.length,g=i.get(o);for(;o>0&&f>=0;)i.get(--o)!==g&&(f--,g=!g);if(f>=0)throw new se;St.recordPattern(i,o+1,c)}static patternMatchVariance(i,o,c){const f=i.length;let g=0,p=0;for(let _=0;_<f;_++)g+=i[_],p+=o[_];if(g<p)return Number.POSITIVE_INFINITY;const w=g/p;c*=w;let C=0;for(let _=0;_<f;_++){const O=i[_],L=o[_]*w,B=O>L?O-L:L-O;if(B>c)return Number.POSITIVE_INFINITY;C+=B}return C/g}}class je extends St{static findStartPattern(i){const o=i.getSize(),c=i.getNextSet(0);let f=0,g=Int32Array.from([0,0,0,0,0,0]),p=c,w=!1;const C=6;for(let _=c;_<o;_++)if(i.get(_)!==w)g[f]++;else{if(f===C-1){let O=je.MAX_AVG_VARIANCE,L=-1;for(let B=je.CODE_START_A;B<=je.CODE_START_C;B++){const q=St.patternMatchVariance(g,je.CODE_PATTERNS[B],je.MAX_INDIVIDUAL_VARIANCE);q<O&&(O=q,L=B)}if(L>=0&&i.isRange(Math.max(0,p-(_-p)/2),p,!1))return Int32Array.from([p,_,L]);p+=g[0]+g[1],g=g.slice(2,g.length-1),g[f-1]=0,g[f]=0,f--}else f++;g[f]=1,w=!w}throw new se}static decodeCode(i,o,c){St.recordPattern(i,c,o);let f=je.MAX_AVG_VARIANCE,g=-1;for(let p=0;p<je.CODE_PATTERNS.length;p++){const w=je.CODE_PATTERNS[p],C=this.patternMatchVariance(o,w,je.MAX_INDIVIDUAL_VARIANCE);C<f&&(f=C,g=p)}if(g>=0)return g;throw new se}decodeRow(i,o,c){const f=c&&c.get(Z.ASSUME_GS1)===!0,g=je.findStartPattern(o),p=g[2];let w=0;const C=new Uint8Array(20);C[w++]=p;let _;switch(p){case je.CODE_START_A:_=je.CODE_CODE_A;break;case je.CODE_START_B:_=je.CODE_CODE_B;break;case je.CODE_START_C:_=je.CODE_CODE_C;break;default:throw new W}let O=!1,L=!1,B="",q=g[0],Q=g[1];const ee=Int32Array.from([0,0,0,0,0,0]);let ue=0,xe=0,ke=p,Pe=0,Me=!0,mt=!1,ht=!1;for(;!O;){const ar=L;switch(L=!1,ue=xe,xe=je.decodeCode(o,ee,Q),C[w++]=xe,xe!==je.CODE_STOP&&(Me=!0),xe!==je.CODE_STOP&&(Pe++,ke+=Pe*xe),q=Q,Q+=ee.reduce((Js,$d)=>Js+$d,0),xe){case je.CODE_START_A:case je.CODE_START_B:case je.CODE_START_C:throw new W}switch(_){case je.CODE_CODE_A:if(xe<64)ht===mt?B+=String.fromCharCode(32+xe):B+=String.fromCharCode(32+xe+128),ht=!1;else if(xe<96)ht===mt?B+=String.fromCharCode(xe-64):B+=String.fromCharCode(xe+64),ht=!1;else switch(xe!==je.CODE_STOP&&(Me=!1),xe){case je.CODE_FNC_1:f&&(B.length===0?B+="]C1":B+="");break;case je.CODE_FNC_2:case je.CODE_FNC_3:break;case je.CODE_FNC_4_A:!mt&&ht?(mt=!0,ht=!1):mt&&ht?(mt=!1,ht=!1):ht=!0;break;case je.CODE_SHIFT:L=!0,_=je.CODE_CODE_B;break;case je.CODE_CODE_B:_=je.CODE_CODE_B;break;case je.CODE_CODE_C:_=je.CODE_CODE_C;break;case je.CODE_STOP:O=!0;break}break;case je.CODE_CODE_B:if(xe<96)ht===mt?B+=String.fromCharCode(32+xe):B+=String.fromCharCode(32+xe+128),ht=!1;else switch(xe!==je.CODE_STOP&&(Me=!1),xe){case je.CODE_FNC_1:f&&(B.length===0?B+="]C1":B+="");break;case je.CODE_FNC_2:case je.CODE_FNC_3:break;case je.CODE_FNC_4_B:!mt&&ht?(mt=!0,ht=!1):mt&&ht?(mt=!1,ht=!1):ht=!0;break;case je.CODE_SHIFT:L=!0,_=je.CODE_CODE_A;break;case je.CODE_CODE_A:_=je.CODE_CODE_A;break;case je.CODE_CODE_C:_=je.CODE_CODE_C;break;case je.CODE_STOP:O=!0;break}break;case je.CODE_CODE_C:if(xe<100)xe<10&&(B+="0"),B+=xe;else switch(xe!==je.CODE_STOP&&(Me=!1),xe){case je.CODE_FNC_1:f&&(B.length===0?B+="]C1":B+="");break;case je.CODE_CODE_A:_=je.CODE_CODE_A;break;case je.CODE_CODE_B:_=je.CODE_CODE_B;break;case je.CODE_STOP:O=!0;break}break}ar&&(_=_===je.CODE_CODE_A?je.CODE_CODE_B:je.CODE_CODE_A)}const us=Q-q;if(Q=o.getNextUnset(Q),!o.isRange(Q,Math.min(o.getSize(),Q+(Q-q)/2),!1))throw new se;if(ke-=Pe*ue,ke%103!==ue)throw new I;const Fs=B.length;if(Fs===0)throw new se;Fs>0&&Me&&(_===je.CODE_CODE_C?B=B.substring(0,Fs-2):B=B.substring(0,Fs-1));const bs=(g[1]+g[0])/2,Wt=q+us/2,Wn=C.length,ws=new Uint8Array(Wn);for(let ar=0;ar<Wn;ar++)ws[ar]=C[ar];const Rr=[new He(bs,i),new He(Wt,i)];return new Be(B,ws,0,Rr,Ee.CODE_128,new Date().getTime())}}je.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],je.MAX_AVG_VARIANCE=.25,je.MAX_INDIVIDUAL_VARIANCE=.7,je.CODE_SHIFT=98,je.CODE_CODE_C=99,je.CODE_CODE_B=100,je.CODE_CODE_A=101,je.CODE_FNC_1=102,je.CODE_FNC_2=97,je.CODE_FNC_3=96,je.CODE_FNC_4_A=101,je.CODE_FNC_4_B=100,je.CODE_START_A=103,je.CODE_START_B=104,je.CODE_START_C=105,je.CODE_STOP=106;class kt extends St{constructor(i=!1,o=!1){super(),this.usingCheckDigit=i,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,o,c){let f=this.counters;f.fill(0),this.decodeRowResult="";let g=kt.findAsteriskPattern(o,f),p=o.getNextSet(g[1]),w=o.getSize(),C,_;do{kt.recordPattern(o,p,f);let ee=kt.toNarrowWidePattern(f);if(ee<0)throw new se;C=kt.patternToChar(ee),this.decodeRowResult+=C,_=p;for(let ue of f)p+=ue;p=o.getNextSet(p)}while(C!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let O=0;for(let ee of f)O+=ee;let L=p-_-O;if(p!==w&&L*2<O)throw new se;if(this.usingCheckDigit){let ee=this.decodeRowResult.length-1,ue=0;for(let xe=0;xe<ee;xe++)ue+=kt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(xe));if(this.decodeRowResult.charAt(ee)!==kt.ALPHABET_STRING.charAt(ue%43))throw new I;this.decodeRowResult=this.decodeRowResult.substring(0,ee)}if(this.decodeRowResult.length===0)throw new se;let B;this.extendedMode?B=kt.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;let q=(g[1]+g[0])/2,Q=_+O/2;return new Be(B,null,0,[new He(q,i),new He(Q,i)],Ee.CODE_39,new Date().getTime())}static findAsteriskPattern(i,o){let c=i.getSize(),f=i.getNextSet(0),g=0,p=f,w=!1,C=o.length;for(let _=f;_<c;_++)if(i.get(_)!==w)o[g]++;else{if(g===C-1){if(this.toNarrowWidePattern(o)===kt.ASTERISK_ENCODING&&i.isRange(Math.max(0,p-Math.floor((_-p)/2)),p,!1))return[p,_];p+=o[0]+o[1],o.copyWithin(0,2,2+g-1),o[g-1]=0,o[g]=0,g--}else g++;o[g]=1,w=!w}throw new se}static toNarrowWidePattern(i){let o=i.length,c=0,f;do{let g=2147483647;for(let C of i)C<g&&C>c&&(g=C);c=g,f=0;let p=0,w=0;for(let C=0;C<o;C++){let _=i[C];_>c&&(w|=1<<o-1-C,f++,p+=_)}if(f===3){for(let C=0;C<o&&f>0;C++){let _=i[C];if(_>c&&(f--,_*2>=p))return-1}return w}}while(f>3);return-1}static patternToChar(i){for(let o=0;o<kt.CHARACTER_ENCODINGS.length;o++)if(kt.CHARACTER_ENCODINGS[o]===i)return kt.ALPHABET_STRING.charAt(o);if(i===kt.ASTERISK_ENCODING)return"*";throw new se}static decodeExtended(i){let o=i.length,c="";for(let f=0;f<o;f++){let g=i.charAt(f);if(g==="+"||g==="$"||g==="%"||g==="/"){let p=i.charAt(f+1),w="\0";switch(g){case"+":if(p>="A"&&p<="Z")w=String.fromCharCode(p.charCodeAt(0)+32);else throw new W;break;case"$":if(p>="A"&&p<="Z")w=String.fromCharCode(p.charCodeAt(0)-64);else throw new W;break;case"%":if(p>="A"&&p<="E")w=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")w=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")w=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")w=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")w="\0";else if(p==="V")w="@";else if(p==="W")w="`";else if(p==="X"||p==="Y"||p==="Z")w="";else throw new W;break;case"/":if(p>="A"&&p<="O")w=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")w=":";else throw new W;break}c+=w,f++}else c+=g}return c}}kt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",kt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],kt.ASTERISK_ENCODING=148;class Nt extends St{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,o,c){let f=this.decodeStart(o),g=this.decodeEnd(o),p=new ce;Nt.decodeMiddle(o,f[1],g[0],p);let w=p.toString(),C=null;c!=null&&(C=c.get(Z.ALLOWED_LENGTHS)),C==null&&(C=Nt.DEFAULT_ALLOWED_LENGTHS);let _=w.length,O=!1,L=0;for(let Q of C){if(_===Q){O=!0;break}Q>L&&(L=Q)}if(!O&&_>L&&(O=!0),!O)throw new W;const B=[new He(f[1],i),new He(g[0],i)];return new Be(w,null,0,B,Ee.ITF,new Date().getTime())}static decodeMiddle(i,o,c,f){let g=new Int32Array(10),p=new Int32Array(5),w=new Int32Array(5);for(g.fill(0),p.fill(0),w.fill(0);o<c;){St.recordPattern(i,o,g);for(let _=0;_<5;_++){let O=2*_;p[_]=g[O],w[_]=g[O+1]}let C=Nt.decodeDigit(p);f.append(C.toString()),C=this.decodeDigit(w),f.append(C.toString()),g.forEach(function(_){o+=_})}}decodeStart(i){let o=Nt.skipWhiteSpace(i),c=Nt.findGuardPattern(i,o,Nt.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(i,c[0]),c}validateQuietZone(i,o){let c=this.narrowLineWidth*10;c=c<o?c:o;for(let f=o-1;c>0&&f>=0&&!i.get(f);f--)c--;if(c!==0)throw new se}static skipWhiteSpace(i){const o=i.getSize(),c=i.getNextSet(0);if(c===o)throw new se;return c}decodeEnd(i){i.reverse();try{let o=Nt.skipWhiteSpace(i),c;try{c=Nt.findGuardPattern(i,o,Nt.END_PATTERN_REVERSED[0])}catch(g){g instanceof se&&(c=Nt.findGuardPattern(i,o,Nt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,c[0]);let f=c[0];return c[0]=i.getSize()-c[1],c[1]=i.getSize()-f,c}finally{i.reverse()}}static findGuardPattern(i,o,c){let f=c.length,g=new Int32Array(f),p=i.getSize(),w=!1,C=0,_=o;g.fill(0);for(let O=o;O<p;O++)if(i.get(O)!==w)g[C]++;else{if(C===f-1){if(St.patternMatchVariance(g,c,Nt.MAX_INDIVIDUAL_VARIANCE)<Nt.MAX_AVG_VARIANCE)return[_,O];_+=g[0]+g[1],j.arraycopy(g,2,g,0,C-1),g[C-1]=0,g[C]=0,C--}else C++;g[C]=1,w=!w}throw new se}static decodeDigit(i){let o=Nt.MAX_AVG_VARIANCE,c=-1,f=Nt.PATTERNS.length;for(let g=0;g<f;g++){let p=Nt.PATTERNS[g],w=St.patternMatchVariance(i,p,Nt.MAX_INDIVIDUAL_VARIANCE);w<o?(o=w,c=g):w===o&&(c=-1)}if(c>=0)return c%10;throw new se}}Nt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Nt.MAX_AVG_VARIANCE=.38,Nt.MAX_INDIVIDUAL_VARIANCE=.5,Nt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Nt.START_PATTERN=Int32Array.from([1,1,1,1]),Nt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Pt extends St{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let o=!1,c,f=0,g=Int32Array.from([0,0,0]);for(;!o;){g=Int32Array.from([0,0,0]),c=Pt.findGuardPattern(i,f,!1,this.START_END_PATTERN,g);let p=c[0];f=c[1];let w=p-(f-p);w>=0&&(o=i.isRange(w,p,!1))}return c}static checkChecksum(i){return Pt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let c=parseInt(i.charAt(o-1),10);return Pt.getStandardUPCEANChecksum(i.substring(0,o-1))===c}static getStandardUPCEANChecksum(i){let o=i.length,c=0;for(let f=o-1;f>=0;f-=2){let g=i.charAt(f).charCodeAt(0)-48;if(g<0||g>9)throw new W;c+=g}c*=3;for(let f=o-2;f>=0;f-=2){let g=i.charAt(f).charCodeAt(0)-48;if(g<0||g>9)throw new W;c+=g}return(1e3-c)%10}static decodeEnd(i,o){return Pt.findGuardPattern(i,o,!1,Pt.START_END_PATTERN,new Int32Array(Pt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,o,c,f){return this.findGuardPattern(i,o,c,f,new Int32Array(f.length))}static findGuardPattern(i,o,c,f,g){let p=i.getSize();o=c?i.getNextUnset(o):i.getNextSet(o);let w=0,C=o,_=f.length,O=c;for(let L=o;L<p;L++)if(i.get(L)!==O)g[w]++;else{if(w===_-1){if(St.patternMatchVariance(g,f,Pt.MAX_INDIVIDUAL_VARIANCE)<Pt.MAX_AVG_VARIANCE)return Int32Array.from([C,L]);C+=g[0]+g[1];let B=g.slice(2,g.length-1);for(let q=0;q<w-1;q++)g[q]=B[q];g[w-1]=0,g[w]=0,w--}else w++;g[w]=1,O=!O}throw new se}static decodeDigit(i,o,c,f){this.recordPattern(i,c,o);let g=this.MAX_AVG_VARIANCE,p=-1,w=f.length;for(let C=0;C<w;C++){let _=f[C],O=St.patternMatchVariance(o,_,Pt.MAX_INDIVIDUAL_VARIANCE);O<g&&(g=O,p=C)}if(p>=0)return p;throw new se}}Pt.MAX_AVG_VARIANCE=.48,Pt.MAX_INDIVIDUAL_VARIANCE=.7,Pt.START_END_PATTERN=Int32Array.from([1,1,1]),Pt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Pt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class js{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,c){let f=this.decodeRowStringBuffer,g=this.decodeMiddle(o,c,f),p=f.toString(),w=js.parseExtensionString(p),C=[new He((c[0]+c[1])/2,i),new He(g,i)],_=new Be(p,null,0,C,Ee.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&_.putAllMetadata(w),_}decodeMiddle(i,o,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let g=i.getSize(),p=o[1],w=0;for(let _=0;_<5&&p<g;_++){let O=Pt.decodeDigit(i,f,p,Pt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+O%10);for(let L of f)p+=L;O>=10&&(w|=1<<4-_),_!==4&&(p=i.getNextSet(p),p=i.getNextUnset(p))}if(c.length!==5)throw new se;let C=this.determineCheckDigit(w);if(js.extensionChecksum(c.toString())!==C)throw new se;return p}static extensionChecksum(i){let o=i.length,c=0;for(let f=o-2;f>=0;f-=2)c+=i.charAt(f).charCodeAt(0)-48;c*=3;for(let f=o-1;f>=0;f-=2)c+=i.charAt(f).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(i){for(let o=0;o<10;o++)if(i===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new se}static parseExtensionString(i){if(i.length!==5)return null;let o=js.parseExtension5String(i);return o==null?null:new Map([[Ze.SUGGESTED_PRICE,o]])}static parseExtension5String(i){let o;switch(i.charAt(0)){case"0":o="";break;case"5":o="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let c=parseInt(i.substring(1)),f=(c/100).toString(),g=c%100,p=g<10?"0"+g:g.toString();return o+f+"."+p}}class ms{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,c){let f=this.decodeRowStringBuffer,g=this.decodeMiddle(o,c,f),p=f.toString(),w=ms.parseExtensionString(p),C=[new He((c[0]+c[1])/2,i),new He(g,i)],_=new Be(p,null,0,C,Ee.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&_.putAllMetadata(w),_}decodeMiddle(i,o,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let g=i.getSize(),p=o[1],w=0;for(let C=0;C<2&&p<g;C++){let _=Pt.decodeDigit(i,f,p,Pt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+_%10);for(let O of f)p+=O;_>=10&&(w|=1<<1-C),C!==1&&(p=i.getNextSet(p),p=i.getNextUnset(p))}if(c.length!==2)throw new se;if(parseInt(c.toString())%4!==w)throw new se;return p}static parseExtensionString(i){return i.length!==2?null:new Map([[Ze.ISSUE_NUMBER,parseInt(i)]])}}class ra{static decodeRow(i,o,c){let f=Pt.findGuardPattern(o,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new js().decodeRow(i,o,f)}catch{return new ms().decodeRow(i,o,f)}}}ra.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Tt extends Pt{constructor(){super(),this.decodeRowStringBuffer="",Tt.L_AND_G_PATTERNS=Tt.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let o=Tt.L_PATTERNS[i-10],c=new Int32Array(o.length);for(let f=0;f<o.length;f++)c[f]=o[o.length-f-1];Tt.L_AND_G_PATTERNS[i]=c}}decodeRow(i,o,c){let f=Tt.findStartGuardPattern(o),g=c==null?null:c.get(Z.NEED_RESULT_POINT_CALLBACK);if(g!=null){const Me=new He((f[0]+f[1])/2,i);g.foundPossibleResultPoint(Me)}let p=this.decodeMiddle(o,f,this.decodeRowStringBuffer),w=p.rowOffset,C=p.resultString;if(g!=null){const Me=new He(w,i);g.foundPossibleResultPoint(Me)}let _=this.decodeEnd(o,w);if(g!=null){const Me=new He((_[0]+_[1])/2,i);g.foundPossibleResultPoint(Me)}let O=_[1],L=O+(O-_[0]);if(L>=o.getSize()||!o.isRange(O,L,!1))throw new se;let B=C.toString();if(B.length<8)throw new W;if(!Tt.checkChecksum(B))throw new I;let q=(f[1]+f[0])/2,Q=(_[1]+_[0])/2,ee=this.getBarcodeFormat(),ue=[new He(q,i),new He(Q,i)],xe=new Be(B,null,0,ue,ee,new Date().getTime()),ke=0;try{let Me=ra.decodeRow(i,o,_[1]);xe.putMetadata(Ze.UPC_EAN_EXTENSION,Me.getText()),xe.putAllMetadata(Me.getResultMetadata()),xe.addResultPoints(Me.getResultPoints()),ke=Me.getText().length}catch{}let Pe=c==null?null:c.get(Z.ALLOWED_EAN_EXTENSIONS);if(Pe!=null){let Me=!1;for(let mt in Pe)if(ke.toString()===mt){Me=!0;break}if(!Me)throw new se}return xe}decodeEnd(i,o){return Tt.findGuardPattern(i,o,!1,Tt.START_END_PATTERN,new Int32Array(Tt.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return Tt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let c=parseInt(i.charAt(o-1),10);return Tt.getStandardUPCEANChecksum(i.substring(0,o-1))===c}static getStandardUPCEANChecksum(i){let o=i.length,c=0;for(let f=o-1;f>=0;f-=2){let g=i.charAt(f).charCodeAt(0)-48;if(g<0||g>9)throw new W;c+=g}c*=3;for(let f=o-2;f>=0;f-=2){let g=i.charAt(f).charCodeAt(0)-48;if(g<0||g>9)throw new W;c+=g}return(1e3-c)%10}}class Ks extends Tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let g=i.getSize(),p=o[1],w=0;for(let _=0;_<6&&p<g;_++){let O=Tt.decodeDigit(i,f,p,Tt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+O%10);for(let L of f)p+=L;O>=10&&(w|=1<<5-_)}c=Ks.determineFirstDigit(c,w),p=Tt.findGuardPattern(i,p,!0,Tt.MIDDLE_PATTERN,new Int32Array(Tt.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<6&&p<g;_++){let O=Tt.decodeDigit(i,f,p,Tt.L_PATTERNS);c+=String.fromCharCode(48+O);for(let L of f)p+=L}return{rowOffset:p,resultString:c}}getBarcodeFormat(){return Ee.EAN_13}static determineFirstDigit(i,o){for(let c=0;c<10;c++)if(o===this.FIRST_DIGIT_ENCODINGS[c])return i=String.fromCharCode(48+c)+i,i;throw new se}}Ks.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class kd extends Tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,c){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let g=i.getSize(),p=o[1];for(let C=0;C<4&&p<g;C++){let _=Tt.decodeDigit(i,f,p,Tt.L_PATTERNS);c+=String.fromCharCode(48+_);for(let O of f)p+=O}p=Tt.findGuardPattern(i,p,!0,Tt.MIDDLE_PATTERN,new Int32Array(Tt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<4&&p<g;C++){let _=Tt.decodeDigit(i,f,p,Tt.L_PATTERNS);c+=String.fromCharCode(48+_);for(let O of f)p+=O}return{rowOffset:p,resultString:c}}getBarcodeFormat(){return Ee.EAN_8}}class Pc extends Tt{constructor(){super(...arguments),this.ean13Reader=new Ks}getBarcodeFormat(){return Ee.UPC_A}decode(i,o){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,o,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,o,c))}decodeMiddle(i,o,c){return this.ean13Reader.decodeMiddle(i,o,c)}maybeReturnResult(i){let o=i.getText();if(o.charAt(0)==="0"){let c=new Be(o.substring(1),null,null,i.getResultPoints(),Ee.UPC_A);return i.getResultMetadata()!=null&&c.putAllMetadata(i.getResultMetadata()),c}else throw new se}reset(){this.ean13Reader.reset()}}class Ps extends Tt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,o,c){const f=this.decodeMiddleCounters.map(_=>_);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const g=i.getSize();let p=o[1],w=0;for(let _=0;_<6&&p<g;_++){const O=Ps.decodeDigit(i,f,p,Ps.L_AND_G_PATTERNS);c+=String.fromCharCode(48+O%10);for(let L of f)p+=L;O>=10&&(w|=1<<5-_)}let C=Ps.determineNumSysAndCheckDigit(c,w);return{rowOffset:p,resultString:C}}decodeEnd(i,o){return Ps.findGuardPatternWithoutCounters(i,o,!0,Ps.MIDDLE_END_PATTERN)}checkChecksum(i){return Tt.checkChecksum(Ps.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,o){for(let c=0;c<=1;c++)for(let f=0;f<10;f++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][f]){let g=String.fromCharCode(48+c),p=String.fromCharCode(48+f);return g+i+p}throw se.getNotFoundInstance()}getBarcodeFormat(){return Ee.UPC_E}static convertUPCEtoUPCA(i){const o=i.slice(1,7).split("").map(g=>g.charCodeAt(0)),c=new ce;c.append(i.charAt(0));let f=o[5];switch(f){case 0:case 1:case 2:c.appendChars(o,0,2),c.append(f),c.append("0000"),c.appendChars(o,2,3);break;case 3:c.appendChars(o,0,3),c.append("00000"),c.appendChars(o,3,2);break;case 4:c.appendChars(o,0,4),c.append("00000"),c.append(o[4]);break;default:c.appendChars(o,0,5),c.append("0000"),c.append(f);break}return i.length>=8&&c.append(i.charAt(7)),c.toString()}}Ps.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ps.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class fo extends St{constructor(i){super();let o=i==null?null:i.get(Z.POSSIBLE_FORMATS),c=[];r(o)?(c.push(new Ks),c.push(new Pc),c.push(new kd),c.push(new Ps)):(o.indexOf(Ee.EAN_13)>-1&&c.push(new Ks),o.indexOf(Ee.UPC_A)>-1&&c.push(new Pc),o.indexOf(Ee.EAN_8)>-1&&c.push(new kd),o.indexOf(Ee.UPC_E)>-1&&c.push(new Ps)),this.readers=c}decodeRow(i,o,c){for(let f of this.readers)try{const g=f.decodeRow(i,o,c),p=g.getBarcodeFormat()===Ee.EAN_13&&g.getText().charAt(0)==="0",w=c==null?null:c.get(Z.POSSIBLE_FORMATS),C=w==null||w.includes(Ee.UPC_A);if(p&&C){const _=g.getRawBytes(),O=new Be(g.getText().substring(1),_,_?_.length:null,g.getResultPoints(),Ee.UPC_A);return O.putAllMetadata(g.getResultMetadata()),O}return g}catch{}throw new se}reset(){for(let i of this.readers)i.reset()}}class Un extends St{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,o){for(let c=0;c<o.length;c++)if(St.patternMatchVariance(i,o[c],Un.MAX_INDIVIDUAL_VARIANCE)<Un.MAX_AVG_VARIANCE)return c;throw new se}static count(i){return Ge.sum(new Int32Array(i))}static increment(i,o){let c=0,f=o[0];for(let g=1;g<i.length;g++)o[g]>f&&(f=o[g],c=g);i[c]++}static decrement(i,o){let c=0,f=o[0];for(let g=1;g<i.length;g++)o[g]<f&&(f=o[g],c=g);i[c]--}static isFinderPattern(i){let o=i[0]+i[1],c=o+i[2]+i[3],f=o/c;if(f>=Un.MIN_FINDER_PATTERN_RATIO&&f<=Un.MAX_FINDER_PATTERN_RATIO){let g=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let w of i)w>p&&(p=w),w<g&&(g=w);return p<10*g}return!1}}Un.MAX_AVG_VARIANCE=.2,Un.MAX_INDIVIDUAL_VARIANCE=.45,Un.MIN_FINDER_PATTERN_RATIO=9.5/12,Un.MAX_FINDER_PATTERN_RATIO=12.5/14;class Er{constructor(i,o){this.value=i,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof Er))return!1;const o=i;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class dl{constructor(i,o,c,f,g){this.value=i,this.startEnd=o,this.value=i,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new He(c,g)),this.resultPoints.push(new He(f,g))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof dl))return!1;const o=i;return this.value===o.value}hashCode(){return this.value}}class $n{constructor(){}static getRSSvalue(i,o,c){let f=0;for(let C of i)f+=C;let g=0,p=0,w=i.length;for(let C=0;C<w-1;C++){let _;for(_=1,p|=1<<C;_<i[C];_++,p&=~(1<<C)){let O=$n.combins(f-_-1,w-C-2);if(c&&p===0&&f-_-(w-C-1)>=w-C-1&&(O-=$n.combins(f-_-(w-C),w-C-2)),w-C-1>1){let L=0;for(let B=f-_-(w-C-2);B>o;B--)L+=$n.combins(f-_-B-1,w-C-3);O-=L*(w-1-C)}else f-_>o&&O--;g+=O}f-=_}return g}static combins(i,o){let c,f;i-o>o?(f=o,c=i-o):(f=i-o,c=o);let g=1,p=1;for(let w=i;w>c;w--)g*=w,p<=f&&(g/=p,p++);for(;p<=f;)g/=p,p++;return g}}class es{static buildBitArray(i){let o=i.length*2-1;i[i.length-1].getRightChar()==null&&(o-=1);let c=12*o,f=new V(c),g=0,w=i[0].getRightChar().getValue();for(let C=11;C>=0;--C)(w&1<<C)!=0&&f.set(g),g++;for(let C=1;C<i.length;++C){let _=i[C],O=_.getLeftChar().getValue();for(let L=11;L>=0;--L)(O&1<<L)!=0&&f.set(g),g++;if(_.getRightChar()!=null){let L=_.getRightChar().getValue();for(let B=11;B>=0;--B)(L&1<<B)!=0&&f.set(g),g++}}return f}}class vn{constructor(i,o){o?this.decodedInformation=null:(this.finished=i,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Xi{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class ts extends Xi{constructor(i,o){super(i),this.value=o}getValue(){return this.value}isFNC1(){return this.value===ts.FNC1}}ts.FNC1="$";class Cr extends Xi{constructor(i,o,c){super(i),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Bs extends Xi{constructor(i,o,c){if(super(i),o<0||o>10||c<0||c>10)throw new W;this.firstDigit=o,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Bs.FNC1}isSecondDigitFNC1(){return this.secondDigit===Bs.FNC1}isAnyFNC1(){return this.firstDigit===Bs.FNC1||this.secondDigit===Bs.FNC1}}Bs.FNC1=10;class qe{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new se;let o=i.substring(0,2);for(let g of qe.TWO_DIGIT_DATA_LENGTH)if(g[0]===o)return g[1]===qe.VARIABLE_LENGTH?qe.processVariableAI(2,g[2],i):qe.processFixedAI(2,g[1],i);if(i.length<3)throw new se;let c=i.substring(0,3);for(let g of qe.THREE_DIGIT_DATA_LENGTH)if(g[0]===c)return g[1]===qe.VARIABLE_LENGTH?qe.processVariableAI(3,g[2],i):qe.processFixedAI(3,g[1],i);for(let g of qe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(g[0]===c)return g[1]===qe.VARIABLE_LENGTH?qe.processVariableAI(4,g[2],i):qe.processFixedAI(4,g[1],i);if(i.length<4)throw new se;let f=i.substring(0,4);for(let g of qe.FOUR_DIGIT_DATA_LENGTH)if(g[0]===f)return g[1]===qe.VARIABLE_LENGTH?qe.processVariableAI(4,g[2],i):qe.processFixedAI(4,g[1],i);throw new se}static processFixedAI(i,o,c){if(c.length<i)throw new se;let f=c.substring(0,i);if(c.length<i+o)throw new se;let g=c.substring(i,i+o),p=c.substring(i+o),w="("+f+")"+g,C=qe.parseFieldsInGeneralPurpose(p);return C==null?w:w+C}static processVariableAI(i,o,c){let f=c.substring(0,i),g;c.length<i+o?g=c.length:g=i+o;let p=c.substring(i,g),w=c.substring(g),C="("+f+")"+p,_=qe.parseFieldsInGeneralPurpose(w);return _==null?C:C+_}}qe.VARIABLE_LENGTH=[],qe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",qe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",qe.VARIABLE_LENGTH,20],["22",qe.VARIABLE_LENGTH,29],["30",qe.VARIABLE_LENGTH,8],["37",qe.VARIABLE_LENGTH,8],["90",qe.VARIABLE_LENGTH,30],["91",qe.VARIABLE_LENGTH,30],["92",qe.VARIABLE_LENGTH,30],["93",qe.VARIABLE_LENGTH,30],["94",qe.VARIABLE_LENGTH,30],["95",qe.VARIABLE_LENGTH,30],["96",qe.VARIABLE_LENGTH,30],["97",qe.VARIABLE_LENGTH,3],["98",qe.VARIABLE_LENGTH,30],["99",qe.VARIABLE_LENGTH,30]],qe.THREE_DIGIT_DATA_LENGTH=[["240",qe.VARIABLE_LENGTH,30],["241",qe.VARIABLE_LENGTH,30],["242",qe.VARIABLE_LENGTH,6],["250",qe.VARIABLE_LENGTH,30],["251",qe.VARIABLE_LENGTH,30],["253",qe.VARIABLE_LENGTH,17],["254",qe.VARIABLE_LENGTH,20],["400",qe.VARIABLE_LENGTH,30],["401",qe.VARIABLE_LENGTH,30],["402",17],["403",qe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",qe.VARIABLE_LENGTH,20],["421",qe.VARIABLE_LENGTH,15],["422",3],["423",qe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],qe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",qe.VARIABLE_LENGTH,15],["391",qe.VARIABLE_LENGTH,18],["392",qe.VARIABLE_LENGTH,15],["393",qe.VARIABLE_LENGTH,18],["703",qe.VARIABLE_LENGTH,30]],qe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",qe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",qe.VARIABLE_LENGTH,20],["8003",qe.VARIABLE_LENGTH,30],["8004",qe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",qe.VARIABLE_LENGTH,30],["8008",qe.VARIABLE_LENGTH,12],["8018",18],["8020",qe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",qe.VARIABLE_LENGTH,70],["8200",qe.VARIABLE_LENGTH,70]];class di{constructor(i){this.buffer=new ce,this.information=i}decodeAllCodes(i,o){let c=o,f=null;do{let g=this.decodeGeneralPurposeField(c,f),p=qe.parseFieldsInGeneralPurpose(g.getNewString());if(p!=null&&i.append(p),g.isRemaining()?f=""+g.getRemainingValue():f=null,c===g.getNewPosition())break;c=g.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let o=i;o<i+3;++o)if(this.information.get(o))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let g=this.extractNumericValueFromBitArray(i,4);return g===0?new Bs(this.information.getSize(),Bs.FNC1,Bs.FNC1):new Bs(this.information.getSize(),g-1,Bs.FNC1)}let o=this.extractNumericValueFromBitArray(i,7),c=(o-8)/11,f=(o-8)%11;return new Bs(i+7,c,f)}extractNumericValueFromBitArray(i,o){return di.extractNumericValueFromBitArray(this.information,i,o)}static extractNumericValueFromBitArray(i,o,c){let f=0;for(let g=0;g<c;++g)i.get(o+g)&&(f|=1<<c-g-1);return f}decodeGeneralPurposeField(i,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(i);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new Cr(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new Cr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,o;do{let c=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),i=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),i=o.isFinished()):(o=this.parseNumericBlock(),i=o.isFinished()),!(c!==this.current.getPosition())&&!i)break}while(!i);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let o;return i.isSecondDigitFNC1()?o=new Cr(this.current.getPosition(),this.buffer.toString()):o=new Cr(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new vn(!0,o)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let o=new Cr(this.current.getPosition(),this.buffer.toString());return new vn(!0,o)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new vn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new Cr(this.current.getPosition(),this.buffer.toString());return new vn(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new vn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new Cr(this.current.getPosition(),this.buffer.toString());return new vn(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new vn(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,7);if(c>=64&&c<116)return!0;if(i+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(i,8);return f>=232&&f<253}decodeIsoIec646(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new ts(i+5,ts.FNC1);if(o>=5&&o<15)return new ts(i+5,"0"+(o-5));let c=this.extractNumericValueFromBitArray(i,7);if(c>=64&&c<90)return new ts(i+7,""+(c+1));if(c>=90&&c<116)return new ts(i+7,""+(c+7));let f=this.extractNumericValueFromBitArray(i,8),g;switch(f){case 232:g="!";break;case 233:g='"';break;case 234:g="%";break;case 235:g="&";break;case 236:g="'";break;case 237:g="(";break;case 238:g=")";break;case 239:g="*";break;case 240:g="+";break;case 241:g=",";break;case 242:g="-";break;case 243:g=".";break;case 244:g="/";break;case 245:g=":";break;case 246:g=";";break;case 247:g="<";break;case 248:g="=";break;case 249:g=">";break;case 250:g="?";break;case 251:g="_";break;case 252:g=" ";break;default:throw new W}return new ts(i+8,g)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,6);return c>=16&&c<63}decodeAlphanumeric(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new ts(i+5,ts.FNC1);if(o>=5&&o<15)return new ts(i+5,"0"+(o-5));let c=this.extractNumericValueFromBitArray(i,6);if(c>=32&&c<58)return new ts(i+6,""+(c+33));let f;switch(c){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new Oe("Decoding invalid alphanumeric value: "+c)}return new ts(i+6,f)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<5&&o+i<this.information.getSize();++o)if(o===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+o))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let o=i;o<i+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<4&&o+i<this.information.getSize();++o)if(this.information.get(i+o))return!1;return!0}}class ho{constructor(i){this.information=i,this.generalDecoder=new di(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Rn extends ho{constructor(i){super(i)}encodeCompressedGtin(i,o){i.append("(01)");let c=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,o,c)}encodeCompressedGtinWithoutAI(i,o,c){for(let f=0;f<4;++f){let g=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*f,10);g/100===0&&i.append("0"),g/10===0&&i.append("0"),i.append(g)}Rn.appendCheckDigit(i,c)}static appendCheckDigit(i,o){let c=0;for(let f=0;f<13;f++){let g=i.charAt(f+o).charCodeAt(0)-48;c+=(f&1)===0?3*g:g}c=10-c%10,c===10&&(c=0),i.append(c)}}Rn.GTIN_SIZE=40;class Zs extends Rn{constructor(i){super(i)}parseInformation(){let i=new ce;i.append("(01)");let o=i.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(Zs.HEADER_SIZE,4);return i.append(c),this.encodeCompressedGtinWithoutAI(i,Zs.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(i,Zs.HEADER_SIZE+44)}}Zs.HEADER_SIZE=4;class Wi extends ho{constructor(i){super(i)}parseInformation(){let i=new ce;return this.getGeneralDecoder().decodeAllCodes(i,Wi.HEADER_SIZE)}}Wi.HEADER_SIZE=5;class Oi extends Rn{constructor(i){super(i)}encodeCompressedWeight(i,o,c){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(o,c);this.addWeightCode(i,f);let g=this.checkWeight(f),p=1e5;for(let w=0;w<5;++w)g/p===0&&i.append("0"),p/=10;i.append(g)}}class Yt extends Oi{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Yt.HEADER_SIZE+Oi.GTIN_SIZE+Yt.WEIGHT_SIZE)throw new se;let i=new ce;return this.encodeCompressedGtin(i,Yt.HEADER_SIZE),this.encodeCompressedWeight(i,Yt.HEADER_SIZE+Oi.GTIN_SIZE,Yt.WEIGHT_SIZE),i.toString()}}Yt.HEADER_SIZE=5,Yt.WEIGHT_SIZE=15;class Ld extends Yt{constructor(i){super(i)}addWeightCode(i,o){i.append("(3103)")}checkWeight(i){return i}}class jd extends Yt{constructor(i){super(i)}addWeightCode(i,o){o<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class ns extends Rn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<ns.HEADER_SIZE+Rn.GTIN_SIZE)throw new se;let i=new ce;this.encodeCompressedGtin(i,ns.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(ns.HEADER_SIZE+Rn.GTIN_SIZE,ns.LAST_DIGIT_SIZE);i.append("(392"),i.append(o),i.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(ns.HEADER_SIZE+Rn.GTIN_SIZE+ns.LAST_DIGIT_SIZE,null);return i.append(c.getNewString()),i.toString()}}ns.HEADER_SIZE=8,ns.LAST_DIGIT_SIZE=2;class Sn extends Rn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<Sn.HEADER_SIZE+Rn.GTIN_SIZE)throw new se;let i=new ce;this.encodeCompressedGtin(i,Sn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Sn.HEADER_SIZE+Rn.GTIN_SIZE,Sn.LAST_DIGIT_SIZE);i.append("(393"),i.append(o),i.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(Sn.HEADER_SIZE+Rn.GTIN_SIZE+Sn.LAST_DIGIT_SIZE,Sn.FIRST_THREE_DIGITS_SIZE);c/100==0&&i.append("0"),c/10==0&&i.append("0"),i.append(c);let f=this.getGeneralDecoder().decodeGeneralPurposeField(Sn.HEADER_SIZE+Rn.GTIN_SIZE+Sn.LAST_DIGIT_SIZE+Sn.FIRST_THREE_DIGITS_SIZE,null);return i.append(f.getNewString()),i.toString()}}Sn.HEADER_SIZE=8,Sn.LAST_DIGIT_SIZE=2,Sn.FIRST_THREE_DIGITS_SIZE=10;class an extends Oi{constructor(i,o,c){super(i),this.dateCode=c,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=an.HEADER_SIZE+an.GTIN_SIZE+an.WEIGHT_SIZE+an.DATE_SIZE)throw new se;let i=new ce;return this.encodeCompressedGtin(i,an.HEADER_SIZE),this.encodeCompressedWeight(i,an.HEADER_SIZE+an.GTIN_SIZE,an.WEIGHT_SIZE),this.encodeCompressedDate(i,an.HEADER_SIZE+an.GTIN_SIZE+an.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,o){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(o,an.DATE_SIZE);if(c==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let f=c%32;c/=32;let g=c%12+1;c/=12;let p=c;p/10==0&&i.append("0"),i.append(p),g/10==0&&i.append("0"),i.append(g),f/10==0&&i.append("0"),i.append(f)}addWeightCode(i,o){i.append("("),i.append(this.firstAIdigits),i.append(o/1e5),i.append(")")}checkWeight(i){return i%1e5}}an.HEADER_SIZE=8,an.WEIGHT_SIZE=20,an.DATE_SIZE=16;function Bc(k){try{if(k.get(1))return new Zs(k);if(!k.get(2))return new Wi(k);switch(di.extractNumericValueFromBitArray(k,1,4)){case 4:return new Ld(k);case 5:return new jd(k)}switch(di.extractNumericValueFromBitArray(k,1,5)){case 12:return new ns(k);case 13:return new Sn(k)}switch(di.extractNumericValueFromBitArray(k,1,7)){case 56:return new an(k,"310","11");case 57:return new an(k,"320","11");case 58:return new an(k,"310","13");case 59:return new an(k,"320","13");case 60:return new an(k,"310","15");case 61:return new an(k,"320","15");case 62:return new an(k,"310","17");case 63:return new an(k,"320","17")}}catch(i){throw console.log(i),new Oe("unknown decoder: "+k)}}class Ii{constructor(i,o,c,f){this.leftchar=i,this.rightchar=o,this.finderpattern=c,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,o){return i instanceof Ii?Ii.equalsOrNull(i.leftchar,o.leftchar)&&Ii.equalsOrNull(i.rightchar,o.rightchar)&&Ii.equalsOrNull(i.finderpattern,o.finderpattern):!1}static equalsOrNull(i,o){return i===null?o===null:Ii.equals(i,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Uc{constructor(i,o,c){this.pairs=i,this.rowNumber=o,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,o){return i instanceof Uc?this.checkEqualitity(i,o)&&i.wasReversed===o.wasReversed:!1}checkEqualitity(i,o){if(!i||!o)return;let c;return i.forEach((f,g)=>{o.forEach(p=>{f.getLeftChar().getValue()===p.getLeftChar().getValue()&&f.getRightChar().getValue()===p.getRightChar().getValue()&&f.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(c=!0)})}),c}}class Ne extends Un{constructor(i){super(...arguments),this.pairs=new Array(Ne.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,o,c){this.pairs.length=0,this.startFromEven=!1;try{return Ne.constructResult(this.decodeRow2pairs(i,o))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,Ne.constructResult(this.decodeRow2pairs(i,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,o){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,i))}catch(g){if(g instanceof se){if(!this.pairs.length)throw new se;c=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(i,!1),f){let g=this.checkRowsBoolean(!1);if(g!=null||(g=this.checkRowsBoolean(!0),g!=null))return g}throw new se}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return i&&(this.rows=this.rows.reverse()),o}checkRows(i,o){for(let c=o;c<this.rows.length;c++){let f=this.rows[c];this.pairs.length=0;for(let p of i)this.pairs.push(p.getPairs());if(this.pairs.push(f.getPairs()),!Ne.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let g=new Array(i);g.push(f);try{return this.checkRows(g,c+1)}catch(p){this.verbose&&console.log(p)}}throw new se}static isValidSequence(i){for(let o of Ne.FINDER_PATTERN_SEQUENCES){if(i.length>o.length)continue;let c=!0;for(let f=0;f<i.length;f++)if(i[f].getFinderPattern().getValue()!=o[f]){c=!1;break}if(c)return!0}return!1}storeRow(i,o){let c=0,f=!1,g=!1;for(;c<this.rows.length;){let p=this.rows[c];if(p.getRowNumber()>i){g=p.isEquivalent(this.pairs);break}f=p.isEquivalent(this.pairs),c++}g||f||Ne.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new Uc(this.pairs,i,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,o){for(let c of o)if(c.getPairs().length!==i.length){for(let f of c.getPairs())for(let g of i)if(Ii.equals(f,g))break}}static isPartialRow(i,o){for(let c of o){let f=!0;for(let g of i){let p=!1;for(let w of c.getPairs())if(g.equals(w)){p=!0;break}if(!p){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(i){let o=es.buildBitArray(i),f=Bc(o).parseInformation(),g=i[0].getFinderPattern().getResultPoints(),p=i[i.length-1].getFinderPattern().getResultPoints(),w=[g[0],g[1],p[0],p[1]];return new Be(f,null,null,w,Ee.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),o=i.getLeftChar(),c=i.getRightChar();if(c==null)return!1;let f=c.getChecksumPortion(),g=2;for(let w=1;w<this.pairs.size();++w){let C=this.pairs.get(w);f+=C.getLeftChar().getChecksumPortion(),g++;let _=C.getRightChar();_!=null&&(f+=_.getChecksumPortion(),g++)}return f%=211,211*(g-4)+f==o.getValue()}static getNextSecondBar(i,o){let c;return i.get(o)?(c=i.getNextUnset(o),c=i.getNextSet(c)):(c=i.getNextSet(o),c=i.getNextUnset(c)),c}retrieveNextPair(i,o,c){let f=o.length%2==0;this.startFromEven&&(f=!f);let g,p=!0,w=-1;do this.findNextPair(i,o,w),g=this.parseFoundFinderPattern(i,c,f),g==null?w=Ne.getNextSecondBar(i,this.startEnd[0]):p=!1;while(p);let C=this.decodeDataCharacter(i,g,f,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new se;let _;try{_=this.decodeDataCharacter(i,g,f,!1)}catch(O){_=null,this.verbose&&console.log(O)}return new Ii(C,_,g,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,o,c){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let g=i.getSize(),p;c>=0?p=c:this.isEmptyPair(o)?p=0:p=o[o.length-1].getFinderPattern().getStartEnd()[1];let w=o.length%2!=0;this.startFromEven&&(w=!w);let C=!1;for(;p<g&&(C=!i.get(p),!!C);)p++;let _=0,O=p;for(let L=p;L<g;L++)if(i.get(L)!=C)f[_]++;else{if(_==3){if(w&&Ne.reverseCounters(f),Ne.isFinderPattern(f)){this.startEnd[0]=O,this.startEnd[1]=L;return}w&&Ne.reverseCounters(f),O+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,_--}else _++;f[_]=1,C=!C}throw new se}static reverseCounters(i){let o=i.length;for(let c=0;c<o/2;++c){let f=i[c];i[c]=i[o-c-1],i[o-c-1]=f}}parseFoundFinderPattern(i,o,c){let f,g,p;if(c){let _=this.startEnd[0]-1;for(;_>=0&&!i.get(_);)_--;_++,f=this.startEnd[0]-_,g=_,p=this.startEnd[1]}else g=this.startEnd[0],p=i.getNextUnset(this.startEnd[1]+1),f=p-this.startEnd[1];let w=this.getDecodeFinderCounters();j.arraycopy(w,0,w,1,w.length-1),w[0]=f;let C;try{C=this.parseFinderValue(w,Ne.FINDER_PATTERNS)}catch{return null}return new dl(C,[g,p],g,p,o)}decodeDataCharacter(i,o,c,f){let g=this.getDataCharacterCounters();for(let Wt=0;Wt<g.length;Wt++)g[Wt]=0;if(f)Ne.recordPatternInReverse(i,o.getStartEnd()[0],g);else{Ne.recordPattern(i,o.getStartEnd()[1],g);for(let Wt=0,Wn=g.length-1;Wt<Wn;Wt++,Wn--){let ws=g[Wt];g[Wt]=g[Wn],g[Wn]=ws}}let p=17,w=Ge.sum(new Int32Array(g))/p,C=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(w-C)/C>.3)throw new se;let _=this.getOddCounts(),O=this.getEvenCounts(),L=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let Wt=0;Wt<g.length;Wt++){let Wn=1*g[Wt]/w,ws=Wn+.5;if(ws<1){if(Wn<.3)throw new se;ws=1}else if(ws>8){if(Wn>8.7)throw new se;ws=8}let Rr=Wt/2;(Wt&1)==0?(_[Rr]=ws,L[Rr]=Wn-ws):(O[Rr]=ws,B[Rr]=Wn-ws)}this.adjustOddEvenCounts(p);let q=4*o.getValue()+(c?0:2)+(f?0:1)-1,Q=0,ee=0;for(let Wt=_.length-1;Wt>=0;Wt--){if(Ne.isNotA1left(o,c,f)){let Wn=Ne.WEIGHTS[q][2*Wt];ee+=_[Wt]*Wn}Q+=_[Wt]}let ue=0;for(let Wt=O.length-1;Wt>=0;Wt--)if(Ne.isNotA1left(o,c,f)){let Wn=Ne.WEIGHTS[q][2*Wt+1];ue+=O[Wt]*Wn}let xe=ee+ue;if((Q&1)!=0||Q>13||Q<4)throw new se;let ke=(13-Q)/2,Pe=Ne.SYMBOL_WIDEST[ke],Me=9-Pe,mt=$n.getRSSvalue(_,Pe,!0),ht=$n.getRSSvalue(O,Me,!1),us=Ne.EVEN_TOTAL_SUBSET[ke],Fs=Ne.GSUM[ke],bs=mt*us+ht+Fs;return new Er(bs,xe)}static isNotA1left(i,o,c){return!(i.getValue()==0&&o&&c)}adjustOddEvenCounts(i){let o=Ge.sum(new Int32Array(this.getOddCounts())),c=Ge.sum(new Int32Array(this.getEvenCounts())),f=!1,g=!1;o>13?g=!0:o<4&&(f=!0);let p=!1,w=!1;c>13?w=!0:c<4&&(p=!0);let C=o+c-i,_=(o&1)==1,O=(c&1)==0;if(C==1)if(_){if(O)throw new se;g=!0}else{if(!O)throw new se;w=!0}else if(C==-1)if(_){if(O)throw new se;f=!0}else{if(!O)throw new se;p=!0}else if(C==0){if(_){if(!O)throw new se;o<c?(f=!0,w=!0):(g=!0,p=!0)}else if(O)throw new se}else throw new se;if(f){if(g)throw new se;Ne.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&Ne.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(w)throw new se;Ne.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Ne.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ne.SYMBOL_WIDEST=[7,5,4,3,1],Ne.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ne.GSUM=[0,348,1388,2948,3988],Ne.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ne.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ne.FINDER_PAT_A=0,Ne.FINDER_PAT_B=1,Ne.FINDER_PAT_C=2,Ne.FINDER_PAT_D=3,Ne.FINDER_PAT_E=4,Ne.FINDER_PAT_F=5,Ne.FINDER_PATTERN_SEQUENCES=[[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_C,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_C],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_E],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F]],Ne.MAX_PAIRS=11;class fl extends Er{constructor(i,o,c){super(i,o),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Vt extends Un{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,o,c){const f=this.decodePair(o,!1,i,c);Vt.addOrTally(this.possibleLeftPairs,f),o.reverse();let g=this.decodePair(o,!0,i,c);Vt.addOrTally(this.possibleRightPairs,g),o.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let w of this.possibleRightPairs)if(w.getCount()>1&&Vt.checkChecksum(p,w))return Vt.constructResult(p,w)}throw new se}static addOrTally(i,o){if(o==null)return;let c=!1;for(let f of i)if(f.getValue()===o.getValue()){f.incrementCount(),c=!0;break}c||i.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,o){let c=4537077*i.getValue()+o.getValue(),f=new String(c).toString(),g=new ce;for(let _=13-f.length;_>0;_--)g.append("0");g.append(f);let p=0;for(let _=0;_<13;_++){let O=g.charAt(_).charCodeAt(0)-48;p+=(_&1)===0?3*O:O}p=10-p%10,p===10&&(p=0),g.append(p.toString());let w=i.getFinderPattern().getResultPoints(),C=o.getFinderPattern().getResultPoints();return new Be(g.toString(),null,0,[w[0],w[1],C[0],C[1]],Ee.RSS_14,new Date().getTime())}static checkChecksum(i,o){let c=(i.getChecksumPortion()+16*o.getChecksumPortion())%79,f=9*i.getFinderPattern().getValue()+o.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,c===f}decodePair(i,o,c,f){try{let g=this.findFinderPattern(i,o),p=this.parseFoundFinderPattern(i,c,o,g),w=f==null?null:f.get(Z.NEED_RESULT_POINT_CALLBACK);if(w!=null){let O=(g[0]+g[1])/2;o&&(O=i.getSize()-1-O),w.foundPossibleResultPoint(new He(O,c))}let C=this.decodeDataCharacter(i,p,!0),_=this.decodeDataCharacter(i,p,!1);return new fl(1597*C.getValue()+_.getValue(),C.getChecksumPortion()+4*_.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(i,o,c){let f=this.getDataCharacterCounters();for(let ue=0;ue<f.length;ue++)f[ue]=0;if(c)St.recordPatternInReverse(i,o.getStartEnd()[0],f);else{St.recordPattern(i,o.getStartEnd()[1]+1,f);for(let ue=0,xe=f.length-1;ue<xe;ue++,xe--){let ke=f[ue];f[ue]=f[xe],f[xe]=ke}}let g=c?16:15,p=Ge.sum(new Int32Array(f))/g,w=this.getOddCounts(),C=this.getEvenCounts(),_=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors();for(let ue=0;ue<f.length;ue++){let xe=f[ue]/p,ke=Math.floor(xe+.5);ke<1?ke=1:ke>8&&(ke=8);let Pe=Math.floor(ue/2);(ue&1)===0?(w[Pe]=ke,_[Pe]=xe-ke):(C[Pe]=ke,O[Pe]=xe-ke)}this.adjustOddEvenCounts(c,g);let L=0,B=0;for(let ue=w.length-1;ue>=0;ue--)B*=9,B+=w[ue],L+=w[ue];let q=0,Q=0;for(let ue=C.length-1;ue>=0;ue--)q*=9,q+=C[ue],Q+=C[ue];let ee=B+3*q;if(c){if((L&1)!==0||L>12||L<4)throw new se;let ue=(12-L)/2,xe=Vt.OUTSIDE_ODD_WIDEST[ue],ke=9-xe,Pe=$n.getRSSvalue(w,xe,!1),Me=$n.getRSSvalue(C,ke,!0),mt=Vt.OUTSIDE_EVEN_TOTAL_SUBSET[ue],ht=Vt.OUTSIDE_GSUM[ue];return new Er(Pe*mt+Me+ht,ee)}else{if((Q&1)!==0||Q>10||Q<4)throw new se;let ue=(10-Q)/2,xe=Vt.INSIDE_ODD_WIDEST[ue],ke=9-xe,Pe=$n.getRSSvalue(w,xe,!0),Me=$n.getRSSvalue(C,ke,!1),mt=Vt.INSIDE_ODD_TOTAL_SUBSET[ue],ht=Vt.INSIDE_GSUM[ue];return new Er(Me*mt+Pe+ht,ee)}}findFinderPattern(i,o){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let f=i.getSize(),g=!1,p=0;for(;p<f&&(g=!i.get(p),o!==g);)p++;let w=0,C=p;for(let _=p;_<f;_++)if(i.get(_)!==g)c[w]++;else{if(w===3){if(Un.isFinderPattern(c))return[C,_];C+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,g=!g}throw new se}parseFoundFinderPattern(i,o,c,f){let g=i.get(f[0]),p=f[0]-1;for(;p>=0&&g!==i.get(p);)p--;p++;const w=f[0]-p,C=this.getDecodeFinderCounters(),_=new Int32Array(C.length);j.arraycopy(C,0,_,1,C.length-1),_[0]=w;const O=this.parseFinderValue(_,Vt.FINDER_PATTERNS);let L=p,B=f[1];return c&&(L=i.getSize()-1-L,B=i.getSize()-1-B),new dl(O,[p,f[1]],L,B,o)}adjustOddEvenCounts(i,o){let c=Ge.sum(new Int32Array(this.getOddCounts())),f=Ge.sum(new Int32Array(this.getEvenCounts())),g=!1,p=!1,w=!1,C=!1;i?(c>12?p=!0:c<4&&(g=!0),f>12?C=!0:f<4&&(w=!0)):(c>11?p=!0:c<5&&(g=!0),f>10?C=!0:f<4&&(w=!0));let _=c+f-o,O=(c&1)===(i?1:0),L=(f&1)===1;if(_===1)if(O){if(L)throw new se;p=!0}else{if(!L)throw new se;C=!0}else if(_===-1)if(O){if(L)throw new se;g=!0}else{if(!L)throw new se;w=!0}else if(_===0){if(O){if(!L)throw new se;c<f?(g=!0,C=!0):(p=!0,w=!0)}else if(L)throw new se}else throw new se;if(g){if(p)throw new se;Un.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&Un.decrement(this.getOddCounts(),this.getOddRoundingErrors()),w){if(C)throw new se;Un.increment(this.getEvenCounts(),this.getOddRoundingErrors())}C&&Un.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Vt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Vt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Vt.OUTSIDE_GSUM=[0,161,961,2015,2715],Vt.INSIDE_GSUM=[0,336,1036,1516],Vt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Vt.INSIDE_ODD_WIDEST=[2,4,6,8],Vt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ki extends St{constructor(i,o){super(),this.readers=[],this.verbose=o===!0;const c=i?i.get(Z.POSSIBLE_FORMATS):null,f=i&&i.get(Z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(Ee.EAN_13)||c.includes(Ee.UPC_A)||c.includes(Ee.EAN_8)||c.includes(Ee.UPC_E))&&this.readers.push(new fo(i)),c.includes(Ee.CODE_39)&&this.readers.push(new kt(f)),c.includes(Ee.CODE_128)&&this.readers.push(new je),c.includes(Ee.ITF)&&this.readers.push(new Nt),c.includes(Ee.RSS_14)&&this.readers.push(new Vt),c.includes(Ee.RSS_EXPANDED)&&this.readers.push(new Ne(this.verbose))):(this.readers.push(new fo(i)),this.readers.push(new kt),this.readers.push(new fo(i)),this.readers.push(new je),this.readers.push(new Nt),this.readers.push(new Vt),this.readers.push(new Ne(this.verbose)))}decodeRow(i,o,c){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(i,o,c)}catch{}throw new se}reset(){this.readers.forEach(i=>i.reset())}}class Pd extends pe{constructor(i=500,o){super(new Ki(o),i,o)}}class Rt{constructor(i,o,c){this.ecCodewords=i,this.ecBlocks=[o],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Lt{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Et{constructor(i,o,c,f,g,p){this.versionNumber=i,this.symbolSizeRows=o,this.symbolSizeColumns=c,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=g,this.ecBlocks=p;let w=0;const C=p.getECCodewords(),_=p.getECBlocks();for(let O of _)w+=O.getCount()*(O.getDataCodewords()+C);this.totalCodewords=w}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,o){if((i&1)!==0||(o&1)!==0)throw new W;for(let c of Et.VERSIONS)if(c.symbolSizeRows===i&&c.symbolSizeColumns===o)return c;throw new W}toString(){return""+this.versionNumber}static buildVersions(){return[new Et(1,10,10,8,8,new Rt(5,new Lt(1,3))),new Et(2,12,12,10,10,new Rt(7,new Lt(1,5))),new Et(3,14,14,12,12,new Rt(10,new Lt(1,8))),new Et(4,16,16,14,14,new Rt(12,new Lt(1,12))),new Et(5,18,18,16,16,new Rt(14,new Lt(1,18))),new Et(6,20,20,18,18,new Rt(18,new Lt(1,22))),new Et(7,22,22,20,20,new Rt(20,new Lt(1,30))),new Et(8,24,24,22,22,new Rt(24,new Lt(1,36))),new Et(9,26,26,24,24,new Rt(28,new Lt(1,44))),new Et(10,32,32,14,14,new Rt(36,new Lt(1,62))),new Et(11,36,36,16,16,new Rt(42,new Lt(1,86))),new Et(12,40,40,18,18,new Rt(48,new Lt(1,114))),new Et(13,44,44,20,20,new Rt(56,new Lt(1,144))),new Et(14,48,48,22,22,new Rt(68,new Lt(1,174))),new Et(15,52,52,24,24,new Rt(42,new Lt(2,102))),new Et(16,64,64,14,14,new Rt(56,new Lt(2,140))),new Et(17,72,72,16,16,new Rt(36,new Lt(4,92))),new Et(18,80,80,18,18,new Rt(48,new Lt(4,114))),new Et(19,88,88,20,20,new Rt(56,new Lt(4,144))),new Et(20,96,96,22,22,new Rt(68,new Lt(4,174))),new Et(21,104,104,24,24,new Rt(56,new Lt(6,136))),new Et(22,120,120,18,18,new Rt(68,new Lt(6,175))),new Et(23,132,132,20,20,new Rt(62,new Lt(8,163))),new Et(24,144,144,22,22,new Rt(62,new Lt(8,156),new Lt(2,155))),new Et(25,8,18,6,16,new Rt(7,new Lt(1,5))),new Et(26,8,32,6,14,new Rt(11,new Lt(1,10))),new Et(27,12,26,10,24,new Rt(14,new Lt(1,16))),new Et(28,12,36,10,16,new Rt(18,new Lt(1,22))),new Et(29,16,36,14,16,new Rt(24,new Lt(1,32))),new Et(30,16,48,14,22,new Rt(28,new Lt(1,49)))]}}Et.VERSIONS=Et.buildVersions();class Fc{constructor(i){const o=i.getHeight();if(o<8||o>144||(o&1)!==0)throw new W;this.version=Fc.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new Fe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const o=i.getHeight(),c=i.getWidth();return Et.getVersionForDimensions(o,c)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let o=0,c=4,f=0;const g=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let w=!1,C=!1,_=!1,O=!1;do if(c===g&&f===0&&!w)i[o++]=this.readCorner1(g,p)&255,c-=2,f+=2,w=!0;else if(c===g-2&&f===0&&(p&3)!==0&&!C)i[o++]=this.readCorner2(g,p)&255,c-=2,f+=2,C=!0;else if(c===g+4&&f===2&&(p&7)===0&&!_)i[o++]=this.readCorner3(g,p)&255,c-=2,f+=2,_=!0;else if(c===g-2&&f===0&&(p&7)===4&&!O)i[o++]=this.readCorner4(g,p)&255,c-=2,f+=2,O=!0;else{do c<g&&f>=0&&!this.readMappingMatrix.get(f,c)&&(i[o++]=this.readUtah(c,f,g,p)&255),c-=2,f+=2;while(c>=0&&f<p);c+=1,f+=3;do c>=0&&f<p&&!this.readMappingMatrix.get(f,c)&&(i[o++]=this.readUtah(c,f,g,p)&255),c+=2,f-=2;while(c<g&&f>=0);c+=3,f+=1}while(c<g||f<p);if(o!==this.version.getTotalCodewords())throw new W;return i}readModule(i,o,c,f){return i<0&&(i+=c,o+=4-(c+4&7)),o<0&&(o+=f,i+=4-(f+4&7)),this.readMappingMatrix.set(o,i),this.mappingBitMatrix.get(o,i)}readUtah(i,o,c,f){let g=0;return this.readModule(i-2,o-2,c,f)&&(g|=1),g<<=1,this.readModule(i-2,o-1,c,f)&&(g|=1),g<<=1,this.readModule(i-1,o-2,c,f)&&(g|=1),g<<=1,this.readModule(i-1,o-1,c,f)&&(g|=1),g<<=1,this.readModule(i-1,o,c,f)&&(g|=1),g<<=1,this.readModule(i,o-2,c,f)&&(g|=1),g<<=1,this.readModule(i,o-1,c,f)&&(g|=1),g<<=1,this.readModule(i,o,c,f)&&(g|=1),g}readCorner1(i,o){let c=0;return this.readModule(i-1,0,i,o)&&(c|=1),c<<=1,this.readModule(i-1,1,i,o)&&(c|=1),c<<=1,this.readModule(i-1,2,i,o)&&(c|=1),c<<=1,this.readModule(0,o-2,i,o)&&(c|=1),c<<=1,this.readModule(0,o-1,i,o)&&(c|=1),c<<=1,this.readModule(1,o-1,i,o)&&(c|=1),c<<=1,this.readModule(2,o-1,i,o)&&(c|=1),c<<=1,this.readModule(3,o-1,i,o)&&(c|=1),c}readCorner2(i,o){let c=0;return this.readModule(i-3,0,i,o)&&(c|=1),c<<=1,this.readModule(i-2,0,i,o)&&(c|=1),c<<=1,this.readModule(i-1,0,i,o)&&(c|=1),c<<=1,this.readModule(0,o-4,i,o)&&(c|=1),c<<=1,this.readModule(0,o-3,i,o)&&(c|=1),c<<=1,this.readModule(0,o-2,i,o)&&(c|=1),c<<=1,this.readModule(0,o-1,i,o)&&(c|=1),c<<=1,this.readModule(1,o-1,i,o)&&(c|=1),c}readCorner3(i,o){let c=0;return this.readModule(i-1,0,i,o)&&(c|=1),c<<=1,this.readModule(i-1,o-1,i,o)&&(c|=1),c<<=1,this.readModule(0,o-3,i,o)&&(c|=1),c<<=1,this.readModule(0,o-2,i,o)&&(c|=1),c<<=1,this.readModule(0,o-1,i,o)&&(c|=1),c<<=1,this.readModule(1,o-3,i,o)&&(c|=1),c<<=1,this.readModule(1,o-2,i,o)&&(c|=1),c<<=1,this.readModule(1,o-1,i,o)&&(c|=1),c}readCorner4(i,o){let c=0;return this.readModule(i-3,0,i,o)&&(c|=1),c<<=1,this.readModule(i-2,0,i,o)&&(c|=1),c<<=1,this.readModule(i-1,0,i,o)&&(c|=1),c<<=1,this.readModule(0,o-2,i,o)&&(c|=1),c<<=1,this.readModule(0,o-1,i,o)&&(c|=1),c<<=1,this.readModule(1,o-1,i,o)&&(c|=1),c<<=1,this.readModule(2,o-1,i,o)&&(c|=1),c<<=1,this.readModule(3,o-1,i,o)&&(c|=1),c}extractDataRegion(i){const o=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(i.getHeight()!==o)throw new A("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),g=this.version.getDataRegionSizeColumns(),p=o/f|0,w=c/g|0,C=p*f,_=w*g,O=new Fe(_,C);for(let L=0;L<p;++L){const B=L*f;for(let q=0;q<w;++q){const Q=q*g;for(let ee=0;ee<f;++ee){const ue=L*(f+2)+1+ee,xe=B+ee;for(let ke=0;ke<g;++ke){const Pe=q*(g+2)+1+ke;if(i.get(Pe,ue)){const Me=Q+ke;O.set(Me,xe)}}}}}return O}}class hl{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o){const c=o.getECBlocks();let f=0;const g=c.getECBlocks();for(let ee of g)f+=ee.getCount();const p=new Array(f);let w=0;for(let ee of g)for(let ue=0;ue<ee.getCount();ue++){const xe=ee.getDataCodewords(),ke=c.getECCodewords()+xe;p[w++]=new hl(xe,new Uint8Array(ke))}const _=p[0].codewords.length-c.getECCodewords(),O=_-1;let L=0;for(let ee=0;ee<O;ee++)for(let ue=0;ue<w;ue++)p[ue].codewords[ee]=i[L++];const B=o.getVersionNumber()===24,q=B?8:w;for(let ee=0;ee<q;ee++)p[ee].codewords[_-1]=i[L++];const Q=p[0].codewords.length;for(let ee=_;ee<Q;ee++)for(let ue=0;ue<w;ue++){const xe=B?(ue+8)%w:ue,ke=B&&xe>7?ee-1:ee;p[xe].codewords[ke]=i[L++]}if(L!==i.length)throw new A;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ps{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new A(""+i);let o=0,c=this.bitOffset,f=this.byteOffset;const g=this.bytes;if(c>0){const p=8-c,w=i<p?i:p,C=p-w,_=255>>8-w<<C;o=(g[f]&_)>>C,i-=w,c+=w,c===8&&(c=0,f++)}if(i>0){for(;i>=8;)o=o<<8|g[f]&255,f++,i-=8;if(i>0){const p=8-i,w=255>>p<<p;o=o<<i|(g[f]&w)>>p,c+=i}}return this.bitOffset=c,this.byteOffset=f,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var En;(function(k){k[k.PAD_ENCODE=0]="PAD_ENCODE",k[k.ASCII_ENCODE=1]="ASCII_ENCODE",k[k.C40_ENCODE=2]="C40_ENCODE",k[k.TEXT_ENCODE=3]="TEXT_ENCODE",k[k.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",k[k.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",k[k.BASE256_ENCODE=6]="BASE256_ENCODE"})(En||(En={}));class Zi{static decode(i){const o=new ps(i),c=new ce,f=new ce,g=new Array;let p=En.ASCII_ENCODE;do if(p===En.ASCII_ENCODE)p=this.decodeAsciiSegment(o,c,f);else{switch(p){case En.C40_ENCODE:this.decodeC40Segment(o,c);break;case En.TEXT_ENCODE:this.decodeTextSegment(o,c);break;case En.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,c);break;case En.EDIFACT_ENCODE:this.decodeEdifactSegment(o,c);break;case En.BASE256_ENCODE:this.decodeBase256Segment(o,c,g);break;default:throw new W}p=En.ASCII_ENCODE}while(p!==En.PAD_ENCODE&&o.available()>0);return f.length()>0&&c.append(f.toString()),new pt(i,c.toString(),g.length===0?null:g,null)}static decodeAsciiSegment(i,o,c){let f=!1;do{let g=i.readBits(8);if(g===0)throw new W;if(g<=128)return f&&(g+=128),o.append(String.fromCharCode(g-1)),En.ASCII_ENCODE;if(g===129)return En.PAD_ENCODE;if(g<=229){const p=g-130;p<10&&o.append("0"),o.append(""+p)}else switch(g){case 230:return En.C40_ENCODE;case 231:return En.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:o.append("[)>05"),c.insert(0,"");break;case 237:o.append("[)>06"),c.insert(0,"");break;case 238:return En.ANSIX12_ENCODE;case 239:return En.TEXT_ENCODE;case 240:return En.EDIFACT_ENCODE;case 241:break;default:if(g!==254||i.available()!==0)throw new W;break}}while(i.available()>0);return En.ASCII_ENCODE}static decodeC40Segment(i,o){let c=!1;const f=[];let g=0;do{if(i.available()===8)return;const p=i.readBits(8);if(p===254)return;this.parseTwoBytes(p,i.readBits(8),f);for(let w=0;w<3;w++){const C=f[w];switch(g){case 0:if(C<3)g=C+1;else if(C<this.C40_BASIC_SET_CHARS.length){const _=this.C40_BASIC_SET_CHARS[C];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_)}else throw new W;break;case 1:c?(o.append(String.fromCharCode(C+128)),c=!1):o.append(String.fromCharCode(C)),g=0;break;case 2:if(C<this.C40_SHIFT2_SET_CHARS.length){const _=this.C40_SHIFT2_SET_CHARS[C];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_)}else switch(C){case 27:o.append("");break;case 30:c=!0;break;default:throw new W}g=0;break;case 3:c?(o.append(String.fromCharCode(C+224)),c=!1):o.append(String.fromCharCode(C+96)),g=0;break;default:throw new W}}}while(i.available()>0)}static decodeTextSegment(i,o){let c=!1,f=[],g=0;do{if(i.available()===8)return;const p=i.readBits(8);if(p===254)return;this.parseTwoBytes(p,i.readBits(8),f);for(let w=0;w<3;w++){const C=f[w];switch(g){case 0:if(C<3)g=C+1;else if(C<this.TEXT_BASIC_SET_CHARS.length){const _=this.TEXT_BASIC_SET_CHARS[C];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_)}else throw new W;break;case 1:c?(o.append(String.fromCharCode(C+128)),c=!1):o.append(String.fromCharCode(C)),g=0;break;case 2:if(C<this.TEXT_SHIFT2_SET_CHARS.length){const _=this.TEXT_SHIFT2_SET_CHARS[C];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_)}else switch(C){case 27:o.append("");break;case 30:c=!0;break;default:throw new W}g=0;break;case 3:if(C<this.TEXT_SHIFT3_SET_CHARS.length){const _=this.TEXT_SHIFT3_SET_CHARS[C];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_),g=0}else throw new W;break;default:throw new W}}}while(i.available()>0)}static decodeAnsiX12Segment(i,o){const c=[];do{if(i.available()===8)return;const f=i.readBits(8);if(f===254)return;this.parseTwoBytes(f,i.readBits(8),c);for(let g=0;g<3;g++){const p=c[g];switch(p){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(p<14)o.append(String.fromCharCode(p+44));else if(p<40)o.append(String.fromCharCode(p+51));else throw new W;break}}}while(i.available()>0)}static parseTwoBytes(i,o,c){let f=(i<<8)+o-1,g=Math.floor(f/1600);c[0]=g,f-=g*1600,g=Math.floor(f/40),c[1]=g,c[2]=f-g*40}static decodeEdifactSegment(i,o){do{if(i.available()<=16)return;for(let c=0;c<4;c++){let f=i.readBits(6);if(f===31){const g=8-i.getBitOffset();g!==8&&i.readBits(g);return}(f&32)===0&&(f|=64),o.append(String.fromCharCode(f))}}while(i.available()>0)}static decodeBase256Segment(i,o,c){let f=1+i.getByteOffset();const g=this.unrandomize255State(i.readBits(8),f++);let p;if(g===0?p=i.available()/8|0:g<250?p=g:p=250*(g-249)+this.unrandomize255State(i.readBits(8),f++),p<0)throw new W;const w=new Uint8Array(p);for(let C=0;C<p;C++){if(i.available()<8)throw new W;w[C]=this.unrandomize255State(i.readBits(8),f++)}c.push(w);try{o.append(Ae.decode(w,ve.ISO88591))}catch(C){throw new Oe("Platform does not support required encoding: "+C.message)}}static unrandomize255State(i,o){const c=149*o%255+1,f=i-c;return f>=0?f:f+256}}Zi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Zi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Zi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Zi.TEXT_SHIFT2_SET_CHARS=Zi.C40_SHIFT2_SET_CHARS,Zi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class gl{constructor(){this.rsDecoder=new Le(Se.DATA_MATRIX_FIELD_256)}decode(i){const o=new Fc(i),c=o.getVersion(),f=o.readCodewords(),g=hl.getDataBlocks(f,c);let p=0;for(let _ of g)p+=_.getNumDataCodewords();const w=new Uint8Array(p),C=g.length;for(let _=0;_<C;_++){const O=g[_],L=O.getCodewords(),B=O.getNumDataCodewords();this.correctErrors(L,B);for(let q=0;q<B;q++)w[q*C+_]=L[q]}return Zi.decode(w)}correctErrors(i,o){const c=new Int32Array(i);try{this.rsDecoder.decode(c,i.length-o)}catch{throw new I}for(let f=0;f<o;f++)i[f]=c[f]}}class fn{constructor(i){this.image=i,this.rectangleDetector=new Ls(this.image)}detect(){const i=this.rectangleDetector.detect();let o=this.detectSolid1(i);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new se;o=this.shiftToModuleCenter(o);const c=o[0],f=o[1],g=o[2],p=o[3];let w=this.transitionsBetween(c,p)+1,C=this.transitionsBetween(g,p)+1;(w&1)===1&&(w+=1),(C&1)===1&&(C+=1),4*w<7*C&&4*C<7*w&&(w=C=Math.max(w,C));let _=fn.sampleGrid(this.image,c,f,g,p,w,C);return new ui(_,[c,f,g,p])}static shiftPoint(i,o,c){let f=(o.getX()-i.getX())/(c+1),g=(o.getY()-i.getY())/(c+1);return new He(i.getX()+f,i.getY()+g)}static moveAway(i,o,c){let f=i.getX(),g=i.getY();return f<o?f-=1:f+=1,g<c?g-=1:g+=1,new He(f,g)}detectSolid1(i){let o=i[0],c=i[1],f=i[3],g=i[2],p=this.transitionsBetween(o,c),w=this.transitionsBetween(c,f),C=this.transitionsBetween(f,g),_=this.transitionsBetween(g,o),O=p,L=[g,o,c,f];return O>w&&(O=w,L[0]=o,L[1]=c,L[2]=f,L[3]=g),O>C&&(O=C,L[0]=c,L[1]=f,L[2]=g,L[3]=o),O>_&&(L[0]=f,L[1]=g,L[2]=o,L[3]=c),L}detectSolid2(i){let o=i[0],c=i[1],f=i[2],g=i[3],p=this.transitionsBetween(o,g),w=fn.shiftPoint(c,f,(p+1)*4),C=fn.shiftPoint(f,c,(p+1)*4),_=this.transitionsBetween(w,o),O=this.transitionsBetween(C,g);return _<O?(i[0]=o,i[1]=c,i[2]=f,i[3]=g):(i[0]=c,i[1]=f,i[2]=g,i[3]=o),i}correctTopRight(i){let o=i[0],c=i[1],f=i[2],g=i[3],p=this.transitionsBetween(o,g),w=this.transitionsBetween(c,g),C=fn.shiftPoint(o,c,(w+1)*4),_=fn.shiftPoint(f,c,(p+1)*4);p=this.transitionsBetween(C,g),w=this.transitionsBetween(_,g);let O=new He(g.getX()+(f.getX()-c.getX())/(p+1),g.getY()+(f.getY()-c.getY())/(p+1)),L=new He(g.getX()+(o.getX()-c.getX())/(w+1),g.getY()+(o.getY()-c.getY())/(w+1));if(!this.isValid(O))return this.isValid(L)?L:null;if(!this.isValid(L))return O;let B=this.transitionsBetween(C,O)+this.transitionsBetween(_,O),q=this.transitionsBetween(C,L)+this.transitionsBetween(_,L);return B>q?O:L}shiftToModuleCenter(i){let o=i[0],c=i[1],f=i[2],g=i[3],p=this.transitionsBetween(o,g)+1,w=this.transitionsBetween(f,g)+1,C=fn.shiftPoint(o,c,w*4),_=fn.shiftPoint(f,c,p*4);p=this.transitionsBetween(C,g)+1,w=this.transitionsBetween(_,g)+1,(p&1)===1&&(p+=1),(w&1)===1&&(w+=1);let O=(o.getX()+c.getX()+f.getX()+g.getX())/4,L=(o.getY()+c.getY()+f.getY()+g.getY())/4;o=fn.moveAway(o,O,L),c=fn.moveAway(c,O,L),f=fn.moveAway(f,O,L),g=fn.moveAway(g,O,L);let B,q;return C=fn.shiftPoint(o,c,w*4),C=fn.shiftPoint(C,g,p*4),B=fn.shiftPoint(c,o,w*4),B=fn.shiftPoint(B,f,p*4),_=fn.shiftPoint(f,g,w*4),_=fn.shiftPoint(_,c,p*4),q=fn.shiftPoint(g,f,w*4),q=fn.shiftPoint(q,o,p*4),[C,B,_,q]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,o,c,f,g,p,w){return at.getInstance().sampleGrid(i,p,w,.5,.5,p-.5,.5,p-.5,w-.5,.5,w-.5,o.getX(),o.getY(),g.getX(),g.getY(),f.getX(),f.getY(),c.getX(),c.getY())}transitionsBetween(i,o){let c=Math.trunc(i.getX()),f=Math.trunc(i.getY()),g=Math.trunc(o.getX()),p=Math.trunc(o.getY()),w=Math.abs(p-f)>Math.abs(g-c);if(w){let ee=c;c=f,f=ee,ee=g,g=p,p=ee}let C=Math.abs(g-c),_=Math.abs(p-f),O=-C/2,L=f<p?1:-1,B=c<g?1:-1,q=0,Q=this.image.get(w?f:c,w?c:f);for(let ee=c,ue=f;ee!==g;ee+=B){let xe=this.image.get(w?ue:ee,w?ee:ue);if(xe!==Q&&(q++,Q=xe),O+=_,O>0){if(ue===p)break;ue+=L,O-=C}}return q}}class Qs{constructor(){this.decoder=new gl}decode(i,o=null){let c,f;if(o!=null&&o.has(Z.PURE_BARCODE)){const _=Qs.extractPureBits(i.getBlackMatrix());c=this.decoder.decode(_),f=Qs.NO_POINTS}else{const _=new fn(i.getBlackMatrix()).detect();c=this.decoder.decode(_.getBits()),f=_.getPoints()}const g=c.getRawBytes(),p=new Be(c.getText(),g,8*g.length,f,Ee.DATA_MATRIX,j.currentTimeMillis()),w=c.getByteSegments();w!=null&&p.putMetadata(Ze.BYTE_SEGMENTS,w);const C=c.getECLevel();return C!=null&&p.putMetadata(Ze.ERROR_CORRECTION_LEVEL,C),p}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),c=i.getBottomRightOnBit();if(o==null||c==null)throw new se;const f=this.moduleSize(o,i);let g=o[1];const p=c[1];let w=o[0];const _=(c[0]-w+1)/f,O=(p-g+1)/f;if(_<=0||O<=0)throw new se;const L=f/2;g+=L,w+=L;const B=new Fe(_,O);for(let q=0;q<O;q++){const Q=g+q*f;for(let ee=0;ee<_;ee++)i.get(w+ee*f,Q)&&B.set(ee,q)}return B}static moduleSize(i,o){const c=o.getWidth();let f=i[0];const g=i[1];for(;f<c&&o.get(f,g);)f++;if(f===c)throw new se;const p=f-i[0];if(p===0)throw new se;return p}}Qs.NO_POINTS=[];class n0 extends pe{constructor(i=500){super(new Qs,i)}}var Gn;(function(k){k[k.L=0]="L",k[k.M=1]="M",k[k.Q=2]="Q",k[k.H=3]="H"})(Gn||(Gn={}));class $t{constructor(i,o,c){this.value=i,this.stringValue=o,this.bits=c,$t.FOR_BITS.set(c,this),$t.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return $t.L;case"M":return $t.M;case"Q":return $t.Q;case"H":return $t.H;default:throw new S(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof $t))return!1;const o=i;return this.value===o.value}static forBits(i){if(i<0||i>=$t.FOR_BITS.size)throw new A;return $t.FOR_BITS.get(i)}}$t.FOR_BITS=new Map,$t.FOR_VALUE=new Map,$t.L=new $t(Gn.L,"L",1),$t.M=new $t(Gn.M,"M",0),$t.Q=new $t(Gn.Q,"Q",3),$t.H=new $t(Gn.H,"H",2);class qn{constructor(i){this.errorCorrectionLevel=$t.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,o){return P.bitCount(i^o)}static decodeFormatInformation(i,o){const c=qn.doDecodeFormatInformation(i,o);return c!==null?c:qn.doDecodeFormatInformation(i^qn.FORMAT_INFO_MASK_QR,o^qn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,o){let c=Number.MAX_SAFE_INTEGER,f=0;for(const g of qn.FORMAT_INFO_DECODE_LOOKUP){const p=g[0];if(p===i||p===o)return new qn(g[1]);let w=qn.numBitsDiffering(i,p);w<c&&(f=g[1],c=w),i!==o&&(w=qn.numBitsDiffering(o,p),w<c&&(f=g[1],c=w))}return c<=3?new qn(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof qn))return!1;const o=i;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}qn.FORMAT_INFO_MASK_QR=21522,qn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class de{constructor(i,...o){this.ecCodewordsPerBlock=i,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const o=this.ecBlocks;for(const c of o)i+=c.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class G{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Qe{constructor(i,o,...c){this.versionNumber=i,this.alignmentPatternCenters=o,this.ecBlocks=c;let f=0;const g=c[0].getECCodewordsPerBlock(),p=c[0].getECBlocks();for(const w of p)f+=w.getCount()*(w.getDataCodewords()+g);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new W;try{return this.getVersionForNumber((i-17)/4)}catch{throw new W}}static getVersionForNumber(i){if(i<1||i>40)throw new A;return Qe.VERSIONS[i-1]}static decodeVersionInformation(i){let o=Number.MAX_SAFE_INTEGER,c=0;for(let f=0;f<Qe.VERSION_DECODE_INFO.length;f++){const g=Qe.VERSION_DECODE_INFO[f];if(g===i)return Qe.getVersionForNumber(f+7);const p=qn.numBitsDiffering(i,g);p<o&&(c=f+7,o=p)}return o<=3?Qe.getVersionForNumber(c):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),o=new Fe(i);o.setRegion(0,0,9,9),o.setRegion(i-8,0,8,9),o.setRegion(0,i-8,9,8);const c=this.alignmentPatternCenters.length;for(let f=0;f<c;f++){const g=this.alignmentPatternCenters[f]-2;for(let p=0;p<c;p++)f===0&&(p===0||p===c-1)||f===c-1&&p===0||o.setRegion(this.alignmentPatternCenters[p]-2,g,5,5)}return o.setRegion(6,9,1,i-17),o.setRegion(9,6,i-17,1),this.versionNumber>6&&(o.setRegion(i-11,0,3,6),o.setRegion(0,i-11,6,3)),o}toString(){return""+this.versionNumber}}Qe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Qe.VERSIONS=[new Qe(1,new Int32Array(0),new de(7,new G(1,19)),new de(10,new G(1,16)),new de(13,new G(1,13)),new de(17,new G(1,9))),new Qe(2,Int32Array.from([6,18]),new de(10,new G(1,34)),new de(16,new G(1,28)),new de(22,new G(1,22)),new de(28,new G(1,16))),new Qe(3,Int32Array.from([6,22]),new de(15,new G(1,55)),new de(26,new G(1,44)),new de(18,new G(2,17)),new de(22,new G(2,13))),new Qe(4,Int32Array.from([6,26]),new de(20,new G(1,80)),new de(18,new G(2,32)),new de(26,new G(2,24)),new de(16,new G(4,9))),new Qe(5,Int32Array.from([6,30]),new de(26,new G(1,108)),new de(24,new G(2,43)),new de(18,new G(2,15),new G(2,16)),new de(22,new G(2,11),new G(2,12))),new Qe(6,Int32Array.from([6,34]),new de(18,new G(2,68)),new de(16,new G(4,27)),new de(24,new G(4,19)),new de(28,new G(4,15))),new Qe(7,Int32Array.from([6,22,38]),new de(20,new G(2,78)),new de(18,new G(4,31)),new de(18,new G(2,14),new G(4,15)),new de(26,new G(4,13),new G(1,14))),new Qe(8,Int32Array.from([6,24,42]),new de(24,new G(2,97)),new de(22,new G(2,38),new G(2,39)),new de(22,new G(4,18),new G(2,19)),new de(26,new G(4,14),new G(2,15))),new Qe(9,Int32Array.from([6,26,46]),new de(30,new G(2,116)),new de(22,new G(3,36),new G(2,37)),new de(20,new G(4,16),new G(4,17)),new de(24,new G(4,12),new G(4,13))),new Qe(10,Int32Array.from([6,28,50]),new de(18,new G(2,68),new G(2,69)),new de(26,new G(4,43),new G(1,44)),new de(24,new G(6,19),new G(2,20)),new de(28,new G(6,15),new G(2,16))),new Qe(11,Int32Array.from([6,30,54]),new de(20,new G(4,81)),new de(30,new G(1,50),new G(4,51)),new de(28,new G(4,22),new G(4,23)),new de(24,new G(3,12),new G(8,13))),new Qe(12,Int32Array.from([6,32,58]),new de(24,new G(2,92),new G(2,93)),new de(22,new G(6,36),new G(2,37)),new de(26,new G(4,20),new G(6,21)),new de(28,new G(7,14),new G(4,15))),new Qe(13,Int32Array.from([6,34,62]),new de(26,new G(4,107)),new de(22,new G(8,37),new G(1,38)),new de(24,new G(8,20),new G(4,21)),new de(22,new G(12,11),new G(4,12))),new Qe(14,Int32Array.from([6,26,46,66]),new de(30,new G(3,115),new G(1,116)),new de(24,new G(4,40),new G(5,41)),new de(20,new G(11,16),new G(5,17)),new de(24,new G(11,12),new G(5,13))),new Qe(15,Int32Array.from([6,26,48,70]),new de(22,new G(5,87),new G(1,88)),new de(24,new G(5,41),new G(5,42)),new de(30,new G(5,24),new G(7,25)),new de(24,new G(11,12),new G(7,13))),new Qe(16,Int32Array.from([6,26,50,74]),new de(24,new G(5,98),new G(1,99)),new de(28,new G(7,45),new G(3,46)),new de(24,new G(15,19),new G(2,20)),new de(30,new G(3,15),new G(13,16))),new Qe(17,Int32Array.from([6,30,54,78]),new de(28,new G(1,107),new G(5,108)),new de(28,new G(10,46),new G(1,47)),new de(28,new G(1,22),new G(15,23)),new de(28,new G(2,14),new G(17,15))),new Qe(18,Int32Array.from([6,30,56,82]),new de(30,new G(5,120),new G(1,121)),new de(26,new G(9,43),new G(4,44)),new de(28,new G(17,22),new G(1,23)),new de(28,new G(2,14),new G(19,15))),new Qe(19,Int32Array.from([6,30,58,86]),new de(28,new G(3,113),new G(4,114)),new de(26,new G(3,44),new G(11,45)),new de(26,new G(17,21),new G(4,22)),new de(26,new G(9,13),new G(16,14))),new Qe(20,Int32Array.from([6,34,62,90]),new de(28,new G(3,107),new G(5,108)),new de(26,new G(3,41),new G(13,42)),new de(30,new G(15,24),new G(5,25)),new de(28,new G(15,15),new G(10,16))),new Qe(21,Int32Array.from([6,28,50,72,94]),new de(28,new G(4,116),new G(4,117)),new de(26,new G(17,42)),new de(28,new G(17,22),new G(6,23)),new de(30,new G(19,16),new G(6,17))),new Qe(22,Int32Array.from([6,26,50,74,98]),new de(28,new G(2,111),new G(7,112)),new de(28,new G(17,46)),new de(30,new G(7,24),new G(16,25)),new de(24,new G(34,13))),new Qe(23,Int32Array.from([6,30,54,78,102]),new de(30,new G(4,121),new G(5,122)),new de(28,new G(4,47),new G(14,48)),new de(30,new G(11,24),new G(14,25)),new de(30,new G(16,15),new G(14,16))),new Qe(24,Int32Array.from([6,28,54,80,106]),new de(30,new G(6,117),new G(4,118)),new de(28,new G(6,45),new G(14,46)),new de(30,new G(11,24),new G(16,25)),new de(30,new G(30,16),new G(2,17))),new Qe(25,Int32Array.from([6,32,58,84,110]),new de(26,new G(8,106),new G(4,107)),new de(28,new G(8,47),new G(13,48)),new de(30,new G(7,24),new G(22,25)),new de(30,new G(22,15),new G(13,16))),new Qe(26,Int32Array.from([6,30,58,86,114]),new de(28,new G(10,114),new G(2,115)),new de(28,new G(19,46),new G(4,47)),new de(28,new G(28,22),new G(6,23)),new de(30,new G(33,16),new G(4,17))),new Qe(27,Int32Array.from([6,34,62,90,118]),new de(30,new G(8,122),new G(4,123)),new de(28,new G(22,45),new G(3,46)),new de(30,new G(8,23),new G(26,24)),new de(30,new G(12,15),new G(28,16))),new Qe(28,Int32Array.from([6,26,50,74,98,122]),new de(30,new G(3,117),new G(10,118)),new de(28,new G(3,45),new G(23,46)),new de(30,new G(4,24),new G(31,25)),new de(30,new G(11,15),new G(31,16))),new Qe(29,Int32Array.from([6,30,54,78,102,126]),new de(30,new G(7,116),new G(7,117)),new de(28,new G(21,45),new G(7,46)),new de(30,new G(1,23),new G(37,24)),new de(30,new G(19,15),new G(26,16))),new Qe(30,Int32Array.from([6,26,52,78,104,130]),new de(30,new G(5,115),new G(10,116)),new de(28,new G(19,47),new G(10,48)),new de(30,new G(15,24),new G(25,25)),new de(30,new G(23,15),new G(25,16))),new Qe(31,Int32Array.from([6,30,56,82,108,134]),new de(30,new G(13,115),new G(3,116)),new de(28,new G(2,46),new G(29,47)),new de(30,new G(42,24),new G(1,25)),new de(30,new G(23,15),new G(28,16))),new Qe(32,Int32Array.from([6,34,60,86,112,138]),new de(30,new G(17,115)),new de(28,new G(10,46),new G(23,47)),new de(30,new G(10,24),new G(35,25)),new de(30,new G(19,15),new G(35,16))),new Qe(33,Int32Array.from([6,30,58,86,114,142]),new de(30,new G(17,115),new G(1,116)),new de(28,new G(14,46),new G(21,47)),new de(30,new G(29,24),new G(19,25)),new de(30,new G(11,15),new G(46,16))),new Qe(34,Int32Array.from([6,34,62,90,118,146]),new de(30,new G(13,115),new G(6,116)),new de(28,new G(14,46),new G(23,47)),new de(30,new G(44,24),new G(7,25)),new de(30,new G(59,16),new G(1,17))),new Qe(35,Int32Array.from([6,30,54,78,102,126,150]),new de(30,new G(12,121),new G(7,122)),new de(28,new G(12,47),new G(26,48)),new de(30,new G(39,24),new G(14,25)),new de(30,new G(22,15),new G(41,16))),new Qe(36,Int32Array.from([6,24,50,76,102,128,154]),new de(30,new G(6,121),new G(14,122)),new de(28,new G(6,47),new G(34,48)),new de(30,new G(46,24),new G(10,25)),new de(30,new G(2,15),new G(64,16))),new Qe(37,Int32Array.from([6,28,54,80,106,132,158]),new de(30,new G(17,122),new G(4,123)),new de(28,new G(29,46),new G(14,47)),new de(30,new G(49,24),new G(10,25)),new de(30,new G(24,15),new G(46,16))),new Qe(38,Int32Array.from([6,32,58,84,110,136,162]),new de(30,new G(4,122),new G(18,123)),new de(28,new G(13,46),new G(32,47)),new de(30,new G(48,24),new G(14,25)),new de(30,new G(42,15),new G(32,16))),new Qe(39,Int32Array.from([6,26,54,82,110,138,166]),new de(30,new G(20,117),new G(4,118)),new de(28,new G(40,47),new G(7,48)),new de(30,new G(43,24),new G(22,25)),new de(30,new G(10,15),new G(67,16))),new Qe(40,Int32Array.from([6,30,58,86,114,142,170]),new de(30,new G(19,118),new G(6,119)),new de(28,new G(18,47),new G(31,48)),new de(30,new G(34,24),new G(34,25)),new de(30,new G(20,15),new G(61,16)))];var On;(function(k){k[k.DATA_MASK_000=0]="DATA_MASK_000",k[k.DATA_MASK_001=1]="DATA_MASK_001",k[k.DATA_MASK_010=2]="DATA_MASK_010",k[k.DATA_MASK_011=3]="DATA_MASK_011",k[k.DATA_MASK_100=4]="DATA_MASK_100",k[k.DATA_MASK_101=5]="DATA_MASK_101",k[k.DATA_MASK_110=6]="DATA_MASK_110",k[k.DATA_MASK_111=7]="DATA_MASK_111"})(On||(On={}));class Yn{constructor(i,o){this.value=i,this.isMasked=o}unmaskBitMatrix(i,o){for(let c=0;c<o;c++)for(let f=0;f<o;f++)this.isMasked(c,f)&&i.flip(f,c)}}Yn.values=new Map([[On.DATA_MASK_000,new Yn(On.DATA_MASK_000,(k,i)=>(k+i&1)===0)],[On.DATA_MASK_001,new Yn(On.DATA_MASK_001,(k,i)=>(k&1)===0)],[On.DATA_MASK_010,new Yn(On.DATA_MASK_010,(k,i)=>i%3===0)],[On.DATA_MASK_011,new Yn(On.DATA_MASK_011,(k,i)=>(k+i)%3===0)],[On.DATA_MASK_100,new Yn(On.DATA_MASK_100,(k,i)=>(Math.floor(k/2)+Math.floor(i/3)&1)===0)],[On.DATA_MASK_101,new Yn(On.DATA_MASK_101,(k,i)=>k*i%6===0)],[On.DATA_MASK_110,new Yn(On.DATA_MASK_110,(k,i)=>k*i%6<3)],[On.DATA_MASK_111,new Yn(On.DATA_MASK_111,(k,i)=>(k+i+k*i%3&1)===0)]]);class s0{constructor(i){const o=i.getHeight();if(o<21||(o&3)!==1)throw new W;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let g=0;g<6;g++)i=this.copyBit(g,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let g=5;g>=0;g--)i=this.copyBit(8,g,i);const o=this.bitMatrix.getHeight();let c=0;const f=o-7;for(let g=o-1;g>=f;g--)c=this.copyBit(8,g,c);for(let g=o-8;g<o;g++)c=this.copyBit(g,8,c);if(this.parsedFormatInfo=qn.decodeFormatInformation(i,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new W}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),o=Math.floor((i-17)/4);if(o<=6)return Qe.getVersionForNumber(o);let c=0;const f=i-11;for(let p=5;p>=0;p--)for(let w=i-9;w>=f;w--)c=this.copyBit(w,p,c);let g=Qe.decodeVersionInformation(c);if(g!==null&&g.getDimensionForVersion()===i)return this.parsedVersion=g,g;c=0;for(let p=5;p>=0;p--)for(let w=i-9;w>=f;w--)c=this.copyBit(p,w,c);if(g=Qe.decodeVersionInformation(c),g!==null&&g.getDimensionForVersion()===i)return this.parsedVersion=g,g;throw new W}copyBit(i,o,c){return(this.isMirror?this.bitMatrix.get(o,i):this.bitMatrix.get(i,o))?c<<1|1:c<<1}readCodewords(){const i=this.readFormatInformation(),o=this.readVersion(),c=Yn.values.get(i.getDataMask()),f=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,f);const g=o.buildFunctionPattern();let p=!0;const w=new Uint8Array(o.getTotalCodewords());let C=0,_=0,O=0;for(let L=f-1;L>0;L-=2){L===6&&L--;for(let B=0;B<f;B++){const q=p?f-1-B:B;for(let Q=0;Q<2;Q++)g.get(L-Q,q)||(O++,_<<=1,this.bitMatrix.get(L-Q,q)&&(_|=1),O===8&&(w[C++]=_,O=0,_=0))}p=!p}if(C!==o.getTotalCodewords())throw new W;return w}remask(){if(this.parsedFormatInfo===null)return;const i=Yn.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let o=0,c=i.getWidth();o<c;o++)for(let f=o+1,g=i.getHeight();f<g;f++)i.get(o,f)!==i.get(f,o)&&(i.flip(f,o),i.flip(o,f))}}class ml{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o,c){if(i.length!==o.getTotalCodewords())throw new A;const f=o.getECBlocksForLevel(c);let g=0;const p=f.getECBlocks();for(const Q of p)g+=Q.getCount();const w=new Array(g);let C=0;for(const Q of p)for(let ee=0;ee<Q.getCount();ee++){const ue=Q.getDataCodewords(),xe=f.getECCodewordsPerBlock()+ue;w[C++]=new ml(ue,new Uint8Array(xe))}const _=w[0].codewords.length;let O=w.length-1;for(;O>=0&&w[O].codewords.length!==_;)O--;O++;const L=_-f.getECCodewordsPerBlock();let B=0;for(let Q=0;Q<L;Q++)for(let ee=0;ee<C;ee++)w[ee].codewords[Q]=i[B++];for(let Q=O;Q<C;Q++)w[Q].codewords[L]=i[B++];const q=w[0].codewords.length;for(let Q=L;Q<q;Q++)for(let ee=0;ee<C;ee++){const ue=ee<O?Q:Q+1;w[ee].codewords[ue]=i[B++]}return w}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ns;(function(k){k[k.TERMINATOR=0]="TERMINATOR",k[k.NUMERIC=1]="NUMERIC",k[k.ALPHANUMERIC=2]="ALPHANUMERIC",k[k.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",k[k.BYTE=4]="BYTE",k[k.ECI=5]="ECI",k[k.KANJI=6]="KANJI",k[k.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",k[k.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",k[k.HANZI=9]="HANZI"})(Ns||(Ns={}));class Je{constructor(i,o,c,f){this.value=i,this.stringValue=o,this.characterCountBitsForVersions=c,this.bits=f,Je.FOR_BITS.set(f,this),Je.FOR_VALUE.set(i,this)}static forBits(i){const o=Je.FOR_BITS.get(i);if(o===void 0)throw new A;return o}getCharacterCountBits(i){const o=i.getVersionNumber();let c;return o<=9?c=0:o<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Je))return!1;const o=i;return this.value===o.value}toString(){return this.stringValue}}Je.FOR_BITS=new Map,Je.FOR_VALUE=new Map,Je.TERMINATOR=new Je(Ns.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Je.NUMERIC=new Je(Ns.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Je.ALPHANUMERIC=new Je(Ns.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Je.STRUCTURED_APPEND=new Je(Ns.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Je.BYTE=new Je(Ns.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Je.ECI=new Je(Ns.ECI,"ECI",Int32Array.from([0,0,0]),7),Je.KANJI=new Je(Ns.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Je.FNC1_FIRST_POSITION=new Je(Ns.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Je.FNC1_SECOND_POSITION=new Je(Ns.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Je.HANZI=new Je(Ns.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class un{static decode(i,o,c,f){const g=new ps(i);let p=new ce;const w=new Array;let C=-1,_=-1;try{let O=null,L=!1,B;do{if(g.available()<4)B=Je.TERMINATOR;else{const q=g.readBits(4);B=Je.forBits(q)}switch(B){case Je.TERMINATOR:break;case Je.FNC1_FIRST_POSITION:case Je.FNC1_SECOND_POSITION:L=!0;break;case Je.STRUCTURED_APPEND:if(g.available()<16)throw new W;C=g.readBits(8),_=g.readBits(8);break;case Je.ECI:const q=un.parseECIValue(g);if(O=X.getCharacterSetECIByValue(q),O===null)throw new W;break;case Je.HANZI:const Q=g.readBits(4),ee=g.readBits(B.getCharacterCountBits(o));Q===un.GB2312_SUBSET&&un.decodeHanziSegment(g,p,ee);break;default:const ue=g.readBits(B.getCharacterCountBits(o));switch(B){case Je.NUMERIC:un.decodeNumericSegment(g,p,ue);break;case Je.ALPHANUMERIC:un.decodeAlphanumericSegment(g,p,ue,L);break;case Je.BYTE:un.decodeByteSegment(g,p,ue,O,w,f);break;case Je.KANJI:un.decodeKanjiSegment(g,p,ue);break;default:throw new W}break}}while(B!==Je.TERMINATOR)}catch{throw new W}return new pt(i,p.toString(),w.length===0?null:w,c===null?null:c.toString(),C,_)}static decodeHanziSegment(i,o,c){if(c*13>i.available())throw new W;const f=new Uint8Array(2*c);let g=0;for(;c>0;){const p=i.readBits(13);let w=p/96<<8&4294967295|p%96;w<959?w+=41377:w+=42657,f[g]=w>>8&255,f[g+1]=w&255,g+=2,c--}try{o.append(Ae.decode(f,ve.GB2312))}catch(p){throw new W(p)}}static decodeKanjiSegment(i,o,c){if(c*13>i.available())throw new W;const f=new Uint8Array(2*c);let g=0;for(;c>0;){const p=i.readBits(13);let w=p/192<<8&4294967295|p%192;w<7936?w+=33088:w+=49472,f[g]=w>>8,f[g+1]=w,g+=2,c--}try{o.append(Ae.decode(f,ve.SHIFT_JIS))}catch(p){throw new W(p)}}static decodeByteSegment(i,o,c,f,g,p){if(8*c>i.available())throw new W;const w=new Uint8Array(c);for(let _=0;_<c;_++)w[_]=i.readBits(8);let C;f===null?C=ve.guessEncoding(w,p):C=f.getName();try{o.append(Ae.decode(w,C))}catch(_){throw new W(_)}g.push(w)}static toAlphaNumericChar(i){if(i>=un.ALPHANUMERIC_CHARS.length)throw new W;return un.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,o,c,f){const g=o.length();for(;c>1;){if(i.available()<11)throw new W;const p=i.readBits(11);o.append(un.toAlphaNumericChar(Math.floor(p/45))),o.append(un.toAlphaNumericChar(p%45)),c-=2}if(c===1){if(i.available()<6)throw new W;o.append(un.toAlphaNumericChar(i.readBits(6)))}if(f)for(let p=g;p<o.length();p++)o.charAt(p)==="%"&&(p<o.length()-1&&o.charAt(p+1)==="%"?o.deleteCharAt(p+1):o.setCharAt(p,""))}static decodeNumericSegment(i,o,c){for(;c>=3;){if(i.available()<10)throw new W;const f=i.readBits(10);if(f>=1e3)throw new W;o.append(un.toAlphaNumericChar(Math.floor(f/100))),o.append(un.toAlphaNumericChar(Math.floor(f/10)%10)),o.append(un.toAlphaNumericChar(f%10)),c-=3}if(c===2){if(i.available()<7)throw new W;const f=i.readBits(7);if(f>=100)throw new W;o.append(un.toAlphaNumericChar(Math.floor(f/10))),o.append(un.toAlphaNumericChar(f%10))}else if(c===1){if(i.available()<4)throw new W;const f=i.readBits(4);if(f>=10)throw new W;o.append(un.toAlphaNumericChar(f))}}static parseECIValue(i){const o=i.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){const c=i.readBits(8);return(o&63)<<8&4294967295|c}if((o&224)===192){const c=i.readBits(16);return(o&31)<<16&4294967295|c}throw new W}}un.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",un.GB2312_SUBSET=1;class Bd{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const o=i[0];i[0]=i[2],i[2]=o}}class pl{constructor(){this.rsDecoder=new Le(Se.QR_CODE_FIELD_256)}decodeBooleanArray(i,o){return this.decodeBitMatrix(Fe.parseFromBooleanArray(i),o)}decodeBitMatrix(i,o){const c=new s0(i);let f=null;try{return this.decodeBitMatrixParser(c,o)}catch(g){f=g}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const g=this.decodeBitMatrixParser(c,o);return g.setOther(new Bd(!0)),g}catch(g){throw f!==null?f:g}}decodeBitMatrixParser(i,o){const c=i.readVersion(),f=i.readFormatInformation().getErrorCorrectionLevel(),g=i.readCodewords(),p=ml.getDataBlocks(g,c,f);let w=0;for(const O of p)w+=O.getNumDataCodewords();const C=new Uint8Array(w);let _=0;for(const O of p){const L=O.getCodewords(),B=O.getNumDataCodewords();this.correctErrors(L,B);for(let q=0;q<B;q++)C[_++]=L[q]}return un.decode(C,c,f,o)}correctErrors(i,o){const c=new Int32Array(i);try{this.rsDecoder.decode(c,i.length-o)}catch{throw new I}for(let f=0;f<o;f++)i[f]=c[f]}}class go extends He{constructor(i,o,c){super(i,o),this.estimatedModuleSize=c}aboutEquals(i,o,c){if(Math.abs(o-this.getY())<=i&&Math.abs(c-this.getX())<=i){const f=Math.abs(i-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(i,o,c){const f=(this.getX()+o)/2,g=(this.getY()+i)/2,p=(this.estimatedModuleSize+c)/2;return new go(f,g,p)}}class aa{constructor(i,o,c,f,g,p,w){this.image=i,this.startX=o,this.startY=c,this.width=f,this.height=g,this.moduleSize=p,this.resultPointCallback=w,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,o=this.height,c=this.width,f=i+c,g=this.startY+o/2,p=new Int32Array(3),w=this.image;for(let C=0;C<o;C++){const _=g+((C&1)===0?Math.floor((C+1)/2):-Math.floor((C+1)/2));p[0]=0,p[1]=0,p[2]=0;let O=i;for(;O<f&&!w.get(O,_);)O++;let L=0;for(;O<f;){if(w.get(O,_))if(L===1)p[1]++;else if(L===2){if(this.foundPatternCross(p)){const B=this.handlePossibleCenter(p,_,O);if(B!==null)return B}p[0]=p[2],p[1]=1,p[2]=0,L=1}else p[++L]++;else L===1&&L++,p[L]++;O++}if(this.foundPatternCross(p)){const B=this.handlePossibleCenter(p,_,f);if(B!==null)return B}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new se}static centerFromEnd(i,o){return o-i[2]-i[1]/2}foundPatternCross(i){const o=this.moduleSize,c=o/2;for(let f=0;f<3;f++)if(Math.abs(o-i[f])>=c)return!1;return!0}crossCheckVertical(i,o,c,f){const g=this.image,p=g.getHeight(),w=this.crossCheckStateCount;w[0]=0,w[1]=0,w[2]=0;let C=i;for(;C>=0&&g.get(o,C)&&w[1]<=c;)w[1]++,C--;if(C<0||w[1]>c)return NaN;for(;C>=0&&!g.get(o,C)&&w[0]<=c;)w[0]++,C--;if(w[0]>c)return NaN;for(C=i+1;C<p&&g.get(o,C)&&w[1]<=c;)w[1]++,C++;if(C===p||w[1]>c)return NaN;for(;C<p&&!g.get(o,C)&&w[2]<=c;)w[2]++,C++;if(w[2]>c)return NaN;const _=w[0]+w[1]+w[2];return 5*Math.abs(_-f)>=2*f?NaN:this.foundPatternCross(w)?aa.centerFromEnd(w,C):NaN}handlePossibleCenter(i,o,c){const f=i[0]+i[1]+i[2],g=aa.centerFromEnd(i,c),p=this.crossCheckVertical(o,g,2*i[1],f);if(!isNaN(p)){const w=(i[0]+i[1]+i[2])/3;for(const _ of this.possibleCenters)if(_.aboutEquals(w,p,g))return _.combineEstimate(p,g,w);const C=new go(g,p,w);this.possibleCenters.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return null}}class Qi extends He{constructor(i,o,c,f){super(i,o),this.estimatedModuleSize=c,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,o,c){if(Math.abs(o-this.getY())<=i&&Math.abs(c-this.getX())<=i){const f=Math.abs(i-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(i,o,c){const f=this.count+1,g=(this.count*this.getX()+o)/f,p=(this.count*this.getY()+i)/f,w=(this.count*this.estimatedModuleSize+c)/f;return new Qi(g,p,w,f)}}class oa{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class In{constructor(i,o){this.image=i,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const o=i!=null&&i.get(Z.TRY_HARDER)!==void 0,c=i!=null&&i.get(Z.PURE_BARCODE)!==void 0,f=this.image,g=f.getHeight(),p=f.getWidth();let w=Math.floor(3*g/(4*In.MAX_MODULES));(w<In.MIN_SKIP||o)&&(w=In.MIN_SKIP);let C=!1;const _=new Int32Array(5);for(let L=w-1;L<g&&!C;L+=w){_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0;let B=0;for(let q=0;q<p;q++)if(f.get(q,L))(B&1)===1&&B++,_[B]++;else if((B&1)===0)if(B===4)if(In.foundPatternCross(_)){if(this.handlePossibleCenter(_,L,q,c)===!0)if(w=2,this.hasSkipped===!0)C=this.haveMultiplyConfirmedCenters();else{const ee=this.findRowSkip();ee>_[2]&&(L+=ee-_[2]-w,q=p-1)}else{_[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,B=3;continue}B=0,_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0}else _[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,B=3;else _[++B]++;else _[B]++;In.foundPatternCross(_)&&this.handlePossibleCenter(_,L,p,c)===!0&&(w=_[0],this.hasSkipped&&(C=this.haveMultiplyConfirmedCenters()))}const O=this.selectBestPatterns();return He.orderBestPatterns(O),new oa(O)}static centerFromEnd(i,o){return o-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let o=0;for(let g=0;g<5;g++){const p=i[g];if(p===0)return!1;o+=p}if(o<7)return!1;const c=o/7,f=c/2;return Math.abs(c-i[0])<f&&Math.abs(c-i[1])<f&&Math.abs(3*c-i[2])<3*f&&Math.abs(c-i[3])<f&&Math.abs(c-i[4])<f}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,o,c,f){const g=this.getCrossCheckStateCount();let p=0;const w=this.image;for(;i>=p&&o>=p&&w.get(o-p,i-p);)g[2]++,p++;if(i<p||o<p)return!1;for(;i>=p&&o>=p&&!w.get(o-p,i-p)&&g[1]<=c;)g[1]++,p++;if(i<p||o<p||g[1]>c)return!1;for(;i>=p&&o>=p&&w.get(o-p,i-p)&&g[0]<=c;)g[0]++,p++;if(g[0]>c)return!1;const C=w.getHeight(),_=w.getWidth();for(p=1;i+p<C&&o+p<_&&w.get(o+p,i+p);)g[2]++,p++;if(i+p>=C||o+p>=_)return!1;for(;i+p<C&&o+p<_&&!w.get(o+p,i+p)&&g[3]<c;)g[3]++,p++;if(i+p>=C||o+p>=_||g[3]>=c)return!1;for(;i+p<C&&o+p<_&&w.get(o+p,i+p)&&g[4]<c;)g[4]++,p++;if(g[4]>=c)return!1;const O=g[0]+g[1]+g[2]+g[3]+g[4];return Math.abs(O-f)<2*f&&In.foundPatternCross(g)}crossCheckVertical(i,o,c,f){const g=this.image,p=g.getHeight(),w=this.getCrossCheckStateCount();let C=i;for(;C>=0&&g.get(o,C);)w[2]++,C--;if(C<0)return NaN;for(;C>=0&&!g.get(o,C)&&w[1]<=c;)w[1]++,C--;if(C<0||w[1]>c)return NaN;for(;C>=0&&g.get(o,C)&&w[0]<=c;)w[0]++,C--;if(w[0]>c)return NaN;for(C=i+1;C<p&&g.get(o,C);)w[2]++,C++;if(C===p)return NaN;for(;C<p&&!g.get(o,C)&&w[3]<c;)w[3]++,C++;if(C===p||w[3]>=c)return NaN;for(;C<p&&g.get(o,C)&&w[4]<c;)w[4]++,C++;if(w[4]>=c)return NaN;const _=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(_-f)>=2*f?NaN:In.foundPatternCross(w)?In.centerFromEnd(w,C):NaN}crossCheckHorizontal(i,o,c,f){const g=this.image,p=g.getWidth(),w=this.getCrossCheckStateCount();let C=i;for(;C>=0&&g.get(C,o);)w[2]++,C--;if(C<0)return NaN;for(;C>=0&&!g.get(C,o)&&w[1]<=c;)w[1]++,C--;if(C<0||w[1]>c)return NaN;for(;C>=0&&g.get(C,o)&&w[0]<=c;)w[0]++,C--;if(w[0]>c)return NaN;for(C=i+1;C<p&&g.get(C,o);)w[2]++,C++;if(C===p)return NaN;for(;C<p&&!g.get(C,o)&&w[3]<c;)w[3]++,C++;if(C===p||w[3]>=c)return NaN;for(;C<p&&g.get(C,o)&&w[4]<c;)w[4]++,C++;if(w[4]>=c)return NaN;const _=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(_-f)>=f?NaN:In.foundPatternCross(w)?In.centerFromEnd(w,C):NaN}handlePossibleCenter(i,o,c,f){const g=i[0]+i[1]+i[2]+i[3]+i[4];let p=In.centerFromEnd(i,c),w=this.crossCheckVertical(o,Math.floor(p),i[2],g);if(!isNaN(w)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(w),i[2],g),!isNaN(p)&&(!f||this.crossCheckDiagonal(Math.floor(w),Math.floor(p),i[2],g)))){const C=g/7;let _=!1;const O=this.possibleCenters;for(let L=0,B=O.length;L<B;L++){const q=O[L];if(q.aboutEquals(C,w,p)){O[L]=q.combineEstimate(w,p,C),_=!0;break}}if(!_){const L=new Qi(p,w,C);O.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const c of this.possibleCenters)if(c.getCount()>=In.CENTER_QUORUM)if(o==null)o=c;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-c.getX())-Math.abs(o.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,o=0;const c=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=In.CENTER_QUORUM&&(i++,o+=p.getEstimatedModuleSize());if(i<3)return!1;const f=o/c;let g=0;for(const p of this.possibleCenters)g+=Math.abs(p.getEstimatedModuleSize()-f);return g<=.05*o}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new se;const o=this.possibleCenters;let c;if(i>3){let f=0,g=0;for(const C of this.possibleCenters){const _=C.getEstimatedModuleSize();f+=_,g+=_*_}c=f/i;let p=Math.sqrt(g/i-c*c);o.sort((C,_)=>{const O=Math.abs(_.getEstimatedModuleSize()-c),L=Math.abs(C.getEstimatedModuleSize()-c);return O<L?-1:O>L?1:0});const w=Math.max(.2*c,p);for(let C=0;C<o.length&&o.length>3;C++){const _=o[C];Math.abs(_.getEstimatedModuleSize()-c)>w&&(o.splice(C,1),C--)}}if(o.length>3){let f=0;for(const g of o)f+=g.getEstimatedModuleSize();c=f/o.length,o.sort((g,p)=>{if(p.getCount()===g.getCount()){const w=Math.abs(p.getEstimatedModuleSize()-c),C=Math.abs(g.getEstimatedModuleSize()-c);return w<C?1:w>C?-1:0}else return p.getCount()-g.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}In.CENTER_QUORUM=2,In.MIN_SKIP=3,In.MAX_MODULES=57;class Ar{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(Z.NEED_RESULT_POINT_CALLBACK);const c=new In(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(c)}processFinderPatternInfo(i){const o=i.getTopLeft(),c=i.getTopRight(),f=i.getBottomLeft(),g=this.calculateModuleSize(o,c,f);if(g<1)throw new se("No pattern found in proccess finder.");const p=Ar.computeDimension(o,c,f,g),w=Qe.getProvisionalVersionForDimension(p),C=w.getDimensionForVersion()-7;let _=null;if(w.getAlignmentPatternCenters().length>0){const q=c.getX()-o.getX()+f.getX(),Q=c.getY()-o.getY()+f.getY(),ee=1-3/C,ue=Math.floor(o.getX()+ee*(q-o.getX())),xe=Math.floor(o.getY()+ee*(Q-o.getY()));for(let ke=4;ke<=16;ke<<=1)try{_=this.findAlignmentInRegion(g,ue,xe,ke);break}catch(Pe){if(!(Pe instanceof se))throw Pe}}const O=Ar.createTransform(o,c,f,_,p),L=Ar.sampleGrid(this.image,O,p);let B;return _===null?B=[f,o,c]:B=[f,o,c,_],new ui(L,B)}static createTransform(i,o,c,f,g){const p=g-3.5;let w,C,_,O;return f!==null?(w=f.getX(),C=f.getY(),_=p-3,O=_):(w=o.getX()-i.getX()+c.getX(),C=o.getY()-i.getY()+c.getY(),_=p,O=p),Bn.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,_,O,3.5,p,i.getX(),i.getY(),o.getX(),o.getY(),w,C,c.getX(),c.getY())}static sampleGrid(i,o,c){return at.getInstance().sampleGridWithTransform(i,c,c,o)}static computeDimension(i,o,c,f){const g=Ge.round(He.distance(i,o)/f),p=Ge.round(He.distance(i,c)/f);let w=Math.floor((g+p)/2)+7;switch(w&3){case 0:w++;break;case 2:w--;break;case 3:throw new se("Dimensions could be not found.")}return w}calculateModuleSize(i,o,c){return(this.calculateModuleSizeOneWay(i,o)+this.calculateModuleSizeOneWay(i,c))/2}calculateModuleSizeOneWay(i,o){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(o.getX()),Math.floor(o.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(c)?f/7:isNaN(f)?c/7:(c+f)/14}sizeOfBlackWhiteBlackRunBothWays(i,o,c,f){let g=this.sizeOfBlackWhiteBlackRun(i,o,c,f),p=1,w=i-(c-i);w<0?(p=i/(i-w),w=0):w>=this.image.getWidth()&&(p=(this.image.getWidth()-1-i)/(w-i),w=this.image.getWidth()-1);let C=Math.floor(o-(f-o)*p);return p=1,C<0?(p=o/(o-C),C=0):C>=this.image.getHeight()&&(p=(this.image.getHeight()-1-o)/(C-o),C=this.image.getHeight()-1),w=Math.floor(i+(w-i)*p),g+=this.sizeOfBlackWhiteBlackRun(i,o,w,C),g-1}sizeOfBlackWhiteBlackRun(i,o,c,f){const g=Math.abs(f-o)>Math.abs(c-i);if(g){let q=i;i=o,o=q,q=c,c=f,f=q}const p=Math.abs(c-i),w=Math.abs(f-o);let C=-p/2;const _=i<c?1:-1,O=o<f?1:-1;let L=0;const B=c+_;for(let q=i,Q=o;q!==B;q+=_){const ee=g?Q:q,ue=g?q:Q;if(L===1===this.image.get(ee,ue)){if(L===2)return Ge.distance(q,Q,i,o);L++}if(C+=w,C>0){if(Q===f)break;Q+=O,C-=p}}return L===2?Ge.distance(c+_,f,i,o):NaN}findAlignmentInRegion(i,o,c,f){const g=Math.floor(f*i),p=Math.max(0,o-g),w=Math.min(this.image.getWidth()-1,o+g);if(w-p<i*3)throw new se("Alignment top exceeds estimated module size.");const C=Math.max(0,c-g),_=Math.min(this.image.getHeight()-1,c+g);if(_-C<i*3)throw new se("Alignment bottom exceeds estimated module size.");return new aa(this.image,p,C,w-p,_-C,i,this.resultPointCallback).find()}}class Mi{constructor(){this.decoder=new pl}getDecoder(){return this.decoder}decode(i,o){let c,f;if(o!=null&&o.get(Z.PURE_BARCODE)!==void 0){const C=Mi.extractPureBits(i.getBlackMatrix());c=this.decoder.decodeBitMatrix(C,o),f=Mi.NO_POINTS}else{const C=new Ar(i.getBlackMatrix()).detect(o);c=this.decoder.decodeBitMatrix(C.getBits(),o),f=C.getPoints()}c.getOther()instanceof Bd&&c.getOther().applyMirroredCorrection(f);const g=new Be(c.getText(),c.getRawBytes(),void 0,f,Ee.QR_CODE,void 0),p=c.getByteSegments();p!==null&&g.putMetadata(Ze.BYTE_SEGMENTS,p);const w=c.getECLevel();return w!==null&&g.putMetadata(Ze.ERROR_CORRECTION_LEVEL,w),c.hasStructuredAppend()&&(g.putMetadata(Ze.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),g.putMetadata(Ze.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),g}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),c=i.getBottomRightOnBit();if(o===null||c===null)throw new se;const f=this.moduleSize(o,i);let g=o[1],p=c[1],w=o[0],C=c[0];if(w>=C||g>=p)throw new se;if(p-g!==C-w&&(C=w+(p-g),C>=i.getWidth()))throw new se;const _=Math.round((C-w+1)/f),O=Math.round((p-g+1)/f);if(_<=0||O<=0)throw new se;if(O!==_)throw new se;const L=Math.floor(f/2);g+=L,w+=L;const B=w+Math.floor((_-1)*f)-C;if(B>0){if(B>L)throw new se;w-=B}const q=g+Math.floor((O-1)*f)-p;if(q>0){if(q>L)throw new se;g-=q}const Q=new Fe(_,O);for(let ee=0;ee<O;ee++){const ue=g+Math.floor(ee*f);for(let xe=0;xe<_;xe++)i.get(w+Math.floor(xe*f),ue)&&Q.set(xe,ee)}return Q}static moduleSize(i,o){const c=o.getHeight(),f=o.getWidth();let g=i[0],p=i[1],w=!0,C=0;for(;g<f&&p<c;){if(w!==o.get(g,p)){if(++C===5)break;w=!w}g++,p++}if(g===f||p===c)throw new se;return(g-i[0])/7}}Mi.NO_POINTS=new Array;class nt{PDF417Common(){}static getBitCountSum(i){return Ge.sum(i)}static toIntArray(i){if(i==null||!i.length)return nt.EMPTY_INT_ARRAY;const o=new Int32Array(i.length);let c=0;for(const f of i)o[c++]=f;return o}static getCodeword(i){const o=Y.binarySearch(nt.SYMBOL_TABLE,i&262143);return o<0?-1:(nt.CODEWORD_TABLE[o]-1)%nt.NUMBER_OF_CODEWORDS}}nt.NUMBER_OF_CODEWORDS=929,nt.MAX_CODEWORDS_IN_BARCODE=nt.NUMBER_OF_CODEWORDS-1,nt.MIN_ROWS_IN_BARCODE=3,nt.MAX_ROWS_IN_BARCODE=90,nt.MODULES_IN_CODEWORD=17,nt.MODULES_IN_STOP_PATTERN=18,nt.BARS_IN_MODULE=8,nt.EMPTY_INT_ARRAY=new Int32Array([]),nt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),nt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Di{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class gt{static detectMultiple(i,o,c){let f=i.getBlackMatrix(),g=gt.detect(c,f);return g.length||(f=f.clone(),f.rotate180(),g=gt.detect(c,f)),new Di(f,g)}static detect(i,o){const c=new Array;let f=0,g=0,p=!1;for(;f<o.getHeight();){const w=gt.findVertices(o,f,g);if(w[0]==null&&w[3]==null){if(!p)break;p=!1,g=0;for(const C of c)C[1]!=null&&(f=Math.trunc(Math.max(f,C[1].getY()))),C[3]!=null&&(f=Math.max(f,Math.trunc(C[3].getY())));f+=gt.ROW_STEP;continue}if(p=!0,c.push(w),!i)break;w[2]!=null?(g=Math.trunc(w[2].getX()),f=Math.trunc(w[2].getY())):(g=Math.trunc(w[4].getX()),f=Math.trunc(w[4].getY()))}return c}static findVertices(i,o,c){const f=i.getHeight(),g=i.getWidth(),p=new Array(8);return gt.copyToResult(p,gt.findRowsWithPattern(i,f,g,o,c,gt.START_PATTERN),gt.INDEXES_START_PATTERN),p[4]!=null&&(c=Math.trunc(p[4].getX()),o=Math.trunc(p[4].getY())),gt.copyToResult(p,gt.findRowsWithPattern(i,f,g,o,c,gt.STOP_PATTERN),gt.INDEXES_STOP_PATTERN),p}static copyToResult(i,o,c){for(let f=0;f<c.length;f++)i[c[f]]=o[f]}static findRowsWithPattern(i,o,c,f,g,p){const w=new Array(4);let C=!1;const _=new Int32Array(p.length);for(;f<o;f+=gt.ROW_STEP){let L=gt.findGuardPattern(i,g,f,c,!1,p,_);if(L!=null){for(;f>0;){const B=gt.findGuardPattern(i,g,--f,c,!1,p,_);if(B!=null)L=B;else{f++;break}}w[0]=new He(L[0],f),w[1]=new He(L[1],f),C=!0;break}}let O=f+1;if(C){let L=0,B=Int32Array.from([Math.trunc(w[0].getX()),Math.trunc(w[1].getX())]);for(;O<o;O++){const q=gt.findGuardPattern(i,B[0],O,c,!1,p,_);if(q!=null&&Math.abs(B[0]-q[0])<gt.MAX_PATTERN_DRIFT&&Math.abs(B[1]-q[1])<gt.MAX_PATTERN_DRIFT)B=q,L=0;else{if(L>gt.SKIPPED_ROW_COUNT_MAX)break;L++}}O-=L+1,w[2]=new He(B[0],O),w[3]=new He(B[1],O)}return O-f<gt.BARCODE_MIN_HEIGHT&&Y.fill(w,null),w}static findGuardPattern(i,o,c,f,g,p,w){Y.fillWithin(w,0,w.length,0);let C=o,_=0;for(;i.get(C,c)&&C>0&&_++<gt.MAX_PIXEL_DRIFT;)C--;let O=C,L=0,B=p.length;for(let q=g;O<f;O++)if(i.get(O,c)!==q)w[L]++;else{if(L===B-1){if(gt.patternMatchVariance(w,p,gt.MAX_INDIVIDUAL_VARIANCE)<gt.MAX_AVG_VARIANCE)return new Int32Array([C,O]);C+=w[0]+w[1],j.arraycopy(w,2,w,0,L-1),w[L-1]=0,w[L]=0,L--}else L++;w[L]=1,q=!q}return L===B-1&&gt.patternMatchVariance(w,p,gt.MAX_INDIVIDUAL_VARIANCE)<gt.MAX_AVG_VARIANCE?new Int32Array([C,O-1]):null}static patternMatchVariance(i,o,c){let f=i.length,g=0,p=0;for(let _=0;_<f;_++)g+=i[_],p+=o[_];if(g<p)return 1/0;let w=g/p;c*=w;let C=0;for(let _=0;_<f;_++){let O=i[_],L=o[_]*w,B=O>L?O-L:L-O;if(B>c)return 1/0;C+=B}return C/g}}gt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),gt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),gt.MAX_AVG_VARIANCE=.42,gt.MAX_INDIVIDUAL_VARIANCE=.8,gt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),gt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),gt.MAX_PIXEL_DRIFT=3,gt.MAX_PATTERN_DRIFT=5,gt.SKIPPED_ROW_COUNT_MAX=25,gt.ROW_STEP=5,gt.BARCODE_MIN_HEIGHT=10;class xn{constructor(i,o){if(o.length===0)throw new A;this.field=i;let c=o.length;if(c>1&&o[0]===0){let f=1;for(;f<c&&o[f]===0;)f++;f===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-f),j.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let f=0;for(let g of this.coefficients)f=this.field.add(f,g);return f}let o=this.coefficients[0],c=this.coefficients.length;for(let f=1;f<c;f++)o=this.field.add(this.field.multiply(i,o),this.coefficients[f]);return o}add(i){if(!this.field.equals(i.field))throw new A("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,c=i.coefficients;if(o.length>c.length){let p=o;o=c,c=p}let f=new Int32Array(c.length),g=c.length-o.length;j.arraycopy(c,0,f,0,g);for(let p=g;p<c.length;p++)f[p]=this.field.add(o[p-g],c[p]);return new xn(this.field,f)}subtract(i){if(!this.field.equals(i.field))throw new A("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof xn?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new A("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new xn(this.field,new Int32Array([0]));let o=this.coefficients,c=o.length,f=i.coefficients,g=f.length,p=new Int32Array(c+g-1);for(let w=0;w<c;w++){let C=o[w];for(let _=0;_<g;_++)p[w+_]=this.field.add(p[w+_],this.field.multiply(C,f[_]))}return new xn(this.field,p)}negative(){let i=this.coefficients.length,o=new Int32Array(i);for(let c=0;c<i;c++)o[c]=this.field.subtract(0,this.coefficients[c]);return new xn(this.field,o)}multiplyScalar(i){if(i===0)return new xn(this.field,new Int32Array([0]));if(i===1)return this;let o=this.coefficients.length,c=new Int32Array(o);for(let f=0;f<o;f++)c[f]=this.field.multiply(this.coefficients[f],i);return new xn(this.field,c)}multiplyByMonomial(i,o){if(i<0)throw new A;if(o===0)return new xn(this.field,new Int32Array([0]));let c=this.coefficients.length,f=new Int32Array(c+i);for(let g=0;g<c;g++)f[g]=this.field.multiply(this.coefficients[g],o);return new xn(this.field,f)}toString(){let i=new ce;for(let o=this.getDegree();o>=0;o--){let c=this.getCoefficient(o);c!==0&&(c<0?(i.append(" - "),c=-c):i.length()>0&&i.append(" + "),(o===0||c!==1)&&i.append(c),o!==0&&(o===1?i.append("x"):(i.append("x^"),i.append(o))))}return i.toString()}}class Ji{add(i,o){return(i+o)%this.modulus}subtract(i,o){return(this.modulus+i-o)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new A;return this.logTable[i]}inverse(i){if(i===0)throw new ie;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class mo extends Ji{constructor(i,o){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let c=1;for(let f=0;f<i;f++)this.expTable[f]=c,c=c*o%i;for(let f=0;f<i-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new xn(this,new Int32Array([0])),this.one=new xn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new A;if(o===0)return this.zero;let c=new Int32Array(i+1);return c[0]=o,new xn(this,c)}}mo.PDF417_GF=new mo(nt.NUMBER_OF_CODEWORDS,3);class po{constructor(){this.field=mo.PDF417_GF}decode(i,o,c){let f=new xn(this.field,i),g=new Int32Array(o),p=!1;for(let Q=o;Q>0;Q--){let ee=f.evaluateAt(this.field.exp(Q));g[o-Q]=ee,ee!==0&&(p=!0)}if(!p)return 0;let w=this.field.getOne();if(c!=null)for(const Q of c){let ee=this.field.exp(i.length-1-Q),ue=new xn(this.field,new Int32Array([this.field.subtract(0,ee),1]));w=w.multiply(ue)}let C=new xn(this.field,g),_=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),C,o),O=_[0],L=_[1],B=this.findErrorLocations(O),q=this.findErrorMagnitudes(L,O,B);for(let Q=0;Q<B.length;Q++){let ee=i.length-1-this.field.log(B[Q]);if(ee<0)throw I.getChecksumInstance();i[ee]=this.field.subtract(i[ee],q[Q])}return B.length}runEuclideanAlgorithm(i,o,c){if(i.getDegree()<o.getDegree()){let B=i;i=o,o=B}let f=i,g=o,p=this.field.getZero(),w=this.field.getOne();for(;g.getDegree()>=Math.round(c/2);){let B=f,q=p;if(f=g,p=w,f.isZero())throw I.getChecksumInstance();g=B;let Q=this.field.getZero(),ee=f.getCoefficient(f.getDegree()),ue=this.field.inverse(ee);for(;g.getDegree()>=f.getDegree()&&!g.isZero();){let xe=g.getDegree()-f.getDegree(),ke=this.field.multiply(g.getCoefficient(g.getDegree()),ue);Q=Q.add(this.field.buildMonomial(xe,ke)),g=g.subtract(f.multiplyByMonomial(xe,ke))}w=Q.multiply(p).subtract(q).negative()}let C=w.getCoefficient(0);if(C===0)throw I.getChecksumInstance();let _=this.field.inverse(C),O=w.multiply(_),L=g.multiply(_);return[O,L]}findErrorLocations(i){let o=i.getDegree(),c=new Int32Array(o),f=0;for(let g=1;g<this.field.getSize()&&f<o;g++)i.evaluateAt(g)===0&&(c[f]=this.field.inverse(g),f++);if(f!==o)throw I.getChecksumInstance();return c}findErrorMagnitudes(i,o,c){let f=o.getDegree(),g=new Int32Array(f);for(let _=1;_<=f;_++)g[f-_]=this.field.multiply(_,o.getCoefficient(_));let p=new xn(this.field,g),w=c.length,C=new Int32Array(w);for(let _=0;_<w;_++){let O=this.field.inverse(c[_]),L=this.field.subtract(0,i.evaluateAt(O)),B=this.field.inverse(p.evaluateAt(O));C[_]=this.field.multiply(L,B)}return C}}class er{constructor(i,o,c,f,g){i instanceof er?this.constructor_2(i):this.constructor_1(i,o,c,f,g)}constructor_1(i,o,c,f,g){const p=o==null||c==null,w=f==null||g==null;if(p&&w)throw new se;p?(o=new He(0,f.getY()),c=new He(0,g.getY())):w&&(f=new He(i.getWidth()-1,o.getY()),g=new He(i.getWidth()-1,c.getY())),this.image=i,this.topLeft=o,this.bottomLeft=c,this.topRight=f,this.bottomRight=g,this.minX=Math.trunc(Math.min(o.getX(),c.getX())),this.maxX=Math.trunc(Math.max(f.getX(),g.getX())),this.minY=Math.trunc(Math.min(o.getY(),f.getY())),this.maxY=Math.trunc(Math.max(c.getY(),g.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,o){return i==null?o:o==null?i:new er(i.image,i.topLeft,i.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(i,o,c){let f=this.topLeft,g=this.bottomLeft,p=this.topRight,w=this.bottomRight;if(i>0){let C=c?this.topLeft:this.topRight,_=Math.trunc(C.getY()-i);_<0&&(_=0);let O=new He(C.getX(),_);c?f=O:p=O}if(o>0){let C=c?this.bottomLeft:this.bottomRight,_=Math.trunc(C.getY()+o);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);let O=new He(C.getX(),_);c?g=O:w=O}return new er(this.image,f,g,p,w)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class xl{constructor(i,o,c,f){this.columnCount=i,this.errorCorrectionLevel=f,this.rowCountUpperPart=o,this.rowCountLowerPart=c,this.rowCount=o+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class tr{constructor(){this.buffer=""}static form(i,o){let c=-1;function f(p,w,C,_,O,L){if(p==="%%")return"%";if(o[++c]===void 0)return;p=_?parseInt(_.substr(1)):void 0;let B=O?parseInt(O.substr(1)):void 0,q;switch(L){case"s":q=o[c];break;case"c":q=o[c][0];break;case"f":q=parseFloat(o[c]).toFixed(p);break;case"p":q=parseFloat(o[c]).toPrecision(p);break;case"e":q=parseFloat(o[c]).toExponential(p);break;case"x":q=parseInt(o[c]).toString(B||16);break;case"d":q=parseFloat(parseInt(o[c],B||10).toPrecision(p)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(B);let Q=parseInt(C),ee=C&&C[0]+""=="0"?"0":" ";for(;q.length<Q;)q=w!==void 0?q+ee:ee+q;return q}let g=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(g,f)}format(i,...o){this.buffer+=tr.form(i,o)}toString(){return this.buffer}}class la{constructor(i){this.boundingBox=new er(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let o=this.getCodeword(i);if(o!=null)return o;for(let c=1;c<la.MAX_NEARBY_DISTANCE;c++){let f=this.imageRowToCodewordIndex(i)-c;if(f>=0&&(o=this.codewords[f],o!=null)||(f=this.imageRowToCodewordIndex(i)+c,f<this.codewords.length&&(o=this.codewords[f],o!=null)))return o}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,o){this.codewords[this.imageRowToCodewordIndex(i)]=o}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new tr;let o=0;for(const c of this.codewords){if(c==null){i.format("%3d:    |   %n",o++);continue}i.format("%3d: %3d|%3d%n",o++,c.getRowNumber(),c.getValue())}return i.toString()}}la.MAX_NEARBY_DISTANCE=5;class Fn{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let o=this.values.get(i);o==null&&(o=0),o++,this.values.set(i,o)}getValue(){let i=-1,o=new Array;for(const[c,f]of this.values.entries()){const g={getKey:()=>c,getValue:()=>f};g.getValue()>i?(i=g.getValue(),o=[],o.push(g.getKey())):g.getValue()===i&&o.push(g.getKey())}return nt.toIntArray(o)}getConfidence(i){return this.values.get(i)}}class nr extends la{constructor(i,o){super(i),this._isLeft=o}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,i);let c=this.getBoundingBox(),f=this._isLeft?c.getTopLeft():c.getTopRight(),g=this._isLeft?c.getBottomLeft():c.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),w=this.imageRowToCodewordIndex(Math.trunc(g.getY())),C=-1,_=1,O=0;for(let L=p;L<w;L++){if(o[L]==null)continue;let B=o[L],q=B.getRowNumber()-C;if(q===0)O++;else if(q===1)_=Math.max(_,O),O=1,C=B.getRowNumber();else if(q<0||B.getRowNumber()>=i.getRowCount()||q>L)o[L]=null;else{let Q;_>2?Q=(_-2)*q:Q=q;let ee=Q>=L;for(let ue=1;ue<=Q&&!ee;ue++)ee=o[L-ue]!=null;ee?o[L]=null:(C=B.getRowNumber(),O=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let o=new Int32Array(i.getRowCount());for(let c of this.getCodewords())if(c!=null){let f=c.getRowNumber();if(f>=o.length)continue;o[f]++}return o}adjustIncompleteIndicatorColumnRowNumbers(i){let o=this.getBoundingBox(),c=this._isLeft?o.getTopLeft():o.getTopRight(),f=this._isLeft?o.getBottomLeft():o.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),w=this.getCodewords(),C=-1;for(let _=g;_<p;_++){if(w[_]==null)continue;let O=w[_];O.setRowNumberAsRowIndicatorColumn();let L=O.getRowNumber()-C;L===0||(L===1?C=O.getRowNumber():O.getRowNumber()>=i.getRowCount()?w[_]=null:C=O.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),o=new Fn,c=new Fn,f=new Fn,g=new Fn;for(let w of i){if(w==null)continue;w.setRowNumberAsRowIndicatorColumn();let C=w.getValue()%30,_=w.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:c.setValue(C*3+1);break;case 1:g.setValue(C/3),f.setValue(C%3);break;case 2:o.setValue(C+1);break}}if(o.getValue().length===0||c.getValue().length===0||f.getValue().length===0||g.getValue().length===0||o.getValue()[0]<1||c.getValue()[0]+f.getValue()[0]<nt.MIN_ROWS_IN_BARCODE||c.getValue()[0]+f.getValue()[0]>nt.MAX_ROWS_IN_BARCODE)return null;let p=new xl(o.getValue()[0],c.getValue()[0],f.getValue()[0],g.getValue()[0]);return this.removeIncorrectCodewords(i,p),p}removeIncorrectCodewords(i,o){for(let c=0;c<i.length;c++){let f=i[c];if(i[c]==null)continue;let g=f.getValue()%30,p=f.getRowNumber();if(p>o.getRowCount()){i[c]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:g*3+1!==o.getRowCountUpperPart()&&(i[c]=null);break;case 1:(Math.trunc(g/3)!==o.getErrorCorrectionLevel()||g%3!==o.getRowCountLowerPart())&&(i[c]=null);break;case 2:g+1!==o.getColumnCount()&&(i[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class sr{constructor(i,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=nt.MAX_CODEWORDS_IN_BARCODE,o;do o=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let c=this.detectionResultColumns[o].getCodewords();for(let f=0;f<c.length;f++)c[f]!=null&&(c[f].hasValidRowNumber()||this.adjustRowNumbers(o,f,c))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<i.length;c++)if(i[c]!=null&&o[c]!=null&&i[c].getRowNumber()===o[c].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let g=this.detectionResultColumns[f].getCodewords()[c];g!=null&&(g.setRowNumber(i[c].getRowNumber()),g.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<o.length;c++){if(o[c]==null)continue;let f=o[c].getRowNumber(),g=0;for(let p=this.barcodeColumnCount+1;p>0&&g<this.ADJUST_ROW_NUMBER_SKIP;p--){let w=this.detectionResultColumns[p].getCodewords()[c];w!=null&&(g=sr.adjustRowNumberIfValid(f,g,w),w.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,o=this.detectionResultColumns[0].getCodewords();for(let c=0;c<o.length;c++){if(o[c]==null)continue;let f=o[c].getRowNumber(),g=0;for(let p=1;p<this.barcodeColumnCount+1&&g<this.ADJUST_ROW_NUMBER_SKIP;p++){let w=this.detectionResultColumns[p].getCodewords()[c];w!=null&&(g=sr.adjustRowNumberIfValid(f,g,w),w.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,o,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(i)?(c.setRowNumber(i),o=0):++o),o}adjustRowNumbers(i,o,c){if(!this.detectionResultColumns[i-1])return;let f=c[o],g=this.detectionResultColumns[i-1].getCodewords(),p=g;this.detectionResultColumns[i+1]!=null&&(p=this.detectionResultColumns[i+1].getCodewords());let w=new Array(14);w[2]=g[o],w[3]=p[o],o>0&&(w[0]=c[o-1],w[4]=g[o-1],w[5]=p[o-1]),o>1&&(w[8]=c[o-2],w[10]=g[o-2],w[11]=p[o-2]),o<c.length-1&&(w[1]=c[o+1],w[6]=g[o+1],w[7]=p[o+1]),o<c.length-2&&(w[9]=c[o+2],w[12]=g[o+2],w[13]=p[o+2]);for(let C of w)if(sr.adjustRowNumber(f,C))return}static adjustRowNumber(i,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===i.getBucket()?(i.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,o){this.detectionResultColumns[i]=o}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new tr;for(let c=0;c<i.getCodewords().length;c++){o.format("CW %3d:",c);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){o.format("    |   ");continue}let g=this.detectionResultColumns[f].getCodewords()[c];if(g==null){o.format("    |   ");continue}o.format(" %3d|%3d",g.getRowNumber(),g.getValue())}o.format("%n")}return o.toString()}}class ki{constructor(i,o,c,f){this.rowNumber=ki.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(o),this.bucket=Math.trunc(c),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==ki.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}ki.BARCODE_ROW_UNKNOWN=-1;class xs{static initialize(){for(let i=0;i<nt.SYMBOL_TABLE.length;i++){let o=nt.SYMBOL_TABLE[i],c=o&1;for(let f=0;f<nt.BARS_IN_MODULE;f++){let g=0;for(;(o&1)===c;)g+=1,o>>=1;c=o&1,xs.RATIOS_TABLE[i]||(xs.RATIOS_TABLE[i]=new Array(nt.BARS_IN_MODULE)),xs.RATIOS_TABLE[i][nt.BARS_IN_MODULE-f-1]=Math.fround(g/nt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let o=xs.getDecodedCodewordValue(xs.sampleBitCounts(i));return o!==-1?o:xs.getClosestDecodedValue(i)}static sampleBitCounts(i){let o=Ge.sum(i),c=new Int32Array(nt.BARS_IN_MODULE),f=0,g=0;for(let p=0;p<nt.MODULES_IN_CODEWORD;p++){let w=o/(2*nt.MODULES_IN_CODEWORD)+p*o/nt.MODULES_IN_CODEWORD;g+i[f]<=w&&(g+=i[f],f++),c[f]++}return c}static getDecodedCodewordValue(i){let o=xs.getBitValue(i);return nt.getCodeword(o)===-1?-1:o}static getBitValue(i){let o=0;for(let c=0;c<i.length;c++)for(let f=0;f<i[c];f++)o=o<<1|(c%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(i){let o=Ge.sum(i),c=new Array(nt.BARS_IN_MODULE);if(o>1)for(let p=0;p<c.length;p++)c[p]=Math.fround(i[p]/o);let f=vt.MAX_VALUE,g=-1;this.bSymbolTableReady||xs.initialize();for(let p=0;p<xs.RATIOS_TABLE.length;p++){let w=0,C=xs.RATIOS_TABLE[p];for(let _=0;_<nt.BARS_IN_MODULE;_++){let O=Math.fround(C[_]-c[_]);if(w+=Math.fround(O*O),w>=f)break}w<f&&(f=w,g=nt.SYMBOL_TABLE[p])}return g}}xs.bSymbolTableReady=!1,xs.RATIOS_TABLE=new Array(nt.SYMBOL_TABLE.length).map(k=>new Array(nt.BARS_IN_MODULE));class yl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class bl{static parseLong(i,o=void 0){return parseInt(i,o)}}class ca extends x{}ca.kind="NullPointerException";class wl{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,o,c){if(i==null)throw new ca;if(o<0||o>i.length||c<0||o+c>i.length||o+c<0)throw new U;if(c===0)return;for(let f=0;f<c;f++)this.write(i[o+f])}flush(){}close(){}}class Ud extends x{}class i0 extends wl{constructor(i=32){if(super(),this.count=0,i<0)throw new A("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let c=this.buf.length<<1;if(c-i<0&&(c=i),c<0){if(i<0)throw new Ud;c=P.MAX_VALUE}this.buf=Y.copyOfUint8Array(this.buf,c)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,o,c){if(o<0||o>i.length||c<0||o+c-i.length>0)throw new U;this.ensureCapacity(this.count+c),j.arraycopy(i,o,this.buf,this.count,c),this.count+=c}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Y.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Gt;(function(k){k[k.ALPHA=0]="ALPHA",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.PUNCT=3]="PUNCT",k[k.ALPHA_SHIFT=4]="ALPHA_SHIFT",k[k.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Gt||(Gt={}));function Fd(){if(typeof window<"u")return window.BigInt||null;if(typeof qf<"u")return qf.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ua;function ir(k){if(typeof ua>"u"&&(ua=Fd()),ua===null)throw new Error("BigInt is not supported!");return ua(k)}function r0(){let k=[];k[0]=ir(1);let i=ir(900);k[1]=i;for(let o=2;o<16;o++)k[o]=k[o-1]*i;return k}class we{static decode(i,o){let c=new ce(""),f=X.ISO8859_1;c.enableDecoding(f);let g=1,p=i[g++],w=new yl;for(;g<i[0];){switch(p){case we.TEXT_COMPACTION_MODE_LATCH:g=we.textCompaction(i,g,c);break;case we.BYTE_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH_6:g=we.byteCompaction(p,i,f,g,c);break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[g++]);break;case we.NUMERIC_COMPACTION_MODE_LATCH:g=we.numericCompaction(i,g,c);break;case we.ECI_CHARSET:X.getCharacterSetECIByValue(i[g++]);break;case we.ECI_GENERAL_PURPOSE:g+=2;break;case we.ECI_USER_DEFINED:g++;break;case we.BEGIN_MACRO_PDF417_CONTROL_BLOCK:g=we.decodeMacroBlock(i,g,w);break;case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case we.MACRO_PDF417_TERMINATOR:throw new W;default:g--,g=we.textCompaction(i,g,c);break}if(g<i.length)p=i[g++];else throw W.getFormatInstance()}if(c.length()===0)throw W.getFormatInstance();let C=new pt(null,c.toString(),null,o);return C.setOther(w),C}static decodeMacroBlock(i,o,c){if(o+we.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw W.getFormatInstance();let f=new Int32Array(we.NUMBER_OF_SEQUENCE_CODEWORDS);for(let w=0;w<we.NUMBER_OF_SEQUENCE_CODEWORDS;w++,o++)f[w]=i[o];c.setSegmentIndex(P.parseInt(we.decodeBase900toBase10(f,we.NUMBER_OF_SEQUENCE_CODEWORDS)));let g=new ce;o=we.textCompaction(i,o,g),c.setFileId(g.toString());let p=-1;for(i[o]===we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=o+1);o<i[0];)switch(i[o]){case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,i[o]){case we.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let w=new ce;o=we.textCompaction(i,o+1,w),c.setFileName(w.toString());break;case we.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let C=new ce;o=we.textCompaction(i,o+1,C),c.setSender(C.toString());break;case we.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let _=new ce;o=we.textCompaction(i,o+1,_),c.setAddressee(_.toString());break;case we.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let O=new ce;o=we.numericCompaction(i,o+1,O),c.setSegmentCount(P.parseInt(O.toString()));break;case we.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let L=new ce;o=we.numericCompaction(i,o+1,L),c.setTimestamp(bl.parseLong(L.toString()));break;case we.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let B=new ce;o=we.numericCompaction(i,o+1,B),c.setChecksum(P.parseInt(B.toString()));break;case we.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let q=new ce;o=we.numericCompaction(i,o+1,q),c.setFileSize(bl.parseLong(q.toString()));break;default:throw W.getFormatInstance()}break;case we.MACRO_PDF417_TERMINATOR:o++,c.setLastSegment(!0);break;default:throw W.getFormatInstance()}if(p!==-1){let w=o-p;c.isLastSegment()&&w--,c.setOptionalData(Y.copyOfRange(i,p,p+w))}return o}static textCompaction(i,o,c){let f=new Int32Array((i[0]-o)*2),g=new Int32Array((i[0]-o)*2),p=0,w=!1;for(;o<i[0]&&!w;){let C=i[o++];if(C<we.TEXT_COMPACTION_MODE_LATCH)f[p]=C/30,f[p+1]=C%30,p+=2;else switch(C){case we.TEXT_COMPACTION_MODE_LATCH:f[p++]=we.TEXT_COMPACTION_MODE_LATCH;break;case we.BYTE_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH_6:case we.NUMERIC_COMPACTION_MODE_LATCH:case we.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case we.MACRO_PDF417_TERMINATOR:o--,w=!0;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[p]=we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,C=i[o++],g[p]=C,p++;break}}return we.decodeTextCompaction(f,g,p,c),o}static decodeTextCompaction(i,o,c,f){let g=Gt.ALPHA,p=Gt.ALPHA,w=0;for(;w<c;){let C=i[w],_="";switch(g){case Gt.ALPHA:if(C<26)_=String.fromCharCode(65+C);else switch(C){case 26:_=" ";break;case we.LL:g=Gt.LOWER;break;case we.ML:g=Gt.MIXED;break;case we.PS:p=g,g=Gt.PUNCT_SHIFT;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[w]);break;case we.TEXT_COMPACTION_MODE_LATCH:g=Gt.ALPHA;break}break;case Gt.LOWER:if(C<26)_=String.fromCharCode(97+C);else switch(C){case 26:_=" ";break;case we.AS:p=g,g=Gt.ALPHA_SHIFT;break;case we.ML:g=Gt.MIXED;break;case we.PS:p=g,g=Gt.PUNCT_SHIFT;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[w]);break;case we.TEXT_COMPACTION_MODE_LATCH:g=Gt.ALPHA;break}break;case Gt.MIXED:if(C<we.PL)_=we.MIXED_CHARS[C];else switch(C){case we.PL:g=Gt.PUNCT;break;case 26:_=" ";break;case we.LL:g=Gt.LOWER;break;case we.AL:g=Gt.ALPHA;break;case we.PS:p=g,g=Gt.PUNCT_SHIFT;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[w]);break;case we.TEXT_COMPACTION_MODE_LATCH:g=Gt.ALPHA;break}break;case Gt.PUNCT:if(C<we.PAL)_=we.PUNCT_CHARS[C];else switch(C){case we.PAL:g=Gt.ALPHA;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[w]);break;case we.TEXT_COMPACTION_MODE_LATCH:g=Gt.ALPHA;break}break;case Gt.ALPHA_SHIFT:if(g=p,C<26)_=String.fromCharCode(65+C);else switch(C){case 26:_=" ";break;case we.TEXT_COMPACTION_MODE_LATCH:g=Gt.ALPHA;break}break;case Gt.PUNCT_SHIFT:if(g=p,C<we.PAL)_=we.PUNCT_CHARS[C];else switch(C){case we.PAL:g=Gt.ALPHA;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[w]);break;case we.TEXT_COMPACTION_MODE_LATCH:g=Gt.ALPHA;break}break}_!==""&&f.append(_),w++}}static byteCompaction(i,o,c,f,g){let p=new i0,w=0,C=0,_=!1;switch(i){case we.BYTE_COMPACTION_MODE_LATCH:let O=new Int32Array(6),L=o[f++];for(;f<o[0]&&!_;)switch(O[w++]=L,C=900*C+L,L=o[f++],L){case we.TEXT_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH:case we.NUMERIC_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH_6:case we.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case we.MACRO_PDF417_TERMINATOR:f--,_=!0;break;default:if(w%5===0&&w>0){for(let B=0;B<6;++B)p.write(Number(ir(C)>>ir(8*(5-B))));C=0,w=0}break}f===o[0]&&L<we.TEXT_COMPACTION_MODE_LATCH&&(O[w++]=L);for(let B=0;B<w;B++)p.write(O[B]);break;case we.BYTE_COMPACTION_MODE_LATCH_6:for(;f<o[0]&&!_;){let B=o[f++];if(B<we.TEXT_COMPACTION_MODE_LATCH)w++,C=900*C+B;else switch(B){case we.TEXT_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH:case we.NUMERIC_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH_6:case we.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case we.MACRO_PDF417_TERMINATOR:f--,_=!0;break}if(w%5===0&&w>0){for(let q=0;q<6;++q)p.write(Number(ir(C)>>ir(8*(5-q))));C=0,w=0}}break}return g.append(Ae.decode(p.toByteArray(),c)),f}static numericCompaction(i,o,c){let f=0,g=!1,p=new Int32Array(we.MAX_NUMERIC_CODEWORDS);for(;o<i[0]&&!g;){let w=i[o++];if(o===i[0]&&(g=!0),w<we.TEXT_COMPACTION_MODE_LATCH)p[f]=w,f++;else switch(w){case we.TEXT_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH_6:case we.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case we.MACRO_PDF417_TERMINATOR:o--,g=!0;break}(f%we.MAX_NUMERIC_CODEWORDS===0||w===we.NUMERIC_COMPACTION_MODE_LATCH||g)&&f>0&&(c.append(we.decodeBase900toBase10(p,f)),f=0)}return o}static decodeBase900toBase10(i,o){let c=ir(0);for(let g=0;g<o;g++)c+=we.EXP900[o-g-1]*ir(i[g]);let f=c.toString();if(f.charAt(0)!=="1")throw new W;return f.substring(1)}}we.TEXT_COMPACTION_MODE_LATCH=900,we.BYTE_COMPACTION_MODE_LATCH=901,we.NUMERIC_COMPACTION_MODE_LATCH=902,we.BYTE_COMPACTION_MODE_LATCH_6=924,we.ECI_USER_DEFINED=925,we.ECI_GENERAL_PURPOSE=926,we.ECI_CHARSET=927,we.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,we.MACRO_PDF417_TERMINATOR=922,we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,we.MAX_NUMERIC_CODEWORDS=15,we.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,we.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,we.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,we.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,we.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,we.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,we.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,we.PL=25,we.LL=27,we.AS=27,we.ML=28,we.AL=28,we.PS=29,we.PAL=29,we.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,we.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",we.EXP900=Fd()?r0():[],we.NUMBER_OF_SEQUENCE_CODEWORDS=2;class yt{constructor(){}static decode(i,o,c,f,g,p,w){let C=new er(i,o,c,f,g),_=null,O=null,L;for(let Q=!0;;Q=!1){if(o!=null&&(_=yt.getRowIndicatorColumn(i,C,o,!0,p,w)),f!=null&&(O=yt.getRowIndicatorColumn(i,C,f,!1,p,w)),L=yt.merge(_,O),L==null)throw se.getNotFoundInstance();let ee=L.getBoundingBox();if(Q&&ee!=null&&(ee.getMinY()<C.getMinY()||ee.getMaxY()>C.getMaxY()))C=ee;else break}L.setBoundingBox(C);let B=L.getBarcodeColumnCount()+1;L.setDetectionResultColumn(0,_),L.setDetectionResultColumn(B,O);let q=_!=null;for(let Q=1;Q<=B;Q++){let ee=q?Q:B-Q;if(L.getDetectionResultColumn(ee)!==void 0)continue;let ue;ee===0||ee===B?ue=new nr(C,ee===0):ue=new la(C),L.setDetectionResultColumn(ee,ue);let xe=-1,ke=xe;for(let Pe=C.getMinY();Pe<=C.getMaxY();Pe++){if(xe=yt.getStartColumn(L,ee,Pe,q),xe<0||xe>C.getMaxX()){if(ke===-1)continue;xe=ke}let Me=yt.detectCodeword(i,C.getMinX(),C.getMaxX(),q,xe,Pe,p,w);Me!=null&&(ue.setCodeword(Pe,Me),ke=xe,p=Math.min(p,Me.getWidth()),w=Math.max(w,Me.getWidth()))}}return yt.createDecoderResult(L)}static merge(i,o){if(i==null&&o==null)return null;let c=yt.getBarcodeMetadata(i,o);if(c==null)return null;let f=er.merge(yt.adjustBoundingBox(i),yt.adjustBoundingBox(o));return new sr(c,f)}static adjustBoundingBox(i){if(i==null)return null;let o=i.getRowHeights();if(o==null)return null;let c=yt.getMax(o),f=0;for(let w of o)if(f+=c-w,w>0)break;let g=i.getCodewords();for(let w=0;f>0&&g[w]==null;w++)f--;let p=0;for(let w=o.length-1;w>=0&&(p+=c-o[w],!(o[w]>0));w--);for(let w=g.length-1;p>0&&g[w]==null;w--)p--;return i.getBoundingBox().addMissingRows(f,p,i.isLeft())}static getMax(i){let o=-1;for(let c of i)o=Math.max(o,c);return o}static getBarcodeMetadata(i,o){let c;if(i==null||(c=i.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let f;return o==null||(f=o.getBarcodeMetadata())==null?c:c.getColumnCount()!==f.getColumnCount()&&c.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&c.getRowCount()!==f.getRowCount()?null:c}static getRowIndicatorColumn(i,o,c,f,g,p){let w=new nr(o,f);for(let C=0;C<2;C++){let _=C===0?1:-1,O=Math.trunc(Math.trunc(c.getX()));for(let L=Math.trunc(Math.trunc(c.getY()));L<=o.getMaxY()&&L>=o.getMinY();L+=_){let B=yt.detectCodeword(i,0,i.getWidth(),f,O,L,g,p);B!=null&&(w.setCodeword(L,B),f?O=B.getStartX():O=B.getEndX())}}return w}static adjustCodewordCount(i,o){let c=o[0][1],f=c.getValue(),g=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-yt.getNumberOfECCodeWords(i.getBarcodeECLevel());if(f.length===0){if(g<1||g>nt.MAX_CODEWORDS_IN_BARCODE)throw se.getNotFoundInstance();c.setValue(g)}else f[0]!==g&&c.setValue(g)}static createDecoderResult(i){let o=yt.createBarcodeMatrix(i);yt.adjustCodewordCount(i,o);let c=new Array,f=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),g=[],p=new Array;for(let C=0;C<i.getBarcodeRowCount();C++)for(let _=0;_<i.getBarcodeColumnCount();_++){let O=o[C][_+1].getValue(),L=C*i.getBarcodeColumnCount()+_;O.length===0?c.push(L):O.length===1?f[L]=O[0]:(p.push(L),g.push(O))}let w=new Array(g.length);for(let C=0;C<w.length;C++)w[C]=g[C];return yt.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),f,nt.toIntArray(c),nt.toIntArray(p),w)}static createDecoderResultFromAmbiguousValues(i,o,c,f,g){let p=new Int32Array(f.length),w=100;for(;w-- >0;){for(let C=0;C<p.length;C++)o[f[C]]=g[C][p[C]];try{return yt.decodeCodewords(o,i,c)}catch(C){if(!(C instanceof I))throw C}if(p.length===0)throw I.getChecksumInstance();for(let C=0;C<p.length;C++)if(p[C]<g[C].length-1){p[C]++;break}else if(p[C]=0,C===p.length-1)throw I.getChecksumInstance()}throw I.getChecksumInstance()}static createBarcodeMatrix(i){let o=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let f=0;f<o.length;f++)for(let g=0;g<o[f].length;g++)o[f][g]=new Fn;let c=0;for(let f of i.getDetectionResultColumns()){if(f!=null){for(let g of f.getCodewords())if(g!=null){let p=g.getRowNumber();if(p>=0){if(p>=o.length)continue;o[p][c].setValue(g.getValue())}}}c++}return o}static isValidBarcodeColumn(i,o){return o>=0&&o<=i.getBarcodeColumnCount()+1}static getStartColumn(i,o,c,f){let g=f?1:-1,p=null;if(yt.isValidBarcodeColumn(i,o-g)&&(p=i.getDetectionResultColumn(o-g).getCodeword(c)),p!=null)return f?p.getEndX():p.getStartX();if(p=i.getDetectionResultColumn(o).getCodewordNearby(c),p!=null)return f?p.getStartX():p.getEndX();if(yt.isValidBarcodeColumn(i,o-g)&&(p=i.getDetectionResultColumn(o-g).getCodewordNearby(c)),p!=null)return f?p.getEndX():p.getStartX();let w=0;for(;yt.isValidBarcodeColumn(i,o-g);){o-=g;for(let C of i.getDetectionResultColumn(o).getCodewords())if(C!=null)return(f?C.getEndX():C.getStartX())+g*w*(C.getEndX()-C.getStartX());w++}return f?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,o,c,f,g,p,w,C){g=yt.adjustCodewordStartColumn(i,o,c,f,g,p);let _=yt.getModuleBitCount(i,o,c,f,g,p);if(_==null)return null;let O,L=Ge.sum(_);if(f)O=g+L;else{for(let Q=0;Q<_.length/2;Q++){let ee=_[Q];_[Q]=_[_.length-1-Q],_[_.length-1-Q]=ee}O=g,g=O-L}if(!yt.checkCodewordSkew(L,w,C))return null;let B=xs.getDecodedValue(_),q=nt.getCodeword(B);return q===-1?null:new ki(g,O,yt.getCodewordBucketNumber(B),q)}static getModuleBitCount(i,o,c,f,g,p){let w=g,C=new Int32Array(8),_=0,O=f?1:-1,L=f;for(;(f?w<c:w>=o)&&_<C.length;)i.get(w,p)===L?(C[_]++,w+=O):(_++,L=!L);return _===C.length||w===(f?c:o)&&_===C.length-1?C:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,o,c,f,g,p){let w=g,C=f?-1:1;for(let _=0;_<2;_++){for(;(f?w>=o:w<c)&&f===i.get(w,p);){if(Math.abs(g-w)>yt.CODEWORD_SKEW_SIZE)return g;w+=C}C=-C,f=!f}return w}static checkCodewordSkew(i,o,c){return o-yt.CODEWORD_SKEW_SIZE<=i&&i<=c+yt.CODEWORD_SKEW_SIZE}static decodeCodewords(i,o,c){if(i.length===0)throw W.getFormatInstance();let f=1<<o+1,g=yt.correctErrors(i,c,f);yt.verifyCodewordCount(i,f);let p=we.decode(i,""+o);return p.setErrorsCorrected(g),p.setErasures(c.length),p}static correctErrors(i,o,c){if(o!=null&&o.length>c/2+yt.MAX_ERRORS||c<0||c>yt.MAX_EC_CODEWORDS)throw I.getChecksumInstance();return yt.errorCorrection.decode(i,c,o)}static verifyCodewordCount(i,o){if(i.length<4)throw W.getFormatInstance();let c=i[0];if(c>i.length)throw W.getFormatInstance();if(c===0)if(o<i.length)i[0]=i.length-o;else throw W.getFormatInstance()}static getBitCountForCodeword(i){let o=new Int32Array(8),c=0,f=o.length-1;for(;!((i&1)!==c&&(c=i&1,f--,f<0));)o[f]++,i>>=1;return o}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return yt.getCodewordBucketNumber(yt.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let o=new tr;for(let c=0;c<i.length;c++){o.format("Row %2d: ",c);for(let f=0;f<i[c].length;f++){let g=i[c][f];g.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",g.getValue()[0],g.getConfidence(g.getValue()[0]))}o.format("%n")}return o.toString()}}yt.CODEWORD_SKEW_SIZE=2,yt.MAX_ERRORS=3,yt.MAX_EC_CODEWORDS=512,yt.errorCorrection=new po;class Xn{decode(i,o=null){let c=Xn.decode(i,o,!1);if(c==null||c.length===0||c[0]==null)throw se.getNotFoundInstance();return c[0]}decodeMultiple(i,o=null){try{return Xn.decode(i,o,!0)}catch(c){throw c instanceof W||c instanceof I?se.getNotFoundInstance():c}}static decode(i,o,c){const f=new Array,g=gt.detectMultiple(i,o,c);for(const p of g.getPoints()){const w=yt.decode(g.getBits(),p[4],p[5],p[6],p[7],Xn.getMinCodewordWidth(p),Xn.getMaxCodewordWidth(p)),C=new Be(w.getText(),w.getRawBytes(),void 0,p,Ee.PDF_417);C.putMetadata(Ze.ERROR_CORRECTION_LEVEL,w.getECLevel());const _=w.getOther();_!=null&&C.putMetadata(Ze.PDF417_EXTRA_METADATA,_),f.push(C)}return f.map(p=>p)}static getMaxWidth(i,o){return i==null||o==null?0:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMinWidth(i,o){return i==null||o==null?P.MAX_VALUE:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Xn.getMaxWidth(i[0],i[4]),Xn.getMaxWidth(i[6],i[2])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN),Math.max(Xn.getMaxWidth(i[1],i[5]),Xn.getMaxWidth(i[7],i[3])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Xn.getMinWidth(i[0],i[4]),Xn.getMinWidth(i[6],i[2])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN),Math.min(Xn.getMinWidth(i[1],i[5]),Xn.getMinWidth(i[7],i[3])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN)))}reset(){}}class xo extends x{}xo.kind="ReaderException";class Vd{constructor(i,o){this.verbose=i===!0,o&&this.setHints(o)}decode(i,o){return o&&this.setHints(o),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const o=!r(i)&&i.get(Z.TRY_HARDER)===!0,c=r(i)?null:i.get(Z.POSSIBLE_FORMATS),f=new Array;if(!r(c)){const g=c.some(p=>p===Ee.UPC_A||p===Ee.UPC_E||p===Ee.EAN_13||p===Ee.EAN_8||p===Ee.CODABAR||p===Ee.CODE_39||p===Ee.CODE_93||p===Ee.CODE_128||p===Ee.ITF||p===Ee.RSS_14||p===Ee.RSS_EXPANDED);g&&!o&&f.push(new Ki(i,this.verbose)),c.includes(Ee.QR_CODE)&&f.push(new Mi),c.includes(Ee.DATA_MATRIX)&&f.push(new Qs),c.includes(Ee.AZTEC)&&f.push(new cn),c.includes(Ee.PDF_417)&&f.push(new Xn),g&&o&&f.push(new Ki(i,this.verbose))}f.length===0&&(o||f.push(new Ki(i,this.verbose)),f.push(new Mi),f.push(new Qs),f.push(new cn),f.push(new Xn),o&&f.push(new Ki(i,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new xo("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(i,this.hints)}catch(c){if(c instanceof xo)continue}throw new se("No MultiFormat Readers were able to detect the code.")}}class a0 extends pe{constructor(i=null,o=500){const c=new Vd;c.setHints(i),super(c,o)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class o0 extends pe{constructor(i=500){super(new Xn,i)}}class l0 extends pe{constructor(i=500){super(new Mi,i)}}var yo;(function(k){k[k.ERROR_CORRECTION=0]="ERROR_CORRECTION",k[k.CHARACTER_SET=1]="CHARACTER_SET",k[k.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",k[k.MIN_SIZE=3]="MIN_SIZE",k[k.MAX_SIZE=4]="MAX_SIZE",k[k.MARGIN=5]="MARGIN",k[k.PDF417_COMPACT=6]="PDF417_COMPACT",k[k.PDF417_COMPACTION=7]="PDF417_COMPACTION",k[k.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",k[k.AZTEC_LAYERS=9]="AZTEC_LAYERS",k[k.QR_VERSION=10]="QR_VERSION"})(yo||(yo={}));var Mn=yo;class Vc{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Re(i,Int32Array.from([1])))}buildGenerator(i){const o=this.cachedGenerators;if(i>=o.length){let c=o[o.length-1];const f=this.field;for(let g=o.length;g<=i;g++){const p=c.multiply(new Re(f,Int32Array.from([1,f.exp(g-1+f.getGeneratorBase())])));o.push(p),c=p}}return o[i]}encode(i,o){if(o===0)throw new A("No error correction bytes");const c=i.length-o;if(c<=0)throw new A("No data bytes provided");const f=this.buildGenerator(o),g=new Int32Array(c);j.arraycopy(i,0,g,0,c);let p=new Re(this.field,g);p=p.multiplyByMonomial(o,1);const C=p.divide(f)[1].getCoefficients(),_=o-C.length;for(let O=0;O<_;O++)i[c+O]=0;j.arraycopy(C,0,i,c+_,C.length)}}class hn{constructor(){}static applyMaskPenaltyRule1(i){return hn.applyMaskPenaltyRule1Internal(i,!0)+hn.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let o=0;const c=i.getArray(),f=i.getWidth(),g=i.getHeight();for(let p=0;p<g-1;p++){const w=c[p];for(let C=0;C<f-1;C++){const _=w[C];_===w[C+1]&&_===c[p+1][C]&&_===c[p+1][C+1]&&o++}}return hn.N2*o}static applyMaskPenaltyRule3(i){let o=0;const c=i.getArray(),f=i.getWidth(),g=i.getHeight();for(let p=0;p<g;p++)for(let w=0;w<f;w++){const C=c[p];w+6<f&&C[w]===1&&C[w+1]===0&&C[w+2]===1&&C[w+3]===1&&C[w+4]===1&&C[w+5]===0&&C[w+6]===1&&(hn.isWhiteHorizontal(C,w-4,w)||hn.isWhiteHorizontal(C,w+7,w+11))&&o++,p+6<g&&c[p][w]===1&&c[p+1][w]===0&&c[p+2][w]===1&&c[p+3][w]===1&&c[p+4][w]===1&&c[p+5][w]===0&&c[p+6][w]===1&&(hn.isWhiteVertical(c,w,p-4,p)||hn.isWhiteVertical(c,w,p+7,p+11))&&o++}return o*hn.N3}static isWhiteHorizontal(i,o,c){o=Math.max(o,0),c=Math.min(c,i.length);for(let f=o;f<c;f++)if(i[f]===1)return!1;return!0}static isWhiteVertical(i,o,c,f){c=Math.max(c,0),f=Math.min(f,i.length);for(let g=c;g<f;g++)if(i[g][o]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let o=0;const c=i.getArray(),f=i.getWidth(),g=i.getHeight();for(let C=0;C<g;C++){const _=c[C];for(let O=0;O<f;O++)_[O]===1&&o++}const p=i.getHeight()*i.getWidth();return Math.floor(Math.abs(o*2-p)*10/p)*hn.N4}static getDataMaskBit(i,o,c){let f,g;switch(i){case 0:f=c+o&1;break;case 1:f=c&1;break;case 2:f=o%3;break;case 3:f=(c+o)%3;break;case 4:f=Math.floor(c/2)+Math.floor(o/3)&1;break;case 5:g=c*o,f=(g&1)+g%3;break;case 6:g=c*o,f=(g&1)+g%3&1;break;case 7:g=c*o,f=g%3+(c+o&1)&1;break;default:throw new A("Invalid mask pattern: "+i)}return f===0}static applyMaskPenaltyRule1Internal(i,o){let c=0;const f=o?i.getHeight():i.getWidth(),g=o?i.getWidth():i.getHeight(),p=i.getArray();for(let w=0;w<f;w++){let C=0,_=-1;for(let O=0;O<g;O++){const L=o?p[w][O]:p[O][w];L===_?C++:(C>=5&&(c+=hn.N1+(C-5)),C=1,_=L)}C>=5&&(c+=hn.N1+(C-5))}return c}}hn.N1=3,hn.N2=3,hn.N3=40,hn.N4=10;class bo{constructor(i,o){this.width=i,this.height=o;const c=new Array(o);for(let f=0;f!==o;f++)c[f]=new Uint8Array(i);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(i,o){return this.bytes[o][i]}getArray(){return this.bytes}setNumber(i,o,c){this.bytes[o][i]=c}setBoolean(i,o,c){this.bytes[o][i]=c?1:0}clear(i){for(const o of this.bytes)Y.fill(o,i)}equals(i){if(!(i instanceof bo))return!1;const o=i;if(this.width!==o.width||this.height!==o.height)return!1;for(let c=0,f=this.height;c<f;++c){const g=this.bytes[c],p=o.bytes[c];for(let w=0,C=this.width;w<C;++w)if(g[w]!==p[w])return!1}return!0}toString(){const i=new ce;for(let o=0,c=this.height;o<c;++o){const f=this.bytes[o];for(let g=0,p=this.width;g<p;++g)switch(f[g]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class Tr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new ce;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<Tr.NUM_MASK_PATTERNS}}Tr.NUM_MASK_PATTERNS=8;class Xt extends x{}Xt.kind="WriterException";class it{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,o,c,f,g){it.clearMatrix(g),it.embedBasicPatterns(c,g),it.embedTypeInfo(o,f,g),it.maybeEmbedVersionInfo(c,g),it.embedDataBits(i,f,g)}static embedBasicPatterns(i,o){it.embedPositionDetectionPatternsAndSeparators(o),it.embedDarkDotAtLeftBottomCorner(o),it.maybeEmbedPositionAdjustmentPatterns(i,o),it.embedTimingPatterns(o)}static embedTypeInfo(i,o,c){const f=new V;it.makeTypeInfoBits(i,o,f);for(let g=0,p=f.getSize();g<p;++g){const w=f.get(f.getSize()-1-g),C=it.TYPE_INFO_COORDINATES[g],_=C[0],O=C[1];if(c.setBoolean(_,O,w),g<8){const L=c.getWidth()-g-1;c.setBoolean(L,8,w)}else{const B=c.getHeight()-7+(g-8);c.setBoolean(8,B,w)}}}static maybeEmbedVersionInfo(i,o){if(i.getVersionNumber()<7)return;const c=new V;it.makeVersionInfoBits(i,c);let f=6*3-1;for(let g=0;g<6;++g)for(let p=0;p<3;++p){const w=c.get(f);f--,o.setBoolean(g,o.getHeight()-11+p,w),o.setBoolean(o.getHeight()-11+p,g,w)}}static embedDataBits(i,o,c){let f=0,g=-1,p=c.getWidth()-1,w=c.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);w>=0&&w<c.getHeight();){for(let C=0;C<2;++C){const _=p-C;if(!it.isEmpty(c.get(_,w)))continue;let O;f<i.getSize()?(O=i.get(f),++f):O=!1,o!==255&&hn.getDataMaskBit(o,_,w)&&(O=!O),c.setBoolean(_,w,O)}w+=g}g=-g,w+=g,p-=2}if(f!==i.getSize())throw new Xt("Not all bits consumed: "+f+"/"+i.getSize())}static findMSBSet(i){return 32-P.numberOfLeadingZeros(i)}static calculateBCHCode(i,o){if(o===0)throw new A("0 polynomial");const c=it.findMSBSet(o);for(i<<=c-1;it.findMSBSet(i)>=c;)i^=o<<it.findMSBSet(i)-c;return i}static makeTypeInfoBits(i,o,c){if(!Tr.isValidMaskPattern(o))throw new Xt("Invalid mask pattern");const f=i.getBits()<<3|o;c.appendBits(f,5);const g=it.calculateBCHCode(f,it.TYPE_INFO_POLY);c.appendBits(g,10);const p=new V;if(p.appendBits(it.TYPE_INFO_MASK_PATTERN,15),c.xor(p),c.getSize()!==15)throw new Xt("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(i,o){o.appendBits(i.getVersionNumber(),6);const c=it.calculateBCHCode(i.getVersionNumber(),it.VERSION_INFO_POLY);if(o.appendBits(c,12),o.getSize()!==18)throw new Xt("should not happen but we got: "+o.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let o=8;o<i.getWidth()-8;++o){const c=(o+1)%2;it.isEmpty(i.get(o,6))&&i.setNumber(o,6,c),it.isEmpty(i.get(6,o))&&i.setNumber(6,o,c)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Xt;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,o,c){for(let f=0;f<8;++f){if(!it.isEmpty(c.get(i+f,o)))throw new Xt;c.setNumber(i+f,o,0)}}static embedVerticalSeparationPattern(i,o,c){for(let f=0;f<7;++f){if(!it.isEmpty(c.get(i,o+f)))throw new Xt;c.setNumber(i,o+f,0)}}static embedPositionAdjustmentPattern(i,o,c){for(let f=0;f<5;++f){const g=it.POSITION_ADJUSTMENT_PATTERN[f];for(let p=0;p<5;++p)c.setNumber(i+p,o+f,g[p])}}static embedPositionDetectionPattern(i,o,c){for(let f=0;f<7;++f){const g=it.POSITION_DETECTION_PATTERN[f];for(let p=0;p<7;++p)c.setNumber(i+p,o+f,g[p])}}static embedPositionDetectionPatternsAndSeparators(i){const o=it.POSITION_DETECTION_PATTERN[0].length;it.embedPositionDetectionPattern(0,0,i),it.embedPositionDetectionPattern(i.getWidth()-o,0,i),it.embedPositionDetectionPattern(0,i.getWidth()-o,i);const c=8;it.embedHorizontalSeparationPattern(0,c-1,i),it.embedHorizontalSeparationPattern(i.getWidth()-c,c-1,i),it.embedHorizontalSeparationPattern(0,i.getWidth()-c,i);const f=7;it.embedVerticalSeparationPattern(f,0,i),it.embedVerticalSeparationPattern(i.getHeight()-f-1,0,i),it.embedVerticalSeparationPattern(f,i.getHeight()-f,i)}static maybeEmbedPositionAdjustmentPatterns(i,o){if(i.getVersionNumber()<2)return;const c=i.getVersionNumber()-1,f=it.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let g=0,p=f.length;g!==p;g++){const w=f[g];if(w>=0)for(let C=0;C!==p;C++){const _=f[C];_>=0&&it.isEmpty(o.get(_,w))&&it.embedPositionAdjustmentPattern(_-2,w-2,o)}}}}it.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),it.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),it.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),it.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),it.VERSION_INFO_POLY=7973,it.TYPE_INFO_POLY=1335,it.TYPE_INFO_MASK_PATTERN=21522;class c0{constructor(i,o){this.dataBytes=i,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class nn{constructor(){}static calculateMaskPenalty(i){return hn.applyMaskPenaltyRule1(i)+hn.applyMaskPenaltyRule2(i)+hn.applyMaskPenaltyRule3(i)+hn.applyMaskPenaltyRule4(i)}static encode(i,o,c=null){let f=nn.DEFAULT_BYTE_MODE_ENCODING;const g=c!==null&&c.get(Mn.CHARACTER_SET)!==void 0;g&&(f=c.get(Mn.CHARACTER_SET).toString());const p=this.chooseMode(i,f),w=new V;if(p===Je.BYTE&&(g||nn.DEFAULT_BYTE_MODE_ENCODING!==f)){const Pe=X.getCharacterSetECIByName(f);Pe!==void 0&&this.appendECI(Pe,w)}this.appendModeInfo(p,w);const C=new V;this.appendBytes(i,p,C,f);let _;if(c!==null&&c.get(Mn.QR_VERSION)!==void 0){const Pe=Number.parseInt(c.get(Mn.QR_VERSION).toString(),10);_=Qe.getVersionForNumber(Pe);const Me=this.calculateBitsNeeded(p,w,C,_);if(!this.willFit(Me,_,o))throw new Xt("Data too big for requested version")}else _=this.recommendVersion(o,p,w,C);const O=new V;O.appendBitArray(w);const L=p===Je.BYTE?C.getSizeInBytes():i.length;this.appendLengthInfo(L,_,p,O),O.appendBitArray(C);const B=_.getECBlocksForLevel(o),q=_.getTotalCodewords()-B.getTotalECCodewords();this.terminateBits(q,O);const Q=this.interleaveWithECBytes(O,_.getTotalCodewords(),q,B.getNumBlocks()),ee=new Tr;ee.setECLevel(o),ee.setMode(p),ee.setVersion(_);const ue=_.getDimensionForVersion(),xe=new bo(ue,ue),ke=this.chooseMaskPattern(Q,o,_,xe);return ee.setMaskPattern(ke),it.buildMatrix(Q,o,_,ke,xe),ee.setMatrix(xe),ee}static recommendVersion(i,o,c,f){const g=this.calculateBitsNeeded(o,c,f,Qe.getVersionForNumber(1)),p=this.chooseVersion(g,i),w=this.calculateBitsNeeded(o,c,f,p);return this.chooseVersion(w,i)}static calculateBitsNeeded(i,o,c,f){return o.getSize()+i.getCharacterCountBits(f)+c.getSize()}static getAlphanumericCode(i){return i<nn.ALPHANUMERIC_TABLE.length?nn.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,o=null){if(X.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(i))return Je.KANJI;let c=!1,f=!1;for(let g=0,p=i.length;g<p;++g){const w=i.charAt(g);if(nn.isDigit(w))c=!0;else if(this.getAlphanumericCode(w.charCodeAt(0))!==-1)f=!0;else return Je.BYTE}return f?Je.ALPHANUMERIC:c?Je.NUMERIC:Je.BYTE}static isOnlyDoubleByteKanji(i){let o;try{o=Ae.encode(i,X.SJIS)}catch{return!1}const c=o.length;if(c%2!==0)return!1;for(let f=0;f<c;f+=2){const g=o[f]&255;if((g<129||g>159)&&(g<224||g>235))return!1}return!0}static chooseMaskPattern(i,o,c,f){let g=Number.MAX_SAFE_INTEGER,p=-1;for(let w=0;w<Tr.NUM_MASK_PATTERNS;w++){it.buildMatrix(i,o,c,w,f);let C=this.calculateMaskPenalty(f);C<g&&(g=C,p=w)}return p}static chooseVersion(i,o){for(let c=1;c<=40;c++){const f=Qe.getVersionForNumber(c);if(nn.willFit(i,f,o))return f}throw new Xt("Data too big")}static willFit(i,o,c){const f=o.getTotalCodewords(),p=o.getECBlocksForLevel(c).getTotalECCodewords(),w=f-p,C=(i+7)/8;return w>=C}static terminateBits(i,o){const c=i*8;if(o.getSize()>c)throw new Xt("data bits cannot fit in the QR Code"+o.getSize()+" > "+c);for(let p=0;p<4&&o.getSize()<c;++p)o.appendBit(!1);const f=o.getSize()&7;if(f>0)for(let p=f;p<8;p++)o.appendBit(!1);const g=i-o.getSizeInBytes();for(let p=0;p<g;++p)o.appendBits((p&1)===0?236:17,8);if(o.getSize()!==c)throw new Xt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,o,c,f,g,p){if(f>=c)throw new Xt("Block ID too large");const w=i%c,C=c-w,_=Math.floor(i/c),O=_+1,L=Math.floor(o/c),B=L+1,q=_-L,Q=O-B;if(q!==Q)throw new Xt("EC bytes mismatch");if(c!==C+w)throw new Xt("RS blocks mismatch");if(i!==(L+q)*C+(B+Q)*w)throw new Xt("Total bytes mismatch");f<C?(g[0]=L,p[0]=q):(g[0]=B,p[0]=Q)}static interleaveWithECBytes(i,o,c,f){if(i.getSizeInBytes()!==c)throw new Xt("Number of bits and data bytes does not match");let g=0,p=0,w=0;const C=new Array;for(let O=0;O<f;++O){const L=new Int32Array(1),B=new Int32Array(1);nn.getNumDataBytesAndNumECBytesForBlockID(o,c,f,O,L,B);const q=L[0],Q=new Uint8Array(q);i.toBytes(8*g,Q,0,q);const ee=nn.generateECBytes(Q,B[0]);C.push(new c0(Q,ee)),p=Math.max(p,q),w=Math.max(w,ee.length),g+=L[0]}if(c!==g)throw new Xt("Data bytes does not match offset");const _=new V;for(let O=0;O<p;++O)for(const L of C){const B=L.getDataBytes();O<B.length&&_.appendBits(B[O],8)}for(let O=0;O<w;++O)for(const L of C){const B=L.getErrorCorrectionBytes();O<B.length&&_.appendBits(B[O],8)}if(o!==_.getSizeInBytes())throw new Xt("Interleaving error: "+o+" and "+_.getSizeInBytes()+" differ.");return _}static generateECBytes(i,o){const c=i.length,f=new Int32Array(c+o);for(let p=0;p<c;p++)f[p]=i[p]&255;new Vc(Se.QR_CODE_FIELD_256).encode(f,o);const g=new Uint8Array(o);for(let p=0;p<o;p++)g[p]=f[c+p];return g}static appendModeInfo(i,o){o.appendBits(i.getBits(),4)}static appendLengthInfo(i,o,c,f){const g=c.getCharacterCountBits(o);if(i>=1<<g)throw new Xt(i+" is bigger than "+((1<<g)-1));f.appendBits(i,g)}static appendBytes(i,o,c,f){switch(o){case Je.NUMERIC:nn.appendNumericBytes(i,c);break;case Je.ALPHANUMERIC:nn.appendAlphanumericBytes(i,c);break;case Je.BYTE:nn.append8BitBytes(i,c,f);break;case Je.KANJI:nn.appendKanjiBytes(i,c);break;default:throw new Xt("Invalid mode: "+o)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const o=nn.getDigit(i);return o>=0&&o<=9}static appendNumericBytes(i,o){const c=i.length;let f=0;for(;f<c;){const g=nn.getDigit(i.charAt(f));if(f+2<c){const p=nn.getDigit(i.charAt(f+1)),w=nn.getDigit(i.charAt(f+2));o.appendBits(g*100+p*10+w,10),f+=3}else if(f+1<c){const p=nn.getDigit(i.charAt(f+1));o.appendBits(g*10+p,7),f+=2}else o.appendBits(g,4),f++}}static appendAlphanumericBytes(i,o){const c=i.length;let f=0;for(;f<c;){const g=nn.getAlphanumericCode(i.charCodeAt(f));if(g===-1)throw new Xt;if(f+1<c){const p=nn.getAlphanumericCode(i.charCodeAt(f+1));if(p===-1)throw new Xt;o.appendBits(g*45+p,11),f+=2}else o.appendBits(g,6),f++}}static append8BitBytes(i,o,c){let f;try{f=Ae.encode(i,c)}catch(g){throw new Xt(g)}for(let g=0,p=f.length;g!==p;g++){const w=f[g];o.appendBits(w,8)}}static appendKanjiBytes(i,o){let c;try{c=Ae.encode(i,X.SJIS)}catch(g){throw new Xt(g)}const f=c.length;for(let g=0;g<f;g+=2){const p=c[g]&255,w=c[g+1]&255,C=p<<8&4294967295|w;let _=-1;if(C>=33088&&C<=40956?_=C-33088:C>=57408&&C<=60351&&(_=C-49472),_===-1)throw new Xt("Invalid byte sequence");const O=(_>>8)*192+(_&255);o.appendBits(O,13)}}static appendECI(i,o){o.appendBits(Je.ECI.getBits(),4),o.appendBits(i.getValue(),8)}}nn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),nn.DEFAULT_BYTE_MODE_ENCODING=X.UTF8.getName();class _r{write(i,o,c,f=null){if(i.length===0)throw new A("Found empty contents");if(o<0||c<0)throw new A("Requested dimensions are too small: "+o+"x"+c);let g=$t.L,p=_r.QUIET_ZONE_SIZE;f!==null&&(f.get(Mn.ERROR_CORRECTION)!==void 0&&(g=$t.fromString(f.get(Mn.ERROR_CORRECTION).toString())),f.get(Mn.MARGIN)!==void 0&&(p=Number.parseInt(f.get(Mn.MARGIN).toString(),10)));const w=nn.encode(i,g,f);return this.renderResult(w,o,c,p)}writeToDom(i,o,c,f,g=null){typeof i=="string"&&(i=document.querySelector(i));const p=this.write(o,c,f,g);i&&i.appendChild(p)}renderResult(i,o,c,f){const g=i.getMatrix();if(g===null)throw new Oe;const p=g.getWidth(),w=g.getHeight(),C=p+f*2,_=w+f*2,O=Math.max(o,C),L=Math.max(c,_),B=Math.min(Math.floor(O/C),Math.floor(L/_)),q=Math.floor((O-p*B)/2),Q=Math.floor((L-w*B)/2),ee=this.createSVGElement(O,L);for(let ue=0,xe=Q;ue<w;ue++,xe+=B)for(let ke=0,Pe=q;ke<p;ke++,Pe+=B)if(g.get(ke,ue)===1){const Me=this.createSvgRectElement(Pe,xe,B,B);ee.appendChild(Me)}return ee}createSVGElement(i,o){const c=document.createElementNS(_r.SVG_NS,"svg");return c.setAttributeNS(null,"height",i.toString()),c.setAttributeNS(null,"width",o.toString()),c}createSvgRectElement(i,o,c,f){const g=document.createElementNS(_r.SVG_NS,"rect");return g.setAttributeNS(null,"x",i.toString()),g.setAttributeNS(null,"y",o.toString()),g.setAttributeNS(null,"height",c.toString()),g.setAttributeNS(null,"width",f.toString()),g.setAttributeNS(null,"fill","#000000"),g}}_r.QUIET_ZONE_SIZE=4,_r.SVG_NS="http://www.w3.org/2000/svg";class da{encode(i,o,c,f,g){if(i.length===0)throw new A("Found empty contents");if(o!==Ee.QR_CODE)throw new A("Can only encode QR_CODE, but got "+o);if(c<0||f<0)throw new A(`Requested dimensions are too small: ${c}x${f}`);let p=$t.L,w=da.QUIET_ZONE_SIZE;g!==null&&(g.get(Mn.ERROR_CORRECTION)!==void 0&&(p=$t.fromString(g.get(Mn.ERROR_CORRECTION).toString())),g.get(Mn.MARGIN)!==void 0&&(w=Number.parseInt(g.get(Mn.MARGIN).toString(),10)));const C=nn.encode(i,p,g);return da.renderResult(C,c,f,w)}static renderResult(i,o,c,f){const g=i.getMatrix();if(g===null)throw new Oe;const p=g.getWidth(),w=g.getHeight(),C=p+f*2,_=w+f*2,O=Math.max(o,C),L=Math.max(c,_),B=Math.min(Math.floor(O/C),Math.floor(L/_)),q=Math.floor((O-p*B)/2),Q=Math.floor((L-w*B)/2),ee=new Fe(O,L);for(let ue=0,xe=Q;ue<w;ue++,xe+=B)for(let ke=0,Pe=q;ke<p;ke++,Pe+=B)g.get(ke,ue)===1&&ee.setRegion(Pe,xe,B,B);return ee}}da.QUIET_ZONE_SIZE=4;class u0{encode(i,o,c,f,g){let p;switch(o){case Ee.QR_CODE:p=new da;break;default:throw new A("No encoder available for format "+o)}return p.encode(i,o,c,f,g)}}class fi extends De{constructor(i,o,c,f,g,p,w,C){if(super(p,w),this.yuvData=i,this.dataWidth=o,this.dataHeight=c,this.left=f,this.top=g,f+p>o||g+w>c)throw new A("Crop rectangle does not fit within image data.");C&&this.reverseHorizontal(p,w)}getRow(i,o){if(i<0||i>=this.getHeight())throw new A("Requested row is outside the image: "+i);const c=this.getWidth();(o==null||o.length<c)&&(o=new Uint8ClampedArray(c));const f=(i+this.top)*this.dataWidth+this.left;return j.arraycopy(this.yuvData,f,o,0,c),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.yuvData;const c=i*o,f=new Uint8ClampedArray(c);let g=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return j.arraycopy(this.yuvData,g,f,0,c),f;for(let p=0;p<o;p++){const w=p*i;j.arraycopy(this.yuvData,g,f,w,i),g+=this.dataWidth}return f}isCropSupported(){return!0}crop(i,o,c,f){return new fi(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+o,c,f,!1)}renderThumbnail(){const i=this.getWidth()/fi.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/fi.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(i*o),f=this.yuvData;let g=this.top*this.dataWidth+this.left;for(let p=0;p<o;p++){const w=p*i;for(let C=0;C<i;C++){const _=f[g+C*fi.THUMBNAIL_SCALE_FACTOR]&255;c[w+C]=4278190080|_*65793}g+=this.dataWidth*fi.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/fi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/fi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,o){const c=this.yuvData;for(let f=0,g=this.top*this.dataWidth+this.left;f<o;f++,g+=this.dataWidth){const p=g+i/2;for(let w=g,C=g+i-1;w<p;w++,C--){const _=c[w];c[w]=c[C],c[C]=_}}}invert(){return new $e(this)}}fi.THUMBNAIL_SCALE_FACTOR=2;class wo extends De{constructor(i,o,c,f,g,p,w){if(super(o,c),this.dataWidth=f,this.dataHeight=g,this.left=p,this.top=w,i.BYTES_PER_ELEMENT===4){const C=o*c,_=new Uint8ClampedArray(C);for(let O=0;O<C;O++){const L=i[O],B=L>>16&255,q=L>>7&510,Q=L&255;_[O]=(B+q+Q)/4&255}this.luminances=_}else this.luminances=i;if(f===void 0&&(this.dataWidth=o),g===void 0&&(this.dataHeight=c),p===void 0&&(this.left=0),w===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+c>this.dataHeight)throw new A("Crop rectangle does not fit within image data.")}getRow(i,o){if(i<0||i>=this.getHeight())throw new A("Requested row is outside the image: "+i);const c=this.getWidth();(o==null||o.length<c)&&(o=new Uint8ClampedArray(c));const f=(i+this.top)*this.dataWidth+this.left;return j.arraycopy(this.luminances,f,o,0,c),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.luminances;const c=i*o,f=new Uint8ClampedArray(c);let g=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return j.arraycopy(this.luminances,g,f,0,c),f;for(let p=0;p<o;p++){const w=p*i;j.arraycopy(this.luminances,g,f,w,i),g+=this.dataWidth}return f}isCropSupported(){return!0}crop(i,o,c,f){return new wo(this.luminances,c,f,this.dataWidth,this.dataHeight,this.left+i,this.top+o)}invert(){return new $e(this)}}class fa extends X{static forName(i){return this.getCharacterSetECIByName(i)}}class Hc{}Hc.ISO_8859_1=X.ISO8859_1;class zc{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class $c{static singletonList(i){return[i]}static min(i,o){return i.sort(o)[0]}}class Hd{constructor(i){this.previous=i}getPrevious(){return this.previous}}class Nr extends Hd{constructor(i,o,c){super(i),this.value=o,this.bitCount=c}appendTo(i,o){i.appendBits(this.value,this.bitCount)}add(i,o){return new Nr(this,i,o)}addBinaryShift(i,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Nr(this,i,o)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+P.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class vl extends Nr{constructor(i,o,c){super(i,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=c}appendTo(i,o){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):c===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(o[this.binaryShiftStart+c],8)}addBinaryShift(i,o){return new vl(this,i,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ha(k,i,o){return new vl(k,i,o)}function vo(k,i,o){return new Nr(k,i,o)}const d0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],rr=0,So=1,Rs=2,ga=3,ys=4,f0=new Nr(null,0,0),ma=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function zd(k){for(let i of k)Y.fill(i,-1);return k[rr][ys]=0,k[So][ys]=0,k[So][rr]=28,k[ga][ys]=0,k[Rs][ys]=0,k[Rs][rr]=15,k}const Gc=zd(Y.createInt32Array(6,6));class Us{constructor(i,o,c,f){this.token=i,this.mode=o,this.binaryShiftByteCount=c,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,o){let c=this.bitCount,f=this.token;if(i!==this.mode){let p=ma[this.mode][i];f=vo(f,p&65535,p>>16),c+=p>>16}let g=i===Rs?4:5;return f=vo(f,o,g),new Us(f,i,0,c+g)}shiftAndAppend(i,o){let c=this.token,f=this.mode===Rs?4:5;return c=vo(c,Gc[this.mode][i],f),c=vo(c,o,5),new Us(c,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(i){let o=this.token,c=this.mode,f=this.bitCount;if(this.mode===ys||this.mode===Rs){let w=ma[c][rr];o=vo(o,w&65535,w>>16),f+=w>>16,c=rr}let g=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new Us(o,c,this.binaryShiftByteCount+1,f+g);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(i+1)),p}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=ha(o,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Us(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let o=this.bitCount+(ma[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?o+=Us.calculateBinaryShiftCost(i)-Us.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(o+=10),o<=i.bitCount}toBitArray(i){let o=[];for(let f=this.endBinaryShift(i.length).token;f!==null;f=f.getPrevious())o.unshift(f);let c=new V;for(const f of o)f.appendTo(c,i);return c}toString(){return ve.format("%s bits=%d bytes=%d",d0[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Us.INITIAL_STATE=new Us(f0,rr,0,0);function qc(k){const i=ve.getCharCode(" "),o=ve.getCharCode("."),c=ve.getCharCode(",");k[rr][i]=1;const f=ve.getCharCode("Z"),g=ve.getCharCode("A");for(let B=g;B<=f;B++)k[rr][B]=B-g+2;k[So][i]=1;const p=ve.getCharCode("z"),w=ve.getCharCode("a");for(let B=w;B<=p;B++)k[So][B]=B-w+2;k[Rs][i]=1;const C=ve.getCharCode("9"),_=ve.getCharCode("0");for(let B=_;B<=C;B++)k[Rs][B]=B-_+2;k[Rs][c]=12,k[Rs][o]=13;const O=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let B=0;B<O.length;B++)k[ga][ve.getCharCode(O[B])]=B;const L=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let B=0;B<L.length;B++)ve.getCharCode(L[B])>0&&(k[ys][ve.getCharCode(L[B])]=B);return k}const Sl=qc(Y.createInt32Array(5,256));class pa{constructor(i){this.text=i}encode(){const i=ve.getCharCode(" "),o=ve.getCharCode(`
`);let c=$c.singletonList(Us.INITIAL_STATE);for(let g=0;g<this.text.length;g++){let p,w=g+1<this.text.length?this.text[g+1]:0;switch(this.text[g]){case ve.getCharCode("\r"):p=w===o?2:0;break;case ve.getCharCode("."):p=w===i?3:0;break;case ve.getCharCode(","):p=w===i?4:0;break;case ve.getCharCode(":"):p=w===i?5:0;break;default:p=0}p>0?(c=pa.updateStateListForPair(c,g,p),g++):c=this.updateStateListForChar(c,g)}return $c.min(c,(g,p)=>g.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,o){const c=[];for(let f of i)this.updateStateForChar(f,o,c);return pa.simplifyStates(c)}updateStateForChar(i,o,c){let f=this.text[o]&255,g=Sl[i.getMode()][f]>0,p=null;for(let w=0;w<=ys;w++){let C=Sl[w][f];if(C>0){if(p==null&&(p=i.endBinaryShift(o)),!g||w===i.getMode()||w===Rs){const _=p.latchAndAppend(w,C);c.push(_)}if(!g&&Gc[i.getMode()][w]>=0){const _=p.shiftAndAppend(w,C);c.push(_)}}}if(i.getBinaryShiftByteCount()>0||Sl[i.getMode()][f]===0){let w=i.addBinaryShiftChar(o);c.push(w)}}static updateStateListForPair(i,o,c){const f=[];for(let g of i)this.updateStateForPair(g,o,c,f);return this.simplifyStates(f)}static updateStateForPair(i,o,c,f){let g=i.endBinaryShift(o);if(f.push(g.latchAndAppend(ys,c)),i.getMode()!==ys&&f.push(g.shiftAndAppend(ys,c)),c===3||c===4){let p=g.latchAndAppend(Rs,16-c).latchAndAppend(Rs,1);f.push(p)}if(i.getBinaryShiftByteCount()>0){let p=i.addBinaryShiftChar(o).addBinaryShiftChar(o+1);f.push(p)}}static simplifyStates(i){let o=[];for(const c of i){let f=!0;for(const g of o){if(g.isBetterThanOrEqualTo(c)){f=!1;break}c.isBetterThanOrEqualTo(g)&&(o=o.filter(p=>p!==g))}f&&o.push(c)}return o}}class Dt{constructor(){}static encodeBytes(i){return Dt.encode(i,Dt.DEFAULT_EC_PERCENT,Dt.DEFAULT_AZTEC_LAYERS)}static encode(i,o,c){let f=new pa(i).encode(),g=P.truncDivision(f.getSize()*o,100)+11,p=f.getSize()+g,w,C,_,O,L;if(c!==Dt.DEFAULT_AZTEC_LAYERS){if(w=c<0,C=Math.abs(c),C>(w?Dt.MAX_NB_BITS_COMPACT:Dt.MAX_NB_BITS))throw new A(ve.format("Illegal value %s for layers",c));_=Dt.totalBitsInLayer(C,w),O=Dt.WORD_SIZE[C];let Me=_-_%O;if(L=Dt.stuffBits(f,O),L.getSize()+g>Me)throw new A("Data to large for user specified layer");if(w&&L.getSize()>O*64)throw new A("Data to large for user specified layer")}else{O=0,L=null;for(let Me=0;;Me++){if(Me>Dt.MAX_NB_BITS)throw new A("Data too large for an Aztec code");if(w=Me<=3,C=w?Me+1:Me,_=Dt.totalBitsInLayer(C,w),p>_)continue;(L==null||O!==Dt.WORD_SIZE[C])&&(O=Dt.WORD_SIZE[C],L=Dt.stuffBits(f,O));let mt=_-_%O;if(!(w&&L.getSize()>O*64)&&L.getSize()+g<=mt)break}}let B=Dt.generateCheckWords(L,_,O),q=L.getSize()/O,Q=Dt.generateModeMessage(w,C,q),ee=(w?11:14)+C*4,ue=new Int32Array(ee),xe;if(w){xe=ee;for(let Me=0;Me<ue.length;Me++)ue[Me]=Me}else{xe=ee+1+2*P.truncDivision(P.truncDivision(ee,2)-1,15);let Me=P.truncDivision(ee,2),mt=P.truncDivision(xe,2);for(let ht=0;ht<Me;ht++){let us=ht+P.truncDivision(ht,15);ue[Me-ht-1]=mt-us-1,ue[Me+ht]=mt+us+1}}let ke=new Fe(xe);for(let Me=0,mt=0;Me<C;Me++){let ht=(C-Me)*4+(w?9:12);for(let us=0;us<ht;us++){let Fs=us*2;for(let bs=0;bs<2;bs++)B.get(mt+Fs+bs)&&ke.set(ue[Me*2+bs],ue[Me*2+us]),B.get(mt+ht*2+Fs+bs)&&ke.set(ue[Me*2+us],ue[ee-1-Me*2-bs]),B.get(mt+ht*4+Fs+bs)&&ke.set(ue[ee-1-Me*2-bs],ue[ee-1-Me*2-us]),B.get(mt+ht*6+Fs+bs)&&ke.set(ue[ee-1-Me*2-us],ue[Me*2+bs])}mt+=ht*8}if(Dt.drawModeMessage(ke,w,xe,Q),w)Dt.drawBullsEye(ke,P.truncDivision(xe,2),5);else{Dt.drawBullsEye(ke,P.truncDivision(xe,2),7);for(let Me=0,mt=0;Me<P.truncDivision(ee,2)-1;Me+=15,mt+=16)for(let ht=P.truncDivision(xe,2)&1;ht<xe;ht+=2)ke.set(P.truncDivision(xe,2)-mt,ht),ke.set(P.truncDivision(xe,2)+mt,ht),ke.set(ht,P.truncDivision(xe,2)-mt),ke.set(ht,P.truncDivision(xe,2)+mt)}let Pe=new zc;return Pe.setCompact(w),Pe.setSize(xe),Pe.setLayers(C),Pe.setCodeWords(q),Pe.setMatrix(ke),Pe}static drawBullsEye(i,o,c){for(let f=0;f<c;f+=2)for(let g=o-f;g<=o+f;g++)i.set(g,o-f),i.set(g,o+f),i.set(o-f,g),i.set(o+f,g);i.set(o-c,o-c),i.set(o-c+1,o-c),i.set(o-c,o-c+1),i.set(o+c,o-c),i.set(o+c,o-c+1),i.set(o+c,o+c-1)}static generateModeMessage(i,o,c){let f=new V;return i?(f.appendBits(o-1,2),f.appendBits(c-1,6),f=Dt.generateCheckWords(f,28,4)):(f.appendBits(o-1,5),f.appendBits(c-1,11),f=Dt.generateCheckWords(f,40,4)),f}static drawModeMessage(i,o,c,f){let g=P.truncDivision(c,2);if(o)for(let p=0;p<7;p++){let w=g-3+p;f.get(p)&&i.set(w,g-5),f.get(p+7)&&i.set(g+5,w),f.get(20-p)&&i.set(w,g+5),f.get(27-p)&&i.set(g-5,w)}else for(let p=0;p<10;p++){let w=g-5+p+P.truncDivision(p,5);f.get(p)&&i.set(w,g-7),f.get(p+10)&&i.set(g+7,w),f.get(29-p)&&i.set(w,g+7),f.get(39-p)&&i.set(g-7,w)}}static generateCheckWords(i,o,c){let f=i.getSize()/c,g=new Vc(Dt.getGF(c)),p=P.truncDivision(o,c),w=Dt.bitsToWords(i,c,p);g.encode(w,p-f);let C=o%c,_=new V;_.appendBits(0,C);for(const O of Array.from(w))_.appendBits(O,c);return _}static bitsToWords(i,o,c){let f=new Int32Array(c),g,p;for(g=0,p=i.getSize()/o;g<p;g++){let w=0;for(let C=0;C<o;C++)w|=i.get(g*o+C)?1<<o-C-1:0;f[g]=w}return f}static getGF(i){switch(i){case 4:return Se.AZTEC_PARAM;case 6:return Se.AZTEC_DATA_6;case 8:return Se.AZTEC_DATA_8;case 10:return Se.AZTEC_DATA_10;case 12:return Se.AZTEC_DATA_12;default:throw new A("Unsupported word size "+i)}}static stuffBits(i,o){let c=new V,f=i.getSize(),g=(1<<o)-2;for(let p=0;p<f;p+=o){let w=0;for(let C=0;C<o;C++)(p+C>=f||i.get(p+C))&&(w|=1<<o-1-C);(w&g)===g?(c.appendBits(w&g,o),p--):(w&g)===0?(c.appendBits(w|1,o),p--):c.appendBits(w,o)}return c}static totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}Dt.DEFAULT_EC_PERCENT=33,Dt.DEFAULT_AZTEC_LAYERS=0,Dt.MAX_NB_BITS=32,Dt.MAX_NB_BITS_COMPACT=4,Dt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class El{encode(i,o,c,f){return this.encodeWithHints(i,o,c,f,null)}encodeWithHints(i,o,c,f,g){let p=Hc.ISO_8859_1,w=Dt.DEFAULT_EC_PERCENT,C=Dt.DEFAULT_AZTEC_LAYERS;return g!=null&&(g.has(Mn.CHARACTER_SET)&&(p=fa.forName(g.get(Mn.CHARACTER_SET).toString())),g.has(Mn.ERROR_CORRECTION)&&(w=P.parseInt(g.get(Mn.ERROR_CORRECTION).toString())),g.has(Mn.AZTEC_LAYERS)&&(C=P.parseInt(g.get(Mn.AZTEC_LAYERS).toString()))),El.encodeLayers(i,o,c,f,p,w,C)}static encodeLayers(i,o,c,f,g,p,w){if(o!==Ee.AZTEC)throw new A("Can only encode AZTEC, but got "+o);let C=Dt.encode(ve.getBytes(i,g),p,w);return El.renderResult(C,c,f)}static renderResult(i,o,c){let f=i.getMatrix();if(f==null)throw new Oe;let g=f.getWidth(),p=f.getHeight(),w=Math.max(o,g),C=Math.max(c,p),_=Math.min(w/g,C/p),O=(w-g*_)/2,L=(C-p*_)/2,B=new Fe(w,C);for(let q=0,Q=L;q<p;q++,Q+=_)for(let ee=0,ue=O;ee<g;ee++,ue+=_)f.get(ee,q)&&B.setRegion(ue,Q,_,_);return B}}n.AbstractExpandedDecoder=ho,n.ArgumentException=S,n.ArithmeticException=ie,n.AztecCode=zc,n.AztecCodeReader=cn,n.AztecCodeWriter=El,n.AztecDecoder=st,n.AztecDetector=Ut,n.AztecDetectorResult=Yi,n.AztecEncoder=Dt,n.AztecHighLevelEncoder=pa,n.AztecPoint=tt,n.BarcodeFormat=Ee,n.Binarizer=M,n.BinaryBitmap=N,n.BitArray=V,n.BitMatrix=Fe,n.BitSource=ps,n.BrowserAztecCodeReader=Ft,n.BrowserBarcodeReader=Pd,n.BrowserCodeReader=pe,n.BrowserDatamatrixCodeReader=n0,n.BrowserMultiFormatReader=a0,n.BrowserPDF417Reader=o0,n.BrowserQRCodeReader=l0,n.BrowserQRCodeSvgWriter=_r,n.CharacterSetECI=X,n.ChecksumException=I,n.Code128Reader=je,n.Code39Reader=kt,n.DataMatrixDecodedBitStreamParser=Zi,n.DataMatrixReader=Qs,n.DecodeHintType=Z,n.DecoderResult=pt,n.DefaultGridSampler=Ue,n.DetectorResult=ui,n.EAN13Reader=Ks,n.EncodeHintType=Mn,n.Exception=x,n.FormatException=W,n.GenericGF=Se,n.GenericGFPoly=Re,n.GlobalHistogramBinarizer=re,n.GridSampler=ia,n.GridSamplerInstance=at,n.HTMLCanvasElementLuminanceSource=H,n.HybridBinarizer=le,n.ITFReader=Nt,n.IllegalArgumentException=A,n.IllegalStateException=Oe,n.InvertedLuminanceSource=$e,n.LuminanceSource=De,n.MathUtils=Ge,n.MultiFormatOneDReader=Ki,n.MultiFormatReader=Vd,n.MultiFormatWriter=u0,n.NotFoundException=se,n.OneDReader=St,n.PDF417DecodedBitStreamParser=we,n.PDF417DecoderErrorCorrection=po,n.PDF417Reader=Xn,n.PDF417ResultMetadata=yl,n.PerspectiveTransform=Bn,n.PlanarYUVLuminanceSource=fi,n.QRCodeByteMatrix=bo,n.QRCodeDataMask=Yn,n.QRCodeDecodedBitStreamParser=un,n.QRCodeDecoderErrorCorrectionLevel=$t,n.QRCodeDecoderFormatInformation=qn,n.QRCodeEncoder=nn,n.QRCodeEncoderQRCode=Tr,n.QRCodeMaskUtil=hn,n.QRCodeMatrixUtil=it,n.QRCodeMode=Je,n.QRCodeReader=Mi,n.QRCodeVersion=Qe,n.QRCodeWriter=da,n.RGBLuminanceSource=wo,n.RSS14Reader=Vt,n.RSSExpandedReader=Ne,n.ReaderException=xo,n.ReedSolomonDecoder=Le,n.ReedSolomonEncoder=Vc,n.ReedSolomonException=Ie,n.Result=Be,n.ResultMetadataType=Ze,n.ResultPoint=He,n.StringUtils=ve,n.UnsupportedOperationException=be,n.VideoInputDevice=te,n.WhiteRectangleDetector=Ls,n.WriterException=Xt,n.ZXingArrays=Y,n.ZXingCharset=fa,n.ZXingInteger=P,n.ZXingStandardCharsets=Hc,n.ZXingStringBuilder=ce,n.ZXingStringEncoding=Ae,n.ZXingSystem=j,n.createAbstractExpandedDecoder=Bc,Object.defineProperty(n,"__esModule",{value:!0})})}(qu,qu.exports)),qu.exports}var dn=lH();const cH=jm(dn),uH=u3({__proto__:null,default:cH},[dn]);var Vv=function(){function t(e,n,r){if(this.formatMap=new Map([[Xe.QR_CODE,dn.BarcodeFormat.QR_CODE],[Xe.AZTEC,dn.BarcodeFormat.AZTEC],[Xe.CODABAR,dn.BarcodeFormat.CODABAR],[Xe.CODE_39,dn.BarcodeFormat.CODE_39],[Xe.CODE_93,dn.BarcodeFormat.CODE_93],[Xe.CODE_128,dn.BarcodeFormat.CODE_128],[Xe.DATA_MATRIX,dn.BarcodeFormat.DATA_MATRIX],[Xe.MAXICODE,dn.BarcodeFormat.MAXICODE],[Xe.ITF,dn.BarcodeFormat.ITF],[Xe.EAN_13,dn.BarcodeFormat.EAN_13],[Xe.EAN_8,dn.BarcodeFormat.EAN_8],[Xe.PDF_417,dn.BarcodeFormat.PDF_417],[Xe.RSS_14,dn.BarcodeFormat.RSS_14],[Xe.RSS_EXPANDED,dn.BarcodeFormat.RSS_EXPANDED],[Xe.UPC_A,dn.BarcodeFormat.UPC_A],[Xe.UPC_E,dn.BarcodeFormat.UPC_E],[Xe.UPC_EAN_EXTENSION,dn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!uH)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var l=this.createZXingFormats(e),u=new Map;u.set(dn.DecodeHintType.POSSIBLE_FORMATS,l),u.set(dn.DecodeHintType.TRY_HARDER,!1),this.hints=u}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,l){try{r(n.decode(e))}catch(u){l(u)}})},t.prototype.decode=function(e){var n=new dn.MultiFormatReader(this.verbose,this.hints),r=new dn.HTMLCanvasElementLuminanceSource(e),l=new dn.BinaryBitmap(new dn.HybridBinarizer(r)),u=n.decode(l);return{text:u.text,format:EC.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,l){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,l=e;r<l.length;r++){var u=l[r];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.logError("".concat(u," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),dH=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(S){try{x(r.next(S))}catch(A){h(A)}}function b(S){try{x(r.throw(S))}catch(A){h(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},fH=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(x){return function(S){return b([x,S])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(S){x=[6,S],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Hv=function(){function t(e,n,r){if(this.formatMap=new Map([[Xe.QR_CODE,"qr_code"],[Xe.AZTEC,"aztec"],[Xe.CODABAR,"codabar"],[Xe.CODE_39,"code_39"],[Xe.CODE_93,"code_93"],[Xe.CODE_128,"code_128"],[Xe.DATA_MATRIX,"data_matrix"],[Xe.ITF,"itf"],[Xe.EAN_13,"ean_13"],[Xe.EAN_8,"ean_8"],[Xe.PDF_417,"pdf417"],[Xe.UPC_A,"upc_a"],[Xe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var l=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return dH(this,void 0,void 0,function(){var n,r;return fH(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=l.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:EC.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,l=0,u=e;l<u.length;l++){var h=u[l],y=h.boundingBox.width*h.boundingBox.height;y>r&&(r=y,n=h)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,l=e;r<l.length;r++){var u=l[r];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.warn("".concat(u," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,l){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),zv=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(S){try{x(r.next(S))}catch(A){h(A)}}function b(S){try{x(r.throw(S))}catch(A){h(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},$v=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(x){return function(S){return b([x,S])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(S){x=[6,S],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},hH=function(){function t(e,n,r,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&Hv.isSupported()?(this.primaryDecoder=new Hv(e,r,l),this.secondaryDecoder=new Vv(e,r,l)):this.primaryDecoder=new Vv(e,r,l)}return t.prototype.decodeAsync=function(e){return zv(this,void 0,void 0,function(){var n;return $v(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return zv(this,void 0,void 0,function(){var n,r;return $v(this,function(l){switch(l.label){case 0:n=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,l.sent()];case 3:if(r=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var l=r[n];e+=l}var u=e/this.executionResults.length;console.log("".concat(u," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Vp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,l){r.__proto__=l}||function(r,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(r[u]=l[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jh=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(S){try{x(r.next(S))}catch(A){h(A)}}function b(S){try{x(r.throw(S))}catch(A){h(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},Ph=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(x){return function(S){return b([x,S])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(S){x=[6,S],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},_C=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),gH=function(t){Vp(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var l={advanced:[r]};return this.track.applyConstraints(l)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(_C),mH=function(t){Vp(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(gH),pH=function(t){Vp(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(_C),xH=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new mH(this.track)},t.prototype.torchFeature=function(){return new pH(this.track)},t}(),yH=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,l=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,l),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,l){return jh(this,void 0,void 0,function(){var u,h;return Ph(this,function(y){switch(y.label){case 0:return u=new t(e,n,l),r.aspectRatio?(h={aspectRatio:r.aspectRatio},[4,u.getFirstTrackOrFail().applyConstraints(h)]):[3,2];case 1:y.sent(),y.label=2;case 2:return u.setupSurface(),[2,u]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return jh(this,void 0,void 0,function(){return Ph(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var l=e.mediaStream.getVideoTracks(),u=l.length,h=0;e.mediaStream.getVideoTracks().forEach(function(y){e.mediaStream.removeTrack(y),y.stop(),++h,h>=u&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new xH(this.getFirstTrackOrFail())},t}(),bH=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return jh(this,void 0,void 0,function(){return Ph(this,function(l){return[2,yH.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return jh(this,void 0,void 0,function(){var n,r;return Ph(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=l.sent(),[2,new t(r)]}})})},t}(),Gv=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(S){try{x(r.next(S))}catch(A){h(A)}}function b(S){try{x(r.throw(S))}catch(A){h(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},qv=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(x){return function(S){return b([x,S])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(S){x=[6,S],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},wH=function(){function t(){}return t.failIfNotSupported=function(){return Gv(this,void 0,void 0,function(){return qv(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Gv(this,void 0,void 0,function(){return qv(this,function(n){return[2,bH.create(e)]})})},t}(),vH=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(S){try{x(r.next(S))}catch(A){h(A)}}function b(S){try{x(r.throw(S))}catch(A){h(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},SH=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(x){return function(S){return b([x,S])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(S){x=[6,S],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},EH=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=hc.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=hc.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return vH(this,void 0,void 0,function(){var e,n,r,l,u,h,y;return SH(this,function(b){switch(b.label){case 0:return e=function(x){for(var S=x.getVideoTracks(),A=0,N=S;A<N.length;A++){var I=N[A];I.enabled=!1,I.stop(),x.removeTrack(I)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=b.sent(),l=[],u=0,h=r;u<h.length;u++)y=h[u],y.kind==="videoinput"&&l.push({id:y.deviceId,label:y.label});return e(n),[2,l]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(u){for(var h=[],y=0,b=u;y<b.length;y++){var x=b[y];x.kind==="video"&&h.push({id:x.id,label:x.label})}e(h)},l=MediaStreamTrack;l.getSources(r)})},t}(),_n;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(_n||(_n={}));var CH=function(){function t(){this.state=_n.NOT_STARTED,this.onGoingTransactionNewState=_n.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===_n.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=_n.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===_n.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=_n.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==_n.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case _n.UNKNOWN:throw"Transition from unknown is not allowed";case _n.NOT_STARTED:this.failIfNewStateIs(e,[_n.PAUSED]);break;case _n.SCANNING:break;case _n.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,l=n;r<l.length;r++){var u=l[r];if(e===u)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),AH=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===_n.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==_n.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===_n.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===_n.PAUSED},t}(),TH=function(){function t(){}return t.create=function(){return new AH(new CH)},t}(),_H=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,l){r.__proto__=l}||function(r,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(r[u]=l[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oi=function(t){_H(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(zi),NH=function(){function t(e,n){this.logger=n,this.fps=oi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=oi.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?TC.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!hr(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),Yv=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new AC(this.verbose),this.qrcode=new hH(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=TH.create()}return t.prototype.start=function(e,n,r,l){var u=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var h;l?h=l:h=this.verbose?this.logger.log:function(){};var y=NH.create(n,this.logger);this.clearElement();var b=!1;y.videoConstraints&&(y.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var x=b,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:oi.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var A=this,N=this.stateManagerProxy.startTransition(_n.SCANNING);return new Promise(function(I,M){var j=x?y.videoConstraints:A.createVideoConstraints(e);if(!j){N.cancel(),M("videoConstraints should be defined");return}var U={};(!x||y.aspectRatio)&&(U.aspectRatio=y.aspectRatio);var $={onRenderSurfaceReady:function(Y,P){A.setupUi(Y,P,y),A.isScanning=!0,A.foreverScan(y,r,h)}};wH.failIfNotSupported().then(function(Y){Y.create(j).then(function(P){return P.render(u.element,U,$).then(function(V){A.renderedCamera=V,N.execute(),I(null)}).catch(function(V){N.cancel(),M(V)})}).catch(function(P){N.cancel(),M(hc.errorGettingUserMedia(P))})}).catch(function(Y){N.cancel(),M(hc.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(_n.PAUSED),this.showPausedState(),(hr(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(_n.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(_n.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var u=document.getElementById(oi.SHADED_REGION_ELEMENT_ID);u&&e.element.removeChild(u)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),r(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),n.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(hr(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,u){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var h=new Image;h.onload=function(){var y=h.width,b=h.height,x=document.getElementById(r.elementId),S=x.clientWidth?x.clientWidth:oi.DEFAULT_WIDTH,A=Math.max(x.clientHeight?x.clientHeight:b,oi.FILE_SCAN_MIN_HEIGHT),N=r.computeCanvasDrawConfig(y,b,S,A);if(n){var I=r.createCanvasElement(S,A,"qr-canvas-visible");I.style.display="inline-block",x.appendChild(I);var M=I.getContext("2d");if(!M)throw"Unable to get 2d context from canvas";M.canvas.width=S,M.canvas.height=A,M.drawImage(h,0,0,y,b,N.x,N.y,N.width,N.height)}var j=oi.FILE_SCAN_HIDDEN_CANVAS_PADDING,U=Math.max(h.width,N.width),$=Math.max(h.height,N.height),Y=U+2*j,P=$+2*j,V=r.createCanvasElement(Y,P);x.appendChild(V);var z=V.getContext("2d");if(!z)throw"Unable to get 2d context from canvas";z.canvas.width=Y,z.canvas.height=P,z.drawImage(h,0,0,y,b,j,j,U,$);try{r.qrcode.decodeRobustlyAsync(V).then(function(Z){l(Bv.createFromQrcodeResult(Z))}).catch(u)}catch(Z){u("QR code parse error, error = ".concat(Z))}},h.onerror=u,h.onabort=u,h.onstalled=u,h.onsuspend=u,h.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return EH.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!TC.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[Xe.QR_CODE,Xe.AZTEC,Xe.CODABAR,Xe.CODE_39,Xe.CODE_93,Xe.CODE_128,Xe.DATA_MATRIX,Xe.MAXICODE,Xe.ITF,Xe.EAN_13,Xe.EAN_8,Xe.PDF_417,Xe.RSS_14,Xe.RSS_EXPANDED,Xe.UPC_A,Xe.UPC_E,Xe.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],l=0,u=e.formatsToSupport;l<u.length;l++){var h=u[l];rH(h)?r.push(h):this.logger.warn("Invalid format: ".concat(h," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(hr(e))return!0;if(!hr(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(hr(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return hr(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var l=this,u=r.qrbox;this.validateQrboxConfig(u);var h=this.toQrdimensions(e,n,u),y=function(x){if(x<oi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(oi.MIN_QR_BOX_SIZE,"px.")},b=function(x){return x>e&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),x=e),x};y(h.width),y(h.height),h.width=b(h.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var l=hr(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(l);var u=this.toQrdimensions(e,n,l);u.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var h=r.isShadedBoxEnabled()&&u.height<=n,y={x:0,y:0,width:e,height:n},b=h?this.getShadedRegionBounds(e,n,u):y,x=this.createCanvasElement(b.width,b.height),S={willReadFrequently:!0},A=x.getContext("2d",S);A.canvas.width=b.width,A.canvas.height=b.height,this.element.append(x),h&&this.possiblyInsertShadingElement(this.element,e,n,u),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=A,this.canvasElement=x},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=hc.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return e(l.text,Bv.createFromQrcodeResult(l)),r.possiblyUpdateShaders(!0),!0}).catch(function(l){r.possiblyUpdateShaders(!1);var u=hc.codeParseError(l);return n(u,CC.createFrom(u)),!1})},t.prototype.foreverScan=function(e,n,r){var l=this;if(this.shouldScan&&this.renderedCamera){var u=this.renderedCamera.getSurface(),h=u.videoWidth/u.clientWidth,y=u.videoHeight/u.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*h,x=this.qrRegion.height*y,S=this.qrRegion.x*h,A=this.qrRegion.y*y;this.context.drawImage(u,S,A,b,x,0,0,this.qrRegion.width,this.qrRegion.height);var N=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(e,n,r)},l.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(I){!I&&e.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(n,r).finally(function(){N()})):N()}).catch(function(I){l.logger.logError("Error happend while scanning context",I),N()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",l={user:!0,environment:!0},u="exact",h=function(M){if(M in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(M,"'")},y=Object.keys(e);if(y.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(y.length," keys");var b=Object.keys(e)[0];if(b!==n&&b!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(b===n){var x=e.facingMode;if(typeof x=="string"){if(h(x))return{facingMode:x}}else if(typeof x=="object")if(u in x){if(h(x["".concat(u)]))return{facingMode:{exact:x["".concat(u)]}}}else throw"'facingMode' should be string or object with"+" ".concat(u," as key.");else{var S=typeof x;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var A=e.deviceId;if(typeof A=="string")return{deviceId:A};if(typeof A=="object"){if(u in A)return{deviceId:{exact:A["".concat(u)]}};throw"'deviceId' should be string or object with"+" ".concat(u," as key.")}else{var N=typeof A;throw"Invalid type of 'deviceId' = ".concat(N)}}}var I=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(I)},t.prototype.computeCanvasDrawConfig=function(e,n,r,l){if(e<=r&&n<=l){var u=(r-e)/2,h=(l-n)/2;return{x:u,y:h,width:e,height:n}}else{var y=e,b=n;return e>r&&(n=r/e*n,e=r),n>l&&(e=l/n*e,n=l),this.logger.log("Image downsampled from "+"".concat(y,"X").concat(b)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,l)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?oi.BORDER_SHADER_MATCH_COLOR:oi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var l=e,u=n,h=document.createElement("canvas");return h.style.width="".concat(l,"px"),h.style.height="".concat(u,"px"),h.style.display="none",h.id=hr(r)?"qr-canvas":r,h},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,l){if(!(n-l.width<1||r-l.height<1)){var u=document.createElement("div");u.style.position="absolute";var h=(n-l.width)/2,y=(r-l.height)/2;if(u.style.borderLeft="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderRight="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderTop="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderBottom="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),u.style.boxSizing="border-box",u.style.top="0px",u.style.bottom="0px",u.style.left="0px",u.style.right="0px",u.id="".concat(oi.SHADED_REGION_ELEMENT_ID),n-l.width<11||r-l.height<11)this.hasBorderShaders=!1;else{var b=5,x=40;this.insertShaderBorders(u,x,b,-b,null,0,!0),this.insertShaderBorders(u,x,b,-b,null,0,!1),this.insertShaderBorders(u,x,b,null,-b,0,!0),this.insertShaderBorders(u,x,b,null,-b,0,!1),this.insertShaderBorders(u,b,x+b,-b,null,-b,!0),this.insertShaderBorders(u,b,x+b,null,-b,-b,!0),this.insertShaderBorders(u,b,x+b,-b,null,-b,!1),this.insertShaderBorders(u,b,x+b,null,-b,-b,!1),this.hasBorderShaders=!0}e.append(u)}},t.prototype.insertShaderBorders=function(e,n,r,l,u,h,y){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=oi.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(n,"px"),b.style.height="".concat(r,"px"),l!==null&&(b.style.top="".concat(l,"px")),u!==null&&(b.style.bottom="".concat(u,"px")),y?b.style.left="".concat(h,"px"):b.style.right="".concat(h,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),e.appendChild(b)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Hp="data:image/svg+xml;base64,",RH=Hp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",OH=Hp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Xv=Hp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",IH="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Wv=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),MH=function(){function t(){this.data=Wv.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=Wv.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),DH=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Uv.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),l=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(l);var u=document.createElement("a");u.innerText=Uv.reportIssues(),u.href="https://github.com/mebjas/html5-qrcode/issues",u.target="new",u.style.color="white",this.infoDiv.appendChild(u),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),kH=function(){function t(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Xv,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=IH,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Xv,this.infoIcon.style.opacity="0.6")},t}(),LH=function(){function t(){var e=this;this.infoDiv=new DH,this.infoIcon=new kH(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),jH=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(S){try{x(r.next(S))}catch(A){h(A)}}function b(S){try{x(r.throw(S))}catch(A){h(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},PH=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(x){return function(S){return b([x,S])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(S){x=[6,S],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Kv=function(){function t(){}return t.hasPermissions=function(){return jH(this,void 0,void 0,function(){var e,n,r,l;return PH(this,function(u){switch(u.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=u.sent(),n=0,r=e;n<r.length;n++)if(l=r[n],l.kind==="videoinput"&&l.label)return[2,!0];return[2,!1]}})})},t}(),Ba=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var r=n[e];if(t.isCameraScanType(r))return!0}return!1},t.isCameraScanType=function(e){return e===lo.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===lo.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return zi.DEFAULT_SUPPORTED_SCAN_TYPE;var n=zi.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,l=e;r<l.length;r++){var u=l[r];if(!zi.DEFAULT_SUPPORTED_SCAN_TYPE.includes(u))throw"Unsupported scan type ".concat(u)}return e},t}(),ci=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),Wr=function(){function t(){}return t.createElement=function(e,n){var r=document.createElement(e);return r.id=n,r.classList.add(ci.ALL_ELEMENT_CLASS),e==="button"&&r.setAttribute("type","button"),r},t}(),NC=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(S){try{x(r.next(S))}catch(A){h(A)}}function b(S){try{x(r.throw(S))}catch(A){h(A)}}function x(S){S.done?u(S.value):l(S.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},RC=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(x){return function(S){return b([x,S])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(S){x=[6,S],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Zv=function(){function t(e,n,r){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=r}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return NC(this,void 0,void 0,function(){var e,n;return RC(this,function(r){switch(r.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=r.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?Qt.torchOffButton():Qt.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(e,n){var r=e?Qt.torchOnFailedMessage():Qt.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),BH=function(){function t(e,n){this.onTorchActionFailureCallback=n,this.torchButton=Wr.createElement("button",ci.TORCH_BUTTON_ID),this.torchController=new Zv(e,this,n)}return t.prototype.render=function(e,n){var r=this;this.torchButton.innerText=Qt.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var l=this;this.torchButton.addEventListener("click",function(u){return NC(r,void 0,void 0,function(){return RC(this,function(h){switch(h.label){case 0:return[4,l.torchController.flipState()];case 1:return h.sent(),l.torchController.isTorchEnabled()?(l.torchButton.classList.remove(ci.TORCH_BUTTON_CLASS_TORCH_OFF),l.torchButton.classList.add(ci.TORCH_BUTTON_CLASS_TORCH_ON)):(l.torchButton.classList.remove(ci.TORCH_BUTTON_CLASS_TORCH_ON),l.torchButton.classList.add(ci.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new Zv(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=Qt.torchOnButton(),this.torchController.reset()},t.create=function(e,n,r,l){var u=new t(n,l);return u.render(e,r),u},t}(),UH=function(){function t(e,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var l=document.createElement("label");l.setAttribute("for",this.getFileScanInputId()),l.style.display="inline-block",this.fileBasedScanRegion.appendChild(l),this.fileSelectionButton=Wr.createElement("button",ci.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(y){l.click()}),l.append(this.fileSelectionButton),this.fileScanInput=Wr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",l.appendChild(this.fileScanInput);var u=this;this.fileScanInput.addEventListener("change",function(y){if(!(y==null||y.target==null)){var b=y.target;if(!(b.files&&b.files.length===0)){var x=b.files,S=x[0],A=S.name;u.setImageNameToButton(A),r(S)}}});var h=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(h),this.fileBasedScanRegion.addEventListener("dragenter",function(y){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionActiveBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(y){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionDefaultBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(y){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionActiveBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(y){y.stopPropagation(),y.preventDefault(),u.fileBasedScanRegion.style.border=u.fileBasedScanRegionDefaultBorder();var b=y.dataTransfer;if(b){var x=b.files;if(!x||x.length===0)return;for(var S=!1,A=0;A<x.length;++A){var N=x.item(A);if(N){var I=/image.*/;if(N.type.match(I)){S=!0;var M=N.name;u.setImageNameToButton(M),r(N),h.innerText=Qt.dragAndDropMessage();break}}}S||(h.innerText=Qt.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=Qt.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var r=e.substring(0,8),l=e.length,u=e.substring(l-8,l);e="".concat(r,"....").concat(u)}var h=Qt.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=h},t.prototype.setInitialValueToButton=function(){var e=Qt.fileSelectionChooseImage()+" - "+Qt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,r){var l=new t(e,n,r);return l},t}(),FH=function(){function t(e){this.selectElement=Wr.createElement("select",ci.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var l=Qt.selectCamera();n.innerText="".concat(l," (").concat(this.cameras.length,")  ")}for(var u=1,h=0,y=this.cameras;h<y.length;h++){var b=y[h],x=b.id,S=b.label==null?x:b.label;(!S||S==="")&&(S=[Qt.anonymousCameraPrefix(),u++].join(" "));var A=document.createElement("option");A.value=x,A.innerText=S,this.options.push(A),this.selectElement.appendChild(A)}n.appendChild(this.selectElement),e.appendChild(n)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var n=0,r=this.options;n<r.length;n++){var l=r[n];if(l.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var r=new t(n);return r.render(e),r},t}(),VH=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Wr.createElement("input",ci.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=Qt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var l=this;this.rangeInput.addEventListener("input",function(){return l.onValueChange()}),this.rangeInput.addEventListener("change",function(){return l.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=Qt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,n,r,l){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=l.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var r=new t;return r.render(e,n),r},t}(),li;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(li||(li={}));function HH(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function zH(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var $H=function(){function t(e,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Ba(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new AC(this.verbose),this.persistedDataManager=new MH,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(u,h){if(e)e(u,h);else{if(r.lastMatchFound===u)return;r.lastMatchFound=u,r.setHeaderMessage(Qt.lastMatch(u),li.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(u,h){n&&n(u,h)};var l=document.getElementById(this.elementId);if(!l)throw"HTML Element with id=".concat(this.elementId," not found");l.innerHTML="",this.createBasicLayout(l),this.html5Qrcode=new Yv(this.getScanRegionId(),zH(this.config,this.verbose))},t.prototype.pause=function(e){(hr(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,n=function(){var r=document.getElementById(e.elementId);r&&(r.innerHTML="",e.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,l){if(!e.html5Qrcode){r();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(u){if(!e.html5Qrcode){r();return}e.html5Qrcode.clear(),n(),r()}).catch(function(u){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",u),l(u)}):(e.html5Qrcode.clear(),n(),r())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=zi.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!zi.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=zi.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=zi.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:zi.SCAN_DEFAULT_FPS,rememberLastUsedCamera:zi.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:zi.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),Ba.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var l=document.createElement("div"),u=this.getDashboardId();l.id=u,l.style.width="100%",e.appendChild(l),this.setupInitialDashboard(l)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var r=new LH;r.renderInto(n);var l=document.createElement("div");l.id=this.getHeaderMessageContainerId(),l.style.display="none",l.style.textAlign="center",l.style.fontSize="14px",l.style.padding="2px 10px",l.style.margin="4px",l.style.borderTop="1px solid #f6f6f6",n.appendChild(l)},t.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},t.prototype.createCameraListUi=function(e,n,r){var l=this;l.showHideScanTypeSwapLink(!1),l.setHeaderMessage(Qt.cameraPermissionRequesting());var u=function(){r||l.createPermissionButton(e,n)};Yv.getCameras().then(function(h){l.persistedDataManager.setHasPermission(!0),l.showHideScanTypeSwapLink(!0),l.resetHeaderMessage(),h&&h.length>0?(e.removeChild(n),l.renderCameraSelection(h)):(l.setHeaderMessage(Qt.noCameraFound(),li.STATUS_WARNING),u())}).catch(function(h){l.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:u(),l.setHeaderMessage(h,li.STATUS_WARNING),l.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,n){var r=this,l=Wr.createElement("button",this.getCameraPermissionButtonId());l.innerText=Qt.cameraPermissionTitle(),l.addEventListener("click",function(){l.disabled=!0,r.createCameraListUi(e,n,l)}),n.appendChild(l)},t.prototype.createPermissionsUi=function(e,n){var r=this;if(Ba.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Kv.hasPermissions().then(function(l){l?r.createCameraListUi(e,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n))}).catch(function(l){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Ba.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var l=document.createElement("div");l.style.textAlign="center",r.appendChild(l),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,l),this.renderFileScanUi(n)},t.prototype.renderFileScanUi=function(e){var n=Ba.isFileScanType(this.currentScanType),r=this,l=function(u){if(!r.html5Qrcode)throw"html5Qrcode not defined";Ba.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(Qt.loadingImage()),r.html5Qrcode.scanFileV2(u,!0).then(function(h){r.resetHeaderMessage(),r.qrCodeSuccessCallback(h.decodedText,h)}).catch(function(h){r.setHeaderMessage(h,li.STATUS_WARNING),r.qrCodeErrorCallback(h,CC.createFrom(h))}))};this.fileSelectionUi=UH.create(e,n,l)},t.prototype.renderCameraSelection=function(e){var n=this,r=this,l=document.getElementById(this.getDashboardSectionCameraScanRegionId());l.style.textAlign="center";var u=VH.create(l,!1),h=function(j){var U=j.zoomFeature();if(U.isSupported()){u.setOnCameraZoomValueChangeCallback(function(Y){U.apply(Y)});var $=1;n.config.defaultZoomValueIfSupported&&($=n.config.defaultZoomValueIfSupported),$=aH($,U.min(),U.max()),u.setValues(U.min(),U.max(),$,U.step()),u.show()}},y=FH.create(l,e),b=document.createElement("span"),x=Wr.createElement("button",ci.CAMERA_START_BUTTON_ID);x.innerText=Qt.scanButtonStartScanningText(),b.appendChild(x);var S=Wr.createElement("button",ci.CAMERA_STOP_BUTTON_ID);S.innerText=Qt.scanButtonStopScanningText(),S.style.display="none",S.disabled=!0,b.appendChild(S);var A,N=function(j){if(!j.torchFeature().isSupported()){A&&A.hide();return}A?A.updateTorchCapability(j.torchFeature()):A=BH.create(b,j.torchFeature(),{display:"none",marginLeft:"5px"},function(U){r.setHeaderMessage(U,li.STATUS_WARNING)}),A.show()};l.appendChild(b);var I=function(j){j||(x.style.display="none"),x.innerText=Qt.scanButtonStartScanningText(),x.style.opacity="1",x.disabled=!1,j&&(x.style.display="inline-block")};if(x.addEventListener("click",function(j){x.innerText=Qt.scanButtonScanningStarting(),y.disable(),x.disabled=!0,x.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var U=y.getValue();r.persistedDataManager.setLastUsedCameraId(U),r.html5Qrcode.start(U,HH(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function($){S.disabled=!1,S.style.display="inline-block",I(!1);var Y=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&N(Y),n.config.showZoomSliderIfSupported===!0&&h(Y)}).catch(function($){r.showHideScanTypeSwapLink(!0),y.enable(),I(!0),r.setHeaderMessage($,li.STATUS_WARNING)})}),y.hasSingleItem()&&x.click(),S.addEventListener("click",function(j){if(!r.html5Qrcode)throw"html5Qrcode not defined";S.disabled=!0,r.html5Qrcode.stop().then(function(U){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),y.enable(),x.disabled=!1,S.style.display="none",x.style.display="inline-block",A&&(A.reset(),A.hide()),u.removeOnCameraZoomValueChangeCallback(),u.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(U){S.disabled=!1,r.setHeaderMessage(U,li.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var M=r.persistedDataManager.getLastUsedCameraId();y.hasValue(M)?(y.setValue(M),x.click()):r.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,n=Qt.textIfCameraScanSelected(),r=Qt.textIfFileScanSelected(),l=document.getElementById(this.getDashboardSectionId()),u=document.createElement("div");u.style.textAlign="center";var h=Wr.createElement("span",this.getDashboardSectionSwapLinkId());h.style.textDecoration="underline",h.style.cursor="pointer",h.innerText=Ba.isCameraScanType(this.currentScanType)?n:r,h.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Ba.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),h.innerText=r,e.currentScanType=lo.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),h.innerText=n,e.currentScanType=lo.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),u.appendChild(h),l.appendChild(u)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Kv.hasPermissions().then(function(r){if(r){var l=document.getElementById(n.getCameraPermissionButtonId());if(!l)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";l.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,n){n||(n=li.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=e,r.style.display="block",n){case li.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case li.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case li.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=RH,this.cameraScanImage.alt=Qt.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=OH,this.fileScanImage.alt=Qt.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return ci.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return ci.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();function Qv({onScan:t,onClose:e}){const{t:n}=Pn(),r=R.useRef(`qr-reader-${Math.random().toString(36).substr(2,9)}`),l=R.useRef(null),[u,h]=R.useState(!1);R.useEffect(()=>{h(!1);const b={fps:10,qrbox:250,rememberLastUsedCamera:!0},x=new $H(r.current,b,!1);l.current=x;const S=N=>{u||(h(!0),x.clear().catch(()=>{}).finally(()=>{t(N)}))},A=N=>{`${N}`.includes("No MultiFormat Readers")||console.error("QR scan error:",N)};return x.render(S,A),()=>{var N;(N=l.current)==null||N.clear().catch(()=>{})}},[t,u]);const y=()=>{var b;h(!1),(b=l.current)==null||b.clear().catch(()=>{}).then(()=>{l.current&&l.current.render(x=>{u||(h(!0),l.current.clear().catch(()=>{}).finally(()=>t(x)))},x=>{`${x}`.includes("No MultiFormat Readers")||console.error("QR scan error:",x)})})};return E.jsx(Ys.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",damping:20},className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:E.jsxs(Ys.div,{initial:{y:-20},animate:{y:0},exit:{y:20},className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-sm",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("h3",{className:"text-lg font-bold",children:n("scanStudentQr")}),E.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-800",children:""})]}),E.jsx("div",{id:r.current,style:{width:"100%",height:"300px"},className:"mb-4 bg-gray-50"}),E.jsxs("div",{className:"flex justify-between gap-2",children:[u&&E.jsx("button",{onClick:y,className:"flex-1 px-4 py-2 bg-blue-100 hover:bg-blue-200 rounded-lg",children:n("scanAnother")}),E.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg",children:n("cancel")})]})]})})}const Jv=["bg-pink-300","bg-orange-300","bg-yellow-300","bg-lime-300","bg-emerald-300","bg-cyan-300","bg-purple-300","bg-rose-300"],Mg="#f6f6f6",Pi="#6654b3",ac=()=>new Date().toISOString().slice(0,10);let Yu=null,Xu=null;try{Yu=new Audio("ding.wav"),Xu=new Audio("wrongbeep.wav")}catch{}const Dg=()=>{try{Yu&&(Yu.pause(),Yu.currentTime=0,Yu.play())}catch{}},ch=()=>{try{Xu&&(Xu.pause(),Xu.currentTime=0,Xu.play())}catch{}};function GH(t,e){if(!t||!e)return!1;let n=t.purchased_packages;if(typeof n=="string")try{n=JSON.parse(n)}catch{n=null}return Array.isArray(n)?n.some(r=>r&&r.course_id===e):!1}function qH(t,e){return!t||!e?!1:!!(t.courses&&typeof t.courses=="object"&&t.courses[e]||t.course_limits&&t.course_limits[e]>0||GH(t,e))}function YH(){const{t}=Pn(),e=Ni(),[n,r]=R.useState(null),[l,u]=R.useState(!1),[h,y]=R.useState(!1),[b,x]=R.useState(null),[S,A]=R.useState(null);R.useEffect(()=>{if(!b)return;const H=setTimeout(()=>x(null),4e3);return()=>clearTimeout(H)},[b]);const[N,I]=R.useState(!0),[M,j]=R.useState(!0),[U,$]=R.useState(""),[Y,P]=R.useState([]),[V,z]=R.useState([]),[Z,W]=R.useState([]);R.useEffect(()=>{(async()=>{const{data:H}=await Ve.from("courses").select("id,name").order("name");P(H||[]),I(!1);const[te,ge]=await Promise.all([Ve.from("students").select("id,first_name,last_name,courses,course_limits,qr_code_url,purchased_packages"),Ve.from("attendance").select("*").gte("attended_at_ts",ac())]);z(te.data||[]),W(ge.data||[]),j(!1)})()},[]);const ae=Z.filter(H=>H.approved_by),X=R.useMemo(()=>{const H={};return ae.forEach(te=>{var ge;te.course_id&&(H[ge=te.student_id]??(H[ge]={}),H[te.student_id][te.course_id]=(H[te.student_id][te.course_id]||0)+1)}),H},[ae]),be=R.useMemo(()=>{const H={};return ae.forEach(te=>{var ge;te.course_id&&te.attended_at_ts.slice(0,10)===ac()&&(H[ge=te.course_id]??(H[ge]=new Set),H[te.course_id].add(te.student_id))}),H},[ae]),Ae=Z.filter(H=>!H.approved_by),ve=(H,te)=>{var ge;return((ge=X[H])==null?void 0:ge[te])||0},ce=(H,te)=>H.course_limits&&H.course_limits[te]||0,Fe=(H,te)=>{var ge;return(ge=be[te])==null?void 0:ge.has(H)};async function se(H){await Ve.from("attendance").delete().eq("id",H.id),W(te=>te.filter(ge=>ge.id!==H.id))}async function re(H,te){const ge=`${H.id}|${te}`;if(U===ge)return;$(ge);const{data:{user:pe}}=await Ve.auth.getUser(),Be=pe==null?void 0:pe.id;try{if(Fe(H.id,te)){const ze=Z.find(Ee=>Ee.student_id===H.id&&Ee.course_id===te&&Ee.attended_at_ts.slice(0,10)===ac());ze&&(await Ve.from("attendance").delete().eq("id",ze.id),W(Ee=>Ee.filter(At=>At.id!==ze.id))),x({message:t("uncheckedStudent",{first:H.first_name,last:H.last_name}),type:"error"})}else{if(ce(H,te)&&ve(H.id,te)>=ce(H,te)){x({message:t("overLimit",{first:H.first_name,last:H.last_name}),type:"error"}),ch();return}const{data:ze,error:Ee}=await Ve.from("attendance").insert({student_id:H.id,course_id:te,attended_at_ts:ac(),approved_by:Be}).select();if(Ee)throw Ee;W(At=>[...At,ze[0]]),x({message:t("checkedInStudent",{first:H.first_name,last:H.last_name}),type:"success"}),Dg()}}finally{$(""),y(!1)}}async function le(H){const te=H.trim(),ge=V.find(ze=>ze.id===te);if(y(!1),!ge){ch(),x({message:t("unknownCode"),type:"error"});return}if(Z.some(ze=>ze.student_id===te&&ze.attended_at_ts.slice(0,10)===ac())){ch(),x({message:t("alreadyScanned",{first:ge.first_name,last:ge.last_name}),type:"error"});return}const{data:pe,error:Be}=await Ve.from("attendance").insert({student_id:te,course_id:null,attended_at_ts:ac()}).select();Be?(ch(),x({message:t("scanFailed"),type:"error"})):(W(ze=>[...ze,pe[0]]),Dg(),x({message:t("pendingStudent",{first:ge.first_name,last:ge.last_name}),type:"success"}))}async function De(H,te){if(!te.length)return;const{data:{user:ge}}=await Ve.auth.getUser(),pe=ge==null?void 0:ge.id,Be=V.find(ze=>ze.id===H.student_id);if(await Ve.from("attendance").update({course_id:te[0],approved_by:pe}).eq("id",H.id),te.length>1){const ze=te.slice(1).map(Ee=>({student_id:H.student_id,course_id:Ee,attended_at_ts:H.attended_at_ts,approved_by:pe}));await Ve.from("attendance").insert(ze)}W(ze=>{const Ee=ze.filter(pt=>pt.id!==H.id),At={...H,course_id:te[0],approved_by:pe},Ze=[...Ee,At];return te.length>1&&te.slice(1).forEach(pt=>Ze.push({...H,id:crypto.randomUUID(),course_id:pt,approved_by:pe})),Ze}),Dg(),x({message:t("checkedInStudent",{first:Be.first_name,last:Be.last_name}),type:"success"})}const $e=E.jsx(Pu,{children:b&&E.jsxs(Ys.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",stiffness:300},className:`fixed bottom-4 left-1/2 transform -translate-x-1/2 
                      max-w-md w-full px-4 py-3 rounded-xl shadow-lg flex 
                      justify-between items-center z-50 ${b.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[E.jsx("span",{children:b.message}),E.jsx("button",{onClick:()=>x(null),className:"text-xl font-bold leading-none",children:""})]},"banner")});return l?M?E.jsx("div",{className:"p-6 text-center",children:t("loadingPending")}):E.jsxs(E.Fragment,{children:[$e,E.jsxs("main",{style:{background:Mg},className:"min-h-screen p-6",children:[E.jsxs("header",{className:"flex items-center gap-4 mb-4",children:[E.jsx("button",{onClick:()=>u(!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 shadow",children:E.jsx(Th,{className:"w-6 h-6 text-gray-700"})}),E.jsx("h2",{className:"text-2xl font-bold",style:{color:Pi},children:t("pendingCheckins")})]}),Ae.length===0?E.jsx("p",{className:"text-gray-500",children:t("noPendingCheckins")}):Ae.map(H=>{const te=V.find(ge=>ge.id===H.student_id);return te?E.jsx(XH,{row:H,student:te,courses:Y,onApprove:De,onDelete:se},H.id):null})]})]}):E.jsxs("div",{style:{background:Mg},className:"min-h-screen",children:[$e,E.jsx(Pu,{mode:"wait",children:n==null?E.jsxs("main",{className:"min-h-screen p-6 flex flex-col items-center gap-8",style:{background:Mg},children:[E.jsxs("div",{className:"w-full max-w-5xl flex justify-between items-center mb-6",children:[E.jsx("h1",{className:"text-3xl font-extrabold",style:{color:Pi},children:t("takeAttendance")}),E.jsxs("div",{className:"flex gap-3",children:[E.jsxs("button",{onClick:()=>u(!0),className:"relative p-2 bg-yellow-400 text-white rounded-full shadow",children:[E.jsx(F9,{className:"w-5 h-5"}),Ae.length>0&&E.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-[10px] px-1 rounded-full",children:Ae.length})]}),E.jsx(Ys.button,{whileTap:{scale:.92},onClick:()=>y(!0),className:"p-2",style:{background:Pi,color:"#fff",borderRadius:"9999px",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.12)"},children:E.jsx(nw,{className:"w-6 h-6"})})]})]}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-7 w-full max-w-4xl",children:N?Array(6).fill(0).map((H,te)=>E.jsx(Ys.div,{initial:{opacity:.3},animate:{opacity:1},className:"w-32 h-32 bg-gray-200 rounded-2xl"},te)):Y.map((H,te)=>E.jsx(Ys.button,{whileHover:{scale:1.06},whileTap:{scale:.95},onClick:()=>r(H),className:`${Jv[te%Jv.length]} w-32 h-32 md:w-40 md:h-40 rounded-2xl shadow-lg
                                 flex items-center justify-center text-white font-bold text-lg transition-all duration-150`,style:{boxShadow:"0 3px 16px 0 rgba(102,84,179,0.06)"},children:H.name},H.id))}),E.jsx(Pu,{children:h&&E.jsx(Qv,{onScan:le,onClose:()=>y(!1)},"scanner-grid")})]}):M?E.jsx("div",{className:"p-6 text-center",children:t("loadingStudents")}):E.jsxs(Ys.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-6 space-y-6",children:[E.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[E.jsx("button",{onClick:()=>r(null),className:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 shadow",children:E.jsx(Th,{className:"w-6 h-6 text-gray-700"})}),E.jsx("h2",{className:"text-2xl font-bold",style:{color:Pi},children:n.name}),E.jsx(Ys.button,{whileTap:{scale:.92},onClick:()=>y(!0),className:"ml-auto p-2",style:{background:Pi,color:"#fff",borderRadius:"9999px",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.12)"},children:E.jsx(nw,{className:"w-6 h-6"})})]}),E.jsxs("table",{className:"min-w-full bg-white rounded-xl shadow",style:{boxShadow:"0 2px 12px 0 rgba(102,84,179,0.05)"},children:[E.jsx("thead",{style:{background:"#ede9fe"},children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-3 py-2 text-left font-semibold",style:{color:Pi},children:t("student")}),E.jsx("th",{className:"px-3 py-2 font-semibold",style:{color:Pi},children:t("slots")}),E.jsx("th",{className:"px-3 py-2 font-semibold",style:{color:Pi},children:t("usedLimit")}),E.jsx("th",{className:"px-3 py-2 font-semibold",style:{color:Pi},children:t("check")}),E.jsx("th",{className:"px-3 py-2 font-semibold",style:{color:Pi},children:"QR"})]})}),E.jsx("tbody",{children:V.filter(H=>qH(H,n.id)).map(H=>{const te=ve(H.id,n.id),ge=ce(H,n.id),pe=Fe(H.id,n.id),Be=U===`${H.id}|${n.id}`;return E.jsxs(Ys.tr,{whileHover:{backgroundColor:"#f3f4f6"},className:"border-t transition",children:[E.jsxs("td",{onClick:()=>e(`/myschool/student/${H.id}`),className:"px-3 py-1 text-blue-700 font-semibold hover:underline cursor-pointer",children:[H.first_name," ",H.last_name]}),E.jsx("td",{className:"px-3 py-1 text-gray-700",children:H.courses&&H.courses[n.id]?Object.entries(H.courses[n.id]).flatMap(([ze,Ee])=>Ee.map(At=>`${ze} ${At}`)).join(", "):""}),E.jsxs("td",{className:"px-3 py-1 text-center",children:[te,"/",ge||t("unlimited")]}),E.jsx("td",{className:"px-3 py-1 text-center",children:E.jsx(Ys.button,{whileTap:{scale:.82},disabled:Be,onClick:()=>re(H,n.id),className:`w-9 h-9 rounded-full transition font-bold ${pe?"bg-green-500 text-white":ge&&te>=ge?"bg-gray-200 text-gray-400":"bg-gray-300 text-gray-700 hover:bg-gray-400"}`,children:""})}),E.jsx("td",{className:"px-3 py-1 text-center",children:E.jsx("button",{onClick:()=>A(H.qr_code_url),disabled:!H.qr_code_url,className:"px-3 py-1 bg-purple-100 hover:bg-purple-200 rounded-full text-xs text-[#6654b3] font-bold disabled:opacity-50",children:"QR"})})]},H.id)})})]}),E.jsx(Pu,{children:h&&E.jsx(Qv,{onScan:H=>{const te=H.trim(),ge=V.find(pe=>pe.id===te);ge&&re(ge,n.id)},onClose:()=>y(!1)},"scanner-detail")})]},"detail")}),E.jsx(Pu,{children:S&&E.jsx(Ys.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20},className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:E.jsxs(Ys.div,{initial:{y:-20},animate:{y:0},exit:{y:20},className:"bg-white p-6 rounded-xl shadow-lg text-center",children:[E.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:Pi},children:t("studentQrCode")}),E.jsx("img",{src:S,alt:"QR",className:"mx-auto max-w-xs mb-4"}),E.jsxs("div",{className:"flex justify-center gap-4",children:[E.jsx("a",{href:S,download:!0,className:"px-4 py-2 bg-blue-100 hover:bg-blue-200 rounded-lg",children:t("download")}),E.jsx("button",{onClick:()=>{const H=window.open("");H&&(H.document.write(`<img src="${S}" onload="window.print();window.close()" />`),H.document.close())},className:"px-4 py-2 bg-green-100 hover:bg-green-200 rounded-lg",children:t("print")}),E.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg",children:t("close")})]})]})},"qrModal")})]})}function XH({row:t,student:e,courses:n,onApprove:r,onDelete:l}){const{t:u}=Pn(),[h,y]=R.useState([]),b=Object.keys(e.courses||{});return E.jsxs(Ys.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},exit:{opacity:0,y:16},className:"border border-gray-100 bg-white p-4 mb-4 rounded-2xl shadow",style:{boxShadow:"0 2px 10px 0 rgba(102,84,179,0.04)"},children:[E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[E.jsxs("h3",{className:"font-semibold text-[#6654b3]",children:[e.first_name," ",e.last_name]}),E.jsx("button",{onClick:()=>l(t),className:"text-gray-400 hover:text-red-500 text-lg px-2 font-bold",children:""})]}),E.jsx("div",{className:"flex flex-wrap gap-3 mb-3",children:b.map(x=>{var S;return E.jsxs("label",{className:"inline-flex items-center gap-2 px-2 py-1 rounded-lg bg-[#ede9fe] text-[#6654b3] font-semibold cursor-pointer",children:[E.jsx("input",{type:"checkbox",checked:h.includes(x),onChange:A=>y(N=>A.target.checked?[...N,x]:N.filter(I=>I!==x)),className:"accent-[#6654b3]"}),(S=n.find(A=>A.id===x))==null?void 0:S.name]},x)})}),E.jsx("button",{disabled:!h.length,onClick:()=>r(t,h),className:"px-5 py-2 bg-green-600 hover:bg-green-700 text-white rounded-full font-bold disabled:opacity-50 transition",children:u("approve")})]})}function WH(){const{t}=Pn();return E.jsx("div",{className:"text-2xl font-bold",children:t("billingComingSoon")},Jn.language)}function KH(){return E.jsx("div",{className:"text-2xl font-bold",children:"Reports Page (coming soon)"})}function ZH(){const{t}=Pn();return E.jsx("div",{className:"text-2xl font-bold",children:t("Messaging Page (coming soon)")},Jn.language)}const QH="#f6f6f6";function JH(){const{t}=Pn(),{user:e}=_d(),n=(e==null?void 0:e.role)==="admin",[r,l]=R.useState([]),[u,h]=R.useState(!1),[y,b]=R.useState(null),[x,S]=R.useState(!1),[A,N]=R.useState(""),[I,M]=R.useState(""),[j,U]=R.useState(""),[$,Y]=R.useState("staff"),[P,V]=R.useState(!1),[z,Z]=R.useState(null),[W,ae]=R.useState(!1);R.useEffect(()=>{X()},[]);async function X(){h(!0),b(null);const{data:ce,error:Fe}=await Ve.from("profiles").select("*").order("role",{ascending:!1});if(Fe)b(Fe.message);else{const se=ce;l(n?se:se.filter(re=>re.id===(e==null?void 0:e.id)))}h(!1)}async function be(ce){var De;ce.preventDefault(),V(!0),b(null);const{data:Fe,error:se}=await Ve.auth.admin.createUser({email:A.trim().toLowerCase(),password:j,email_confirm:!0});if(se){b(se.message),V(!1);return}const re=(De=Fe.user)==null?void 0:De.id;if(!re){b(t("noUserIdError")),V(!1);return}const{error:le}=await Ve.from("profiles").insert([{id:re,email:A.trim().toLowerCase(),full_name:I.trim()||null,role:$}]);le?b(le.message):(N(""),M(""),U(""),Y("staff"),X()),V(!1)}async function Ae(){if(!z)return;ae(!0);const{error:ce}=await Ve.from("profiles").update({full_name:z.full_name,role:z.role}).eq("id",z.id);ce?alert(ce.message):(Z(null),X()),ae(!1)}async function ve(ce){ce.role!=="admin"&&window.confirm(t("confirmRemoveStaff"))&&(await Ve.from("profiles").delete().eq("id",ce.id),X())}return E.jsxs("div",{className:"py-8 px-2 min-h-screen",style:{background:QH},children:[E.jsxs("div",{className:"max-w-5xl mx-auto flex justify-between items-center mb-8",children:[E.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-[#6654b3]",children:t("settingsTitle")}),n&&E.jsx("button",{onClick:()=>S(ce=>!ce),className:"flex items-center gap-2 bg-[#6654b3] hover:bg-[#5542a0] text-white px-5 py-2 rounded-full transition font-semibold shadow",children:x?E.jsxs(E.Fragment,{children:[E.jsx(dS,{className:"w-5 h-5"}),t("closeInvite")]}):E.jsxs(E.Fragment,{children:[E.jsx(J9,{className:"w-5 h-5"}),t("inviteUser")]})})]}),x&&n&&E.jsxs("div",{className:"bg-white shadow rounded-2xl p-6 max-w-xl mx-auto mb-8 border border-purple-100",children:[y&&E.jsx("p",{className:"text-red-600 mb-3",children:y}),E.jsxs("form",{onSubmit:be,className:"grid gap-4 sm:grid-cols-2",children:[E.jsx("input",{type:"email",required:!0,placeholder:t("email"),value:A,onChange:ce=>N(ce.target.value),className:"border rounded px-3 py-2",autoFocus:!0}),E.jsx("input",{type:"text",required:!0,placeholder:t("fullName"),value:I,onChange:ce=>M(ce.target.value),className:"border rounded px-3 py-2"}),E.jsx("input",{type:"password",required:!0,placeholder:t("tempPassword"),value:j,onChange:ce=>U(ce.target.value),className:"border rounded px-3 py-2"}),E.jsxs("select",{value:$,onChange:ce=>Y(ce.target.value),className:"border rounded px-3 py-2",children:[E.jsx("option",{value:"staff",children:t("roleStaff")}),E.jsx("option",{value:"admin",children:t("roleAdmin")})]}),E.jsx("div",{className:"sm:col-span-2 flex justify-end mt-2",children:E.jsx("button",{disabled:P,className:"bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-full font-bold transition disabled:opacity-60",children:t(P?"inviting":"sendInvite")})})]})]}),E.jsxs("div",{className:"max-w-5xl mx-auto",children:[E.jsx("h2",{className:"text-2xl font-bold text-[#6654b3] mb-5",children:t("teamMembers")}),u?E.jsx("p",{children:t("loading")}):r.length===0?E.jsx("p",{className:"text-gray-500",children:t("noUsers")}):E.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:r.map(ce=>E.jsxs("div",{className:"bg-white rounded-2xl border border-purple-100 shadow p-6 flex flex-col justify-between",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-bold text-[#6654b3]",children:ce.full_name??""}),E.jsx("p",{className:"text-sm text-gray-500 mt-1",children:ce.email}),E.jsx("span",{className:"inline-block mt-2 text-xs font-medium bg-[#f6f6f6] px-3 py-1 rounded-full text-[#6654b3] border border-purple-100",children:t("role_"+ce.role)})]}),E.jsxs("div",{className:"mt-6 flex gap-2",children:[E.jsxs("button",{onClick:()=>n&&Z(ce),disabled:!n,className:`flex-1 flex items-center justify-center gap-1 border rounded-full py-2 transition font-semibold
                      ${n?"border-purple-200 hover:bg-[#f6f6f6]":"opacity-50 cursor-not-allowed"}`,children:[E.jsx(Z9,{className:"w-5 h-5"}),t("edit")]}),n&&ce.role==="staff"&&E.jsxs("button",{onClick:()=>ve(ce),className:"flex-1 flex items-center justify-center gap-1 border border-red-200 text-red-600 rounded-full py-2 hover:bg-red-50 font-semibold",children:[E.jsx(nk,{className:"w-5 h-5"}),t("delete")]})]})]},ce.id))})]}),z&&E.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md space-y-4 border border-purple-100",children:[E.jsx("h2",{className:"text-xl font-bold text-[#6654b3]",children:t("editUser")}),E.jsxs("label",{className:"block text-sm font-semibold text-[#6654b3]",children:[t("fullName"),E.jsx("input",{value:z.full_name??"",onChange:ce=>Z({...z,full_name:ce.target.value}),className:"w-full border rounded px-3 py-2 mt-1"})]}),E.jsxs("label",{className:"block text-sm font-semibold text-[#6654b3]",children:[t("emailReadOnly"),E.jsx("input",{value:z.email??"",disabled:!0,className:"w-full border rounded px-3 py-2 mt-1 bg-gray-100"})]}),(e==null?void 0:e.id)!==z.id&&E.jsxs("label",{className:"block text-sm font-semibold text-[#6654b3]",children:[t("role"),E.jsxs("select",{value:z.role,onChange:ce=>Z({...z,role:ce.target.value}),className:"w-full border rounded px-3 py-2 mt-1",children:[E.jsx("option",{value:"staff",children:t("roleStaff")}),E.jsx("option",{value:"admin",children:t("roleAdmin")})]})]}),E.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[E.jsx("button",{onClick:()=>Z(null),className:"px-4 py-2 rounded-full border border-purple-200 hover:bg-[#f6f6f6] text-[#6654b3] font-semibold",children:t("cancel")}),E.jsx("button",{onClick:Ae,disabled:W,className:"bg-[#6654b3] text-white px-4 py-2 rounded-full font-semibold disabled:opacity-50",children:t(W?"saving":"save")})]})]})})]})}const ez=new sM;function tz(){return E.jsx(lM,{client:ez,children:E.jsx(II,{children:E.jsxs(oI,{children:[E.jsx(Ln,{path:"/login",element:E.jsx(S9,{})}),E.jsxs(Ln,{element:E.jsx(fk,{children:E.jsx(dk,{})}),children:[E.jsx(Ln,{path:"/dashboard",element:E.jsx(AV,{})}),E.jsx(Ln,{path:"/myschool/students",element:E.jsx(UV,{})}),E.jsx(Ln,{path:"/myschool/student/:id",element:E.jsx(XV,{})}),E.jsx(Ln,{path:"/students/add-existing",element:E.jsx(tH,{})}),E.jsx(Ln,{path:"/admissions",element:E.jsx(Lv,{})}),E.jsx(Ln,{path:"/apply/:token",element:E.jsx(Lv,{publicMode:!0})}),E.jsx(Ln,{path:"/attendance",element:E.jsx(YH,{})}),E.jsx(Ln,{path:"/billing",element:E.jsx(WH,{})}),E.jsx(Ln,{path:"/reports",element:E.jsx(KH,{})}),E.jsx(Ln,{path:"/messaging",element:E.jsx(ZH,{})}),E.jsx(Ln,{path:"/settings",element:E.jsx(JH,{})}),E.jsx(Ln,{path:"/review",element:E.jsx(yw,{})}),E.jsx(Ln,{path:"/myschool/courses",element:E.jsx(MV,{})}),E.jsx(Ln,{path:"/myschool/students/inactive",element:E.jsx(QV,{})}),E.jsx(Ln,{path:"/notifications",element:E.jsx(_V,{})}),E.jsx(Ln,{path:"/review-hub",element:E.jsx(yw,{})}),E.jsx(Ln,{index:!0,element:E.jsx(pb,{to:"/dashboard",replace:!0})})]}),E.jsx(Ln,{path:"*",element:E.jsx(pb,{to:"/login",replace:!0})})]})})})}fO.createRoot(document.getElementById("root")).render(E.jsx(R.StrictMode,{children:E.jsx(ck,{children:E.jsx(tz,{})})}));
