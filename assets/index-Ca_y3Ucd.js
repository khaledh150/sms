var k2=t=>{throw TypeError(t)};var X1=(t,e,n)=>e.has(t)||k2("Cannot "+n);var J=(t,e,n)=>(X1(t,e,"read from private field"),n?n.call(t):e.get(t)),et=(t,e,n)=>e.has(t)?k2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ve=(t,e,n,r)=>(X1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),wt=(t,e,n)=>(X1(t,e,"access private method"),n);var $d=(t,e,n,r)=>({set _(l){Ve(t,e,l,n)},get _(){return J(t,e,r)}});function u3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const l in r)if(l!=="default"&&!(l in t)){const u=Object.getOwnPropertyDescriptor(r,l);u&&Object.defineProperty(t,l,u.get?u:{enumerable:!0,get:()=>r[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var Gd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function km(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function GA(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var l=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,l.get?l:{enumerable:!0,get:function(){return t[r]}})}),n}var W1={exports:{}},Ou={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j2;function qA(){if(j2)return Ou;j2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,u){var h=null;if(u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),"key"in l){u={};for(var y in l)y!=="key"&&(u[y]=l[y])}else u=l;return l=u.ref,{$$typeof:t,type:r,key:h,ref:l!==void 0?l:null,props:u}}return Ou.Fragment=e,Ou.jsx=n,Ou.jsxs=n,Ou}var B2;function YA(){return B2||(B2=1,W1.exports=qA()),W1.exports}var C=YA();const ct=t=>typeof t=="string",Iu=()=>{let t,e;const n=new Promise((r,l)=>{t=r,e=l});return n.resolve=t,n.reject=e,n},P2=t=>t==null?"":""+t,XA=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},WA=/###/g,U2=t=>t&&t.indexOf("###")>-1?t.replace(WA,"."):t,F2=t=>!t||ct(t),Wu=(t,e,n)=>{const r=ct(e)?e.split("."):e;let l=0;for(;l<r.length-1;){if(F2(t))return{};const u=U2(r[l]);!t[u]&&n&&(t[u]=new n),Object.prototype.hasOwnProperty.call(t,u)?t=t[u]:t={},++l}return F2(t)?{}:{obj:t,k:U2(r[l])}},V2=(t,e,n)=>{const{obj:r,k:l}=Wu(t,e,Object);if(r!==void 0||e.length===1){r[l]=n;return}let u=e[e.length-1],h=e.slice(0,e.length-1),y=Wu(t,h,Object);for(;y.obj===void 0&&h.length;)u=`${h[h.length-1]}.${u}`,h=h.slice(0,h.length-1),y=Wu(t,h,Object),y!=null&&y.obj&&typeof y.obj[`${y.k}.${u}`]<"u"&&(y.obj=void 0);y.obj[`${y.k}.${u}`]=n},KA=(t,e,n,r)=>{const{obj:l,k:u}=Wu(t,e,Object);l[u]=l[u]||[],l[u].push(n)},mh=(t,e)=>{const{obj:n,k:r}=Wu(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},ZA=(t,e,n)=>{const r=mh(t,n);return r!==void 0?r:mh(e,n)},f3=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?ct(t[r])||t[r]instanceof String||ct(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):f3(t[r],e[r],n):t[r]=e[r]);return t},Kl=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var QA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const JA=t=>ct(t)?t.replace(/[&<>"'\/]/g,e=>QA[e]):t;class e4{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const t4=[" ",",","?","!",";"],n4=new e4(20),i4=(t,e,n)=>{e=e||"",n=n||"";const r=t4.filter(h=>e.indexOf(h)<0&&n.indexOf(h)<0);if(r.length===0)return!0;const l=n4.getRegExp(`(${r.map(h=>h==="?"?"\\?":h).join("|")})`);let u=!l.test(t);if(!u){const h=t.indexOf(n);h>0&&!l.test(t.substring(0,h))&&(u=!0)}return u},Mg=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let l=t;for(let u=0;u<r.length;){if(!l||typeof l!="object")return;let h,y="";for(let b=u;b<r.length;++b)if(b!==u&&(y+=n),y+=r[b],h=l[y],h!==void 0){if(["string","number","boolean"].indexOf(typeof h)>-1&&b<r.length-1)continue;u+=b-u+1;break}l=h}return l},lf=t=>t==null?void 0:t.replace("_","-"),s4={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class ph{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||s4,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,l){return l&&!this.debug?null:(ct(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new ph(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new ph(this.logger,e)}}var mr=new ph;class kh{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const l=this.observers[r].get(n)||0;this.observers[r].set(n,l+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([l,u])=>{for(let h=0;h<u;h++)l(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([l,u])=>{for(let h=0;h<u;h++)l.apply(l,[e,...n])})}}class z2 extends kh{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,l={}){var x,E;const u=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,h=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure;let y;e.indexOf(".")>-1?y=e.split("."):(y=[e,n],r&&(Array.isArray(r)?y.push(...r):ct(r)&&u?y.push(...r.split(u)):y.push(r)));const b=mh(this.data,y);return!b&&!n&&!r&&e.indexOf(".")>-1&&(e=y[0],n=y[1],r=y.slice(2).join(".")),b||!h||!ct(r)?b:Mg((E=(x=this.data)==null?void 0:x[e])==null?void 0:E[n],r,u)}addResource(e,n,r,l,u={silent:!1}){const h=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator;let y=[e,n];r&&(y=y.concat(h?r.split(h):r)),e.indexOf(".")>-1&&(y=e.split("."),l=n,n=y[1]),this.addNamespaces(n),V2(this.data,y,l),u.silent||this.emit("added",e,n,r,l)}addResources(e,n,r,l={silent:!1}){for(const u in r)(ct(r[u])||Array.isArray(r[u]))&&this.addResource(e,n,u,r[u],{silent:!0});l.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,l,u,h={silent:!1,skipCopy:!1}){let y=[e,n];e.indexOf(".")>-1&&(y=e.split("."),l=r,r=n,n=y[1]),this.addNamespaces(n);let b=mh(this.data,y)||{};h.skipCopy||(r=JSON.parse(JSON.stringify(r))),l?f3(b,r,u):b={...b,...r},V2(this.data,y,b),h.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(l=>n[l]&&Object.keys(n[l]).length>0)}toJSON(){return this.data}}var d3={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,l){return t.forEach(u=>{var h;e=((h=this.processors[u])==null?void 0:h.process(e,n,r,l))??e}),e}};const H2={},$2=t=>!ct(t)&&typeof t!="boolean"&&typeof t!="number";class xh extends kh{constructor(e,n={}){super(),XA(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=mr.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const l=this.resolve(e,r);return(l==null?void 0:l.res)!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const l=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let u=n.ns||this.options.defaultNS||[];const h=r&&e.indexOf(r)>-1,y=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!i4(e,r,l);if(h&&!y){const b=e.match(this.interpolator.nestingRegexp);if(b&&b.length>0)return{key:e,namespaces:ct(u)?[u]:u};const x=e.split(r);(r!==l||r===l&&this.options.ns.indexOf(x[0])>-1)&&(u=x.shift()),e=x.join(l)}return{key:e,namespaces:ct(u)?[u]:u}}translate(e,n,r){let l=typeof n=="object"?{...n}:n;if(typeof l!="object"&&this.options.overloadTranslationOptionHandler&&(l=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(l={...l}),l||(l={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const u=l.returnDetails!==void 0?l.returnDetails:this.options.returnDetails,h=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,{key:y,namespaces:b}=this.extractFromKey(e[e.length-1],l),x=b[b.length-1];let E=l.nsSeparator!==void 0?l.nsSeparator:this.options.nsSeparator;E===void 0&&(E=":");const A=l.lng||this.language,N=l.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((A==null?void 0:A.toLowerCase())==="cimode")return N?u?{res:`${x}${E}${y}`,usedKey:y,exactUsedKey:y,usedLng:A,usedNS:x,usedParams:this.getUsedParamsDetails(l)}:`${x}${E}${y}`:u?{res:y,usedKey:y,exactUsedKey:y,usedLng:A,usedNS:x,usedParams:this.getUsedParamsDetails(l)}:y;const I=this.resolve(e,l);let M=I==null?void 0:I.res;const j=(I==null?void 0:I.usedKey)||y,U=(I==null?void 0:I.exactUsedKey)||y,$=["[object Number]","[object Function]","[object RegExp]"],q=l.joinArrays!==void 0?l.joinArrays:this.options.joinArrays,B=!this.i18nFormat||this.i18nFormat.handleAsObject,V=l.count!==void 0&&!ct(l.count),z=xh.hasDefaultValue(l),ee=V?this.pluralResolver.getSuffix(A,l.count,l):"",X=l.ordinal&&V?this.pluralResolver.getSuffix(A,l.count,{ordinal:!1}):"",ae=V&&!l.ordinal&&l.count===0,Y=ae&&l[`defaultValue${this.options.pluralSeparator}zero`]||l[`defaultValue${ee}`]||l[`defaultValue${X}`]||l.defaultValue;let be=M;B&&!M&&z&&(be=Y);const Te=$2(be),ve=Object.prototype.toString.apply(be);if(B&&be&&Te&&$.indexOf(ve)<0&&!(ct(q)&&Array.isArray(be))){if(!l.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const le=this.options.returnedObjectHandler?this.options.returnedObjectHandler(j,be,{...l,ns:b}):`key '${y} (${this.language})' returned an object instead of string.`;return u?(I.res=le,I.usedParams=this.getUsedParamsDetails(l),I):le}if(h){const le=Array.isArray(be),ke=le?[]:{},ie=le?U:j;for(const se in be)if(Object.prototype.hasOwnProperty.call(be,se)){const fe=`${ie}${h}${se}`;z&&!M?ke[se]=this.translate(fe,{...l,defaultValue:$2(Y)?Y[se]:void 0,joinArrays:!1,ns:b}):ke[se]=this.translate(fe,{...l,joinArrays:!1,ns:b}),ke[se]===fe&&(ke[se]=be[se])}M=ke}}else if(B&&ct(q)&&Array.isArray(M))M=M.join(q),M&&(M=this.extendTranslation(M,e,l,r));else{let le=!1,ke=!1;!this.isValidLookup(M)&&z&&(le=!0,M=Y),this.isValidLookup(M)||(ke=!0,M=y);const se=(l.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&ke?void 0:M,fe=z&&Y!==M&&this.options.updateMissing;if(ke||le||fe){if(this.logger.log(fe?"updateKey":"missingKey",A,x,y,fe?Y:M),h){const Z=this.resolve(y,{...l,keySeparator:!1});Z&&Z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Ie=[];const Ue=this.languageUtils.getFallbackCodes(this.options.fallbackLng,l.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ue&&Ue[0])for(let Z=0;Z<Ue.length;Z++)Ie.push(Ue[Z]);else this.options.saveMissingTo==="all"?Ie=this.languageUtils.toResolveHierarchy(l.lng||this.language):Ie.push(l.lng||this.language);const W=(Z,ce,oe)=>{var qe;const Oe=z&&oe!==M?oe:se;this.options.missingKeyHandler?this.options.missingKeyHandler(Z,x,ce,Oe,fe,l):(qe=this.backendConnector)!=null&&qe.saveMissing&&this.backendConnector.saveMissing(Z,x,ce,Oe,fe,l),this.emit("missingKey",Z,x,ce,M)};this.options.saveMissing&&(this.options.saveMissingPlurals&&V?Ie.forEach(Z=>{const ce=this.pluralResolver.getSuffixes(Z,l);ae&&l[`defaultValue${this.options.pluralSeparator}zero`]&&ce.indexOf(`${this.options.pluralSeparator}zero`)<0&&ce.push(`${this.options.pluralSeparator}zero`),ce.forEach(oe=>{W([Z],y+oe,l[`defaultValue${oe}`]||Y)})}):W(Ie,y,Y))}M=this.extendTranslation(M,e,l,I,r),ke&&M===y&&this.options.appendNamespaceToMissingKey&&(M=`${x}${E}${y}`),(ke||le)&&this.options.parseMissingKeyHandler&&(M=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${x}${E}${y}`:y,le?M:void 0,l))}return u?(I.res=M,I.usedParams=this.getUsedParamsDetails(l),I):M}extendTranslation(e,n,r,l,u){var b,x;if((b=this.i18nFormat)!=null&&b.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const E=ct(e)&&(((x=r==null?void 0:r.interpolation)==null?void 0:x.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let A;if(E){const I=e.match(this.interpolator.nestingRegexp);A=I&&I.length}let N=r.replace&&!ct(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(N={...this.options.interpolation.defaultVariables,...N}),e=this.interpolator.interpolate(e,N,r.lng||this.language||l.usedLng,r),E){const I=e.match(this.interpolator.nestingRegexp),M=I&&I.length;A<M&&(r.nest=!1)}!r.lng&&l&&l.res&&(r.lng=this.language||l.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...I)=>(u==null?void 0:u[0])===I[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${I[0]} in key: ${n[0]}`),null):this.translate(...I,n),r)),r.interpolation&&this.interpolator.reset()}const h=r.postProcess||this.options.postProcess,y=ct(h)?[h]:h;return e!=null&&(y!=null&&y.length)&&r.applyPostProcessor!==!1&&(e=d3.handle(y,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...l,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,l,u,h,y;return ct(e)&&(e=[e]),e.forEach(b=>{if(this.isValidLookup(r))return;const x=this.extractFromKey(b,n),E=x.key;l=E;let A=x.namespaces;this.options.fallbackNS&&(A=A.concat(this.options.fallbackNS));const N=n.count!==void 0&&!ct(n.count),I=N&&!n.ordinal&&n.count===0,M=n.context!==void 0&&(ct(n.context)||typeof n.context=="number")&&n.context!=="",j=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);A.forEach(U=>{var $,q;this.isValidLookup(r)||(y=U,!H2[`${j[0]}-${U}`]&&(($=this.utils)!=null&&$.hasLoadedNamespace)&&!((q=this.utils)!=null&&q.hasLoadedNamespace(y))&&(H2[`${j[0]}-${U}`]=!0,this.logger.warn(`key "${l}" for languages "${j.join(", ")}" won't get resolved as namespace "${y}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),j.forEach(B=>{var ee;if(this.isValidLookup(r))return;h=B;const V=[E];if((ee=this.i18nFormat)!=null&&ee.addLookupKeys)this.i18nFormat.addLookupKeys(V,E,B,U,n);else{let X;N&&(X=this.pluralResolver.getSuffix(B,n.count,n));const ae=`${this.options.pluralSeparator}zero`,Y=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(N&&(V.push(E+X),n.ordinal&&X.indexOf(Y)===0&&V.push(E+X.replace(Y,this.options.pluralSeparator)),I&&V.push(E+ae)),M){const be=`${E}${this.options.contextSeparator}${n.context}`;V.push(be),N&&(V.push(be+X),n.ordinal&&X.indexOf(Y)===0&&V.push(be+X.replace(Y,this.options.pluralSeparator)),I&&V.push(be+ae))}}let z;for(;z=V.pop();)this.isValidLookup(r)||(u=z,r=this.getResource(B,U,z,n))}))})}),{res:r,usedKey:l,exactUsedKey:u,usedLng:h,usedNS:y}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,l={}){var u;return(u=this.i18nFormat)!=null&&u.getResource?this.i18nFormat.getResource(e,n,r,l):this.resourceStore.getResource(e,n,r,l)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ct(e.replace);let l=r?e.replace:e;if(r&&typeof e.count<"u"&&(l.count=e.count),this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),!r){l={...l};for(const u of n)delete l[u]}return l}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class G2{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=mr.create("languageUtils")}getScriptPartFromCode(e){if(e=lf(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=lf(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(ct(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const l=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(l))&&(n=l)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const l=this.getScriptPartFromCode(r);if(this.isSupportedCode(l))return n=l;const u=this.getLanguagePartFromCode(r);if(this.isSupportedCode(u))return n=u;n=this.options.supportedLngs.find(h=>{if(h===u)return h;if(!(h.indexOf("-")<0&&u.indexOf("-")<0)&&(h.indexOf("-")>0&&u.indexOf("-")<0&&h.substring(0,h.indexOf("-"))===u||h.indexOf(u)===0&&u.length>1))return h})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),ct(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),l=[],u=h=>{h&&(this.isSupportedCode(h)?l.push(h):this.logger.warn(`rejecting language code not found in supportedLngs: ${h}`))};return ct(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&u(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&u(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&u(this.getLanguagePartFromCode(e))):ct(e)&&u(this.formatLanguageCode(e)),r.forEach(h=>{l.indexOf(h)<0&&u(this.formatLanguageCode(h))}),l}}const q2={zero:0,one:1,two:2,few:3,many:4,other:5},Y2={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class r4{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=mr.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=lf(e==="dev"?"en":e),l=n.ordinal?"ordinal":"cardinal",u=JSON.stringify({cleanedCode:r,type:l});if(u in this.pluralRulesCache)return this.pluralRulesCache[u];let h;try{h=new Intl.PluralRules(r,{type:l})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Y2;if(!e.match(/-|_/))return Y2;const b=this.languageUtils.getLanguagePartFromCode(e);h=this.getRule(b,n)}return this.pluralRulesCache[u]=h,h}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(l=>`${n}${l}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((l,u)=>q2[l]-q2[u]).map(l=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${l}`):[]}getSuffix(e,n,r={}){const l=this.getRule(e,r);return l?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${l.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const X2=(t,e,n,r=".",l=!0)=>{let u=ZA(t,e,n);return!u&&l&&ct(n)&&(u=Mg(t,n,r),u===void 0&&(u=Mg(e,n,r))),u},K1=t=>t.replace(/\$/g,"$$$$");class a4{constructor(e={}){var n;this.logger=mr.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:l,prefix:u,prefixEscaped:h,suffix:y,suffixEscaped:b,formatSeparator:x,unescapeSuffix:E,unescapePrefix:A,nestingPrefix:N,nestingPrefixEscaped:I,nestingSuffix:M,nestingSuffixEscaped:j,nestingOptionsSeparator:U,maxReplaces:$,alwaysFormat:q}=e.interpolation;this.escape=n!==void 0?n:JA,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=l!==void 0?l:!1,this.prefix=u?Kl(u):h||"{{",this.suffix=y?Kl(y):b||"}}",this.formatSeparator=x||",",this.unescapePrefix=E?"":A||"-",this.unescapeSuffix=this.unescapePrefix?"":E||"",this.nestingPrefix=N?Kl(N):I||Kl("$t("),this.nestingSuffix=M?Kl(M):j||Kl(")"),this.nestingOptionsSeparator=U||",",this.maxReplaces=$||1e3,this.alwaysFormat=q!==void 0?q:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,l){var I;let u,h,y;const b=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},x=M=>{if(M.indexOf(this.formatSeparator)<0){const q=X2(n,b,M,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(q,void 0,r,{...l,...n,interpolationkey:M}):q}const j=M.split(this.formatSeparator),U=j.shift().trim(),$=j.join(this.formatSeparator).trim();return this.format(X2(n,b,U,this.options.keySeparator,this.options.ignoreJSONStructure),$,r,{...l,...n,interpolationkey:U})};this.resetRegExp();const E=(l==null?void 0:l.missingInterpolationHandler)||this.options.missingInterpolationHandler,A=((I=l==null?void 0:l.interpolation)==null?void 0:I.skipOnVariables)!==void 0?l.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:M=>K1(M)},{regex:this.regexp,safeValue:M=>this.escapeValue?K1(this.escape(M)):K1(M)}].forEach(M=>{for(y=0;u=M.regex.exec(e);){const j=u[1].trim();if(h=x(j),h===void 0)if(typeof E=="function"){const $=E(e,u,l);h=ct($)?$:""}else if(l&&Object.prototype.hasOwnProperty.call(l,j))h="";else if(A){h=u[0];continue}else this.logger.warn(`missed to pass in variable ${j} for interpolating ${e}`),h="";else!ct(h)&&!this.useRawValueToEscape&&(h=P2(h));const U=M.safeValue(h);if(e=e.replace(u[0],U),A?(M.regex.lastIndex+=h.length,M.regex.lastIndex-=u[0].length):M.regex.lastIndex=0,y++,y>=this.maxReplaces)break}}),e}nest(e,n,r={}){let l,u,h;const y=(b,x)=>{const E=this.nestingOptionsSeparator;if(b.indexOf(E)<0)return b;const A=b.split(new RegExp(`${E}[ ]*{`));let N=`{${A[1]}`;b=A[0],N=this.interpolate(N,h);const I=N.match(/'/g),M=N.match(/"/g);(((I==null?void 0:I.length)??0)%2===0&&!M||M.length%2!==0)&&(N=N.replace(/'/g,'"'));try{h=JSON.parse(N),x&&(h={...x,...h})}catch(j){return this.logger.warn(`failed parsing options string in nesting for key ${b}`,j),`${b}${E}${N}`}return h.defaultValue&&h.defaultValue.indexOf(this.prefix)>-1&&delete h.defaultValue,b};for(;l=this.nestingRegexp.exec(e);){let b=[];h={...r},h=h.replace&&!ct(h.replace)?h.replace:h,h.applyPostProcessor=!1,delete h.defaultValue;const x=/{.*}/.test(l[1])?l[1].lastIndexOf("}")+1:l[1].indexOf(this.formatSeparator);if(x!==-1&&(b=l[1].slice(x).split(this.formatSeparator).map(E=>E.trim()).filter(Boolean),l[1]=l[1].slice(0,x)),u=n(y.call(this,l[1].trim(),h),h),u&&l[0]===e&&!ct(u))return u;ct(u)||(u=P2(u)),u||(this.logger.warn(`missed to resolve ${l[1]} for nesting ${e}`),u=""),b.length&&(u=b.reduce((E,A)=>this.format(E,A,r.lng,{...r,interpolationkey:l[1].trim()}),u.trim())),e=e.replace(l[0],u),this.regexp.lastIndex=0}return e}}const o4=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const l=r[1].substring(0,r[1].length-1);e==="currency"&&l.indexOf(":")<0?n.currency||(n.currency=l.trim()):e==="relativetime"&&l.indexOf(":")<0?n.range||(n.range=l.trim()):l.split(";").forEach(h=>{if(h){const[y,...b]=h.split(":"),x=b.join(":").trim().replace(/^'+|'+$/g,""),E=y.trim();n[E]||(n[E]=x),x==="false"&&(n[E]=!1),x==="true"&&(n[E]=!0),isNaN(x)||(n[E]=parseInt(x,10))}})}return{formatName:e,formatOptions:n}},W2=t=>{const e={};return(n,r,l)=>{let u=l;l&&l.interpolationkey&&l.formatParams&&l.formatParams[l.interpolationkey]&&l[l.interpolationkey]&&(u={...u,[l.interpolationkey]:void 0});const h=r+JSON.stringify(u);let y=e[h];return y||(y=t(lf(r),l),e[h]=y),y(n)}},l4=t=>(e,n,r)=>t(lf(n),r)(e);class c4{constructor(e={}){this.logger=mr.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?W2:l4;this.formats={number:r((l,u)=>{const h=new Intl.NumberFormat(l,{...u});return y=>h.format(y)}),currency:r((l,u)=>{const h=new Intl.NumberFormat(l,{...u,style:"currency"});return y=>h.format(y)}),datetime:r((l,u)=>{const h=new Intl.DateTimeFormat(l,{...u});return y=>h.format(y)}),relativetime:r((l,u)=>{const h=new Intl.RelativeTimeFormat(l,{...u});return y=>h.format(y,u.range||"day")}),list:r((l,u)=>{const h=new Intl.ListFormat(l,{...u});return y=>h.format(y)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=W2(n)}format(e,n,r,l={}){const u=n.split(this.formatSeparator);if(u.length>1&&u[0].indexOf("(")>1&&u[0].indexOf(")")<0&&u.find(y=>y.indexOf(")")>-1)){const y=u.findIndex(b=>b.indexOf(")")>-1);u[0]=[u[0],...u.splice(1,y)].join(this.formatSeparator)}return u.reduce((y,b)=>{var A;const{formatName:x,formatOptions:E}=o4(b);if(this.formats[x]){let N=y;try{const I=((A=l==null?void 0:l.formatParams)==null?void 0:A[l.interpolationkey])||{},M=I.locale||I.lng||l.locale||l.lng||r;N=this.formats[x](y,M,{...E,...l,...I})}catch(I){this.logger.warn(I)}return N}else this.logger.warn(`there was no format function for ${x}`);return y},e)}}const u4=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class f4 extends kh{constructor(e,n,r,l={}){var u,h;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=l,this.logger=mr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=l.maxParallelReads||10,this.readingCalls=0,this.maxRetries=l.maxRetries>=0?l.maxRetries:5,this.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,this.state={},this.queue=[],(h=(u=this.backend)==null?void 0:u.init)==null||h.call(u,r,l.backend,l)}queueLoad(e,n,r,l){const u={},h={},y={},b={};return e.forEach(x=>{let E=!0;n.forEach(A=>{const N=`${x}|${A}`;!r.reload&&this.store.hasResourceBundle(x,A)?this.state[N]=2:this.state[N]<0||(this.state[N]===1?h[N]===void 0&&(h[N]=!0):(this.state[N]=1,E=!1,h[N]===void 0&&(h[N]=!0),u[N]===void 0&&(u[N]=!0),b[A]===void 0&&(b[A]=!0)))}),E||(y[x]=!0)}),(Object.keys(u).length||Object.keys(h).length)&&this.queue.push({pending:h,pendingCount:Object.keys(h).length,loaded:{},errors:[],callback:l}),{toLoad:Object.keys(u),pending:Object.keys(h),toLoadLanguages:Object.keys(y),toLoadNamespaces:Object.keys(b)}}loaded(e,n,r){const l=e.split("|"),u=l[0],h=l[1];n&&this.emit("failedLoading",u,h,n),!n&&r&&this.store.addResourceBundle(u,h,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const y={};this.queue.forEach(b=>{KA(b.loaded,[u],h),u4(b,e),n&&b.errors.push(n),b.pendingCount===0&&!b.done&&(Object.keys(b.loaded).forEach(x=>{y[x]||(y[x]={});const E=b.loaded[x];E.length&&E.forEach(A=>{y[x][A]===void 0&&(y[x][A]=!0)})}),b.done=!0,b.errors.length?b.callback(b.errors):b.callback())}),this.emit("loaded",y),this.queue=this.queue.filter(b=>!b.done)}read(e,n,r,l=0,u=this.retryTimeout,h){if(!e.length)return h(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:l,wait:u,callback:h});return}this.readingCalls++;const y=(x,E)=>{if(this.readingCalls--,this.waitingReads.length>0){const A=this.waitingReads.shift();this.read(A.lng,A.ns,A.fcName,A.tried,A.wait,A.callback)}if(x&&E&&l<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,l+1,u*2,h)},u);return}h(x,E)},b=this.backend[r].bind(this.backend);if(b.length===2){try{const x=b(e,n);x&&typeof x.then=="function"?x.then(E=>y(null,E)).catch(y):y(null,x)}catch(x){y(x)}return}return b(e,n,y)}prepareLoading(e,n,r={},l){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();ct(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ct(n)&&(n=[n]);const u=this.queueLoad(e,n,r,l);if(!u.toLoad.length)return u.pending.length||l(),null;u.toLoad.forEach(h=>{this.loadOne(h)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),l=r[0],u=r[1];this.read(l,u,"read",void 0,void 0,(h,y)=>{h&&this.logger.warn(`${n}loading namespace ${u} for language ${l} failed`,h),!h&&y&&this.logger.log(`${n}loaded namespace ${u} for language ${l}`,y),this.loaded(e,h,y)})}saveMissing(e,n,r,l,u,h={},y=()=>{}){var b,x,E,A,N;if((x=(b=this.services)==null?void 0:b.utils)!=null&&x.hasLoadedNamespace&&!((A=(E=this.services)==null?void 0:E.utils)!=null&&A.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((N=this.backend)!=null&&N.create){const I={...h,isUpdate:u},M=this.backend.create.bind(this.backend);if(M.length<6)try{let j;M.length===5?j=M(e,n,r,l,I):j=M(e,n,r,l),j&&typeof j.then=="function"?j.then(U=>y(null,U)).catch(y):y(null,j)}catch(j){y(j)}else M(e,n,r,l,y,I)}!e||!e[0]||this.store.addResource(e[0],n,r,l)}}}const K2=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ct(t[1])&&(e.defaultValue=t[1]),ct(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Z2=t=>{var e,n;return ct(t.ns)&&(t.ns=[t.ns]),ct(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ct(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},qd=()=>{},d4=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class cf extends kh{constructor(e={},n){if(super(),this.options=Z2(e),this.services={},this.logger=mr,this.modules={external:[]},d4(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(ct(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=K2();this.options={...r,...this.options,...Z2(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const l=x=>x?typeof x=="function"?new x:x:null;if(!this.options.isClone){this.modules.logger?mr.init(l(this.modules.logger),this.options):mr.init(null,this.options);let x;this.modules.formatter?x=this.modules.formatter:x=c4;const E=new G2(this.options);this.store=new z2(this.options.resources,this.options);const A=this.services;A.logger=mr,A.resourceStore=this.store,A.languageUtils=E,A.pluralResolver=new r4(E,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),x&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(A.formatter=l(x),A.formatter.init&&A.formatter.init(A,this.options),this.options.interpolation.format=A.formatter.format.bind(A.formatter)),A.interpolator=new a4(this.options),A.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},A.backendConnector=new f4(l(this.modules.backend),A.resourceStore,A,this.options),A.backendConnector.on("*",(I,...M)=>{this.emit(I,...M)}),this.modules.languageDetector&&(A.languageDetector=l(this.modules.languageDetector),A.languageDetector.init&&A.languageDetector.init(A,this.options.detection,this.options)),this.modules.i18nFormat&&(A.i18nFormat=l(this.modules.i18nFormat),A.i18nFormat.init&&A.i18nFormat.init(this)),this.translator=new xh(this.services,this.options),this.translator.on("*",(I,...M)=>{this.emit(I,...M)}),this.modules.external.forEach(I=>{I.init&&I.init(this)})}if(this.format=this.options.interpolation.format,n||(n=qd),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const x=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);x.length>0&&x[0]!=="dev"&&(this.options.lng=x[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(x=>{this[x]=(...E)=>this.store[x](...E)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(x=>{this[x]=(...E)=>(this.store[x](...E),this)});const y=Iu(),b=()=>{const x=(E,A)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),y.resolve(A),n(E,A)};if(this.languages&&!this.isInitialized)return x(null,this.t.bind(this));this.changeLanguage(this.options.lng,x)};return this.options.resources||!this.options.initAsync?b():setTimeout(b,0),y}loadResources(e,n=qd){var u,h;let r=n;const l=ct(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((l==null?void 0:l.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const y=[],b=x=>{if(!x||x==="cimode")return;this.services.languageUtils.toResolveHierarchy(x).forEach(A=>{A!=="cimode"&&y.indexOf(A)<0&&y.push(A)})};l?b(l):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(E=>b(E)),(h=(u=this.options.preload)==null?void 0:u.forEach)==null||h.call(u,x=>b(x)),this.services.backendConnector.load(y,this.options.ns,x=>{!x&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(x)})}else r(null)}reloadResources(e,n,r){const l=Iu();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=qd),this.services.backendConnector.reload(e,n,u=>{l.resolve(),r(u)}),l}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&d3.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Iu();this.emit("languageChanging",e);const l=y=>{this.language=y,this.languages=this.services.languageUtils.toResolveHierarchy(y),this.resolvedLanguage=void 0,this.setResolvedLanguage(y)},u=(y,b)=>{b?this.isLanguageChangingTo===e&&(l(b),this.translator.changeLanguage(b),this.isLanguageChangingTo=void 0,this.emit("languageChanged",b),this.logger.log("languageChanged",b)):this.isLanguageChangingTo=void 0,r.resolve((...x)=>this.t(...x)),n&&n(y,(...x)=>this.t(...x))},h=y=>{var E,A;!e&&!y&&this.services.languageDetector&&(y=[]);const b=ct(y)?y:y&&y[0],x=this.store.hasLanguageSomeTranslations(b)?b:this.services.languageUtils.getBestMatchFromCodes(ct(y)?[y]:y);x&&(this.language||l(x),this.translator.language||this.translator.changeLanguage(x),(A=(E=this.services.languageDetector)==null?void 0:E.cacheUserLanguage)==null||A.call(E,x)),this.loadResources(x,N=>{u(N,x)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?h(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(h):this.services.languageDetector.detect(h):h(e),r}getFixedT(e,n,r){const l=(u,h,...y)=>{let b;typeof h!="object"?b=this.options.overloadTranslationOptionHandler([u,h].concat(y)):b={...h},b.lng=b.lng||l.lng,b.lngs=b.lngs||l.lngs,b.ns=b.ns||l.ns,b.keyPrefix!==""&&(b.keyPrefix=b.keyPrefix||r||l.keyPrefix);const x=this.options.keySeparator||".";let E;return b.keyPrefix&&Array.isArray(u)?E=u.map(A=>`${b.keyPrefix}${x}${A}`):E=b.keyPrefix?`${b.keyPrefix}${x}${u}`:u,this.t(E,b)};return ct(e)?l.lng=e:l.lngs=e,l.ns=n,l.keyPrefix=r,l}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,u=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const h=(y,b)=>{const x=this.services.backendConnector.state[`${y}|${b}`];return x===-1||x===0||x===2};if(n.precheck){const y=n.precheck(this,h);if(y!==void 0)return y}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||h(r,e)&&(!l||h(u,e)))}loadNamespaces(e,n){const r=Iu();return this.options.ns?(ct(e)&&(e=[e]),e.forEach(l=>{this.options.ns.indexOf(l)<0&&this.options.ns.push(l)}),this.loadResources(l=>{r.resolve(),n&&n(l)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Iu();ct(e)&&(e=[e]);const l=this.options.preload||[],u=e.filter(h=>l.indexOf(h)<0&&this.services.languageUtils.isSupportedCode(h));return u.length?(this.options.preload=l.concat(u),this.loadResources(h=>{r.resolve(),n&&n(h)}),r):(n&&n(),Promise.resolve())}dir(e){var l,u;if(e||(e=this.resolvedLanguage||(((l=this.languages)==null?void 0:l.length)>0?this.languages[0]:this.language)),!e)return"rtl";if(Intl.Locale){const h=new Intl.Locale(e);if(h&&h.getTextInfo){const y=h.getTextInfo();if(y&&y.direction)return y.direction}}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((u=this.services)==null?void 0:u.languageUtils)||new G2(K2());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new cf(e,n)}cloneInstance(e={},n=qd){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const l={...this.options,...e,isClone:!0},u=new cf(l);if((e.debug!==void 0||e.prefix!==void 0)&&(u.logger=u.logger.clone(e)),["store","services","language"].forEach(y=>{u[y]=this[y]}),u.services={...this.services},u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},r){const y=Object.keys(this.store.data).reduce((b,x)=>(b[x]={...this.store.data[x]},b[x]=Object.keys(b[x]).reduce((E,A)=>(E[A]={...b[x][A]},E),b[x]),b),{});u.store=new z2(y,l),u.services.resourceStore=u.store}return u.translator=new xh(u.services,l),u.translator.on("*",(y,...b)=>{u.emit(y,...b)}),u.init(l,n),u.translator.options=l,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Qn=cf.createInstance();Qn.createInstance=cf.createInstance;Qn.createInstance;Qn.dir;Qn.init;Qn.loadResources;Qn.reloadResources;Qn.use;Qn.changeLanguage;Qn.getFixedT;Qn.t;Qn.exists;Qn.setDefaultNamespace;Qn.hasLoadedNamespace;Qn.loadNamespaces;Qn.loadLanguages;var Z1={exports:{}},bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q2;function h4(){if(Q2)return bt;Q2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function N(W){return W===null||typeof W!="object"?null:(W=A&&W[A]||W["@@iterator"],typeof W=="function"?W:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,j={};function U(W,Z,ce){this.props=W,this.context=Z,this.refs=j,this.updater=ce||I}U.prototype.isReactComponent={},U.prototype.setState=function(W,Z){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,Z,"setState")},U.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function $(){}$.prototype=U.prototype;function q(W,Z,ce){this.props=W,this.context=Z,this.refs=j,this.updater=ce||I}var B=q.prototype=new $;B.constructor=q,M(B,U.prototype),B.isPureReactComponent=!0;var V=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},ee=Object.prototype.hasOwnProperty;function X(W,Z,ce,oe,Oe,qe){return ce=qe.ref,{$$typeof:t,type:W,key:Z,ref:ce!==void 0?ce:null,props:qe}}function ae(W,Z){return X(W.type,Z,void 0,void 0,void 0,W.props)}function Y(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function be(W){var Z={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(ce){return Z[ce]})}var Te=/\/+/g;function ve(W,Z){return typeof W=="object"&&W!==null&&W.key!=null?be(""+W.key):Z.toString(36)}function le(){}function ke(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(le,le):(W.status="pending",W.then(function(Z){W.status==="pending"&&(W.status="fulfilled",W.value=Z)},function(Z){W.status==="pending"&&(W.status="rejected",W.reason=Z)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function ie(W,Z,ce,oe,Oe){var qe=typeof W;(qe==="undefined"||qe==="boolean")&&(W=null);var we=!1;if(W===null)we=!0;else switch(qe){case"bigint":case"string":case"number":we=!0;break;case"object":switch(W.$$typeof){case t:case e:we=!0;break;case E:return we=W._init,ie(we(W._payload),Z,ce,oe,Oe)}}if(we)return Oe=Oe(W),we=oe===""?"."+ve(W,0):oe,V(Oe)?(ce="",we!=null&&(ce=we.replace(Te,"$&/")+"/"),ie(Oe,Z,ce,"",function(It){return It})):Oe!=null&&(Y(Oe)&&(Oe=ae(Oe,ce+(Oe.key==null||W&&W.key===Oe.key?"":(""+Oe.key).replace(Te,"$&/")+"/")+we)),Z.push(Oe)),1;we=0;var ht=oe===""?".":oe+":";if(V(W))for(var Ge=0;Ge<W.length;Ge++)oe=W[Ge],qe=ht+ve(oe,Ge),we+=ie(oe,Z,ce,qe,Oe);else if(Ge=N(W),typeof Ge=="function")for(W=Ge.call(W),Ge=0;!(oe=W.next()).done;)oe=oe.value,qe=ht+ve(oe,Ge++),we+=ie(oe,Z,ce,qe,Oe);else if(qe==="object"){if(typeof W.then=="function")return ie(ke(W),Z,ce,oe,Oe);throw Z=String(W),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return we}function se(W,Z,ce){if(W==null)return W;var oe=[],Oe=0;return ie(W,oe,"","",function(qe){return Z.call(ce,qe,Oe++)}),oe}function fe(W){if(W._status===-1){var Z=W._result;Z=Z(),Z.then(function(ce){(W._status===0||W._status===-1)&&(W._status=1,W._result=ce)},function(ce){(W._status===0||W._status===-1)&&(W._status=2,W._result=ce)}),W._status===-1&&(W._status=0,W._result=Z)}if(W._status===1)return W._result.default;throw W._result}var Ie=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)};function Ue(){}return bt.Children={map:se,forEach:function(W,Z,ce){se(W,function(){Z.apply(this,arguments)},ce)},count:function(W){var Z=0;return se(W,function(){Z++}),Z},toArray:function(W){return se(W,function(Z){return Z})||[]},only:function(W){if(!Y(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},bt.Component=U,bt.Fragment=n,bt.Profiler=l,bt.PureComponent=q,bt.StrictMode=r,bt.Suspense=b,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,bt.__COMPILER_RUNTIME={__proto__:null,c:function(W){return z.H.useMemoCache(W)}},bt.cache=function(W){return function(){return W.apply(null,arguments)}},bt.cloneElement=function(W,Z,ce){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var oe=M({},W.props),Oe=W.key,qe=void 0;if(Z!=null)for(we in Z.ref!==void 0&&(qe=void 0),Z.key!==void 0&&(Oe=""+Z.key),Z)!ee.call(Z,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&Z.ref===void 0||(oe[we]=Z[we]);var we=arguments.length-2;if(we===1)oe.children=ce;else if(1<we){for(var ht=Array(we),Ge=0;Ge<we;Ge++)ht[Ge]=arguments[Ge+2];oe.children=ht}return X(W.type,Oe,void 0,void 0,qe,oe)},bt.createContext=function(W){return W={$$typeof:h,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:u,_context:W},W},bt.createElement=function(W,Z,ce){var oe,Oe={},qe=null;if(Z!=null)for(oe in Z.key!==void 0&&(qe=""+Z.key),Z)ee.call(Z,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(Oe[oe]=Z[oe]);var we=arguments.length-2;if(we===1)Oe.children=ce;else if(1<we){for(var ht=Array(we),Ge=0;Ge<we;Ge++)ht[Ge]=arguments[Ge+2];Oe.children=ht}if(W&&W.defaultProps)for(oe in we=W.defaultProps,we)Oe[oe]===void 0&&(Oe[oe]=we[oe]);return X(W,qe,void 0,void 0,null,Oe)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(W){return{$$typeof:y,render:W}},bt.isValidElement=Y,bt.lazy=function(W){return{$$typeof:E,_payload:{_status:-1,_result:W},_init:fe}},bt.memo=function(W,Z){return{$$typeof:x,type:W,compare:Z===void 0?null:Z}},bt.startTransition=function(W){var Z=z.T,ce={};z.T=ce;try{var oe=W(),Oe=z.S;Oe!==null&&Oe(ce,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(Ue,Ie)}catch(qe){Ie(qe)}finally{z.T=Z}},bt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},bt.use=function(W){return z.H.use(W)},bt.useActionState=function(W,Z,ce){return z.H.useActionState(W,Z,ce)},bt.useCallback=function(W,Z){return z.H.useCallback(W,Z)},bt.useContext=function(W){return z.H.useContext(W)},bt.useDebugValue=function(){},bt.useDeferredValue=function(W,Z){return z.H.useDeferredValue(W,Z)},bt.useEffect=function(W,Z,ce){var oe=z.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(W,Z)},bt.useId=function(){return z.H.useId()},bt.useImperativeHandle=function(W,Z,ce){return z.H.useImperativeHandle(W,Z,ce)},bt.useInsertionEffect=function(W,Z){return z.H.useInsertionEffect(W,Z)},bt.useLayoutEffect=function(W,Z){return z.H.useLayoutEffect(W,Z)},bt.useMemo=function(W,Z){return z.H.useMemo(W,Z)},bt.useOptimistic=function(W,Z){return z.H.useOptimistic(W,Z)},bt.useReducer=function(W,Z,ce){return z.H.useReducer(W,Z,ce)},bt.useRef=function(W){return z.H.useRef(W)},bt.useState=function(W){return z.H.useState(W)},bt.useSyncExternalStore=function(W,Z,ce){return z.H.useSyncExternalStore(W,Z,ce)},bt.useTransition=function(){return z.H.useTransition()},bt.version="19.1.0",bt}var J2;function jh(){return J2||(J2=1,Z1.exports=h4()),Z1.exports}var R=jh();const ot=km(R),eb=u3({__proto__:null,default:ot},[R]),g4=(t,e,n,r)=>{var u,h,y,b;const l=[n,{code:e,...r||{}}];if((h=(u=t==null?void 0:t.services)==null?void 0:u.logger)!=null&&h.forward)return t.services.logger.forward(l,"warn","react-i18next::",!0);tl(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),(b=(y=t==null?void 0:t.services)==null?void 0:y.logger)!=null&&b.warn?t.services.logger.warn(...l):console!=null&&console.warn&&console.warn(...l)},tb={},Dg=(t,e,n,r)=>{tl(n)&&tb[n]||(tl(n)&&(tb[n]=new Date),g4(t,e,n,r))},h3=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},Lg=(t,e,n)=>{t.loadNamespaces(e,h3(t,n))},nb=(t,e,n,r)=>{if(tl(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Lg(t,n,r);n.forEach(l=>{t.options.ns.indexOf(l)<0&&t.options.ns.push(l)}),t.loadLanguages(e,h3(t,r))},m4=(t,e,n={})=>!e.languages||!e.languages.length?(Dg(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,l)=>{var u;if(((u=n.bindI18n)==null?void 0:u.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!l(r.isLanguageChangingTo,t))return!1}}),tl=t=>typeof t=="string",p4=t=>typeof t=="object"&&t!==null,x4=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,y4={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},b4=t=>y4[t],w4=t=>t.replace(x4,b4);let kg={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:w4};const v4=(t={})=>{kg={...kg,...t}},E4=()=>kg;let g3;const S4=t=>{g3=t},C4=()=>g3,A4={type:"3rdParty",init(t){v4(t.options.react),S4(t)}},T4=R.createContext();class _4{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const N4=(t,e)=>{const n=R.useRef();return R.useEffect(()=>{n.current=t},[t,e]),n.current},m3=(t,e,n,r)=>t.getFixedT(e,n,r),R4=(t,e,n,r)=>R.useCallback(m3(t,e,n,r),[t,e,n,r]),zn=(t,e={})=>{var V,z,ee,X;const{i18n:n}=e,{i18n:r,defaultNS:l}=R.useContext(T4)||{},u=n||r||C4();if(u&&!u.reportNamespaces&&(u.reportNamespaces=new _4),!u){Dg(u,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const ae=(be,Te)=>tl(Te)?Te:p4(Te)&&tl(Te.defaultValue)?Te.defaultValue:Array.isArray(be)?be[be.length-1]:be,Y=[ae,{},!1];return Y.t=ae,Y.i18n={},Y.ready=!1,Y}(V=u.options.react)!=null&&V.wait&&Dg(u,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const h={...E4(),...u.options.react,...e},{useSuspense:y,keyPrefix:b}=h;let x=l||((z=u.options)==null?void 0:z.defaultNS);x=tl(x)?[x]:x||["translation"],(X=(ee=u.reportNamespaces).addUsedNamespaces)==null||X.call(ee,x);const E=(u.isInitialized||u.initializedStoreOnce)&&x.every(ae=>m4(ae,u,h)),A=R4(u,e.lng||null,h.nsMode==="fallback"?x:x[0],b),N=()=>A,I=()=>m3(u,e.lng||null,h.nsMode==="fallback"?x:x[0],b),[M,j]=R.useState(N);let U=x.join();e.lng&&(U=`${e.lng}${U}`);const $=N4(U),q=R.useRef(!0);R.useEffect(()=>{const{bindI18n:ae,bindI18nStore:Y}=h;q.current=!0,!E&&!y&&(e.lng?nb(u,e.lng,x,()=>{q.current&&j(I)}):Lg(u,x,()=>{q.current&&j(I)})),E&&$&&$!==U&&q.current&&j(I);const be=()=>{q.current&&j(I)};return ae&&(u==null||u.on(ae,be)),Y&&(u==null||u.store.on(Y,be)),()=>{q.current=!1,u&&(ae==null||ae.split(" ").forEach(Te=>u.off(Te,be))),Y&&u&&Y.split(" ").forEach(Te=>u.store.off(Te,be))}},[u,U]),R.useEffect(()=>{q.current&&E&&j(N)},[u,b,E]);const B=[M,u,E];if(B.t=M,B.i18n=u,B.ready=E,E||!E&&!y)return B;throw new Promise(ae=>{e.lng?nb(u,e.lng,x,()=>ae()):Lg(u,x,()=>ae())})},O4="Welcome",I4="Login",M4="Logout",D4="Select at least one course.",L4="Please enter a nick name.",k4="Student {{nick}} added!",j4="Application submitted!",B4="Thank you!",P4="Your application has been received.",U4="Our staff will contact you via LINE or phone.",F4="You may close this page.",V4="Wonder Kids Admissions",z4="Fill out the application form below. {{staffMsg}}",H4="Students will be enrolled instantly.",$4="Our staff will contact you to confirm your admission.",G4="Student Info",q4="Nick Name",Y4="First Name",X4="Last Name",W4="Date of Birth",K4="Parent / Guardian",Z4="Line App ID",Q4="Phone",J4="Courses",e5="Loading courses",t5="No courses available.",n5="({{count}} seats)",i5="+ Time",s5="Hours Purchased:",r5="Payment Receipt",a5="Choose Files",o5="Adding",l5="Add Student",c5="Submitting",u5="Submit Application",f5="Refresh Public Admissions Link",d5="Show Public Admissions Link",h5="Copy",g5="Loading pending",m5="Pending Check-ins",p5="No pending check-ins.",x5="Take Attendance",y5="Loading students",b5="Student",w5="Slots",v5="Used / Limit",E5="Check",S5="",C5="Student QR Code",A5="Download",T5="Print",_5="Close",N5="Approve",R5="Unchecked {{first}} {{last}}",O5="Over limit for {{first}} {{last}}",I5="Checked in {{first}} {{last}}",M5="Unknown code",D5="{{first}} {{last}} already scanned",L5="Scan failed",k5="Pending: {{first}} {{last}}",j5="Billing Page (coming soon)",B5="Check Courses",P5="Manage Courses",U5="Select Course",F5="Select Day",V5="Select Time",z5="Loading",H5="No students found.",$5="Nick name",G5="Full name",q5="Course",Y5="Days",X5="Times",W5="Capacity",K5="Edit",Z5="+ Add Course",Q5="Edit Course",J5="New Course",eT="Name",tT="Days:",nT="{{day}} Times:",iT="Save",sT="Cancel",rT="Enter a name",aT="Delete this course?",oT="Monday",lT="Tuesday",cT="Wednesday",uT="Thursday",fT="Friday",dT="Saturday",hT="Sunday",gT="Add New Student",mT="Students (active)",pT="Students (inactive)",xT="Review",yT="Fast, beautiful, mobile-friendly management for your school.",bT="Scan Student QR",wT="Scan another",vT="Sign In",ET="Signing In",ST="Email",CT="Password",AT="you@example.com",TT="No notifications.",_T="Read",NT="New application  {{name}}",RT="Course limit reached  {{name}}",OT="Edit request from {{name}}",IT="New Applications",MT="Renewals",DT="Course Changes",LT="Select All",kT="Unselect All",jT="Reject",BT="Approve {{count}} item(s)?",PT="Reject (delete) {{count}} item(s)?",UT="Submitted by",FT="Line ID",VT="Submitted at",zT="Hours",HT="Open",$T="Receipts",GT="View Receipts ({{count}})",qT="Settings",YT="Close",XT="Invite User",WT="Temp password",KT="Role",ZT="Staff",QT="Admin",JT="Send Invite",e6="Inviting",t6="Team Members",n6="No users.",i6="Edit User",s6="E-mail (read-only)",r6="Saving",a6="Auth returned no user id",o6="Remove this staff account?",l6="Staff",c6="Admin",u6="Home",f6="Reports",d6="Messaging",h6="Billing",g6="Settings",m6="Back",p6="Delete Student",x6="Add New Course",y6="Select...",b6="Day",w6="Time Slot",v6="Hours to Purchase",E6="Upload Receipt",S6="Submit",C6="Not found.",A6="Joined",T6="Enrolled Courses",_6="Days & Times",N6="Hours Left",R6="Status",O6="Receipt",I6="Actions",M6="Attendance",D6="Ongoing",L6="Renewal Needed",k6="View",j6="Hide",B6="Renew",P6="Delete student?",U6="Attendance History",F6="No records",V6="Renew {{course}}",z6="Add-course request submitted.",H6="Renewal request submitted.",$6="Cancelled",G6="Edit Day",q6="Edit Time",Y6="Profile information missing. Please reload and try again.",X6="Students (Inactive)",W6="Search students",K6="Parent Phone",Z6="Line ID",Q6="Action",J6="Renew Enrollment",e8="All fields are required.",t8="Failed to upload the file.",n8="Renew Now",i8="Submit Renewal Request",s8="Export Students ({{count}})",r8="Export CSV",a8="Students",o8="No.",l8="{{count}} hours",c8="Select hour package",u8="Please select an hour package for each course.",f8="Total",d8="Show details",h8="Hide details",g8="baht",m8="Cancellations",p8="No receipt uploaded",x8="Cancel course",y8="Course cancellation request submitted for review.",b8="Cancel this course?",w8="Submit cancellation",v8="Cancellation pending approval",E8="Course cancelled",S8="Cancellation request rejected",C8="Purchased Packages",A8="Price",T8="Hour Packages",_8="No packages defined",N8="+ Add Package",R8="Times for {{day}}",O8="Course Name",I8="Choose a course to see students",M8="Inactive",D8="Students (Inactive)",L8="Used",k8="Purchased",j8={welcome:O4,login:I4,logout:M4,selectCourseError:D4,enterNickError:L4,studentAdded:k4,applicationSubmitted:j4,thankYou:B4,applicationReceived:P4,staffWillContact:U4,youMayClose:F4,admissionsTitle:V4,admissionsIntro:z4,enrollInstant:H4,contactToConfirm:$4,studentInfo:G4,nickName:q4,firstName:Y4,lastName:X4,dob:W4,guardian:K4,lineAppId:Z4,phone:Q4,courses:J4,loadingCourses:e5,noCourses:t5,seats:n5,addTime:i5,hoursPurchased:s5,paymentReceipt:r5,chooseFiles:a5,adding:o5,addStudent:l5,submitting:c5,submitApplication:u5,refreshPublicAdmissionsLink:f5,showPublicAdmissionsLink:d5,copy:h5,loadingPending:g5,pendingCheckins:m5,noPendingCheckins:p5,takeAttendance:x5,loadingStudents:y5,student:b5,slots:w5,usedLimit:v5,check:E5,unlimited:S5,studentQrCode:C5,download:A5,print:T5,close:_5,approve:N5,uncheckedStudent:R5,overLimit:O5,checkedInStudent:I5,unknownCode:M5,alreadyScanned:D5,scanFailed:L5,pendingStudent:k5,billingComingSoon:j5,checkCourses:B5,manageCourses:P5,selectCourse:U5,selectDay:F5,selectTime:V5,loading:z5,noStudentsFound:H5,nickname:$5,fullName:G5,course:q5,days:Y5,times:X5,capacity:W5,edit:K5,delete:"Delete",addCourse:Z5,editCourse:Q5,newCourse:J5,name:eT,daysColon:tT,timesColon:nT,save:iT,cancel:sT,enterName:rT,deleteThisCourse:aT,monday:oT,tuesday:lT,wednesday:cT,thursday:uT,friday:fT,saturday:dT,sunday:hT,addNewStudent:gT,studentsActive:mT,studentsInactive:pT,review:xT,homepageSlogan:yT,scanStudentQr:bT,scanAnother:wT,signIn:vT,signingIn:ET,email:ST,password:CT,emailPlaceholder:AT,noNotifications:TT,markRead:_T,newApplication:NT,courseLimitReached:RT,editRequestFrom:OT,newApplications:IT,renewals:MT,courseChanges:DT,selectAll:LT,unselectAll:kT,reject:jT,approveConfirm:BT,rejectConfirm:PT,submittedBy:UT,lineId:FT,submittedAt:VT,hours:zT,open:HT,receipts:$T,viewReceipts:GT,settingsTitle:qT,closeInvite:YT,inviteUser:XT,tempPassword:WT,role:KT,roleStaff:ZT,roleAdmin:QT,sendInvite:JT,inviting:e6,teamMembers:t6,noUsers:n6,editUser:i6,emailReadOnly:s6,saving:r6,noUserIdError:a6,confirmRemoveStaff:o6,role_staff:l6,role_admin:c6,home:u6,reports:f6,messaging:d6,billing:h6,settings:g6,back:m6,deleteStudent:p6,addNewCourse:x6,select:y6,day:b6,timeSlot:w6,hoursToPurchase:v6,uploadReceipt:E6,submit:S6,studentNotFound:C6,joined:A6,enrolledCourses:T6,daysTimes:_6,hoursLeft:N6,status:R6,receipt:O6,actions:I6,attendance:M6,ongoing:D6,renewalNeeded:L6,view:k6,hide:j6,renew:B6,deleteStudentConfirm:P6,attendanceHistory:U6,noRecords:F6,submitRenew:V6,submitAdd:z6,submitRenewal:H6,cancelled:$6,editDay:G6,editTime:q6,profileMissingError:Y6,inactiveStudents:X6,searchStudents:W6,export:"Export",parentPhone:K6,lineID:Z6,action:Q6,renewEnrollment:J6,allFieldsRequired:e8,uploadError:t8,renewNow:n8,submitRenewalRequest:i8,exportStudents:s8,exportCSV:r8,students:a8,no:o8,hoursLabel:l8,chooseHourPackage:c8,selectHourPackageError:u8,totalPrice:f8,showDetail:d8,hideDetail:h8,baht:g8,cancellations:m8,noReceipt:p8,cancelCourse:x8,cancelRequest:y8,cancelConfirm:b8,cancelSubmit:w8,cancelPending:v8,cancelApproved:E8,cancelRejected:S8,purchasedPackages:C8,price:A8,hourPackages:T8,noPackagesDefined:_8,addPackage:N8,timesForDay:R8,courseName:O8,chooseCourseToSeeStudents:I8,inactive:M8,studentsNeedingRenewal:D8,used:L8,purchased:k8},B8="",P8="",U8="",F8=" 1 ",V8="",z8=" {{nick}} !",H8="!",$8="!",G8="",q8=" LINE ",Y8="",X8="",W8=" {{staffMsg}}",K8="",Z8="",Q8="",J8="",e_="",t_="",n_="",i_="",s_="LINE ID",r_="",a_="",o_="",l_="",c_="({{count}} )",u_="+ ",f_=":",d_="",h_="",g_="",m_="",p_="",x_="",y_="",b_="",w_="",v_="",E_="",S_="",C_="",A_="",T_="",__="",N_=" / ",R_="",O_="",I_="",M_="",D_="",L_="",k_="",j_=" {{first}} {{last}}",B_=" {{first}} {{last}}",P_=" {{first}} {{last}}",U_="",F_="{{first}} {{last}} ",V_="",z_=": {{first}} {{last}}",H_=" (  )",$_="",G_="",q_="",Y_="",X_="",W_="",K_="",Z_="",Q_="-",J_="",eN="",tN="",nN="",iN="",sN="+ ",rN="",aN="",oN="",lN=":",cN="{{day}} :",uN="",fN="",dN="",hN="?",gN="",mN="",pN="",xN="",yN="",bN="",wN="",vN="",EN=" ()",SN=" ()",CN="",AN="  ",TN=" QR ",_N="",NN="",RN="",ON="",IN="",MN="you@example.com",DN="",LN="",kN="  {{name}}",jN="  {{name}}",BN=" {{name}}",PN="",UN="",FN="",VN="",zN="",HN="",$N=" {{count}} ?",GN=" () {{count}} ?",qN="",YN="",XN="",WN="",KN="",ZN="",QN=" ({{count}})",JN="",eR="",tR="",nR="",iR="",sR="",rR="",aR="",oR="",lR="",cR="",uR="",fR=" ()",dR="",hR="",gR="?",mR="",pR="",xR="",yR="",bR="",wR="",vR="",ER="",SR="",CR="",AR="...",TR="",_R="",NR="",RR="",OR="",IR="",MR="",DR="",LR="",kR="",jR="",BR="",PR="",UR="",FR="",VR="",zR="",HR="",$R="",GR="?",qR="",YR="",XR=" {{course}}",WR="",KR="",ZR="",QR="",JR="",e7=" ",t7=" ()",n7="",i7="",s7="",r7="",a7="",o7="",l7="",c7="",u7=" ({{count}})",f7=" CSV",d7="",h7="",g7="{{count}} ",m7="",p7="",x7="",y7="",b7="",w7="",v7="",E7="",S7="",C7=" ",A7="?",T7="",_7="",N7="",R7="",O7="",I7="",M7="",D7="",L7="+ ",k7="{{day}}",j7="",B7="",P7="",U7="",F7="",V7="",z7="/",H7={welcome:B8,login:P8,logout:U8,selectCourseError:F8,enterNickError:V8,studentAdded:z8,applicationSubmitted:H8,thankYou:$8,applicationReceived:G8,staffWillContact:q8,youMayClose:Y8,admissionsTitle:X8,admissionsIntro:W8,enrollInstant:K8,contactToConfirm:Z8,studentInfo:Q8,nickName:J8,firstName:e_,lastName:t_,dob:n_,guardian:i_,lineAppId:s_,phone:r_,courses:a_,loadingCourses:o_,noCourses:l_,seats:c_,addTime:u_,hoursPurchased:f_,paymentReceipt:d_,chooseFiles:h_,adding:g_,addStudent:m_,submitting:p_,submitApplication:x_,refreshPublicAdmissionsLink:y_,showPublicAdmissionsLink:b_,copy:w_,loadingPending:v_,pendingCheckins:E_,noPendingCheckins:S_,takeAttendance:C_,loadingStudents:A_,student:T_,slots:__,usedLimit:N_,check:R_,unlimited:O_,studentQrCode:I_,download:M_,print:D_,close:L_,approve:k_,uncheckedStudent:j_,overLimit:B_,checkedInStudent:P_,unknownCode:U_,alreadyScanned:F_,scanFailed:V_,pendingStudent:z_,billingComingSoon:H_,checkCourses:$_,manageCourses:G_,selectCourse:q_,selectDay:Y_,selectTime:X_,loading:W_,noStudentsFound:K_,nickname:Z_,fullName:Q_,course:J_,days:eN,times:tN,capacity:nN,edit:iN,delete:"",addCourse:sN,editCourse:rN,newCourse:aN,name:oN,daysColon:lN,timesColon:cN,save:uN,cancel:fN,enterName:dN,deleteThisCourse:hN,monday:gN,tuesday:mN,wednesday:pN,thursday:xN,friday:yN,saturday:bN,sunday:wN,addNewStudent:vN,studentsActive:EN,studentsInactive:SN,review:CN,homepageSlogan:AN,scanStudentQr:TN,scanAnother:_N,signIn:NN,signingIn:RN,email:ON,password:IN,emailPlaceholder:MN,noNotifications:DN,markRead:LN,newApplication:kN,courseLimitReached:jN,editRequestFrom:BN,newApplications:PN,renewals:UN,courseChanges:FN,selectAll:VN,unselectAll:zN,reject:HN,approveConfirm:$N,rejectConfirm:GN,submittedBy:qN,lineId:YN,submittedAt:XN,hours:WN,open:KN,receipts:ZN,viewReceipts:QN,settingsTitle:JN,closeInvite:eR,inviteUser:tR,tempPassword:nR,role:iR,roleStaff:sR,roleAdmin:rR,sendInvite:aR,inviting:oR,teamMembers:lR,noUsers:cR,editUser:uR,emailReadOnly:fR,saving:dR,noUserIdError:hR,confirmRemoveStaff:gR,role_staff:mR,role_admin:pR,home:xR,reports:yR,messaging:bR,billing:wR,settings:vR,back:ER,deleteStudent:SR,addNewCourse:CR,select:AR,day:TR,timeSlot:_R,hoursToPurchase:NR,uploadReceipt:RR,submit:OR,studentNotFound:IR,joined:MR,enrolledCourses:DR,daysTimes:LR,hoursLeft:kR,status:jR,receipt:BR,actions:PR,attendance:UR,ongoing:FR,renewalNeeded:VR,view:zR,hide:HR,renew:$R,deleteStudentConfirm:GR,attendanceHistory:qR,noRecords:YR,submitRenew:XR,submitAdd:WR,submitRenewal:KR,cancelled:ZR,editDay:QR,editTime:JR,profileMissingError_th:e7,inactiveStudents:t7,searchStudents:n7,export:"",parentPhone:i7,lineID:s7,action:r7,allFieldsRequired:a7,uploadError:o7,renewNow:l7,submitRenewalRequest:c7,exportStudents:u7,exportCSV:f7,students:d7,no:h7,hoursLabel:g7,chooseHourPackage:m7,selectHourPackageError:p7,totalPrice:x7,showDetail:y7,hideDetail:b7,baht:w7,cancellations:v7,noReceipt:E7,cancelCourse:S7,cancelRequest:C7,cancelConfirm:A7,cancelSubmit:T7,cancelPending:_7,cancelApproved:N7,cancelRejected:R7,purchasedPackages:O7,price:I7,hourPackages:M7,noPackagesDefined:D7,addPackage:L7,timesForDay:k7,courseName:j7,chooseCourseToSeeStudents:B7,inactive:P7,used:U7,purchased:F7,studentsNeedingRenewal:V7,usedPurchased:z7},$7=typeof window<"u"&&localStorage.getItem("lang"),ib="en";Qn.use(A4).init({resources:{en:{translation:j8},th:{translation:H7}},lng:$7||ib,fallbackLng:ib,interpolation:{escapeValue:!1}});typeof window<"u"&&(window.i18n=Qn);var Q1={exports:{}},Mu={},J1={exports:{}},eg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sb;function G7(){return sb||(sb=1,function(t){function e(se,fe){var Ie=se.length;se.push(fe);e:for(;0<Ie;){var Ue=Ie-1>>>1,W=se[Ue];if(0<l(W,fe))se[Ue]=fe,se[Ie]=W,Ie=Ue;else break e}}function n(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var fe=se[0],Ie=se.pop();if(Ie!==fe){se[0]=Ie;e:for(var Ue=0,W=se.length,Z=W>>>1;Ue<Z;){var ce=2*(Ue+1)-1,oe=se[ce],Oe=ce+1,qe=se[Oe];if(0>l(oe,Ie))Oe<W&&0>l(qe,oe)?(se[Ue]=qe,se[Oe]=Ie,Ue=Oe):(se[Ue]=oe,se[ce]=Ie,Ue=ce);else if(Oe<W&&0>l(qe,Ie))se[Ue]=qe,se[Oe]=Ie,Ue=Oe;else break e}}return fe}function l(se,fe){var Ie=se.sortIndex-fe.sortIndex;return Ie!==0?Ie:se.id-fe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var h=Date,y=h.now();t.unstable_now=function(){return h.now()-y}}var b=[],x=[],E=1,A=null,N=3,I=!1,M=!1,j=!1,U=!1,$=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function V(se){for(var fe=n(x);fe!==null;){if(fe.callback===null)r(x);else if(fe.startTime<=se)r(x),fe.sortIndex=fe.expirationTime,e(b,fe);else break;fe=n(x)}}function z(se){if(j=!1,V(se),!M)if(n(b)!==null)M=!0,ee||(ee=!0,ve());else{var fe=n(x);fe!==null&&ie(z,fe.startTime-se)}}var ee=!1,X=-1,ae=5,Y=-1;function be(){return U?!0:!(t.unstable_now()-Y<ae)}function Te(){if(U=!1,ee){var se=t.unstable_now();Y=se;var fe=!0;try{e:{M=!1,j&&(j=!1,q(X),X=-1),I=!0;var Ie=N;try{t:{for(V(se),A=n(b);A!==null&&!(A.expirationTime>se&&be());){var Ue=A.callback;if(typeof Ue=="function"){A.callback=null,N=A.priorityLevel;var W=Ue(A.expirationTime<=se);if(se=t.unstable_now(),typeof W=="function"){A.callback=W,V(se),fe=!0;break t}A===n(b)&&r(b),V(se)}else r(b);A=n(b)}if(A!==null)fe=!0;else{var Z=n(x);Z!==null&&ie(z,Z.startTime-se),fe=!1}}break e}finally{A=null,N=Ie,I=!1}fe=void 0}}finally{fe?ve():ee=!1}}}var ve;if(typeof B=="function")ve=function(){B(Te)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ke=le.port2;le.port1.onmessage=Te,ve=function(){ke.postMessage(null)}}else ve=function(){$(Te,0)};function ie(se,fe){X=$(function(){se(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(se){se.callback=null},t.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<se?Math.floor(1e3/se):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_next=function(se){switch(N){case 1:case 2:case 3:var fe=3;break;default:fe=N}var Ie=N;N=fe;try{return se()}finally{N=Ie}},t.unstable_requestPaint=function(){U=!0},t.unstable_runWithPriority=function(se,fe){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var Ie=N;N=se;try{return fe()}finally{N=Ie}},t.unstable_scheduleCallback=function(se,fe,Ie){var Ue=t.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?Ue+Ie:Ue):Ie=Ue,se){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Ie+W,se={id:E++,callback:fe,priorityLevel:se,startTime:Ie,expirationTime:W,sortIndex:-1},Ie>Ue?(se.sortIndex=Ie,e(x,se),n(b)===null&&se===n(x)&&(j?(q(X),X=-1):j=!0,ie(z,Ie-Ue))):(se.sortIndex=W,e(b,se),M||I||(M=!0,ee||(ee=!0,ve()))),se},t.unstable_shouldYield=be,t.unstable_wrapCallback=function(se){var fe=N;return function(){var Ie=N;N=fe;try{return se.apply(this,arguments)}finally{N=Ie}}}}(eg)),eg}var rb;function q7(){return rb||(rb=1,J1.exports=G7()),J1.exports}var tg={exports:{}},vi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ab;function Y7(){if(ab)return vi;ab=1;var t=jh();function e(b){var x="https://react.dev/errors/"+b;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)x+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+b+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(b,x,E){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:A==null?null:""+A,children:b,containerInfo:x,implementation:E}}var h=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(b,x){if(b==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return vi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vi.createPortal=function(b,x){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(b,x,null,E)},vi.flushSync=function(b){var x=h.T,E=r.p;try{if(h.T=null,r.p=2,b)return b()}finally{h.T=x,r.p=E,r.d.f()}},vi.preconnect=function(b,x){typeof b=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(b,x))},vi.prefetchDNS=function(b){typeof b=="string"&&r.d.D(b)},vi.preinit=function(b,x){if(typeof b=="string"&&x&&typeof x.as=="string"){var E=x.as,A=y(E,x.crossOrigin),N=typeof x.integrity=="string"?x.integrity:void 0,I=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;E==="style"?r.d.S(b,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:A,integrity:N,fetchPriority:I}):E==="script"&&r.d.X(b,{crossOrigin:A,integrity:N,fetchPriority:I,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},vi.preinitModule=function(b,x){if(typeof b=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var E=y(x.as,x.crossOrigin);r.d.M(b,{crossOrigin:E,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(b)},vi.preload=function(b,x){if(typeof b=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var E=x.as,A=y(E,x.crossOrigin);r.d.L(b,E,{crossOrigin:A,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},vi.preloadModule=function(b,x){if(typeof b=="string")if(x){var E=y(x.as,x.crossOrigin);r.d.m(b,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:E,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(b)},vi.requestFormReset=function(b){r.d.r(b)},vi.unstable_batchedUpdates=function(b,x){return b(x)},vi.useFormState=function(b,x,E){return h.H.useFormState(b,x,E)},vi.useFormStatus=function(){return h.H.useHostTransitionStatus()},vi.version="19.1.0",vi}var ob;function p3(){if(ob)return tg.exports;ob=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),tg.exports=Y7(),tg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lb;function X7(){if(lb)return Mu;lb=1;var t=q7(),e=jh(),n=p3();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)a+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function u(i){var a=i,f=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(f=a.return),i=a.return;while(i)}return a.tag===3?f:null}function h(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function y(i){if(u(i)!==i)throw Error(r(188))}function b(i){var a=i.alternate;if(!a){if(a=u(i),a===null)throw Error(r(188));return a!==i?null:i}for(var f=i,m=a;;){var v=f.return;if(v===null)break;var T=v.alternate;if(T===null){if(m=v.return,m!==null){f=m;continue}break}if(v.child===T.child){for(T=v.child;T;){if(T===f)return y(v),i;if(T===m)return y(v),a;T=T.sibling}throw Error(r(188))}if(f.return!==m.return)f=v,m=T;else{for(var D=!1,F=v.child;F;){if(F===f){D=!0,f=v,m=T;break}if(F===m){D=!0,m=v,f=T;break}F=F.sibling}if(!D){for(F=T.child;F;){if(F===f){D=!0,f=T,m=v;break}if(F===m){D=!0,m=T,f=v;break}F=F.sibling}if(!D)throw Error(r(189))}}if(f.alternate!==m)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?i:a}function x(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=x(i),a!==null)return a;i=i.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),B=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),be=Symbol.for("react.memo_cache_sentinel"),Te=Symbol.iterator;function ve(i){return i===null||typeof i!="object"?null:(i=Te&&i[Te]||i["@@iterator"],typeof i=="function"?i:null)}var le=Symbol.for("react.client.reference");function ke(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===le?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case U:return"Profiler";case j:return"StrictMode";case z:return"Suspense";case ee:return"SuspenseList";case Y:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case I:return"Portal";case B:return(i.displayName||"Context")+".Provider";case q:return(i._context.displayName||"Context")+".Consumer";case V:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case X:return a=i.displayName||null,a!==null?a:ke(i.type)||"Memo";case ae:a=i._payload,i=i._init;try{return ke(i(a))}catch{}}return null}var ie=Array.isArray,se=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie={pending:!1,data:null,method:null,action:null},Ue=[],W=-1;function Z(i){return{current:i}}function ce(i){0>W||(i.current=Ue[W],Ue[W]=null,W--)}function oe(i,a){W++,Ue[W]=i.current,i.current=a}var Oe=Z(null),qe=Z(null),we=Z(null),ht=Z(null);function Ge(i,a){switch(oe(we,a),oe(qe,i),oe(Oe,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?c2(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=c2(a),i=u2(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ce(Oe),oe(Oe,i)}function It(){ce(Oe),ce(qe),ce(we)}function bn(i){i.memoizedState!==null&&oe(ht,i);var a=Oe.current,f=u2(a,i.type);a!==f&&(oe(qe,i),oe(Oe,f))}function _e(i){qe.current===i&&(ce(Oe),ce(qe)),ht.current===i&&(ce(ht),Au._currentValue=Ie)}var Be=Object.prototype.hasOwnProperty,je=t.unstable_scheduleCallback,tt=t.unstable_cancelCallback,Ke=t.unstable_shouldYield,pt=t.unstable_requestPaint,lt=t.unstable_now,xt=t.unstable_getCurrentPriorityLevel,gt=t.unstable_ImmediatePriority,cs=t.unstable_UserBlockingPriority,ze=t.unstable_NormalPriority,wr=t.unstable_LowPriority,ia=t.unstable_IdlePriority,Li=t.log,sa=t.unstable_setDisableYieldValue,kn=null,Le=null;function nt(i){if(typeof Li=="function"&&sa(i),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(kn,i)}catch{}}var Ze=Math.clz32?Math.clz32:Ut,Pt=Math.log,ln=Math.LN2;function Ut(i){return i>>>=0,i===0?32:31-(Pt(i)/ln|0)|0}var vt=256,Me=4194304;function Dt(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Tt(i,a,f){var m=i.pendingLanes;if(m===0)return 0;var v=0,T=i.suspendedLanes,D=i.pingedLanes;i=i.warmLanes;var F=m&134217727;return F!==0?(m=F&~T,m!==0?v=Dt(m):(D&=F,D!==0?v=Dt(D):f||(f=F&~i,f!==0&&(v=Dt(f))))):(F=m&~T,F!==0?v=Dt(F):D!==0?v=Dt(D):f||(f=m&~i,f!==0&&(v=Dt(f)))),v===0?0:a!==0&&a!==v&&(a&T)===0&&(T=v&-v,f=a&-a,T>=f||T===32&&(f&4194048)!==0)?a:v}function jt(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function ki(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gi(){var i=vt;return vt<<=1,(vt&4194048)===0&&(vt=256),i}function ra(){var i=Me;return Me<<=1,(Me&62914560)===0&&(Me=4194304),i}function Ct(i){for(var a=[],f=0;31>f;f++)a.push(i);return a}function Wi(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Lf(i,a,f,m,v,T){var D=i.pendingLanes;i.pendingLanes=f,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=f,i.entangledLanes&=f,i.errorRecoveryDisabledLanes&=f,i.shellSuspendCounter=0;var F=i.entanglements,K=i.expirationTimes,ge=i.hiddenUpdates;for(f=D&~f;0<f;){var Ee=31-Ze(f),Ce=1<<Ee;F[Ee]=0,K[Ee]=-1;var me=ge[Ee];if(me!==null)for(ge[Ee]=null,Ee=0;Ee<me.length;Ee++){var xe=me[Ee];xe!==null&&(xe.lane&=-536870913)}f&=~Ce}m!==0&&Bc(i,m,0),T!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=T&~(D&~a))}function Bc(i,a,f){i.pendingLanes|=a,i.suspendedLanes&=~a;var m=31-Ze(a);i.entangledLanes|=a,i.entanglements[m]=i.entanglements[m]|1073741824|f&4194090}function ji(i,a){var f=i.entangledLanes|=a;for(i=i.entanglements;f;){var m=31-Ze(f),v=1<<m;v&a|i[m]&a&&(i[m]|=a),f&=~v}}function fo(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function jn(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function vr(){var i=fe.p;return i!==0?i:(i=window.event,i===void 0?32:R2(i.type))}function fl(i,a){var f=fe.p;try{return fe.p=i,a()}finally{fe.p=f}}var Hn=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Hn,wn="__reactProps$"+Hn,qs="__reactContainer$"+Hn,ei="__reactEvents$"+Hn,Er="__reactListeners$"+Hn,Bi="__reactHandles$"+Hn,Fe="__reactResources$"+Hn,us="__reactMarker$"+Hn;function ho(i){delete i[Jn],delete i[wn],delete i[ei],delete i[Er],delete i[Bi]}function Nn(i){var a=i[Jn];if(a)return a;for(var f=i.parentNode;f;){if(a=f[qs]||f[Jn]){if(f=a.alternate,a.child!==null||f!==null&&f.child!==null)for(i=g2(i);i!==null;){if(f=i[Jn])return f;i=g2(i)}return a}i=f,f=i.parentNode}return null}function Ki(i){if(i=i[Jn]||i[qs]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Ys(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function Rs(i){var a=i[Fe];return a||(a=i[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function qt(i){i[us]=!0}var kf=new Set,jf={};function ti(i,a){vn(i,a),vn(i+"Capture",a)}function vn(i,a){for(jf[i]=a,i=0;i<a.length;i++)kf.add(a[i])}var rn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pc={},Os={};function Uc(i){return Be.call(Os,i)?!0:Be.call(Pc,i)?!1:rn.test(i)?Os[i]=!0:(Pc[i]=!0,!1)}function Ae(i,a,f){if(Uc(a))if(f===null)i.removeAttribute(a);else{switch(typeof f){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var m=a.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+f)}}function dl(i,a,f){if(f===null)i.removeAttribute(a);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+f)}}function Ft(i,a,f,m){if(m===null)i.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(f);return}i.setAttributeNS(a,f,""+m)}}var Xs,Bf;function _t(i){if(Xs===void 0)try{throw Error()}catch(f){var a=f.stack.trim().match(/\n( *(at )?)/);Xs=a&&a[1]||"",Bf=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xs+i+Bf}var Lt=!1;function Et(i,a){if(!i||Lt)return"";Lt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(a){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(xe){var me=xe}Reflect.construct(i,[],Ce)}else{try{Ce.call()}catch(xe){me=xe}i.call(Ce.prototype)}}else{try{throw Error()}catch(xe){me=xe}(Ce=i())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(xe){if(xe&&me&&typeof xe.stack=="string")return[xe.stack,me.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=m.DetermineComponentFrameRoot(),D=T[0],F=T[1];if(D&&F){var K=D.split(`
`),ge=F.split(`
`);for(v=m=0;m<K.length&&!K[m].includes("DetermineComponentFrameRoot");)m++;for(;v<ge.length&&!ge[v].includes("DetermineComponentFrameRoot");)v++;if(m===K.length||v===ge.length)for(m=K.length-1,v=ge.length-1;1<=m&&0<=v&&K[m]!==ge[v];)v--;for(;1<=m&&0<=v;m--,v--)if(K[m]!==ge[v]){if(m!==1||v!==1)do if(m--,v--,0>v||K[m]!==ge[v]){var Ee=`
`+K[m].replace(" at new "," at ");return i.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",i.displayName)),Ee}while(1<=m&&0<=v);break}}}finally{Lt=!1,Error.prepareStackTrace=f}return(f=i?i.displayName||i.name:"")?_t(f):""}function Fc(i){switch(i.tag){case 26:case 27:case 5:return _t(i.type);case 16:return _t("Lazy");case 13:return _t("Suspense");case 19:return _t("SuspenseList");case 0:case 15:return Et(i.type,!1);case 11:return Et(i.type.render,!1);case 1:return Et(i.type,!0);case 31:return _t("Activity");default:return""}}function hl(i){try{var a="";do a+=Fc(i),i=i.return;while(i);return a}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function mi(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function En(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ws(i){var a=En(i)?"checked":"value",f=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),m=""+i[a];if(!i.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,T=f.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return v.call(this)},set:function(D){m=""+D,T.call(this,D)}}),Object.defineProperty(i,a,{enumerable:f.enumerable}),{getValue:function(){return m},setValue:function(D){m=""+D},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function gl(i){i._valueTracker||(i._valueTracker=Ws(i))}function fn(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var f=a.getValue(),m="";return i&&(m=En(i)?i.checked?"true":"false":i.value),i=m,i!==f?(a.setValue(i),!0):!1}function Zi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var e0=/[\n"\\]/g;function $n(i){return i.replace(e0,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ht(i,a,f,m,v,T,D,F){i.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.type=D:i.removeAttribute("type"),a!=null?D==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+mi(a)):i.value!==""+mi(a)&&(i.value=""+mi(a)):D!=="submit"&&D!=="reset"||i.removeAttribute("value"),a!=null?de(i,D,mi(a)):f!=null?de(i,D,mi(f)):m!=null&&i.removeAttribute("value"),v==null&&T!=null&&(i.defaultChecked=!!T),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?i.name=""+mi(F):i.removeAttribute("name")}function Gn(i,a,f,m,v,T,D,F){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.type=T),a!=null||f!=null){if(!(T!=="submit"&&T!=="reset"||a!=null))return;f=f!=null?""+mi(f):"",a=a!=null?""+mi(a):f,F||a===i.value||(i.value=a),i.defaultValue=a}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=F?i.checked:!!m,i.defaultChecked=!!m,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(i.name=D)}function de(i,a,f){a==="number"&&Zi(i.ownerDocument)===i||i.defaultValue===""+f||(i.defaultValue=""+f)}function H(i,a,f,m){if(i=i.options,a){a={};for(var v=0;v<f.length;v++)a["$"+f[v]]=!0;for(f=0;f<i.length;f++)v=a.hasOwnProperty("$"+i[f].value),i[f].selected!==v&&(i[f].selected=v),v&&m&&(i[f].defaultSelected=!0)}else{for(f=""+mi(f),a=null,v=0;v<i.length;v++){if(i[v].value===f){i[v].selected=!0,m&&(i[v].defaultSelected=!0);return}a!==null||i[v].disabled||(a=i[v])}a!==null&&(a.selected=!0)}}function Ye(i,a,f){if(a!=null&&(a=""+mi(a),a!==i.value&&(i.value=a),f==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=f!=null?""+mi(f):""}function Rn(i,a,f,m){if(a==null){if(m!=null){if(f!=null)throw Error(r(92));if(ie(m)){if(1<m.length)throw Error(r(93));m=m[0]}f=m}f==null&&(f=""),a=f}f=mi(a),i.defaultValue=f,m=i.textContent,m===f&&m!==""&&m!==null&&(i.value=m)}function qn(i,a){if(a){var f=i.firstChild;if(f&&f===i.lastChild&&f.nodeType===3){f.nodeValue=a;return}}i.textContent=a}var t0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ml(i,a,f){var m=a.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":m?i.setProperty(a,f):typeof f!="number"||f===0||t0.has(a)?a==="float"?i.cssFloat=f:i[a]=(""+f).trim():i[a]=f+"px"}function _i(i,a,f){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||a!=null&&a.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var v in a)m=a[v],a.hasOwnProperty(v)&&f[v]!==m&&ml(i,v,m)}else for(var T in a)a.hasOwnProperty(T)&&ml(i,T,a[T])}function Xe(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pl(i){return Pf.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var go=null;function aa(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ks=null,oa=null;function On(i){var a=Ki(i);if(a&&(i=a.stateNode)){var f=i[wn]||null;e:switch(i=a.stateNode,a.type){case"input":if(Ht(i,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),a=f.name,f.type==="radio"&&a!=null){for(f=i;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+$n(""+a)+'"][type="radio"]'),a=0;a<f.length;a++){var m=f[a];if(m!==i&&m.form===i.form){var v=m[wn]||null;if(!v)throw Error(r(90));Ht(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<f.length;a++)m=f[a],m.form===i.form&&fn(m)}break e;case"textarea":Ye(i,f.value,f.defaultValue);break e;case"select":a=f.value,a!=null&&H(i,!!f.multiple,a,!1)}}}var Sr=!1;function Is(i,a,f){if(Sr)return i(a,f);Sr=!0;try{var m=i(a);return m}finally{if(Sr=!1,(Ks!==null||oa!==null)&&(Sd(),Ks&&(a=Ks,i=oa,oa=Ks=null,On(a),i)))for(a=0;a<i.length;a++)On(i[a])}}function Qe(i,a){var f=i.stateNode;if(f===null)return null;var m=f[wn]||null;if(m===null)return null;f=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(f&&typeof f!="function")throw Error(r(231,a,typeof f));return f}var Ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ft=!1;if(Ms)try{var pn={};Object.defineProperty(pn,"passive",{get:function(){ft=!0}}),window.addEventListener("test",pn,pn),window.removeEventListener("test",pn,pn)}catch{ft=!1}var Zs=null,mo=null,po=null;function Qs(){if(po)return po;var i,a=mo,f=a.length,m,v="value"in Zs?Zs.value:Zs.textContent,T=v.length;for(i=0;i<f&&a[i]===v[i];i++);var D=f-i;for(m=1;m<=D&&a[f-m]===v[T-m];m++);return po=v.slice(i,1<m?1-m:void 0)}function xl(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Js(){return!0}function la(){return!1}function Bn(i){function a(f,m,v,T,D){this._reactName=f,this._targetInst=v,this.type=m,this.nativeEvent=T,this.target=D,this.currentTarget=null;for(var F in i)i.hasOwnProperty(F)&&(f=i[F],this[F]=f?f(T):T[F]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Js:la,this.isPropagationStopped=la,this}return E(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),a}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tr=Bn(er),Ds=E({},er,{view:0,detail:0}),pi=Bn(Ds),yl,bl,ca,wl=E({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ca&&(ca&&i.type==="mousemove"?(yl=i.screenX-ca.screenX,bl=i.screenY-ca.screenY):bl=yl=0,ca=i),yl)},movementY:function(i){return"movementY"in i?i.movementY:bl}}),Uf=Bn(wl),n0=E({},wl,{dataTransfer:0}),$t=Bn(n0),Ff=E({},Ds,{relatedTarget:0}),ua=Bn(Ff),nr=E({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),i0=Bn(nr),ye=E({},er,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),yt=Bn(ye),Yn=E({},er,{data:0}),xo=Bn(Yn),Vf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a0(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=r0[i])?!!a[i]:!1}function yo(){return a0}var In=E({},Ds,{key:function(i){if(i.key){var a=Vf[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=xl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?s0[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yo,charCode:function(i){return i.type==="keypress"?xl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?xl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Vc=Bn(In),dn=E({},wl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bo=Bn(dn),Cr=E({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yo}),Yt=Bn(Cr),Je=E({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),o0=Bn(Je),tn=E({},wl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ar=Bn(tn),fa=E({},er,{newState:0,oldState:0}),l0=Bn(fa),fs=[9,13,27,32],wo=Ms&&"CompositionEvent"in window,da=null;Ms&&"documentMode"in document&&(da=document.documentMode);var zc=Ms&&"TextEvent"in window&&!da,Hc=Ms&&(!wo||da&&8<da&&11>=da),$c=" ",zf=!1;function Tr(i,a){switch(i){case"keyup":return fs.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ha=!1;function vo(i,a){switch(i){case"compositionend":return vl(a);case"keypress":return a.which!==32?null:(zf=!0,$c);case"textInput":return i=a.data,i===$c&&zf?null:i;default:return null}}function c0(i,a){if(ha)return i==="compositionend"||!wo&&Tr(i,a)?(i=Qs(),po=mo=Zs=null,ha=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Hc&&a.locale!=="ko"?null:a.data;default:return null}}var ir={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eo(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!ir[i.type]:a==="textarea"}function Ni(i,a,f,m){Ks?oa?oa.push(m):oa=[m]:Ks=m,a=Rd(a,"onChange"),0<a.length&&(f=new tr("onChange","change",null,f,m),i.push({event:f,listeners:a}))}var ga=null,xi=null;function u0(i){s2(i,0)}function ma(i){var a=Ys(i);if(fn(a))return i}function Hf(i,a){if(i==="change")return a}var Gc=!1;if(Ms){var Pi;if(Ms){var qc="oninput"in document;if(!qc){var El=document.createElement("div");El.setAttribute("oninput","return;"),qc=typeof El.oninput=="function"}Pi=qc}else Pi=!1;Gc=Pi&&(!document.documentMode||9<document.documentMode)}function pa(){ga&&(ga.detachEvent("onpropertychange",Mt),xi=ga=null)}function Mt(i){if(i.propertyName==="value"&&ma(xi)){var a=[];Ni(a,xi,i,aa(i)),Is(u0,a)}}function Sl(i,a,f){i==="focusin"?(pa(),ga=a,xi=f,ga.attachEvent("onpropertychange",Mt)):i==="focusout"&&pa()}function L(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ma(xi)}function s(i,a){if(i==="click")return ma(a)}function o(i,a){if(i==="input"||i==="change")return ma(a)}function c(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var d=typeof Object.is=="function"?Object.is:c;function g(i,a){if(d(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var f=Object.keys(i),m=Object.keys(a);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var v=f[m];if(!Be.call(a,v)||!d(i[v],a[v]))return!1}return!0}function p(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function w(i,a){var f=p(i);i=0;for(var m;f;){if(f.nodeType===3){if(m=i+f.textContent.length,i<=a&&m>=a)return{node:f,offset:a-i};i=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=p(f)}}function S(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?S(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function _(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Zi(i.document);a instanceof i.HTMLIFrameElement;){try{var f=typeof a.contentWindow.location.href=="string"}catch{f=!1}if(f)i=a.contentWindow;else break;a=Zi(i.document)}return a}function O(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var k=Ms&&"documentMode"in document&&11>=document.documentMode,P=null,G=null,Q=null,te=!1;function ue(i,a,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;te||P==null||P!==Zi(m)||(m=P,"selectionStart"in m&&O(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Q&&g(Q,m)||(Q=m,m=Rd(G,"onSelect"),0<m.length&&(a=new tr("onSelect","select",null,a,f),i.push({event:a,listeners:m}),a.target=P)))}function pe(i,a){var f={};return f[i.toLowerCase()]=a.toLowerCase(),f["Webkit"+i]="webkit"+a,f["Moz"+i]="moz"+a,f}var Re={animationend:pe("Animation","AnimationEnd"),animationiteration:pe("Animation","AnimationIteration"),animationstart:pe("Animation","AnimationStart"),transitionrun:pe("Transition","TransitionRun"),transitionstart:pe("Transition","TransitionStart"),transitioncancel:pe("Transition","TransitionCancel"),transitionend:pe("Transition","TransitionEnd")},De={},Ne={};Ms&&(Ne=document.createElement("div").style,"AnimationEvent"in window||(delete Re.animationend.animation,delete Re.animationiteration.animation,delete Re.animationstart.animation),"TransitionEvent"in window||delete Re.transitionend.transition);function dt(i){if(De[i])return De[i];if(!Re[i])return i;var a=Re[i],f;for(f in a)if(a.hasOwnProperty(f)&&f in Ne)return De[i]=a[f];return i}var ut=dt("animationend"),li=dt("animationiteration"),Ui=dt("animationstart"),yi=dt("transitionrun"),Xt=dt("transitionstart"),Xn=dt("transitioncancel"),bi=dt("transitionend"),_r=new Map,sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sr.push("scrollEnd");function Qi(i,a){_r.set(i,a),ti(a,[i])}var $f=new WeakMap;function ds(i,a){if(typeof i=="object"&&i!==null){var f=$f.get(i);return f!==void 0?f:(a={value:i,source:a,stack:hl(a)},$f.set(i,a),a)}return{value:i,source:a,stack:hl(a)}}var hs=[],Cl=0,f0=0;function Gf(){for(var i=Cl,a=f0=Cl=0;a<i;){var f=hs[a];hs[a++]=null;var m=hs[a];hs[a++]=null;var v=hs[a];hs[a++]=null;var T=hs[a];if(hs[a++]=null,m!==null&&v!==null){var D=m.pending;D===null?v.next=v:(v.next=D.next,D.next=v),m.pending=v}T!==0&&zp(f,v,T)}}function qf(i,a,f,m){hs[Cl++]=i,hs[Cl++]=a,hs[Cl++]=f,hs[Cl++]=m,f0|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function d0(i,a,f,m){return qf(i,a,f,m),Yf(i)}function Al(i,a){return qf(i,null,null,a),Yf(i)}function zp(i,a,f){i.lanes|=f;var m=i.alternate;m!==null&&(m.lanes|=f);for(var v=!1,T=i.return;T!==null;)T.childLanes|=f,m=T.alternate,m!==null&&(m.childLanes|=f),T.tag===22&&(i=T.stateNode,i===null||i._visibility&1||(v=!0)),i=T,T=T.return;return i.tag===3?(T=i.stateNode,v&&a!==null&&(v=31-Ze(f),i=T.hiddenUpdates,m=i[v],m===null?i[v]=[a]:m.push(a),a.lane=f|536870912),T):null}function Yf(i){if(50<xu)throw xu=0,y1=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Tl={};function OC(i,a,f,m){this.tag=i,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(i,a,f,m){return new OC(i,a,f,m)}function h0(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Nr(i,a){var f=i.alternate;return f===null?(f=Ji(i.tag,a,i.key,i.mode),f.elementType=i.elementType,f.type=i.type,f.stateNode=i.stateNode,f.alternate=i,i.alternate=f):(f.pendingProps=a,f.type=i.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=i.flags&65011712,f.childLanes=i.childLanes,f.lanes=i.lanes,f.child=i.child,f.memoizedProps=i.memoizedProps,f.memoizedState=i.memoizedState,f.updateQueue=i.updateQueue,a=i.dependencies,f.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},f.sibling=i.sibling,f.index=i.index,f.ref=i.ref,f.refCleanup=i.refCleanup,f}function Hp(i,a){i.flags&=65011714;var f=i.alternate;return f===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=f.childLanes,i.lanes=f.lanes,i.child=f.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=f.memoizedProps,i.memoizedState=f.memoizedState,i.updateQueue=f.updateQueue,i.type=f.type,a=f.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Xf(i,a,f,m,v,T){var D=0;if(m=i,typeof i=="function")h0(i)&&(D=1);else if(typeof i=="string")D=MA(i,f,Oe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case Y:return i=Ji(31,f,a,v),i.elementType=Y,i.lanes=T,i;case M:return So(f.children,v,T,a);case j:D=8,v|=24;break;case U:return i=Ji(12,f,a,v|2),i.elementType=U,i.lanes=T,i;case z:return i=Ji(13,f,a,v),i.elementType=z,i.lanes=T,i;case ee:return i=Ji(19,f,a,v),i.elementType=ee,i.lanes=T,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case $:case B:D=10;break e;case q:D=9;break e;case V:D=11;break e;case X:D=14;break e;case ae:D=16,m=null;break e}D=29,f=Error(r(130,i===null?"null":typeof i,"")),m=null}return a=Ji(D,f,a,v),a.elementType=i,a.type=m,a.lanes=T,a}function So(i,a,f,m){return i=Ji(7,i,m,a),i.lanes=f,i}function g0(i,a,f){return i=Ji(6,i,null,a),i.lanes=f,i}function m0(i,a,f){return a=Ji(4,i.children!==null?i.children:[],i.key,a),a.lanes=f,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var _l=[],Nl=0,Wf=null,Kf=0,gs=[],ms=0,Co=null,Rr=1,Or="";function Ao(i,a){_l[Nl++]=Kf,_l[Nl++]=Wf,Wf=i,Kf=a}function $p(i,a,f){gs[ms++]=Rr,gs[ms++]=Or,gs[ms++]=Co,Co=i;var m=Rr;i=Or;var v=32-Ze(m)-1;m&=~(1<<v),f+=1;var T=32-Ze(a)+v;if(30<T){var D=v-v%5;T=(m&(1<<D)-1).toString(32),m>>=D,v-=D,Rr=1<<32-Ze(a)+v|f<<v|m,Or=T+i}else Rr=1<<T|f<<v|m,Or=i}function p0(i){i.return!==null&&(Ao(i,1),$p(i,1,0))}function x0(i){for(;i===Wf;)Wf=_l[--Nl],_l[Nl]=null,Kf=_l[--Nl],_l[Nl]=null;for(;i===Co;)Co=gs[--ms],gs[ms]=null,Or=gs[--ms],gs[ms]=null,Rr=gs[--ms],gs[ms]=null}var Ri=null,Sn=null,zt=!1,To=null,rr=!1,y0=Error(r(519));function _o(i){var a=Error(r(418,""));throw Wc(ds(a,i)),y0}function Gp(i){var a=i.stateNode,f=i.type,m=i.memoizedProps;switch(a[Jn]=i,a[wn]=m,f){case"dialog":Rt("cancel",a),Rt("close",a);break;case"iframe":case"object":case"embed":Rt("load",a);break;case"video":case"audio":for(f=0;f<bu.length;f++)Rt(bu[f],a);break;case"source":Rt("error",a);break;case"img":case"image":case"link":Rt("error",a),Rt("load",a);break;case"details":Rt("toggle",a);break;case"input":Rt("invalid",a),Gn(a,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),gl(a);break;case"select":Rt("invalid",a);break;case"textarea":Rt("invalid",a),Rn(a,m.value,m.defaultValue,m.children),gl(a)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||a.textContent===""+f||m.suppressHydrationWarning===!0||l2(a.textContent,f)?(m.popover!=null&&(Rt("beforetoggle",a),Rt("toggle",a)),m.onScroll!=null&&Rt("scroll",a),m.onScrollEnd!=null&&Rt("scrollend",a),m.onClick!=null&&(a.onclick=Od),a=!0):a=!1,a||_o(i)}function qp(i){for(Ri=i.return;Ri;)switch(Ri.tag){case 5:case 13:rr=!1;return;case 27:case 3:rr=!0;return;default:Ri=Ri.return}}function Yc(i){if(i!==Ri)return!1;if(!zt)return qp(i),zt=!0,!1;var a=i.tag,f;if((f=a!==3&&a!==27)&&((f=a===5)&&(f=i.type,f=!(f!=="form"&&f!=="button")||L1(i.type,i.memoizedProps)),f=!f),f&&Sn&&_o(i),qp(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(f=i.data,f==="/$"){if(a===0){Sn=ks(i.nextSibling);break e}a--}else f!=="$"&&f!=="$!"&&f!=="$?"||a++;i=i.nextSibling}Sn=null}}else a===27?(a=Sn,Ma(i.type)?(i=P1,P1=null,Sn=i):Sn=a):Sn=Ri?ks(i.stateNode.nextSibling):null;return!0}function Xc(){Sn=Ri=null,zt=!1}function Yp(){var i=To;return i!==null&&(zi===null?zi=i:zi.push.apply(zi,i),To=null),i}function Wc(i){To===null?To=[i]:To.push(i)}var b0=Z(null),No=null,Ir=null;function xa(i,a,f){oe(b0,a._currentValue),a._currentValue=f}function Mr(i){i._currentValue=b0.current,ce(b0)}function w0(i,a,f){for(;i!==null;){var m=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),i===f)break;i=i.return}}function v0(i,a,f,m){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var T=v.dependencies;if(T!==null){var D=v.child;T=T.firstContext;e:for(;T!==null;){var F=T;T=v;for(var K=0;K<a.length;K++)if(F.context===a[K]){T.lanes|=f,F=T.alternate,F!==null&&(F.lanes|=f),w0(T.return,f,i),m||(D=null);break e}T=F.next}}else if(v.tag===18){if(D=v.return,D===null)throw Error(r(341));D.lanes|=f,T=D.alternate,T!==null&&(T.lanes|=f),w0(D,f,i),D=null}else D=v.child;if(D!==null)D.return=v;else for(D=v;D!==null;){if(D===i){D=null;break}if(v=D.sibling,v!==null){v.return=D.return,D=v;break}D=D.return}v=D}}function Kc(i,a,f,m){i=null;for(var v=a,T=!1;v!==null;){if(!T){if((v.flags&524288)!==0)T=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var D=v.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var F=v.type;d(v.pendingProps.value,D.value)||(i!==null?i.push(F):i=[F])}}else if(v===ht.current){if(D=v.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(Au):i=[Au])}v=v.return}i!==null&&v0(a,i,f,m),a.flags|=262144}function Zf(i){for(i=i.firstContext;i!==null;){if(!d(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ro(i){No=i,Ir=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function wi(i){return Xp(No,i)}function Qf(i,a){return No===null&&Ro(i),Xp(i,a)}function Xp(i,a){var f=a._currentValue;if(a={context:a,memoizedValue:f,next:null},Ir===null){if(i===null)throw Error(r(308));Ir=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Ir=Ir.next=a;return f}var IC=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(f,m){i.push(m)}};this.abort=function(){a.aborted=!0,i.forEach(function(f){return f()})}},MC=t.unstable_scheduleCallback,DC=t.unstable_NormalPriority,Wn={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function E0(){return{controller:new IC,data:new Map,refCount:0}}function Zc(i){i.refCount--,i.refCount===0&&MC(DC,function(){i.controller.abort()})}var Qc=null,S0=0,Rl=0,Ol=null;function LC(i,a){if(Qc===null){var f=Qc=[];S0=0,Rl=A1(),Ol={status:"pending",value:void 0,then:function(m){f.push(m)}}}return S0++,a.then(Wp,Wp),a}function Wp(){if(--S0===0&&Qc!==null){Ol!==null&&(Ol.status="fulfilled");var i=Qc;Qc=null,Rl=0,Ol=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function kC(i,a){var f=[],m={status:"pending",value:null,reason:null,then:function(v){f.push(v)}};return i.then(function(){m.status="fulfilled",m.value=a;for(var v=0;v<f.length;v++)(0,f[v])(a)},function(v){for(m.status="rejected",m.reason=v,v=0;v<f.length;v++)(0,f[v])(void 0)}),m}var Kp=se.S;se.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&LC(i,a),Kp!==null&&Kp(i,a)};var Oo=Z(null);function C0(){var i=Oo.current;return i!==null?i:an.pooledCache}function Jf(i,a){a===null?oe(Oo,Oo.current):oe(Oo,a.pool)}function Zp(){var i=C0();return i===null?null:{parent:Wn._currentValue,pool:i}}var Jc=Error(r(460)),Qp=Error(r(474)),ed=Error(r(542)),A0={then:function(){}};function Jp(i){return i=i.status,i==="fulfilled"||i==="rejected"}function td(){}function ex(i,a,f){switch(f=i[f],f===void 0?i.push(a):f!==a&&(a.then(td,td),a=f),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,nx(i),i;default:if(typeof a.status=="string")a.then(td,td);else{if(i=an,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(m){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=m}},function(m){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=m}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,nx(i),i}throw eu=a,Jc}}var eu=null;function tx(){if(eu===null)throw Error(r(459));var i=eu;return eu=null,i}function nx(i){if(i===Jc||i===ed)throw Error(r(483))}var ya=!1;function T0(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _0(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ba(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function wa(i,a,f){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(Wt&2)!==0){var v=m.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),m.pending=a,a=Yf(i),zp(i,null,f),a}return qf(i,m,a,f),Yf(i)}function tu(i,a,f){if(a=a.updateQueue,a!==null&&(a=a.shared,(f&4194048)!==0)){var m=a.lanes;m&=i.pendingLanes,f|=m,a.lanes=f,ji(i,f)}}function N0(i,a){var f=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var v=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var D={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};T===null?v=T=D:T=T.next=D,f=f.next}while(f!==null);T===null?v=T=a:T=T.next=a}else v=T=a;f={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:T,shared:m.shared,callbacks:m.callbacks},i.updateQueue=f;return}i=f.lastBaseUpdate,i===null?f.firstBaseUpdate=a:i.next=a,f.lastBaseUpdate=a}var R0=!1;function nu(){if(R0){var i=Ol;if(i!==null)throw i}}function iu(i,a,f,m){R0=!1;var v=i.updateQueue;ya=!1;var T=v.firstBaseUpdate,D=v.lastBaseUpdate,F=v.shared.pending;if(F!==null){v.shared.pending=null;var K=F,ge=K.next;K.next=null,D===null?T=ge:D.next=ge,D=K;var Ee=i.alternate;Ee!==null&&(Ee=Ee.updateQueue,F=Ee.lastBaseUpdate,F!==D&&(F===null?Ee.firstBaseUpdate=ge:F.next=ge,Ee.lastBaseUpdate=K))}if(T!==null){var Ce=v.baseState;D=0,Ee=ge=K=null,F=T;do{var me=F.lane&-536870913,xe=me!==F.lane;if(xe?(Bt&me)===me:(m&me)===me){me!==0&&me===Rl&&(R0=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var rt=i,it=F;me=a;var en=f;switch(it.tag){case 1:if(rt=it.payload,typeof rt=="function"){Ce=rt.call(en,Ce,me);break e}Ce=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=it.payload,me=typeof rt=="function"?rt.call(en,Ce,me):rt,me==null)break e;Ce=E({},Ce,me);break e;case 2:ya=!0}}me=F.callback,me!==null&&(i.flags|=64,xe&&(i.flags|=8192),xe=v.callbacks,xe===null?v.callbacks=[me]:xe.push(me))}else xe={lane:me,tag:F.tag,payload:F.payload,callback:F.callback,next:null},Ee===null?(ge=Ee=xe,K=Ce):Ee=Ee.next=xe,D|=me;if(F=F.next,F===null){if(F=v.shared.pending,F===null)break;xe=F,F=xe.next,xe.next=null,v.lastBaseUpdate=xe,v.shared.pending=null}}while(!0);Ee===null&&(K=Ce),v.baseState=K,v.firstBaseUpdate=ge,v.lastBaseUpdate=Ee,T===null&&(v.shared.lanes=0),Na|=D,i.lanes=D,i.memoizedState=Ce}}function ix(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function sx(i,a){var f=i.callbacks;if(f!==null)for(i.callbacks=null,i=0;i<f.length;i++)ix(f[i],a)}var Il=Z(null),nd=Z(0);function rx(i,a){i=Ur,oe(nd,i),oe(Il,a),Ur=i|a.baseLanes}function O0(){oe(nd,Ur),oe(Il,Il.current)}function I0(){Ur=nd.current,ce(Il),ce(nd)}var va=0,St=null,Qt=null,Pn=null,id=!1,Ml=!1,Io=!1,sd=0,su=0,Dl=null,jC=0;function Mn(){throw Error(r(321))}function M0(i,a){if(a===null)return!1;for(var f=0;f<a.length&&f<i.length;f++)if(!d(i[f],a[f]))return!1;return!0}function D0(i,a,f,m,v,T){return va=T,St=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,se.H=i===null||i.memoizedState===null?zx:Hx,Io=!1,T=f(m,v),Io=!1,Ml&&(T=ox(a,f,m,v)),ax(i),T}function ax(i){se.H=ud;var a=Qt!==null&&Qt.next!==null;if(va=0,Pn=Qt=St=null,id=!1,su=0,Dl=null,a)throw Error(r(300));i===null||ni||(i=i.dependencies,i!==null&&Zf(i)&&(ni=!0))}function ox(i,a,f,m){St=i;var v=0;do{if(Ml&&(Dl=null),su=0,Ml=!1,25<=v)throw Error(r(301));if(v+=1,Pn=Qt=null,i.updateQueue!=null){var T=i.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}se.H=HC,T=a(f,m)}while(Ml);return T}function BC(){var i=se.H,a=i.useState()[0];return a=typeof a.then=="function"?ru(a):a,i=i.useState()[0],(Qt!==null?Qt.memoizedState:null)!==i&&(St.flags|=1024),a}function L0(){var i=sd!==0;return sd=0,i}function k0(i,a,f){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~f}function j0(i){if(id){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}id=!1}va=0,Pn=Qt=St=null,Ml=!1,su=sd=0,Dl=null}function Fi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?St.memoizedState=Pn=i:Pn=Pn.next=i,Pn}function Un(){if(Qt===null){var i=St.alternate;i=i!==null?i.memoizedState:null}else i=Qt.next;var a=Pn===null?St.memoizedState:Pn.next;if(a!==null)Pn=a,Qt=i;else{if(i===null)throw St.alternate===null?Error(r(467)):Error(r(310));Qt=i,i={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},Pn===null?St.memoizedState=Pn=i:Pn=Pn.next=i}return Pn}function B0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ru(i){var a=su;return su+=1,Dl===null&&(Dl=[]),i=ex(Dl,i,a),a=St,(Pn===null?a.memoizedState:Pn.next)===null&&(a=a.alternate,se.H=a===null||a.memoizedState===null?zx:Hx),i}function rd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ru(i);if(i.$$typeof===B)return wi(i)}throw Error(r(438,String(i)))}function P0(i){var a=null,f=St.updateQueue;if(f!==null&&(a=f.memoCache),a==null){var m=St.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(a={data:m.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),f===null&&(f=B0(),St.updateQueue=f),f.memoCache=a,f=a.data[a.index],f===void 0)for(f=a.data[a.index]=Array(i),m=0;m<i;m++)f[m]=be;return a.index++,f}function Dr(i,a){return typeof a=="function"?a(i):a}function ad(i){var a=Un();return U0(a,Qt,i)}function U0(i,a,f){var m=i.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=f;var v=i.baseQueue,T=m.pending;if(T!==null){if(v!==null){var D=v.next;v.next=T.next,T.next=D}a.baseQueue=v=T,m.pending=null}if(T=i.baseState,v===null)i.memoizedState=T;else{a=v.next;var F=D=null,K=null,ge=a,Ee=!1;do{var Ce=ge.lane&-536870913;if(Ce!==ge.lane?(Bt&Ce)===Ce:(va&Ce)===Ce){var me=ge.revertLane;if(me===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Ce===Rl&&(Ee=!0);else if((va&me)===me){ge=ge.next,me===Rl&&(Ee=!0);continue}else Ce={lane:0,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},K===null?(F=K=Ce,D=T):K=K.next=Ce,St.lanes|=me,Na|=me;Ce=ge.action,Io&&f(T,Ce),T=ge.hasEagerState?ge.eagerState:f(T,Ce)}else me={lane:Ce,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},K===null?(F=K=me,D=T):K=K.next=me,St.lanes|=Ce,Na|=Ce;ge=ge.next}while(ge!==null&&ge!==a);if(K===null?D=T:K.next=F,!d(T,i.memoizedState)&&(ni=!0,Ee&&(f=Ol,f!==null)))throw f;i.memoizedState=T,i.baseState=D,i.baseQueue=K,m.lastRenderedState=T}return v===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function F0(i){var a=Un(),f=a.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=i;var m=f.dispatch,v=f.pending,T=a.memoizedState;if(v!==null){f.pending=null;var D=v=v.next;do T=i(T,D.action),D=D.next;while(D!==v);d(T,a.memoizedState)||(ni=!0),a.memoizedState=T,a.baseQueue===null&&(a.baseState=T),f.lastRenderedState=T}return[T,m]}function lx(i,a,f){var m=St,v=Un(),T=zt;if(T){if(f===void 0)throw Error(r(407));f=f()}else f=a();var D=!d((Qt||v).memoizedState,f);D&&(v.memoizedState=f,ni=!0),v=v.queue;var F=fx.bind(null,m,v,i);if(au(2048,8,F,[i]),v.getSnapshot!==a||D||Pn!==null&&Pn.memoizedState.tag&1){if(m.flags|=2048,Ll(9,od(),ux.bind(null,m,v,f,a),null),an===null)throw Error(r(349));T||(va&124)!==0||cx(m,a,f)}return f}function cx(i,a,f){i.flags|=16384,i={getSnapshot:a,value:f},a=St.updateQueue,a===null?(a=B0(),St.updateQueue=a,a.stores=[i]):(f=a.stores,f===null?a.stores=[i]:f.push(i))}function ux(i,a,f,m){a.value=f,a.getSnapshot=m,dx(a)&&hx(i)}function fx(i,a,f){return f(function(){dx(a)&&hx(i)})}function dx(i){var a=i.getSnapshot;i=i.value;try{var f=a();return!d(i,f)}catch{return!0}}function hx(i){var a=Al(i,2);a!==null&&ss(a,i,2)}function V0(i){var a=Fi();if(typeof i=="function"){var f=i;if(i=f(),Io){nt(!0);try{f()}finally{nt(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:i},a}function gx(i,a,f,m){return i.baseState=f,U0(i,Qt,typeof m=="function"?m:Dr)}function PC(i,a,f,m,v){if(cd(i))throw Error(r(485));if(i=a.action,i!==null){var T={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){T.listeners.push(D)}};se.T!==null?f(!0):T.isTransition=!1,m(T),f=a.pending,f===null?(T.next=a.pending=T,mx(a,T)):(T.next=f.next,a.pending=f.next=T)}}function mx(i,a){var f=a.action,m=a.payload,v=i.state;if(a.isTransition){var T=se.T,D={};se.T=D;try{var F=f(v,m),K=se.S;K!==null&&K(D,F),px(i,a,F)}catch(ge){z0(i,a,ge)}finally{se.T=T}}else try{T=f(v,m),px(i,a,T)}catch(ge){z0(i,a,ge)}}function px(i,a,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){xx(i,a,m)},function(m){return z0(i,a,m)}):xx(i,a,f)}function xx(i,a,f){a.status="fulfilled",a.value=f,yx(a),i.state=f,a=i.pending,a!==null&&(f=a.next,f===a?i.pending=null:(f=f.next,a.next=f,mx(i,f)))}function z0(i,a,f){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do a.status="rejected",a.reason=f,yx(a),a=a.next;while(a!==m)}i.action=null}function yx(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function bx(i,a){return a}function wx(i,a){if(zt){var f=an.formState;if(f!==null){e:{var m=St;if(zt){if(Sn){t:{for(var v=Sn,T=rr;v.nodeType!==8;){if(!T){v=null;break t}if(v=ks(v.nextSibling),v===null){v=null;break t}}T=v.data,v=T==="F!"||T==="F"?v:null}if(v){Sn=ks(v.nextSibling),m=v.data==="F!";break e}}_o(m)}m=!1}m&&(a=f[0])}}return f=Fi(),f.memoizedState=f.baseState=a,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bx,lastRenderedState:a},f.queue=m,f=Ux.bind(null,St,m),m.dispatch=f,m=V0(!1),T=Y0.bind(null,St,!1,m.queue),m=Fi(),v={state:a,dispatch:null,action:i,pending:null},m.queue=v,f=PC.bind(null,St,v,T,f),v.dispatch=f,m.memoizedState=i,[a,f,!1]}function vx(i){var a=Un();return Ex(a,Qt,i)}function Ex(i,a,f){if(a=U0(i,a,bx)[0],i=ad(Dr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var m=ru(a)}catch(D){throw D===Jc?ed:D}else m=a;a=Un();var v=a.queue,T=v.dispatch;return f!==a.memoizedState&&(St.flags|=2048,Ll(9,od(),UC.bind(null,v,f),null)),[m,T,i]}function UC(i,a){i.action=a}function Sx(i){var a=Un(),f=Qt;if(f!==null)return Ex(a,f,i);Un(),a=a.memoizedState,f=Un();var m=f.queue.dispatch;return f.memoizedState=i,[a,m,!1]}function Ll(i,a,f,m){return i={tag:i,create:f,deps:m,inst:a,next:null},a=St.updateQueue,a===null&&(a=B0(),St.updateQueue=a),f=a.lastEffect,f===null?a.lastEffect=i.next=i:(m=f.next,f.next=i,i.next=m,a.lastEffect=i),i}function od(){return{destroy:void 0,resource:void 0}}function Cx(){return Un().memoizedState}function ld(i,a,f,m){var v=Fi();m=m===void 0?null:m,St.flags|=i,v.memoizedState=Ll(1|a,od(),f,m)}function au(i,a,f,m){var v=Un();m=m===void 0?null:m;var T=v.memoizedState.inst;Qt!==null&&m!==null&&M0(m,Qt.memoizedState.deps)?v.memoizedState=Ll(a,T,f,m):(St.flags|=i,v.memoizedState=Ll(1|a,T,f,m))}function Ax(i,a){ld(8390656,8,i,a)}function Tx(i,a){au(2048,8,i,a)}function _x(i,a){return au(4,2,i,a)}function Nx(i,a){return au(4,4,i,a)}function Rx(i,a){if(typeof a=="function"){i=i();var f=a(i);return function(){typeof f=="function"?f():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Ox(i,a,f){f=f!=null?f.concat([i]):null,au(4,4,Rx.bind(null,a,i),f)}function H0(){}function Ix(i,a){var f=Un();a=a===void 0?null:a;var m=f.memoizedState;return a!==null&&M0(a,m[1])?m[0]:(f.memoizedState=[i,a],i)}function Mx(i,a){var f=Un();a=a===void 0?null:a;var m=f.memoizedState;if(a!==null&&M0(a,m[1]))return m[0];if(m=i(),Io){nt(!0);try{i()}finally{nt(!1)}}return f.memoizedState=[m,a],m}function $0(i,a,f){return f===void 0||(va&1073741824)!==0?i.memoizedState=a:(i.memoizedState=f,i=ky(),St.lanes|=i,Na|=i,f)}function Dx(i,a,f,m){return d(f,a)?f:Il.current!==null?(i=$0(i,f,m),d(i,a)||(ni=!0),i):(va&42)===0?(ni=!0,i.memoizedState=f):(i=ky(),St.lanes|=i,Na|=i,a)}function Lx(i,a,f,m,v){var T=fe.p;fe.p=T!==0&&8>T?T:8;var D=se.T,F={};se.T=F,Y0(i,!1,a,f);try{var K=v(),ge=se.S;if(ge!==null&&ge(F,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var Ee=kC(K,m);ou(i,a,Ee,is(i))}else ou(i,a,m,is(i))}catch(Ce){ou(i,a,{then:function(){},status:"rejected",reason:Ce},is())}finally{fe.p=T,se.T=D}}function FC(){}function G0(i,a,f,m){if(i.tag!==5)throw Error(r(476));var v=kx(i).queue;Lx(i,v,a,Ie,f===null?FC:function(){return jx(i),f(m)})}function kx(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Ie,baseState:Ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:Ie},next:null};var f={};return a.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:f},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function jx(i){var a=kx(i).next.queue;ou(i,a,{},is())}function q0(){return wi(Au)}function Bx(){return Un().memoizedState}function Px(){return Un().memoizedState}function VC(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var f=is();i=ba(f);var m=wa(a,i,f);m!==null&&(ss(m,a,f),tu(m,a,f)),a={cache:E0()},i.payload=a;return}a=a.return}}function zC(i,a,f){var m=is();f={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},cd(i)?Fx(a,f):(f=d0(i,a,f,m),f!==null&&(ss(f,i,m),Vx(f,a,m)))}function Ux(i,a,f){var m=is();ou(i,a,f,m)}function ou(i,a,f,m){var v={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(cd(i))Fx(a,v);else{var T=i.alternate;if(i.lanes===0&&(T===null||T.lanes===0)&&(T=a.lastRenderedReducer,T!==null))try{var D=a.lastRenderedState,F=T(D,f);if(v.hasEagerState=!0,v.eagerState=F,d(F,D))return qf(i,a,v,0),an===null&&Gf(),!1}catch{}finally{}if(f=d0(i,a,v,m),f!==null)return ss(f,i,m),Vx(f,a,m),!0}return!1}function Y0(i,a,f,m){if(m={lane:2,revertLane:A1(),action:m,hasEagerState:!1,eagerState:null,next:null},cd(i)){if(a)throw Error(r(479))}else a=d0(i,f,m,2),a!==null&&ss(a,i,2)}function cd(i){var a=i.alternate;return i===St||a!==null&&a===St}function Fx(i,a){Ml=id=!0;var f=i.pending;f===null?a.next=a:(a.next=f.next,f.next=a),i.pending=a}function Vx(i,a,f){if((f&4194048)!==0){var m=a.lanes;m&=i.pendingLanes,f|=m,a.lanes=f,ji(i,f)}}var ud={readContext:wi,use:rd,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useLayoutEffect:Mn,useInsertionEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useSyncExternalStore:Mn,useId:Mn,useHostTransitionStatus:Mn,useFormState:Mn,useActionState:Mn,useOptimistic:Mn,useMemoCache:Mn,useCacheRefresh:Mn},zx={readContext:wi,use:rd,useCallback:function(i,a){return Fi().memoizedState=[i,a===void 0?null:a],i},useContext:wi,useEffect:Ax,useImperativeHandle:function(i,a,f){f=f!=null?f.concat([i]):null,ld(4194308,4,Rx.bind(null,a,i),f)},useLayoutEffect:function(i,a){return ld(4194308,4,i,a)},useInsertionEffect:function(i,a){ld(4,2,i,a)},useMemo:function(i,a){var f=Fi();a=a===void 0?null:a;var m=i();if(Io){nt(!0);try{i()}finally{nt(!1)}}return f.memoizedState=[m,a],m},useReducer:function(i,a,f){var m=Fi();if(f!==void 0){var v=f(a);if(Io){nt(!0);try{f(a)}finally{nt(!1)}}}else v=a;return m.memoizedState=m.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},m.queue=i,i=i.dispatch=zC.bind(null,St,i),[m.memoizedState,i]},useRef:function(i){var a=Fi();return i={current:i},a.memoizedState=i},useState:function(i){i=V0(i);var a=i.queue,f=Ux.bind(null,St,a);return a.dispatch=f,[i.memoizedState,f]},useDebugValue:H0,useDeferredValue:function(i,a){var f=Fi();return $0(f,i,a)},useTransition:function(){var i=V0(!1);return i=Lx.bind(null,St,i.queue,!0,!1),Fi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,f){var m=St,v=Fi();if(zt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=a(),an===null)throw Error(r(349));(Bt&124)!==0||cx(m,a,f)}v.memoizedState=f;var T={value:f,getSnapshot:a};return v.queue=T,Ax(fx.bind(null,m,T,i),[i]),m.flags|=2048,Ll(9,od(),ux.bind(null,m,T,f,a),null),f},useId:function(){var i=Fi(),a=an.identifierPrefix;if(zt){var f=Or,m=Rr;f=(m&~(1<<32-Ze(m)-1)).toString(32)+f,a=""+a+"R"+f,f=sd++,0<f&&(a+="H"+f.toString(32)),a+=""}else f=jC++,a=""+a+"r"+f.toString(32)+"";return i.memoizedState=a},useHostTransitionStatus:q0,useFormState:wx,useActionState:wx,useOptimistic:function(i){var a=Fi();a.memoizedState=a.baseState=i;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=f,a=Y0.bind(null,St,!0,f),f.dispatch=a,[i,a]},useMemoCache:P0,useCacheRefresh:function(){return Fi().memoizedState=VC.bind(null,St)}},Hx={readContext:wi,use:rd,useCallback:Ix,useContext:wi,useEffect:Tx,useImperativeHandle:Ox,useInsertionEffect:_x,useLayoutEffect:Nx,useMemo:Mx,useReducer:ad,useRef:Cx,useState:function(){return ad(Dr)},useDebugValue:H0,useDeferredValue:function(i,a){var f=Un();return Dx(f,Qt.memoizedState,i,a)},useTransition:function(){var i=ad(Dr)[0],a=Un().memoizedState;return[typeof i=="boolean"?i:ru(i),a]},useSyncExternalStore:lx,useId:Bx,useHostTransitionStatus:q0,useFormState:vx,useActionState:vx,useOptimistic:function(i,a){var f=Un();return gx(f,Qt,i,a)},useMemoCache:P0,useCacheRefresh:Px},HC={readContext:wi,use:rd,useCallback:Ix,useContext:wi,useEffect:Tx,useImperativeHandle:Ox,useInsertionEffect:_x,useLayoutEffect:Nx,useMemo:Mx,useReducer:F0,useRef:Cx,useState:function(){return F0(Dr)},useDebugValue:H0,useDeferredValue:function(i,a){var f=Un();return Qt===null?$0(f,i,a):Dx(f,Qt.memoizedState,i,a)},useTransition:function(){var i=F0(Dr)[0],a=Un().memoizedState;return[typeof i=="boolean"?i:ru(i),a]},useSyncExternalStore:lx,useId:Bx,useHostTransitionStatus:q0,useFormState:Sx,useActionState:Sx,useOptimistic:function(i,a){var f=Un();return Qt!==null?gx(f,Qt,i,a):(f.baseState=i,[i,f.queue.dispatch])},useMemoCache:P0,useCacheRefresh:Px},kl=null,lu=0;function fd(i){var a=lu;return lu+=1,kl===null&&(kl=[]),ex(kl,i,a)}function cu(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function dd(i,a){throw a.$$typeof===A?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function $x(i){var a=i._init;return a(i._payload)}function Gx(i){function a(re,ne){if(i){var he=re.deletions;he===null?(re.deletions=[ne],re.flags|=16):he.push(ne)}}function f(re,ne){if(!i)return null;for(;ne!==null;)a(re,ne),ne=ne.sibling;return null}function m(re){for(var ne=new Map;re!==null;)re.key!==null?ne.set(re.key,re):ne.set(re.index,re),re=re.sibling;return ne}function v(re,ne){return re=Nr(re,ne),re.index=0,re.sibling=null,re}function T(re,ne,he){return re.index=he,i?(he=re.alternate,he!==null?(he=he.index,he<ne?(re.flags|=67108866,ne):he):(re.flags|=67108866,ne)):(re.flags|=1048576,ne)}function D(re){return i&&re.alternate===null&&(re.flags|=67108866),re}function F(re,ne,he,Se){return ne===null||ne.tag!==6?(ne=g0(he,re.mode,Se),ne.return=re,ne):(ne=v(ne,he),ne.return=re,ne)}function K(re,ne,he,Se){var $e=he.type;return $e===M?Ee(re,ne,he.props.children,Se,he.key):ne!==null&&(ne.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===ae&&$x($e)===ne.type)?(ne=v(ne,he.props),cu(ne,he),ne.return=re,ne):(ne=Xf(he.type,he.key,he.props,null,re.mode,Se),cu(ne,he),ne.return=re,ne)}function ge(re,ne,he,Se){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==he.containerInfo||ne.stateNode.implementation!==he.implementation?(ne=m0(he,re.mode,Se),ne.return=re,ne):(ne=v(ne,he.children||[]),ne.return=re,ne)}function Ee(re,ne,he,Se,$e){return ne===null||ne.tag!==7?(ne=So(he,re.mode,Se,$e),ne.return=re,ne):(ne=v(ne,he),ne.return=re,ne)}function Ce(re,ne,he){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=g0(""+ne,re.mode,he),ne.return=re,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case N:return he=Xf(ne.type,ne.key,ne.props,null,re.mode,he),cu(he,ne),he.return=re,he;case I:return ne=m0(ne,re.mode,he),ne.return=re,ne;case ae:var Se=ne._init;return ne=Se(ne._payload),Ce(re,ne,he)}if(ie(ne)||ve(ne))return ne=So(ne,re.mode,he,null),ne.return=re,ne;if(typeof ne.then=="function")return Ce(re,fd(ne),he);if(ne.$$typeof===B)return Ce(re,Qf(re,ne),he);dd(re,ne)}return null}function me(re,ne,he,Se){var $e=ne!==null?ne.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return $e!==null?null:F(re,ne,""+he,Se);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case N:return he.key===$e?K(re,ne,he,Se):null;case I:return he.key===$e?ge(re,ne,he,Se):null;case ae:return $e=he._init,he=$e(he._payload),me(re,ne,he,Se)}if(ie(he)||ve(he))return $e!==null?null:Ee(re,ne,he,Se,null);if(typeof he.then=="function")return me(re,ne,fd(he),Se);if(he.$$typeof===B)return me(re,ne,Qf(re,he),Se);dd(re,he)}return null}function xe(re,ne,he,Se,$e){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return re=re.get(he)||null,F(ne,re,""+Se,$e);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case N:return re=re.get(Se.key===null?he:Se.key)||null,K(ne,re,Se,$e);case I:return re=re.get(Se.key===null?he:Se.key)||null,ge(ne,re,Se,$e);case ae:var At=Se._init;return Se=At(Se._payload),xe(re,ne,he,Se,$e)}if(ie(Se)||ve(Se))return re=re.get(he)||null,Ee(ne,re,Se,$e,null);if(typeof Se.then=="function")return xe(re,ne,he,fd(Se),$e);if(Se.$$typeof===B)return xe(re,ne,he,Qf(ne,Se),$e);dd(ne,Se)}return null}function rt(re,ne,he,Se){for(var $e=null,At=null,We=ne,st=ne=0,si=null;We!==null&&st<he.length;st++){We.index>st?(si=We,We=null):si=We.sibling;var Vt=me(re,We,he[st],Se);if(Vt===null){We===null&&(We=si);break}i&&We&&Vt.alternate===null&&a(re,We),ne=T(Vt,ne,st),At===null?$e=Vt:At.sibling=Vt,At=Vt,We=si}if(st===he.length)return f(re,We),zt&&Ao(re,st),$e;if(We===null){for(;st<he.length;st++)We=Ce(re,he[st],Se),We!==null&&(ne=T(We,ne,st),At===null?$e=We:At.sibling=We,At=We);return zt&&Ao(re,st),$e}for(We=m(We);st<he.length;st++)si=xe(We,re,st,he[st],Se),si!==null&&(i&&si.alternate!==null&&We.delete(si.key===null?st:si.key),ne=T(si,ne,st),At===null?$e=si:At.sibling=si,At=si);return i&&We.forEach(function(Ba){return a(re,Ba)}),zt&&Ao(re,st),$e}function it(re,ne,he,Se){if(he==null)throw Error(r(151));for(var $e=null,At=null,We=ne,st=ne=0,si=null,Vt=he.next();We!==null&&!Vt.done;st++,Vt=he.next()){We.index>st?(si=We,We=null):si=We.sibling;var Ba=me(re,We,Vt.value,Se);if(Ba===null){We===null&&(We=si);break}i&&We&&Ba.alternate===null&&a(re,We),ne=T(Ba,ne,st),At===null?$e=Ba:At.sibling=Ba,At=Ba,We=si}if(Vt.done)return f(re,We),zt&&Ao(re,st),$e;if(We===null){for(;!Vt.done;st++,Vt=he.next())Vt=Ce(re,Vt.value,Se),Vt!==null&&(ne=T(Vt,ne,st),At===null?$e=Vt:At.sibling=Vt,At=Vt);return zt&&Ao(re,st),$e}for(We=m(We);!Vt.done;st++,Vt=he.next())Vt=xe(We,re,st,Vt.value,Se),Vt!==null&&(i&&Vt.alternate!==null&&We.delete(Vt.key===null?st:Vt.key),ne=T(Vt,ne,st),At===null?$e=Vt:At.sibling=Vt,At=Vt);return i&&We.forEach(function($A){return a(re,$A)}),zt&&Ao(re,st),$e}function en(re,ne,he,Se){if(typeof he=="object"&&he!==null&&he.type===M&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case N:e:{for(var $e=he.key;ne!==null;){if(ne.key===$e){if($e=he.type,$e===M){if(ne.tag===7){f(re,ne.sibling),Se=v(ne,he.props.children),Se.return=re,re=Se;break e}}else if(ne.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===ae&&$x($e)===ne.type){f(re,ne.sibling),Se=v(ne,he.props),cu(Se,he),Se.return=re,re=Se;break e}f(re,ne);break}else a(re,ne);ne=ne.sibling}he.type===M?(Se=So(he.props.children,re.mode,Se,he.key),Se.return=re,re=Se):(Se=Xf(he.type,he.key,he.props,null,re.mode,Se),cu(Se,he),Se.return=re,re=Se)}return D(re);case I:e:{for($e=he.key;ne!==null;){if(ne.key===$e)if(ne.tag===4&&ne.stateNode.containerInfo===he.containerInfo&&ne.stateNode.implementation===he.implementation){f(re,ne.sibling),Se=v(ne,he.children||[]),Se.return=re,re=Se;break e}else{f(re,ne);break}else a(re,ne);ne=ne.sibling}Se=m0(he,re.mode,Se),Se.return=re,re=Se}return D(re);case ae:return $e=he._init,he=$e(he._payload),en(re,ne,he,Se)}if(ie(he))return rt(re,ne,he,Se);if(ve(he)){if($e=ve(he),typeof $e!="function")throw Error(r(150));return he=$e.call(he),it(re,ne,he,Se)}if(typeof he.then=="function")return en(re,ne,fd(he),Se);if(he.$$typeof===B)return en(re,ne,Qf(re,he),Se);dd(re,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,ne!==null&&ne.tag===6?(f(re,ne.sibling),Se=v(ne,he),Se.return=re,re=Se):(f(re,ne),Se=g0(he,re.mode,Se),Se.return=re,re=Se),D(re)):f(re,ne)}return function(re,ne,he,Se){try{lu=0;var $e=en(re,ne,he,Se);return kl=null,$e}catch(We){if(We===Jc||We===ed)throw We;var At=Ji(29,We,null,re.mode);return At.lanes=Se,At.return=re,At}finally{}}}var jl=Gx(!0),qx=Gx(!1),ps=Z(null),ar=null;function Ea(i){var a=i.alternate;oe(Kn,Kn.current&1),oe(ps,i),ar===null&&(a===null||Il.current!==null||a.memoizedState!==null)&&(ar=i)}function Yx(i){if(i.tag===22){if(oe(Kn,Kn.current),oe(ps,i),ar===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(ar=i)}}else Sa()}function Sa(){oe(Kn,Kn.current),oe(ps,ps.current)}function Lr(i){ce(ps),ar===i&&(ar=null),ce(Kn)}var Kn=Z(0);function hd(i){for(var a=i;a!==null;){if(a.tag===13){var f=a.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||B1(f)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function X0(i,a,f,m){a=i.memoizedState,f=f(m,a),f=f==null?a:E({},a,f),i.memoizedState=f,i.lanes===0&&(i.updateQueue.baseState=f)}var W0={enqueueSetState:function(i,a,f){i=i._reactInternals;var m=is(),v=ba(m);v.payload=a,f!=null&&(v.callback=f),a=wa(i,v,m),a!==null&&(ss(a,i,m),tu(a,i,m))},enqueueReplaceState:function(i,a,f){i=i._reactInternals;var m=is(),v=ba(m);v.tag=1,v.payload=a,f!=null&&(v.callback=f),a=wa(i,v,m),a!==null&&(ss(a,i,m),tu(a,i,m))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var f=is(),m=ba(f);m.tag=2,a!=null&&(m.callback=a),a=wa(i,m,f),a!==null&&(ss(a,i,f),tu(a,i,f))}};function Xx(i,a,f,m,v,T,D){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,T,D):a.prototype&&a.prototype.isPureReactComponent?!g(f,m)||!g(v,T):!0}function Wx(i,a,f,m){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(f,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(f,m),a.state!==i&&W0.enqueueReplaceState(a,a.state,null)}function Mo(i,a){var f=a;if("ref"in a){f={};for(var m in a)m!=="ref"&&(f[m]=a[m])}if(i=i.defaultProps){f===a&&(f=E({},f));for(var v in i)f[v]===void 0&&(f[v]=i[v])}return f}var gd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Kx(i){gd(i)}function Zx(i){console.error(i)}function Qx(i){gd(i)}function md(i,a){try{var f=i.onUncaughtError;f(a.value,{componentStack:a.stack})}catch(m){setTimeout(function(){throw m})}}function Jx(i,a,f){try{var m=i.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function K0(i,a,f){return f=ba(f),f.tag=3,f.payload={element:null},f.callback=function(){md(i,a)},f}function ey(i){return i=ba(i),i.tag=3,i}function ty(i,a,f,m){var v=f.type.getDerivedStateFromError;if(typeof v=="function"){var T=m.value;i.payload=function(){return v(T)},i.callback=function(){Jx(a,f,m)}}var D=f.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(i.callback=function(){Jx(a,f,m),typeof v!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var F=m.stack;this.componentDidCatch(m.value,{componentStack:F!==null?F:""})})}function $C(i,a,f,m,v){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(a=f.alternate,a!==null&&Kc(a,f,v,!0),f=ps.current,f!==null){switch(f.tag){case 13:return ar===null?w1():f.alternate===null&&Cn===0&&(Cn=3),f.flags&=-257,f.flags|=65536,f.lanes=v,m===A0?f.flags|=16384:(a=f.updateQueue,a===null?f.updateQueue=new Set([m]):a.add(m),E1(i,m,v)),!1;case 22:return f.flags|=65536,m===A0?f.flags|=16384:(a=f.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=a):(f=a.retryQueue,f===null?a.retryQueue=new Set([m]):f.add(m)),E1(i,m,v)),!1}throw Error(r(435,f.tag))}return E1(i,m,v),w1(),!1}if(zt)return a=ps.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=v,m!==y0&&(i=Error(r(422),{cause:m}),Wc(ds(i,f)))):(m!==y0&&(a=Error(r(423),{cause:m}),Wc(ds(a,f))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,m=ds(m,f),v=K0(i.stateNode,m,v),N0(i,v),Cn!==4&&(Cn=2)),!1;var T=Error(r(520),{cause:m});if(T=ds(T,f),pu===null?pu=[T]:pu.push(T),Cn!==4&&(Cn=2),a===null)return!0;m=ds(m,f),f=a;do{switch(f.tag){case 3:return f.flags|=65536,i=v&-v,f.lanes|=i,i=K0(f.stateNode,m,i),N0(f,i),!1;case 1:if(a=f.type,T=f.stateNode,(f.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ra===null||!Ra.has(T))))return f.flags|=65536,v&=-v,f.lanes|=v,v=ey(v),ty(v,i,f,m),N0(f,v),!1}f=f.return}while(f!==null);return!1}var ny=Error(r(461)),ni=!1;function ci(i,a,f,m){a.child=i===null?qx(a,null,f,m):jl(a,i.child,f,m)}function iy(i,a,f,m,v){f=f.render;var T=a.ref;if("ref"in m){var D={};for(var F in m)F!=="ref"&&(D[F]=m[F])}else D=m;return Ro(a),m=D0(i,a,f,D,T,v),F=L0(),i!==null&&!ni?(k0(i,a,v),kr(i,a,v)):(zt&&F&&p0(a),a.flags|=1,ci(i,a,m,v),a.child)}function sy(i,a,f,m,v){if(i===null){var T=f.type;return typeof T=="function"&&!h0(T)&&T.defaultProps===void 0&&f.compare===null?(a.tag=15,a.type=T,ry(i,a,T,m,v)):(i=Xf(f.type,null,m,a,a.mode,v),i.ref=a.ref,i.return=a,a.child=i)}if(T=i.child,!s1(i,v)){var D=T.memoizedProps;if(f=f.compare,f=f!==null?f:g,f(D,m)&&i.ref===a.ref)return kr(i,a,v)}return a.flags|=1,i=Nr(T,m),i.ref=a.ref,i.return=a,a.child=i}function ry(i,a,f,m,v){if(i!==null){var T=i.memoizedProps;if(g(T,m)&&i.ref===a.ref)if(ni=!1,a.pendingProps=m=T,s1(i,v))(i.flags&131072)!==0&&(ni=!0);else return a.lanes=i.lanes,kr(i,a,v)}return Z0(i,a,f,m,v)}function ay(i,a,f){var m=a.pendingProps,v=m.children,T=i!==null?i.memoizedState:null;if(m.mode==="hidden"){if((a.flags&128)!==0){if(m=T!==null?T.baseLanes|f:f,i!==null){for(v=a.child=i.child,T=0;v!==null;)T=T|v.lanes|v.childLanes,v=v.sibling;a.childLanes=T&~m}else a.childLanes=0,a.child=null;return oy(i,a,m,f)}if((f&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Jf(a,T!==null?T.cachePool:null),T!==null?rx(a,T):O0(),Yx(a);else return a.lanes=a.childLanes=536870912,oy(i,a,T!==null?T.baseLanes|f:f,f)}else T!==null?(Jf(a,T.cachePool),rx(a,T),Sa(),a.memoizedState=null):(i!==null&&Jf(a,null),O0(),Sa());return ci(i,a,v,f),a.child}function oy(i,a,f,m){var v=C0();return v=v===null?null:{parent:Wn._currentValue,pool:v},a.memoizedState={baseLanes:f,cachePool:v},i!==null&&Jf(a,null),O0(),Yx(a),i!==null&&Kc(i,a,m,!0),null}function pd(i,a){var f=a.ref;if(f===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(i===null||i.ref!==f)&&(a.flags|=4194816)}}function Z0(i,a,f,m,v){return Ro(a),f=D0(i,a,f,m,void 0,v),m=L0(),i!==null&&!ni?(k0(i,a,v),kr(i,a,v)):(zt&&m&&p0(a),a.flags|=1,ci(i,a,f,v),a.child)}function ly(i,a,f,m,v,T){return Ro(a),a.updateQueue=null,f=ox(a,m,f,v),ax(i),m=L0(),i!==null&&!ni?(k0(i,a,T),kr(i,a,T)):(zt&&m&&p0(a),a.flags|=1,ci(i,a,f,T),a.child)}function cy(i,a,f,m,v){if(Ro(a),a.stateNode===null){var T=Tl,D=f.contextType;typeof D=="object"&&D!==null&&(T=wi(D)),T=new f(m,T),a.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=W0,a.stateNode=T,T._reactInternals=a,T=a.stateNode,T.props=m,T.state=a.memoizedState,T.refs={},T0(a),D=f.contextType,T.context=typeof D=="object"&&D!==null?wi(D):Tl,T.state=a.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(X0(a,f,D,m),T.state=a.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(D=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),D!==T.state&&W0.enqueueReplaceState(T,T.state,null),iu(a,m,T,v),nu(),T.state=a.memoizedState),typeof T.componentDidMount=="function"&&(a.flags|=4194308),m=!0}else if(i===null){T=a.stateNode;var F=a.memoizedProps,K=Mo(f,F);T.props=K;var ge=T.context,Ee=f.contextType;D=Tl,typeof Ee=="object"&&Ee!==null&&(D=wi(Ee));var Ce=f.getDerivedStateFromProps;Ee=typeof Ce=="function"||typeof T.getSnapshotBeforeUpdate=="function",F=a.pendingProps!==F,Ee||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(F||ge!==D)&&Wx(a,T,m,D),ya=!1;var me=a.memoizedState;T.state=me,iu(a,m,T,v),nu(),ge=a.memoizedState,F||me!==ge||ya?(typeof Ce=="function"&&(X0(a,f,Ce,m),ge=a.memoizedState),(K=ya||Xx(a,f,K,m,me,ge,D))?(Ee||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=ge),T.props=m,T.state=ge,T.context=D,m=K):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{T=a.stateNode,_0(i,a),D=a.memoizedProps,Ee=Mo(f,D),T.props=Ee,Ce=a.pendingProps,me=T.context,ge=f.contextType,K=Tl,typeof ge=="object"&&ge!==null&&(K=wi(ge)),F=f.getDerivedStateFromProps,(ge=typeof F=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==Ce||me!==K)&&Wx(a,T,m,K),ya=!1,me=a.memoizedState,T.state=me,iu(a,m,T,v),nu();var xe=a.memoizedState;D!==Ce||me!==xe||ya||i!==null&&i.dependencies!==null&&Zf(i.dependencies)?(typeof F=="function"&&(X0(a,f,F,m),xe=a.memoizedState),(Ee=ya||Xx(a,f,Ee,m,me,xe,K)||i!==null&&i.dependencies!==null&&Zf(i.dependencies))?(ge||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(m,xe,K),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(m,xe,K)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||D===i.memoizedProps&&me===i.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&me===i.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=xe),T.props=m,T.state=xe,T.context=K,m=Ee):(typeof T.componentDidUpdate!="function"||D===i.memoizedProps&&me===i.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&me===i.memoizedState||(a.flags|=1024),m=!1)}return T=m,pd(i,a),m=(a.flags&128)!==0,T||m?(T=a.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:T.render(),a.flags|=1,i!==null&&m?(a.child=jl(a,i.child,null,v),a.child=jl(a,null,f,v)):ci(i,a,f,v),a.memoizedState=T.state,i=a.child):i=kr(i,a,v),i}function uy(i,a,f,m){return Xc(),a.flags|=256,ci(i,a,f,m),a.child}var Q0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function J0(i){return{baseLanes:i,cachePool:Zp()}}function e1(i,a,f){return i=i!==null?i.childLanes&~f:0,a&&(i|=xs),i}function fy(i,a,f){var m=a.pendingProps,v=!1,T=(a.flags&128)!==0,D;if((D=T)||(D=i!==null&&i.memoizedState===null?!1:(Kn.current&2)!==0),D&&(v=!0,a.flags&=-129),D=(a.flags&32)!==0,a.flags&=-33,i===null){if(zt){if(v?Ea(a):Sa(),zt){var F=Sn,K;if(K=F){e:{for(K=F,F=rr;K.nodeType!==8;){if(!F){F=null;break e}if(K=ks(K.nextSibling),K===null){F=null;break e}}F=K}F!==null?(a.memoizedState={dehydrated:F,treeContext:Co!==null?{id:Rr,overflow:Or}:null,retryLane:536870912,hydrationErrors:null},K=Ji(18,null,null,0),K.stateNode=F,K.return=a,a.child=K,Ri=a,Sn=null,K=!0):K=!1}K||_o(a)}if(F=a.memoizedState,F!==null&&(F=F.dehydrated,F!==null))return B1(F)?a.lanes=32:a.lanes=536870912,null;Lr(a)}return F=m.children,m=m.fallback,v?(Sa(),v=a.mode,F=xd({mode:"hidden",children:F},v),m=So(m,v,f,null),F.return=a,m.return=a,F.sibling=m,a.child=F,v=a.child,v.memoizedState=J0(f),v.childLanes=e1(i,D,f),a.memoizedState=Q0,m):(Ea(a),t1(a,F))}if(K=i.memoizedState,K!==null&&(F=K.dehydrated,F!==null)){if(T)a.flags&256?(Ea(a),a.flags&=-257,a=n1(i,a,f)):a.memoizedState!==null?(Sa(),a.child=i.child,a.flags|=128,a=null):(Sa(),v=m.fallback,F=a.mode,m=xd({mode:"visible",children:m.children},F),v=So(v,F,f,null),v.flags|=2,m.return=a,v.return=a,m.sibling=v,a.child=m,jl(a,i.child,null,f),m=a.child,m.memoizedState=J0(f),m.childLanes=e1(i,D,f),a.memoizedState=Q0,a=v);else if(Ea(a),B1(F)){if(D=F.nextSibling&&F.nextSibling.dataset,D)var ge=D.dgst;D=ge,m=Error(r(419)),m.stack="",m.digest=D,Wc({value:m,source:null,stack:null}),a=n1(i,a,f)}else if(ni||Kc(i,a,f,!1),D=(f&i.childLanes)!==0,ni||D){if(D=an,D!==null&&(m=f&-f,m=(m&42)!==0?1:fo(m),m=(m&(D.suspendedLanes|f))!==0?0:m,m!==0&&m!==K.retryLane))throw K.retryLane=m,Al(i,m),ss(D,i,m),ny;F.data==="$?"||w1(),a=n1(i,a,f)}else F.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=K.treeContext,Sn=ks(F.nextSibling),Ri=a,zt=!0,To=null,rr=!1,i!==null&&(gs[ms++]=Rr,gs[ms++]=Or,gs[ms++]=Co,Rr=i.id,Or=i.overflow,Co=a),a=t1(a,m.children),a.flags|=4096);return a}return v?(Sa(),v=m.fallback,F=a.mode,K=i.child,ge=K.sibling,m=Nr(K,{mode:"hidden",children:m.children}),m.subtreeFlags=K.subtreeFlags&65011712,ge!==null?v=Nr(ge,v):(v=So(v,F,f,null),v.flags|=2),v.return=a,m.return=a,m.sibling=v,a.child=m,m=v,v=a.child,F=i.child.memoizedState,F===null?F=J0(f):(K=F.cachePool,K!==null?(ge=Wn._currentValue,K=K.parent!==ge?{parent:ge,pool:ge}:K):K=Zp(),F={baseLanes:F.baseLanes|f,cachePool:K}),v.memoizedState=F,v.childLanes=e1(i,D,f),a.memoizedState=Q0,m):(Ea(a),f=i.child,i=f.sibling,f=Nr(f,{mode:"visible",children:m.children}),f.return=a,f.sibling=null,i!==null&&(D=a.deletions,D===null?(a.deletions=[i],a.flags|=16):D.push(i)),a.child=f,a.memoizedState=null,f)}function t1(i,a){return a=xd({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function xd(i,a){return i=Ji(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function n1(i,a,f){return jl(a,i.child,null,f),i=t1(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function dy(i,a,f){i.lanes|=a;var m=i.alternate;m!==null&&(m.lanes|=a),w0(i.return,a,f)}function i1(i,a,f,m,v){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:v}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=f,T.tailMode=v)}function hy(i,a,f){var m=a.pendingProps,v=m.revealOrder,T=m.tail;if(ci(i,a,m.children,f),m=Kn.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&dy(i,f,a);else if(i.tag===19)dy(i,f,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}switch(oe(Kn,m),v){case"forwards":for(f=a.child,v=null;f!==null;)i=f.alternate,i!==null&&hd(i)===null&&(v=f),f=f.sibling;f=v,f===null?(v=a.child,a.child=null):(v=f.sibling,f.sibling=null),i1(a,!1,v,f,T);break;case"backwards":for(f=null,v=a.child,a.child=null;v!==null;){if(i=v.alternate,i!==null&&hd(i)===null){a.child=v;break}i=v.sibling,v.sibling=f,f=v,v=i}i1(a,!0,f,null,T);break;case"together":i1(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function kr(i,a,f){if(i!==null&&(a.dependencies=i.dependencies),Na|=a.lanes,(f&a.childLanes)===0)if(i!==null){if(Kc(i,a,f,!1),(f&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,f=Nr(i,i.pendingProps),a.child=f,f.return=a;i.sibling!==null;)i=i.sibling,f=f.sibling=Nr(i,i.pendingProps),f.return=a;f.sibling=null}return a.child}function s1(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Zf(i)))}function GC(i,a,f){switch(a.tag){case 3:Ge(a,a.stateNode.containerInfo),xa(a,Wn,i.memoizedState.cache),Xc();break;case 27:case 5:bn(a);break;case 4:Ge(a,a.stateNode.containerInfo);break;case 10:xa(a,a.type,a.memoizedProps.value);break;case 13:var m=a.memoizedState;if(m!==null)return m.dehydrated!==null?(Ea(a),a.flags|=128,null):(f&a.child.childLanes)!==0?fy(i,a,f):(Ea(a),i=kr(i,a,f),i!==null?i.sibling:null);Ea(a);break;case 19:var v=(i.flags&128)!==0;if(m=(f&a.childLanes)!==0,m||(Kc(i,a,f,!1),m=(f&a.childLanes)!==0),v){if(m)return hy(i,a,f);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),oe(Kn,Kn.current),m)break;return null;case 22:case 23:return a.lanes=0,ay(i,a,f);case 24:xa(a,Wn,i.memoizedState.cache)}return kr(i,a,f)}function gy(i,a,f){if(i!==null)if(i.memoizedProps!==a.pendingProps)ni=!0;else{if(!s1(i,f)&&(a.flags&128)===0)return ni=!1,GC(i,a,f);ni=(i.flags&131072)!==0}else ni=!1,zt&&(a.flags&1048576)!==0&&$p(a,Kf,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var m=a.elementType,v=m._init;if(m=v(m._payload),a.type=m,typeof m=="function")h0(m)?(i=Mo(m,i),a.tag=1,a=cy(null,a,m,i,f)):(a.tag=0,a=Z0(null,a,m,i,f));else{if(m!=null){if(v=m.$$typeof,v===V){a.tag=11,a=iy(null,a,m,i,f);break e}else if(v===X){a.tag=14,a=sy(null,a,m,i,f);break e}}throw a=ke(m)||m,Error(r(306,a,""))}}return a;case 0:return Z0(i,a,a.type,a.pendingProps,f);case 1:return m=a.type,v=Mo(m,a.pendingProps),cy(i,a,m,v,f);case 3:e:{if(Ge(a,a.stateNode.containerInfo),i===null)throw Error(r(387));m=a.pendingProps;var T=a.memoizedState;v=T.element,_0(i,a),iu(a,m,null,f);var D=a.memoizedState;if(m=D.cache,xa(a,Wn,m),m!==T.cache&&v0(a,[Wn],f,!0),nu(),m=D.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:D.cache},a.updateQueue.baseState=T,a.memoizedState=T,a.flags&256){a=uy(i,a,m,f);break e}else if(m!==v){v=ds(Error(r(424)),a),Wc(v),a=uy(i,a,m,f);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Sn=ks(i.firstChild),Ri=a,zt=!0,To=null,rr=!0,f=qx(a,null,m,f),a.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Xc(),m===v){a=kr(i,a,f);break e}ci(i,a,m,f)}a=a.child}return a;case 26:return pd(i,a),i===null?(f=y2(a.type,null,a.pendingProps,null))?a.memoizedState=f:zt||(f=a.type,i=a.pendingProps,m=Id(we.current).createElement(f),m[Jn]=a,m[wn]=i,fi(m,f,i),qt(m),a.stateNode=m):a.memoizedState=y2(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return bn(a),i===null&&zt&&(m=a.stateNode=m2(a.type,a.pendingProps,we.current),Ri=a,rr=!0,v=Sn,Ma(a.type)?(P1=v,Sn=ks(m.firstChild)):Sn=v),ci(i,a,a.pendingProps.children,f),pd(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&zt&&((v=m=Sn)&&(m=bA(m,a.type,a.pendingProps,rr),m!==null?(a.stateNode=m,Ri=a,Sn=ks(m.firstChild),rr=!1,v=!0):v=!1),v||_o(a)),bn(a),v=a.type,T=a.pendingProps,D=i!==null?i.memoizedProps:null,m=T.children,L1(v,T)?m=null:D!==null&&L1(v,D)&&(a.flags|=32),a.memoizedState!==null&&(v=D0(i,a,BC,null,null,f),Au._currentValue=v),pd(i,a),ci(i,a,m,f),a.child;case 6:return i===null&&zt&&((i=f=Sn)&&(f=wA(f,a.pendingProps,rr),f!==null?(a.stateNode=f,Ri=a,Sn=null,i=!0):i=!1),i||_o(a)),null;case 13:return fy(i,a,f);case 4:return Ge(a,a.stateNode.containerInfo),m=a.pendingProps,i===null?a.child=jl(a,null,m,f):ci(i,a,m,f),a.child;case 11:return iy(i,a,a.type,a.pendingProps,f);case 7:return ci(i,a,a.pendingProps,f),a.child;case 8:return ci(i,a,a.pendingProps.children,f),a.child;case 12:return ci(i,a,a.pendingProps.children,f),a.child;case 10:return m=a.pendingProps,xa(a,a.type,m.value),ci(i,a,m.children,f),a.child;case 9:return v=a.type._context,m=a.pendingProps.children,Ro(a),v=wi(v),m=m(v),a.flags|=1,ci(i,a,m,f),a.child;case 14:return sy(i,a,a.type,a.pendingProps,f);case 15:return ry(i,a,a.type,a.pendingProps,f);case 19:return hy(i,a,f);case 31:return m=a.pendingProps,f=a.mode,m={mode:m.mode,children:m.children},i===null?(f=xd(m,f),f.ref=a.ref,a.child=f,f.return=a,a=f):(f=Nr(i.child,m),f.ref=a.ref,a.child=f,f.return=a,a=f),a;case 22:return ay(i,a,f);case 24:return Ro(a),m=wi(Wn),i===null?(v=C0(),v===null&&(v=an,T=E0(),v.pooledCache=T,T.refCount++,T!==null&&(v.pooledCacheLanes|=f),v=T),a.memoizedState={parent:m,cache:v},T0(a),xa(a,Wn,v)):((i.lanes&f)!==0&&(_0(i,a),iu(a,null,null,f),nu()),v=i.memoizedState,T=a.memoizedState,v.parent!==m?(v={parent:m,cache:m},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),xa(a,Wn,m)):(m=T.cache,xa(a,Wn,m),m!==v.cache&&v0(a,[Wn],f,!0))),ci(i,a,a.pendingProps.children,f),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function jr(i){i.flags|=4}function my(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!S2(a)){if(a=ps.current,a!==null&&((Bt&4194048)===Bt?ar!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||a!==ar))throw eu=A0,Qp;i.flags|=8192}}function yd(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?ra():536870912,i.lanes|=a,Fl|=a)}function uu(i,a){if(!zt)switch(i.tailMode){case"hidden":a=i.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?i.tail=null:f.sibling=null;break;case"collapsed":f=i.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function xn(i){var a=i.alternate!==null&&i.alternate.child===i.child,f=0,m=0;if(a)for(var v=i.child;v!==null;)f|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)f|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=m,i.childLanes=f,a}function qC(i,a,f){var m=a.pendingProps;switch(x0(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(a),null;case 1:return xn(a),null;case 3:return f=a.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),a.memoizedState.cache!==m&&(a.flags|=2048),Mr(Wn),It(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(Yc(a)?jr(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Yp())),xn(a),null;case 26:return f=a.memoizedState,i===null?(jr(a),f!==null?(xn(a),my(a,f)):(xn(a),a.flags&=-16777217)):f?f!==i.memoizedState?(jr(a),xn(a),my(a,f)):(xn(a),a.flags&=-16777217):(i.memoizedProps!==m&&jr(a),xn(a),a.flags&=-16777217),null;case 27:_e(a),f=we.current;var v=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==m&&jr(a);else{if(!m){if(a.stateNode===null)throw Error(r(166));return xn(a),null}i=Oe.current,Yc(a)?Gp(a):(i=m2(v,m,f),a.stateNode=i,jr(a))}return xn(a),null;case 5:if(_e(a),f=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==m&&jr(a);else{if(!m){if(a.stateNode===null)throw Error(r(166));return xn(a),null}if(i=Oe.current,Yc(a))Gp(a);else{switch(v=Id(we.current),i){case 1:i=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:i=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":i=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":i=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":i=v.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof m.is=="string"?v.createElement("select",{is:m.is}):v.createElement("select"),m.multiple?i.multiple=!0:m.size&&(i.size=m.size);break;default:i=typeof m.is=="string"?v.createElement(f,{is:m.is}):v.createElement(f)}}i[Jn]=a,i[wn]=m;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)i.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=i;e:switch(fi(i,f,m),f){case"button":case"input":case"select":case"textarea":i=!!m.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&jr(a)}}return xn(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==m&&jr(a);else{if(typeof m!="string"&&a.stateNode===null)throw Error(r(166));if(i=we.current,Yc(a)){if(i=a.stateNode,f=a.memoizedProps,m=null,v=Ri,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}i[Jn]=a,i=!!(i.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||l2(i.nodeValue,f)),i||_o(a)}else i=Id(i).createTextNode(m),i[Jn]=a,a.stateNode=i}return xn(a),null;case 13:if(m=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=Yc(a),m!==null&&m.dehydrated!==null){if(i===null){if(!v)throw Error(r(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Jn]=a}else Xc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;xn(a),v=!1}else v=Yp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return a.flags&256?(Lr(a),a):(Lr(a),null)}if(Lr(a),(a.flags&128)!==0)return a.lanes=f,a;if(f=m!==null,i=i!==null&&i.memoizedState!==null,f){m=a.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool);var T=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(T=m.memoizedState.cachePool.pool),T!==v&&(m.flags|=2048)}return f!==i&&f&&(a.child.flags|=8192),yd(a,a.updateQueue),xn(a),null;case 4:return It(),i===null&&R1(a.stateNode.containerInfo),xn(a),null;case 10:return Mr(a.type),xn(a),null;case 19:if(ce(Kn),v=a.memoizedState,v===null)return xn(a),null;if(m=(a.flags&128)!==0,T=v.rendering,T===null)if(m)uu(v,!1);else{if(Cn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(T=hd(i),T!==null){for(a.flags|=128,uu(v,!1),i=T.updateQueue,a.updateQueue=i,yd(a,i),a.subtreeFlags=0,i=f,f=a.child;f!==null;)Hp(f,i),f=f.sibling;return oe(Kn,Kn.current&1|2),a.child}i=i.sibling}v.tail!==null&&lt()>vd&&(a.flags|=128,m=!0,uu(v,!1),a.lanes=4194304)}else{if(!m)if(i=hd(T),i!==null){if(a.flags|=128,m=!0,i=i.updateQueue,a.updateQueue=i,yd(a,i),uu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!T.alternate&&!zt)return xn(a),null}else 2*lt()-v.renderingStartTime>vd&&f!==536870912&&(a.flags|=128,m=!0,uu(v,!1),a.lanes=4194304);v.isBackwards?(T.sibling=a.child,a.child=T):(i=v.last,i!==null?i.sibling=T:a.child=T,v.last=T)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=lt(),a.sibling=null,i=Kn.current,oe(Kn,m?i&1|2:i&1),a):(xn(a),null);case 22:case 23:return Lr(a),I0(),m=a.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(a.flags|=8192):m&&(a.flags|=8192),m?(f&536870912)!==0&&(a.flags&128)===0&&(xn(a),a.subtreeFlags&6&&(a.flags|=8192)):xn(a),f=a.updateQueue,f!==null&&yd(a,f.retryQueue),f=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),m=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(m=a.memoizedState.cachePool.pool),m!==f&&(a.flags|=2048),i!==null&&ce(Oo),null;case 24:return f=null,i!==null&&(f=i.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),Mr(Wn),xn(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function YC(i,a){switch(x0(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Mr(Wn),It(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return _e(a),null;case 13:if(Lr(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Xc()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ce(Kn),null;case 4:return It(),null;case 10:return Mr(a.type),null;case 22:case 23:return Lr(a),I0(),i!==null&&ce(Oo),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Mr(Wn),null;case 25:return null;default:return null}}function py(i,a){switch(x0(a),a.tag){case 3:Mr(Wn),It();break;case 26:case 27:case 5:_e(a);break;case 4:It();break;case 13:Lr(a);break;case 19:ce(Kn);break;case 10:Mr(a.type);break;case 22:case 23:Lr(a),I0(),i!==null&&ce(Oo);break;case 24:Mr(Wn)}}function fu(i,a){try{var f=a.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var v=m.next;f=v;do{if((f.tag&i)===i){m=void 0;var T=f.create,D=f.inst;m=T(),D.destroy=m}f=f.next}while(f!==v)}}catch(F){nn(a,a.return,F)}}function Ca(i,a,f){try{var m=a.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var T=v.next;m=T;do{if((m.tag&i)===i){var D=m.inst,F=D.destroy;if(F!==void 0){D.destroy=void 0,v=a;var K=f,ge=F;try{ge()}catch(Ee){nn(v,K,Ee)}}}m=m.next}while(m!==T)}}catch(Ee){nn(a,a.return,Ee)}}function xy(i){var a=i.updateQueue;if(a!==null){var f=i.stateNode;try{sx(a,f)}catch(m){nn(i,i.return,m)}}}function yy(i,a,f){f.props=Mo(i.type,i.memoizedProps),f.state=i.memoizedState;try{f.componentWillUnmount()}catch(m){nn(i,a,m)}}function du(i,a){try{var f=i.ref;if(f!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof f=="function"?i.refCleanup=f(m):f.current=m}}catch(v){nn(i,a,v)}}function or(i,a){var f=i.ref,m=i.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(v){nn(i,a,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(v){nn(i,a,v)}else f.current=null}function by(i){var a=i.type,f=i.memoizedProps,m=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break e;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(v){nn(i,i.return,v)}}function r1(i,a,f){try{var m=i.stateNode;gA(m,i.type,f,a),m[wn]=a}catch(v){nn(i,i.return,v)}}function wy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ma(i.type)||i.tag===4}function a1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||wy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ma(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function o1(i,a,f){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(i,a):(a=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,a.appendChild(i),f=f._reactRootContainer,f!=null||a.onclick!==null||(a.onclick=Od));else if(m!==4&&(m===27&&Ma(i.type)&&(f=i.stateNode,a=null),i=i.child,i!==null))for(o1(i,a,f),i=i.sibling;i!==null;)o1(i,a,f),i=i.sibling}function bd(i,a,f){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?f.insertBefore(i,a):f.appendChild(i);else if(m!==4&&(m===27&&Ma(i.type)&&(f=i.stateNode),i=i.child,i!==null))for(bd(i,a,f),i=i.sibling;i!==null;)bd(i,a,f),i=i.sibling}function vy(i){var a=i.stateNode,f=i.memoizedProps;try{for(var m=i.type,v=a.attributes;v.length;)a.removeAttributeNode(v[0]);fi(a,m,f),a[Jn]=i,a[wn]=f}catch(T){nn(i,i.return,T)}}var Br=!1,Dn=!1,l1=!1,Ey=typeof WeakSet=="function"?WeakSet:Set,ii=null;function XC(i,a){if(i=i.containerInfo,M1=Bd,i=_(i),O(i)){if("selectionStart"in i)var f={start:i.selectionStart,end:i.selectionEnd};else e:{f=(f=i.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var v=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var D=0,F=-1,K=-1,ge=0,Ee=0,Ce=i,me=null;t:for(;;){for(var xe;Ce!==f||v!==0&&Ce.nodeType!==3||(F=D+v),Ce!==T||m!==0&&Ce.nodeType!==3||(K=D+m),Ce.nodeType===3&&(D+=Ce.nodeValue.length),(xe=Ce.firstChild)!==null;)me=Ce,Ce=xe;for(;;){if(Ce===i)break t;if(me===f&&++ge===v&&(F=D),me===T&&++Ee===m&&(K=D),(xe=Ce.nextSibling)!==null)break;Ce=me,me=Ce.parentNode}Ce=xe}f=F===-1||K===-1?null:{start:F,end:K}}else f=null}f=f||{start:0,end:0}}else f=null;for(D1={focusedElem:i,selectionRange:f},Bd=!1,ii=a;ii!==null;)if(a=ii,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,ii=i;else for(;ii!==null;){switch(a=ii,T=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&T!==null){i=void 0,f=a,v=T.memoizedProps,T=T.memoizedState,m=f.stateNode;try{var rt=Mo(f.type,v,f.elementType===f.type);i=m.getSnapshotBeforeUpdate(rt,T),m.__reactInternalSnapshotBeforeUpdate=i}catch(it){nn(f,f.return,it)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,f=i.nodeType,f===9)j1(i);else if(f===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":j1(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,ii=i;break}ii=a.return}}function Sy(i,a,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:Aa(i,f),m&4&&fu(5,f);break;case 1:if(Aa(i,f),m&4)if(i=f.stateNode,a===null)try{i.componentDidMount()}catch(D){nn(f,f.return,D)}else{var v=Mo(f.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(v,a,i.__reactInternalSnapshotBeforeUpdate)}catch(D){nn(f,f.return,D)}}m&64&&xy(f),m&512&&du(f,f.return);break;case 3:if(Aa(i,f),m&64&&(i=f.updateQueue,i!==null)){if(a=null,f.child!==null)switch(f.child.tag){case 27:case 5:a=f.child.stateNode;break;case 1:a=f.child.stateNode}try{sx(i,a)}catch(D){nn(f,f.return,D)}}break;case 27:a===null&&m&4&&vy(f);case 26:case 5:Aa(i,f),a===null&&m&4&&by(f),m&512&&du(f,f.return);break;case 12:Aa(i,f);break;case 13:Aa(i,f),m&4&&Ty(i,f),m&64&&(i=f.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(f=iA.bind(null,f),vA(i,f))));break;case 22:if(m=f.memoizedState!==null||Br,!m){a=a!==null&&a.memoizedState!==null||Dn,v=Br;var T=Dn;Br=m,(Dn=a)&&!T?Ta(i,f,(f.subtreeFlags&8772)!==0):Aa(i,f),Br=v,Dn=T}break;case 30:break;default:Aa(i,f)}}function Cy(i){var a=i.alternate;a!==null&&(i.alternate=null,Cy(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&ho(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var hn=null,Vi=!1;function Pr(i,a,f){for(f=f.child;f!==null;)Ay(i,a,f),f=f.sibling}function Ay(i,a,f){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(kn,f)}catch{}switch(f.tag){case 26:Dn||or(f,a),Pr(i,a,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Dn||or(f,a);var m=hn,v=Vi;Ma(f.type)&&(hn=f.stateNode,Vi=!1),Pr(i,a,f),vu(f.stateNode),hn=m,Vi=v;break;case 5:Dn||or(f,a);case 6:if(m=hn,v=Vi,hn=null,Pr(i,a,f),hn=m,Vi=v,hn!==null)if(Vi)try{(hn.nodeType===9?hn.body:hn.nodeName==="HTML"?hn.ownerDocument.body:hn).removeChild(f.stateNode)}catch(T){nn(f,a,T)}else try{hn.removeChild(f.stateNode)}catch(T){nn(f,a,T)}break;case 18:hn!==null&&(Vi?(i=hn,h2(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,f.stateNode),Ru(i)):h2(hn,f.stateNode));break;case 4:m=hn,v=Vi,hn=f.stateNode.containerInfo,Vi=!0,Pr(i,a,f),hn=m,Vi=v;break;case 0:case 11:case 14:case 15:Dn||Ca(2,f,a),Dn||Ca(4,f,a),Pr(i,a,f);break;case 1:Dn||(or(f,a),m=f.stateNode,typeof m.componentWillUnmount=="function"&&yy(f,a,m)),Pr(i,a,f);break;case 21:Pr(i,a,f);break;case 22:Dn=(m=Dn)||f.memoizedState!==null,Pr(i,a,f),Dn=m;break;default:Pr(i,a,f)}}function Ty(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ru(i)}catch(f){nn(a,a.return,f)}}function WC(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Ey),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Ey),a;default:throw Error(r(435,i.tag))}}function c1(i,a){var f=WC(i);a.forEach(function(m){var v=sA.bind(null,i,m);f.has(m)||(f.add(m),m.then(v,v))})}function es(i,a){var f=a.deletions;if(f!==null)for(var m=0;m<f.length;m++){var v=f[m],T=i,D=a,F=D;e:for(;F!==null;){switch(F.tag){case 27:if(Ma(F.type)){hn=F.stateNode,Vi=!1;break e}break;case 5:hn=F.stateNode,Vi=!1;break e;case 3:case 4:hn=F.stateNode.containerInfo,Vi=!0;break e}F=F.return}if(hn===null)throw Error(r(160));Ay(T,D,v),hn=null,Vi=!1,T=v.alternate,T!==null&&(T.return=null),v.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)_y(a,i),a=a.sibling}var Ls=null;function _y(i,a){var f=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:es(a,i),ts(i),m&4&&(Ca(3,i,i.return),fu(3,i),Ca(5,i,i.return));break;case 1:es(a,i),ts(i),m&512&&(Dn||f===null||or(f,f.return)),m&64&&Br&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(f=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var v=Ls;if(es(a,i),ts(i),m&512&&(Dn||f===null||or(f,f.return)),m&4){var T=f!==null?f.memoizedState:null;if(m=i.memoizedState,f===null)if(m===null)if(i.stateNode===null){e:{m=i.type,f=i.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":T=v.getElementsByTagName("title")[0],(!T||T[us]||T[Jn]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=v.createElement(m),v.head.insertBefore(T,v.querySelector("head > title"))),fi(T,m,f),T[Jn]=i,qt(T),m=T;break e;case"link":var D=v2("link","href",v).get(m+(f.href||""));if(D){for(var F=0;F<D.length;F++)if(T=D[F],T.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&T.getAttribute("rel")===(f.rel==null?null:f.rel)&&T.getAttribute("title")===(f.title==null?null:f.title)&&T.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){D.splice(F,1);break t}}T=v.createElement(m),fi(T,m,f),v.head.appendChild(T);break;case"meta":if(D=v2("meta","content",v).get(m+(f.content||""))){for(F=0;F<D.length;F++)if(T=D[F],T.getAttribute("content")===(f.content==null?null:""+f.content)&&T.getAttribute("name")===(f.name==null?null:f.name)&&T.getAttribute("property")===(f.property==null?null:f.property)&&T.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&T.getAttribute("charset")===(f.charSet==null?null:f.charSet)){D.splice(F,1);break t}}T=v.createElement(m),fi(T,m,f),v.head.appendChild(T);break;default:throw Error(r(468,m))}T[Jn]=i,qt(T),m=T}i.stateNode=m}else E2(v,i.type,i.stateNode);else i.stateNode=w2(v,m,i.memoizedProps);else T!==m?(T===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):T.count--,m===null?E2(v,i.type,i.stateNode):w2(v,m,i.memoizedProps)):m===null&&i.stateNode!==null&&r1(i,i.memoizedProps,f.memoizedProps)}break;case 27:es(a,i),ts(i),m&512&&(Dn||f===null||or(f,f.return)),f!==null&&m&4&&r1(i,i.memoizedProps,f.memoizedProps);break;case 5:if(es(a,i),ts(i),m&512&&(Dn||f===null||or(f,f.return)),i.flags&32){v=i.stateNode;try{qn(v,"")}catch(xe){nn(i,i.return,xe)}}m&4&&i.stateNode!=null&&(v=i.memoizedProps,r1(i,v,f!==null?f.memoizedProps:v)),m&1024&&(l1=!0);break;case 6:if(es(a,i),ts(i),m&4){if(i.stateNode===null)throw Error(r(162));m=i.memoizedProps,f=i.stateNode;try{f.nodeValue=m}catch(xe){nn(i,i.return,xe)}}break;case 3:if(Ld=null,v=Ls,Ls=Md(a.containerInfo),es(a,i),Ls=v,ts(i),m&4&&f!==null&&f.memoizedState.isDehydrated)try{Ru(a.containerInfo)}catch(xe){nn(i,i.return,xe)}l1&&(l1=!1,Ny(i));break;case 4:m=Ls,Ls=Md(i.stateNode.containerInfo),es(a,i),ts(i),Ls=m;break;case 12:es(a,i),ts(i);break;case 13:es(a,i),ts(i),i.child.flags&8192&&i.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(m1=lt()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,c1(i,m)));break;case 22:v=i.memoizedState!==null;var K=f!==null&&f.memoizedState!==null,ge=Br,Ee=Dn;if(Br=ge||v,Dn=Ee||K,es(a,i),Dn=Ee,Br=ge,ts(i),m&8192)e:for(a=i.stateNode,a._visibility=v?a._visibility&-2:a._visibility|1,v&&(f===null||K||Br||Dn||Do(i)),f=null,a=i;;){if(a.tag===5||a.tag===26){if(f===null){K=f=a;try{if(T=K.stateNode,v)D=T.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{F=K.stateNode;var Ce=K.memoizedProps.style,me=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;F.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch(xe){nn(K,K.return,xe)}}}else if(a.tag===6){if(f===null){K=a;try{K.stateNode.nodeValue=v?"":K.memoizedProps}catch(xe){nn(K,K.return,xe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;f===a&&(f=null),a=a.return}f===a&&(f=null),a.sibling.return=a.return,a=a.sibling}m&4&&(m=i.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,c1(i,f))));break;case 19:es(a,i),ts(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,c1(i,m)));break;case 30:break;case 21:break;default:es(a,i),ts(i)}}function ts(i){var a=i.flags;if(a&2){try{for(var f,m=i.return;m!==null;){if(wy(m)){f=m;break}m=m.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var v=f.stateNode,T=a1(i);bd(i,T,v);break;case 5:var D=f.stateNode;f.flags&32&&(qn(D,""),f.flags&=-33);var F=a1(i);bd(i,F,D);break;case 3:case 4:var K=f.stateNode.containerInfo,ge=a1(i);o1(i,ge,K);break;default:throw Error(r(161))}}catch(Ee){nn(i,i.return,Ee)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Ny(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;Ny(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Aa(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Sy(i,a.alternate,a),a=a.sibling}function Do(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Ca(4,a,a.return),Do(a);break;case 1:or(a,a.return);var f=a.stateNode;typeof f.componentWillUnmount=="function"&&yy(a,a.return,f),Do(a);break;case 27:vu(a.stateNode);case 26:case 5:or(a,a.return),Do(a);break;case 22:a.memoizedState===null&&Do(a);break;case 30:Do(a);break;default:Do(a)}i=i.sibling}}function Ta(i,a,f){for(f=f&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var m=a.alternate,v=i,T=a,D=T.flags;switch(T.tag){case 0:case 11:case 15:Ta(v,T,f),fu(4,T);break;case 1:if(Ta(v,T,f),m=T,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ge){nn(m,m.return,ge)}if(m=T,v=m.updateQueue,v!==null){var F=m.stateNode;try{var K=v.shared.hiddenCallbacks;if(K!==null)for(v.shared.hiddenCallbacks=null,v=0;v<K.length;v++)ix(K[v],F)}catch(ge){nn(m,m.return,ge)}}f&&D&64&&xy(T),du(T,T.return);break;case 27:vy(T);case 26:case 5:Ta(v,T,f),f&&m===null&&D&4&&by(T),du(T,T.return);break;case 12:Ta(v,T,f);break;case 13:Ta(v,T,f),f&&D&4&&Ty(v,T);break;case 22:T.memoizedState===null&&Ta(v,T,f),du(T,T.return);break;case 30:break;default:Ta(v,T,f)}a=a.sibling}}function u1(i,a){var f=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==f&&(i!=null&&i.refCount++,f!=null&&Zc(f))}function f1(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Zc(i))}function lr(i,a,f,m){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ry(i,a,f,m),a=a.sibling}function Ry(i,a,f,m){var v=a.flags;switch(a.tag){case 0:case 11:case 15:lr(i,a,f,m),v&2048&&fu(9,a);break;case 1:lr(i,a,f,m);break;case 3:lr(i,a,f,m),v&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Zc(i)));break;case 12:if(v&2048){lr(i,a,f,m),i=a.stateNode;try{var T=a.memoizedProps,D=T.id,F=T.onPostCommit;typeof F=="function"&&F(D,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(K){nn(a,a.return,K)}}else lr(i,a,f,m);break;case 13:lr(i,a,f,m);break;case 23:break;case 22:T=a.stateNode,D=a.alternate,a.memoizedState!==null?T._visibility&2?lr(i,a,f,m):hu(i,a):T._visibility&2?lr(i,a,f,m):(T._visibility|=2,Bl(i,a,f,m,(a.subtreeFlags&10256)!==0)),v&2048&&u1(D,a);break;case 24:lr(i,a,f,m),v&2048&&f1(a.alternate,a);break;default:lr(i,a,f,m)}}function Bl(i,a,f,m,v){for(v=v&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var T=i,D=a,F=f,K=m,ge=D.flags;switch(D.tag){case 0:case 11:case 15:Bl(T,D,F,K,v),fu(8,D);break;case 23:break;case 22:var Ee=D.stateNode;D.memoizedState!==null?Ee._visibility&2?Bl(T,D,F,K,v):hu(T,D):(Ee._visibility|=2,Bl(T,D,F,K,v)),v&&ge&2048&&u1(D.alternate,D);break;case 24:Bl(T,D,F,K,v),v&&ge&2048&&f1(D.alternate,D);break;default:Bl(T,D,F,K,v)}a=a.sibling}}function hu(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var f=i,m=a,v=m.flags;switch(m.tag){case 22:hu(f,m),v&2048&&u1(m.alternate,m);break;case 24:hu(f,m),v&2048&&f1(m.alternate,m);break;default:hu(f,m)}a=a.sibling}}var gu=8192;function Pl(i){if(i.subtreeFlags&gu)for(i=i.child;i!==null;)Oy(i),i=i.sibling}function Oy(i){switch(i.tag){case 26:Pl(i),i.flags&gu&&i.memoizedState!==null&&LA(Ls,i.memoizedState,i.memoizedProps);break;case 5:Pl(i);break;case 3:case 4:var a=Ls;Ls=Md(i.stateNode.containerInfo),Pl(i),Ls=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=gu,gu=16777216,Pl(i),gu=a):Pl(i));break;default:Pl(i)}}function Iy(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function mu(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var f=0;f<a.length;f++){var m=a[f];ii=m,Dy(m,i)}Iy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)My(i),i=i.sibling}function My(i){switch(i.tag){case 0:case 11:case 15:mu(i),i.flags&2048&&Ca(9,i,i.return);break;case 3:mu(i);break;case 12:mu(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,wd(i)):mu(i);break;default:mu(i)}}function wd(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var f=0;f<a.length;f++){var m=a[f];ii=m,Dy(m,i)}Iy(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Ca(8,a,a.return),wd(a);break;case 22:f=a.stateNode,f._visibility&2&&(f._visibility&=-3,wd(a));break;default:wd(a)}i=i.sibling}}function Dy(i,a){for(;ii!==null;){var f=ii;switch(f.tag){case 0:case 11:case 15:Ca(8,f,a);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Zc(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,ii=m;else e:for(f=i;ii!==null;){m=ii;var v=m.sibling,T=m.return;if(Cy(m),m===f){ii=null;break e}if(v!==null){v.return=T,ii=v;break e}ii=T}}}var KC={getCacheForType:function(i){var a=wi(Wn),f=a.data.get(i);return f===void 0&&(f=i(),a.data.set(i,f)),f}},ZC=typeof WeakMap=="function"?WeakMap:Map,Wt=0,an=null,Nt=null,Bt=0,Kt=0,ns=null,_a=!1,Ul=!1,d1=!1,Ur=0,Cn=0,Na=0,Lo=0,h1=0,xs=0,Fl=0,pu=null,zi=null,g1=!1,m1=0,vd=1/0,Ed=null,Ra=null,ui=0,Oa=null,Vl=null,zl=0,p1=0,x1=null,Ly=null,xu=0,y1=null;function is(){if((Wt&2)!==0&&Bt!==0)return Bt&-Bt;if(se.T!==null){var i=Rl;return i!==0?i:A1()}return vr()}function ky(){xs===0&&(xs=(Bt&536870912)===0||zt?gi():536870912);var i=ps.current;return i!==null&&(i.flags|=32),xs}function ss(i,a,f){(i===an&&(Kt===2||Kt===9)||i.cancelPendingCommit!==null)&&(Hl(i,0),Ia(i,Bt,xs,!1)),Wi(i,f),((Wt&2)===0||i!==an)&&(i===an&&((Wt&2)===0&&(Lo|=f),Cn===4&&Ia(i,Bt,xs,!1)),cr(i))}function jy(i,a,f){if((Wt&6)!==0)throw Error(r(327));var m=!f&&(a&124)===0&&(a&i.expiredLanes)===0||jt(i,a),v=m?eA(i,a):v1(i,a,!0),T=m;do{if(v===0){Ul&&!m&&Ia(i,a,0,!1);break}else{if(f=i.current.alternate,T&&!QC(f)){v=v1(i,a,!1),T=!1;continue}if(v===2){if(T=a,i.errorRecoveryDisabledLanes&T)var D=0;else D=i.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){a=D;e:{var F=i;v=pu;var K=F.current.memoizedState.isDehydrated;if(K&&(Hl(F,D).flags|=256),D=v1(F,D,!1),D!==2){if(d1&&!K){F.errorRecoveryDisabledLanes|=T,Lo|=T,v=4;break e}T=zi,zi=v,T!==null&&(zi===null?zi=T:zi.push.apply(zi,T))}v=D}if(T=!1,v!==2)continue}}if(v===1){Hl(i,0),Ia(i,a,0,!0);break}e:{switch(m=i,T=v,T){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Ia(m,a,xs,!_a);break e;case 2:zi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(v=m1+300-lt(),10<v)){if(Ia(m,a,xs,!_a),Tt(m,0,!0)!==0)break e;m.timeoutHandle=f2(By.bind(null,m,f,zi,Ed,g1,a,xs,Lo,Fl,_a,T,2,-0,0),v);break e}By(m,f,zi,Ed,g1,a,xs,Lo,Fl,_a,T,0,-0,0)}}break}while(!0);cr(i)}function By(i,a,f,m,v,T,D,F,K,ge,Ee,Ce,me,xe){if(i.timeoutHandle=-1,Ce=a.subtreeFlags,(Ce&8192||(Ce&16785408)===16785408)&&(Cu={stylesheets:null,count:0,unsuspend:DA},Oy(a),Ce=kA(),Ce!==null)){i.cancelPendingCommit=Ce($y.bind(null,i,a,T,f,m,v,D,F,K,Ee,1,me,xe)),Ia(i,T,D,!ge);return}$y(i,a,T,f,m,v,D,F,K)}function QC(i){for(var a=i;;){var f=a.tag;if((f===0||f===11||f===15)&&a.flags&16384&&(f=a.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var v=f[m],T=v.getSnapshot;v=v.value;try{if(!d(T(),v))return!1}catch{return!1}}if(f=a.child,a.subtreeFlags&16384&&f!==null)f.return=a,a=f;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ia(i,a,f,m){a&=~h1,a&=~Lo,i.suspendedLanes|=a,i.pingedLanes&=~a,m&&(i.warmLanes|=a),m=i.expirationTimes;for(var v=a;0<v;){var T=31-Ze(v),D=1<<T;m[T]=-1,v&=~D}f!==0&&Bc(i,f,a)}function Sd(){return(Wt&6)===0?(yu(0),!1):!0}function b1(){if(Nt!==null){if(Kt===0)var i=Nt.return;else i=Nt,Ir=No=null,j0(i),kl=null,lu=0,i=Nt;for(;i!==null;)py(i.alternate,i),i=i.return;Nt=null}}function Hl(i,a){var f=i.timeoutHandle;f!==-1&&(i.timeoutHandle=-1,pA(f)),f=i.cancelPendingCommit,f!==null&&(i.cancelPendingCommit=null,f()),b1(),an=i,Nt=f=Nr(i.current,null),Bt=a,Kt=0,ns=null,_a=!1,Ul=jt(i,a),d1=!1,Fl=xs=h1=Lo=Na=Cn=0,zi=pu=null,g1=!1,(a&8)!==0&&(a|=a&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=a;0<m;){var v=31-Ze(m),T=1<<v;a|=i[v],m&=~T}return Ur=a,Gf(),f}function Py(i,a){St=null,se.H=ud,a===Jc||a===ed?(a=tx(),Kt=3):a===Qp?(a=tx(),Kt=4):Kt=a===ny?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ns=a,Nt===null&&(Cn=1,md(i,ds(a,i.current)))}function Uy(){var i=se.H;return se.H=ud,i===null?ud:i}function Fy(){var i=se.A;return se.A=KC,i}function w1(){Cn=4,_a||(Bt&4194048)!==Bt&&ps.current!==null||(Ul=!0),(Na&134217727)===0&&(Lo&134217727)===0||an===null||Ia(an,Bt,xs,!1)}function v1(i,a,f){var m=Wt;Wt|=2;var v=Uy(),T=Fy();(an!==i||Bt!==a)&&(Ed=null,Hl(i,a)),a=!1;var D=Cn;e:do try{if(Kt!==0&&Nt!==null){var F=Nt,K=ns;switch(Kt){case 8:b1(),D=6;break e;case 3:case 2:case 9:case 6:ps.current===null&&(a=!0);var ge=Kt;if(Kt=0,ns=null,$l(i,F,K,ge),f&&Ul){D=0;break e}break;default:ge=Kt,Kt=0,ns=null,$l(i,F,K,ge)}}JC(),D=Cn;break}catch(Ee){Py(i,Ee)}while(!0);return a&&i.shellSuspendCounter++,Ir=No=null,Wt=m,se.H=v,se.A=T,Nt===null&&(an=null,Bt=0,Gf()),D}function JC(){for(;Nt!==null;)Vy(Nt)}function eA(i,a){var f=Wt;Wt|=2;var m=Uy(),v=Fy();an!==i||Bt!==a?(Ed=null,vd=lt()+500,Hl(i,a)):Ul=jt(i,a);e:do try{if(Kt!==0&&Nt!==null){a=Nt;var T=ns;t:switch(Kt){case 1:Kt=0,ns=null,$l(i,a,T,1);break;case 2:case 9:if(Jp(T)){Kt=0,ns=null,zy(a);break}a=function(){Kt!==2&&Kt!==9||an!==i||(Kt=7),cr(i)},T.then(a,a);break e;case 3:Kt=7;break e;case 4:Kt=5;break e;case 7:Jp(T)?(Kt=0,ns=null,zy(a)):(Kt=0,ns=null,$l(i,a,T,7));break;case 5:var D=null;switch(Nt.tag){case 26:D=Nt.memoizedState;case 5:case 27:var F=Nt;if(!D||S2(D)){Kt=0,ns=null;var K=F.sibling;if(K!==null)Nt=K;else{var ge=F.return;ge!==null?(Nt=ge,Cd(ge)):Nt=null}break t}}Kt=0,ns=null,$l(i,a,T,5);break;case 6:Kt=0,ns=null,$l(i,a,T,6);break;case 8:b1(),Cn=6;break e;default:throw Error(r(462))}}tA();break}catch(Ee){Py(i,Ee)}while(!0);return Ir=No=null,se.H=m,se.A=v,Wt=f,Nt!==null?0:(an=null,Bt=0,Gf(),Cn)}function tA(){for(;Nt!==null&&!Ke();)Vy(Nt)}function Vy(i){var a=gy(i.alternate,i,Ur);i.memoizedProps=i.pendingProps,a===null?Cd(i):Nt=a}function zy(i){var a=i,f=a.alternate;switch(a.tag){case 15:case 0:a=ly(f,a,a.pendingProps,a.type,void 0,Bt);break;case 11:a=ly(f,a,a.pendingProps,a.type.render,a.ref,Bt);break;case 5:j0(a);default:py(f,a),a=Nt=Hp(a,Ur),a=gy(f,a,Ur)}i.memoizedProps=i.pendingProps,a===null?Cd(i):Nt=a}function $l(i,a,f,m){Ir=No=null,j0(a),kl=null,lu=0;var v=a.return;try{if($C(i,v,a,f,Bt)){Cn=1,md(i,ds(f,i.current)),Nt=null;return}}catch(T){if(v!==null)throw Nt=v,T;Cn=1,md(i,ds(f,i.current)),Nt=null;return}a.flags&32768?(zt||m===1?i=!0:Ul||(Bt&536870912)!==0?i=!1:(_a=i=!0,(m===2||m===9||m===3||m===6)&&(m=ps.current,m!==null&&m.tag===13&&(m.flags|=16384))),Hy(a,i)):Cd(a)}function Cd(i){var a=i;do{if((a.flags&32768)!==0){Hy(a,_a);return}i=a.return;var f=qC(a.alternate,a,Ur);if(f!==null){Nt=f;return}if(a=a.sibling,a!==null){Nt=a;return}Nt=a=i}while(a!==null);Cn===0&&(Cn=5)}function Hy(i,a){do{var f=YC(i.alternate,i);if(f!==null){f.flags&=32767,Nt=f;return}if(f=i.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!a&&(i=i.sibling,i!==null)){Nt=i;return}Nt=i=f}while(i!==null);Cn=6,Nt=null}function $y(i,a,f,m,v,T,D,F,K){i.cancelPendingCommit=null;do Ad();while(ui!==0);if((Wt&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(T=a.lanes|a.childLanes,T|=f0,Lf(i,f,T,D,F,K),i===an&&(Nt=an=null,Bt=0),Vl=a,Oa=i,zl=f,p1=T,x1=v,Ly=m,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,rA(ze,function(){return Wy(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||m){m=se.T,se.T=null,v=fe.p,fe.p=2,D=Wt,Wt|=4;try{XC(i,a,f)}finally{Wt=D,fe.p=v,se.T=m}}ui=1,Gy(),qy(),Yy()}}function Gy(){if(ui===1){ui=0;var i=Oa,a=Vl,f=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||f){f=se.T,se.T=null;var m=fe.p;fe.p=2;var v=Wt;Wt|=4;try{_y(a,i);var T=D1,D=_(i.containerInfo),F=T.focusedElem,K=T.selectionRange;if(D!==F&&F&&F.ownerDocument&&S(F.ownerDocument.documentElement,F)){if(K!==null&&O(F)){var ge=K.start,Ee=K.end;if(Ee===void 0&&(Ee=ge),"selectionStart"in F)F.selectionStart=ge,F.selectionEnd=Math.min(Ee,F.value.length);else{var Ce=F.ownerDocument||document,me=Ce&&Ce.defaultView||window;if(me.getSelection){var xe=me.getSelection(),rt=F.textContent.length,it=Math.min(K.start,rt),en=K.end===void 0?it:Math.min(K.end,rt);!xe.extend&&it>en&&(D=en,en=it,it=D);var re=w(F,it),ne=w(F,en);if(re&&ne&&(xe.rangeCount!==1||xe.anchorNode!==re.node||xe.anchorOffset!==re.offset||xe.focusNode!==ne.node||xe.focusOffset!==ne.offset)){var he=Ce.createRange();he.setStart(re.node,re.offset),xe.removeAllRanges(),it>en?(xe.addRange(he),xe.extend(ne.node,ne.offset)):(he.setEnd(ne.node,ne.offset),xe.addRange(he))}}}}for(Ce=[],xe=F;xe=xe.parentNode;)xe.nodeType===1&&Ce.push({element:xe,left:xe.scrollLeft,top:xe.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<Ce.length;F++){var Se=Ce[F];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}Bd=!!M1,D1=M1=null}finally{Wt=v,fe.p=m,se.T=f}}i.current=a,ui=2}}function qy(){if(ui===2){ui=0;var i=Oa,a=Vl,f=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||f){f=se.T,se.T=null;var m=fe.p;fe.p=2;var v=Wt;Wt|=4;try{Sy(i,a.alternate,a)}finally{Wt=v,fe.p=m,se.T=f}}ui=3}}function Yy(){if(ui===4||ui===3){ui=0,pt();var i=Oa,a=Vl,f=zl,m=Ly;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?ui=5:(ui=0,Vl=Oa=null,Xy(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(Ra=null),jn(f),a=a.stateNode,Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(kn,a,void 0,(a.current.flags&128)===128)}catch{}if(m!==null){a=se.T,v=fe.p,fe.p=2,se.T=null;try{for(var T=i.onRecoverableError,D=0;D<m.length;D++){var F=m[D];T(F.value,{componentStack:F.stack})}}finally{se.T=a,fe.p=v}}(zl&3)!==0&&Ad(),cr(i),v=i.pendingLanes,(f&4194090)!==0&&(v&42)!==0?i===y1?xu++:(xu=0,y1=i):xu=0,yu(0)}}function Xy(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Zc(a)))}function Ad(i){return Gy(),qy(),Yy(),Wy()}function Wy(){if(ui!==5)return!1;var i=Oa,a=p1;p1=0;var f=jn(zl),m=se.T,v=fe.p;try{fe.p=32>f?32:f,se.T=null,f=x1,x1=null;var T=Oa,D=zl;if(ui=0,Vl=Oa=null,zl=0,(Wt&6)!==0)throw Error(r(331));var F=Wt;if(Wt|=4,My(T.current),Ry(T,T.current,D,f),Wt=F,yu(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(kn,T)}catch{}return!0}finally{fe.p=v,se.T=m,Xy(i,a)}}function Ky(i,a,f){a=ds(f,a),a=K0(i.stateNode,a,2),i=wa(i,a,2),i!==null&&(Wi(i,2),cr(i))}function nn(i,a,f){if(i.tag===3)Ky(i,i,f);else for(;a!==null;){if(a.tag===3){Ky(a,i,f);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ra===null||!Ra.has(m))){i=ds(f,i),f=ey(2),m=wa(a,f,2),m!==null&&(ty(f,m,a,i),Wi(m,2),cr(m));break}}a=a.return}}function E1(i,a,f){var m=i.pingCache;if(m===null){m=i.pingCache=new ZC;var v=new Set;m.set(a,v)}else v=m.get(a),v===void 0&&(v=new Set,m.set(a,v));v.has(f)||(d1=!0,v.add(f),i=nA.bind(null,i,a,f),a.then(i,i))}function nA(i,a,f){var m=i.pingCache;m!==null&&m.delete(a),i.pingedLanes|=i.suspendedLanes&f,i.warmLanes&=~f,an===i&&(Bt&f)===f&&(Cn===4||Cn===3&&(Bt&62914560)===Bt&&300>lt()-m1?(Wt&2)===0&&Hl(i,0):h1|=f,Fl===Bt&&(Fl=0)),cr(i)}function Zy(i,a){a===0&&(a=ra()),i=Al(i,a),i!==null&&(Wi(i,a),cr(i))}function iA(i){var a=i.memoizedState,f=0;a!==null&&(f=a.retryLane),Zy(i,f)}function sA(i,a){var f=0;switch(i.tag){case 13:var m=i.stateNode,v=i.memoizedState;v!==null&&(f=v.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(a),Zy(i,f)}function rA(i,a){return je(i,a)}var Td=null,Gl=null,S1=!1,_d=!1,C1=!1,ko=0;function cr(i){i!==Gl&&i.next===null&&(Gl===null?Td=Gl=i:Gl=Gl.next=i),_d=!0,S1||(S1=!0,oA())}function yu(i,a){if(!C1&&_d){C1=!0;do for(var f=!1,m=Td;m!==null;){if(i!==0){var v=m.pendingLanes;if(v===0)var T=0;else{var D=m.suspendedLanes,F=m.pingedLanes;T=(1<<31-Ze(42|i)+1)-1,T&=v&~(D&~F),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(f=!0,t2(m,T))}else T=Bt,T=Tt(m,m===an?T:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(T&3)===0||jt(m,T)||(f=!0,t2(m,T));m=m.next}while(f);C1=!1}}function aA(){Qy()}function Qy(){_d=S1=!1;var i=0;ko!==0&&(mA()&&(i=ko),ko=0);for(var a=lt(),f=null,m=Td;m!==null;){var v=m.next,T=Jy(m,a);T===0?(m.next=null,f===null?Td=v:f.next=v,v===null&&(Gl=f)):(f=m,(i!==0||(T&3)!==0)&&(_d=!0)),m=v}yu(i)}function Jy(i,a){for(var f=i.suspendedLanes,m=i.pingedLanes,v=i.expirationTimes,T=i.pendingLanes&-62914561;0<T;){var D=31-Ze(T),F=1<<D,K=v[D];K===-1?((F&f)===0||(F&m)!==0)&&(v[D]=ki(F,a)):K<=a&&(i.expiredLanes|=F),T&=~F}if(a=an,f=Bt,f=Tt(i,i===a?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,f===0||i===a&&(Kt===2||Kt===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&tt(m),i.callbackNode=null,i.callbackPriority=0;if((f&3)===0||jt(i,f)){if(a=f&-f,a===i.callbackPriority)return a;switch(m!==null&&tt(m),jn(f)){case 2:case 8:f=cs;break;case 32:f=ze;break;case 268435456:f=ia;break;default:f=ze}return m=e2.bind(null,i),f=je(f,m),i.callbackPriority=a,i.callbackNode=f,a}return m!==null&&m!==null&&tt(m),i.callbackPriority=2,i.callbackNode=null,2}function e2(i,a){if(ui!==0&&ui!==5)return i.callbackNode=null,i.callbackPriority=0,null;var f=i.callbackNode;if(Ad()&&i.callbackNode!==f)return null;var m=Bt;return m=Tt(i,i===an?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(jy(i,m,a),Jy(i,lt()),i.callbackNode!=null&&i.callbackNode===f?e2.bind(null,i):null)}function t2(i,a){if(Ad())return null;jy(i,a,!0)}function oA(){xA(function(){(Wt&6)!==0?je(gt,aA):Qy()})}function A1(){return ko===0&&(ko=gi()),ko}function n2(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:pl(""+i)}function i2(i,a){var f=a.ownerDocument.createElement("input");return f.name=a.name,f.value=a.value,i.id&&f.setAttribute("form",i.id),a.parentNode.insertBefore(f,a),i=new FormData(i),f.parentNode.removeChild(f),i}function lA(i,a,f,m,v){if(a==="submit"&&f&&f.stateNode===v){var T=n2((v[wn]||null).action),D=m.submitter;D&&(a=(a=D[wn]||null)?n2(a.formAction):D.getAttribute("formAction"),a!==null&&(T=a,D=null));var F=new tr("action","action",null,m,v);i.push({event:F,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(ko!==0){var K=D?i2(v,D):new FormData(v);G0(f,{pending:!0,data:K,method:v.method,action:T},null,K)}}else typeof T=="function"&&(F.preventDefault(),K=D?i2(v,D):new FormData(v),G0(f,{pending:!0,data:K,method:v.method,action:T},T,K))},currentTarget:v}]})}}for(var T1=0;T1<sr.length;T1++){var _1=sr[T1],cA=_1.toLowerCase(),uA=_1[0].toUpperCase()+_1.slice(1);Qi(cA,"on"+uA)}Qi(ut,"onAnimationEnd"),Qi(li,"onAnimationIteration"),Qi(Ui,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(yi,"onTransitionRun"),Qi(Xt,"onTransitionStart"),Qi(Xn,"onTransitionCancel"),Qi(bi,"onTransitionEnd"),vn("onMouseEnter",["mouseout","mouseover"]),vn("onMouseLeave",["mouseout","mouseover"]),vn("onPointerEnter",["pointerout","pointerover"]),vn("onPointerLeave",["pointerout","pointerover"]),ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bu));function s2(i,a){a=(a&4)!==0;for(var f=0;f<i.length;f++){var m=i[f],v=m.event;m=m.listeners;e:{var T=void 0;if(a)for(var D=m.length-1;0<=D;D--){var F=m[D],K=F.instance,ge=F.currentTarget;if(F=F.listener,K!==T&&v.isPropagationStopped())break e;T=F,v.currentTarget=ge;try{T(v)}catch(Ee){gd(Ee)}v.currentTarget=null,T=K}else for(D=0;D<m.length;D++){if(F=m[D],K=F.instance,ge=F.currentTarget,F=F.listener,K!==T&&v.isPropagationStopped())break e;T=F,v.currentTarget=ge;try{T(v)}catch(Ee){gd(Ee)}v.currentTarget=null,T=K}}}}function Rt(i,a){var f=a[ei];f===void 0&&(f=a[ei]=new Set);var m=i+"__bubble";f.has(m)||(r2(a,i,2,!1),f.add(m))}function N1(i,a,f){var m=0;a&&(m|=4),r2(f,i,m,a)}var Nd="_reactListening"+Math.random().toString(36).slice(2);function R1(i){if(!i[Nd]){i[Nd]=!0,kf.forEach(function(f){f!=="selectionchange"&&(fA.has(f)||N1(f,!1,i),N1(f,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Nd]||(a[Nd]=!0,N1("selectionchange",!1,a))}}function r2(i,a,f,m){switch(R2(a)){case 2:var v=PA;break;case 8:v=UA;break;default:v=H1}f=v.bind(null,a,f,i),v=void 0,!ft||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),m?v!==void 0?i.addEventListener(a,f,{capture:!0,passive:v}):i.addEventListener(a,f,!0):v!==void 0?i.addEventListener(a,f,{passive:v}):i.addEventListener(a,f,!1)}function O1(i,a,f,m,v){var T=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var D=m.tag;if(D===3||D===4){var F=m.stateNode.containerInfo;if(F===v)break;if(D===4)for(D=m.return;D!==null;){var K=D.tag;if((K===3||K===4)&&D.stateNode.containerInfo===v)return;D=D.return}for(;F!==null;){if(D=Nn(F),D===null)return;if(K=D.tag,K===5||K===6||K===26||K===27){m=T=D;continue e}F=F.parentNode}}m=m.return}Is(function(){var ge=T,Ee=aa(f),Ce=[];e:{var me=_r.get(i);if(me!==void 0){var xe=tr,rt=i;switch(i){case"keypress":if(xl(f)===0)break e;case"keydown":case"keyup":xe=Vc;break;case"focusin":rt="focus",xe=ua;break;case"focusout":rt="blur",xe=ua;break;case"beforeblur":case"afterblur":xe=ua;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=Uf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=$t;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=Yt;break;case ut:case li:case Ui:xe=i0;break;case bi:xe=o0;break;case"scroll":case"scrollend":xe=pi;break;case"wheel":xe=Ar;break;case"copy":case"cut":case"paste":xe=yt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=bo;break;case"toggle":case"beforetoggle":xe=l0}var it=(a&4)!==0,en=!it&&(i==="scroll"||i==="scrollend"),re=it?me!==null?me+"Capture":null:me;it=[];for(var ne=ge,he;ne!==null;){var Se=ne;if(he=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||he===null||re===null||(Se=Qe(ne,re),Se!=null&&it.push(wu(ne,Se,he))),en)break;ne=ne.return}0<it.length&&(me=new xe(me,rt,null,f,Ee),Ce.push({event:me,listeners:it}))}}if((a&7)===0){e:{if(me=i==="mouseover"||i==="pointerover",xe=i==="mouseout"||i==="pointerout",me&&f!==go&&(rt=f.relatedTarget||f.fromElement)&&(Nn(rt)||rt[qs]))break e;if((xe||me)&&(me=Ee.window===Ee?Ee:(me=Ee.ownerDocument)?me.defaultView||me.parentWindow:window,xe?(rt=f.relatedTarget||f.toElement,xe=ge,rt=rt?Nn(rt):null,rt!==null&&(en=u(rt),it=rt.tag,rt!==en||it!==5&&it!==27&&it!==6)&&(rt=null)):(xe=null,rt=ge),xe!==rt)){if(it=Uf,Se="onMouseLeave",re="onMouseEnter",ne="mouse",(i==="pointerout"||i==="pointerover")&&(it=bo,Se="onPointerLeave",re="onPointerEnter",ne="pointer"),en=xe==null?me:Ys(xe),he=rt==null?me:Ys(rt),me=new it(Se,ne+"leave",xe,f,Ee),me.target=en,me.relatedTarget=he,Se=null,Nn(Ee)===ge&&(it=new it(re,ne+"enter",rt,f,Ee),it.target=he,it.relatedTarget=en,Se=it),en=Se,xe&&rt)t:{for(it=xe,re=rt,ne=0,he=it;he;he=ql(he))ne++;for(he=0,Se=re;Se;Se=ql(Se))he++;for(;0<ne-he;)it=ql(it),ne--;for(;0<he-ne;)re=ql(re),he--;for(;ne--;){if(it===re||re!==null&&it===re.alternate)break t;it=ql(it),re=ql(re)}it=null}else it=null;xe!==null&&a2(Ce,me,xe,it,!1),rt!==null&&en!==null&&a2(Ce,en,rt,it,!0)}}e:{if(me=ge?Ys(ge):window,xe=me.nodeName&&me.nodeName.toLowerCase(),xe==="select"||xe==="input"&&me.type==="file")var $e=Hf;else if(Eo(me))if(Gc)$e=o;else{$e=L;var At=Sl}else xe=me.nodeName,!xe||xe.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?ge&&Xe(ge.elementType)&&($e=Hf):$e=s;if($e&&($e=$e(i,ge))){Ni(Ce,$e,f,Ee);break e}At&&At(i,me,ge),i==="focusout"&&ge&&me.type==="number"&&ge.memoizedProps.value!=null&&de(me,"number",me.value)}switch(At=ge?Ys(ge):window,i){case"focusin":(Eo(At)||At.contentEditable==="true")&&(P=At,G=ge,Q=null);break;case"focusout":Q=G=P=null;break;case"mousedown":te=!0;break;case"contextmenu":case"mouseup":case"dragend":te=!1,ue(Ce,f,Ee);break;case"selectionchange":if(k)break;case"keydown":case"keyup":ue(Ce,f,Ee)}var We;if(wo)e:{switch(i){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else ha?Tr(i,f)&&(st="onCompositionEnd"):i==="keydown"&&f.keyCode===229&&(st="onCompositionStart");st&&(Hc&&f.locale!=="ko"&&(ha||st!=="onCompositionStart"?st==="onCompositionEnd"&&ha&&(We=Qs()):(Zs=Ee,mo="value"in Zs?Zs.value:Zs.textContent,ha=!0)),At=Rd(ge,st),0<At.length&&(st=new xo(st,i,null,f,Ee),Ce.push({event:st,listeners:At}),We?st.data=We:(We=vl(f),We!==null&&(st.data=We)))),(We=zc?vo(i,f):c0(i,f))&&(st=Rd(ge,"onBeforeInput"),0<st.length&&(At=new xo("onBeforeInput","beforeinput",null,f,Ee),Ce.push({event:At,listeners:st}),At.data=We)),lA(Ce,i,ge,f,Ee)}s2(Ce,a)})}function wu(i,a,f){return{instance:i,listener:a,currentTarget:f}}function Rd(i,a){for(var f=a+"Capture",m=[];i!==null;){var v=i,T=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||T===null||(v=Qe(i,f),v!=null&&m.unshift(wu(i,v,T)),v=Qe(i,a),v!=null&&m.push(wu(i,v,T))),i.tag===3)return m;i=i.return}return[]}function ql(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function a2(i,a,f,m,v){for(var T=a._reactName,D=[];f!==null&&f!==m;){var F=f,K=F.alternate,ge=F.stateNode;if(F=F.tag,K!==null&&K===m)break;F!==5&&F!==26&&F!==27||ge===null||(K=ge,v?(ge=Qe(f,T),ge!=null&&D.unshift(wu(f,ge,K))):v||(ge=Qe(f,T),ge!=null&&D.push(wu(f,ge,K)))),f=f.return}D.length!==0&&i.push({event:a,listeners:D})}var dA=/\r\n?/g,hA=/\u0000|\uFFFD/g;function o2(i){return(typeof i=="string"?i:""+i).replace(dA,`
`).replace(hA,"")}function l2(i,a){return a=o2(a),o2(i)===a}function Od(){}function Jt(i,a,f,m,v,T){switch(f){case"children":typeof m=="string"?a==="body"||a==="textarea"&&m===""||qn(i,m):(typeof m=="number"||typeof m=="bigint")&&a!=="body"&&qn(i,""+m);break;case"className":dl(i,"class",m);break;case"tabIndex":dl(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":dl(i,f,m);break;case"style":_i(i,m,T);break;case"data":if(a!=="object"){dl(i,"data",m);break}case"src":case"href":if(m===""&&(a!=="a"||f!=="href")){i.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(f);break}m=pl(""+m),i.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(f==="formAction"?(a!=="input"&&Jt(i,a,"name",v.name,v,null),Jt(i,a,"formEncType",v.formEncType,v,null),Jt(i,a,"formMethod",v.formMethod,v,null),Jt(i,a,"formTarget",v.formTarget,v,null)):(Jt(i,a,"encType",v.encType,v,null),Jt(i,a,"method",v.method,v,null),Jt(i,a,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(f);break}m=pl(""+m),i.setAttribute(f,m);break;case"onClick":m!=null&&(i.onclick=Od);break;case"onScroll":m!=null&&Rt("scroll",i);break;case"onScrollEnd":m!=null&&Rt("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=f}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}f=pl(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(f,""+m):i.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(f,""):i.removeAttribute(f);break;case"capture":case"download":m===!0?i.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(f,m):i.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(f,m):i.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(f):i.setAttribute(f,m);break;case"popover":Rt("beforetoggle",i),Rt("toggle",i),Ae(i,"popover",m);break;case"xlinkActuate":Ft(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Ft(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Ft(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Ft(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Ft(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Ft(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Ft(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Ft(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Ft(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Ae(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=cn.get(f)||f,Ae(i,f,m))}}function I1(i,a,f,m,v,T){switch(f){case"style":_i(i,m,T);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=f}}break;case"children":typeof m=="string"?qn(i,m):(typeof m=="number"||typeof m=="bigint")&&qn(i,""+m);break;case"onScroll":m!=null&&Rt("scroll",i);break;case"onScrollEnd":m!=null&&Rt("scrollend",i);break;case"onClick":m!=null&&(i.onclick=Od);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jf.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(v=f.endsWith("Capture"),a=f.slice(2,v?f.length-7:void 0),T=i[wn]||null,T=T!=null?T[f]:null,typeof T=="function"&&i.removeEventListener(a,T,v),typeof m=="function")){typeof T!="function"&&T!==null&&(f in i?i[f]=null:i.hasAttribute(f)&&i.removeAttribute(f)),i.addEventListener(a,m,v);break e}f in i?i[f]=m:m===!0?i.setAttribute(f,""):Ae(i,f,m)}}}function fi(i,a,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",i),Rt("load",i);var m=!1,v=!1,T;for(T in f)if(f.hasOwnProperty(T)){var D=f[T];if(D!=null)switch(T){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Jt(i,a,T,D,f,null)}}v&&Jt(i,a,"srcSet",f.srcSet,f,null),m&&Jt(i,a,"src",f.src,f,null);return;case"input":Rt("invalid",i);var F=T=D=v=null,K=null,ge=null;for(m in f)if(f.hasOwnProperty(m)){var Ee=f[m];if(Ee!=null)switch(m){case"name":v=Ee;break;case"type":D=Ee;break;case"checked":K=Ee;break;case"defaultChecked":ge=Ee;break;case"value":T=Ee;break;case"defaultValue":F=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(r(137,a));break;default:Jt(i,a,m,Ee,f,null)}}Gn(i,T,F,K,ge,D,v,!1),gl(i);return;case"select":Rt("invalid",i),m=D=T=null;for(v in f)if(f.hasOwnProperty(v)&&(F=f[v],F!=null))switch(v){case"value":T=F;break;case"defaultValue":D=F;break;case"multiple":m=F;default:Jt(i,a,v,F,f,null)}a=T,f=D,i.multiple=!!m,a!=null?H(i,!!m,a,!1):f!=null&&H(i,!!m,f,!0);return;case"textarea":Rt("invalid",i),T=v=m=null;for(D in f)if(f.hasOwnProperty(D)&&(F=f[D],F!=null))switch(D){case"value":m=F;break;case"defaultValue":v=F;break;case"children":T=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:Jt(i,a,D,F,f,null)}Rn(i,m,v,T),gl(i);return;case"option":for(K in f)if(f.hasOwnProperty(K)&&(m=f[K],m!=null))switch(K){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Jt(i,a,K,m,f,null)}return;case"dialog":Rt("beforetoggle",i),Rt("toggle",i),Rt("cancel",i),Rt("close",i);break;case"iframe":case"object":Rt("load",i);break;case"video":case"audio":for(m=0;m<bu.length;m++)Rt(bu[m],i);break;case"image":Rt("error",i),Rt("load",i);break;case"details":Rt("toggle",i);break;case"embed":case"source":case"link":Rt("error",i),Rt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in f)if(f.hasOwnProperty(ge)&&(m=f[ge],m!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Jt(i,a,ge,m,f,null)}return;default:if(Xe(a)){for(Ee in f)f.hasOwnProperty(Ee)&&(m=f[Ee],m!==void 0&&I1(i,a,Ee,m,f,void 0));return}}for(F in f)f.hasOwnProperty(F)&&(m=f[F],m!=null&&Jt(i,a,F,m,f,null))}function gA(i,a,f,m){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,T=null,D=null,F=null,K=null,ge=null,Ee=null;for(xe in f){var Ce=f[xe];if(f.hasOwnProperty(xe)&&Ce!=null)switch(xe){case"checked":break;case"value":break;case"defaultValue":K=Ce;default:m.hasOwnProperty(xe)||Jt(i,a,xe,null,m,Ce)}}for(var me in m){var xe=m[me];if(Ce=f[me],m.hasOwnProperty(me)&&(xe!=null||Ce!=null))switch(me){case"type":T=xe;break;case"name":v=xe;break;case"checked":ge=xe;break;case"defaultChecked":Ee=xe;break;case"value":D=xe;break;case"defaultValue":F=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(r(137,a));break;default:xe!==Ce&&Jt(i,a,me,xe,m,Ce)}}Ht(i,D,F,K,ge,Ee,T,v);return;case"select":xe=D=F=me=null;for(T in f)if(K=f[T],f.hasOwnProperty(T)&&K!=null)switch(T){case"value":break;case"multiple":xe=K;default:m.hasOwnProperty(T)||Jt(i,a,T,null,m,K)}for(v in m)if(T=m[v],K=f[v],m.hasOwnProperty(v)&&(T!=null||K!=null))switch(v){case"value":me=T;break;case"defaultValue":F=T;break;case"multiple":D=T;default:T!==K&&Jt(i,a,v,T,m,K)}a=F,f=D,m=xe,me!=null?H(i,!!f,me,!1):!!m!=!!f&&(a!=null?H(i,!!f,a,!0):H(i,!!f,f?[]:"",!1));return;case"textarea":xe=me=null;for(F in f)if(v=f[F],f.hasOwnProperty(F)&&v!=null&&!m.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:Jt(i,a,F,null,m,v)}for(D in m)if(v=m[D],T=f[D],m.hasOwnProperty(D)&&(v!=null||T!=null))switch(D){case"value":me=v;break;case"defaultValue":xe=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==T&&Jt(i,a,D,v,m,T)}Ye(i,me,xe);return;case"option":for(var rt in f)if(me=f[rt],f.hasOwnProperty(rt)&&me!=null&&!m.hasOwnProperty(rt))switch(rt){case"selected":i.selected=!1;break;default:Jt(i,a,rt,null,m,me)}for(K in m)if(me=m[K],xe=f[K],m.hasOwnProperty(K)&&me!==xe&&(me!=null||xe!=null))switch(K){case"selected":i.selected=me&&typeof me!="function"&&typeof me!="symbol";break;default:Jt(i,a,K,me,m,xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var it in f)me=f[it],f.hasOwnProperty(it)&&me!=null&&!m.hasOwnProperty(it)&&Jt(i,a,it,null,m,me);for(ge in m)if(me=m[ge],xe=f[ge],m.hasOwnProperty(ge)&&me!==xe&&(me!=null||xe!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(137,a));break;default:Jt(i,a,ge,me,m,xe)}return;default:if(Xe(a)){for(var en in f)me=f[en],f.hasOwnProperty(en)&&me!==void 0&&!m.hasOwnProperty(en)&&I1(i,a,en,void 0,m,me);for(Ee in m)me=m[Ee],xe=f[Ee],!m.hasOwnProperty(Ee)||me===xe||me===void 0&&xe===void 0||I1(i,a,Ee,me,m,xe);return}}for(var re in f)me=f[re],f.hasOwnProperty(re)&&me!=null&&!m.hasOwnProperty(re)&&Jt(i,a,re,null,m,me);for(Ce in m)me=m[Ce],xe=f[Ce],!m.hasOwnProperty(Ce)||me===xe||me==null&&xe==null||Jt(i,a,Ce,me,m,xe)}var M1=null,D1=null;function Id(i){return i.nodeType===9?i:i.ownerDocument}function c2(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function u2(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function L1(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var k1=null;function mA(){var i=window.event;return i&&i.type==="popstate"?i===k1?!1:(k1=i,!0):(k1=null,!1)}var f2=typeof setTimeout=="function"?setTimeout:void 0,pA=typeof clearTimeout=="function"?clearTimeout:void 0,d2=typeof Promise=="function"?Promise:void 0,xA=typeof queueMicrotask=="function"?queueMicrotask:typeof d2<"u"?function(i){return d2.resolve(null).then(i).catch(yA)}:f2;function yA(i){setTimeout(function(){throw i})}function Ma(i){return i==="head"}function h2(i,a){var f=a,m=0,v=0;do{var T=f.nextSibling;if(i.removeChild(f),T&&T.nodeType===8)if(f=T.data,f==="/$"){if(0<m&&8>m){f=m;var D=i.ownerDocument;if(f&1&&vu(D.documentElement),f&2&&vu(D.body),f&4)for(f=D.head,vu(f),D=f.firstChild;D;){var F=D.nextSibling,K=D.nodeName;D[us]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&D.rel.toLowerCase()==="stylesheet"||f.removeChild(D),D=F}}if(v===0){i.removeChild(T),Ru(a);return}v--}else f==="$"||f==="$?"||f==="$!"?v++:m=f.charCodeAt(0)-48;else m=0;f=T}while(f);Ru(a)}function j1(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var f=a;switch(a=a.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":j1(f),ho(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}i.removeChild(f)}}function bA(i,a,f,m){for(;i.nodeType===1;){var v=f;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[us])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(T=i.getAttribute("rel"),T==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(T!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(T=i.getAttribute("src"),(T!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&T&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var T=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===T)return i}else return i;if(i=ks(i.nextSibling),i===null)break}return null}function wA(i,a,f){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!f||(i=ks(i.nextSibling),i===null))return null;return i}function B1(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function vA(i,a){var f=i.ownerDocument;if(i.data!=="$?"||f.readyState==="complete")a();else{var m=function(){a(),f.removeEventListener("DOMContentLoaded",m)};f.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function ks(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var P1=null;function g2(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var f=i.data;if(f==="$"||f==="$!"||f==="$?"){if(a===0)return i;a--}else f==="/$"&&a++}i=i.previousSibling}return null}function m2(i,a,f){switch(a=Id(f),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function vu(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);ho(i)}var ys=new Map,p2=new Set;function Md(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Fr=fe.d;fe.d={f:EA,r:SA,D:CA,C:AA,L:TA,m:_A,X:RA,S:NA,M:OA};function EA(){var i=Fr.f(),a=Sd();return i||a}function SA(i){var a=Ki(i);a!==null&&a.tag===5&&a.type==="form"?jx(a):Fr.r(i)}var Yl=typeof document>"u"?null:document;function x2(i,a,f){var m=Yl;if(m&&typeof a=="string"&&a){var v=$n(a);v='link[rel="'+i+'"][href="'+v+'"]',typeof f=="string"&&(v+='[crossorigin="'+f+'"]'),p2.has(v)||(p2.add(v),i={rel:i,crossOrigin:f,href:a},m.querySelector(v)===null&&(a=m.createElement("link"),fi(a,"link",i),qt(a),m.head.appendChild(a)))}}function CA(i){Fr.D(i),x2("dns-prefetch",i,null)}function AA(i,a){Fr.C(i,a),x2("preconnect",i,a)}function TA(i,a,f){Fr.L(i,a,f);var m=Yl;if(m&&i&&a){var v='link[rel="preload"][as="'+$n(a)+'"]';a==="image"&&f&&f.imageSrcSet?(v+='[imagesrcset="'+$n(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(v+='[imagesizes="'+$n(f.imageSizes)+'"]')):v+='[href="'+$n(i)+'"]';var T=v;switch(a){case"style":T=Xl(i);break;case"script":T=Wl(i)}ys.has(T)||(i=E({rel:"preload",href:a==="image"&&f&&f.imageSrcSet?void 0:i,as:a},f),ys.set(T,i),m.querySelector(v)!==null||a==="style"&&m.querySelector(Eu(T))||a==="script"&&m.querySelector(Su(T))||(a=m.createElement("link"),fi(a,"link",i),qt(a),m.head.appendChild(a)))}}function _A(i,a){Fr.m(i,a);var f=Yl;if(f&&i){var m=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+$n(m)+'"][href="'+$n(i)+'"]',T=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Wl(i)}if(!ys.has(T)&&(i=E({rel:"modulepreload",href:i},a),ys.set(T,i),f.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Su(T)))return}m=f.createElement("link"),fi(m,"link",i),qt(m),f.head.appendChild(m)}}}function NA(i,a,f){Fr.S(i,a,f);var m=Yl;if(m&&i){var v=Rs(m).hoistableStyles,T=Xl(i);a=a||"default";var D=v.get(T);if(!D){var F={loading:0,preload:null};if(D=m.querySelector(Eu(T)))F.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":a},f),(f=ys.get(T))&&U1(i,f);var K=D=m.createElement("link");qt(K),fi(K,"link",i),K._p=new Promise(function(ge,Ee){K.onload=ge,K.onerror=Ee}),K.addEventListener("load",function(){F.loading|=1}),K.addEventListener("error",function(){F.loading|=2}),F.loading|=4,Dd(D,a,m)}D={type:"stylesheet",instance:D,count:1,state:F},v.set(T,D)}}}function RA(i,a){Fr.X(i,a);var f=Yl;if(f&&i){var m=Rs(f).hoistableScripts,v=Wl(i),T=m.get(v);T||(T=f.querySelector(Su(v)),T||(i=E({src:i,async:!0},a),(a=ys.get(v))&&F1(i,a),T=f.createElement("script"),qt(T),fi(T,"link",i),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(v,T))}}function OA(i,a){Fr.M(i,a);var f=Yl;if(f&&i){var m=Rs(f).hoistableScripts,v=Wl(i),T=m.get(v);T||(T=f.querySelector(Su(v)),T||(i=E({src:i,async:!0,type:"module"},a),(a=ys.get(v))&&F1(i,a),T=f.createElement("script"),qt(T),fi(T,"link",i),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(v,T))}}function y2(i,a,f,m){var v=(v=we.current)?Md(v):null;if(!v)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(a=Xl(f.href),f=Rs(v).hoistableStyles,m=f.get(a),m||(m={type:"style",instance:null,count:0,state:null},f.set(a,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){i=Xl(f.href);var T=Rs(v).hoistableStyles,D=T.get(i);if(D||(v=v.ownerDocument||v,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(i,D),(T=v.querySelector(Eu(i)))&&!T._p&&(D.instance=T,D.state.loading=5),ys.has(i)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},ys.set(i,f),T||IA(v,i,f,D.state))),a&&m===null)throw Error(r(528,""));return D}if(a&&m!==null)throw Error(r(529,""));return null;case"script":return a=f.async,f=f.src,typeof f=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Wl(f),f=Rs(v).hoistableScripts,m=f.get(a),m||(m={type:"script",instance:null,count:0,state:null},f.set(a,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Xl(i){return'href="'+$n(i)+'"'}function Eu(i){return'link[rel="stylesheet"]['+i+"]"}function b2(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function IA(i,a,f,m){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?m.loading=1:(a=i.createElement("link"),m.preload=a,a.addEventListener("load",function(){return m.loading|=1}),a.addEventListener("error",function(){return m.loading|=2}),fi(a,"link",f),qt(a),i.head.appendChild(a))}function Wl(i){return'[src="'+$n(i)+'"]'}function Su(i){return"script[async]"+i}function w2(i,a,f){if(a.count++,a.instance===null)switch(a.type){case"style":var m=i.querySelector('style[data-href~="'+$n(f.href)+'"]');if(m)return a.instance=m,qt(m),m;var v=E({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),qt(m),fi(m,"style",v),Dd(m,f.precedence,i),a.instance=m;case"stylesheet":v=Xl(f.href);var T=i.querySelector(Eu(v));if(T)return a.state.loading|=4,a.instance=T,qt(T),T;m=b2(f),(v=ys.get(v))&&U1(m,v),T=(i.ownerDocument||i).createElement("link"),qt(T);var D=T;return D._p=new Promise(function(F,K){D.onload=F,D.onerror=K}),fi(T,"link",m),a.state.loading|=4,Dd(T,f.precedence,i),a.instance=T;case"script":return T=Wl(f.src),(v=i.querySelector(Su(T)))?(a.instance=v,qt(v),v):(m=f,(v=ys.get(T))&&(m=E({},f),F1(m,v)),i=i.ownerDocument||i,v=i.createElement("script"),qt(v),fi(v,"link",m),i.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(m=a.instance,a.state.loading|=4,Dd(m,f.precedence,i));return a.instance}function Dd(i,a,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,T=v,D=0;D<m.length;D++){var F=m[D];if(F.dataset.precedence===a)T=F;else if(T!==v)break}T?T.parentNode.insertBefore(i,T.nextSibling):(a=f.nodeType===9?f.head:f,a.insertBefore(i,a.firstChild))}function U1(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function F1(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Ld=null;function v2(i,a,f){if(Ld===null){var m=new Map,v=Ld=new Map;v.set(f,m)}else v=Ld,m=v.get(f),m||(m=new Map,v.set(f,m));if(m.has(i))return m;for(m.set(i,null),f=f.getElementsByTagName(i),v=0;v<f.length;v++){var T=f[v];if(!(T[us]||T[Jn]||i==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var D=T.getAttribute(a)||"";D=i+D;var F=m.get(D);F?F.push(T):m.set(D,[T])}}return m}function E2(i,a,f){i=i.ownerDocument||i,i.head.insertBefore(f,a==="title"?i.querySelector("head > title"):null)}function MA(i,a,f){if(f===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function S2(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Cu=null;function DA(){}function LA(i,a,f){if(Cu===null)throw Error(r(475));var m=Cu;if(a.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var v=Xl(f.href),T=i.querySelector(Eu(v));if(T){i=T._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(m.count++,m=kd.bind(m),i.then(m,m)),a.state.loading|=4,a.instance=T,qt(T);return}T=i.ownerDocument||i,f=b2(f),(v=ys.get(v))&&U1(f,v),T=T.createElement("link"),qt(T);var D=T;D._p=new Promise(function(F,K){D.onload=F,D.onerror=K}),fi(T,"link",f),a.instance=T}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(m.count++,a=kd.bind(m),i.addEventListener("load",a),i.addEventListener("error",a))}}function kA(){if(Cu===null)throw Error(r(475));var i=Cu;return i.stylesheets&&i.count===0&&V1(i,i.stylesheets),0<i.count?function(a){var f=setTimeout(function(){if(i.stylesheets&&V1(i,i.stylesheets),i.unsuspend){var m=i.unsuspend;i.unsuspend=null,m()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(f)}}:null}function kd(){if(this.count--,this.count===0){if(this.stylesheets)V1(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var jd=null;function V1(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,jd=new Map,a.forEach(jA,i),jd=null,kd.call(i))}function jA(i,a){if(!(a.state.loading&4)){var f=jd.get(i);if(f)var m=f.get(null);else{f=new Map,jd.set(i,f);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<v.length;T++){var D=v[T];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(f.set(D.dataset.precedence,D),m=D)}m&&f.set(null,m)}v=a.instance,D=v.getAttribute("data-precedence"),T=f.get(D)||m,T===m&&f.set(null,v),f.set(D,v),this.count++,m=kd.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),T?T.parentNode.insertBefore(v,T.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),a.state.loading|=4}}var Au={$$typeof:B,Provider:null,Consumer:null,_currentValue:Ie,_currentValue2:Ie,_threadCount:0};function BA(i,a,f,m,v,T,D,F){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ct(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ct(0),this.hiddenUpdates=Ct(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=T,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function C2(i,a,f,m,v,T,D,F,K,ge,Ee,Ce){return i=new BA(i,a,f,D,F,K,ge,Ce),a=1,T===!0&&(a|=24),T=Ji(3,null,null,a),i.current=T,T.stateNode=i,a=E0(),a.refCount++,i.pooledCache=a,a.refCount++,T.memoizedState={element:m,isDehydrated:f,cache:a},T0(T),i}function A2(i){return i?(i=Tl,i):Tl}function T2(i,a,f,m,v,T){v=A2(v),m.context===null?m.context=v:m.pendingContext=v,m=ba(a),m.payload={element:f},T=T===void 0?null:T,T!==null&&(m.callback=T),f=wa(i,m,a),f!==null&&(ss(f,i,a),tu(f,i,a))}function _2(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var f=i.retryLane;i.retryLane=f!==0&&f<a?f:a}}function z1(i,a){_2(i,a),(i=i.alternate)&&_2(i,a)}function N2(i){if(i.tag===13){var a=Al(i,67108864);a!==null&&ss(a,i,67108864),z1(i,67108864)}}var Bd=!0;function PA(i,a,f,m){var v=se.T;se.T=null;var T=fe.p;try{fe.p=2,H1(i,a,f,m)}finally{fe.p=T,se.T=v}}function UA(i,a,f,m){var v=se.T;se.T=null;var T=fe.p;try{fe.p=8,H1(i,a,f,m)}finally{fe.p=T,se.T=v}}function H1(i,a,f,m){if(Bd){var v=$1(m);if(v===null)O1(i,a,m,Pd,f),O2(i,m);else if(VA(v,i,a,f,m))m.stopPropagation();else if(O2(i,m),a&4&&-1<FA.indexOf(i)){for(;v!==null;){var T=Ki(v);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var D=Dt(T.pendingLanes);if(D!==0){var F=T;for(F.pendingLanes|=2,F.entangledLanes|=2;D;){var K=1<<31-Ze(D);F.entanglements[1]|=K,D&=~K}cr(T),(Wt&6)===0&&(vd=lt()+500,yu(0))}}break;case 13:F=Al(T,2),F!==null&&ss(F,T,2),Sd(),z1(T,2)}if(T=$1(m),T===null&&O1(i,a,m,Pd,f),T===v)break;v=T}v!==null&&m.stopPropagation()}else O1(i,a,m,null,f)}}function $1(i){return i=aa(i),G1(i)}var Pd=null;function G1(i){if(Pd=null,i=Nn(i),i!==null){var a=u(i);if(a===null)i=null;else{var f=a.tag;if(f===13){if(i=h(a),i!==null)return i;i=null}else if(f===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Pd=i,null}function R2(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xt()){case gt:return 2;case cs:return 8;case ze:case wr:return 32;case ia:return 268435456;default:return 32}default:return 32}}var q1=!1,Da=null,La=null,ka=null,Tu=new Map,_u=new Map,ja=[],FA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O2(i,a){switch(i){case"focusin":case"focusout":Da=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":ka=null;break;case"pointerover":case"pointerout":Tu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":_u.delete(a.pointerId)}}function Nu(i,a,f,m,v,T){return i===null||i.nativeEvent!==T?(i={blockedOn:a,domEventName:f,eventSystemFlags:m,nativeEvent:T,targetContainers:[v]},a!==null&&(a=Ki(a),a!==null&&N2(a)),i):(i.eventSystemFlags|=m,a=i.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),i)}function VA(i,a,f,m,v){switch(a){case"focusin":return Da=Nu(Da,i,a,f,m,v),!0;case"dragenter":return La=Nu(La,i,a,f,m,v),!0;case"mouseover":return ka=Nu(ka,i,a,f,m,v),!0;case"pointerover":var T=v.pointerId;return Tu.set(T,Nu(Tu.get(T)||null,i,a,f,m,v)),!0;case"gotpointercapture":return T=v.pointerId,_u.set(T,Nu(_u.get(T)||null,i,a,f,m,v)),!0}return!1}function I2(i){var a=Nn(i.target);if(a!==null){var f=u(a);if(f!==null){if(a=f.tag,a===13){if(a=h(f),a!==null){i.blockedOn=a,fl(i.priority,function(){if(f.tag===13){var m=is();m=fo(m);var v=Al(f,m);v!==null&&ss(v,f,m),z1(f,m)}});return}}else if(a===3&&f.stateNode.current.memoizedState.isDehydrated){i.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ud(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var f=$1(i.nativeEvent);if(f===null){f=i.nativeEvent;var m=new f.constructor(f.type,f);go=m,f.target.dispatchEvent(m),go=null}else return a=Ki(f),a!==null&&N2(a),i.blockedOn=f,!1;a.shift()}return!0}function M2(i,a,f){Ud(i)&&f.delete(a)}function zA(){q1=!1,Da!==null&&Ud(Da)&&(Da=null),La!==null&&Ud(La)&&(La=null),ka!==null&&Ud(ka)&&(ka=null),Tu.forEach(M2),_u.forEach(M2)}function Fd(i,a){i.blockedOn===a&&(i.blockedOn=null,q1||(q1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,zA)))}var Vd=null;function D2(i){Vd!==i&&(Vd=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Vd===i&&(Vd=null);for(var a=0;a<i.length;a+=3){var f=i[a],m=i[a+1],v=i[a+2];if(typeof m!="function"){if(G1(m||f)===null)continue;break}var T=Ki(f);T!==null&&(i.splice(a,3),a-=3,G0(T,{pending:!0,data:v,method:f.method,action:m},m,v))}}))}function Ru(i){function a(K){return Fd(K,i)}Da!==null&&Fd(Da,i),La!==null&&Fd(La,i),ka!==null&&Fd(ka,i),Tu.forEach(a),_u.forEach(a);for(var f=0;f<ja.length;f++){var m=ja[f];m.blockedOn===i&&(m.blockedOn=null)}for(;0<ja.length&&(f=ja[0],f.blockedOn===null);)I2(f),f.blockedOn===null&&ja.shift();if(f=(i.ownerDocument||i).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var v=f[m],T=f[m+1],D=v[wn]||null;if(typeof T=="function")D||D2(f);else if(D){var F=null;if(T&&T.hasAttribute("formAction")){if(v=T,D=T[wn]||null)F=D.formAction;else if(G1(v)!==null)continue}else F=D.action;typeof F=="function"?f[m+1]=F:(f.splice(m,3),m-=3),D2(f)}}}function Y1(i){this._internalRoot=i}zd.prototype.render=Y1.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var f=a.current,m=is();T2(f,m,i,a,null,null)},zd.prototype.unmount=Y1.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;T2(i.current,2,null,i,null,null),Sd(),a[qs]=null}};function zd(i){this._internalRoot=i}zd.prototype.unstable_scheduleHydration=function(i){if(i){var a=vr();i={blockedOn:null,target:i,priority:a};for(var f=0;f<ja.length&&a!==0&&a<ja[f].priority;f++);ja.splice(f,0,i),f===0&&I2(i)}};var L2=e.version;if(L2!=="19.1.0")throw Error(r(527,L2,"19.1.0"));fe.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=b(a),i=i!==null?x(i):null,i=i===null?null:i.stateNode,i};var HA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hd.isDisabled&&Hd.supportsFiber)try{kn=Hd.inject(HA),Le=Hd}catch{}}return Mu.createRoot=function(i,a){if(!l(i))throw Error(r(299));var f=!1,m="",v=Kx,T=Zx,D=Qx,F=null;return a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(D=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(F=a.unstable_transitionCallbacks)),a=C2(i,1,!1,null,null,f,m,v,T,D,F,null),i[qs]=a.current,R1(i),new Y1(a)},Mu.hydrateRoot=function(i,a,f){if(!l(i))throw Error(r(299));var m=!1,v="",T=Kx,D=Zx,F=Qx,K=null,ge=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(v=f.identifierPrefix),f.onUncaughtError!==void 0&&(T=f.onUncaughtError),f.onCaughtError!==void 0&&(D=f.onCaughtError),f.onRecoverableError!==void 0&&(F=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(K=f.unstable_transitionCallbacks),f.formState!==void 0&&(ge=f.formState)),a=C2(i,1,!0,a,f??null,m,v,T,D,F,K,ge),a.context=A2(null),f=a.current,m=is(),m=fo(m),v=ba(m),v.callback=null,wa(f,v,m),f=m,a.current.lanes=f,Wi(a,f),cr(a),i[qs]=a.current,R1(i),new zd(a)},Mu.version="19.1.0",Mu}var cb;function W7(){if(cb)return Q1.exports;cb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Q1.exports=X7(),Q1.exports}var K7=W7(),Du={},ub;function Z7(){if(ub)return Du;ub=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.parse=h,Du.serialize=x;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,u=(()=>{const N=function(){};return N.prototype=Object.create(null),N})();function h(N,I){const M=new u,j=N.length;if(j<2)return M;const U=(I==null?void 0:I.decode)||E;let $=0;do{const q=N.indexOf("=",$);if(q===-1)break;const B=N.indexOf(";",$),V=B===-1?j:B;if(q>V){$=N.lastIndexOf(";",q-1)+1;continue}const z=y(N,$,q),ee=b(N,q,z),X=N.slice(z,ee);if(M[X]===void 0){let ae=y(N,q+1,V),Y=b(N,V,ae);const be=U(N.slice(ae,Y));M[X]=be}$=V+1}while($<j);return M}function y(N,I,M){do{const j=N.charCodeAt(I);if(j!==32&&j!==9)return I}while(++I<M);return M}function b(N,I,M){for(;I>M;){const j=N.charCodeAt(--I);if(j!==32&&j!==9)return I+1}return M}function x(N,I,M){const j=(M==null?void 0:M.encode)||encodeURIComponent;if(!t.test(N))throw new TypeError(`argument name is invalid: ${N}`);const U=j(I);if(!e.test(U))throw new TypeError(`argument val is invalid: ${I}`);let $=N+"="+U;if(!M)return $;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);$+="; Max-Age="+M.maxAge}if(M.domain){if(!n.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);$+="; Domain="+M.domain}if(M.path){if(!r.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);$+="; Path="+M.path}if(M.expires){if(!A(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);$+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&($+="; HttpOnly"),M.secure&&($+="; Secure"),M.partitioned&&($+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":$+="; Priority=Low";break;case"medium":$+="; Priority=Medium";break;case"high":$+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":$+="; SameSite=Strict";break;case"lax":$+="; SameSite=Lax";break;case"none":$+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return $}function E(N){if(N.indexOf("%")===-1)return N;try{return decodeURIComponent(N)}catch{return N}}function A(N){return l.call(N)==="[object Date]"}return Du}Z7();var fb="popstate";function Q7(t={}){function e(l,u){let{pathname:h="/",search:y="",hash:b=""}=ll(l.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),jg("",{pathname:h,search:y,hash:b},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(l,u){let h=l.document.querySelector("base"),y="";if(h&&h.getAttribute("href")){let b=l.location.href,x=b.indexOf("#");y=x===-1?b:b.slice(0,x)}return y+"#"+(typeof u=="string"?u:uf(u))}function r(l,u){As(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return eO(e,n,r,t)}function mn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function As(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function J7(){return Math.random().toString(36).substring(2,10)}function db(t,e){return{usr:t.state,key:t.key,idx:e}}function jg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ll(e):e,state:n,key:e&&e.key||r||J7()}}function uf({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ll(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function eO(t,e,n,r={}){let{window:l=document.defaultView,v5Compat:u=!1}=r,h=l.history,y="POP",b=null,x=E();x==null&&(x=0,h.replaceState({...h.state,idx:x},""));function E(){return(h.state||{idx:null}).idx}function A(){y="POP";let U=E(),$=U==null?null:U-x;x=U,b&&b({action:y,location:j.location,delta:$})}function N(U,$){y="PUSH";let q=jg(j.location,U,$);n&&n(q,U),x=E()+1;let B=db(q,x),V=j.createHref(q);try{h.pushState(B,"",V)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;l.location.assign(V)}u&&b&&b({action:y,location:j.location,delta:1})}function I(U,$){y="REPLACE";let q=jg(j.location,U,$);n&&n(q,U),x=E();let B=db(q,x),V=j.createHref(q);h.replaceState(B,"",V),u&&b&&b({action:y,location:j.location,delta:0})}function M(U){return tO(U)}let j={get action(){return y},get location(){return t(l,h)},listen(U){if(b)throw new Error("A history only accepts one active listener");return l.addEventListener(fb,A),b=U,()=>{l.removeEventListener(fb,A),b=null}},createHref(U){return e(l,U)},createURL:M,encodeLocation(U){let $=M(U);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:N,replace:I,go(U){return h.go(U)}};return j}function tO(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),mn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:uf(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function x3(t,e,n="/"){return nO(t,e,n,!1)}function nO(t,e,n,r){let l=typeof e=="string"?ll(e):e,u=Zr(l.pathname||"/",n);if(u==null)return null;let h=y3(t);iO(h);let y=null;for(let b=0;y==null&&b<h.length;++b){let x=gO(u);y=dO(h[b],x,r)}return y}function y3(t,e=[],n=[],r=""){let l=(u,h,y)=>{let b={relativePath:y===void 0?u.path||"":y,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};b.relativePath.startsWith("/")&&(mn(b.relativePath.startsWith(r),`Absolute route path "${b.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(r.length));let x=Xr([r,b.relativePath]),E=n.concat(b);u.children&&u.children.length>0&&(mn(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),y3(u.children,e,E,x)),!(u.path==null&&!u.index)&&e.push({path:x,score:uO(x,u.index),routesMeta:E})};return t.forEach((u,h)=>{var y;if(u.path===""||!((y=u.path)!=null&&y.includes("?")))l(u,h);else for(let b of b3(u.path))l(u,h,b)}),e}function b3(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(r.length===0)return l?[u,""]:[u];let h=b3(r.join("/")),y=[];return y.push(...h.map(b=>b===""?u:[u,b].join("/"))),l&&y.push(...h),y.map(b=>t.startsWith("/")&&b===""?"/":b)}function iO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:fO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var sO=/^:[\w-]+$/,rO=3,aO=2,oO=1,lO=10,cO=-2,hb=t=>t==="*";function uO(t,e){let n=t.split("/"),r=n.length;return n.some(hb)&&(r+=cO),e&&(r+=aO),n.filter(l=>!hb(l)).reduce((l,u)=>l+(sO.test(u)?rO:u===""?oO:lO),r)}function fO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,l)=>r===e[l])?t[t.length-1]-e[e.length-1]:0}function dO(t,e,n=!1){let{routesMeta:r}=t,l={},u="/",h=[];for(let y=0;y<r.length;++y){let b=r[y],x=y===r.length-1,E=u==="/"?e:e.slice(u.length)||"/",A=yh({path:b.relativePath,caseSensitive:b.caseSensitive,end:x},E),N=b.route;if(!A&&x&&n&&!r[r.length-1].route.index&&(A=yh({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},E)),!A)return null;Object.assign(l,A.params),h.push({params:l,pathname:Xr([u,A.pathname]),pathnameBase:yO(Xr([u,A.pathnameBase])),route:N}),A.pathnameBase!=="/"&&(u=Xr([u,A.pathnameBase]))}return h}function yh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=hO(t.path,t.caseSensitive,t.end),l=e.match(n);if(!l)return null;let u=l[0],h=u.replace(/(.)\/+$/,"$1"),y=l.slice(1);return{params:r.reduce((x,{paramName:E,isOptional:A},N)=>{if(E==="*"){let M=y[N]||"";h=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const I=y[N];return A&&!I?x[E]=void 0:x[E]=(I||"").replace(/%2F/g,"/"),x},{}),pathname:u,pathnameBase:h,pattern:t}}function hO(t,e=!1,n=!0){As(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,y,b)=>(r.push({paramName:y,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),r]}function gO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return As(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Zr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function mO(t,e="/"){let{pathname:n,search:r="",hash:l=""}=typeof t=="string"?ll(t):t;return{pathname:n?n.startsWith("/")?n:pO(n,e):e,search:bO(r),hash:wO(l)}}function pO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function ng(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jm(t){let e=xO(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Bm(t,e,n,r=!1){let l;typeof t=="string"?l=ll(t):(l={...t},mn(!l.pathname||!l.pathname.includes("?"),ng("?","pathname","search",l)),mn(!l.pathname||!l.pathname.includes("#"),ng("#","pathname","hash",l)),mn(!l.search||!l.search.includes("#"),ng("#","search","hash",l)));let u=t===""||l.pathname==="",h=u?"/":l.pathname,y;if(h==null)y=n;else{let A=e.length-1;if(!r&&h.startsWith("..")){let N=h.split("/");for(;N[0]==="..";)N.shift(),A-=1;l.pathname=N.join("/")}y=A>=0?e[A]:"/"}let b=mO(l,y),x=h&&h!=="/"&&h.endsWith("/"),E=(u||h===".")&&n.endsWith("/");return!b.pathname.endsWith("/")&&(x||E)&&(b.pathname+="/"),b}var Xr=t=>t.join("/").replace(/\/\/+/g,"/"),yO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function vO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var w3=["POST","PUT","PATCH","DELETE"];new Set(w3);var EO=["GET",...w3];new Set(EO);var Rc=R.createContext(null);Rc.displayName="DataRouter";var Bh=R.createContext(null);Bh.displayName="DataRouterState";var v3=R.createContext({isTransitioning:!1});v3.displayName="ViewTransition";var SO=R.createContext(new Map);SO.displayName="Fetchers";var CO=R.createContext(null);CO.displayName="Await";var Gs=R.createContext(null);Gs.displayName="Navigation";var Cf=R.createContext(null);Cf.displayName="Location";var Ts=R.createContext({outlet:null,matches:[],isDataRoute:!1});Ts.displayName="Route";var Pm=R.createContext(null);Pm.displayName="RouteError";function AO(t,{relative:e}={}){mn(Oc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(Gs),{hash:l,pathname:u,search:h}=Af(t,{relative:e}),y=u;return n!=="/"&&(y=u==="/"?n:Xr([n,u])),r.createHref({pathname:y,search:h,hash:l})}function Oc(){return R.useContext(Cf)!=null}function ta(){return mn(Oc(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Cf).location}var E3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function S3(t){R.useContext(Gs).static||R.useLayoutEffect(t)}function _s(){let{isDataRoute:t}=R.useContext(Ts);return t?VO():TO()}function TO(){mn(Oc(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(Rc),{basename:e,navigator:n}=R.useContext(Gs),{matches:r}=R.useContext(Ts),{pathname:l}=ta(),u=JSON.stringify(jm(r)),h=R.useRef(!1);return S3(()=>{h.current=!0}),R.useCallback((b,x={})=>{if(As(h.current,E3),!h.current)return;if(typeof b=="number"){n.go(b);return}let E=Bm(b,JSON.parse(u),l,x.relative==="path");t==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Xr([e,E.pathname])),(x.replace?n.replace:n.push)(E,x.state,x)},[e,n,u,l,t])}var _O=R.createContext(null);function NO(t){let e=R.useContext(Ts).outlet;return e&&R.createElement(_O.Provider,{value:t},e)}function RO(){let{matches:t}=R.useContext(Ts),e=t[t.length-1];return e?e.params:{}}function Af(t,{relative:e}={}){let{matches:n}=R.useContext(Ts),{pathname:r}=ta(),l=JSON.stringify(jm(n));return R.useMemo(()=>Bm(t,JSON.parse(l),r,e==="path"),[t,l,r,e])}function OO(t,e){return C3(t,e)}function C3(t,e,n,r){var $;mn(Oc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=R.useContext(Gs),{matches:u}=R.useContext(Ts),h=u[u.length-1],y=h?h.params:{},b=h?h.pathname:"/",x=h?h.pathnameBase:"/",E=h&&h.route;{let q=E&&E.path||"";A3(b,!E||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let A=ta(),N;if(e){let q=typeof e=="string"?ll(e):e;mn(x==="/"||(($=q.pathname)==null?void 0:$.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${q.pathname}" was given in the \`location\` prop.`),N=q}else N=A;let I=N.pathname||"/",M=I;if(x!=="/"){let q=x.replace(/^\//,"").split("/");M="/"+I.replace(/^\//,"").split("/").slice(q.length).join("/")}let j=x3(t,{pathname:M});As(E||j!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),As(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=kO(j&&j.map(q=>Object.assign({},q,{params:Object.assign({},y,q.params),pathname:Xr([x,l.encodeLocation?l.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?x:Xr([x,l.encodeLocation?l.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),u,n,r);return e&&U?R.createElement(Cf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},U):U}function IO(){let t=FO(),e=vO(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",t),h=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:u},"ErrorBoundary")," or"," ",R.createElement("code",{style:u},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:l},n):null,h)}var MO=R.createElement(IO,null),DO=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?R.createElement(Ts.Provider,{value:this.props.routeContext},R.createElement(Pm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function LO({routeContext:t,match:e,children:n}){let r=R.useContext(Rc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Ts.Provider,{value:t},n)}function kO(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,u=n==null?void 0:n.errors;if(u!=null){let b=l.findIndex(x=>x.route.id&&(u==null?void 0:u[x.route.id])!==void 0);mn(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,b+1))}let h=!1,y=-1;if(n)for(let b=0;b<l.length;b++){let x=l[b];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(y=b),x.route.id){let{loaderData:E,errors:A}=n,N=x.route.loader&&!E.hasOwnProperty(x.route.id)&&(!A||A[x.route.id]===void 0);if(x.route.lazy||N){h=!0,y>=0?l=l.slice(0,y+1):l=[l[0]];break}}}return l.reduceRight((b,x,E)=>{let A,N=!1,I=null,M=null;n&&(A=u&&x.route.id?u[x.route.id]:void 0,I=x.route.errorElement||MO,h&&(y<0&&E===0?(A3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,M=null):y===E&&(N=!0,M=x.route.hydrateFallbackElement||null)));let j=e.concat(l.slice(0,E+1)),U=()=>{let $;return A?$=I:N?$=M:x.route.Component?$=R.createElement(x.route.Component,null):x.route.element?$=x.route.element:$=b,R.createElement(LO,{match:x,routeContext:{outlet:b,matches:j,isDataRoute:n!=null},children:$})};return n&&(x.route.ErrorBoundary||x.route.errorElement||E===0)?R.createElement(DO,{location:n.location,revalidation:n.revalidation,component:I,error:A,children:U(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):U()},null)}function Um(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jO(t){let e=R.useContext(Rc);return mn(e,Um(t)),e}function BO(t){let e=R.useContext(Bh);return mn(e,Um(t)),e}function PO(t){let e=R.useContext(Ts);return mn(e,Um(t)),e}function Fm(t){let e=PO(t),n=e.matches[e.matches.length-1];return mn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function UO(){return Fm("useRouteId")}function FO(){var r;let t=R.useContext(Pm),e=BO("useRouteError"),n=Fm("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function VO(){let{router:t}=jO("useNavigate"),e=Fm("useNavigate"),n=R.useRef(!1);return S3(()=>{n.current=!0}),R.useCallback(async(l,u={})=>{As(n.current,E3),n.current&&(typeof l=="number"?t.navigate(l):await t.navigate(l,{fromRouteId:e,...u}))},[t,e])}var gb={};function A3(t,e,n){!e&&!gb[t]&&(gb[t]=!0,As(!1,n))}R.memo(zO);function zO({routes:t,future:e,state:n}){return C3(t,void 0,n,e)}function mb({to:t,replace:e,state:n,relative:r}){mn(Oc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=R.useContext(Gs);As(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=R.useContext(Ts),{pathname:h}=ta(),y=_s(),b=Bm(t,jm(u),h,r==="path"),x=JSON.stringify(b);return R.useEffect(()=>{y(JSON.parse(x),{replace:e,state:n,relative:r})},[y,x,r,e,n]),null}function HO(t){return NO(t.context)}function Fn(t){mn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $O({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:l,static:u=!1}){mn(!Oc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=t.replace(/^\/*/,"/"),y=R.useMemo(()=>({basename:h,navigator:l,static:u,future:{}}),[h,l,u]);typeof n=="string"&&(n=ll(n));let{pathname:b="/",search:x="",hash:E="",state:A=null,key:N="default"}=n,I=R.useMemo(()=>{let M=Zr(b,h);return M==null?null:{location:{pathname:M,search:x,hash:E,state:A,key:N},navigationType:r}},[h,b,x,E,A,N,r]);return As(I!=null,`<Router basename="${h}"> is not able to match the URL "${b}${x}${E}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:R.createElement(Gs.Provider,{value:y},R.createElement(Cf.Provider,{children:e,value:I}))}function GO({children:t,location:e}){return OO(Bg(t),e)}function Bg(t,e=[]){let n=[];return R.Children.forEach(t,(r,l)=>{if(!R.isValidElement(r))return;let u=[...e,l];if(r.type===R.Fragment){n.push.apply(n,Bg(r.props.children,u));return}mn(r.type===Fn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let h={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=Bg(r.props.children,u)),n.push(h)}),n}var lh="get",ch="application/x-www-form-urlencoded";function Ph(t){return t!=null&&typeof t.tagName=="string"}function qO(t){return Ph(t)&&t.tagName.toLowerCase()==="button"}function YO(t){return Ph(t)&&t.tagName.toLowerCase()==="form"}function XO(t){return Ph(t)&&t.tagName.toLowerCase()==="input"}function WO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function KO(t,e){return t.button===0&&(!e||e==="_self")&&!WO(t)}var Yd=null;function ZO(){if(Yd===null)try{new FormData(document.createElement("form"),0),Yd=!1}catch{Yd=!0}return Yd}var QO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ig(t){return t!=null&&!QO.has(t)?(As(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ch}"`),null):t}function JO(t,e){let n,r,l,u,h;if(YO(t)){let y=t.getAttribute("action");r=y?Zr(y,e):null,n=t.getAttribute("method")||lh,l=ig(t.getAttribute("enctype"))||ch,u=new FormData(t)}else if(qO(t)||XO(t)&&(t.type==="submit"||t.type==="image")){let y=t.form;if(y==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=t.getAttribute("formaction")||y.getAttribute("action");if(r=b?Zr(b,e):null,n=t.getAttribute("formmethod")||y.getAttribute("method")||lh,l=ig(t.getAttribute("formenctype"))||ig(y.getAttribute("enctype"))||ch,u=new FormData(y,t),!ZO()){let{name:x,type:E,value:A}=t;if(E==="image"){let N=x?`${x}.`:"";u.append(`${N}x`,"0"),u.append(`${N}y`,"0")}else x&&u.append(x,A)}}else{if(Ph(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=lh,r=null,l=ch,h=t}return u&&l==="text/plain"&&(h=u,u=void 0),{action:r,method:n.toLowerCase(),encType:l,formData:u,body:h}}function Vm(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function eI(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tI(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function nI(t,e,n){let r=await Promise.all(t.map(async l=>{let u=e.routes[l.route.id];if(u){let h=await eI(u,n);return h.links?h.links():[]}return[]}));return aI(r.flat(1).filter(tI).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function pb(t,e,n,r,l,u){let h=(b,x)=>n[x]?b.route.id!==n[x].route.id:!0,y=(b,x)=>{var E;return n[x].pathname!==b.pathname||((E=n[x].route.path)==null?void 0:E.endsWith("*"))&&n[x].params["*"]!==b.params["*"]};return u==="assets"?e.filter((b,x)=>h(b,x)||y(b,x)):u==="data"?e.filter((b,x)=>{var A;let E=r.routes[b.route.id];if(!E||!E.hasLoader)return!1;if(h(b,x)||y(b,x))return!0;if(b.route.shouldRevalidate){let N=b.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((A=n[0])==null?void 0:A.params)||{},nextUrl:new URL(t,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function iI(t,e,{includeHydrateFallback:n}={}){return sI(t.map(r=>{let l=e.routes[r.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function sI(t){return[...new Set(t)]}function rI(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function aI(t,e){let n=new Set;return new Set(e),t.reduce((r,l)=>{let u=JSON.stringify(rI(l));return n.has(u)||(n.add(u),r.push({key:u,link:l})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oI=new Set([100,101,204,205]);function lI(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Zr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function T3(){let t=R.useContext(Rc);return Vm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function cI(){let t=R.useContext(Bh);return Vm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var zm=R.createContext(void 0);zm.displayName="FrameworkContext";function _3(){let t=R.useContext(zm);return Vm(t,"You must render this element inside a <HydratedRouter> element"),t}function uI(t,e){let n=R.useContext(zm),[r,l]=R.useState(!1),[u,h]=R.useState(!1),{onFocus:y,onBlur:b,onMouseEnter:x,onMouseLeave:E,onTouchStart:A}=e,N=R.useRef(null);R.useEffect(()=>{if(t==="render"&&h(!0),t==="viewport"){let j=$=>{$.forEach(q=>{h(q.isIntersecting)})},U=new IntersectionObserver(j,{threshold:.5});return N.current&&U.observe(N.current),()=>{U.disconnect()}}},[t]),R.useEffect(()=>{if(r){let j=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(j)}}},[r]);let I=()=>{l(!0)},M=()=>{l(!1),h(!1)};return n?t!=="intent"?[u,N,{}]:[u,N,{onFocus:Lu(y,I),onBlur:Lu(b,M),onMouseEnter:Lu(x,I),onMouseLeave:Lu(E,M),onTouchStart:Lu(A,I)}]:[!1,N,{}]}function Lu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function fI({page:t,...e}){let{router:n}=T3(),r=R.useMemo(()=>x3(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?R.createElement(hI,{page:t,matches:r,...e}):null}function dI(t){let{manifest:e,routeModules:n}=_3(),[r,l]=R.useState([]);return R.useEffect(()=>{let u=!1;return nI(t,e,n).then(h=>{u||l(h)}),()=>{u=!0}},[t,e,n]),r}function hI({page:t,matches:e,...n}){let r=ta(),{manifest:l,routeModules:u}=_3(),{basename:h}=T3(),{loaderData:y,matches:b}=cI(),x=R.useMemo(()=>pb(t,e,b,l,r,"data"),[t,e,b,l,r]),E=R.useMemo(()=>pb(t,e,b,l,r,"assets"),[t,e,b,l,r]),A=R.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let M=new Set,j=!1;if(e.forEach($=>{var B;let q=l.routes[$.route.id];!q||!q.hasLoader||(!x.some(V=>V.route.id===$.route.id)&&$.route.id in y&&((B=u[$.route.id])!=null&&B.shouldRevalidate)||q.hasClientLoader?j=!0:M.add($.route.id))}),M.size===0)return[];let U=lI(t,h);return j&&M.size>0&&U.searchParams.set("_routes",e.filter($=>M.has($.route.id)).map($=>$.route.id).join(",")),[U.pathname+U.search]},[h,y,r,l,x,e,t,u]),N=R.useMemo(()=>iI(E,l),[E,l]),I=dI(E);return R.createElement(R.Fragment,null,A.map(M=>R.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),N.map(M=>R.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),I.map(({key:M,link:j})=>R.createElement("link",{key:M,...j})))}function gI(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var N3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{N3&&(window.__reactRouterVersion="7.6.3")}catch{}function mI({basename:t,children:e,window:n}){let r=R.useRef();r.current==null&&(r.current=Q7({window:n,v5Compat:!0}));let l=r.current,[u,h]=R.useState({action:l.action,location:l.location}),y=R.useCallback(b=>{R.startTransition(()=>h(b))},[h]);return R.useLayoutEffect(()=>l.listen(y),[l,y]),R.createElement($O,{basename:t,children:e,location:u.location,navigationType:u.action,navigator:l})}var R3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bh=R.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:l,reloadDocument:u,replace:h,state:y,target:b,to:x,preventScrollReset:E,viewTransition:A,...N},I){let{basename:M}=R.useContext(Gs),j=typeof x=="string"&&R3.test(x),U,$=!1;if(typeof x=="string"&&j&&(U=x,N3))try{let Y=new URL(window.location.href),be=x.startsWith("//")?new URL(Y.protocol+x):new URL(x),Te=Zr(be.pathname,M);be.origin===Y.origin&&Te!=null?x=Te+be.search+be.hash:$=!0}catch{As(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=AO(x,{relative:l}),[B,V,z]=uI(r,N),ee=bI(x,{replace:h,state:y,target:b,preventScrollReset:E,relative:l,viewTransition:A});function X(Y){e&&e(Y),Y.defaultPrevented||ee(Y)}let ae=R.createElement("a",{...N,...z,href:U||q,onClick:$||u?e:X,ref:gI(I,V),target:b,"data-discover":!j&&n==="render"?"true":void 0});return B&&!j?R.createElement(R.Fragment,null,ae,R.createElement(fI,{page:q})):ae});bh.displayName="Link";var pI=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:l=!1,style:u,to:h,viewTransition:y,children:b,...x},E){let A=Af(h,{relative:x.relative}),N=ta(),I=R.useContext(Bh),{navigator:M,basename:j}=R.useContext(Gs),U=I!=null&&CI(A)&&y===!0,$=M.encodeLocation?M.encodeLocation(A).pathname:A.pathname,q=N.pathname,B=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;n||(q=q.toLowerCase(),B=B?B.toLowerCase():null,$=$.toLowerCase()),B&&j&&(B=Zr(B,j)||B);const V=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let z=q===$||!l&&q.startsWith($)&&q.charAt(V)==="/",ee=B!=null&&(B===$||!l&&B.startsWith($)&&B.charAt($.length)==="/"),X={isActive:z,isPending:ee,isTransitioning:U},ae=z?e:void 0,Y;typeof r=="function"?Y=r(X):Y=[r,z?"active":null,ee?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let be=typeof u=="function"?u(X):u;return R.createElement(bh,{...x,"aria-current":ae,className:Y,ref:E,style:be,to:h,viewTransition:y},typeof b=="function"?b(X):b)});pI.displayName="NavLink";var xI=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:l,state:u,method:h=lh,action:y,onSubmit:b,relative:x,preventScrollReset:E,viewTransition:A,...N},I)=>{let M=EI(),j=SI(y,{relative:x}),U=h.toLowerCase()==="get"?"get":"post",$=typeof y=="string"&&R3.test(y),q=B=>{if(b&&b(B),B.defaultPrevented)return;B.preventDefault();let V=B.nativeEvent.submitter,z=(V==null?void 0:V.getAttribute("formmethod"))||h;M(V||B.currentTarget,{fetcherKey:e,method:z,navigate:n,replace:l,state:u,relative:x,preventScrollReset:E,viewTransition:A})};return R.createElement("form",{ref:I,method:U,action:j,onSubmit:r?b:q,...N,"data-discover":!$&&t==="render"?"true":void 0})});xI.displayName="Form";function yI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function O3(t){let e=R.useContext(Rc);return mn(e,yI(t)),e}function bI(t,{target:e,replace:n,state:r,preventScrollReset:l,relative:u,viewTransition:h}={}){let y=_s(),b=ta(),x=Af(t,{relative:u});return R.useCallback(E=>{if(KO(E,e)){E.preventDefault();let A=n!==void 0?n:uf(b)===uf(x);y(t,{replace:A,state:r,preventScrollReset:l,relative:u,viewTransition:h})}},[b,y,x,n,r,e,t,l,u,h])}var wI=0,vI=()=>`__${String(++wI)}__`;function EI(){let{router:t}=O3("useSubmit"),{basename:e}=R.useContext(Gs),n=UO();return R.useCallback(async(r,l={})=>{let{action:u,method:h,encType:y,formData:b,body:x}=JO(r,e);if(l.navigate===!1){let E=l.fetcherKey||vI();await t.fetch(E,n,l.action||u,{preventScrollReset:l.preventScrollReset,formData:b,body:x,formMethod:l.method||h,formEncType:l.encType||y,flushSync:l.flushSync})}else await t.navigate(l.action||u,{preventScrollReset:l.preventScrollReset,formData:b,body:x,formMethod:l.method||h,formEncType:l.encType||y,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[t,e,n])}function SI(t,{relative:e}={}){let{basename:n}=R.useContext(Gs),r=R.useContext(Ts);mn(r,"useFormAction must be used inside a RouteContext");let[l]=r.matches.slice(-1),u={...Af(t||".",{relative:e})},h=ta();if(t==null){u.search=h.search;let y=new URLSearchParams(u.search),b=y.getAll("index");if(b.some(E=>E==="")){y.delete("index"),b.filter(A=>A).forEach(A=>y.append("index",A));let E=y.toString();u.search=E?`?${E}`:""}}return(!t||t===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Xr([n,u.pathname])),uf(u)}function CI(t,e={}){let n=R.useContext(v3);mn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=O3("useViewTransitionState"),l=Af(t,{relative:e.relative});if(!n.isTransitioning)return!1;let u=Zr(n.currentLocation.pathname,r)||n.currentLocation.pathname,h=Zr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return yh(l.pathname,h)!=null||yh(l.pathname,u)!=null}[...oI];var AI=p3(),Ic=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},rl=typeof window>"u"||"Deno"in globalThis;function Mi(){}function TI(t,e){return typeof t=="function"?t(e):t}function Pg(t){return typeof t=="number"&&t>=0&&t!==1/0}function I3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function io(t,e){return typeof t=="function"?t(e):t}function Hs(t,e){return typeof t=="function"?t(e):t}function xb(t,e){const{type:n="all",exact:r,fetchStatus:l,predicate:u,queryKey:h,stale:y}=t;if(h){if(r){if(e.queryHash!==Hm(h,e.options))return!1}else if(!ff(e.queryKey,h))return!1}if(n!=="all"){const b=e.isActive();if(n==="active"&&!b||n==="inactive"&&b)return!1}return!(typeof y=="boolean"&&e.isStale()!==y||l&&l!==e.state.fetchStatus||u&&!u(e))}function yb(t,e){const{exact:n,status:r,predicate:l,mutationKey:u}=t;if(u){if(!e.options.mutationKey)return!1;if(n){if(al(e.options.mutationKey)!==al(u))return!1}else if(!ff(e.options.mutationKey,u))return!1}return!(r&&e.state.status!==r||l&&!l(e))}function Hm(t,e){return((e==null?void 0:e.queryKeyHashFn)||al)(t)}function al(t){return JSON.stringify(t,(e,n)=>Ug(n)?Object.keys(n).sort().reduce((r,l)=>(r[l]=n[l],r),{}):n)}function ff(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ff(t[n],e[n])):!1}function M3(t,e){if(t===e)return t;const n=bb(t)&&bb(e);if(n||Ug(t)&&Ug(e)){const r=n?t:Object.keys(t),l=r.length,u=n?e:Object.keys(e),h=u.length,y=n?[]:{},b=new Set(r);let x=0;for(let E=0;E<h;E++){const A=n?E:u[E];(!n&&b.has(A)||n)&&t[A]===void 0&&e[A]===void 0?(y[A]=void 0,x++):(y[A]=M3(t[A],e[A]),y[A]===t[A]&&t[A]!==void 0&&x++)}return l===h&&x===l?t:y}return e}function wh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function bb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ug(t){if(!wb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!wb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function wb(t){return Object.prototype.toString.call(t)==="[object Object]"}function _I(t){return new Promise(e=>{setTimeout(e,t)})}function Fg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?M3(t,e):e}function NI(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function RI(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var $m=Symbol();function D3(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===$m?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function L3(t,e){return typeof t=="function"?t(...e):!!t}var qo,Ga,gc,e3,OI=(e3=class extends Ic{constructor(){super();et(this,qo);et(this,Ga);et(this,gc);Ve(this,gc,e=>{if(!rl&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){J(this,Ga)||this.setEventListener(J(this,gc))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,Ga))==null||e.call(this),Ve(this,Ga,void 0))}setEventListener(e){var n;Ve(this,gc,e),(n=J(this,Ga))==null||n.call(this),Ve(this,Ga,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){J(this,qo)!==e&&(Ve(this,qo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof J(this,qo)=="boolean"?J(this,qo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},qo=new WeakMap,Ga=new WeakMap,gc=new WeakMap,e3),Gm=new OI,mc,qa,pc,t3,II=(t3=class extends Ic{constructor(){super();et(this,mc,!0);et(this,qa);et(this,pc);Ve(this,pc,e=>{if(!rl&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){J(this,qa)||this.setEventListener(J(this,pc))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,qa))==null||e.call(this),Ve(this,qa,void 0))}setEventListener(e){var n;Ve(this,pc,e),(n=J(this,qa))==null||n.call(this),Ve(this,qa,e(this.setOnline.bind(this)))}setOnline(e){J(this,mc)!==e&&(Ve(this,mc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return J(this,mc)}},mc=new WeakMap,qa=new WeakMap,pc=new WeakMap,t3),vh=new II;function Vg(){let t,e;const n=new Promise((l,u)=>{t=l,e=u});n.status="pending",n.catch(()=>{});function r(l){Object.assign(n,l),delete n.resolve,delete n.reject}return n.resolve=l=>{r({status:"fulfilled",value:l}),t(l)},n.reject=l=>{r({status:"rejected",reason:l}),e(l)},n}function MI(t){return Math.min(1e3*2**t,3e4)}function k3(t){return(t??"online")==="online"?vh.isOnline():!0}var j3=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function sg(t){return t instanceof j3}function B3(t){let e=!1,n=0,r=!1,l;const u=Vg(),h=j=>{var U;r||(N(new j3(j)),(U=t.abort)==null||U.call(t))},y=()=>{e=!0},b=()=>{e=!1},x=()=>Gm.isFocused()&&(t.networkMode==="always"||vh.isOnline())&&t.canRun(),E=()=>k3(t.networkMode)&&t.canRun(),A=j=>{var U;r||(r=!0,(U=t.onSuccess)==null||U.call(t,j),l==null||l(),u.resolve(j))},N=j=>{var U;r||(r=!0,(U=t.onError)==null||U.call(t,j),l==null||l(),u.reject(j))},I=()=>new Promise(j=>{var U;l=$=>{(r||x())&&j($)},(U=t.onPause)==null||U.call(t)}).then(()=>{var j;l=void 0,r||(j=t.onContinue)==null||j.call(t)}),M=()=>{if(r)return;let j;const U=n===0?t.initialPromise:void 0;try{j=U??t.fn()}catch($){j=Promise.reject($)}Promise.resolve(j).then(A).catch($=>{var ee;if(r)return;const q=t.retry??(rl?0:3),B=t.retryDelay??MI,V=typeof B=="function"?B(n,$):B,z=q===!0||typeof q=="number"&&n<q||typeof q=="function"&&q(n,$);if(e||!z){N($);return}n++,(ee=t.onFail)==null||ee.call(t,n,$),_I(V).then(()=>x()?void 0:I()).then(()=>{e?N($):M()})})};return{promise:u,cancel:h,continue:()=>(l==null||l(),u),cancelRetry:y,continueRetry:b,canStart:E,start:()=>(E()?M():I().then(M),u)}}var DI=t=>setTimeout(t,0);function LI(){let t=[],e=0,n=y=>{y()},r=y=>{y()},l=DI;const u=y=>{e?t.push(y):l(()=>{n(y)})},h=()=>{const y=t;t=[],y.length&&l(()=>{r(()=>{y.forEach(b=>{n(b)})})})};return{batch:y=>{let b;e++;try{b=y()}finally{e--,e||h()}return b},batchCalls:y=>(...b)=>{u(()=>{y(...b)})},schedule:u,setNotifyFunction:y=>{n=y},setBatchNotifyFunction:y=>{r=y},setScheduler:y=>{l=y}}}var Zn=LI(),Yo,n3,P3=(n3=class{constructor(){et(this,Yo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Pg(this.gcTime)&&Ve(this,Yo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(rl?1/0:5*60*1e3))}clearGcTimeout(){J(this,Yo)&&(clearTimeout(J(this,Yo)),Ve(this,Yo,void 0))}},Yo=new WeakMap,n3),xc,Xo,Es,Wo,Ci,wf,Ko,Us,Vr,i3,kI=(i3=class extends P3{constructor(e){super();et(this,Us);et(this,xc);et(this,Xo);et(this,Es);et(this,Wo);et(this,Ci);et(this,wf);et(this,Ko);Ve(this,Ko,!1),Ve(this,wf,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ve(this,Wo,e.client),Ve(this,Es,J(this,Wo).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ve(this,xc,jI(this.options)),this.state=e.state??J(this,xc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=J(this,Ci))==null?void 0:e.promise}setOptions(e){this.options={...J(this,wf),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&J(this,Es).remove(this)}setData(e,n){const r=Fg(this.state.data,e,this.options);return wt(this,Us,Vr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){wt(this,Us,Vr).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,l;const n=(r=J(this,Ci))==null?void 0:r.promise;return(l=J(this,Ci))==null||l.cancel(e),n?n.then(Mi).catch(Mi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,xc))}isActive(){return this.observers.some(e=>Hs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$m||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>io(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!I3(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=J(this,Ci))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=J(this,Ci))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),J(this,Es).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(J(this,Ci)&&(J(this,Ko)?J(this,Ci).cancel({revert:!0}):J(this,Ci).cancelRetry()),this.scheduleGc()),J(this,Es).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||wt(this,Us,Vr).call(this,{type:"invalidate"})}fetch(e,n){var x,E,A;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(J(this,Ci))return J(this,Ci).continueRetry(),J(this,Ci).promise}if(e&&this.setOptions(e),!this.options.queryFn){const N=this.observers.find(I=>I.options.queryFn);N&&this.setOptions(N.options)}const r=new AbortController,l=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(Ve(this,Ko,!0),r.signal)})},u=()=>{const N=D3(this.options,n),M=(()=>{const j={client:J(this,Wo),queryKey:this.queryKey,meta:this.meta};return l(j),j})();return Ve(this,Ko,!1),this.options.persister?this.options.persister(N,M,this):N(M)},y=(()=>{const N={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:J(this,Wo),state:this.state,fetchFn:u};return l(N),N})();(x=this.options.behavior)==null||x.onFetch(y,this),Ve(this,Xo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((E=y.fetchOptions)==null?void 0:E.meta))&&wt(this,Us,Vr).call(this,{type:"fetch",meta:(A=y.fetchOptions)==null?void 0:A.meta});const b=N=>{var I,M,j,U;sg(N)&&N.silent||wt(this,Us,Vr).call(this,{type:"error",error:N}),sg(N)||((M=(I=J(this,Es).config).onError)==null||M.call(I,N,this),(U=(j=J(this,Es).config).onSettled)==null||U.call(j,this.state.data,N,this)),this.scheduleGc()};return Ve(this,Ci,B3({initialPromise:n==null?void 0:n.initialPromise,fn:y.fetchFn,abort:r.abort.bind(r),onSuccess:N=>{var I,M,j,U;if(N===void 0){b(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(N)}catch($){b($);return}(M=(I=J(this,Es).config).onSuccess)==null||M.call(I,N,this),(U=(j=J(this,Es).config).onSettled)==null||U.call(j,N,this.state.error,this),this.scheduleGc()},onError:b,onFail:(N,I)=>{wt(this,Us,Vr).call(this,{type:"failed",failureCount:N,error:I})},onPause:()=>{wt(this,Us,Vr).call(this,{type:"pause"})},onContinue:()=>{wt(this,Us,Vr).call(this,{type:"continue"})},retry:y.options.retry,retryDelay:y.options.retryDelay,networkMode:y.options.networkMode,canRun:()=>!0})),J(this,Ci).start()}},xc=new WeakMap,Xo=new WeakMap,Es=new WeakMap,Wo=new WeakMap,Ci=new WeakMap,wf=new WeakMap,Ko=new WeakMap,Us=new WeakSet,Vr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...U3(r.data,this.options),fetchMeta:e.meta??null};case"success":return Ve(this,Xo,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const l=e.error;return sg(l)&&l.revert&&J(this,Xo)?{...J(this,Xo),fetchStatus:"idle"}:{...r,error:l,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Zn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),J(this,Es).notify({query:this,type:"updated",action:e})})},i3);function U3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:k3(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function jI(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var dr,s3,BI=(s3=class extends Ic{constructor(e={}){super();et(this,dr);this.config=e,Ve(this,dr,new Map)}build(e,n,r){const l=n.queryKey,u=n.queryHash??Hm(l,n);let h=this.get(u);return h||(h=new kI({client:e,queryKey:l,queryHash:u,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(l)}),this.add(h)),h}add(e){J(this,dr).has(e.queryHash)||(J(this,dr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=J(this,dr).get(e.queryHash);n&&(e.destroy(),n===e&&J(this,dr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Zn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return J(this,dr).get(e)}getAll(){return[...J(this,dr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>xb(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>xb(e,r)):n}notify(e){Zn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Zn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Zn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},dr=new WeakMap,s3),hr,Oi,Zo,gr,Ua,r3,PI=(r3=class extends P3{constructor(e){super();et(this,gr);et(this,hr);et(this,Oi);et(this,Zo);this.mutationId=e.mutationId,Ve(this,Oi,e.mutationCache),Ve(this,hr,[]),this.state=e.state||F3(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){J(this,hr).includes(e)||(J(this,hr).push(e),this.clearGcTimeout(),J(this,Oi).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ve(this,hr,J(this,hr).filter(n=>n!==e)),this.scheduleGc(),J(this,Oi).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){J(this,hr).length||(this.state.status==="pending"?this.scheduleGc():J(this,Oi).remove(this))}continue(){var e;return((e=J(this,Zo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var u,h,y,b,x,E,A,N,I,M,j,U,$,q,B,V,z,ee,X,ae;const n=()=>{wt(this,gr,Ua).call(this,{type:"continue"})};Ve(this,Zo,B3({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(Y,be)=>{wt(this,gr,Ua).call(this,{type:"failed",failureCount:Y,error:be})},onPause:()=>{wt(this,gr,Ua).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,Oi).canRun(this)}));const r=this.state.status==="pending",l=!J(this,Zo).canStart();try{if(r)n();else{wt(this,gr,Ua).call(this,{type:"pending",variables:e,isPaused:l}),await((h=(u=J(this,Oi).config).onMutate)==null?void 0:h.call(u,e,this));const be=await((b=(y=this.options).onMutate)==null?void 0:b.call(y,e));be!==this.state.context&&wt(this,gr,Ua).call(this,{type:"pending",context:be,variables:e,isPaused:l})}const Y=await J(this,Zo).start();return await((E=(x=J(this,Oi).config).onSuccess)==null?void 0:E.call(x,Y,e,this.state.context,this)),await((N=(A=this.options).onSuccess)==null?void 0:N.call(A,Y,e,this.state.context)),await((M=(I=J(this,Oi).config).onSettled)==null?void 0:M.call(I,Y,null,this.state.variables,this.state.context,this)),await((U=(j=this.options).onSettled)==null?void 0:U.call(j,Y,null,e,this.state.context)),wt(this,gr,Ua).call(this,{type:"success",data:Y}),Y}catch(Y){try{throw await((q=($=J(this,Oi).config).onError)==null?void 0:q.call($,Y,e,this.state.context,this)),await((V=(B=this.options).onError)==null?void 0:V.call(B,Y,e,this.state.context)),await((ee=(z=J(this,Oi).config).onSettled)==null?void 0:ee.call(z,void 0,Y,this.state.variables,this.state.context,this)),await((ae=(X=this.options).onSettled)==null?void 0:ae.call(X,void 0,Y,e,this.state.context)),Y}finally{wt(this,gr,Ua).call(this,{type:"error",error:Y})}}finally{J(this,Oi).runNext(this)}}},hr=new WeakMap,Oi=new WeakMap,Zo=new WeakMap,gr=new WeakSet,Ua=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Zn.batch(()=>{J(this,hr).forEach(r=>{r.onMutationUpdate(e)}),J(this,Oi).notify({mutation:this,type:"updated",action:e})})},r3);function F3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $r,Fs,vf,a3,UI=(a3=class extends Ic{constructor(e={}){super();et(this,$r);et(this,Fs);et(this,vf);this.config=e,Ve(this,$r,new Set),Ve(this,Fs,new Map),Ve(this,vf,0)}build(e,n,r){const l=new PI({mutationCache:this,mutationId:++$d(this,vf)._,options:e.defaultMutationOptions(n),state:r});return this.add(l),l}add(e){J(this,$r).add(e);const n=Xd(e);if(typeof n=="string"){const r=J(this,Fs).get(n);r?r.push(e):J(this,Fs).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(J(this,$r).delete(e)){const n=Xd(e);if(typeof n=="string"){const r=J(this,Fs).get(n);if(r)if(r.length>1){const l=r.indexOf(e);l!==-1&&r.splice(l,1)}else r[0]===e&&J(this,Fs).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Xd(e);if(typeof n=="string"){const r=J(this,Fs).get(n),l=r==null?void 0:r.find(u=>u.state.status==="pending");return!l||l===e}else return!0}runNext(e){var r;const n=Xd(e);if(typeof n=="string"){const l=(r=J(this,Fs).get(n))==null?void 0:r.find(u=>u!==e&&u.state.isPaused);return(l==null?void 0:l.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Zn.batch(()=>{J(this,$r).forEach(e=>{this.notify({type:"removed",mutation:e})}),J(this,$r).clear(),J(this,Fs).clear()})}getAll(){return Array.from(J(this,$r))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>yb(n,r))}findAll(e={}){return this.getAll().filter(n=>yb(e,n))}notify(e){Zn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Zn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Mi))))}},$r=new WeakMap,Fs=new WeakMap,vf=new WeakMap,a3);function Xd(t){var e;return(e=t.options.scope)==null?void 0:e.id}function vb(t){return{onFetch:(e,n)=>{var E,A,N,I,M;const r=e.options,l=(N=(A=(E=e.fetchOptions)==null?void 0:E.meta)==null?void 0:A.fetchMore)==null?void 0:N.direction,u=((I=e.state.data)==null?void 0:I.pages)||[],h=((M=e.state.data)==null?void 0:M.pageParams)||[];let y={pages:[],pageParams:[]},b=0;const x=async()=>{let j=!1;const U=B=>{Object.defineProperty(B,"signal",{enumerable:!0,get:()=>(e.signal.aborted?j=!0:e.signal.addEventListener("abort",()=>{j=!0}),e.signal)})},$=D3(e.options,e.fetchOptions),q=async(B,V,z)=>{if(j)return Promise.reject();if(V==null&&B.pages.length)return Promise.resolve(B);const X=(()=>{const Te={client:e.client,queryKey:e.queryKey,pageParam:V,direction:z?"backward":"forward",meta:e.options.meta};return U(Te),Te})(),ae=await $(X),{maxPages:Y}=e.options,be=z?RI:NI;return{pages:be(B.pages,ae,Y),pageParams:be(B.pageParams,V,Y)}};if(l&&u.length){const B=l==="backward",V=B?FI:Eb,z={pages:u,pageParams:h},ee=V(r,z);y=await q(z,ee,B)}else{const B=t??u.length;do{const V=b===0?h[0]??r.initialPageParam:Eb(r,y);if(b>0&&V==null)break;y=await q(y,V),b++}while(b<B)}return y};e.options.persister?e.fetchFn=()=>{var j,U;return(U=(j=e.options).persister)==null?void 0:U.call(j,x,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=x}}}function Eb(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function FI(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var An,Ya,Xa,yc,bc,Wa,wc,vc,o3,VI=(o3=class{constructor(t={}){et(this,An);et(this,Ya);et(this,Xa);et(this,yc);et(this,bc);et(this,Wa);et(this,wc);et(this,vc);Ve(this,An,t.queryCache||new BI),Ve(this,Ya,t.mutationCache||new UI),Ve(this,Xa,t.defaultOptions||{}),Ve(this,yc,new Map),Ve(this,bc,new Map),Ve(this,Wa,0)}mount(){$d(this,Wa)._++,J(this,Wa)===1&&(Ve(this,wc,Gm.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,An).onFocus())})),Ve(this,vc,vh.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,An).onOnline())})))}unmount(){var t,e;$d(this,Wa)._--,J(this,Wa)===0&&((t=J(this,wc))==null||t.call(this),Ve(this,wc,void 0),(e=J(this,vc))==null||e.call(this),Ve(this,vc,void 0))}isFetching(t){return J(this,An).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return J(this,Ya).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,An).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=J(this,An).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(io(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return J(this,An).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),l=J(this,An).get(r.queryHash),u=l==null?void 0:l.state.data,h=TI(e,u);if(h!==void 0)return J(this,An).build(this,r).setData(h,{...n,manual:!0})}setQueriesData(t,e,n){return Zn.batch(()=>J(this,An).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,An).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=J(this,An);Zn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=J(this,An);return Zn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Zn.batch(()=>J(this,An).findAll(t).map(l=>l.cancel(n)));return Promise.all(r).then(Mi).catch(Mi)}invalidateQueries(t,e={}){return Zn.batch(()=>(J(this,An).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Zn.batch(()=>J(this,An).findAll(t).filter(l=>!l.isDisabled()&&!l.isStatic()).map(l=>{let u=l.fetch(void 0,n);return n.throwOnError||(u=u.catch(Mi)),l.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(r).then(Mi)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=J(this,An).build(this,e);return n.isStaleByTime(io(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Mi).catch(Mi)}fetchInfiniteQuery(t){return t.behavior=vb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Mi).catch(Mi)}ensureInfiniteQueryData(t){return t.behavior=vb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return vh.isOnline()?J(this,Ya).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,An)}getMutationCache(){return J(this,Ya)}getDefaultOptions(){return J(this,Xa)}setDefaultOptions(t){Ve(this,Xa,t)}setQueryDefaults(t,e){J(this,yc).set(al(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...J(this,yc).values()],n={};return e.forEach(r=>{ff(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){J(this,bc).set(al(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...J(this,bc).values()],n={};return e.forEach(r=>{ff(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...J(this,Xa).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Hm(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===$m&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...J(this,Xa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){J(this,An).clear(),J(this,Ya).clear()}},An=new WeakMap,Ya=new WeakMap,Xa=new WeakMap,yc=new WeakMap,bc=new WeakMap,Wa=new WeakMap,wc=new WeakMap,vc=new WeakMap,o3),$i,kt,Ef,Ii,Qo,Ec,Ka,Za,Sf,Sc,Cc,Jo,el,Qa,Ac,Gt,Uu,zg,Hg,$g,Gg,qg,Yg,Xg,V3,l3,zI=(l3=class extends Ic{constructor(e,n){super();et(this,Gt);et(this,$i);et(this,kt);et(this,Ef);et(this,Ii);et(this,Qo);et(this,Ec);et(this,Ka);et(this,Za);et(this,Sf);et(this,Sc);et(this,Cc);et(this,Jo);et(this,el);et(this,Qa);et(this,Ac,new Set);this.options=n,Ve(this,$i,e),Ve(this,Za,null),Ve(this,Ka,Vg()),this.options.experimental_prefetchInRender||J(this,Ka).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(J(this,kt).addObserver(this),Sb(J(this,kt),this.options)?wt(this,Gt,Uu).call(this):this.updateResult(),wt(this,Gt,Gg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Wg(J(this,kt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Wg(J(this,kt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,wt(this,Gt,qg).call(this),wt(this,Gt,Yg).call(this),J(this,kt).removeObserver(this)}setOptions(e){const n=this.options,r=J(this,kt);if(this.options=J(this,$i).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Hs(this.options.enabled,J(this,kt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");wt(this,Gt,Xg).call(this),J(this,kt).setOptions(this.options),n._defaulted&&!wh(this.options,n)&&J(this,$i).getQueryCache().notify({type:"observerOptionsUpdated",query:J(this,kt),observer:this});const l=this.hasListeners();l&&Cb(J(this,kt),r,this.options,n)&&wt(this,Gt,Uu).call(this),this.updateResult(),l&&(J(this,kt)!==r||Hs(this.options.enabled,J(this,kt))!==Hs(n.enabled,J(this,kt))||io(this.options.staleTime,J(this,kt))!==io(n.staleTime,J(this,kt)))&&wt(this,Gt,zg).call(this);const u=wt(this,Gt,Hg).call(this);l&&(J(this,kt)!==r||Hs(this.options.enabled,J(this,kt))!==Hs(n.enabled,J(this,kt))||u!==J(this,Qa))&&wt(this,Gt,$g).call(this,u)}getOptimisticResult(e){const n=J(this,$i).getQueryCache().build(J(this,$i),e),r=this.createResult(n,e);return $I(this,r)&&(Ve(this,Ii,r),Ve(this,Ec,this.options),Ve(this,Qo,J(this,kt).state)),r}getCurrentResult(){return J(this,Ii)}trackResult(e,n){return new Proxy(e,{get:(r,l)=>(this.trackProp(l),n==null||n(l),Reflect.get(r,l))})}trackProp(e){J(this,Ac).add(e)}getCurrentQuery(){return J(this,kt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=J(this,$i).defaultQueryOptions(e),r=J(this,$i).getQueryCache().build(J(this,$i),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return wt(this,Gt,Uu).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),J(this,Ii)))}createResult(e,n){var Y;const r=J(this,kt),l=this.options,u=J(this,Ii),h=J(this,Qo),y=J(this,Ec),x=e!==r?e.state:J(this,Ef),{state:E}=e;let A={...E},N=!1,I;if(n._optimisticResults){const be=this.hasListeners(),Te=!be&&Sb(e,n),ve=be&&Cb(e,r,n,l);(Te||ve)&&(A={...A,...U3(E.data,e.options)}),n._optimisticResults==="isRestoring"&&(A.fetchStatus="idle")}let{error:M,errorUpdatedAt:j,status:U}=A;I=A.data;let $=!1;if(n.placeholderData!==void 0&&I===void 0&&U==="pending"){let be;u!=null&&u.isPlaceholderData&&n.placeholderData===(y==null?void 0:y.placeholderData)?(be=u.data,$=!0):be=typeof n.placeholderData=="function"?n.placeholderData((Y=J(this,Cc))==null?void 0:Y.state.data,J(this,Cc)):n.placeholderData,be!==void 0&&(U="success",I=Fg(u==null?void 0:u.data,be,n),N=!0)}if(n.select&&I!==void 0&&!$)if(u&&I===(h==null?void 0:h.data)&&n.select===J(this,Sf))I=J(this,Sc);else try{Ve(this,Sf,n.select),I=n.select(I),I=Fg(u==null?void 0:u.data,I,n),Ve(this,Sc,I),Ve(this,Za,null)}catch(be){Ve(this,Za,be)}J(this,Za)&&(M=J(this,Za),I=J(this,Sc),j=Date.now(),U="error");const q=A.fetchStatus==="fetching",B=U==="pending",V=U==="error",z=B&&q,ee=I!==void 0,ae={status:U,fetchStatus:A.fetchStatus,isPending:B,isSuccess:U==="success",isError:V,isInitialLoading:z,isLoading:z,data:I,dataUpdatedAt:A.dataUpdatedAt,error:M,errorUpdatedAt:j,failureCount:A.fetchFailureCount,failureReason:A.fetchFailureReason,errorUpdateCount:A.errorUpdateCount,isFetched:A.dataUpdateCount>0||A.errorUpdateCount>0,isFetchedAfterMount:A.dataUpdateCount>x.dataUpdateCount||A.errorUpdateCount>x.errorUpdateCount,isFetching:q,isRefetching:q&&!B,isLoadingError:V&&!ee,isPaused:A.fetchStatus==="paused",isPlaceholderData:N,isRefetchError:V&&ee,isStale:qm(e,n),refetch:this.refetch,promise:J(this,Ka)};if(this.options.experimental_prefetchInRender){const be=le=>{ae.status==="error"?le.reject(ae.error):ae.data!==void 0&&le.resolve(ae.data)},Te=()=>{const le=Ve(this,Ka,ae.promise=Vg());be(le)},ve=J(this,Ka);switch(ve.status){case"pending":e.queryHash===r.queryHash&&be(ve);break;case"fulfilled":(ae.status==="error"||ae.data!==ve.value)&&Te();break;case"rejected":(ae.status!=="error"||ae.error!==ve.reason)&&Te();break}}return ae}updateResult(){const e=J(this,Ii),n=this.createResult(J(this,kt),this.options);if(Ve(this,Qo,J(this,kt).state),Ve(this,Ec,this.options),J(this,Qo).data!==void 0&&Ve(this,Cc,J(this,kt)),wh(n,e))return;Ve(this,Ii,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:l}=this.options,u=typeof l=="function"?l():l;if(u==="all"||!u&&!J(this,Ac).size)return!0;const h=new Set(u??J(this,Ac));return this.options.throwOnError&&h.add("error"),Object.keys(J(this,Ii)).some(y=>{const b=y;return J(this,Ii)[b]!==e[b]&&h.has(b)})};wt(this,Gt,V3).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&wt(this,Gt,Gg).call(this)}},$i=new WeakMap,kt=new WeakMap,Ef=new WeakMap,Ii=new WeakMap,Qo=new WeakMap,Ec=new WeakMap,Ka=new WeakMap,Za=new WeakMap,Sf=new WeakMap,Sc=new WeakMap,Cc=new WeakMap,Jo=new WeakMap,el=new WeakMap,Qa=new WeakMap,Ac=new WeakMap,Gt=new WeakSet,Uu=function(e){wt(this,Gt,Xg).call(this);let n=J(this,kt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Mi)),n},zg=function(){wt(this,Gt,qg).call(this);const e=io(this.options.staleTime,J(this,kt));if(rl||J(this,Ii).isStale||!Pg(e))return;const r=I3(J(this,Ii).dataUpdatedAt,e)+1;Ve(this,Jo,setTimeout(()=>{J(this,Ii).isStale||this.updateResult()},r))},Hg=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(J(this,kt)):this.options.refetchInterval)??!1},$g=function(e){wt(this,Gt,Yg).call(this),Ve(this,Qa,e),!(rl||Hs(this.options.enabled,J(this,kt))===!1||!Pg(J(this,Qa))||J(this,Qa)===0)&&Ve(this,el,setInterval(()=>{(this.options.refetchIntervalInBackground||Gm.isFocused())&&wt(this,Gt,Uu).call(this)},J(this,Qa)))},Gg=function(){wt(this,Gt,zg).call(this),wt(this,Gt,$g).call(this,wt(this,Gt,Hg).call(this))},qg=function(){J(this,Jo)&&(clearTimeout(J(this,Jo)),Ve(this,Jo,void 0))},Yg=function(){J(this,el)&&(clearInterval(J(this,el)),Ve(this,el,void 0))},Xg=function(){const e=J(this,$i).getQueryCache().build(J(this,$i),this.options);if(e===J(this,kt))return;const n=J(this,kt);Ve(this,kt,e),Ve(this,Ef,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},V3=function(e){Zn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(J(this,Ii))}),J(this,$i).getQueryCache().notify({query:J(this,kt),type:"observerResultsUpdated"})})},l3);function HI(t,e){return Hs(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Sb(t,e){return HI(t,e)||t.state.data!==void 0&&Wg(t,e,e.refetchOnMount)}function Wg(t,e,n){if(Hs(e.enabled,t)!==!1&&io(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&qm(t,e)}return!1}function Cb(t,e,n,r){return(t!==e||Hs(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&qm(t,n)}function qm(t,e){return Hs(e.enabled,t)!==!1&&t.isStaleByTime(io(e.staleTime,t))}function $I(t,e){return!wh(t.getCurrentResult(),e)}var Ja,eo,Gi,Gr,Kr,uh,Kg,c3,GI=(c3=class extends Ic{constructor(n,r){super();et(this,Kr);et(this,Ja);et(this,eo);et(this,Gi);et(this,Gr);Ve(this,Ja,n),this.setOptions(r),this.bindMethods(),wt(this,Kr,uh).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var l;const r=this.options;this.options=J(this,Ja).defaultMutationOptions(n),wh(this.options,r)||J(this,Ja).getMutationCache().notify({type:"observerOptionsUpdated",mutation:J(this,Gi),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&al(r.mutationKey)!==al(this.options.mutationKey)?this.reset():((l=J(this,Gi))==null?void 0:l.state.status)==="pending"&&J(this,Gi).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=J(this,Gi))==null||n.removeObserver(this)}onMutationUpdate(n){wt(this,Kr,uh).call(this),wt(this,Kr,Kg).call(this,n)}getCurrentResult(){return J(this,eo)}reset(){var n;(n=J(this,Gi))==null||n.removeObserver(this),Ve(this,Gi,void 0),wt(this,Kr,uh).call(this),wt(this,Kr,Kg).call(this)}mutate(n,r){var l;return Ve(this,Gr,r),(l=J(this,Gi))==null||l.removeObserver(this),Ve(this,Gi,J(this,Ja).getMutationCache().build(J(this,Ja),this.options)),J(this,Gi).addObserver(this),J(this,Gi).execute(n)}},Ja=new WeakMap,eo=new WeakMap,Gi=new WeakMap,Gr=new WeakMap,Kr=new WeakSet,uh=function(){var r;const n=((r=J(this,Gi))==null?void 0:r.state)??F3();Ve(this,eo,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Kg=function(n){Zn.batch(()=>{var r,l,u,h,y,b,x,E;if(J(this,Gr)&&this.hasListeners()){const A=J(this,eo).variables,N=J(this,eo).context;(n==null?void 0:n.type)==="success"?((l=(r=J(this,Gr)).onSuccess)==null||l.call(r,n.data,A,N),(h=(u=J(this,Gr)).onSettled)==null||h.call(u,n.data,null,A,N)):(n==null?void 0:n.type)==="error"&&((b=(y=J(this,Gr)).onError)==null||b.call(y,n.error,A,N),(E=(x=J(this,Gr)).onSettled)==null||E.call(x,void 0,n.error,A,N))}this.listeners.forEach(A=>{A(J(this,eo))})})},c3),z3=R.createContext(void 0),Mc=t=>{const e=R.useContext(z3);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},qI=({client:t,children:e})=>(R.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),C.jsx(z3.Provider,{value:t,children:e})),H3=R.createContext(!1),YI=()=>R.useContext(H3);H3.Provider;function XI(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var WI=R.createContext(XI()),KI=()=>R.useContext(WI),ZI=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},QI=t=>{R.useEffect(()=>{t.clearReset()},[t])},JI=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:l})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(l&&t.data===void 0||L3(n,[t.error,r])),eM=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},tM=(t,e)=>t.isLoading&&t.isFetching&&!e,nM=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Ab=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function iM(t,e,n){var A,N,I,M,j;const r=YI(),l=KI(),u=Mc(),h=u.defaultQueryOptions(t);(N=(A=u.getDefaultOptions().queries)==null?void 0:A._experimental_beforeQuery)==null||N.call(A,h),h._optimisticResults=r?"isRestoring":"optimistic",eM(h),ZI(h,l),QI(l);const y=!u.getQueryCache().get(h.queryHash),[b]=R.useState(()=>new e(u,h)),x=b.getOptimisticResult(h),E=!r&&t.subscribed!==!1;if(R.useSyncExternalStore(R.useCallback(U=>{const $=E?b.subscribe(Zn.batchCalls(U)):Mi;return b.updateResult(),$},[b,E]),()=>b.getCurrentResult(),()=>b.getCurrentResult()),R.useEffect(()=>{b.setOptions(h)},[h,b]),nM(h,x))throw Ab(h,b,l);if(JI({result:x,errorResetBoundary:l,throwOnError:h.throwOnError,query:u.getQueryCache().get(h.queryHash),suspense:h.suspense}))throw x.error;if((M=(I=u.getDefaultOptions().queries)==null?void 0:I._experimental_afterQuery)==null||M.call(I,h,x),h.experimental_prefetchInRender&&!rl&&tM(x,r)){const U=y?Ab(h,b,l):(j=u.getQueryCache().get(h.queryHash))==null?void 0:j.promise;U==null||U.catch(Mi).finally(()=>{b.updateResult()})}return h.notifyOnChangeProps?x:b.trackResult(x)}function hi(t,e){return iM(t,zI)}function Tb(t,e){const n=Mc(),[r]=R.useState(()=>new GI(n,t));R.useEffect(()=>{r.setOptions(t)},[r,t]);const l=R.useSyncExternalStore(R.useCallback(h=>r.subscribe(Zn.batchCalls(h)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),u=R.useCallback((h,y)=>{r.mutate(h,y).catch(Mi)},[r]);if(l.error&&L3(r.options.throwOnError,[l.error]))throw l.error;return{...l,mutate:u,mutateAsync:l.mutate}}const sM="modulepreload",rM=function(t){return"/sms/"+t},_b={},Tf=function(e,n,r){let l=Promise.resolve();if(n&&n.length>0){let h=function(x){return Promise.all(x.map(E=>Promise.resolve(E).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const y=document.querySelector("meta[property=csp-nonce]"),b=(y==null?void 0:y.nonce)||(y==null?void 0:y.getAttribute("nonce"));l=h(n.map(x=>{if(x=rM(x),x in _b)return;_b[x]=!0;const E=x.endsWith(".css"),A=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${A}`))return;const N=document.createElement("link");if(N.rel=E?"stylesheet":sM,E||(N.as="script"),N.crossOrigin="",N.href=x,b&&N.setAttribute("nonce",b),document.head.appendChild(N),E)return new Promise((I,M)=>{N.addEventListener("load",I),N.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${x}`)))})}))}function u(h){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=h,window.dispatchEvent(y),!y.defaultPrevented)throw h}return l.then(h=>{for(const y of h||[])y.status==="rejected"&&u(y.reason);return e().catch(u)})},aM=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Tf(async()=>{const{default:r}=await Promise.resolve().then(()=>Dc);return{default:r}},[]).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Ym extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class oM extends Ym{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Nb extends Ym{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Rb extends Ym{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Zg||(Zg={}));var lM=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(E){try{x(r.next(E))}catch(A){h(A)}}function b(E){try{x(r.throw(E))}catch(A){h(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};class cM{constructor(e,{headers:n={},customFetch:r,region:l=Zg.Any}={}){this.url=e,this.headers=n,this.region=l,this.fetch=aM(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return lM(this,void 0,void 0,function*(){try{const{headers:l,method:u,body:h}=n;let y={},{region:b}=n;b||(b=this.region);const x=new URL(`${this.url}/${e}`);b&&b!=="any"&&(y["x-region"]=b,x.searchParams.set("forceFunctionRegion",b));let E;h&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",E=h):typeof h=="string"?(y["Content-Type"]="text/plain",E=h):typeof FormData<"u"&&h instanceof FormData?E=h:(y["Content-Type"]="application/json",E=JSON.stringify(h)));const A=yield this.fetch(x.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),l),body:E}).catch(j=>{throw new oM(j)}),N=A.headers.get("x-relay-error");if(N&&N==="true")throw new Nb(A);if(!A.ok)throw new Rb(A);let I=((r=A.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),M;return I==="application/json"?M=yield A.json():I==="application/octet-stream"?M=yield A.blob():I==="text/event-stream"?M=A:I==="multipart/form-data"?M=yield A.formData():M=yield A.text(),{data:M,error:null,response:A}}catch(l){return{data:null,error:l,response:l instanceof Rb||l instanceof Nb?l.context:void 0}}})}}var ri={},Zl={},Ql={},Jl={},ec={},tc={},uM=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Tc=uM();const fM=Tc.fetch,$3=Tc.fetch.bind(Tc),G3=Tc.Headers,dM=Tc.Request,hM=Tc.Response,Dc=Object.freeze(Object.defineProperty({__proto__:null,Headers:G3,Request:dM,Response:hM,default:$3,fetch:fM},Symbol.toStringTag,{value:"Module"})),gM=GA(Dc);var Wd={},Ob;function q3(){if(Ob)return Wd;Ob=1,Object.defineProperty(Wd,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Wd.default=t,Wd}var Ib;function Y3(){if(Ib)return tc;Ib=1;var t=tc&&tc.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(tc,"__esModule",{value:!0});const e=t(gM),n=t(q3());class r{constructor(u){this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=u.headers,this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=u.shouldThrowOnError,this.signal=u.signal,this.isMaybeSingle=u.isMaybeSingle,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,h){return this.headers=Object.assign({},this.headers),this.headers[u]=h,this}then(u,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const y=this.fetch;let b=y(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async x=>{var E,A,N;let I=null,M=null,j=null,U=x.status,$=x.statusText;if(x.ok){if(this.method!=="HEAD"){const z=await x.text();z===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?M=z:M=JSON.parse(z))}const B=(E=this.headers.Prefer)===null||E===void 0?void 0:E.match(/count=(exact|planned|estimated)/),V=(A=x.headers.get("content-range"))===null||A===void 0?void 0:A.split("/");B&&V&&V.length>1&&(j=parseInt(V[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(M)&&(M.length>1?(I={code:"PGRST116",details:`Results contain ${M.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},M=null,j=null,U=406,$="Not Acceptable"):M.length===1?M=M[0]:M=null)}else{const B=await x.text();try{I=JSON.parse(B),Array.isArray(I)&&x.status===404&&(M=[],I=null,U=200,$="OK")}catch{x.status===404&&B===""?(U=204,$="No Content"):I={message:B}}if(I&&this.isMaybeSingle&&(!((N=I==null?void 0:I.details)===null||N===void 0)&&N.includes("0 rows"))&&(I=null,U=200,$="OK"),I&&this.shouldThrowOnError)throw new n.default(I)}return{error:I,data:M,count:j,status:U,statusText:$}});return this.shouldThrowOnError||(b=b.catch(x=>{var E,A,N;return{error:{message:`${(E=x==null?void 0:x.name)!==null&&E!==void 0?E:"FetchError"}: ${x==null?void 0:x.message}`,details:`${(A=x==null?void 0:x.stack)!==null&&A!==void 0?A:""}`,hint:"",code:`${(N=x==null?void 0:x.code)!==null&&N!==void 0?N:""}`},data:null,count:null,status:0,statusText:""}})),b.then(u,h)}returns(){return this}overrideTypes(){return this}}return tc.default=r,tc}var Mb;function X3(){if(Mb)return ec;Mb=1;var t=ec&&ec.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ec,"__esModule",{value:!0});const e=t(Y3());class n extends e.default{select(l){let u=!1;const h=(l??"*").split("").map(y=>/\s/.test(y)&&!u?"":(y==='"'&&(u=!u),y)).join("");return this.url.searchParams.set("select",h),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(l,{ascending:u=!0,nullsFirst:h,foreignTable:y,referencedTable:b=y}={}){const x=b?`${b}.order`:"order",E=this.url.searchParams.get(x);return this.url.searchParams.set(x,`${E?`${E},`:""}${l}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:u,referencedTable:h=u}={}){const y=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(y,`${l}`),this}range(l,u,{foreignTable:h,referencedTable:y=h}={}){const b=typeof y>"u"?"offset":`${y}.offset`,x=typeof y>"u"?"limit":`${y}.limit`;return this.url.searchParams.set(b,`${l}`),this.url.searchParams.set(x,`${u-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:l=!1,verbose:u=!1,settings:h=!1,buffers:y=!1,wal:b=!1,format:x="text"}={}){var E;const A=[l?"analyze":null,u?"verbose":null,h?"settings":null,y?"buffers":null,b?"wal":null].filter(Boolean).join("|"),N=(E=this.headers.Accept)!==null&&E!==void 0?E:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${x}; for="${N}"; options=${A};`,x==="json"?this:this}rollback(){var l;return((l=this.headers.Prefer)!==null&&l!==void 0?l:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return ec.default=n,ec}var Db;function Xm(){if(Db)return Jl;Db=1;var t=Jl&&Jl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jl,"__esModule",{value:!0});const e=t(X3());class n extends e.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}in(l,u){const h=Array.from(new Set(u)).map(y=>typeof y=="string"&&new RegExp("[,()]").test(y)?`"${y}"`:`${y}`).join(",");return this.url.searchParams.append(l,`in.(${h})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:h,type:y}={}){let b="";y==="plain"?b="pl":y==="phrase"?b="ph":y==="websearch"&&(b="w");const x=h===void 0?"":`(${h})`;return this.url.searchParams.append(l,`${b}fts${x}.${u}`),this}match(l){return Object.entries(l).forEach(([u,h])=>{this.url.searchParams.append(u,`eq.${h}`)}),this}not(l,u,h){return this.url.searchParams.append(l,`not.${u}.${h}`),this}or(l,{foreignTable:u,referencedTable:h=u}={}){const y=h?`${h}.or`:"or";return this.url.searchParams.append(y,`(${l})`),this}filter(l,u,h){return this.url.searchParams.append(l,`${u}.${h}`),this}}return Jl.default=n,Jl}var Lb;function W3(){if(Lb)return Ql;Lb=1;var t=Ql&&Ql.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ql,"__esModule",{value:!0});const e=t(Xm());class n{constructor(l,{headers:u={},schema:h,fetch:y}){this.url=l,this.headers=u,this.schema=h,this.fetch=y}select(l,{head:u=!1,count:h}={}){const y=u?"HEAD":"GET";let b=!1;const x=(l??"*").split("").map(E=>/\s/.test(E)&&!b?"":(E==='"'&&(b=!b),E)).join("");return this.url.searchParams.set("select",x),h&&(this.headers.Prefer=`count=${h}`),new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(l,{count:u,defaultToNull:h=!0}={}){const y="POST",b=[];if(this.headers.Prefer&&b.push(this.headers.Prefer),u&&b.push(`count=${u}`),h||b.push("missing=default"),this.headers.Prefer=b.join(","),Array.isArray(l)){const x=l.reduce((E,A)=>E.concat(Object.keys(A)),[]);if(x.length>0){const E=[...new Set(x)].map(A=>`"${A}"`);this.url.searchParams.set("columns",E.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}upsert(l,{onConflict:u,ignoreDuplicates:h=!1,count:y,defaultToNull:b=!0}={}){const x="POST",E=[`resolution=${h?"ignore":"merge"}-duplicates`];if(u!==void 0&&this.url.searchParams.set("on_conflict",u),this.headers.Prefer&&E.push(this.headers.Prefer),y&&E.push(`count=${y}`),b||E.push("missing=default"),this.headers.Prefer=E.join(","),Array.isArray(l)){const A=l.reduce((N,I)=>N.concat(Object.keys(I)),[]);if(A.length>0){const N=[...new Set(A)].map(I=>`"${I}"`);this.url.searchParams.set("columns",N.join(","))}}return new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}update(l,{count:u}={}){const h="PATCH",y=[];return this.headers.Prefer&&y.push(this.headers.Prefer),u&&y.push(`count=${u}`),this.headers.Prefer=y.join(","),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}delete({count:l}={}){const u="DELETE",h=[];return l&&h.push(`count=${l}`),this.headers.Prefer&&h.unshift(this.headers.Prefer),this.headers.Prefer=h.join(","),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Ql.default=n,Ql}var ku={},ju={},kb;function mM(){return kb||(kb=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.version=void 0,ju.version="0.0.0-automated"),ju}var jb;function pM(){if(jb)return ku;jb=1,Object.defineProperty(ku,"__esModule",{value:!0}),ku.DEFAULT_HEADERS=void 0;const t=mM();return ku.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},ku}var Bb;function xM(){if(Bb)return Zl;Bb=1;var t=Zl&&Zl.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Zl,"__esModule",{value:!0});const e=t(W3()),n=t(Xm()),r=pM();class l{constructor(h,{headers:y={},schema:b,fetch:x}={}){this.url=h,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),y),this.schemaName=b,this.fetch=x}from(h){const y=new URL(`${this.url}/${h}`);return new e.default(y,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(h){return new l(this.url,{headers:this.headers,schema:h,fetch:this.fetch})}rpc(h,y={},{head:b=!1,get:x=!1,count:E}={}){let A;const N=new URL(`${this.url}/rpc/${h}`);let I;b||x?(A=b?"HEAD":"GET",Object.entries(y).filter(([j,U])=>U!==void 0).map(([j,U])=>[j,Array.isArray(U)?`{${U.join(",")}}`:`${U}`]).forEach(([j,U])=>{N.searchParams.append(j,U)})):(A="POST",I=y);const M=Object.assign({},this.headers);return E&&(M.Prefer=`count=${E}`),new n.default({method:A,url:N,headers:M,schema:this.schemaName,body:I,fetch:this.fetch,allowEmpty:!1})}}return Zl.default=l,Zl}var Pb;function yM(){if(Pb)return ri;Pb=1;var t=ri&&ri.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(ri,"__esModule",{value:!0}),ri.PostgrestError=ri.PostgrestBuilder=ri.PostgrestTransformBuilder=ri.PostgrestFilterBuilder=ri.PostgrestQueryBuilder=ri.PostgrestClient=void 0;const e=t(xM());ri.PostgrestClient=e.default;const n=t(W3());ri.PostgrestQueryBuilder=n.default;const r=t(Xm());ri.PostgrestFilterBuilder=r.default;const l=t(X3());ri.PostgrestTransformBuilder=l.default;const u=t(Y3());ri.PostgrestBuilder=u.default;const h=t(q3());return ri.PostgrestError=h.default,ri.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:u.default,PostgrestError:h.default},ri}var bM=yM();const wM=km(bM),{PostgrestClient:vM,PostgrestQueryBuilder:Uz,PostgrestFilterBuilder:Fz,PostgrestTransformBuilder:Vz,PostgrestBuilder:zz,PostgrestError:Hz}=wM;function EM(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const SM=EM(),CM="2.11.15",AM=`realtime-js/${CM}`,TM="1.0.0",K3=1e4,_M=1e3;var Ku;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ku||(Ku={}));var Si;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Si||(Si={}));var Vs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vs||(Vs={}));var Qg;(function(t){t.websocket="websocket"})(Qg||(Qg={}));var Vo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Vo||(Vo={}));class NM{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const l=n.getUint8(1),u=n.getUint8(2);let h=this.HEADER_LENGTH+2;const y=r.decode(e.slice(h,h+l));h=h+l;const b=r.decode(e.slice(h,h+u));h=h+u;const x=JSON.parse(r.decode(e.slice(h,e.byteLength)));return{ref:null,topic:y,event:b,payload:x}}}class Z3{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var on;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(on||(on={}));const Ub=(t,e,n={})=>{var r;const l=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((u,h)=>(u[h]=RM(h,t,e,l),u),{})},RM=(t,e,n,r)=>{const l=e.find(y=>y.name===t),u=l==null?void 0:l.type,h=n[t];return u&&!r.includes(u)?Q3(u,h):Jg(h)},Q3=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return DM(e,n)}switch(t){case on.bool:return OM(e);case on.float4:case on.float8:case on.int2:case on.int4:case on.int8:case on.numeric:case on.oid:return IM(e);case on.json:case on.jsonb:return MM(e);case on.timestamp:return LM(e);case on.abstime:case on.date:case on.daterange:case on.int4range:case on.int8range:case on.money:case on.reltime:case on.text:case on.time:case on.timestamptz:case on.timetz:case on.tsrange:case on.tstzrange:return Jg(e);default:return Jg(e)}},Jg=t=>t,OM=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},IM=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},MM=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},DM=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let u;const h=t.slice(1,n);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(y=>Q3(e,y))}return t},LM=t=>typeof t=="string"?t.replace(" ","T"):t,J3=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class rg{constructor(e,n,r={},l=K3){this.channel=e,this.event=n,this.payload=r,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Fb;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Fb||(Fb={}));class Zu{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},l=>{const{onJoin:u,onLeave:h,onSync:y}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zu.syncState(this.state,l,u,h),this.pendingDiffs.forEach(b=>{this.state=Zu.syncDiff(this.state,b,u,h)}),this.pendingDiffs=[],y()}),this.channel._on(r.diff,{},l=>{const{onJoin:u,onLeave:h,onSync:y}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Zu.syncDiff(this.state,l,u,h),y())}),this.onJoin((l,u,h)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:h})}),this.onLeave((l,u,h)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,l){const u=this.cloneDeep(e),h=this.transformState(n),y={},b={};return this.map(u,(x,E)=>{h[x]||(b[x]=E)}),this.map(h,(x,E)=>{const A=u[x];if(A){const N=E.map(U=>U.presence_ref),I=A.map(U=>U.presence_ref),M=E.filter(U=>I.indexOf(U.presence_ref)<0),j=A.filter(U=>N.indexOf(U.presence_ref)<0);M.length>0&&(y[x]=M),j.length>0&&(b[x]=j)}else y[x]=E}),this.syncDiff(u,{joins:y,leaves:b},r,l)}static syncDiff(e,n,r,l){const{joins:u,leaves:h}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),l||(l=()=>{}),this.map(u,(y,b)=>{var x;const E=(x=e[y])!==null&&x!==void 0?x:[];if(e[y]=this.cloneDeep(b),E.length>0){const A=e[y].map(I=>I.presence_ref),N=E.filter(I=>A.indexOf(I.presence_ref)<0);e[y].unshift(...N)}r(y,E,b)}),this.map(h,(y,b)=>{let x=e[y];if(!x)return;const E=b.map(A=>A.presence_ref);x=x.filter(A=>E.indexOf(A.presence_ref)<0),e[y]=x,l(y,x,b),x.length===0&&delete e[y]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const l=e[r];return"metas"in l?n[r]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[r]=l,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Vb;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Vb||(Vb={}));var zb;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(zb||(zb={}));var Hr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Hr||(Hr={}));class Wm{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Si.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new rg(this,Vs.join,this.params,this.timeout),this.rejoinTimer=new Z3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Si.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Si.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Si.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Si.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vs.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Zu(this),this.broadcastEndpointURL=J3(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Si.closed){const{config:{broadcast:u,presence:h,private:y}}=this.params;this._onError(E=>e==null?void 0:e(Hr.CHANNEL_ERROR,E)),this._onClose(()=>e==null?void 0:e(Hr.CLOSED));const b={},x={broadcast:u,presence:h,postgres_changes:(l=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(E=>E.filter))!==null&&l!==void 0?l:[],private:y};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:x},b)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:E})=>{var A;if(this.socket.setAuth(),E===void 0){e==null||e(Hr.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,I=(A=N==null?void 0:N.length)!==null&&A!==void 0?A:0,M=[];for(let j=0;j<I;j++){const U=N[j],{filter:{event:$,schema:q,table:B,filter:V}}=U,z=E&&E[j];if(z&&z.event===$&&z.schema===q&&z.table===B&&z.filter===V)M.push(Object.assign(Object.assign({},U),{id:z.id}));else{this.unsubscribe(),this.state=Si.errored,e==null||e(Hr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,e&&e(Hr.SUBSCRIBED);return}}).receive("error",E=>{this.state=Si.errored,e==null||e(Hr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Hr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,l;if(!this._canPush()&&e.type==="broadcast"){const{event:u,payload:h}=e,b={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((l=x.body)===null||l===void 0?void 0:l.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,y,b;const x=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((b=(y=(h=this.params)===null||h===void 0?void 0:h.config)===null||y===void 0?void 0:y.broadcast)===null||b===void 0)&&b.ack)&&u("ok"),x.receive("ok",()=>u("ok")),x.receive("error",()=>u("error")),x.receive("timeout",()=>u("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Si.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(l=>{r=new rg(this,Vs.leave,{},e),r.receive("ok",()=>{n(),l("ok")}).receive("timeout",()=>{n(),l("timed out")}).receive("error",()=>{l("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const l=new AbortController,u=setTimeout(()=>l.abort(),r),h=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:l.signal}));return clearTimeout(u),h}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new rg(this,e,n,r);return this._canPush()?l.send():(l.startTimeout(),this.pushBuffer.push(l)),l}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var l,u;const h=e.toLocaleLowerCase(),{close:y,error:b,leave:x,join:E}=Vs;if(r&&[y,b,x,E].indexOf(h)>=0&&r!==this._joinRef())return;let N=this._onMessage(h,n,r);if(n&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(I=>{var M,j,U;return((M=I.filter)===null||M===void 0?void 0:M.event)==="*"||((U=(j=I.filter)===null||j===void 0?void 0:j.event)===null||U===void 0?void 0:U.toLocaleLowerCase())===h}).map(I=>I.callback(N,r)):(u=this.bindings[h])===null||u===void 0||u.filter(I=>{var M,j,U,$,q,B;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in I){const V=I.id,z=(M=I.filter)===null||M===void 0?void 0:M.event;return V&&((j=n.ids)===null||j===void 0?void 0:j.includes(V))&&(z==="*"||(z==null?void 0:z.toLocaleLowerCase())===((U=n.data)===null||U===void 0?void 0:U.type.toLocaleLowerCase()))}else{const V=(q=($=I==null?void 0:I.filter)===null||$===void 0?void 0:$.event)===null||q===void 0?void 0:q.toLocaleLowerCase();return V==="*"||V===((B=n==null?void 0:n.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return I.type.toLocaleLowerCase()===h}).map(I=>{if(typeof N=="object"&&"ids"in N){const M=N.data,{schema:j,table:U,commit_timestamp:$,type:q,errors:B}=M;N=Object.assign(Object.assign({},{schema:j,table:U,commit_timestamp:$,eventType:q,new:{},old:{},errors:B}),this._getPayloadRecords(M))}I.callback(N,r)})}_isClosed(){return this.state===Si.closed}_isJoined(){return this.state===Si.joined}_isJoining(){return this.state===Si.joining}_isLeaving(){return this.state===Si.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const l=e.toLocaleLowerCase(),u={type:l,filter:n,callback:r};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===r&&Wm.isEqual(l.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vs.close,{},e)}_onError(e){this._on(Vs.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Si.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Ub(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Ub(e.columns,e.old_record)),n}}const Hb=()=>{},kM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class jM{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=K3,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Hb,this.ref=0,this.logger=Hb,this.conn=null,this.sendBuffer=[],this.serializer=new NM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=u=>{let h;return u?h=u:typeof fetch>"u"?h=(...y)=>Tf(async()=>{const{default:b}=await Promise.resolve().then(()=>Dc);return{default:b}},void 0).then(({default:b})=>b(...y)):h=fetch,(...y)=>h(...y)},this.endPoint=`${e}/${Qg.websocket}`,this.httpEndpoint=J3(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const l=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(l&&(this.accessTokenValue=l,this.apiKey=l),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:u=>[1e3,2e3,5e3,1e4][u-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(u,h)=>h(JSON.stringify(u)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Z3(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=SM),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:TM}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ku.connecting:return Vo.Connecting;case Ku.open:return Vo.Open;case Ku.closing:return Vo.Closing;default:return Vo.Closed}}isConnected(){return this.connectionState()===Vo.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,l=this.getChannels().find(u=>u.topic===r);if(l)return l;{const u=new Wm(`realtime:${e}`,n,this);return this.channels.push(u),u}}push(e){const{topic:n,event:r,payload:l,ref:u}=e,h=()=>{this.encode(e,y=>{var b;(b=this.conn)===null||b===void 0||b.send(y)})};this.log("push",`${n} ${r} (${u})`,l),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const l={access_token:n,version:AM};n&&r.updateJoinPayload(l),r.joinedOnce&&r._isJoined()&&r._push(Vs.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(_M,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:l,payload:u,ref:h}=n;r==="phoenix"&&l==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),h&&h===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${u.status||""} ${r} ${l} ${h&&"("+h+")"||""}`,u),Array.from(this.channels).filter(y=>y._isMember(r)).forEach(y=>y._trigger(l,u,h)),this.stateChangeCallbacks.message.forEach(y=>y(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vs.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",l=new URLSearchParams(n);return`${e}${r}${l}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([kM],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Km extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ai(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class BM extends Km{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class em extends Km{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var PM=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(E){try{x(r.next(E))}catch(A){h(A)}}function b(E){try{x(r.throw(E))}catch(A){h(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};const eE=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Tf(async()=>{const{default:r}=await Promise.resolve().then(()=>Dc);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},UM=()=>PM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Tf(()=>Promise.resolve().then(()=>Dc),void 0)).Response:Response}),tm=t=>{if(Array.isArray(t))return t.map(n=>tm(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const l=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));e[l]=tm(r)}),e};var cl=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(E){try{x(r.next(E))}catch(A){h(A)}}function b(E){try{x(r.throw(E))}catch(A){h(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};const ag=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),FM=(t,e,n)=>cl(void 0,void 0,void 0,function*(){const r=yield UM();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(l=>{e(new BM(ag(l),t.status||500))}).catch(l=>{e(new em(ag(l),l))}):e(new em(ag(t),t))}),VM=(t,e,n,r)=>{const l={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(l.body=JSON.stringify(r)),Object.assign(Object.assign({},l),n))};function _f(t,e,n,r,l,u){return cl(this,void 0,void 0,function*(){return new Promise((h,y)=>{t(n,VM(e,r,l,u)).then(b=>{if(!b.ok)throw b;return r!=null&&r.noResolveJson?b:b.json()}).then(b=>h(b)).catch(b=>FM(b,y,r))})})}function Eh(t,e,n,r){return cl(this,void 0,void 0,function*(){return _f(t,"GET",e,n,r)})}function za(t,e,n,r,l){return cl(this,void 0,void 0,function*(){return _f(t,"POST",e,r,l,n)})}function zM(t,e,n,r,l){return cl(this,void 0,void 0,function*(){return _f(t,"PUT",e,r,l,n)})}function HM(t,e,n,r){return cl(this,void 0,void 0,function*(){return _f(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function tE(t,e,n,r,l){return cl(this,void 0,void 0,function*(){return _f(t,"DELETE",e,r,l,n)})}var Hi=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(E){try{x(r.next(E))}catch(A){h(A)}}function b(E){try{x(r.throw(E))}catch(A){h(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};const $M={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$b={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class GM{constructor(e,n={},r,l){this.url=e,this.headers=n,this.bucketId=r,this.fetch=eE(l)}uploadOrUpdate(e,n,r,l){return Hi(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},$b),l);let y=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(h.upsert)});const b=h.metadata;typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),b&&u.append("metadata",this.encodeMetadata(b)),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",h.cacheControl),b&&u.append("metadata",this.encodeMetadata(b))):(u=r,y["cache-control"]=`max-age=${h.cacheControl}`,y["content-type"]=h.contentType,b&&(y["x-metadata"]=this.toBase64(this.encodeMetadata(b)))),l!=null&&l.headers&&(y=Object.assign(Object.assign({},y),l.headers));const x=this._removeEmptyFolders(n),E=this._getFinalPath(x),A=yield this.fetch(`${this.url}/object/${E}`,Object.assign({method:e,body:u,headers:y},h!=null&&h.duplex?{duplex:h.duplex}:{})),N=yield A.json();return A.ok?{data:{path:x,id:N.Id,fullPath:N.Key},error:null}:{data:null,error:N}}catch(u){if(ai(u))return{data:null,error:u};throw u}})}upload(e,n,r){return Hi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,l){return Hi(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(e),h=this._getFinalPath(u),y=new URL(this.url+`/object/upload/sign/${h}`);y.searchParams.set("token",n);try{let b;const x=Object.assign({upsert:$b.upsert},l),E=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&r instanceof Blob?(b=new FormData,b.append("cacheControl",x.cacheControl),b.append("",r)):typeof FormData<"u"&&r instanceof FormData?(b=r,b.append("cacheControl",x.cacheControl)):(b=r,E["cache-control"]=`max-age=${x.cacheControl}`,E["content-type"]=x.contentType);const A=yield this.fetch(y.toString(),{method:"PUT",body:b,headers:E}),N=yield A.json();return A.ok?{data:{path:u,fullPath:N.Key},error:null}:{data:null,error:N}}catch(b){if(ai(b))return{data:null,error:b};throw b}})}createSignedUploadUrl(e,n){return Hi(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const l=Object.assign({},this.headers);n!=null&&n.upsert&&(l["x-upsert"]="true");const u=yield za(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:l}),h=new URL(this.url+u.url),y=h.searchParams.get("token");if(!y)throw new Km("No token returned by API");return{data:{signedUrl:h.toString(),path:e,token:y},error:null}}catch(r){if(ai(r))return{data:null,error:r};throw r}})}update(e,n,r){return Hi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Hi(this,void 0,void 0,function*(){try{return{data:yield za(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(ai(l))return{data:null,error:l};throw l}})}copy(e,n,r){return Hi(this,void 0,void 0,function*(){try{return{data:{path:(yield za(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(ai(l))return{data:null,error:l};throw l}})}createSignedUrl(e,n,r){return Hi(this,void 0,void 0,function*(){try{let l=this._getFinalPath(e),u=yield za(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const h=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(l){if(ai(l))return{data:null,error:l};throw l}})}createSignedUrls(e,n,r){return Hi(this,void 0,void 0,function*(){try{const l=yield za(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),u=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:l.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(l){if(ai(l))return{data:null,error:l};throw l}})}download(e,n){return Hi(this,void 0,void 0,function*(){const l=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),h=u?`?${u}`:"";try{const y=this._getFinalPath(e);return{data:yield(yield Eh(this.fetch,`${this.url}/${l}/${y}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(y){if(ai(y))return{data:null,error:y};throw y}})}info(e){return Hi(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Eh(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:tm(r),error:null}}catch(r){if(ai(r))return{data:null,error:r};throw r}})}exists(e){return Hi(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield HM(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ai(r)&&r instanceof em){const l=r.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),l=[],u=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&l.push(u);const y=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",b=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});b!==""&&l.push(b);let x=l.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${y}/public/${r}${x}`)}}}remove(e){return Hi(this,void 0,void 0,function*(){try{return{data:yield tE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(ai(n))return{data:null,error:n};throw n}})}list(e,n,r){return Hi(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},$M),n),{prefix:e||""});return{data:yield za(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},r),error:null}}catch(l){if(ai(l))return{data:null,error:l};throw l}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const qM="2.7.1",YM={"X-Client-Info":`storage-js/${qM}`};var nc=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(E){try{x(r.next(E))}catch(A){h(A)}}function b(E){try{x(r.throw(E))}catch(A){h(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};class XM{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},YM),n),this.fetch=eE(r)}listBuckets(){return nc(this,void 0,void 0,function*(){try{return{data:yield Eh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ai(e))return{data:null,error:e};throw e}})}getBucket(e){return nc(this,void 0,void 0,function*(){try{return{data:yield Eh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(ai(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return nc(this,void 0,void 0,function*(){try{return{data:yield za(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ai(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return nc(this,void 0,void 0,function*(){try{return{data:yield zM(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ai(r))return{data:null,error:r};throw r}})}emptyBucket(e){return nc(this,void 0,void 0,function*(){try{return{data:yield za(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ai(n))return{data:null,error:n};throw n}})}deleteBucket(e){return nc(this,void 0,void 0,function*(){try{return{data:yield tE(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(ai(n))return{data:null,error:n};throw n}})}}class WM extends XM{constructor(e,n={},r){super(e,n,r)}from(e){return new GM(this.url,this.headers,e,this.fetch)}}const KM="2.50.3";let Fu="";typeof Deno<"u"?Fu="deno":typeof document<"u"?Fu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fu="react-native":Fu="node";const ZM={"X-Client-Info":`supabase-js-${Fu}/${KM}`},QM={headers:ZM},JM={schema:"public"},eD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tD={};var nD=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(E){try{x(r.next(E))}catch(A){h(A)}}function b(E){try{x(r.throw(E))}catch(A){h(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};const iD=t=>{let e;return t?e=t:typeof fetch>"u"?e=$3:e=fetch,(...n)=>e(...n)},sD=()=>typeof Headers>"u"?G3:Headers,rD=(t,e,n)=>{const r=iD(n),l=sD();return(u,h)=>nD(void 0,void 0,void 0,function*(){var y;const b=(y=yield e())!==null&&y!==void 0?y:t;let x=new l(h==null?void 0:h.headers);return x.has("apikey")||x.set("apikey",t),x.has("Authorization")||x.set("Authorization",`Bearer ${b}`),r(u,Object.assign(Object.assign({},h),{headers:x}))})};var aD=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(E){try{x(r.next(E))}catch(A){h(A)}}function b(E){try{x(r.throw(E))}catch(A){h(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};function oD(t){return t.endsWith("/")?t:t+"/"}function lD(t,e){var n,r;const{db:l,auth:u,realtime:h,global:y}=t,{db:b,auth:x,realtime:E,global:A}=e,N={db:Object.assign(Object.assign({},b),l),auth:Object.assign(Object.assign({},x),u),realtime:Object.assign(Object.assign({},E),h),global:Object.assign(Object.assign(Object.assign({},A),y),{headers:Object.assign(Object.assign({},(n=A==null?void 0:A.headers)!==null&&n!==void 0?n:{}),(r=y==null?void 0:y.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>aD(this,void 0,void 0,function*(){return""})};return t.accessToken?N.accessToken=t.accessToken:delete N.accessToken,N}const nE="2.70.0",oc=30*1e3,nm=3,og=nm*oc,cD="http://localhost:9999",uD="supabase.auth.token",fD={"X-Client-Info":`gotrue-js/${nE}`},im="X-Supabase-Api-Version",iE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,hD=6e5;class Zm extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function mt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class gD extends Zm{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function mD(t){return mt(t)&&t.name==="AuthApiError"}class sE extends Zm{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class co extends Zm{constructor(e,n,r,l){super(e,r,l),this.name=n,this.status=r}}class Fa extends co{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function pD(t){return mt(t)&&t.name==="AuthSessionMissingError"}class Kd extends co{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zd extends co{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Qd extends co{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function xD(t){return mt(t)&&t.name==="AuthImplicitGrantRedirectError"}class Gb extends co{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sm extends co{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function lg(t){return mt(t)&&t.name==="AuthRetryableFetchError"}class qb extends co{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Qu extends co{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Sh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Yb=` 	
\r=`.split(""),yD=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Yb.length;e+=1)t[Yb[e].charCodeAt(0)]=-2;for(let e=0;e<Sh.length;e+=1)t[Sh[e].charCodeAt(0)]=e;return t})();function Xb(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Sh[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Sh[r]),e.queuedBits-=6}}function rE(t,e,n){const r=yD[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Wb(t){const e=[],n=h=>{e.push(String.fromCodePoint(h))},r={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=h=>{vD(h,r,n)};for(let h=0;h<t.length;h+=1)rE(t.charCodeAt(h),l,u);return e.join("")}function bD(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function wD(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const l=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|l)+65536,n+=1}bD(r,e)}}function vD(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function ED(t){const e=[],n={queue:0,queuedBits:0},r=l=>{e.push(l)};for(let l=0;l<t.length;l+=1)rE(t.charCodeAt(l),n,r);return new Uint8Array(e)}function SD(t){const e=[];return wD(t,n=>e.push(n)),new Uint8Array(e)}function CD(t){const e=[],n={queue:0,queuedBits:0},r=l=>{e.push(l)};return t.forEach(l=>Xb(l,n,r)),Xb(null,n,r),e.join("")}function AD(t){return Math.round(Date.now()/1e3)+t}function TD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Bs=()=>typeof window<"u"&&typeof document<"u",jo={tested:!1,writable:!1},Ju=()=>{if(!Bs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jo.tested)return jo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),jo.tested=!0,jo.writable=!0}catch{jo.tested=!0,jo.writable=!1}return jo.writable};function _D(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((l,u)=>{e[u]=l})}catch{}return n.searchParams.forEach((r,l)=>{e[l]=r}),e}const aE=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Tf(async()=>{const{default:r}=await Promise.resolve().then(()=>Dc);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},ND=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",oE=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Jd=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},eh=async(t,e)=>{await t.removeItem(e)};class Uh{constructor(){this.promise=new Uh.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Uh.promiseConstructor=Promise;function cg(t){const e=t.split(".");if(e.length!==3)throw new Qu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!dD.test(e[r]))throw new Qu("JWT not in base64url format");return{header:JSON.parse(Wb(e[0])),payload:JSON.parse(Wb(e[1])),signature:ED(e[2]),raw:{header:e[0],payload:e[1]}}}async function RD(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function OD(t,e){return new Promise((r,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await t(u);if(!e(u,null,h)){r(h);return}}catch(h){if(!e(u,h)){l(h);return}}})()})}function ID(t){return("0"+t.toString(16)).substr(-2)}function MD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let l="";for(let u=0;u<56;u++)l+=n.charAt(Math.floor(Math.random()*r));return l}return crypto.getRandomValues(e),Array.from(e,ID).join("")}async function DD(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),l=new Uint8Array(r);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function LD(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await DD(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ic(t,e,n=!1){const r=MD();let l=r;n&&(l+="/PASSWORD_RECOVERY"),await oE(t,`${e}-code-verifier`,l);const u=await LD(r);return[u,r===u?"plain":"s256"]}const kD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jD(t){const e=t.headers.get(im);if(!e||!e.match(kD))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function BD(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function PD(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function sc(t){if(!UD.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var FD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(t);l<r.length;l++)e.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(t,r[l])&&(n[r[l]]=t[r[l]]);return n};const Po=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),VD=[502,503,504];async function Kb(t){var e;if(!ND(t))throw new sm(Po(t),0);if(VD.includes(t.status))throw new sm(Po(t),t.status);let n;try{n=await t.json()}catch(u){throw new sE(Po(u),u)}let r;const l=jD(t);if(l&&l.getTime()>=iE["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new qb(Po(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Fa}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new qb(Po(n),t.status,n.weak_password.reasons);throw new gD(Po(n),t.status||500,r)}const zD=(t,e,n,r)=>{const l={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),l.body=JSON.stringify(r),Object.assign(Object.assign({},l),n))};async function Ot(t,e,n,r){var l;const u=Object.assign({},r==null?void 0:r.headers);u[im]||(u[im]=iE["2024-01-01"].name),r!=null&&r.jwt&&(u.Authorization=`Bearer ${r.jwt}`);const h=(l=r==null?void 0:r.query)!==null&&l!==void 0?l:{};r!=null&&r.redirectTo&&(h.redirect_to=r.redirectTo);const y=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",b=await HD(t,e,n+y,{headers:u,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(b):{data:Object.assign({},b),error:null}}async function HD(t,e,n,r,l,u){const h=zD(e,r,l,u);let y;try{y=await t(n,Object.assign({},h))}catch(b){throw console.error(b),new sm(Po(b),0)}if(y.ok||await Kb(y),r!=null&&r.noResolveJson)return y;try{return await y.json()}catch(b){await Kb(b)}}function zr(t){var e;let n=null;YD(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=AD(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Zb(t){const e=zr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ha(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function $D(t){return{data:t,error:null}}function GD(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:l,verification_type:u}=t,h=FD(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),y={action_link:e,email_otp:n,hashed_token:r,redirect_to:l,verification_type:u},b=Object.assign({},h);return{data:{properties:y,user:b},error:null}}function qD(t){return t}function YD(t){return t.access_token&&t.refresh_token&&t.expires_in}const ug=["global","local","others"];var XD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(t);l<r.length;l++)e.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(t,r[l])&&(n[r[l]]=t[r[l]]);return n};class WD{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=aE(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=ug[0]){if(ug.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ug.join(", ")}`);try{return await Ot(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ot(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ha})}catch(r){if(mt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=XD(e,["options"]),l=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(l.new_email=r==null?void 0:r.newEmail,delete l.newEmail),await Ot(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:GD,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(mt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ot(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ha})}catch(n){if(mt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,l,u,h,y,b;try{const x={nextPage:null,lastPage:0,total:0},E=await Ot(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(u=(l=e==null?void 0:e.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:qD});if(E.error)throw E.error;const A=await E.json(),N=(h=E.headers.get("x-total-count"))!==null&&h!==void 0?h:0,I=(b=(y=E.headers.get("link"))===null||y===void 0?void 0:y.split(","))!==null&&b!==void 0?b:[];return I.length>0&&(I.forEach(M=>{const j=parseInt(M.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(M.split(";")[1].split("=")[1]);x[`${U}Page`]=j}),x.total=parseInt(N)),{data:Object.assign(Object.assign({},A),x),error:null}}catch(x){if(mt(x))return{data:{users:[]},error:x};throw x}}async getUserById(e){sc(e);try{return await Ot(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ha})}catch(n){if(mt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){sc(e);try{return await Ot(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ha})}catch(r){if(mt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){sc(e);try{return await Ot(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ha})}catch(r){if(mt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){sc(e.userId);try{const{data:n,error:r}=await Ot(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:n,error:r}}catch(n){if(mt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){sc(e.userId),sc(e.id);try{return{data:await Ot(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}}}const KD={getItem:t=>Ju()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Ju()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Ju()&&globalThis.localStorage.removeItem(t)}};function Qb(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function ZD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const rc={debug:!!(globalThis&&Ju()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class lE extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class QD extends lE{}async function JD(t,e,n){rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),rc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async l=>{if(l){rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,l.name);try{return await n()}finally{rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,l.name)}}else{if(e===0)throw rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new QD(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(rc.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}ZD();const e9={url:cD,storageKey:uD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:fD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jb(t,e,n){return await n()}class df{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=df.nextInstanceID,df.nextInstanceID+=1,this.instanceID>0&&Bs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},e9),e);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new WD({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=aE(l.fetch),this.lock=l.lock||Jb,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:Bs()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=JD:this.lock=Jb,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?l.storage?this.storage=l.storage:Ju()?this.storage=KD:(this.memoryStorage={},this.storage=Qb(this.memoryStorage)):(this.memoryStorage={},this.storage=Qb(this.memoryStorage)),Bs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${nE}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=_D(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Bs()&&this.detectSessionInUrl&&r!=="none"){const{data:l,error:u}=await this._getSessionFromURL(n,r);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),xD(u)){const b=(e=u.details)===null||e===void 0?void 0:e.code;if(b==="identity_already_exists"||b==="identity_not_found"||b==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:y}=l;return this._debug("#_initialize()","detected session in URL",h,"redirect type",y),await this._saveSession(h),setTimeout(async()=>{y==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return mt(n)?{error:n}:{error:new sE("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,l;try{const u=await Ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(l=e==null?void 0:e.options)===null||l===void 0?void 0:l.captchaToken}},xform:zr}),{data:h,error:y}=u;if(y||!h)return{data:{user:null,session:null},error:y};const b=h.session,x=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:x,session:b},error:null}}catch(u){if(mt(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(e){var n,r,l;try{let u;if("email"in e){const{email:E,password:A,options:N}=e;let I=null,M=null;this.flowType==="pkce"&&([I,M]=await ic(this.storage,this.storageKey)),u=await Ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:E,password:A,data:(n=N==null?void 0:N.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:I,code_challenge_method:M},xform:zr})}else if("phone"in e){const{phone:E,password:A,options:N}=e;u=await Ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:E,password:A,data:(r=N==null?void 0:N.data)!==null&&r!==void 0?r:{},channel:(l=N==null?void 0:N.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:zr})}else throw new Zd("You must provide either an email or phone number and a password");const{data:h,error:y}=u;if(y||!h)return{data:{user:null,session:null},error:y};const b=h.session,x=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:x,session:b},error:null}}catch(u){if(mt(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(e){try{let n;if("email"in e){const{email:u,password:h,options:y}=e;n=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Zb})}else if("phone"in e){const{phone:u,password:h,options:y}=e;n=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Zb})}else throw new Zd("You must provide either an email or phone number and a password");const{data:r,error:l}=n;return l?{data:{user:null,session:null},error:l}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Kd}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:l})}catch(n){if(mt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,l,u;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=e.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,l,u,h,y,b,x,E,A,N,I;let M,j;if("message"in e)M=e.message,j=e.signature;else{const{chain:U,wallet:$,statement:q,options:B}=e;let V;if(Bs())if(typeof $=="object")V=$;else{const ee=window;if("solana"in ee&&typeof ee.solana=="object"&&("signIn"in ee.solana&&typeof ee.solana.signIn=="function"||"signMessage"in ee.solana&&typeof ee.solana.signMessage=="function"))V=ee.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!(B!=null&&B.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=$}const z=new URL((n=B==null?void 0:B.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in V&&V.signIn){const ee=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B==null?void 0:B.signInWithSolana),{version:"1",domain:z.host,uri:z.href}),q?{statement:q}:null));let X;if(Array.isArray(ee)&&ee[0]&&typeof ee[0]=="object")X=ee[0];else if(ee&&typeof ee=="object"&&"signedMessage"in ee&&"signature"in ee)X=ee;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in X&&"signature"in X&&(typeof X.signedMessage=="string"||X.signedMessage instanceof Uint8Array)&&X.signature instanceof Uint8Array)M=typeof X.signedMessage=="string"?X.signedMessage:new TextDecoder().decode(X.signedMessage),j=X.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");M=[`${z.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...q?["",q,""]:[""],"Version: 1",`URI: ${z.href}`,`Issued At: ${(l=(r=B==null?void 0:B.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=B==null?void 0:B.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((h=B==null?void 0:B.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((y=B==null?void 0:B.signInWithSolana)===null||y===void 0)&&y.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((b=B==null?void 0:B.signInWithSolana)===null||b===void 0)&&b.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((x=B==null?void 0:B.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((A=(E=B==null?void 0:B.signInWithSolana)===null||E===void 0?void 0:E.resources)===null||A===void 0)&&A.length?["Resources",...B.signInWithSolana.resources.map(X=>`- ${X}`)]:[]].join(`
`);const ee=await V.signMessage(new TextEncoder().encode(M),"utf8");if(!ee||!(ee instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=ee}}try{const{data:U,error:$}=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:M,signature:CD(j)},!((N=e.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(I=e.options)===null||I===void 0?void 0:I.captchaToken}}:null),xform:zr});if($)throw $;return!U||!U.session||!U.user?{data:{user:null,session:null},error:new Kd}:(U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("SIGNED_IN",U.session)),{data:Object.assign({},U),error:$})}catch(U){if(mt(U))return{data:{user:null,session:null},error:U};throw U}}async _exchangeCodeForSession(e){const n=await Jd(this.storage,`${this.storageKey}-code-verifier`),[r,l]=(n??"").split("/");try{const{data:u,error:h}=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:zr});if(await eh(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new Kd}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:h})}catch(u){if(mt(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(e){try{const{options:n,provider:r,token:l,access_token:u,nonce:h}=e,y=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:l,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:zr}),{data:b,error:x}=y;return x?{data:{user:null,session:null},error:x}:!b||!b.session||!b.user?{data:{user:null,session:null},error:new Kd}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:b,error:x})}catch(n){if(mt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,l,u,h;try{if("email"in e){const{email:y,options:b}=e;let x=null,E=null;this.flowType==="pkce"&&([x,E]=await ic(this.storage,this.storageKey));const{error:A}=await Ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:y,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},create_user:(r=b==null?void 0:b.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:x,code_challenge_method:E},redirectTo:b==null?void 0:b.emailRedirectTo});return{data:{user:null,session:null},error:A}}if("phone"in e){const{phone:y,options:b}=e,{data:x,error:E}=await Ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:y,data:(l=b==null?void 0:b.data)!==null&&l!==void 0?l:{},create_user:(u=b==null?void 0:b.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},channel:(h=b==null?void 0:b.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:E}}throw new Zd("You must provide either an email or phone number.")}catch(y){if(mt(y))return{data:{user:null,session:null},error:y};throw y}}async verifyOtp(e){var n,r;try{let l,u;"options"in e&&(l=(n=e.options)===null||n===void 0?void 0:n.redirectTo,u=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:h,error:y}=await Ot(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:zr});if(y)throw y;if(!h)throw new Error("An error occurred on token verification.");const b=h.session,x=h.user;return b!=null&&b.access_token&&(await this._saveSession(b),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",b)),{data:{user:x,session:b},error:null}}catch(l){if(mt(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(e){var n,r,l;try{let u=null,h=null;return this.flowType==="pkce"&&([u,h]=await ic(this.storage,this.storageKey)),await Ot(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((l=e==null?void 0:e.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:$D})}catch(u){if(mt(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Fa;const{error:l}=await Ot(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:l}})}catch(e){if(mt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:l,options:u}=e,{error:h}=await Ot(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in e){const{phone:r,type:l,options:u}=e,{data:h,error:y}=await Ot(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:y}}throw new Zd("You must provide either an email or phone number and a type")}catch(n){if(mt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Jd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<og:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let h=this.suppressGetSessionWarning;e=new Proxy(e,{get:(b,x,E)=>(!h&&x==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(b,x,E))})}return{data:{session:e},error:null}}const{session:l,error:u}=await this._callRefreshToken(e.refresh_token);return u?{data:{session:null},error:u}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ha}):await this._useSession(async n=>{var r,l,u;const{data:h,error:y}=n;if(y)throw y;return!(!((r=h.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fa}:await Ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:Ha})})}catch(n){if(mt(n))return pD(n)&&(await this._removeSession(),await eh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:l,error:u}=r;if(u)throw u;if(!l.session)throw new Fa;const h=l.session;let y=null,b=null;this.flowType==="pkce"&&e.email!=null&&([y,b]=await ic(this.storage,this.storageKey));const{data:x,error:E}=await Ot(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:y,code_challenge_method:b}),jwt:h.access_token,xform:Ha});if(E)throw E;return h.user=x.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(r){if(mt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Fa;const n=Date.now()/1e3;let r=n,l=!0,u=null;const{payload:h}=cg(e.access_token);if(h.exp&&(r=h.exp,l=r<=n),l){const{session:y,error:b}=await this._callRefreshToken(e.refresh_token);if(b)return{data:{user:null,session:null},error:b};if(!y)return{data:{user:null,session:null},error:null};u=y}else{const{data:y,error:b}=await this._getUser(e.access_token);if(b)throw b;u={access_token:e.access_token,refresh_token:e.refresh_token,user:y.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(n){if(mt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:h,error:y}=n;if(y)throw y;e=(r=h.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Fa;const{session:l,error:u}=await this._callRefreshToken(e.refresh_token);return u?{data:{user:null,session:null},error:u}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(mt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Bs())throw new Qd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Gb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Gb("No code detected.");const{data:q,error:B}=await this._exchangeCodeForSession(e.code);if(B)throw B;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:q.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:l,access_token:u,refresh_token:h,expires_in:y,expires_at:b,token_type:x}=e;if(!u||!y||!h||!x)throw new Qd("No session defined in URL");const E=Math.round(Date.now()/1e3),A=parseInt(y);let N=E+A;b&&(N=parseInt(b));const I=N-E;I*1e3<=oc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${I}s, should have been closer to ${A}s`);const M=N-A;E-M>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",M,N,E):E-M<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",M,N,E);const{data:j,error:U}=await this._getUser(u);if(U)throw U;const $={provider_token:r,provider_refresh_token:l,access_token:u,expires_in:A,expires_at:N,refresh_token:h,token_type:x,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:e.type},error:null}}catch(r){if(mt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Jd(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:l,error:u}=n;if(u)return{error:u};const h=(r=l.session)===null||r===void 0?void 0:r.access_token;if(h){const{error:y}=await this.admin.signOut(h,e);if(y&&!(mD(y)&&(y.status===404||y.status===401||y.status===403)))return{error:y}}return e!=="others"&&(await this._removeSession(),await eh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=TD(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,l;try{const{data:{session:u},error:h}=n;if(h)throw h;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",e,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(e))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",u),console.error(u)}})}async resetPasswordForEmail(e,n={}){let r=null,l=null;this.flowType==="pkce"&&([r,l]=await ic(this.storage,this.storageKey,!0));try{return await Ot(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:l,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(mt(u))return{data:null,error:u};throw u}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:l}=await this._useSession(async u=>{var h,y,b,x,E;const{data:A,error:N}=u;if(N)throw N;const I=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(h=e.options)===null||h===void 0?void 0:h.redirectTo,scopes:(y=e.options)===null||y===void 0?void 0:y.scopes,queryParams:(b=e.options)===null||b===void 0?void 0:b.queryParams,skipBrowserRedirect:!0});return await Ot(this.fetch,"GET",I,{headers:this.headers,jwt:(E=(x=A.session)===null||x===void 0?void 0:x.access_token)!==null&&E!==void 0?E:void 0})});if(l)throw l;return Bs()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(mt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,l;const{data:u,error:h}=n;if(h)throw h;return await Ot(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(l=(r=u.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0})})}catch(n){if(mt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await OD(async l=>(l>0&&await RD(200*Math.pow(2,l-1)),this._debug(n,"refreshing attempt",l),await Ot(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:zr})),(l,u)=>{const h=200*Math.pow(2,l);return u&&lg(u)&&Date.now()+h-r<oc})}catch(r){if(this._debug(n,"error",r),mt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Bs()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Jd(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const l=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<og;if(this._debug(n,`session has${l?"":" not"} expired with margin of ${og}s`),l){if(this.autoRefreshToken&&r.refresh_token){const{error:u}=await this._callRefreshToken(r.refresh_token);u&&(console.error(u),lg(u)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Fa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Uh;const{data:u,error:h}=await this._refreshAccessToken(e);if(h)throw h;if(!u.session)throw new Fa;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const y={session:u.session,error:null};return this.refreshingDeferred.resolve(y),y}catch(u){if(this._debug(l,"error",u),mt(u)){const h={session:null,error:u};return lg(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(h),h}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(e,n,r=!0){const l=`#_notifyAllSubscribers(${e})`;this._debug(l,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async y=>{try{await y.callback(e,n)}catch(b){u.push(b)}});if(await Promise.all(h),u.length>0){for(let y=0;y<u.length;y+=1)console.error(u[y]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await oE(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await eh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Bs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),oc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((r.expires_at*1e3-e)/oc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${oc}ms, refresh threshold is ${nm} ticks`),l<=nm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof lE)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const l=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&l.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&l.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[u,h]=await ic(this.storage,this.storageKey),y=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});l.push(y.toString())}if(r!=null&&r.queryParams){const u=new URLSearchParams(r.queryParams);l.push(u.toString())}return r!=null&&r.skipBrowserRedirect&&l.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${l.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:l,error:u}=n;return u?{data:null,error:u}:await Ot(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(mt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,l;const{data:u,error:h}=n;if(h)return{data:null,error:h};const y=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:b,error:x}=await Ot(this.fetch,"POST",`${this.url}/factors`,{body:y,headers:this.headers,jwt:(r=u==null?void 0:u.session)===null||r===void 0?void 0:r.access_token});return x?{data:null,error:x}:(e.factorType==="totp"&&(!((l=b==null?void 0:b.totp)===null||l===void 0)&&l.qr_code)&&(b.totp.qr_code=`data:image/svg+xml;utf-8,${b.totp.qr_code}`),{data:b,error:null})})}catch(n){if(mt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:l,error:u}=n;if(u)return{data:null,error:u};const{data:h,error:y}=await Ot(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});return y?{data:null,error:y}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:y})})}catch(n){if(mt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:l,error:u}=n;return u?{data:null,error:u}:await Ot(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(mt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],l=r.filter(h=>h.factor_type==="totp"&&h.status==="verified"),u=r.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:r,totp:l,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:l},error:u}=e;if(u)return{data:null,error:u};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=cg(l.access_token);let y=null;h.aal&&(y=h.aal);let b=y;((r=(n=l.user.factors)===null||n===void 0?void 0:n.filter(A=>A.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(b="aal2");const E=h.amr||[];return{data:{currentLevel:y,nextLevel:b,currentAuthenticationMethods:E},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(h=>h.kid===e);if(r||(r=this.jwks.keys.find(h=>h.kid===e),r&&this.jwks_cached_at+hD>Date.now()))return r;const{data:l,error:u}=await Ot(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;if(!l.keys||l.keys.length===0)throw new Qu("JWKS is empty");if(this.jwks=l,this.jwks_cached_at=Date.now(),r=l.keys.find(h=>h.kid===e),!r)throw new Qu("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:I,error:M}=await this.getSession();if(M||!I.session)return{data:null,error:M};r=I.session.access_token}const{header:l,payload:u,signature:h,raw:{header:y,payload:b}}=cg(r);if(BD(u.exp),!l.kid||l.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:I}=await this.getUser(r);if(I)throw I;return{data:{claims:u,header:l,signature:h},error:null}}const x=PD(l.alg),E=await this.fetchJwk(l.kid,n),A=await crypto.subtle.importKey("jwk",E,x,!0,["verify"]);if(!await crypto.subtle.verify(x,A,h,SD(`${y}.${b}`)))throw new Qu("Invalid JWT signature");return{data:{claims:u,header:l,signature:h},error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}}}df.nextInstanceID=0;const t9=df;class n9 extends t9{constructor(e){super(e)}}var i9=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(E){try{x(r.next(E))}catch(A){h(A)}}function b(E){try{x(r.throw(E))}catch(A){h(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})};class s9{constructor(e,n,r){var l,u,h;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const y=oD(e),b=new URL(y);this.realtimeUrl=new URL("realtime/v1",b),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",b),this.storageUrl=new URL("storage/v1",b),this.functionsUrl=new URL("functions/v1",b);const x=`sb-${b.hostname.split(".")[0]}-auth-token`,E={db:JM,realtime:tD,auth:Object.assign(Object.assign({},eD),{storageKey:x}),global:QM},A=lD(r??{},E);this.storageKey=(l=A.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(u=A.global.headers)!==null&&u!==void 0?u:{},A.accessToken?(this.accessToken=A.accessToken,this.auth=new Proxy({},{get:(N,I)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(I)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=A.auth)!==null&&h!==void 0?h:{},this.headers,A.global.fetch),this.fetch=rD(n,this._getAccessToken.bind(this),A.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},A.realtime)),this.rest=new vM(new URL("rest/v1",b).href,{headers:this.headers,schema:A.db.schema,fetch:this.fetch}),A.accessToken||this._listenForAuthEvents()}get functions(){return new cM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new WM(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return i9(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:l,storageKey:u,flowType:h,lock:y,debug:b},x,E){const A={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new n9({url:this.authUrl.href,headers:Object.assign(Object.assign({},A),x),storageKey:u,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:l,flowType:h,lock:y,debug:b,fetch:E,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new jM(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const r9=(t,e,n)=>new s9(t,e,n),Pe=r9("https://gsicrcogciklihyflhtc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdzaWNyY29nY2lrbGloeWZsaHRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2NjEzOTgsImV4cCI6MjA2NTIzNzM5OH0.RXaJeqWW0e35fsRTtn5RkrcPnI1e7kIIJnBoIanawI0");typeof window<"u"&&(window.supabase=Pe);function cE(){const{i18n:t}=zn(),e=t.language==="th"?"th":"en";function n(){const r=e==="en"?"th":"en";t.changeLanguage(r),localStorage.setItem("lang",r)}return C.jsxs("button",{type:"button",onClick:n,className:"relative w-14 h-8 rounded-full border-2 border-[#6654b3] bg-white flex items-center px-1 transition","aria-label":"Toggle language",style:{minWidth:56},children:[C.jsx("span",{className:`absolute left-1 top-1 w-6 h-6 rounded-full bg-[#6654b3] text-white flex items-center justify-center font-bold text-xs transition-transform duration-300 ${e==="th"?"translate-x-6":"translate-x-0"}`,children:e==="en"?"EN":"TH"}),C.jsxs("span",{className:"w-full flex justify-between text-[#6654b3] font-bold text-xs px-2 select-none",children:[C.jsx("span",{children:"EN"}),C.jsx("span",{children:"TH"})]})]})}function a9(){const{t}=zn(),e=_s(),[n,r]=R.useState(""),[l,u]=R.useState(""),[h,y]=R.useState(!1),[b,x]=R.useState("");async function E(A){A.preventDefault(),x(""),y(!0);const N=n.trim().toLowerCase(),I=l.trim(),{error:M}=await Pe.auth.signInWithPassword({email:N,password:I});M?x(M.message):e("/dashboard"),y(!1)}return C.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 relative",children:[C.jsx("div",{className:"absolute top-6 right-6 z-10",children:C.jsx(cE,{})}),C.jsxs("form",{onSubmit:E,className:"w-full max-w-md bg-white p-8 rounded shadow",children:[C.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:t("signIn")}),C.jsxs("label",{className:"block mb-4",children:[C.jsx("span",{className:"text-sm",children:t("email")}),C.jsx("input",{type:"email",className:"mt-1 block w-full border rounded px-3 py-2",placeholder:"you@example.com",value:n,onChange:A=>r(A.target.value),required:!0,autoFocus:!0})]}),C.jsxs("label",{className:"block mb-6",children:[C.jsx("span",{className:"text-sm",children:t("password")}),C.jsx("input",{type:"password",className:"mt-1 block w-full border rounded px-3 py-2",placeholder:"",value:l,onChange:A=>u(A.target.value),required:!0})]}),C.jsx("button",{type:"submit",disabled:h,className:"w-full bg-[#6654b3] text-white py-2 rounded hover:bg-[#5542a0] disabled:opacity-50 transition",children:t(h?"signingIn":"signIn")}),b&&C.jsx("p",{className:"mt-4 text-red-600 text-center",children:b})]})]})}function o9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const rm=R.forwardRef(o9);function l9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M7.5 3.75A1.5 1.5 0 0 0 6 5.25v13.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5V15a.75.75 0 0 1 1.5 0v3.75a3 3 0 0 1-3 3h-6a3 3 0 0 1-3-3V5.25a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3V9A.75.75 0 0 1 15 9V5.25a1.5 1.5 0 0 0-1.5-1.5h-6Zm10.72 4.72a.75.75 0 0 1 1.06 0l3 3a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 1 1-1.06-1.06l1.72-1.72H9a.75.75 0 0 1 0-1.5h10.94l-1.72-1.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const c9=R.forwardRef(l9);function u9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"}))}const f9=R.forwardRef(u9);function d9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M5.85 3.5a.75.75 0 0 0-1.117-1 9.719 9.719 0 0 0-2.348 4.876.75.75 0 0 0 1.479.248A8.219 8.219 0 0 1 5.85 3.5ZM19.267 2.5a.75.75 0 1 0-1.118 1 8.22 8.22 0 0 1 1.987 4.124.75.75 0 0 0 1.48-.248A9.72 9.72 0 0 0 19.266 2.5Z"}),R.createElement("path",{fillRule:"evenodd",d:"M12 2.25A6.75 6.75 0 0 0 5.25 9v.75a8.217 8.217 0 0 1-2.119 5.52.75.75 0 0 0 .298 1.206c1.544.57 3.16.99 4.831 1.243a3.75 3.75 0 1 0 7.48 0 24.583 24.583 0 0 0 4.83-1.244.75.75 0 0 0 .298-1.205 8.217 8.217 0 0 1-2.118-5.52V9A6.75 6.75 0 0 0 12 2.25ZM9.75 18c0-.034 0-.067.002-.1a25.05 25.05 0 0 0 4.496 0l.002.1a2.25 2.25 0 1 1-4.5 0Z",clipRule:"evenodd"}))}const h9=R.forwardRef(d9);function g9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M5.25 9a6.75 6.75 0 0 1 13.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 0 1-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 1 1-7.48 0 24.585 24.585 0 0 1-4.831-1.244.75.75 0 0 1-.298-1.205A8.217 8.217 0 0 0 5.25 9.75V9Zm4.502 8.9a2.25 2.25 0 1 0 4.496 0 25.057 25.057 0 0 1-4.496 0Z",clipRule:"evenodd"}))}const uE=R.forwardRef(g9);function m9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M11.25 4.533A9.707 9.707 0 0 0 6 3a9.735 9.735 0 0 0-3.25.555.75.75 0 0 0-.5.707v14.25a.75.75 0 0 0 1 .707A8.237 8.237 0 0 1 6 18.75c1.995 0 3.823.707 5.25 1.886V4.533ZM12.75 20.636A8.214 8.214 0 0 1 18 18.75c.966 0 1.89.166 2.75.47a.75.75 0 0 0 1-.708V4.262a.75.75 0 0 0-.5-.707A9.735 9.735 0 0 0 18 3a9.707 9.707 0 0 0-5.25 1.533v16.103Z"}))}const p9=R.forwardRef(m9);function x9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M4.913 2.658c2.075-.27 4.19-.408 6.337-.408 2.147 0 4.262.139 6.337.408 1.922.25 3.291 1.861 3.405 3.727a4.403 4.403 0 0 0-1.032-.211 50.89 50.89 0 0 0-8.42 0c-2.358.196-4.04 2.19-4.04 4.434v4.286a4.47 4.47 0 0 0 2.433 3.984L7.28 21.53A.75.75 0 0 1 6 21v-4.03a48.527 48.527 0 0 1-1.087-.128C2.905 16.58 1.5 14.833 1.5 12.862V6.638c0-1.97 1.405-3.718 3.413-3.979Z"}),R.createElement("path",{d:"M15.75 7.5c-1.376 0-2.739.057-4.086.169C10.124 7.797 9 9.103 9 10.609v4.285c0 1.507 1.128 2.814 2.67 2.94 1.243.102 2.5.157 3.768.165l2.782 2.781a.75.75 0 0 0 1.28-.53v-2.39l.33-.026c1.542-.125 2.67-1.433 2.67-2.94v-4.286c0-1.505-1.125-2.811-2.664-2.94A49.392 49.392 0 0 0 15.75 7.5Z"}))}const y9=R.forwardRef(x9);function b9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"}))}const w9=R.forwardRef(b9);function v9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M7.502 6h7.128A3.375 3.375 0 0 1 18 9.375v9.375a3 3 0 0 0 3-3V6.108c0-1.505-1.125-2.811-2.664-2.94a48.972 48.972 0 0 0-.673-.05A3 3 0 0 0 15 1.5h-1.5a3 3 0 0 0-2.663 1.618c-.225.015-.45.032-.673.05C8.662 3.295 7.554 4.542 7.502 6ZM13.5 3A1.5 1.5 0 0 0 12 4.5h4.5A1.5 1.5 0 0 0 15 3h-1.5Z",clipRule:"evenodd"}),R.createElement("path",{fillRule:"evenodd",d:"M3 9.375C3 8.339 3.84 7.5 4.875 7.5h9.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V9.375Zm9.586 4.594a.75.75 0 0 0-1.172-.938l-2.476 3.096-.908-.907a.75.75 0 0 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.116-.062l3-3.75Z",clipRule:"evenodd"}))}const E9=R.forwardRef(v9);function S9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z",clipRule:"evenodd"}))}const C9=R.forwardRef(S9);function A9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 0 0-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 0 0-2.282.819l-.922 1.597a1.875 1.875 0 0 0 .432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 0 0 0 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 0 0-.432 2.385l.922 1.597a1.875 1.875 0 0 0 2.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 0 0 2.28-.819l.923-1.597a1.875 1.875 0 0 0-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 0 0 0-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 0 0-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 0 0-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 0 0-1.85-1.567h-1.843ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z",clipRule:"evenodd"}))}const T9=R.forwardRef(A9);function _9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M10.464 8.746c.227-.18.497-.311.786-.394v2.795a2.252 2.252 0 0 1-.786-.393c-.394-.313-.546-.681-.546-1.004 0-.323.152-.691.546-1.004ZM12.75 15.662v-2.824c.347.085.664.228.921.421.427.32.579.686.579.991 0 .305-.152.671-.579.991a2.534 2.534 0 0 1-.921.42Z"}),R.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v.816a3.836 3.836 0 0 0-1.72.756c-.712.566-1.112 1.35-1.112 2.178 0 .829.4 1.612 1.113 2.178.502.4 1.102.647 1.719.756v2.978a2.536 2.536 0 0 1-.921-.421l-.879-.66a.75.75 0 0 0-.9 1.2l.879.66c.533.4 1.169.645 1.821.75V18a.75.75 0 0 0 1.5 0v-.81a4.124 4.124 0 0 0 1.821-.749c.745-.559 1.179-1.344 1.179-2.191 0-.847-.434-1.632-1.179-2.191a4.122 4.122 0 0 0-1.821-.75V8.354c.29.082.559.213.786.393l.415.33a.75.75 0 0 0 .933-1.175l-.415-.33a3.836 3.836 0 0 0-1.719-.755V6Z",clipRule:"evenodd"}))}const N9=R.forwardRef(_9);function R9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),R.createElement("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}))}const O9=R.forwardRef(R9);function I9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-2.625 6c-.54 0-.828.419-.936.634a1.96 1.96 0 0 0-.189.866c0 .298.059.605.189.866.108.215.395.634.936.634.54 0 .828-.419.936-.634.13-.26.189-.568.189-.866 0-.298-.059-.605-.189-.866-.108-.215-.395-.634-.936-.634Zm4.314.634c.108-.215.395-.634.936-.634.54 0 .828.419.936.634.13.26.189.568.189.866 0 .298-.059.605-.189.866-.108.215-.395.634-.936.634-.54 0-.828-.419-.936-.634a1.96 1.96 0 0 1-.189-.866c0-.298.059-.605.189-.866Zm2.023 6.828a.75.75 0 1 0-1.06-1.06 3.75 3.75 0 0 1-5.304 0 .75.75 0 0 0-1.06 1.06 5.25 5.25 0 0 0 7.424 0Z",clipRule:"evenodd"}))}const ew=R.forwardRef(I9);function M9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),R.createElement("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"}))}const D9=R.forwardRef(M9);function L9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const k9=R.forwardRef(L9);function j9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z",clipRule:"evenodd"}))}const B9=R.forwardRef(j9);function P9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 9.375v-4.5ZM4.875 4.5a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 0 1-1.875-1.875v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5ZM6 6.75A.75.75 0 0 1 6.75 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75A.75.75 0 0 1 6 7.5v-.75Zm9.75 0A.75.75 0 0 1 16.5 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 19.125v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875-.75a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM6 16.5a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm9.75 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm-3 3a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Z",clipRule:"evenodd"}))}const tw=R.forwardRef(P9);function U9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))}const F9=R.forwardRef(U9);function V9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{d:"M5.25 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM2.25 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM18.75 7.5a.75.75 0 0 0-1.5 0v2.25H15a.75.75 0 0 0 0 1.5h2.25v2.25a.75.75 0 0 0 1.5 0v-2.25H21a.75.75 0 0 0 0-1.5h-2.25V7.5Z"}))}const z9=R.forwardRef(V9);function H9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const fE=R.forwardRef(H9),$9="#6654b3",G9="#f6f6f6",nw=80;function q9(){const{t}=zn(),e=ta(),n=_s(),r=e.pathname==="/dashboard",[l,u]=R.useState(!1),h=[{to:"/dashboard",icon:C.jsx(D9,{className:"w-8 h-8"}),active:e.pathname==="/dashboard",key:"home"},{to:"/reports",icon:C.jsx(O9,{className:"w-8 h-8"}),active:e.pathname.startsWith("/reports"),key:"reports"},{to:"/messaging",icon:C.jsx(y9,{className:"w-8 h-8"}),active:e.pathname.startsWith("/messaging"),key:"messaging"},{to:"/billing",icon:C.jsx(N9,{className:"w-8 h-8"}),active:e.pathname.startsWith("/billing"),key:"billing"}];return C.jsxs(C.Fragment,{children:[C.jsx("button",{className:"fixed top-3 left-3 z-50 bg-[#6654b3] text-white p-2 rounded-xl shadow-lg md:hidden",onClick:()=>u(!0),"aria-label":"Open menu",style:{display:l?"none":void 0},children:C.jsx(f9,{className:"w-8 h-8"})}),C.jsxs("aside",{style:{width:nw,minWidth:nw,background:$9,color:G9,borderTopRightRadius:"36px",borderBottomRightRadius:"36px",minHeight:"100vh",boxShadow:"2px 0 20px 0 rgba(102,84,179,0.08)",zIndex:100,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"32px"},className:`fixed top-0 left-0 md:flex ${l?"flex":"hidden"} md:!flex`,children:[l&&C.jsx("button",{className:"absolute top-3 right-3 md:hidden bg-white/80 text-[#6654b3] rounded-full p-1 shadow",onClick:()=>u(!1),"aria-label":"Close menu",children:C.jsx(fE,{className:"w-7 h-7"})}),C.jsx("div",{style:{height:56,width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:!r&&C.jsx("button",{className:"w-12 h-12 flex items-center justify-center rounded-xl bg-white/90 hover:bg-[#edeaf8] text-[#6654b3] shadow transition",onClick:()=>n(-1),"aria-label":t("back"),children:C.jsx(rm,{className:"w-7 h-7"})})}),C.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",gap:"28px"},children:h.map(y=>C.jsx(bh,{to:y.to,className:`flex items-center justify-center w-12 h-12 rounded-xl transition
                ${y.active?"bg-white/80 shadow text-[#6654b3]":"text-white hover:bg-white/20"}`,title:t(y.key),onClick:()=>u(!1),children:y.icon},y.key))}),C.jsx("div",{className:"mb-4",children:C.jsx(cE,{})}),C.jsxs("div",{className:"flex flex-col items-center gap-4 mb-3",children:[C.jsx(bh,{to:"/settings",className:`flex items-center justify-center w-12 h-12 rounded-xl transition
              ${e.pathname==="/settings"?"bg-white/80 shadow text-[#6654b3]":"text-white hover:bg-white/20"}`,title:t("settings"),onClick:()=>u(!1),children:C.jsx(T9,{className:"w-8 h-8"})}),C.jsx("button",{type:"button",title:t("logout"),onClick:()=>n("/logout"),className:"w-12 h-12 flex items-center justify-center rounded-xl transition bg-white/90 hover:bg-pink-100 text-[#ec4899] shadow",style:{fontWeight:600},children:C.jsx(c9,{className:"w-8 h-8"})})]})]}),l&&C.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 md:hidden",onClick:()=>u(!1)})]})}const dE=R.createContext({user:null,setUser:()=>{}});function Fh(){return R.useContext(dE)}function Y9({children:t}){const[e,n]=R.useState(null);R.useEffect(()=>{Pe.auth.getSession().then(({data:u})=>{var h;(h=u.session)!=null&&h.user&&r({id:u.session.user.id,email:u.session.user.email??null})});const{data:l}=Pe.auth.onAuthStateChange((u,h)=>{h!=null&&h.user?r({id:h.user.id,email:h.user.email??null}):n(null)});return()=>l.subscription.unsubscribe()},[]);async function r(l){const{data:u,error:h}=await Pe.from("profiles").select("role").eq("id",l.id).single();if(h&&h.code!=="PGRST116"){console.error("loadProfile error",h);return}n({id:l.id,email:l.email,role:(u==null?void 0:u.role)??"staff"})}return C.jsx(dE.Provider,{value:{user:e,setUser:n},children:t})}const X9=80;function W9(){const[t,e]=R.useState(0),[n,r]=R.useState(!1),[l,u]=R.useState(!1),[h,y]=R.useState("avatar.png"),b=_s(),{user:x}=Fh(),E=R.useRef(null);R.useEffect(()=>{async function N(){if(!(x!=null&&x.id))return y("avatar.png");const{data:I,error:M}=await Pe.from("profiles").select("avatar_url").eq("id",x.id).single();M||!(I!=null&&I.avatar_url)?y("avatar.png"):y(I.avatar_url)}N()},[x]),R.useEffect(()=>{const N=async()=>{const{count:M}=await Pe.from("notifications").select("*",{head:!0,count:"exact"}).eq("read",!1);e(M||0)};N();const I=Pe.channel(`notifications_feed_${Date.now()}`).on("postgres_changes",{event:"*",schema:"public",table:"notifications"},N).subscribe();return()=>{I.unsubscribe()}},[]);async function A(N){var V;const I=(V=N.target.files)==null?void 0:V[0];if(!I||!(x!=null&&x.id))return;u(!0);const M=I.name.split(".").pop(),j=`${x.id}-${Date.now()}.${M}`,{error:U}=await Pe.storage.from("avatars").upload(j,I,{upsert:!0});if(U){alert("Upload failed: "+U.message),u(!1);return}const{data:$}=Pe.storage.from("avatars").getPublicUrl(j),q=$.publicUrl,{error:B}=await Pe.from("profiles").update({avatar_url:q}).eq("id",x.id);if(B){alert("Failed to update profile: "+B.message),u(!1);return}y(q),r(!1),u(!1)}return C.jsxs("div",{className:"min-h-screen bg-[#f6f6f6] flex",children:[C.jsx(q9,{}),C.jsxs("div",{className:"flex flex-col flex-1 min-h-screen",style:{marginLeft:X9,transition:"margin .2s cubic-bezier(.4,0,.2,1)"},children:[C.jsxs("header",{className:"w-full flex items-center px-8 py-3 shadow-sm",style:{background:"#f6f6f6",borderBottom:"1.5px solid #edeaf8",minHeight:"64px",zIndex:10},children:[C.jsx("div",{className:"flex-1 text-center cursor-pointer",onClick:()=>b("/dashboard"),children:C.jsx("span",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight text-[#6654b3] select-none",children:"Wonder Kids"})}),C.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[C.jsxs("button",{onClick:()=>b("/notifications"),className:"relative p-2 rounded-xl hover:bg-[#edeaf8] transition","aria-label":"Notifications",style:{marginLeft:"auto"},children:[C.jsx(uE,{className:"w-7 h-7 text-[#6654b3]"}),t>0&&C.jsx("span",{className:"absolute -top-2 -right-1 bg-[#ec4899] text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-extrabold shadow",children:t})]}),C.jsx("button",{className:"ml-1",style:{background:"none"},onClick:()=>r(!0),"aria-label":"Change profile",children:C.jsx("img",{src:h||"avatar.png",alt:"Profile",className:"w-10 h-10 rounded-full border-2 border-[#c5bdf4] shadow object-cover hover:scale-105 transition"})})]})]}),n&&C.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:C.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 max-w-sm w-full flex flex-col items-center",children:[C.jsx("img",{src:h,alt:"Profile preview",className:"w-20 h-20 rounded-full mb-4 border-2 border-[#c5bdf4] shadow object-cover"}),C.jsx("input",{ref:E,type:"file",accept:"image/*",className:"mb-4",onChange:A,disabled:l}),C.jsx("button",{onClick:()=>r(!1),className:"px-5 py-2 rounded-lg bg-[#6654b3] text-white font-bold hover:bg-[#5542a0] transition",disabled:l,children:"Close"})]})}),C.jsx("main",{className:"flex-1 p-0 bg-[#f6f6f6] min-h-[calc(100vh-64px)] transition-all duration-200",children:C.jsx("div",{className:"h-full w-full transition-all",children:C.jsx(HO,{})})})]})]})}function K9({children:t}){return t}function Z9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const Ch=R.forwardRef(Z9);function Q9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const am=R.forwardRef(Q9);function J9({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const eL=R.forwardRef(J9);function tL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const nL=R.forwardRef(tL);function iL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const hE=R.forwardRef(iL);function sL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const gE=R.forwardRef(sL);function rL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const aL=R.forwardRef(rL);function oL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const lL=R.forwardRef(oL);function cL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const mE=R.forwardRef(cL);function uL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const Qm=R.forwardRef(uL);function fL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const om=R.forwardRef(fL);function dL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const hL=R.forwardRef(dL);function gL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const mL=R.forwardRef(gL);function pL({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const so=R.forwardRef(pL);function pE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(n=pE(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Vu(){for(var t,e,n=0,r="",l=arguments.length;n<l;n++)(t=arguments[n])&&(e=pE(t))&&(r&&(r+=" "),r+=e);return r}var xL=Object.defineProperty,yL=(t,e,n)=>e in t?xL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fg=(t,e,n)=>(yL(t,typeof e!="symbol"?e+"":e,n),n);let bL=class{constructor(){fg(this,"current",this.detect()),fg(this,"handoffState","pending"),fg(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},nl=new bL;function Vh(t){var e,n;return nl.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(n=(e=t.current)==null?void 0:e.ownerDocument)!=null?n:document:null:document}function zh(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function na(){let t=[],e={addEventListener(n,r,l,u){return n.addEventListener(r,l,u),e.add(()=>n.removeEventListener(r,l,u))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return zh(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,l){let u=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:l}),this.add(()=>{Object.assign(n.style,{[r]:u})})},group(n){let r=na();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let l of t.splice(r,1))l()}},dispose(){for(let n of t.splice(0))n()}};return e}function Jm(){let[t]=R.useState(na);return R.useEffect(()=>()=>t.dispose(),[t]),t}let Ti=(t,e)=>{nl.isServer?R.useEffect(t,e):R.useLayoutEffect(t,e)};function ul(t){let e=R.useRef(t);return Ti(()=>{e.current=t},[t]),e}let sn=function(t){let e=ul(t);return ot.useCallback((...n)=>e.current(...n),[e])},wL=R.createContext(void 0);function vL(){return R.useContext(wL)}function lm(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function Qr(t,e,...n){if(t in e){let l=e[t];return typeof l=="function"?l(...n):l}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(l=>`"${l}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Qr),r}var Ah=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Ah||{}),to=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(to||{});function Ns(){let t=SL();return R.useCallback(e=>EL({mergeRefs:t,...e}),[t])}function EL({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:l,visible:u=!0,name:h,mergeRefs:y}){y=y??CL;let b=xE(e,t);if(u)return th(b,n,r,h,y);let x=l??0;if(x&2){let{static:E=!1,...A}=b;if(E)return th(A,n,r,h,y)}if(x&1){let{unmount:E=!0,...A}=b;return Qr(E?0:1,{0(){return null},1(){return th({...A,hidden:!0,style:{display:"none"}},n,r,h,y)}})}return th(b,n,r,h,y)}function th(t,e={},n,r,l){let{as:u=n,children:h,refName:y="ref",...b}=dg(t,["unmount","static"]),x=t.ref!==void 0?{[y]:t.ref}:{},E=typeof h=="function"?h(e):h;"className"in b&&b.className&&typeof b.className=="function"&&(b.className=b.className(e)),b["aria-labelledby"]&&b["aria-labelledby"]===b.id&&(b["aria-labelledby"]=void 0);let A={};if(e){let N=!1,I=[];for(let[M,j]of Object.entries(e))typeof j=="boolean"&&(N=!0),j===!0&&I.push(M.replace(/([A-Z])/g,U=>`-${U.toLowerCase()}`));if(N){A["data-headlessui-state"]=I.join(" ");for(let M of I)A[`data-${M}`]=""}}if(u===R.Fragment&&(Object.keys(Uo(b)).length>0||Object.keys(Uo(A)).length>0))if(!R.isValidElement(E)||Array.isArray(E)&&E.length>1){if(Object.keys(Uo(b)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Uo(b)).concat(Object.keys(Uo(A))).map(N=>`  - ${N}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(N=>`  - ${N}`).join(`
`)].join(`
`))}else{let N=E.props,I=N==null?void 0:N.className,M=typeof I=="function"?(...$)=>lm(I(...$),b.className):lm(I,b.className),j=M?{className:M}:{},U=xE(E.props,Uo(dg(b,["ref"])));for(let $ in A)$ in U&&delete A[$];return R.cloneElement(E,Object.assign({},U,A,x,{ref:l(AL(E),x.ref)},j))}return R.createElement(u,Object.assign({},dg(b,["ref"]),u!==R.Fragment&&x,u!==R.Fragment&&A),E)}function SL(){let t=R.useRef([]),e=R.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function CL(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function xE(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let l in r)l.startsWith("on")&&typeof r[l]=="function"?(n[l]!=null||(n[l]=[]),n[l].push(r[l])):e[l]=r[l];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[l=>{var u;return(u=l==null?void 0:l.preventDefault)==null?void 0:u.call(l)}]);for(let r in n)Object.assign(e,{[r](l,...u){let h=n[r];for(let y of h){if((l instanceof Event||(l==null?void 0:l.nativeEvent)instanceof Event)&&l.defaultPrevented)return;y(l,...u)}}});return e}function Xi(t){var e;return Object.assign(R.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function Uo(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function dg(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function AL(t){return ot.version.split(".")[0]>="19"?t.props.ref:t.ref}let TL="span";var Th=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Th||{});function _L(t,e){var n;let{features:r=1,...l}=t,u={ref:e,"aria-hidden":(r&2)===2?!0:(n=l["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Ns()({ourProps:u,theirProps:l,slot:{},defaultTag:TL,name:"Hidden"})}let cm=Xi(_L);function yE(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function ro(t){return yE(t)&&"tagName"in t}function ol(t){return ro(t)&&"accessKey"in t}function no(t){return ro(t)&&"tabIndex"in t}function NL(t){return ro(t)&&"style"in t}function RL(t){return ol(t)&&t.nodeName==="IFRAME"}function OL(t){return ol(t)&&t.nodeName==="INPUT"}let bE=Symbol();function IL(t,e=!0){return Object.assign(t,{[bE]:e})}function br(...t){let e=R.useRef(t);R.useEffect(()=>{e.current=t},[t]);let n=sn(r=>{for(let l of e.current)l!=null&&(typeof l=="function"?l(r):l.current=r)});return t.every(r=>r==null||(r==null?void 0:r[bE]))?void 0:n}let ep=R.createContext(null);ep.displayName="DescriptionContext";function wE(){let t=R.useContext(ep);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,wE),e}return t}function ML(){let[t,e]=R.useState([]);return[t.length>0?t.join(" "):void 0,R.useMemo(()=>function(n){let r=sn(u=>(e(h=>[...h,u]),()=>e(h=>{let y=h.slice(),b=y.indexOf(u);return b!==-1&&y.splice(b,1),y}))),l=R.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return ot.createElement(ep.Provider,{value:l},n.children)},[e])]}let DL="p";function LL(t,e){let n=R.useId(),r=vL(),{id:l=`headlessui-description-${n}`,...u}=t,h=wE(),y=br(e);Ti(()=>h.register(l),[l,h.register]);let b=r||!1,x=R.useMemo(()=>({...h.slot,disabled:b}),[h.slot,b]),E={ref:y,...h.props,id:l};return Ns()({ourProps:E,theirProps:u,slot:x,defaultTag:DL,name:h.name||"Description"})}let kL=Xi(LL),jL=Object.assign(kL,{});var vE=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(vE||{});let BL=R.createContext(()=>{});function PL({value:t,children:e}){return ot.createElement(BL.Provider,{value:t},e)}let EE=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};var UL=Object.defineProperty,FL=(t,e,n)=>e in t?UL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,VL=(t,e,n)=>(FL(t,e+"",n),n),SE=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},bs=(t,e,n)=>(SE(t,e,"read from private field"),n?n.call(t):e.get(t)),hg=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},iw=(t,e,n,r)=>(SE(t,e,"write to private field"),e.set(t,n),n),ur,zu,Hu;let zL=class{constructor(e){hg(this,ur,{}),hg(this,zu,new EE(()=>new Set)),hg(this,Hu,new Set),VL(this,"disposables",na()),iw(this,ur,e)}dispose(){this.disposables.dispose()}get state(){return bs(this,ur)}subscribe(e,n){let r={selector:e,callback:n,current:e(bs(this,ur))};return bs(this,Hu).add(r),this.disposables.add(()=>{bs(this,Hu).delete(r)})}on(e,n){return bs(this,zu).get(e).add(n),this.disposables.add(()=>{bs(this,zu).get(e).delete(n)})}send(e){let n=this.reduce(bs(this,ur),e);if(n!==bs(this,ur)){iw(this,ur,n);for(let r of bs(this,Hu)){let l=r.selector(bs(this,ur));CE(r.current,l)||(r.current=l,r.callback(l))}for(let r of bs(this,zu).get(e.type))r(bs(this,ur),e)}}};ur=new WeakMap,zu=new WeakMap,Hu=new WeakMap;function CE(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:gg(t[Symbol.iterator](),e[Symbol.iterator]()):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?t.size!==e.size?!1:gg(t.entries(),e.entries()):sw(t)&&sw(e)?gg(Object.entries(t)[Symbol.iterator](),Object.entries(e)[Symbol.iterator]()):!1}function gg(t,e){do{let n=t.next(),r=e.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function sw(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||Object.getPrototypeOf(e)===null}var HL=Object.defineProperty,$L=(t,e,n)=>e in t?HL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rw=(t,e,n)=>($L(t,typeof e!="symbol"?e+"":e,n),n),GL=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(GL||{});let qL={0(t,e){let n=e.id,r=t.stack,l=t.stack.indexOf(n);if(l!==-1){let u=t.stack.slice();return u.splice(l,1),u.push(n),r=u,{...t,stack:r}}return{...t,stack:[...t.stack,n]}},1(t,e){let n=e.id,r=t.stack.indexOf(n);if(r===-1)return t;let l=t.stack.slice();return l.splice(r,1),{...t,stack:l}}},YL=class AE extends zL{constructor(){super(...arguments),rw(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),rw(this,"selectors",{isTop:(e,n)=>e.stack[e.stack.length-1]===n,inStack:(e,n)=>e.stack.includes(n)})}static new(){return new AE({stack:[]})}reduce(e,n){return Qr(n.type,qL,e,n)}};const TE=new EE(()=>YL.new());var mg={exports:{}},pg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw;function XL(){if(aw)return pg;aw=1;var t=jh();function e(b,x){return b===x&&(b!==0||1/b===1/x)||b!==b&&x!==x}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,l=t.useRef,u=t.useEffect,h=t.useMemo,y=t.useDebugValue;return pg.useSyncExternalStoreWithSelector=function(b,x,E,A,N){var I=l(null);if(I.current===null){var M={hasValue:!1,value:null};I.current=M}else M=I.current;I=h(function(){function U(z){if(!$){if($=!0,q=z,z=A(z),N!==void 0&&M.hasValue){var ee=M.value;if(N(ee,z))return B=ee}return B=z}if(ee=B,n(q,z))return ee;var X=A(z);return N!==void 0&&N(ee,X)?(q=z,ee):(q=z,B=X)}var $=!1,q,B,V=E===void 0?null:E;return[function(){return U(x())},V===null?void 0:function(){return U(V())}]},[x,E,A,N]);var j=r(b,I[0],I[1]);return u(function(){M.hasValue=!0,M.value=j},[j]),y(j),j},pg}var ow;function WL(){return ow||(ow=1,mg.exports=XL()),mg.exports}var KL=WL();function _E(t,e,n=CE){return KL.useSyncExternalStoreWithSelector(sn(r=>t.subscribe(ZL,r)),sn(()=>t.state),sn(()=>t.state),sn(e),n)}function ZL(t){return t}function Nf(t,e){let n=R.useId(),r=TE.get(e),[l,u]=_E(r,R.useCallback(h=>[r.selectors.isTop(h,n),r.selectors.inStack(h,n)],[r,n]));return Ti(()=>{if(t)return r.actions.push(n),()=>r.actions.pop(n)},[r,t,n]),t?u?l:!0:!1}let um=new Map,ef=new Map;function lw(t){var e;let n=(e=ef.get(t))!=null?e:0;return ef.set(t,n+1),n!==0?()=>cw(t):(um.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>cw(t))}function cw(t){var e;let n=(e=ef.get(t))!=null?e:1;if(n===1?ef.delete(t):ef.set(t,n-1),n!==1)return;let r=um.get(t);r&&(r["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",r["aria-hidden"]),t.inert=r.inert,um.delete(t))}function QL(t,{allowed:e,disallowed:n}={}){let r=Nf(t,"inert-others");Ti(()=>{var l,u;if(!r)return;let h=na();for(let b of(l=n==null?void 0:n())!=null?l:[])b&&h.add(lw(b));let y=(u=e==null?void 0:e())!=null?u:[];for(let b of y){if(!b)continue;let x=Vh(b);if(!x)continue;let E=b.parentElement;for(;E&&E!==x.body;){for(let A of E.children)y.some(N=>A.contains(N))||h.add(lw(A));E=E.parentElement}}return h.dispose},[r,e,n])}function JL(t,e,n){let r=ul(l=>{let u=l.getBoundingClientRect();u.x===0&&u.y===0&&u.width===0&&u.height===0&&n()});R.useEffect(()=>{if(!t)return;let l=e===null?null:ol(e)?e:e.current;if(!l)return;let u=na();if(typeof ResizeObserver<"u"){let h=new ResizeObserver(()=>r.current(l));h.observe(l),u.add(()=>h.disconnect())}if(typeof IntersectionObserver<"u"){let h=new IntersectionObserver(()=>r.current(l));h.observe(l),u.add(()=>h.disconnect())}return()=>u.dispose()},[e,r,t])}let _h=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),ek=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var qr=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(qr||{}),fm=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(fm||{}),tk=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(tk||{});function nk(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(_h)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function ik(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(ek)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var NE=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(NE||{});function sk(t,e=0){var n;return t===((n=Vh(t))==null?void 0:n.body)?!1:Qr(e,{0(){return t.matches(_h)},1(){let r=t;for(;r!==null;){if(r.matches(_h))return!0;r=r.parentElement}return!1}})}var rk=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(rk||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Wr(t){t==null||t.focus({preventScroll:!0})}let ak=["textarea","input"].join(",");function ok(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,ak))!=null?n:!1}function lk(t,e=n=>n){return t.slice().sort((n,r)=>{let l=e(n),u=e(r);if(l===null||u===null)return 0;let h=l.compareDocumentPosition(u);return h&Node.DOCUMENT_POSITION_FOLLOWING?-1:h&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function tf(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:l=[]}={}){let u=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,h=Array.isArray(t)?n?lk(t):t:e&64?ik(t):nk(t);l.length>0&&h.length>1&&(h=h.filter(I=>!l.some(M=>M!=null&&"current"in M?(M==null?void 0:M.current)===I:M===I))),r=r??u.activeElement;let y=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),b=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,h.indexOf(r))-1;if(e&4)return Math.max(0,h.indexOf(r))+1;if(e&8)return h.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),x=e&32?{preventScroll:!0}:{},E=0,A=h.length,N;do{if(E>=A||E+A<=0)return 0;let I=b+E;if(e&16)I=(I+A)%A;else{if(I<0)return 3;if(I>=A)return 1}N=h[I],N==null||N.focus(x),E+=y}while(N!==u.activeElement);return e&6&&ok(N)&&N.select(),2}function RE(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function ck(){return/Android/gi.test(window.navigator.userAgent)}function uw(){return RE()||ck()}function nh(t,e,n,r){let l=ul(n);R.useEffect(()=>{if(!t)return;function u(h){l.current(h)}return document.addEventListener(e,u,r),()=>document.removeEventListener(e,u,r)},[t,e,r])}function OE(t,e,n,r){let l=ul(n);R.useEffect(()=>{if(!t)return;function u(h){l.current(h)}return window.addEventListener(e,u,r),()=>window.removeEventListener(e,u,r)},[t,e,r])}const fw=30;function uk(t,e,n){let r=ul(n),l=R.useCallback(function(y,b){if(y.defaultPrevented)return;let x=b(y);if(x===null||!x.getRootNode().contains(x)||!x.isConnected)return;let E=function A(N){return typeof N=="function"?A(N()):Array.isArray(N)||N instanceof Set?N:[N]}(e);for(let A of E)if(A!==null&&(A.contains(x)||y.composed&&y.composedPath().includes(A)))return;return!sk(x,NE.Loose)&&x.tabIndex!==-1&&y.preventDefault(),r.current(y,x)},[r,e]),u=R.useRef(null);nh(t,"pointerdown",y=>{var b,x;uw()||(u.current=((x=(b=y.composedPath)==null?void 0:b.call(y))==null?void 0:x[0])||y.target)},!0),nh(t,"pointerup",y=>{if(uw()||!u.current)return;let b=u.current;return u.current=null,l(y,()=>b)},!0);let h=R.useRef({x:0,y:0});nh(t,"touchstart",y=>{h.current.x=y.touches[0].clientX,h.current.y=y.touches[0].clientY},!0),nh(t,"touchend",y=>{let b={x:y.changedTouches[0].clientX,y:y.changedTouches[0].clientY};if(!(Math.abs(b.x-h.current.x)>=fw||Math.abs(b.y-h.current.y)>=fw))return l(y,()=>no(y.target)?y.target:null)},!0),OE(t,"blur",y=>l(y,()=>RL(window.document.activeElement)?window.document.activeElement:null),!0)}function Hh(...t){return R.useMemo(()=>Vh(...t),[...t])}function IE(t,e,n,r){let l=ul(n);R.useEffect(()=>{t=t??window;function u(h){l.current(h)}return t.addEventListener(e,u,r),()=>t.removeEventListener(e,u,r)},[t,e,r])}function fk(t){return R.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function dk(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(l){return r.add(l),()=>r.delete(l)},dispatch(l,...u){let h=e[l].call(n,...u);h&&(n=h,r.forEach(y=>y()))}}}function hk(){let t;return{before({doc:e}){var n;let r=e.documentElement,l=(n=e.defaultView)!=null?n:window;t=Math.max(0,l.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,l=Math.max(0,r.clientWidth-r.offsetWidth),u=Math.max(0,t-l);n.style(r,"paddingRight",`${u}px`)}}}function gk(){return RE()?{before({doc:t,d:e,meta:n}){function r(l){return n.containers.flatMap(u=>u()).some(u=>u.contains(l))}e.microTask(()=>{var l;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let y=na();y.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>y.dispose()))}let u=(l=window.scrollY)!=null?l:window.pageYOffset,h=null;e.addEventListener(t,"click",y=>{if(no(y.target))try{let b=y.target.closest("a");if(!b)return;let{hash:x}=new URL(b.href),E=t.querySelector(x);no(E)&&!r(E)&&(h=E)}catch{}},!0),e.addEventListener(t,"touchstart",y=>{if(no(y.target)&&NL(y.target))if(r(y.target)){let b=y.target;for(;b.parentElement&&r(b.parentElement);)b=b.parentElement;e.style(b,"overscrollBehavior","contain")}else e.style(y.target,"touchAction","none")}),e.addEventListener(t,"touchmove",y=>{if(no(y.target)){if(OL(y.target))return;if(r(y.target)){let b=y.target;for(;b.parentElement&&b.dataset.headlessuiPortal!==""&&!(b.scrollHeight>b.clientHeight||b.scrollWidth>b.clientWidth);)b=b.parentElement;b.dataset.headlessuiPortal===""&&y.preventDefault()}else y.preventDefault()}},{passive:!1}),e.add(()=>{var y;let b=(y=window.scrollY)!=null?y:window.pageYOffset;u!==b&&window.scrollTo(0,u),h&&h.isConnected&&(h.scrollIntoView({block:"nearest"}),h=null)})})}}:{}}function mk(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function pk(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let Ho=dk(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:na(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:pk(n)},l=[gk(),hk(),mk()];l.forEach(({before:u})=>u==null?void 0:u(r)),l.forEach(({after:u})=>u==null?void 0:u(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Ho.subscribe(()=>{let t=Ho.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",l=n.count!==0;(l&&!r||!l&&r)&&Ho.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Ho.dispatch("TEARDOWN",n)}});function xk(t,e,n=()=>({containers:[]})){let r=fk(Ho),l=e?r.get(e):void 0,u=l?l.count>0:!1;return Ti(()=>{if(!(!e||!t))return Ho.dispatch("PUSH",e,n),()=>Ho.dispatch("POP",e,n)},[t,e]),u}function yk(t,e,n=()=>[document.body]){let r=Nf(t,"scroll-lock");xk(r,e,l=>{var u;return{containers:[...(u=l.containers)!=null?u:[],n]}})}function bk(t=0){let[e,n]=R.useState(t),r=R.useCallback(b=>n(b),[e]),l=R.useCallback(b=>n(x=>x|b),[e]),u=R.useCallback(b=>(e&b)===b,[e]),h=R.useCallback(b=>n(x=>x&~b),[n]),y=R.useCallback(b=>n(x=>x^b),[n]);return{flags:e,setFlag:r,addFlag:l,hasFlag:u,removeFlag:h,toggleFlag:y}}var wk={},dw,hw;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((dw=process==null?void 0:wk)==null?void 0:dw.NODE_ENV)==="test"&&typeof((hw=Element==null?void 0:Element.prototype)==null?void 0:hw.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var vk=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(vk||{});function Ek(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function Sk(t,e,n,r){let[l,u]=R.useState(n),{hasFlag:h,addFlag:y,removeFlag:b}=bk(t&&l?3:0),x=R.useRef(!1),E=R.useRef(!1),A=Jm();return Ti(()=>{var N;if(t){if(n&&u(!0),!e){n&&y(3);return}return(N=r==null?void 0:r.start)==null||N.call(r,n),Ck(e,{inFlight:x,prepare(){E.current?E.current=!1:E.current=x.current,x.current=!0,!E.current&&(n?(y(3),b(4)):(y(4),b(2)))},run(){E.current?n?(b(3),y(4)):(b(4),y(3)):n?b(1):y(1)},done(){var I;E.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(x.current=!1,b(7),n||u(!1),(I=r==null?void 0:r.end)==null||I.call(r,n))}})}},[t,n,e,A]),t?[l,{closed:h(1),enter:h(2),leave:h(4),transition:h(2)||h(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Ck(t,{prepare:e,run:n,done:r,inFlight:l}){let u=na();return Tk(t,{prepare:e,inFlight:l}),u.nextFrame(()=>{n(),u.requestAnimationFrame(()=>{u.add(Ak(t,r))})}),u.dispose}function Ak(t,e){var n,r;let l=na();if(!t)return l.dispose;let u=!1;l.add(()=>{u=!0});let h=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(y=>y instanceof CSSTransition))!=null?r:[];return h.length===0?(e(),l.dispose):(Promise.allSettled(h.map(y=>y.finished)).then(()=>{u||e()}),l.dispose)}function Tk(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function tp(t,e){let n=R.useRef([]),r=sn(t);R.useEffect(()=>{let l=[...n.current];for(let[u,h]of e.entries())if(n.current[u]!==h){let y=r(e,l);return n.current=e,y}},[r,...e])}let $h=R.createContext(null);$h.displayName="OpenClosedContext";var $s=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))($s||{});function Gh(){return R.useContext($h)}function _k({value:t,children:e}){return ot.createElement($h.Provider,{value:t},e)}function Nk({children:t}){return ot.createElement($h.Provider,{value:null},t)}function Rk(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let $a=[];Rk(()=>{function t(e){if(!no(e.target)||e.target===document.body||$a[0]===e.target)return;let n=e.target;n=n.closest(_h),$a.unshift(n??e.target),$a=$a.filter(r=>r!=null&&r.isConnected),$a.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function ME(t){let e=sn(t),n=R.useRef(!1);R.useEffect(()=>(n.current=!1,()=>{n.current=!0,zh(()=>{n.current&&e()})}),[e])}function Ok(){let t=typeof document>"u";return"useSyncExternalStore"in eb?(e=>e.useSyncExternalStore)(eb)(()=>()=>{},()=>!1,()=>!t):!1}function Rf(){let t=Ok(),[e,n]=R.useState(nl.isHandoffComplete);return e&&nl.isHandoffComplete===!1&&n(!1),R.useEffect(()=>{e!==!0&&n(!0)},[e]),R.useEffect(()=>nl.handoff(),[]),t?!1:e}let DE=R.createContext(!1);function Ik(){return R.useContext(DE)}function gw(t){return ot.createElement(DE.Provider,{value:t.force},t.children)}function Mk(t){let e=Ik(),n=R.useContext(kE),[r,l]=R.useState(()=>{var u;if(!e&&n!==null)return(u=n.current)!=null?u:null;if(nl.isServer)return null;let h=t==null?void 0:t.getElementById("headlessui-portal-root");if(h)return h;if(t===null)return null;let y=t.createElement("div");return y.setAttribute("id","headlessui-portal-root"),t.body.appendChild(y)});return R.useEffect(()=>{r!==null&&(t!=null&&t.body.contains(r)||t==null||t.body.appendChild(r))},[r,t]),R.useEffect(()=>{e||n!==null&&l(n.current)},[n,l,e]),r}let LE=R.Fragment,Dk=Xi(function(t,e){let{ownerDocument:n=null,...r}=t,l=R.useRef(null),u=br(IL(I=>{l.current=I}),e),h=Hh(l),y=n??h,b=Mk(y),[x]=R.useState(()=>{var I;return nl.isServer?null:(I=y==null?void 0:y.createElement("div"))!=null?I:null}),E=R.useContext(dm),A=Rf();Ti(()=>{!b||!x||b.contains(x)||(x.setAttribute("data-headlessui-portal",""),b.appendChild(x))},[b,x]),Ti(()=>{if(x&&E)return E.register(x)},[E,x]),ME(()=>{var I;!b||!x||(yE(x)&&b.contains(x)&&b.removeChild(x),b.childNodes.length<=0&&((I=b.parentElement)==null||I.removeChild(b)))});let N=Ns();return A?!b||!x?null:AI.createPortal(N({ourProps:{ref:u},theirProps:r,slot:{},defaultTag:LE,name:"Portal"}),x):null});function Lk(t,e){let n=br(e),{enabled:r=!0,ownerDocument:l,...u}=t,h=Ns();return r?ot.createElement(Dk,{...u,ownerDocument:l,ref:n}):h({ourProps:{ref:n},theirProps:u,slot:{},defaultTag:LE,name:"Portal"})}let kk=R.Fragment,kE=R.createContext(null);function jk(t,e){let{target:n,...r}=t,l={ref:br(e)},u=Ns();return ot.createElement(kE.Provider,{value:n},u({ourProps:l,theirProps:r,defaultTag:kk,name:"Popover.Group"}))}let dm=R.createContext(null);function Bk(){let t=R.useContext(dm),e=R.useRef([]),n=sn(u=>(e.current.push(u),t&&t.register(u),()=>r(u))),r=sn(u=>{let h=e.current.indexOf(u);h!==-1&&e.current.splice(h,1),t&&t.unregister(u)}),l=R.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,R.useMemo(()=>function({children:u}){return ot.createElement(dm.Provider,{value:l},u)},[l])]}let Pk=Xi(Lk),jE=Xi(jk),Uk=Object.assign(Pk,{Group:jE});function Fk(t,e=typeof document<"u"?document.defaultView:null,n){let r=Nf(t,"escape");IE(e,"keydown",l=>{r&&(l.defaultPrevented||l.key===vE.Escape&&n(l))})}function Vk(){var t;let[e]=R.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=R.useState((t=e==null?void 0:e.matches)!=null?t:!1);return Ti(()=>{if(!e)return;function l(u){r(u.matches)}return e.addEventListener("change",l),()=>e.removeEventListener("change",l)},[e]),n}function zk({defaultContainers:t=[],portals:e,mainTreeNode:n}={}){let r=Hh(n),l=sn(()=>{var u,h;let y=[];for(let b of t)b!==null&&(ro(b)?y.push(b):"current"in b&&ro(b.current)&&y.push(b.current));if(e!=null&&e.current)for(let b of e.current)y.push(b);for(let b of(u=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?u:[])b!==document.body&&b!==document.head&&ro(b)&&b.id!=="headlessui-portal-root"&&(n&&(b.contains(n)||b.contains((h=n==null?void 0:n.getRootNode())==null?void 0:h.host))||y.some(x=>b.contains(x))||y.push(b));return y});return{resolveContainers:l,contains:sn(u=>l().some(h=>h.contains(u)))}}let BE=R.createContext(null);function mw({children:t,node:e}){let[n,r]=R.useState(null),l=PE(e??n);return ot.createElement(BE.Provider,{value:l},t,l===null&&ot.createElement(cm,{features:Th.Hidden,ref:u=>{var h,y;if(u){for(let b of(y=(h=Vh(u))==null?void 0:h.querySelectorAll("html > *, body > *"))!=null?y:[])if(b!==document.body&&b!==document.head&&ro(b)&&b!=null&&b.contains(u)){r(b);break}}}}))}function PE(t=null){var e;return(e=R.useContext(BE))!=null?e:t}function np(){let t=R.useRef(!1);return Ti(()=>(t.current=!0,()=>{t.current=!1}),[]),t}var $u=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))($u||{});function Hk(){let t=R.useRef(0);return OE(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function UE(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)ro(n.current)&&e.add(n.current);return e}let $k="div";var zo=(t=>(t[t.None=0]="None",t[t.InitialFocus=1]="InitialFocus",t[t.TabLock=2]="TabLock",t[t.FocusLock=4]="FocusLock",t[t.RestoreFocus=8]="RestoreFocus",t[t.AutoFocus=16]="AutoFocus",t))(zo||{});function Gk(t,e){let n=R.useRef(null),r=br(n,e),{initialFocus:l,initialFocusFallback:u,containers:h,features:y=15,...b}=t;Rf()||(y=0);let x=Hh(n);Wk(y,{ownerDocument:x});let E=Kk(y,{ownerDocument:x,container:n,initialFocus:l,initialFocusFallback:u});Zk(y,{ownerDocument:x,container:n,containers:h,previousActiveElement:E});let A=Hk(),N=sn(q=>{if(!ol(n.current))return;let B=n.current;(V=>V())(()=>{Qr(A.current,{[$u.Forwards]:()=>{tf(B,qr.First,{skipElements:[q.relatedTarget,u]})},[$u.Backwards]:()=>{tf(B,qr.Last,{skipElements:[q.relatedTarget,u]})}})})}),I=Nf(!!(y&2),"focus-trap#tab-lock"),M=Jm(),j=R.useRef(!1),U={ref:r,onKeyDown(q){q.key=="Tab"&&(j.current=!0,M.requestAnimationFrame(()=>{j.current=!1}))},onBlur(q){if(!(y&4))return;let B=UE(h);ol(n.current)&&B.add(n.current);let V=q.relatedTarget;no(V)&&V.dataset.headlessuiFocusGuard!=="true"&&(FE(B,V)||(j.current?tf(n.current,Qr(A.current,{[$u.Forwards]:()=>qr.Next,[$u.Backwards]:()=>qr.Previous})|qr.WrapAround,{relativeTo:q.target}):no(q.target)&&Wr(q.target)))}},$=Ns();return ot.createElement(ot.Fragment,null,I&&ot.createElement(cm,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:N,features:Th.Focusable}),$({ourProps:U,theirProps:b,defaultTag:$k,name:"FocusTrap"}),I&&ot.createElement(cm,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:N,features:Th.Focusable}))}let qk=Xi(Gk),Yk=Object.assign(qk,{features:zo});function Xk(t=!0){let e=R.useRef($a.slice());return tp(([n],[r])=>{r===!0&&n===!1&&zh(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=$a.slice())},[t,$a,e]),sn(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function Wk(t,{ownerDocument:e}){let n=!!(t&8),r=Xk(n);tp(()=>{n||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&Wr(r())},[n]),ME(()=>{n&&Wr(r())})}function Kk(t,{ownerDocument:e,container:n,initialFocus:r,initialFocusFallback:l}){let u=R.useRef(null),h=Nf(!!(t&1),"focus-trap#initial-focus"),y=np();return tp(()=>{if(t===0)return;if(!h){l!=null&&l.current&&Wr(l.current);return}let b=n.current;b&&zh(()=>{if(!y.current)return;let x=e==null?void 0:e.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===x){u.current=x;return}}else if(b.contains(x)){u.current=x;return}if(r!=null&&r.current)Wr(r.current);else{if(t&16){if(tf(b,qr.First|qr.AutoFocus)!==fm.Error)return}else if(tf(b,qr.First)!==fm.Error)return;if(l!=null&&l.current&&(Wr(l.current),(e==null?void 0:e.activeElement)===l.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}u.current=e==null?void 0:e.activeElement})},[l,h,t]),u}function Zk(t,{ownerDocument:e,container:n,containers:r,previousActiveElement:l}){let u=np(),h=!!(t&4);IE(e==null?void 0:e.defaultView,"focus",y=>{if(!h||!u.current)return;let b=UE(r);ol(n.current)&&b.add(n.current);let x=l.current;if(!x)return;let E=y.target;ol(E)?FE(b,E)?(l.current=E,Wr(E)):(y.preventDefault(),y.stopPropagation(),Wr(x)):Wr(l.current)},!0)}function FE(t,e){for(let n of t)if(n.contains(e))return!0;return!1}function VE(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:HE)!==R.Fragment||ot.Children.count(t.children)===1}let qh=R.createContext(null);qh.displayName="TransitionContext";var Qk=(t=>(t.Visible="visible",t.Hidden="hidden",t))(Qk||{});function Jk(){let t=R.useContext(qh);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function ej(){let t=R.useContext(Yh);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let Yh=R.createContext(null);Yh.displayName="NestingContext";function Xh(t){return"children"in t?Xh(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function zE(t,e){let n=ul(t),r=R.useRef([]),l=np(),u=Jm(),h=sn((I,M=to.Hidden)=>{let j=r.current.findIndex(({el:U})=>U===I);j!==-1&&(Qr(M,{[to.Unmount](){r.current.splice(j,1)},[to.Hidden](){r.current[j].state="hidden"}}),u.microTask(()=>{var U;!Xh(r)&&l.current&&((U=n.current)==null||U.call(n))}))}),y=sn(I=>{let M=r.current.find(({el:j})=>j===I);return M?M.state!=="visible"&&(M.state="visible"):r.current.push({el:I,state:"visible"}),()=>h(I,to.Unmount)}),b=R.useRef([]),x=R.useRef(Promise.resolve()),E=R.useRef({enter:[],leave:[]}),A=sn((I,M,j)=>{b.current.splice(0),e&&(e.chains.current[M]=e.chains.current[M].filter(([U])=>U!==I)),e==null||e.chains.current[M].push([I,new Promise(U=>{b.current.push(U)})]),e==null||e.chains.current[M].push([I,new Promise(U=>{Promise.all(E.current[M].map(([$,q])=>q)).then(()=>U())})]),M==="enter"?x.current=x.current.then(()=>e==null?void 0:e.wait.current).then(()=>j(M)):j(M)}),N=sn((I,M,j)=>{Promise.all(E.current[M].splice(0).map(([U,$])=>$)).then(()=>{var U;(U=b.current.shift())==null||U()}).then(()=>j(M))});return R.useMemo(()=>({children:r,register:y,unregister:h,onStart:A,onStop:N,wait:x,chains:E}),[y,h,r,A,N,E,x])}let HE=R.Fragment,$E=Ah.RenderStrategy;function tj(t,e){var n,r;let{transition:l=!0,beforeEnter:u,afterEnter:h,beforeLeave:y,afterLeave:b,enter:x,enterFrom:E,enterTo:A,entered:N,leave:I,leaveFrom:M,leaveTo:j,...U}=t,[$,q]=R.useState(null),B=R.useRef(null),V=VE(t),z=br(...V?[B,e,q]:e===null?[]:[e]),ee=(n=U.unmount)==null||n?to.Unmount:to.Hidden,{show:X,appear:ae,initial:Y}=Jk(),[be,Te]=R.useState(X?"visible":"hidden"),ve=ej(),{register:le,unregister:ke}=ve;Ti(()=>le(B),[le,B]),Ti(()=>{if(ee===to.Hidden&&B.current){if(X&&be!=="visible"){Te("visible");return}return Qr(be,{hidden:()=>ke(B),visible:()=>le(B)})}},[be,B,le,ke,X,ee]);let ie=Rf();Ti(()=>{if(V&&ie&&be==="visible"&&B.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[B,be,ie,V]);let se=Y&&!ae,fe=ae&&X&&Y,Ie=R.useRef(!1),Ue=zE(()=>{Ie.current||(Te("hidden"),ke(B))},ve),W=sn(ht=>{Ie.current=!0;let Ge=ht?"enter":"leave";Ue.onStart(B,Ge,It=>{It==="enter"?u==null||u():It==="leave"&&(y==null||y())})}),Z=sn(ht=>{let Ge=ht?"enter":"leave";Ie.current=!1,Ue.onStop(B,Ge,It=>{It==="enter"?h==null||h():It==="leave"&&(b==null||b())}),Ge==="leave"&&!Xh(Ue)&&(Te("hidden"),ke(B))});R.useEffect(()=>{V&&l||(W(X),Z(X))},[X,V,l]);let ce=!(!l||!V||!ie||se),[,oe]=Sk(ce,$,X,{start:W,end:Z}),Oe=Uo({ref:z,className:((r=lm(U.className,fe&&x,fe&&E,oe.enter&&x,oe.enter&&oe.closed&&E,oe.enter&&!oe.closed&&A,oe.leave&&I,oe.leave&&!oe.closed&&M,oe.leave&&oe.closed&&j,!oe.transition&&X&&N))==null?void 0:r.trim())||void 0,...Ek(oe)}),qe=0;be==="visible"&&(qe|=$s.Open),be==="hidden"&&(qe|=$s.Closed),X&&be==="hidden"&&(qe|=$s.Opening),!X&&be==="visible"&&(qe|=$s.Closing);let we=Ns();return ot.createElement(Yh.Provider,{value:Ue},ot.createElement(_k,{value:qe},we({ourProps:Oe,theirProps:U,defaultTag:HE,features:$E,visible:be==="visible",name:"Transition.Child"})))}function nj(t,e){let{show:n,appear:r=!1,unmount:l=!0,...u}=t,h=R.useRef(null),y=VE(t),b=br(...y?[h,e]:e===null?[]:[e]);Rf();let x=Gh();if(n===void 0&&x!==null&&(n=(x&$s.Open)===$s.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[E,A]=R.useState(n?"visible":"hidden"),N=zE(()=>{n||A("hidden")}),[I,M]=R.useState(!0),j=R.useRef([n]);Ti(()=>{I!==!1&&j.current[j.current.length-1]!==n&&(j.current.push(n),M(!1))},[j,n]);let U=R.useMemo(()=>({show:n,appear:r,initial:I}),[n,r,I]);Ti(()=>{n?A("visible"):!Xh(N)&&h.current!==null&&A("hidden")},[n,N]);let $={unmount:l},q=sn(()=>{var z;I&&M(!1),(z=t.beforeEnter)==null||z.call(t)}),B=sn(()=>{var z;I&&M(!1),(z=t.beforeLeave)==null||z.call(t)}),V=Ns();return ot.createElement(Yh.Provider,{value:N},ot.createElement(qh.Provider,{value:U},V({ourProps:{...$,as:R.Fragment,children:ot.createElement(GE,{ref:b,...$,...u,beforeEnter:q,beforeLeave:B})},theirProps:{},defaultTag:R.Fragment,features:$E,visible:E==="visible",name:"Transition"})))}function ij(t,e){let n=R.useContext(qh)!==null,r=Gh()!==null;return ot.createElement(ot.Fragment,null,!n&&r?ot.createElement(hm,{ref:e,...t}):ot.createElement(GE,{ref:e,...t}))}let hm=Xi(nj),GE=Xi(tj),ip=Xi(ij),sj=Object.assign(hm,{Child:ip,Root:hm});var rj=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(rj||{}),aj=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(aj||{});let oj={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},sp=R.createContext(null);sp.displayName="DialogContext";function Wh(t){let e=R.useContext(sp);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Wh),n}return e}function lj(t,e){return Qr(e.type,oj,t,e)}let pw=Xi(function(t,e){let n=R.useId(),{id:r=`headlessui-dialog-${n}`,open:l,onClose:u,initialFocus:h,role:y="dialog",autoFocus:b=!0,__demoMode:x=!1,unmount:E=!1,...A}=t,N=R.useRef(!1);y=function(){return y==="dialog"||y==="alertdialog"?y:(N.current||(N.current=!0,console.warn(`Invalid role [${y}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let I=Gh();l===void 0&&I!==null&&(l=(I&$s.Open)===$s.Open);let M=R.useRef(null),j=br(M,e),U=Hh(M),$=l?0:1,[q,B]=R.useReducer(lj,{titleId:null,descriptionId:null,panelRef:R.createRef()}),V=sn(()=>u(!1)),z=sn(oe=>B({type:0,id:oe})),ee=Rf()?$===0:!1,[X,ae]=Bk(),Y={get current(){var oe;return(oe=q.panelRef.current)!=null?oe:M.current}},be=PE(),{resolveContainers:Te}=zk({mainTreeNode:be,portals:X,defaultContainers:[Y]}),ve=I!==null?(I&$s.Closing)===$s.Closing:!1;QL(x||ve?!1:ee,{allowed:sn(()=>{var oe,Oe;return[(Oe=(oe=M.current)==null?void 0:oe.closest("[data-headlessui-portal]"))!=null?Oe:null]}),disallowed:sn(()=>{var oe;return[(oe=be==null?void 0:be.closest("body > *:not(#headlessui-portal-root)"))!=null?oe:null]})});let le=TE.get(null);Ti(()=>{if(ee)return le.actions.push(r),()=>le.actions.pop(r)},[le,r,ee]);let ke=_E(le,R.useCallback(oe=>le.selectors.isTop(oe,r),[le,r]));uk(ke,Te,oe=>{oe.preventDefault(),V()}),Fk(ke,U==null?void 0:U.defaultView,oe=>{oe.preventDefault(),oe.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),V()}),yk(x||ve?!1:ee,U,Te),JL(ee,M,V);let[ie,se]=ML(),fe=R.useMemo(()=>[{dialogState:$,close:V,setTitleId:z,unmount:E},q],[$,q,V,z,E]),Ie=R.useMemo(()=>({open:$===0}),[$]),Ue={ref:j,id:r,role:y,tabIndex:-1,"aria-modal":x?void 0:$===0?!0:void 0,"aria-labelledby":q.titleId,"aria-describedby":ie,unmount:E},W=!Vk(),Z=zo.None;ee&&!x&&(Z|=zo.RestoreFocus,Z|=zo.TabLock,b&&(Z|=zo.AutoFocus),W&&(Z|=zo.InitialFocus));let ce=Ns();return ot.createElement(Nk,null,ot.createElement(gw,{force:!0},ot.createElement(Uk,null,ot.createElement(sp.Provider,{value:fe},ot.createElement(jE,{target:M},ot.createElement(gw,{force:!1},ot.createElement(se,{slot:Ie},ot.createElement(ae,null,ot.createElement(Yk,{initialFocus:h,initialFocusFallback:M,containers:Te,features:Z},ot.createElement(PL,{value:V},ce({ourProps:Ue,theirProps:A,slot:Ie,defaultTag:cj,features:uj,visible:$===0,name:"Dialog"})))))))))))}),cj="div",uj=Ah.RenderStrategy|Ah.Static;function fj(t,e){let{transition:n=!1,open:r,...l}=t,u=Gh(),h=t.hasOwnProperty("open")||u!==null,y=t.hasOwnProperty("onClose");if(!h&&!y)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!h)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!y)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!u&&typeof t.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${t.open}`);if(typeof t.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${t.onClose}`);return(r!==void 0||n)&&!l.static?ot.createElement(mw,null,ot.createElement(sj,{show:r,transition:n,unmount:l.unmount},ot.createElement(pw,{ref:e,...l}))):ot.createElement(mw,null,ot.createElement(pw,{ref:e,open:r,...l}))}let dj="div";function hj(t,e){let n=R.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:l=!1,...u}=t,[{dialogState:h,unmount:y},b]=Wh("Dialog.Panel"),x=br(e,b.panelRef),E=R.useMemo(()=>({open:h===0}),[h]),A=sn(U=>{U.stopPropagation()}),N={ref:x,id:r,onClick:A},I=l?ip:R.Fragment,M=l?{unmount:y}:{},j=Ns();return ot.createElement(I,{...M},j({ourProps:N,theirProps:u,slot:E,defaultTag:dj,name:"Dialog.Panel"}))}let gj="div";function mj(t,e){let{transition:n=!1,...r}=t,[{dialogState:l,unmount:u}]=Wh("Dialog.Backdrop"),h=R.useMemo(()=>({open:l===0}),[l]),y={ref:e,"aria-hidden":!0},b=n?ip:R.Fragment,x=n?{unmount:u}:{},E=Ns();return ot.createElement(b,{...x},E({ourProps:y,theirProps:r,slot:h,defaultTag:gj,name:"Dialog.Backdrop"}))}let pj="h2";function xj(t,e){let n=R.useId(),{id:r=`headlessui-dialog-title-${n}`,...l}=t,[{dialogState:u,setTitleId:h}]=Wh("Dialog.Title"),y=br(e);R.useEffect(()=>(h(r),()=>h(null)),[r,h]);let b=R.useMemo(()=>({open:u===0}),[u]),x={ref:y,id:r};return Ns()({ourProps:x,theirProps:l,slot:b,defaultTag:pj,name:"Dialog.Title"})}let yj=Xi(fj),bj=Xi(hj);Xi(mj);let wj=Xi(xj),Ss=Object.assign(yj,{Panel:bj,Title:wj,Description:jL});function vj(t,e,n,r){var h,y,b;let l=(h=t==null?void 0:t.course_limits)==null?void 0:h[e];if(!l&&Array.isArray(t==null?void 0:t.purchased_packages)){const x=t.purchased_packages.find(E=>E.course_id===e);l=x==null?void 0:x.hours}return!l&&((b=(y=r==null?void 0:r[e])==null?void 0:y.hour_packages)!=null&&b[0])&&(l=r[e].hour_packages[0].hours),l?n.filter(x=>x.course_id===e).length<l:!1}function Ej(t){return t.startsWith("th")?"":"Cannot check in for more hours than purchased for this course."}const oi="#6654b3",xw="#f6f6f6",Sj={new_application:{labelKey:"newApplications",color:oi,text:"#fff"},renewal:{labelKey:"renewals",color:"#e6e1f7",text:oi},edit:{labelKey:"courseChanges",color:"#edeaf7",text:oi},cancel:{labelKey:"cancellations",color:"#fce6e6",text:"#b03535"}};function Cj({urls:t,open:e,onClose:n}){const{t:r}=zn();return C.jsx(Ss,{open:e,onClose:n,className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:C.jsxs(Ss.Panel,{className:"bg-white rounded-2xl p-6 max-w-lg w-full relative",children:[C.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-[#6654b3]",children:C.jsx(so,{className:"w-6 h-6"})}),C.jsx("h2",{className:"text-lg font-bold mb-2",style:{color:oi},children:r("receipts")}),C.jsx("div",{className:"space-y-3",children:t.map(l=>C.jsxs("div",{className:"rounded-lg border border-[#e1def5] bg-[#f6f6f6] px-3 py-2 flex items-center gap-3",children:[C.jsx("span",{className:"flex-1 truncate",style:{color:oi},children:decodeURIComponent(l.split("/").slice(-1)[0])}),C.jsx("button",{className:"hover:underline text-xs font-bold",style:{color:oi},onClick:()=>window.open(l,"_blank"),children:r("open")}),C.jsxs("button",{className:"hover:underline text-xs font-bold flex items-center gap-1",style:{color:oi},onClick:async()=>{const h=await(await fetch(l)).blob(),y=document.createElement("a");y.href=URL.createObjectURL(h),y.download=l.split("/").slice(-1)[0],y.click()},children:[C.jsx(aL,{className:"w-4 h-4 inline"})," ",r("download")]}),C.jsxs("button",{className:"hover:underline text-xs font-bold flex items-center gap-1",style:{color:oi},onClick:()=>{const u=document.createElement("iframe");u.style.position="fixed",u.style.right="0",u.style.top="0",u.style.width="0",u.style.height="0",u.src=l,document.body.appendChild(u),u.onload=()=>{var h;(h=u.contentWindow)==null||h.print(),setTimeout(()=>document.body.removeChild(u),1e3)}},children:[C.jsx(Qm,{className:"w-4 h-4 inline"})," ",r("print")]})]},l))})]})})}function Aj(t,e){return t.reduce((n,r)=>{const l=e(r);return(n[l]||(n[l]=[])).push(r),n},{})}function yw(){const{t,i18n:e}=zn(),n=Mc(),[r,l]=R.useState(null),[u,h]=R.useState({}),[y,b]=R.useState({new_application:!1,renewal:!1,edit:!1,cancel:!1}),{data:x=[]}=hi({queryKey:["courses","names"],queryFn:async()=>{const{data:V}=await Pe.from("courses").select("id,name,hour_packages");return V||[]},staleTime:5*60*1e3}),{data:E=[],isLoading:A}=hi({queryKey:["reviewHub","pending"],queryFn:async()=>{const[V,z]=await Promise.all([Pe.from("applications").select("*").eq("status","pending").order("created_at",{ascending:!0}),Pe.from("application_changes").select("*").eq("status","pending").order("created_at",{ascending:!0})]);return[...(V.data||[]).map(ee=>({...ee,group:"new_application"})),...(z.data||[]).map(ee=>({...ee,group:ee.type}))]},staleTime:20*1e3}),N=R.useMemo(()=>Array.from(new Set((E||[]).map(V=>V.submitted_by).filter(Boolean))),[E]),{data:I={}}=hi({queryKey:["submitters",...N],queryFn:async()=>{const V={};return await Promise.all(N.map(async z=>{const{data:ee}=await Pe.from("profiles").select("full_name,email").eq("id",z).single();ee&&(V[z]=ee)})),V},enabled:N.length>0}),M=R.useMemo(()=>Object.fromEntries(x.map(V=>[V.id,V.name])),[x]),j=R.useMemo(()=>Aj(E,V=>V.group),[E]);function U(V,z){h(ee=>{var X;return{...ee,[V]:new Set([...Array.from(ee[V]||[]),...(X=ee[V])!=null&&X.has(z)?[]:[z]].filter(ae=>{var Y;return ae!==z||!((Y=ee[V])!=null&&Y.has(z))}))}})}function $(V){var ee;const z=new Set(((ee=j[V])==null?void 0:ee.map(X=>X.id))||[]);h(X=>{var ae;return{...X,[V]:((ae=X[V])==null?void 0:ae.size)===z.size?new Set:z}})}async function q(V){var Y,be,Te,ve,le,ke;const z=Array.from(u[V]||[]);if(!z.length)return;const ee=(j[V]||[]).filter(ie=>z.includes(ie.id)),X=Object.fromEntries(x.map(ie=>[ie.id,ie]));for(const ie of ee){let se=ie,fe=[];if(ie.group==="new_application")fe=Object.keys(ie.course_limits||{});else if(ie.type==="renewal")fe=Object.keys(((Y=ie.changes)==null?void 0:Y.course_limits)||{}),se={...ie,course_limits:((be=ie.changes)==null?void 0:be.course_limits)||{},purchased_packages:((Te=ie.changes)==null?void 0:Te.purchased_packages)||[]};else if(ie.type==="edit")fe=Object.keys(((ve=ie.changes)==null?void 0:ve.course_changes)||{}),se={...ie,course_limits:((le=ie.changes)==null?void 0:le.course_limits)||{},purchased_packages:((ke=ie.changes)==null?void 0:ke.purchased_packages)||[]};else continue;for(const Ie of fe)if(!vj(se,Ie,[],X)){alert(Ej(e.language));return}}if(!window.confirm(t("approveConfirm",{count:z.length})))return;let ae;V==="new_application"?ae=Pe.from("applications").update({status:"approved"}).in("id",z):ae=Pe.from("application_changes").update({status:"approved",reviewed_at:new Date().toISOString()}).in("id",z),await ae,n.invalidateQueries({queryKey:["reviewHub","pending"]}),h(ie=>({...ie,[V]:new Set}))}async function B(V){const z=Array.from(u[V]||[]);z.length&&window.confirm(t("rejectConfirm",{count:z.length}))&&(V==="new_application"?await Pe.from("applications").delete().in("id",z):await Pe.from("application_changes").delete().in("id",z),n.invalidateQueries({queryKey:["reviewHub","pending"]}),h(ee=>({...ee,[V]:new Set})))}return A?C.jsxs("div",{className:"p-10 flex items-center justify-center",style:{background:xw,minHeight:"100vh"},children:[C.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full",style:{background:oi,marginRight:8}}),C.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full",style:{background:"#e6e1f7",marginRight:8}}),C.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full",style:{background:"#edeaf7"}})]}):C.jsxs("div",{className:"min-h-screen flex flex-col items-center py-8 px-2 sm:px-6 font-sans",style:{background:xw},children:[C.jsx("div",{className:"w-full max-w-5xl space-y-8",children:Object.entries(Sj).map(([V,z])=>{var ee,X,ae,Y,be,Te,ve;return C.jsxs("div",{className:"mb-4 border rounded-2xl shadow-sm",style:{borderColor:"#e1def5",background:"#fff"},children:[C.jsx("button",{className:"w-full flex items-center justify-between px-6 py-4 text-lg font-bold focus:outline-none rounded-t-2xl transition-all",style:{background:z.color,color:z.text,borderTopLeftRadius:16,borderTopRightRadius:16},onClick:()=>b(le=>({...le,[V]:!le[V]})),children:C.jsxs("div",{className:"flex items-center gap-2",children:[y[V]?C.jsx(hE,{className:"w-6 h-6"}):C.jsx(gE,{className:"w-6 h-6"}),t(z.labelKey),C.jsx("span",{className:"ml-2 rounded-full px-3 py-1 text-base font-bold border",style:{background:"#fff",color:oi,borderColor:"#e1def5"},children:((ee=j[V])==null?void 0:ee.length)||0})]})}),y[V]&&C.jsxs("div",{className:"px-4 pb-4 pt-2",children:[C.jsxs("div",{className:"flex flex-wrap gap-2 items-center my-3",children:[C.jsx("button",{className:"rounded-full px-3 py-1 border text-xs font-bold transition",style:{borderColor:oi,color:oi,background:"#f6f6f6"},onClick:()=>$(V),children:((X=u[V])==null?void 0:X.size)===(((ae=j[V])==null?void 0:ae.length)||0)?t("unselectAll"):t("selectAll")}),C.jsxs("button",{className:"px-3 py-1 rounded-full font-bold text-xs transition",style:{background:oi,color:"#fff",opacity:(Y=u[V])!=null&&Y.size?1:.5},disabled:!((be=u[V])!=null&&be.size),onClick:()=>q(V),children:[C.jsx(nL,{className:"w-4 h-4 inline"})," ",t("approve")]}),C.jsxs("button",{className:"px-3 py-1 rounded-full font-bold text-xs transition",style:{background:"#ec4899",color:"#fff",opacity:(Te=u[V])!=null&&Te.size?1:.5},disabled:!((ve=u[V])!=null&&ve.size),onClick:()=>B(V),children:[C.jsx(mL,{className:"w-4 h-4 inline"})," ",t("reject")]})]}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(j[V]||[]).map(le=>{var ce,oe,Oe,qe,we,ht,Ge,It,bn,_e;const ke=le.group==="new_application"?le.payment_receipt_urls||[]:((ce=le.changes)==null?void 0:ce.receipts)||le.receipt_urls||[],ie=le.nickname||le.nick_name||le.nick||"",se=le.first_name||le.first||"",fe=le.last_name||le.last||"",Ie=le.submitted_by?((oe=I[le.submitted_by])==null?void 0:oe.full_name)||le.submitted_by:"-";let Ue=[],W=[],Z=0;return le.group==="new_application"?(Ue=Object.entries(le.courses||{}).map(([Be,je])=>{var tt;return{cid:Be,days:je,hours:((tt=le.course_limits)==null?void 0:tt[Be])||0}}),W=le.purchased_packages||[],Z=le.total_price||0):(le.type==="edit"||le.type==="renewal"||le.type==="cancel")&&(Ue=[],le.type==="edit"?Ue=Object.entries(((Oe=le.changes)==null?void 0:Oe.course_changes)||{}).map(([Be,je])=>{var tt;return{cid:Be,days:je,hours:((tt=le.changes.course_limits)==null?void 0:tt[Be])||0}}):le.type==="renewal"?Ue=Object.entries(((qe=le.changes)==null?void 0:qe.course_limits)||{}).map(([Be,je])=>({cid:Be,days:null,hours:je})):le.type==="cancel"&&(Ue=Object.keys(((we=le.changes)==null?void 0:we.cancel_course_ids)||{}).map(Be=>({cid:Be,days:null,hours:0}))),W=((ht=le.changes)==null?void 0:ht.purchased_packages)||[],Z=((Ge=le.changes)==null?void 0:Ge.total_price)||0),C.jsxs("div",{className:Vu("rounded-2xl border p-4 space-y-2 flex flex-col relative transition",((It=u[V])==null?void 0:It.has(le.id))&&"ring-2"),style:{borderColor:"#edeaf7",background:"#fff",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.03)",...(bn=u[V])!=null&&bn.has(le.id)?{boxShadow:`0 0 0 3px ${oi}40`}:{}},children:[C.jsx("label",{className:"absolute top-3 left-3",children:C.jsx("input",{type:"checkbox",checked:(_e=u[V])==null?void 0:_e.has(le.id),onChange:()=>U(V,le.id),className:"accent-[#6654b3] w-5 h-5"})}),C.jsxs("div",{className:"pl-8",children:[C.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[C.jsx(hL,{className:"w-8 h-8",style:{color:oi}}),C.jsxs("div",{children:[C.jsxs("div",{className:"font-bold text-base",style:{color:oi},children:[ie?`"${ie}"`:""," ",se," ",fe]}),C.jsxs("div",{className:"text-xs text-gray-500",children:[C.jsxs("span",{children:[t("submittedBy"),": "]}),C.jsx("span",{children:Ie})]}),C.jsxs("div",{className:"text-xs text-gray-500",children:[le.parent_phone&&C.jsxs(C.Fragment,{children:[t("phone"),": ",le.parent_phone," "]}),le.parent_line_id&&C.jsxs(C.Fragment,{children:[t("lineId"),": ",le.parent_line_id," "]}),le.dob&&C.jsxs(C.Fragment,{children:[t("dob"),": ",new Date(le.dob).toLocaleDateString("en-GB")]})]})]})]}),C.jsxs("div",{className:"text-xs text-gray-600",children:[t("submittedAt"),": ",new Date(le.created_at).toLocaleString("en-GB")]}),C.jsxs("div",{className:"my-2",children:[Ue.map(Be=>C.jsxs("div",{className:"mb-1",children:[C.jsxs("div",{className:"font-semibold",style:{color:oi},children:[t("course"),": ",M[Be.cid]||Be.cid]}),Be.days&&Object.entries(Be.days).map(([je,tt])=>C.jsxs("div",{className:"ml-2 text-sm",children:[C.jsxs("span",{className:"font-semibold",children:[je,":"]})," ",(Array.isArray(tt)?tt:[]).join(", ")]},je)),typeof Be.hours=="number"&&C.jsxs("div",{className:"ml-2 text-sm",children:[C.jsxs("span",{className:"font-semibold",children:[t("hours"),":"]})," ",Be.hours]})]},Be.cid)),W.length>0&&C.jsxs("div",{className:"mb-2",children:[C.jsx("div",{className:"font-bold text-[#6654b3] mb-1",children:t("purchasedPackages")}),C.jsx("ul",{children:W.map(Be=>{var je;return C.jsxs("li",{children:[M[Be.course_id]||Be.course_name,": ",Be.hours," ",t("hoursLabel",{count:Be.hours}),"  ",(je=Be.price)==null?void 0:je.toLocaleString()," ",t("baht")]},Be.course_id+Be.hours)})}),C.jsxs("div",{className:"mt-1 font-semibold",children:[t("totalPrice"),": ",Z==null?void 0:Z.toLocaleString()," ",t("baht")]})]})]}),ke&&ke.length>0&&C.jsx("div",{className:"mb-2"}),ke&&ke.length>0&&C.jsx("button",{className:"rounded-full px-3 py-1 text-xs font-bold",style:{background:"#e6e1f7",color:oi},onClick:()=>l(ke),children:t("viewReceipts",{count:ke.length})}),Array.isArray(ke)&&ke.length===0&&C.jsx("div",{className:"text-gray-300 text-xs",children:t("noReceipt")})]})]},le.id)})})]})]},V)})}),r&&C.jsx(Cj,{urls:r,open:!!r,onClose:()=>l(null)}),C.jsx("style",{children:`
        @keyframes fadein { from { opacity:0; transform: scale(0.98);} to { opacity:1; transform: scale(1);} }
      `})]})}const rp=R.createContext({});function ap(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const op=typeof window<"u",qE=op?R.useLayoutEffect:R.useEffect,Kh=R.createContext(null);function lp(t,e){t.indexOf(e)===-1&&t.push(e)}function cp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Jr=(t,e,n)=>n>e?e:n<t?t:n;let up=()=>{};const ea={},YE=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function XE(t){return typeof t=="object"&&t!==null}const WE=t=>/^0[^.\s]+$/u.test(t);function fp(t){let e;return()=>(e===void 0&&(e=t()),e)}const Cs=t=>t,Tj=(t,e)=>n=>e(t(n)),Of=(...t)=>t.reduce(Tj),hf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class dp{constructor(){this.subscriptions=[]}add(e){return lp(this.subscriptions,e),()=>cp(this.subscriptions,e)}notify(e,n,r){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](e,n,r);else for(let u=0;u<l;u++){const h=this.subscriptions[u];h&&h(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pr=t=>t*1e3,xr=t=>t/1e3;function KE(t,e){return e?t*(1e3/e):0}const ZE=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,_j=1e-7,Nj=12;function Rj(t,e,n,r,l){let u,h,y=0;do h=e+(n-e)/2,u=ZE(h,r,l)-t,u>0?n=h:e=h;while(Math.abs(u)>_j&&++y<Nj);return h}function If(t,e,n,r){if(t===e&&n===r)return Cs;const l=u=>Rj(u,0,1,t,n);return u=>u===0||u===1?u:ZE(l(u),e,r)}const QE=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,JE=t=>e=>1-t(1-e),eS=If(.33,1.53,.69,.99),hp=JE(eS),tS=QE(hp),nS=t=>(t*=2)<1?.5*hp(t):.5*(2-Math.pow(2,-10*(t-1))),gp=t=>1-Math.sin(Math.acos(t)),iS=JE(gp),sS=QE(gp),Oj=If(.42,0,1,1),Ij=If(0,0,.58,1),rS=If(.42,0,.58,1),Mj=t=>Array.isArray(t)&&typeof t[0]!="number",aS=t=>Array.isArray(t)&&typeof t[0]=="number",Dj={linear:Cs,easeIn:Oj,easeInOut:rS,easeOut:Ij,circIn:gp,circInOut:sS,circOut:iS,backIn:hp,backInOut:tS,backOut:eS,anticipate:nS},Lj=t=>typeof t=="string",bw=t=>{if(aS(t)){up(t.length===4);const[e,n,r,l]=t;return If(e,n,r,l)}else if(Lj(t))return Dj[t];return t},ih=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],ww={value:null};function kj(t,e){let n=new Set,r=new Set,l=!1,u=!1;const h=new WeakSet;let y={delta:0,timestamp:0,isProcessing:!1},b=0;function x(A){h.has(A)&&(E.schedule(A),t()),b++,A(y)}const E={schedule:(A,N=!1,I=!1)=>{const j=I&&l?n:r;return N&&h.add(A),j.has(A)||j.add(A),A},cancel:A=>{r.delete(A),h.delete(A)},process:A=>{if(y=A,l){u=!0;return}l=!0,[n,r]=[r,n],n.forEach(x),e&&ww.value&&ww.value.frameloop[e].push(b),b=0,n.clear(),l=!1,u&&(u=!1,E.process(A))}};return E}const jj=40;function oS(t,e){let n=!1,r=!0;const l={delta:0,timestamp:0,isProcessing:!1},u=()=>n=!0,h=ih.reduce((B,V)=>(B[V]=kj(u,e?V:void 0),B),{}),{setup:y,read:b,resolveKeyframes:x,preUpdate:E,update:A,preRender:N,render:I,postRender:M}=h,j=()=>{const B=ea.useManualTiming?l.timestamp:performance.now();n=!1,ea.useManualTiming||(l.delta=r?1e3/60:Math.max(Math.min(B-l.timestamp,jj),1)),l.timestamp=B,l.isProcessing=!0,y.process(l),b.process(l),x.process(l),E.process(l),A.process(l),N.process(l),I.process(l),M.process(l),l.isProcessing=!1,n&&e&&(r=!1,t(j))},U=()=>{n=!0,r=!0,l.isProcessing||t(j)};return{schedule:ih.reduce((B,V)=>{const z=h[V];return B[V]=(ee,X=!1,ae=!1)=>(n||U(),z.schedule(ee,X,ae)),B},{}),cancel:B=>{for(let V=0;V<ih.length;V++)h[ih[V]].cancel(B)},state:l,steps:h}}const{schedule:gn,cancel:ao,state:di,steps:xg}=oS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Cs,!0);let fh;function Bj(){fh=void 0}const Yi={now:()=>(fh===void 0&&Yi.set(di.isProcessing||ea.useManualTiming?di.timestamp:performance.now()),fh),set:t=>{fh=t,queueMicrotask(Bj)}},lS=t=>e=>typeof e=="string"&&e.startsWith(t),mp=lS("--"),Pj=lS("var(--"),pp=t=>Pj(t)?Uj.test(t.split("/*")[0].trim()):!1,Uj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Lc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},gf={...Lc,transform:t=>Jr(0,1,t)},sh={...Lc,default:1},nf=t=>Math.round(t*1e5)/1e5,xp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Fj(t){return t==null}const Vj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yp=(t,e)=>n=>!!(typeof n=="string"&&Vj.test(n)&&n.startsWith(t)||e&&!Fj(n)&&Object.prototype.hasOwnProperty.call(n,e)),cS=(t,e,n)=>r=>{if(typeof r!="string")return r;const[l,u,h,y]=r.match(xp);return{[t]:parseFloat(l),[e]:parseFloat(u),[n]:parseFloat(h),alpha:y!==void 0?parseFloat(y):1}},zj=t=>Jr(0,255,t),yg={...Lc,transform:t=>Math.round(zj(t))},$o={test:yp("rgb","red"),parse:cS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+yg.transform(t)+", "+yg.transform(e)+", "+yg.transform(n)+", "+nf(gf.transform(r))+")"};function Hj(t){let e="",n="",r="",l="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),l=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),l=t.substring(4,5),e+=e,n+=n,r+=r,l+=l),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:l?parseInt(l,16)/255:1}}const gm={test:yp("#"),parse:Hj,transform:$o.transform},Mf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Va=Mf("deg"),yr=Mf("%"),at=Mf("px"),$j=Mf("vh"),Gj=Mf("vw"),vw={...yr,parse:t=>yr.parse(t)/100,transform:t=>yr.transform(t*100)},lc={test:yp("hsl","hue"),parse:cS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+yr.transform(nf(e))+", "+yr.transform(nf(n))+", "+nf(gf.transform(r))+")"},Vn={test:t=>$o.test(t)||gm.test(t)||lc.test(t),parse:t=>$o.test(t)?$o.parse(t):lc.test(t)?lc.parse(t):gm.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?$o.transform(t):lc.transform(t),getAnimatableNone:t=>{const e=Vn.parse(t);return e.alpha=0,Vn.transform(e)}},qj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Yj(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(xp))==null?void 0:e.length)||0)+(((n=t.match(qj))==null?void 0:n.length)||0)>0}const uS="number",fS="color",Xj="var",Wj="var(",Ew="${}",Kj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function mf(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},l=[];let u=0;const y=e.replace(Kj,b=>(Vn.test(b)?(r.color.push(u),l.push(fS),n.push(Vn.parse(b))):b.startsWith(Wj)?(r.var.push(u),l.push(Xj),n.push(b)):(r.number.push(u),l.push(uS),n.push(parseFloat(b))),++u,Ew)).split(Ew);return{values:n,split:y,indexes:r,types:l}}function dS(t){return mf(t).values}function hS(t){const{split:e,types:n}=mf(t),r=e.length;return l=>{let u="";for(let h=0;h<r;h++)if(u+=e[h],l[h]!==void 0){const y=n[h];y===uS?u+=nf(l[h]):y===fS?u+=Vn.transform(l[h]):u+=l[h]}return u}}const Zj=t=>typeof t=="number"?0:Vn.test(t)?Vn.getAnimatableNone(t):t;function Qj(t){const e=dS(t);return hS(t)(e.map(Zj))}const oo={test:Yj,parse:dS,createTransformer:hS,getAnimatableNone:Qj};function bg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Jj({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let l=0,u=0,h=0;if(!e)l=u=h=n;else{const y=n<.5?n*(1+e):n+e-n*e,b=2*n-y;l=bg(b,y,t+1/3),u=bg(b,y,t),h=bg(b,y,t-1/3)}return{red:Math.round(l*255),green:Math.round(u*255),blue:Math.round(h*255),alpha:r}}function Nh(t,e){return n=>n>0?e:t}const yn=(t,e,n)=>t+(e-t)*n,wg=(t,e,n)=>{const r=t*t,l=n*(e*e-r)+r;return l<0?0:Math.sqrt(l)},eB=[gm,$o,lc],tB=t=>eB.find(e=>e.test(t));function Sw(t){const e=tB(t);if(!e)return!1;let n=e.parse(t);return e===lc&&(n=Jj(n)),n}const Cw=(t,e)=>{const n=Sw(t),r=Sw(e);if(!n||!r)return Nh(t,e);const l={...n};return u=>(l.red=wg(n.red,r.red,u),l.green=wg(n.green,r.green,u),l.blue=wg(n.blue,r.blue,u),l.alpha=yn(n.alpha,r.alpha,u),$o.transform(l))},mm=new Set(["none","hidden"]);function nB(t,e){return mm.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function iB(t,e){return n=>yn(t,e,n)}function bp(t){return typeof t=="number"?iB:typeof t=="string"?pp(t)?Nh:Vn.test(t)?Cw:aB:Array.isArray(t)?gS:typeof t=="object"?Vn.test(t)?Cw:sB:Nh}function gS(t,e){const n=[...t],r=n.length,l=t.map((u,h)=>bp(u)(u,e[h]));return u=>{for(let h=0;h<r;h++)n[h]=l[h](u);return n}}function sB(t,e){const n={...t,...e},r={};for(const l in n)t[l]!==void 0&&e[l]!==void 0&&(r[l]=bp(t[l])(t[l],e[l]));return l=>{for(const u in r)n[u]=r[u](l);return n}}function rB(t,e){const n=[],r={color:0,var:0,number:0};for(let l=0;l<e.values.length;l++){const u=e.types[l],h=t.indexes[u][r[u]],y=t.values[h]??0;n[l]=y,r[u]++}return n}const aB=(t,e)=>{const n=oo.createTransformer(e),r=mf(t),l=mf(e);return r.indexes.var.length===l.indexes.var.length&&r.indexes.color.length===l.indexes.color.length&&r.indexes.number.length>=l.indexes.number.length?mm.has(t)&&!l.values.length||mm.has(e)&&!r.values.length?nB(t,e):Of(gS(rB(r,l),l.values),n):Nh(t,e)};function mS(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?yn(t,e,n):bp(t)(t,e)}const oB=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>gn.update(e,n),stop:()=>ao(e),now:()=>di.isProcessing?di.timestamp:Yi.now()}},pS=(t,e,n=10)=>{let r="";const l=Math.max(Math.round(e/n),2);for(let u=0;u<l;u++)r+=Math.round(t(u/(l-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Rh=2e4;function wp(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Rh;)e+=n,r=t.next(e);return e>=Rh?1/0:e}function lB(t,e=100,n){const r=n({...t,keyframes:[0,e]}),l=Math.min(wp(r),Rh);return{type:"keyframes",ease:u=>r.next(l*u).value/e,duration:xr(l)}}const cB=5;function xS(t,e,n){const r=Math.max(e-cB,0);return KE(n-t(r),e-r)}const _n={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vg=.001;function uB({duration:t=_n.duration,bounce:e=_n.bounce,velocity:n=_n.velocity,mass:r=_n.mass}){let l,u,h=1-e;h=Jr(_n.minDamping,_n.maxDamping,h),t=Jr(_n.minDuration,_n.maxDuration,xr(t)),h<1?(l=x=>{const E=x*h,A=E*t,N=E-n,I=pm(x,h),M=Math.exp(-A);return vg-N/I*M},u=x=>{const A=x*h*t,N=A*n+n,I=Math.pow(h,2)*Math.pow(x,2)*t,M=Math.exp(-A),j=pm(Math.pow(x,2),h);return(-l(x)+vg>0?-1:1)*((N-I)*M)/j}):(l=x=>{const E=Math.exp(-x*t),A=(x-n)*t+1;return-vg+E*A},u=x=>{const E=Math.exp(-x*t),A=(n-x)*(t*t);return E*A});const y=5/t,b=dB(l,u,y);if(t=pr(t),isNaN(b))return{stiffness:_n.stiffness,damping:_n.damping,duration:t};{const x=Math.pow(b,2)*r;return{stiffness:x,damping:h*2*Math.sqrt(r*x),duration:t}}}const fB=12;function dB(t,e,n){let r=n;for(let l=1;l<fB;l++)r=r-t(r)/e(r);return r}function pm(t,e){return t*Math.sqrt(1-e*e)}const hB=["duration","bounce"],gB=["stiffness","damping","mass"];function Aw(t,e){return e.some(n=>t[n]!==void 0)}function mB(t){let e={velocity:_n.velocity,stiffness:_n.stiffness,damping:_n.damping,mass:_n.mass,isResolvedFromDuration:!1,...t};if(!Aw(t,gB)&&Aw(t,hB))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),l=r*r,u=2*Jr(.05,1,1-(t.bounce||0))*Math.sqrt(l);e={...e,mass:_n.mass,stiffness:l,damping:u}}else{const n=uB(t);e={...e,...n,mass:_n.mass},e.isResolvedFromDuration=!0}return e}function Oh(t=_n.visualDuration,e=_n.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:l}=n;const u=n.keyframes[0],h=n.keyframes[n.keyframes.length-1],y={done:!1,value:u},{stiffness:b,damping:x,mass:E,duration:A,velocity:N,isResolvedFromDuration:I}=mB({...n,velocity:-xr(n.velocity||0)}),M=N||0,j=x/(2*Math.sqrt(b*E)),U=h-u,$=xr(Math.sqrt(b/E)),q=Math.abs(U)<5;r||(r=q?_n.restSpeed.granular:_n.restSpeed.default),l||(l=q?_n.restDelta.granular:_n.restDelta.default);let B;if(j<1){const z=pm($,j);B=ee=>{const X=Math.exp(-j*$*ee);return h-X*((M+j*$*U)/z*Math.sin(z*ee)+U*Math.cos(z*ee))}}else if(j===1)B=z=>h-Math.exp(-$*z)*(U+(M+$*U)*z);else{const z=$*Math.sqrt(j*j-1);B=ee=>{const X=Math.exp(-j*$*ee),ae=Math.min(z*ee,300);return h-X*((M+j*$*U)*Math.sinh(ae)+z*U*Math.cosh(ae))/z}}const V={calculatedDuration:I&&A||null,next:z=>{const ee=B(z);if(I)y.done=z>=A;else{let X=z===0?M:0;j<1&&(X=z===0?pr(M):xS(B,z,ee));const ae=Math.abs(X)<=r,Y=Math.abs(h-ee)<=l;y.done=ae&&Y}return y.value=y.done?h:ee,y},toString:()=>{const z=Math.min(wp(V),Rh),ee=pS(X=>V.next(z*X).value,z,30);return z+"ms "+ee},toTransition:()=>{}};return V}Oh.applyToOptions=t=>{const e=lB(t,100,Oh);return t.ease=e.ease,t.duration=pr(e.duration),t.type="keyframes",t};function xm({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:l=10,bounceStiffness:u=500,modifyTarget:h,min:y,max:b,restDelta:x=.5,restSpeed:E}){const A=t[0],N={done:!1,value:A},I=ae=>y!==void 0&&ae<y||b!==void 0&&ae>b,M=ae=>y===void 0?b:b===void 0||Math.abs(y-ae)<Math.abs(b-ae)?y:b;let j=n*e;const U=A+j,$=h===void 0?U:h(U);$!==U&&(j=$-A);const q=ae=>-j*Math.exp(-ae/r),B=ae=>$+q(ae),V=ae=>{const Y=q(ae),be=B(ae);N.done=Math.abs(Y)<=x,N.value=N.done?$:be};let z,ee;const X=ae=>{I(N.value)&&(z=ae,ee=Oh({keyframes:[N.value,M(N.value)],velocity:xS(B,ae,N.value),damping:l,stiffness:u,restDelta:x,restSpeed:E}))};return X(0),{calculatedDuration:null,next:ae=>{let Y=!1;return!ee&&z===void 0&&(Y=!0,V(ae),X(ae)),z!==void 0&&ae>=z?ee.next(ae-z):(!Y&&V(ae),N)}}}function pB(t,e,n){const r=[],l=n||ea.mix||mS,u=t.length-1;for(let h=0;h<u;h++){let y=l(t[h],t[h+1]);if(e){const b=Array.isArray(e)?e[h]||Cs:e;y=Of(b,y)}r.push(y)}return r}function xB(t,e,{clamp:n=!0,ease:r,mixer:l}={}){const u=t.length;if(up(u===e.length),u===1)return()=>e[0];if(u===2&&e[0]===e[1])return()=>e[1];const h=t[0]===t[1];t[0]>t[u-1]&&(t=[...t].reverse(),e=[...e].reverse());const y=pB(e,r,l),b=y.length,x=E=>{if(h&&E<t[0])return e[0];let A=0;if(b>1)for(;A<t.length-2&&!(E<t[A+1]);A++);const N=hf(t[A],t[A+1],E);return y[A](N)};return n?E=>x(Jr(t[0],t[u-1],E)):x}function yB(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const l=hf(0,e,r);t.push(yn(n,1,l))}}function bB(t){const e=[0];return yB(e,t.length-1),e}function wB(t,e){return t.map(n=>n*e)}function vB(t,e){return t.map(()=>e||rS).splice(0,t.length-1)}function sf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const l=Mj(r)?r.map(bw):bw(r),u={done:!1,value:e[0]},h=wB(n&&n.length===e.length?n:bB(e),t),y=xB(h,e,{ease:Array.isArray(l)?l:vB(e,l)});return{calculatedDuration:t,next:b=>(u.value=y(b),u.done=b>=t,u)}}const EB=t=>t!==null;function vp(t,{repeat:e,repeatType:n="loop"},r,l=1){const u=t.filter(EB),y=l<0||e&&n!=="loop"&&e%2===1?0:u.length-1;return!y||r===void 0?u[y]:r}const SB={decay:xm,inertia:xm,tween:sf,keyframes:sf,spring:Oh};function yS(t){typeof t.type=="string"&&(t.type=SB[t.type])}class Ep{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const CB=t=>t/100;class Sp extends Ep{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,l;const{motionValue:n}=this.options;n&&n.updatedAt!==Yi.now()&&this.tick(Yi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(l=(r=this.options).onStop)==null||l.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;yS(e);const{type:n=sf,repeat:r=0,repeatDelay:l=0,repeatType:u,velocity:h=0}=e;let{keyframes:y}=e;const b=n||sf;b!==sf&&typeof y[0]!="number"&&(this.mixKeyframes=Of(CB,mS(y[0],y[1])),y=[0,100]);const x=b({...e,keyframes:y});u==="mirror"&&(this.mirroredGenerator=b({...e,keyframes:[...y].reverse(),velocity:-h})),x.calculatedDuration===null&&(x.calculatedDuration=wp(x));const{calculatedDuration:E}=x;this.calculatedDuration=E,this.resolvedDuration=E+l,this.totalDuration=this.resolvedDuration*(r+1)-l,this.generator=x}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:l,mixKeyframes:u,mirroredGenerator:h,resolvedDuration:y,calculatedDuration:b}=this;if(this.startTime===null)return r.next(0);const{delay:x=0,keyframes:E,repeat:A,repeatType:N,repeatDelay:I,type:M,onUpdate:j,finalKeyframe:U}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-l/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const $=this.currentTime-x*(this.playbackSpeed>=0?1:-1),q=this.playbackSpeed>=0?$<0:$>l;this.currentTime=Math.max($,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let B=this.currentTime,V=r;if(A){const ae=Math.min(this.currentTime,l)/y;let Y=Math.floor(ae),be=ae%1;!be&&ae>=1&&(be=1),be===1&&Y--,Y=Math.min(Y,A+1),!!(Y%2)&&(N==="reverse"?(be=1-be,I&&(be-=I/y)):N==="mirror"&&(V=h)),B=Jr(0,1,be)*y}const z=q?{done:!1,value:E[0]}:V.next(B);u&&(z.value=u(z.value));let{done:ee}=z;!q&&b!==null&&(ee=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const X=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ee);return X&&M!==xm&&(z.value=vp(E,this.options,U,this.speed)),j&&j(z.value),X&&this.finish(),z}then(e,n){return this.finished.then(e,n)}get duration(){return xr(this.calculatedDuration)}get time(){return xr(this.currentTime)}set time(e){var n;e=pr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Yi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=xr(this.currentTime))}play(){var l,u;if(this.isStopped)return;const{driver:e=oB,startTime:n}=this.options;this.driver||(this.driver=e(h=>this.tick(h))),(u=(l=this.options).onPlay)==null||u.call(l);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Yi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function AB(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Go=t=>t*180/Math.PI,ym=t=>{const e=Go(Math.atan2(t[1],t[0]));return bm(e)},TB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ym,rotateZ:ym,skewX:t=>Go(Math.atan(t[1])),skewY:t=>Go(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},bm=t=>(t=t%360,t<0&&(t+=360),t),Tw=ym,_w=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Nw=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),_B={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:_w,scaleY:Nw,scale:t=>(_w(t)+Nw(t))/2,rotateX:t=>bm(Go(Math.atan2(t[6],t[5]))),rotateY:t=>bm(Go(Math.atan2(-t[2],t[0]))),rotateZ:Tw,rotate:Tw,skewX:t=>Go(Math.atan(t[4])),skewY:t=>Go(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function wm(t){return t.includes("scale")?1:0}function vm(t,e){if(!t||t==="none")return wm(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,l;if(n)r=_B,l=n;else{const y=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=TB,l=y}if(!l)return wm(e);const u=r[e],h=l[1].split(",").map(RB);return typeof u=="function"?u(h):h[u]}const NB=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return vm(n,e)};function RB(t){return parseFloat(t.trim())}const kc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jc=new Set(kc),Rw=t=>t===Lc||t===at,OB=new Set(["x","y","z"]),IB=kc.filter(t=>!OB.has(t));function MB(t){const e=[];return IB.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const il={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>vm(e,"x"),y:(t,{transform:e})=>vm(e,"y")};il.translateX=il.x;il.translateY=il.y;const sl=new Set;let Em=!1,Sm=!1,Cm=!1;function bS(){if(Sm){const t=Array.from(sl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const l=MB(r);l.length&&(n.set(r,l),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const l=n.get(r);l&&l.forEach(([u,h])=>{var y;(y=r.getValue(u))==null||y.set(h)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Sm=!1,Em=!1,sl.forEach(t=>t.complete(Cm)),sl.clear()}function wS(){sl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Sm=!0)})}function DB(){Cm=!0,wS(),bS(),Cm=!1}class Cp{constructor(e,n,r,l,u,h=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=l,this.element=u,this.isAsync=h}scheduleResolve(){this.state="scheduled",this.isAsync?(sl.add(this),Em||(Em=!0,gn.read(wS),gn.resolveKeyframes(bS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:l}=this;if(e[0]===null){const u=l==null?void 0:l.get(),h=e[e.length-1];if(u!==void 0)e[0]=u;else if(r&&n){const y=r.readValue(n,h);y!=null&&(e[0]=y)}e[0]===void 0&&(e[0]=h),l&&u===void 0&&l.set(e[0])}AB(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),sl.delete(this)}cancel(){this.state==="scheduled"&&(sl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const LB=t=>t.startsWith("--");function kB(t,e,n){LB(e)?t.style.setProperty(e,n):t.style[e]=n}const jB=fp(()=>window.ScrollTimeline!==void 0),BB={};function PB(t,e){const n=fp(t);return()=>BB[e]??n()}const vS=PB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Gu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Ow={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gu([0,.65,.55,1]),circOut:Gu([.55,0,1,.45]),backIn:Gu([.31,.01,.66,-.59]),backOut:Gu([.33,1.53,.69,.99])};function ES(t,e){if(t)return typeof t=="function"?vS()?pS(t,e):"ease-out":aS(t)?Gu(t):Array.isArray(t)?t.map(n=>ES(n,e)||Ow.easeOut):Ow[t]}function UB(t,e,n,{delay:r=0,duration:l=300,repeat:u=0,repeatType:h="loop",ease:y="easeOut",times:b}={},x=void 0){const E={[e]:n};b&&(E.offset=b);const A=ES(y,l);Array.isArray(A)&&(E.easing=A);const N={delay:r,duration:l,easing:Array.isArray(A)?"linear":A,fill:"both",iterations:u+1,direction:h==="reverse"?"alternate":"normal"};return x&&(N.pseudoElement=x),t.animate(E,N)}function SS(t){return typeof t=="function"&&"applyToOptions"in t}function FB({type:t,...e}){return SS(t)&&vS()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class VB extends Ep{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:l,pseudoElement:u,allowFlatten:h=!1,finalKeyframe:y,onComplete:b}=e;this.isPseudoElement=!!u,this.allowFlatten=h,this.options=e,up(typeof e.type!="string");const x=FB(e);this.animation=UB(n,r,l,x,u),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const E=vp(l,this.options,y,this.speed);this.updateMotionValue?this.updateMotionValue(E):kB(n,r,E),this.animation.cancel()}b==null||b(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return xr(Number(e))}get time(){return xr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=pr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&jB()?(this.animation.timeline=e,Cs):n(this)}}const CS={anticipate:nS,backInOut:tS,circInOut:sS};function zB(t){return t in CS}function HB(t){typeof t.ease=="string"&&zB(t.ease)&&(t.ease=CS[t.ease])}const Iw=10;class $B extends VB{constructor(e){HB(e),yS(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:l,element:u,...h}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const y=new Sp({...h,autoplay:!1}),b=pr(this.finishedTime??this.time);n.setWithVelocity(y.sample(b-Iw).value,y.sample(b).value,Iw),y.stop()}}const Mw=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(oo.test(t)||t==="0")&&!t.startsWith("url("));function GB(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function qB(t,e,n,r){const l=t[0];if(l===null)return!1;if(e==="display"||e==="visibility")return!0;const u=t[t.length-1],h=Mw(l,e),y=Mw(u,e);return!h||!y?!1:GB(t)||(n==="spring"||SS(n))&&r}function Ap(t){return XE(t)&&"offsetHeight"in t}const YB=new Set(["opacity","clipPath","filter","transform"]),XB=fp(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function WB(t){var x;const{motionValue:e,name:n,repeatDelay:r,repeatType:l,damping:u,type:h}=t;if(!Ap((x=e==null?void 0:e.owner)==null?void 0:x.current))return!1;const{onUpdate:y,transformTemplate:b}=e.owner.getProps();return XB()&&n&&YB.has(n)&&(n!=="transform"||!b)&&!y&&!r&&l!=="mirror"&&u!==0&&h!=="inertia"}const KB=40;class ZB extends Ep{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:l=0,repeatDelay:u=0,repeatType:h="loop",keyframes:y,name:b,motionValue:x,element:E,...A}){var M;super(),this.stop=()=>{var j,U;this._animation&&(this._animation.stop(),(j=this.stopTimeline)==null||j.call(this)),(U=this.keyframeResolver)==null||U.cancel()},this.createdAt=Yi.now();const N={autoplay:e,delay:n,type:r,repeat:l,repeatDelay:u,repeatType:h,name:b,motionValue:x,element:E,...A},I=(E==null?void 0:E.KeyframeResolver)||Cp;this.keyframeResolver=new I(y,(j,U,$)=>this.onKeyframesResolved(j,U,N,!$),b,x,E),(M=this.keyframeResolver)==null||M.scheduleResolve()}onKeyframesResolved(e,n,r,l){this.keyframeResolver=void 0;const{name:u,type:h,velocity:y,delay:b,isHandoff:x,onUpdate:E}=r;this.resolvedAt=Yi.now(),qB(e,u,h,y)||((ea.instantAnimations||!b)&&(E==null||E(vp(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const N={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>KB?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},I=!x&&WB(N)?new $B({...N,element:N.motionValue.owner.current}):new Sp(N);I.finished.then(()=>this.notifyFinished()).catch(Cs),this.pendingTimeline&&(this.stopTimeline=I.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=I}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),DB()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const QB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function JB(t){const e=QB.exec(t);if(!e)return[,];const[,n,r,l]=e;return[`--${n??r}`,l]}function AS(t,e,n=1){const[r,l]=JB(t);if(!r)return;const u=window.getComputedStyle(e).getPropertyValue(r);if(u){const h=u.trim();return YE(h)?parseFloat(h):h}return pp(l)?AS(l,e,n+1):l}function Tp(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const TS=new Set(["width","height","top","left","right","bottom",...kc]),eP={test:t=>t==="auto",parse:t=>t},_S=t=>e=>e.test(t),NS=[Lc,at,yr,Va,Gj,$j,eP],Dw=t=>NS.find(_S(t));function tP(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||WE(t):!0}const nP=new Set(["brightness","contrast","saturate","opacity"]);function iP(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(xp)||[];if(!r)return t;const l=n.replace(r,"");let u=nP.has(e)?1:0;return r!==n&&(u*=100),e+"("+u+l+")"}const sP=/\b([a-z-]*)\(.*?\)/gu,Am={...oo,getAnimatableNone:t=>{const e=t.match(sP);return e?e.map(iP).join(" "):t}},Lw={...Lc,transform:Math.round},rP={rotate:Va,rotateX:Va,rotateY:Va,rotateZ:Va,scale:sh,scaleX:sh,scaleY:sh,scaleZ:sh,skew:Va,skewX:Va,skewY:Va,distance:at,translateX:at,translateY:at,translateZ:at,x:at,y:at,z:at,perspective:at,transformPerspective:at,opacity:gf,originX:vw,originY:vw,originZ:at},_p={borderWidth:at,borderTopWidth:at,borderRightWidth:at,borderBottomWidth:at,borderLeftWidth:at,borderRadius:at,radius:at,borderTopLeftRadius:at,borderTopRightRadius:at,borderBottomRightRadius:at,borderBottomLeftRadius:at,width:at,maxWidth:at,height:at,maxHeight:at,top:at,right:at,bottom:at,left:at,padding:at,paddingTop:at,paddingRight:at,paddingBottom:at,paddingLeft:at,margin:at,marginTop:at,marginRight:at,marginBottom:at,marginLeft:at,backgroundPositionX:at,backgroundPositionY:at,...rP,zIndex:Lw,fillOpacity:gf,strokeOpacity:gf,numOctaves:Lw},aP={..._p,color:Vn,backgroundColor:Vn,outlineColor:Vn,fill:Vn,stroke:Vn,borderColor:Vn,borderTopColor:Vn,borderRightColor:Vn,borderBottomColor:Vn,borderLeftColor:Vn,filter:Am,WebkitFilter:Am},RS=t=>aP[t];function OS(t,e){let n=RS(t);return n!==Am&&(n=oo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const oP=new Set(["auto","none","0"]);function lP(t,e,n){let r=0,l;for(;r<t.length&&!l;){const u=t[r];typeof u=="string"&&!oP.has(u)&&mf(u).values.length&&(l=t[r]),r++}if(l&&n)for(const u of e)t[u]=OS(n,l)}class cP extends Cp{constructor(e,n,r,l,u){super(e,n,r,l,u,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let b=0;b<e.length;b++){let x=e[b];if(typeof x=="string"&&(x=x.trim(),pp(x))){const E=AS(x,n.current);E!==void 0&&(e[b]=E),b===e.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!TS.has(r)||e.length!==2)return;const[l,u]=e,h=Dw(l),y=Dw(u);if(h!==y)if(Rw(h)&&Rw(y))for(let b=0;b<e.length;b++){const x=e[b];typeof x=="string"&&(e[b]=parseFloat(x))}else il[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let l=0;l<e.length;l++)(e[l]===null||tP(e[l]))&&r.push(l);r.length&&lP(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=il[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const l=n[n.length-1];l!==void 0&&e.getValue(r,l).jump(l,!1)}measureEndState(){var y;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const l=e.getValue(n);l&&l.jump(this.measuredOrigin,!1);const u=r.length-1,h=r[u];r[u]=il[n](e.measureViewportBox(),window.getComputedStyle(e.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),(y=this.removedTransforms)!=null&&y.length&&this.removedTransforms.forEach(([b,x])=>{e.getValue(b).set(x)}),this.resolveNoneKeyframes()}}function uP(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const l=(n==null?void 0:n[t])??r.querySelectorAll(t);return l?Array.from(l):[]}return Array.from(t)}const IS=(t,e)=>e&&typeof t=="number"?e.transform(t):t,kw=30,fP=t=>!isNaN(parseFloat(t));class dP{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,l=!0)=>{var h,y;const u=Yi.now();if(this.updatedAt!==u&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((h=this.events.change)==null||h.notify(this.current),this.dependents))for(const b of this.dependents)b.dirty();l&&((y=this.events.renderRequest)==null||y.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Yi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=fP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new dp);const r=this.events[e].add(n);return e==="change"?()=>{r(),gn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Yi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>kw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,kw);return KE(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _c(t,e){return new dP(t,e)}const{schedule:Np}=oS(queueMicrotask,!1),Ps={x:!1,y:!1};function MS(){return Ps.x||Ps.y}function hP(t){return t==="x"||t==="y"?Ps[t]?null:(Ps[t]=!0,()=>{Ps[t]=!1}):Ps.x||Ps.y?null:(Ps.x=Ps.y=!0,()=>{Ps.x=Ps.y=!1})}function DS(t,e){const n=uP(t),r=new AbortController,l={passive:!0,...e,signal:r.signal};return[n,l,()=>r.abort()]}function jw(t){return!(t.pointerType==="touch"||MS())}function gP(t,e,n={}){const[r,l,u]=DS(t,n),h=y=>{if(!jw(y))return;const{target:b}=y,x=e(b,y);if(typeof x!="function"||!b)return;const E=A=>{jw(A)&&(x(A),b.removeEventListener("pointerleave",E))};b.addEventListener("pointerleave",E,l)};return r.forEach(y=>{y.addEventListener("pointerenter",h,l)}),u}const LS=(t,e)=>e?t===e?!0:LS(t,e.parentElement):!1,Rp=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,mP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function pP(t){return mP.has(t.tagName)||t.tabIndex!==-1}const dh=new WeakSet;function Bw(t){return e=>{e.key==="Enter"&&t(e)}}function Eg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const xP=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Bw(()=>{if(dh.has(n))return;Eg(n,"down");const l=Bw(()=>{Eg(n,"up")}),u=()=>Eg(n,"cancel");n.addEventListener("keyup",l,e),n.addEventListener("blur",u,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Pw(t){return Rp(t)&&!MS()}function yP(t,e,n={}){const[r,l,u]=DS(t,n),h=y=>{const b=y.currentTarget;if(!Pw(y))return;dh.add(b);const x=e(b,y),E=(I,M)=>{window.removeEventListener("pointerup",A),window.removeEventListener("pointercancel",N),dh.has(b)&&dh.delete(b),Pw(I)&&typeof x=="function"&&x(I,{success:M})},A=I=>{E(I,b===window||b===document||n.useGlobalTarget||LS(b,I.target))},N=I=>{E(I,!1)};window.addEventListener("pointerup",A,l),window.addEventListener("pointercancel",N,l)};return r.forEach(y=>{(n.useGlobalTarget?window:y).addEventListener("pointerdown",h,l),Ap(y)&&(y.addEventListener("focus",x=>xP(x,l)),!pP(y)&&!y.hasAttribute("tabindex")&&(y.tabIndex=0))}),u}function kS(t){return XE(t)&&"ownerSVGElement"in t}function bP(t){return kS(t)&&t.tagName==="svg"}const Ai=t=>!!(t&&t.getVelocity),wP=[...NS,Vn,oo],vP=t=>wP.find(_S(t)),Op=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class EP extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,l=Ap(r)&&r.offsetWidth||0,u=this.props.sizeRef.current;u.height=n.offsetHeight||0,u.width=n.offsetWidth||0,u.top=n.offsetTop,u.left=n.offsetLeft,u.right=l-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function SP({children:t,isPresent:e,anchorX:n,root:r}){const l=R.useId(),u=R.useRef(null),h=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=R.useContext(Op);return R.useInsertionEffect(()=>{const{width:b,height:x,top:E,left:A,right:N}=h.current;if(e||!u.current||!b||!x)return;const I=n==="left"?`left: ${A}`:`right: ${N}`;u.current.dataset.motionPopId=l;const M=document.createElement("style");y&&(M.nonce=y);const j=r??document.head;return j.appendChild(M),M.sheet&&M.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${b}px !important;
            height: ${x}px !important;
            ${I}px !important;
            top: ${E}px !important;
          }
        `),()=>{j.removeChild(M),j.contains(M)&&j.removeChild(M)}},[e]),C.jsx(EP,{isPresent:e,childRef:u,sizeRef:h,children:R.cloneElement(t,{ref:u})})}const CP=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:l,presenceAffectsLayout:u,mode:h,anchorX:y,root:b})=>{const x=ap(AP),E=R.useId();let A=!0,N=R.useMemo(()=>(A=!1,{id:E,initial:e,isPresent:n,custom:l,onExitComplete:I=>{x.set(I,!0);for(const M of x.values())if(!M)return;r&&r()},register:I=>(x.set(I,!1),()=>x.delete(I))}),[n,x,r]);return u&&A&&(N={...N}),R.useMemo(()=>{x.forEach((I,M)=>x.set(M,!1))},[n]),R.useEffect(()=>{!n&&!x.size&&r&&r()},[n]),h==="popLayout"&&(t=C.jsx(SP,{isPresent:n,anchorX:y,root:b,children:t})),C.jsx(Kh.Provider,{value:N,children:t})};function AP(){return new Map}function jS(t=!0){const e=R.useContext(Kh);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:l}=e,u=R.useId();R.useEffect(()=>{if(t)return l(u)},[t]);const h=R.useCallback(()=>t&&r&&r(u),[u,r,t]);return!n&&r?[!1,h]:[!0]}const rh=t=>t.key||"";function Uw(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const Bu=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:l=!0,mode:u="sync",propagate:h=!1,anchorX:y="left",root:b})=>{const[x,E]=jS(h),A=R.useMemo(()=>Uw(t),[t]),N=h&&!x?[]:A.map(rh),I=R.useRef(!0),M=R.useRef(A),j=ap(()=>new Map),[U,$]=R.useState(A),[q,B]=R.useState(A);qE(()=>{I.current=!1,M.current=A;for(let ee=0;ee<q.length;ee++){const X=rh(q[ee]);N.includes(X)?j.delete(X):j.get(X)!==!0&&j.set(X,!1)}},[q,N.length,N.join("-")]);const V=[];if(A!==U){let ee=[...A];for(let X=0;X<q.length;X++){const ae=q[X],Y=rh(ae);N.includes(Y)||(ee.splice(X,0,ae),V.push(ae))}return u==="wait"&&V.length&&(ee=V),B(Uw(ee)),$(A),null}const{forceRender:z}=R.useContext(rp);return C.jsx(C.Fragment,{children:q.map(ee=>{const X=rh(ee),ae=h&&!x?!1:A===q||N.includes(X),Y=()=>{if(j.has(X))j.set(X,!0);else return;let be=!0;j.forEach(Te=>{Te||(be=!1)}),be&&(z==null||z(),B(M.current),h&&(E==null||E()),r&&r())};return C.jsx(CP,{isPresent:ae,initial:!I.current||n?void 0:!1,custom:e,presenceAffectsLayout:l,mode:u,root:b,onExitComplete:ae?void 0:Y,anchorX:y,children:ee},X)})})},BS=R.createContext({strict:!1}),Fw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Nc={};for(const t in Fw)Nc[t]={isEnabled:e=>Fw[t].some(n=>!!e[n])};function TP(t){for(const e in t)Nc[e]={...Nc[e],...t[e]}}const _P=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ih(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||_P.has(t)}let PS=t=>!Ih(t);function NP(t){typeof t=="function"&&(PS=e=>e.startsWith("on")?!Ih(e):t(e))}try{NP(require("@emotion/is-prop-valid").default)}catch{}function RP(t,e,n){const r={};for(const l in t)l==="values"&&typeof t.values=="object"||(PS(l)||n===!0&&Ih(l)||!e&&!Ih(l)||t.draggable&&l.startsWith("onDrag"))&&(r[l]=t[l]);return r}function OP(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,l)=>l==="create"?t:(e.has(l)||e.set(l,t(l)),e.get(l))})}const Zh=R.createContext({});function Qh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function pf(t){return typeof t=="string"||Array.isArray(t)}const Ip=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Mp=["initial",...Ip];function Jh(t){return Qh(t.animate)||Mp.some(e=>pf(t[e]))}function US(t){return!!(Jh(t)||t.variants)}function IP(t,e){if(Jh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||pf(n)?n:void 0,animate:pf(r)?r:void 0}}return t.inherit!==!1?e:{}}function MP(t){const{initial:e,animate:n}=IP(t,R.useContext(Zh));return R.useMemo(()=>({initial:e,animate:n}),[Vw(e),Vw(n)])}function Vw(t){return Array.isArray(t)?t.join(" "):t}const DP=Symbol.for("motionComponentSymbol");function cc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function LP(t,e,n){return R.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):cc(n)&&(n.current=r))},[e])}const Dp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),kP="framerAppearId",FS="data-"+Dp(kP),VS=R.createContext({});function jP(t,e,n,r,l){var j,U;const{visualElement:u}=R.useContext(Zh),h=R.useContext(BS),y=R.useContext(Kh),b=R.useContext(Op).reducedMotion,x=R.useRef(null);r=r||h.renderer,!x.current&&r&&(x.current=r(t,{visualState:e,parent:u,props:n,presenceContext:y,blockInitialAnimation:y?y.initial===!1:!1,reducedMotionConfig:b}));const E=x.current,A=R.useContext(VS);E&&!E.projection&&l&&(E.type==="html"||E.type==="svg")&&BP(x.current,n,l,A);const N=R.useRef(!1);R.useInsertionEffect(()=>{E&&N.current&&E.update(n,y)});const I=n[FS],M=R.useRef(!!I&&!((j=window.MotionHandoffIsComplete)!=null&&j.call(window,I))&&((U=window.MotionHasOptimisedAnimation)==null?void 0:U.call(window,I)));return qE(()=>{E&&(N.current=!0,window.MotionIsMounted=!0,E.updateFeatures(),Np.render(E.render),M.current&&E.animationState&&E.animationState.animateChanges())}),R.useEffect(()=>{E&&(!M.current&&E.animationState&&E.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var $;($=window.MotionHandoffMarkAsComplete)==null||$.call(window,I)}),M.current=!1))}),E}function BP(t,e,n,r){const{layoutId:l,layout:u,drag:h,dragConstraints:y,layoutScroll:b,layoutRoot:x,layoutCrossfade:E}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:zS(t.parent)),t.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!h||y&&cc(y),visualElement:t,animationType:typeof u=="string"?u:"both",initialPromotionConfig:r,crossfade:E,layoutScroll:b,layoutRoot:x})}function zS(t){if(t)return t.options.allowProjection!==!1?t.projection:zS(t.parent)}function PP({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:l}){t&&TP(t);function u(y,b){let x;const E={...R.useContext(Op),...y,layoutId:UP(y)},{isStatic:A}=E,N=MP(y),I=r(y,A);if(!A&&op){FP();const M=VP(E);x=M.MeasureLayout,N.visualElement=jP(l,I,E,e,M.ProjectionNode)}return C.jsxs(Zh.Provider,{value:N,children:[x&&N.visualElement?C.jsx(x,{visualElement:N.visualElement,...E}):null,n(l,y,LP(I,N.visualElement,b),I,A,N.visualElement)]})}u.displayName=`motion.${typeof l=="string"?l:`create(${l.displayName??l.name??""})`}`;const h=R.forwardRef(u);return h[DP]=l,h}function UP({layoutId:t}){const e=R.useContext(rp).id;return e&&t!==void 0?e+"-"+t:t}function FP(t,e){R.useContext(BS).strict}function VP(t){const{drag:e,layout:n}=Nc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const xf={};function zP(t){for(const e in t)xf[e]=t[e],mp(e)&&(xf[e].isCSSVariable=!0)}function HS(t,{layout:e,layoutId:n}){return jc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!xf[t]||t==="opacity")}const HP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$P=kc.length;function GP(t,e,n){let r="",l=!0;for(let u=0;u<$P;u++){const h=kc[u],y=t[h];if(y===void 0)continue;let b=!0;if(typeof y=="number"?b=y===(h.startsWith("scale")?1:0):b=parseFloat(y)===0,!b||n){const x=IS(y,_p[h]);if(!b){l=!1;const E=HP[h]||h;r+=`${E}(${x}) `}n&&(e[h]=x)}}return r=r.trim(),n?r=n(e,l?"":r):l&&(r="none"),r}function Lp(t,e,n){const{style:r,vars:l,transformOrigin:u}=t;let h=!1,y=!1;for(const b in e){const x=e[b];if(jc.has(b)){h=!0;continue}else if(mp(b)){l[b]=x;continue}else{const E=IS(x,_p[b]);b.startsWith("origin")?(y=!0,u[b]=E):r[b]=E}}if(e.transform||(h||n?r.transform=GP(e,t.transform,n):r.transform&&(r.transform="none")),y){const{originX:b="50%",originY:x="50%",originZ:E=0}=u;r.transformOrigin=`${b} ${x} ${E}`}}const kp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $S(t,e,n){for(const r in e)!Ai(e[r])&&!HS(r,n)&&(t[r]=e[r])}function qP({transformTemplate:t},e){return R.useMemo(()=>{const n=kp();return Lp(n,e,t),Object.assign({},n.vars,n.style)},[e])}function YP(t,e){const n=t.style||{},r={};return $S(r,n,t),Object.assign(r,qP(t,e)),r}function XP(t,e){const n={},r=YP(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const WP={offset:"stroke-dashoffset",array:"stroke-dasharray"},KP={offset:"strokeDashoffset",array:"strokeDasharray"};function ZP(t,e,n=1,r=0,l=!0){t.pathLength=1;const u=l?WP:KP;t[u.offset]=at.transform(-r);const h=at.transform(e),y=at.transform(n);t[u.array]=`${h} ${y}`}function GS(t,{attrX:e,attrY:n,attrScale:r,pathLength:l,pathSpacing:u=1,pathOffset:h=0,...y},b,x,E){if(Lp(t,y,x),b){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:A,style:N}=t;A.transform&&(N.transform=A.transform,delete A.transform),(N.transform||A.transformOrigin)&&(N.transformOrigin=A.transformOrigin??"50% 50%",delete A.transformOrigin),N.transform&&(N.transformBox=(E==null?void 0:E.transformBox)??"fill-box",delete A.transformBox),e!==void 0&&(A.x=e),n!==void 0&&(A.y=n),r!==void 0&&(A.scale=r),l!==void 0&&ZP(A,l,u,h,!1)}const qS=()=>({...kp(),attrs:{}}),YS=t=>typeof t=="string"&&t.toLowerCase()==="svg";function QP(t,e,n,r){const l=R.useMemo(()=>{const u=qS();return GS(u,e,YS(r),t.transformTemplate,t.style),{...u.attrs,style:{...u.style}}},[e]);if(t.style){const u={};$S(u,t.style,t),l.style={...u,...l.style}}return l}const JP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jp(t){return typeof t!="string"||t.includes("-")?!1:!!(JP.indexOf(t)>-1||/[A-Z]/u.test(t))}function eU(t=!1){return(n,r,l,{latestValues:u},h)=>{const b=(jp(n)?QP:XP)(r,u,h,n),x=RP(r,typeof n=="string",t),E=n!==R.Fragment?{...x,...b,ref:l}:{},{children:A}=r,N=R.useMemo(()=>Ai(A)?A.get():A,[A]);return R.createElement(n,{...E,children:N})}}function zw(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Bp(t,e,n,r){if(typeof e=="function"){const[l,u]=zw(r);e=e(n!==void 0?n:t.custom,l,u)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[l,u]=zw(r);e=e(n!==void 0?n:t.custom,l,u)}return e}function hh(t){return Ai(t)?t.get():t}function tU({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,l){return{latestValues:nU(n,r,l,t),renderState:e()}}const XS=t=>(e,n)=>{const r=R.useContext(Zh),l=R.useContext(Kh),u=()=>tU(t,e,r,l);return n?u():ap(u)};function nU(t,e,n,r){const l={},u=r(t,{});for(const N in u)l[N]=hh(u[N]);let{initial:h,animate:y}=t;const b=Jh(t),x=US(t);e&&x&&!b&&t.inherit!==!1&&(h===void 0&&(h=e.initial),y===void 0&&(y=e.animate));let E=n?n.initial===!1:!1;E=E||h===!1;const A=E?y:h;if(A&&typeof A!="boolean"&&!Qh(A)){const N=Array.isArray(A)?A:[A];for(let I=0;I<N.length;I++){const M=Bp(t,N[I]);if(M){const{transitionEnd:j,transition:U,...$}=M;for(const q in $){let B=$[q];if(Array.isArray(B)){const V=E?B.length-1:0;B=B[V]}B!==null&&(l[q]=B)}for(const q in j)l[q]=j[q]}}}return l}function Pp(t,e,n){var u;const{style:r}=t,l={};for(const h in r)(Ai(r[h])||e.style&&Ai(e.style[h])||HS(h,t)||((u=n==null?void 0:n.getValue(h))==null?void 0:u.liveStyle)!==void 0)&&(l[h]=r[h]);return l}const iU={useVisualState:XS({scrapeMotionValuesFromProps:Pp,createRenderState:kp})};function WS(t,e,n){const r=Pp(t,e,n);for(const l in t)if(Ai(t[l])||Ai(e[l])){const u=kc.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;r[u]=t[l]}return r}const sU={useVisualState:XS({scrapeMotionValuesFromProps:WS,createRenderState:qS})};function rU(t,e){return function(r,{forwardMotionProps:l}={forwardMotionProps:!1}){const h={...jp(r)?sU:iU,preloadedFeatures:t,useRender:eU(l),createVisualElement:e,Component:r};return PP(h)}}function yf(t,e,n){const r=t.getProps();return Bp(r,e,n!==void 0?n:r.custom,t)}const Tm=t=>Array.isArray(t);function aU(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,_c(n))}function oU(t){return Tm(t)?t[t.length-1]||0:t}function lU(t,e){const n=yf(t,e);let{transitionEnd:r={},transition:l={},...u}=n||{};u={...u,...r};for(const h in u){const y=oU(u[h]);aU(t,h,y)}}function cU(t){return!!(Ai(t)&&t.add)}function _m(t,e){const n=t.getValue("willChange");if(cU(n))return n.add(e);if(!n&&ea.WillChange){const r=new ea.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function KS(t){return t.props[FS]}const uU=t=>t!==null;function fU(t,{repeat:e,repeatType:n="loop"},r){const l=t.filter(uU),u=e&&n!=="loop"&&e%2===1?0:l.length-1;return l[u]}const dU={type:"spring",stiffness:500,damping:25,restSpeed:10},hU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),gU={type:"keyframes",duration:.8},mU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pU=(t,{keyframes:e})=>e.length>2?gU:jc.has(t)?t.startsWith("scale")?hU(e[1]):dU:mU;function xU({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:l,repeat:u,repeatType:h,repeatDelay:y,from:b,elapsed:x,...E}){return!!Object.keys(E).length}const Up=(t,e,n,r={},l,u)=>h=>{const y=Tp(r,t)||{},b=y.delay||r.delay||0;let{elapsed:x=0}=r;x=x-pr(b);const E={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...y,delay:-x,onUpdate:N=>{e.set(N),y.onUpdate&&y.onUpdate(N)},onComplete:()=>{h(),y.onComplete&&y.onComplete()},name:t,motionValue:e,element:u?void 0:l};xU(y)||Object.assign(E,pU(t,E)),E.duration&&(E.duration=pr(E.duration)),E.repeatDelay&&(E.repeatDelay=pr(E.repeatDelay)),E.from!==void 0&&(E.keyframes[0]=E.from);let A=!1;if((E.type===!1||E.duration===0&&!E.repeatDelay)&&(E.duration=0,E.delay===0&&(A=!0)),(ea.instantAnimations||ea.skipAnimations)&&(A=!0,E.duration=0,E.delay=0),E.allowFlatten=!y.type&&!y.ease,A&&!u&&e.get()!==void 0){const N=fU(E.keyframes,y);if(N!==void 0){gn.update(()=>{E.onUpdate(N),E.onComplete()});return}}return y.isSync?new Sp(E):new ZB(E)};function yU({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function ZS(t,e,{delay:n=0,transitionOverride:r,type:l}={}){let{transition:u=t.getDefaultTransition(),transitionEnd:h,...y}=e;r&&(u=r);const b=[],x=l&&t.animationState&&t.animationState.getState()[l];for(const E in y){const A=t.getValue(E,t.latestValues[E]??null),N=y[E];if(N===void 0||x&&yU(x,E))continue;const I={delay:n,...Tp(u||{},E)},M=A.get();if(M!==void 0&&!A.isAnimating&&!Array.isArray(N)&&N===M&&!I.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const $=KS(t);if($){const q=window.MotionHandoffAnimation($,E,gn);q!==null&&(I.startTime=q,j=!0)}}_m(t,E),A.start(Up(E,A,N,t.shouldReduceMotion&&TS.has(E)?{type:!1}:I,t,j));const U=A.animation;U&&b.push(U)}return h&&Promise.all(b).then(()=>{gn.update(()=>{h&&lU(t,h)})}),b}function Nm(t,e,n={}){var b;const r=yf(t,e,n.type==="exit"?(b=t.presenceContext)==null?void 0:b.custom:void 0);let{transition:l=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(l=n.transitionOverride);const u=r?()=>Promise.all(ZS(t,r,n)):()=>Promise.resolve(),h=t.variantChildren&&t.variantChildren.size?(x=0)=>{const{delayChildren:E=0,staggerChildren:A,staggerDirection:N}=l;return bU(t,e,x,E,A,N,n)}:()=>Promise.resolve(),{when:y}=l;if(y){const[x,E]=y==="beforeChildren"?[u,h]:[h,u];return x().then(()=>E())}else return Promise.all([u(),h(n.delay)])}function bU(t,e,n=0,r=0,l=0,u=1,h){const y=[],b=t.variantChildren.size,x=(b-1)*l,E=typeof r=="function",A=E?N=>r(N,b):u===1?(N=0)=>N*l:(N=0)=>x-N*l;return Array.from(t.variantChildren).sort(wU).forEach((N,I)=>{N.notify("AnimationStart",e),y.push(Nm(N,e,{...h,delay:n+(E?0:r)+A(I)}).then(()=>N.notify("AnimationComplete",e)))}),Promise.all(y)}function wU(t,e){return t.sortNodePosition(e)}function vU(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const l=e.map(u=>Nm(t,u,n));r=Promise.all(l)}else if(typeof e=="string")r=Nm(t,e,n);else{const l=typeof e=="function"?yf(t,e,n.custom):e;r=Promise.all(ZS(t,l,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function QS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const EU=Mp.length;function JS(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?JS(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<EU;n++){const r=Mp[n],l=t.props[r];(pf(l)||l===!1)&&(e[r]=l)}return e}const SU=[...Ip].reverse(),CU=Ip.length;function AU(t){return e=>Promise.all(e.map(({animation:n,options:r})=>vU(t,n,r)))}function TU(t){let e=AU(t),n=Hw(),r=!0;const l=b=>(x,E)=>{var N;const A=yf(t,E,b==="exit"?(N=t.presenceContext)==null?void 0:N.custom:void 0);if(A){const{transition:I,transitionEnd:M,...j}=A;x={...x,...j,...M}}return x};function u(b){e=b(t)}function h(b){const{props:x}=t,E=JS(t.parent)||{},A=[],N=new Set;let I={},M=1/0;for(let U=0;U<CU;U++){const $=SU[U],q=n[$],B=x[$]!==void 0?x[$]:E[$],V=pf(B),z=$===b?q.isActive:null;z===!1&&(M=U);let ee=B===E[$]&&B!==x[$]&&V;if(ee&&r&&t.manuallyAnimateOnMount&&(ee=!1),q.protectedKeys={...I},!q.isActive&&z===null||!B&&!q.prevProp||Qh(B)||typeof B=="boolean")continue;const X=_U(q.prevProp,B);let ae=X||$===b&&q.isActive&&!ee&&V||U>M&&V,Y=!1;const be=Array.isArray(B)?B:[B];let Te=be.reduce(l($),{});z===!1&&(Te={});const{prevResolvedValues:ve={}}=q,le={...ve,...Te},ke=fe=>{ae=!0,N.has(fe)&&(Y=!0,N.delete(fe)),q.needsAnimating[fe]=!0;const Ie=t.getValue(fe);Ie&&(Ie.liveStyle=!1)};for(const fe in le){const Ie=Te[fe],Ue=ve[fe];if(I.hasOwnProperty(fe))continue;let W=!1;Tm(Ie)&&Tm(Ue)?W=!QS(Ie,Ue):W=Ie!==Ue,W?Ie!=null?ke(fe):N.add(fe):Ie!==void 0&&N.has(fe)?ke(fe):q.protectedKeys[fe]=!0}q.prevProp=B,q.prevResolvedValues=Te,q.isActive&&(I={...I,...Te}),r&&t.blockInitialAnimation&&(ae=!1),ae&&(!(ee&&X)||Y)&&A.push(...be.map(fe=>({animation:fe,options:{type:$}})))}if(N.size){const U={};if(typeof x.initial!="boolean"){const $=yf(t,Array.isArray(x.initial)?x.initial[0]:x.initial);$&&$.transition&&(U.transition=$.transition)}N.forEach($=>{const q=t.getBaseTarget($),B=t.getValue($);B&&(B.liveStyle=!0),U[$]=q??null}),A.push({animation:U})}let j=!!A.length;return r&&(x.initial===!1||x.initial===x.animate)&&!t.manuallyAnimateOnMount&&(j=!1),r=!1,j?e(A):Promise.resolve()}function y(b,x){var A;if(n[b].isActive===x)return Promise.resolve();(A=t.variantChildren)==null||A.forEach(N=>{var I;return(I=N.animationState)==null?void 0:I.setActive(b,x)}),n[b].isActive=x;const E=h(b);for(const N in n)n[N].protectedKeys={};return E}return{animateChanges:h,setActive:y,setAnimateFunction:u,getState:()=>n,reset:()=>{n=Hw(),r=!0}}}function _U(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!QS(e,t):!1}function Bo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Hw(){return{animate:Bo(!0),whileInView:Bo(),whileHover:Bo(),whileTap:Bo(),whileDrag:Bo(),whileFocus:Bo(),exit:Bo()}}class uo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class NU extends uo{constructor(e){super(e),e.animationState||(e.animationState=TU(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Qh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let RU=0;class OU extends uo{constructor(){super(...arguments),this.id=RU++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const l=this.node.animationState.setActive("exit",!e);n&&!e&&l.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const IU={animation:{Feature:NU},exit:{Feature:OU}};function bf(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Df(t){return{point:{x:t.pageX,y:t.pageY}}}const MU=t=>e=>Rp(e)&&t(e,Df(e));function rf(t,e,n,r){return bf(t,e,MU(n),r)}function eC({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function DU({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function LU(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const tC=1e-4,kU=1-tC,jU=1+tC,nC=.01,BU=0-nC,PU=0+nC;function Di(t){return t.max-t.min}function UU(t,e,n){return Math.abs(t-e)<=n}function $w(t,e,n,r=.5){t.origin=r,t.originPoint=yn(e.min,e.max,t.origin),t.scale=Di(n)/Di(e),t.translate=yn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=kU&&t.scale<=jU||isNaN(t.scale))&&(t.scale=1),(t.translate>=BU&&t.translate<=PU||isNaN(t.translate))&&(t.translate=0)}function af(t,e,n,r){$w(t.x,e.x,n.x,r?r.originX:void 0),$w(t.y,e.y,n.y,r?r.originY:void 0)}function Gw(t,e,n){t.min=n.min+e.min,t.max=t.min+Di(e)}function FU(t,e,n){Gw(t.x,e.x,n.x),Gw(t.y,e.y,n.y)}function qw(t,e,n){t.min=e.min-n.min,t.max=t.min+Di(e)}function of(t,e,n){qw(t.x,e.x,n.x),qw(t.y,e.y,n.y)}const Yw=()=>({translate:0,scale:1,origin:0,originPoint:0}),uc=()=>({x:Yw(),y:Yw()}),Xw=()=>({min:0,max:0}),Ln=()=>({x:Xw(),y:Xw()});function vs(t){return[t("x"),t("y")]}function Sg(t){return t===void 0||t===1}function Rm({scale:t,scaleX:e,scaleY:n}){return!Sg(t)||!Sg(e)||!Sg(n)}function Fo(t){return Rm(t)||iC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function iC(t){return Ww(t.x)||Ww(t.y)}function Ww(t){return t&&t!=="0%"}function Mh(t,e,n){const r=t-n,l=e*r;return n+l}function Kw(t,e,n,r,l){return l!==void 0&&(t=Mh(t,l,r)),Mh(t,n,r)+e}function Om(t,e=0,n=1,r,l){t.min=Kw(t.min,e,n,r,l),t.max=Kw(t.max,e,n,r,l)}function sC(t,{x:e,y:n}){Om(t.x,e.translate,e.scale,e.originPoint),Om(t.y,n.translate,n.scale,n.originPoint)}const Zw=.999999999999,Qw=1.0000000000001;function VU(t,e,n,r=!1){const l=n.length;if(!l)return;e.x=e.y=1;let u,h;for(let y=0;y<l;y++){u=n[y],h=u.projectionDelta;const{visualElement:b}=u.options;b&&b.props.style&&b.props.style.display==="contents"||(r&&u.options.layoutScroll&&u.scroll&&u!==u.root&&dc(t,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),h&&(e.x*=h.x.scale,e.y*=h.y.scale,sC(t,h)),r&&Fo(u.latestValues)&&dc(t,u.latestValues))}e.x<Qw&&e.x>Zw&&(e.x=1),e.y<Qw&&e.y>Zw&&(e.y=1)}function fc(t,e){t.min=t.min+e,t.max=t.max+e}function Jw(t,e,n,r,l=.5){const u=yn(t.min,t.max,l);Om(t,e,n,u,r)}function dc(t,e){Jw(t.x,e.x,e.scaleX,e.scale,e.originX),Jw(t.y,e.y,e.scaleY,e.scale,e.originY)}function rC(t,e){return eC(LU(t.getBoundingClientRect(),e))}function zU(t,e,n){const r=rC(t,n),{scroll:l}=e;return l&&(fc(r.x,l.offset.x),fc(r.y,l.offset.y)),r}const aC=({current:t})=>t?t.ownerDocument.defaultView:null,ev=(t,e)=>Math.abs(t-e);function HU(t,e){const n=ev(t.x,e.x),r=ev(t.y,e.y);return Math.sqrt(n**2+r**2)}class oC{constructor(e,n,{transformPagePoint:r,contextWindow:l=window,dragSnapToOrigin:u=!1,distanceThreshold:h=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Ag(this.lastMoveEventInfo,this.history),I=this.startEvent!==null,M=HU(N.offset,{x:0,y:0})>=this.distanceThreshold;if(!I&&!M)return;const{point:j}=N,{timestamp:U}=di;this.history.push({...j,timestamp:U});const{onStart:$,onMove:q}=this.handlers;I||($&&$(this.lastMoveEvent,N),this.startEvent=this.lastMoveEvent),q&&q(this.lastMoveEvent,N)},this.handlePointerMove=(N,I)=>{this.lastMoveEvent=N,this.lastMoveEventInfo=Cg(I,this.transformPagePoint),gn.update(this.updatePoint,!0)},this.handlePointerUp=(N,I)=>{this.end();const{onEnd:M,onSessionEnd:j,resumeAnimation:U}=this.handlers;if(this.dragSnapToOrigin&&U&&U(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const $=Ag(N.type==="pointercancel"?this.lastMoveEventInfo:Cg(I,this.transformPagePoint),this.history);this.startEvent&&M&&M(N,$),j&&j(N,$)},!Rp(e))return;this.dragSnapToOrigin=u,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=h,this.contextWindow=l||window;const y=Df(e),b=Cg(y,this.transformPagePoint),{point:x}=b,{timestamp:E}=di;this.history=[{...x,timestamp:E}];const{onSessionStart:A}=n;A&&A(e,Ag(b,this.history)),this.removeListeners=Of(rf(this.contextWindow,"pointermove",this.handlePointerMove),rf(this.contextWindow,"pointerup",this.handlePointerUp),rf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ao(this.updatePoint)}}function Cg(t,e){return e?{point:e(t.point)}:t}function tv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ag({point:t},e){return{point:t,delta:tv(t,lC(e)),offset:tv(t,$U(e)),velocity:GU(e,.1)}}function $U(t){return t[0]}function lC(t){return t[t.length-1]}function GU(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const l=lC(t);for(;n>=0&&(r=t[n],!(l.timestamp-r.timestamp>pr(e)));)n--;if(!r)return{x:0,y:0};const u=xr(l.timestamp-r.timestamp);if(u===0)return{x:0,y:0};const h={x:(l.x-r.x)/u,y:(l.y-r.y)/u};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function qU(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?yn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?yn(n,t,r.max):Math.min(t,n)),t}function nv(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function YU(t,{top:e,left:n,bottom:r,right:l}){return{x:nv(t.x,n,l),y:nv(t.y,e,r)}}function iv(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function XU(t,e){return{x:iv(t.x,e.x),y:iv(t.y,e.y)}}function WU(t,e){let n=.5;const r=Di(t),l=Di(e);return l>r?n=hf(e.min,e.max-r,t.min):r>l&&(n=hf(t.min,t.max-l,e.min)),Jr(0,1,n)}function KU(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Im=.35;function ZU(t=Im){return t===!1?t=0:t===!0&&(t=Im),{x:sv(t,"left","right"),y:sv(t,"top","bottom")}}function sv(t,e,n){return{min:rv(t,e),max:rv(t,n)}}function rv(t,e){return typeof t=="number"?t:t[e]||0}const QU=new WeakMap;class JU{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ln(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const u=A=>{const{dragSnapToOrigin:N}=this.getProps();N?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Df(A).point)},h=(A,N)=>{const{drag:I,dragPropagation:M,onDragStart:j}=this.getProps();if(I&&!M&&(this.openDragLock&&this.openDragLock(),this.openDragLock=hP(I),!this.openDragLock))return;this.latestPointerEvent=A,this.latestPanInfo=N,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vs($=>{let q=this.getAxisMotionValue($).get()||0;if(yr.test(q)){const{projection:B}=this.visualElement;if(B&&B.layout){const V=B.layout.layoutBox[$];V&&(q=Di(V)*(parseFloat(q)/100))}}this.originPoint[$]=q}),j&&gn.postRender(()=>j(A,N)),_m(this.visualElement,"transform");const{animationState:U}=this.visualElement;U&&U.setActive("whileDrag",!0)},y=(A,N)=>{this.latestPointerEvent=A,this.latestPanInfo=N;const{dragPropagation:I,dragDirectionLock:M,onDirectionLock:j,onDrag:U}=this.getProps();if(!I&&!this.openDragLock)return;const{offset:$}=N;if(M&&this.currentDirection===null){this.currentDirection=eF($),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",N.point,$),this.updateAxis("y",N.point,$),this.visualElement.render(),U&&U(A,N)},b=(A,N)=>{this.latestPointerEvent=A,this.latestPanInfo=N,this.stop(A,N),this.latestPointerEvent=null,this.latestPanInfo=null},x=()=>vs(A=>{var N;return this.getAnimationState(A)==="paused"&&((N=this.getAxisMotionValue(A).animation)==null?void 0:N.play())}),{dragSnapToOrigin:E}=this.getProps();this.panSession=new oC(e,{onSessionStart:u,onStart:h,onMove:y,onSessionEnd:b,resumeAnimation:x},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:E,distanceThreshold:r,contextWindow:aC(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,l=n||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!l||!r)return;const{velocity:h}=l;this.startAnimation(h);const{onDragEnd:y}=this.getProps();y&&gn.postRender(()=>y(r,l))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:l}=this.getProps();if(!r||!ah(e,l,this.currentDirection))return;const u=this.getAxisMotionValue(e);let h=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(h=qU(h,this.constraints[e],this.elastic[e])),u.set(h)}resolveConstraints(){var u;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(u=this.visualElement.projection)==null?void 0:u.layout,l=this.constraints;e&&cc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=YU(r.layoutBox,e):this.constraints=!1,this.elastic=ZU(n),l!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&vs(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=KU(r.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!cc(e))return!1;const r=e.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const u=zU(r,l.root,this.visualElement.getTransformPagePoint());let h=XU(l.layout.layoutBox,u);if(n){const y=n(DU(h));this.hasMutatedConstraints=!!y,y&&(h=eC(y))}return h}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:l,dragTransition:u,dragSnapToOrigin:h,onDragTransitionEnd:y}=this.getProps(),b=this.constraints||{},x=vs(E=>{if(!ah(E,n,this.currentDirection))return;let A=b&&b[E]||{};h&&(A={min:0,max:0});const N=l?200:1e6,I=l?40:1e7,M={type:"inertia",velocity:r?e[E]:0,bounceStiffness:N,bounceDamping:I,timeConstant:750,restDelta:1,restSpeed:10,...u,...A};return this.startAxisValueAnimation(E,M)});return Promise.all(x).then(y)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return _m(this.visualElement,e),r.start(Up(e,r,0,n,this.visualElement,!1))}stopAnimation(){vs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vs(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),l=r[n];return l||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){vs(n=>{const{drag:r}=this.getProps();if(!ah(n,r,this.currentDirection))return;const{projection:l}=this.visualElement,u=this.getAxisMotionValue(n);if(l&&l.layout){const{min:h,max:y}=l.layout.layoutBox[n];u.set(e[n]-yn(h,y,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!cc(n)||!r||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};vs(h=>{const y=this.getAxisMotionValue(h);if(y&&this.constraints!==!1){const b=y.get();l[h]=WU({min:b,max:b},this.constraints[h])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),vs(h=>{if(!ah(h,e,null))return;const y=this.getAxisMotionValue(h),{min:b,max:x}=this.constraints[h];y.set(yn(b,x,l[h]))})}addListeners(){if(!this.visualElement.current)return;QU.set(this.visualElement,this);const e=this.visualElement.current,n=rf(e,"pointerdown",b=>{const{drag:x,dragListener:E=!0}=this.getProps();x&&E&&this.start(b)}),r=()=>{const{dragConstraints:b}=this.getProps();cc(b)&&b.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,u=l.addEventListener("measure",r);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),gn.read(r);const h=bf(window,"resize",()=>this.scalePositionWithinConstraints()),y=l.addEventListener("didUpdate",({delta:b,hasLayoutChanged:x})=>{this.isDragging&&x&&(vs(E=>{const A=this.getAxisMotionValue(E);A&&(this.originPoint[E]+=b[E].translate,A.set(A.get()+b[E].translate))}),this.visualElement.render())});return()=>{h(),n(),u(),y&&y()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:l=!1,dragConstraints:u=!1,dragElastic:h=Im,dragMomentum:y=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:l,dragConstraints:u,dragElastic:h,dragMomentum:y}}}function ah(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function eF(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class tF extends uo{constructor(e){super(e),this.removeGroupControls=Cs,this.removeListeners=Cs,this.controls=new JU(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Cs}unmount(){this.removeGroupControls(),this.removeListeners()}}const av=t=>(e,n)=>{t&&gn.postRender(()=>t(e,n))};class nF extends uo{constructor(){super(...arguments),this.removePointerDownListener=Cs}onPointerDown(e){this.session=new oC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:l}=this.node.getProps();return{onSessionStart:av(e),onStart:av(n),onMove:r,onEnd:(u,h)=>{delete this.session,l&&gn.postRender(()=>l(u,h))}}}mount(){this.removePointerDownListener=rf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const gh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ov(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Pu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(at.test(t))t=parseFloat(t);else return t;const n=ov(t,e.target.x),r=ov(t,e.target.y);return`${n}% ${r}%`}},iF={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,l=oo.parse(t);if(l.length>5)return r;const u=oo.createTransformer(t),h=typeof l[0]!="number"?1:0,y=n.x.scale*e.x,b=n.y.scale*e.y;l[0+h]/=y,l[1+h]/=b;const x=yn(y,b,.5);return typeof l[2+h]=="number"&&(l[2+h]/=x),typeof l[3+h]=="number"&&(l[3+h]/=x),u(l)}};let lv=!1;class sF extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:l}=this.props,{projection:u}=e;zP(rF),u&&(n.group&&n.group.add(u),r&&r.register&&l&&r.register(u),lv&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),gh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:l,isPresent:u}=this.props,{projection:h}=r;return h&&(h.isPresent=u,lv=!0,l||e.layoutDependency!==n||n===void 0||e.isPresent!==u?h.willUpdate():this.safeToRemove(),e.isPresent!==u&&(u?h.promote():h.relegate()||gn.postRender(()=>{const y=h.getStack();(!y||!y.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Np.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:l}=e;l&&(l.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(l),r&&r.deregister&&r.deregister(l))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function cC(t){const[e,n]=jS(),r=R.useContext(rp);return C.jsx(sF,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(VS),isPresent:e,safeToRemove:n})}const rF={borderRadius:{...Pu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pu,borderTopRightRadius:Pu,borderBottomLeftRadius:Pu,borderBottomRightRadius:Pu,boxShadow:iF};function aF(t,e,n){const r=Ai(t)?t:_c(t);return r.start(Up("",r,e,n)),r.animation}const oF=(t,e)=>t.depth-e.depth;class lF{constructor(){this.children=[],this.isDirty=!1}add(e){lp(this.children,e),this.isDirty=!0}remove(e){cp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(oF),this.isDirty=!1,this.children.forEach(e)}}function cF(t,e){const n=Yi.now(),r=({timestamp:l})=>{const u=l-n;u>=e&&(ao(r),t(u-e))};return gn.setup(r,!0),()=>ao(r)}const uC=["TopLeft","TopRight","BottomLeft","BottomRight"],uF=uC.length,cv=t=>typeof t=="string"?parseFloat(t):t,uv=t=>typeof t=="number"||at.test(t);function fF(t,e,n,r,l,u){l?(t.opacity=yn(0,n.opacity??1,dF(r)),t.opacityExit=yn(e.opacity??1,0,hF(r))):u&&(t.opacity=yn(e.opacity??1,n.opacity??1,r));for(let h=0;h<uF;h++){const y=`border${uC[h]}Radius`;let b=fv(e,y),x=fv(n,y);if(b===void 0&&x===void 0)continue;b||(b=0),x||(x=0),b===0||x===0||uv(b)===uv(x)?(t[y]=Math.max(yn(cv(b),cv(x),r),0),(yr.test(x)||yr.test(b))&&(t[y]+="%")):t[y]=x}(e.rotate||n.rotate)&&(t.rotate=yn(e.rotate||0,n.rotate||0,r))}function fv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const dF=fC(0,.5,iS),hF=fC(.5,.95,Cs);function fC(t,e,n){return r=>r<t?0:r>e?1:n(hf(t,e,r))}function dv(t,e){t.min=e.min,t.max=e.max}function ws(t,e){dv(t.x,e.x),dv(t.y,e.y)}function hv(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function gv(t,e,n,r,l){return t-=e,t=Mh(t,1/n,r),l!==void 0&&(t=Mh(t,1/l,r)),t}function gF(t,e=0,n=1,r=.5,l,u=t,h=t){if(yr.test(e)&&(e=parseFloat(e),e=yn(h.min,h.max,e/100)-h.min),typeof e!="number")return;let y=yn(u.min,u.max,r);t===u&&(y-=e),t.min=gv(t.min,e,n,y,l),t.max=gv(t.max,e,n,y,l)}function mv(t,e,[n,r,l],u,h){gF(t,e[n],e[r],e[l],e.scale,u,h)}const mF=["x","scaleX","originX"],pF=["y","scaleY","originY"];function pv(t,e,n,r){mv(t.x,e,mF,n?n.x:void 0,r?r.x:void 0),mv(t.y,e,pF,n?n.y:void 0,r?r.y:void 0)}function xv(t){return t.translate===0&&t.scale===1}function dC(t){return xv(t.x)&&xv(t.y)}function yv(t,e){return t.min===e.min&&t.max===e.max}function xF(t,e){return yv(t.x,e.x)&&yv(t.y,e.y)}function bv(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function hC(t,e){return bv(t.x,e.x)&&bv(t.y,e.y)}function wv(t){return Di(t.x)/Di(t.y)}function vv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class yF{constructor(){this.members=[]}add(e){lp(this.members,e),e.scheduleRender()}remove(e){if(cp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(l=>e===l);if(n===0)return!1;let r;for(let l=n;l>=0;l--){const u=this.members[l];if(u.isPresent!==!1){r=u;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:l}=e.options;l===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function bF(t,e,n){let r="";const l=t.x.translate/e.x,u=t.y.translate/e.y,h=(n==null?void 0:n.z)||0;if((l||u||h)&&(r=`translate3d(${l}px, ${u}px, ${h}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:x,rotate:E,rotateX:A,rotateY:N,skewX:I,skewY:M}=n;x&&(r=`perspective(${x}px) ${r}`),E&&(r+=`rotate(${E}deg) `),A&&(r+=`rotateX(${A}deg) `),N&&(r+=`rotateY(${N}deg) `),I&&(r+=`skewX(${I}deg) `),M&&(r+=`skewY(${M}deg) `)}const y=t.x.scale*e.x,b=t.y.scale*e.y;return(y!==1||b!==1)&&(r+=`scale(${y}, ${b})`),r||"none"}const Tg=["","X","Y","Z"],wF=1e3;let vF=0;function _g(t,e,n,r){const{latestValues:l}=e;l[t]&&(n[t]=l[t],e.setStaticValue(t,0),r&&(r[t]=0))}function gC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=KS(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:l,layoutId:u}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",gn,!(l||u))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&gC(r)}function mC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:l}){return class{constructor(h={},y=e==null?void 0:e()){this.id=vF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(CF),this.nodes.forEach(NF),this.nodes.forEach(RF),this.nodes.forEach(AF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=y?y.root||y:this,this.path=y?[...y.path,y]:[],this.parent=y,this.depth=y?y.depth+1:0;for(let b=0;b<this.path.length;b++)this.path[b].shouldResetTransform=!0;this.root===this&&(this.nodes=new lF)}addEventListener(h,y){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new dp),this.eventHandlers.get(h).add(y)}notifyListeners(h,...y){const b=this.eventHandlers.get(h);b&&b.notify(...y)}hasListeners(h){return this.eventHandlers.has(h)}mount(h){if(this.instance)return;this.isSVG=kS(h)&&!bP(h),this.instance=h;const{layoutId:y,layout:b,visualElement:x}=this.options;if(x&&!x.current&&x.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(b||y)&&(this.isLayoutDirty=!0),t){let E,A=0;const N=()=>this.root.updateBlockedByResize=!1;gn.read(()=>{A=window.innerWidth}),t(h,()=>{const I=window.innerWidth;I!==A&&(A=I,this.root.updateBlockedByResize=!0,E&&E(),E=cF(N,250),gh.hasAnimatedSinceResize&&(gh.hasAnimatedSinceResize=!1,this.nodes.forEach(Cv)))})}y&&this.root.registerSharedNode(y,this),this.options.animate!==!1&&x&&(y||b)&&this.addEventListener("didUpdate",({delta:E,hasLayoutChanged:A,hasRelativeLayoutChanged:N,layout:I})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||x.getDefaultTransition()||LF,{onLayoutAnimationStart:j,onLayoutAnimationComplete:U}=x.getProps(),$=!this.targetLayout||!hC(this.targetLayout,I),q=!A&&N;if(this.options.layoutRoot||this.resumeFrom||q||A&&($||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const B={...Tp(M,"layout"),onPlay:j,onComplete:U};(x.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B),this.setAnimationOrigin(E,q)}else A||Cv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=I})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ao(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(OF),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let E=0;E<this.path.length;E++){const A=this.path[E];A.shouldResetTransform=!0,A.updateScroll("snapshot"),A.options.layoutRoot&&A.willUpdate(!1)}const{layoutId:y,layout:b}=this.options;if(y===void 0&&!b)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ev);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Sv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(_F),this.nodes.forEach(EF),this.nodes.forEach(SF)):this.nodes.forEach(Sv),this.clearAllSnapshots();const y=Yi.now();di.delta=Jr(0,1e3/60,y-di.timestamp),di.timestamp=y,di.isProcessing=!0,xg.update.process(di),xg.preRender.process(di),xg.render.process(di),di.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Np.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(TF),this.sharedNodes.forEach(IF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Di(this.snapshot.measuredBox.x)&&!Di(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let b=0;b<this.path.length;b++)this.path[b].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:y}=this.options;y&&y.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let y=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(y=!1),y&&this.instance){const b=r(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:b,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:b}}}resetTransform(){if(!l)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,y=this.projectionDelta&&!dC(this.projectionDelta),b=this.getTransformTemplate(),x=b?b(this.latestValues,""):void 0,E=x!==this.prevTransformTemplateValue;h&&this.instance&&(y||Fo(this.latestValues)||E)&&(l(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const y=this.measurePageBox();let b=this.removeElementScroll(y);return h&&(b=this.removeTransform(b)),kF(b),{animationId:this.root.animationId,measuredBox:y,layoutBox:b,latestValues:{},source:this.id}}measurePageBox(){var x;const{visualElement:h}=this.options;if(!h)return Ln();const y=h.measureViewportBox();if(!(((x=this.scroll)==null?void 0:x.wasRoot)||this.path.some(jF))){const{scroll:E}=this.root;E&&(fc(y.x,E.offset.x),fc(y.y,E.offset.y))}return y}removeElementScroll(h){var b;const y=Ln();if(ws(y,h),(b=this.scroll)!=null&&b.wasRoot)return y;for(let x=0;x<this.path.length;x++){const E=this.path[x],{scroll:A,options:N}=E;E!==this.root&&A&&N.layoutScroll&&(A.wasRoot&&ws(y,h),fc(y.x,A.offset.x),fc(y.y,A.offset.y))}return y}applyTransform(h,y=!1){const b=Ln();ws(b,h);for(let x=0;x<this.path.length;x++){const E=this.path[x];!y&&E.options.layoutScroll&&E.scroll&&E!==E.root&&dc(b,{x:-E.scroll.offset.x,y:-E.scroll.offset.y}),Fo(E.latestValues)&&dc(b,E.latestValues)}return Fo(this.latestValues)&&dc(b,this.latestValues),b}removeTransform(h){const y=Ln();ws(y,h);for(let b=0;b<this.path.length;b++){const x=this.path[b];if(!x.instance||!Fo(x.latestValues))continue;Rm(x.latestValues)&&x.updateSnapshot();const E=Ln(),A=x.measurePageBox();ws(E,A),pv(y,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,E)}return Fo(this.latestValues)&&pv(y,this.latestValues),y}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==di.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var N;const y=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=y.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=y.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=y.isSharedProjectionDirty);const b=!!this.resumingFrom||this!==y;if(!(h||b&&this.isSharedProjectionDirty||this.isProjectionDirty||(N=this.parent)!=null&&N.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:E,layoutId:A}=this.options;if(!(!this.layout||!(E||A))){if(this.resolvedRelativeTargetAt=di.timestamp,!this.targetDelta&&!this.relativeTarget){const I=this.getClosestProjectingParent();I&&I.layout&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ln(),this.relativeTargetOrigin=Ln(),of(this.relativeTargetOrigin,this.layout.layoutBox,I.layout.layoutBox),ws(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ln(),this.targetWithTransforms=Ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),FU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ws(this.target,this.layout.layoutBox),sC(this.target,this.targetDelta)):ws(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const I=this.getClosestProjectingParent();I&&!!I.resumingFrom==!!this.resumingFrom&&!I.options.layoutScroll&&I.target&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ln(),this.relativeTargetOrigin=Ln(),of(this.relativeTargetOrigin,this.target,I.target),ws(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Rm(this.parent.latestValues)||iC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var M;const h=this.getLead(),y=!!this.resumingFrom||this!==h;let b=!0;if((this.isProjectionDirty||(M=this.parent)!=null&&M.isProjectionDirty)&&(b=!1),y&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(b=!1),this.resolvedRelativeTargetAt===di.timestamp&&(b=!1),b)return;const{layout:x,layoutId:E}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||E))return;ws(this.layoutCorrected,this.layout.layoutBox);const A=this.treeScale.x,N=this.treeScale.y;VU(this.layoutCorrected,this.treeScale,this.path,y),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=Ln());const{target:I}=h;if(!I){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hv(this.prevProjectionDelta.x,this.projectionDelta.x),hv(this.prevProjectionDelta.y,this.projectionDelta.y)),af(this.projectionDelta,this.layoutCorrected,I,this.latestValues),(this.treeScale.x!==A||this.treeScale.y!==N||!vv(this.projectionDelta.x,this.prevProjectionDelta.x)||!vv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",I))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){var y;if((y=this.options.visualElement)==null||y.scheduleRender(),h){const b=this.getStack();b&&b.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=uc(),this.projectionDelta=uc(),this.projectionDeltaWithTransform=uc()}setAnimationOrigin(h,y=!1){const b=this.snapshot,x=b?b.latestValues:{},E={...this.latestValues},A=uc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!y;const N=Ln(),I=b?b.source:void 0,M=this.layout?this.layout.source:void 0,j=I!==M,U=this.getStack(),$=!U||U.members.length<=1,q=!!(j&&!$&&this.options.crossfade===!0&&!this.path.some(DF));this.animationProgress=0;let B;this.mixTargetDelta=V=>{const z=V/1e3;Av(A.x,h.x,z),Av(A.y,h.y,z),this.setTargetDelta(A),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(of(N,this.layout.layoutBox,this.relativeParent.layout.layoutBox),MF(this.relativeTarget,this.relativeTargetOrigin,N,z),B&&xF(this.relativeTarget,B)&&(this.isProjectionDirty=!1),B||(B=Ln()),ws(B,this.relativeTarget)),j&&(this.animationValues=E,fF(E,x,this.latestValues,z,q,$)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){var y,b,x;this.notifyListeners("animationStart"),(y=this.currentAnimation)==null||y.stop(),(x=(b=this.resumingFrom)==null?void 0:b.currentAnimation)==null||x.stop(),this.pendingAnimation&&(ao(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gn.update(()=>{gh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=_c(0)),this.currentAnimation=aF(this.motionValue,[0,1e3],{...h,velocity:0,isSync:!0,onUpdate:E=>{this.mixTargetDelta(E),h.onUpdate&&h.onUpdate(E)},onStop:()=>{},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(wF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:y,target:b,layout:x,latestValues:E}=h;if(!(!y||!b||!x)){if(this!==h&&this.layout&&x&&pC(this.options.animationType,this.layout.layoutBox,x.layoutBox)){b=this.target||Ln();const A=Di(this.layout.layoutBox.x);b.x.min=h.target.x.min,b.x.max=b.x.min+A;const N=Di(this.layout.layoutBox.y);b.y.min=h.target.y.min,b.y.max=b.y.min+N}ws(y,b),dc(y,E),af(this.projectionDeltaWithTransform,this.layoutCorrected,y,E)}}registerSharedNode(h,y){this.sharedNodes.has(h)||this.sharedNodes.set(h,new yF),this.sharedNodes.get(h).add(y);const x=y.options.initialPromotionConfig;y.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(y):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var y;const{layoutId:h}=this.options;return h?((y=this.getStack())==null?void 0:y.lead)||this:this}getPrevLead(){var y;const{layoutId:h}=this.options;return h?(y=this.getStack())==null?void 0:y.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:y,preserveFollowOpacity:b}={}){const x=this.getStack();x&&x.promote(this,b),h&&(this.projectionDelta=void 0,this.needsReset=!0),y&&this.setOptions({transition:y})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let y=!1;const{latestValues:b}=h;if((b.z||b.rotate||b.rotateX||b.rotateY||b.rotateZ||b.skewX||b.skewY)&&(y=!0),!y)return;const x={};b.z&&_g("z",h,x,this.animationValues);for(let E=0;E<Tg.length;E++)_g(`rotate${Tg[E]}`,h,x,this.animationValues),_g(`skew${Tg[E]}`,h,x,this.animationValues);h.render();for(const E in x)h.setStaticValue(E,x[E]),this.animationValues&&(this.animationValues[E]=x[E]);h.scheduleRender()}applyProjectionStyles(h,y){if(!this.instance||this.isSVG)return;if(!this.isVisible){h.visibility="hidden";return}const b=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,h.visibility="",h.opacity="",h.pointerEvents=hh(y==null?void 0:y.pointerEvents)||"",h.transform=b?b(this.latestValues,""):"none";return}const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){this.options.layoutId&&(h.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,h.pointerEvents=hh(y==null?void 0:y.pointerEvents)||""),this.hasProjected&&!Fo(this.latestValues)&&(h.transform=b?b({},""):"none",this.hasProjected=!1);return}h.visibility="";const E=x.animationValues||x.latestValues;this.applyTransformsToTarget();let A=bF(this.projectionDeltaWithTransform,this.treeScale,E);b&&(A=b(E,A)),h.transform=A;const{x:N,y:I}=this.projectionDelta;h.transformOrigin=`${N.origin*100}% ${I.origin*100}% 0`,x.animationValues?h.opacity=x===this?E.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:h.opacity=x===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const M in xf){if(E[M]===void 0)continue;const{correct:j,applyTo:U,isCSSVariable:$}=xf[M],q=A==="none"?E[M]:j(E[M],x);if(U){const B=U.length;for(let V=0;V<B;V++)h[U[V]]=q}else $?this.options.visualElement.renderState.vars[M]=q:h[M]=q}this.options.layoutId&&(h.pointerEvents=x===this?hh(y==null?void 0:y.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var y;return(y=h.currentAnimation)==null?void 0:y.stop()}),this.root.nodes.forEach(Ev),this.root.sharedNodes.clear()}}}function EF(t){t.updateLayout()}function SF(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:l}=t.layout,{animationType:u}=t.options,h=e.source!==t.layout.source;u==="size"?vs(A=>{const N=h?e.measuredBox[A]:e.layoutBox[A],I=Di(N);N.min=r[A].min,N.max=N.min+I}):pC(u,e.layoutBox,r)&&vs(A=>{const N=h?e.measuredBox[A]:e.layoutBox[A],I=Di(r[A]);N.max=N.min+I,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[A].max=t.relativeTarget[A].min+I)});const y=uc();af(y,r,e.layoutBox);const b=uc();h?af(b,t.applyTransform(l,!0),e.measuredBox):af(b,r,e.layoutBox);const x=!dC(y);let E=!1;if(!t.resumeFrom){const A=t.getClosestProjectingParent();if(A&&!A.resumeFrom){const{snapshot:N,layout:I}=A;if(N&&I){const M=Ln();of(M,e.layoutBox,N.layoutBox);const j=Ln();of(j,r,I.layoutBox),hC(M,j)||(E=!0),A.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=M,t.relativeParent=A)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:b,layoutDelta:y,hasLayoutChanged:x,hasRelativeLayoutChanged:E})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function CF(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function AF(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function TF(t){t.clearSnapshot()}function Ev(t){t.clearMeasurements()}function Sv(t){t.isLayoutDirty=!1}function _F(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Cv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function NF(t){t.resolveTargetDelta()}function RF(t){t.calcProjection()}function OF(t){t.resetSkewAndRotation()}function IF(t){t.removeLeadSnapshot()}function Av(t,e,n){t.translate=yn(e.translate,0,n),t.scale=yn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Tv(t,e,n,r){t.min=yn(e.min,n.min,r),t.max=yn(e.max,n.max,r)}function MF(t,e,n,r){Tv(t.x,e.x,n.x,r),Tv(t.y,e.y,n.y,r)}function DF(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const LF={duration:.45,ease:[.4,0,.1,1]},_v=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Nv=_v("applewebkit/")&&!_v("chrome/")?Math.round:Cs;function Rv(t){t.min=Nv(t.min),t.max=Nv(t.max)}function kF(t){Rv(t.x),Rv(t.y)}function pC(t,e,n){return t==="position"||t==="preserve-aspect"&&!UU(wv(e),wv(n),.2)}function jF(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const BF=mC({attachResizeListener:(t,e)=>bf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ng={current:void 0},xC=mC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ng.current){const t=new BF({});t.mount(window),t.setOptions({layoutScroll:!0}),Ng.current=t}return Ng.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),PF={pan:{Feature:nF},drag:{Feature:tF,ProjectionNode:xC,MeasureLayout:cC}};function Ov(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const l="onHover"+n,u=r[l];u&&gn.postRender(()=>u(e,Df(e)))}class UF extends uo{mount(){const{current:e}=this.node;e&&(this.unmount=gP(e,(n,r)=>(Ov(this.node,r,"Start"),l=>Ov(this.node,l,"End"))))}unmount(){}}class FF extends uo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Of(bf(this.node.current,"focus",()=>this.onFocus()),bf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Iv(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const l="onTap"+(n==="End"?"":n),u=r[l];u&&gn.postRender(()=>u(e,Df(e)))}class VF extends uo{mount(){const{current:e}=this.node;e&&(this.unmount=yP(e,(n,r)=>(Iv(this.node,r,"Start"),(l,{success:u})=>Iv(this.node,l,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Mm=new WeakMap,Rg=new WeakMap,zF=t=>{const e=Mm.get(t.target);e&&e(t)},HF=t=>{t.forEach(zF)};function $F({root:t,...e}){const n=t||document;Rg.has(n)||Rg.set(n,{});const r=Rg.get(n),l=JSON.stringify(e);return r[l]||(r[l]=new IntersectionObserver(HF,{root:t,...e})),r[l]}function GF(t,e,n){const r=$F(e);return Mm.set(t,n),r.observe(t),()=>{Mm.delete(t),r.unobserve(t)}}const qF={some:0,all:1};class YF extends uo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:l="some",once:u}=e,h={root:n?n.current:void 0,rootMargin:r,threshold:typeof l=="number"?l:qF[l]},y=b=>{const{isIntersecting:x}=b;if(this.isInView===x||(this.isInView=x,u&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:E,onViewportLeave:A}=this.node.getProps(),N=x?E:A;N&&N(b)};return GF(this.node.current,h,y)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(XF(e,n))&&this.startObserver()}unmount(){}}function XF({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const WF={inView:{Feature:YF},tap:{Feature:VF},focus:{Feature:FF},hover:{Feature:UF}},KF={layout:{ProjectionNode:xC,MeasureLayout:cC}},Dm={current:null},yC={current:!1};function ZF(){if(yC.current=!0,!!op)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Dm.current=t.matches;t.addEventListener("change",e),e()}else Dm.current=!1}const QF=new WeakMap;function JF(t,e,n){for(const r in e){const l=e[r],u=n[r];if(Ai(l))t.addValue(r,l);else if(Ai(u))t.addValue(r,_c(l,{owner:t}));else if(u!==l)if(t.hasValue(r)){const h=t.getValue(r);h.liveStyle===!0?h.jump(l):h.hasAnimated||h.set(l)}else{const h=t.getStaticValue(r);t.addValue(r,_c(h!==void 0?h:l,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Mv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class eV{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:l,blockInitialAnimation:u,visualState:h},y={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Cp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const N=Yi.now();this.renderScheduledAt<N&&(this.renderScheduledAt=N,gn.render(this.render,!1,!0))};const{latestValues:b,renderState:x}=h;this.latestValues=b,this.baseTarget={...b},this.initialValues=n.initial?{...b}:{},this.renderState=x,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=l,this.options=y,this.blockInitialAnimation=!!u,this.isControllingVariants=Jh(n),this.isVariantNode=US(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:E,...A}=this.scrapeMotionValuesFromProps(n,{},this);for(const N in A){const I=A[N];b[N]!==void 0&&Ai(I)&&I.set(b[N],!1)}}mount(e){this.current=e,QF.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),yC.current||ZF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Dm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ao(this.notifyUpdate),ao(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=jc.has(e);r&&this.onBindTransform&&this.onBindTransform();const l=n.on("change",y=>{this.latestValues[e]=y,this.props.onUpdate&&gn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),u=n.on("renderRequest",this.scheduleRender);let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{l(),u(),h&&h(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Nc){const n=Nc[e];if(!n)continue;const{isEnabled:r,Feature:l}=n;if(!this.features[e]&&l&&r(this.props)&&(this.features[e]=new l(this)),this.features[e]){const u=this.features[e];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ln()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Mv.length;r++){const l=Mv[r];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const u="on"+l,h=e[u];h&&(this.propEventSubscriptions[l]=this.on(l,h))}this.prevMotionValues=JF(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=_c(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(YE(r)||WE(r))?r=parseFloat(r):!vP(r)&&oo.test(n)&&(r=OS(e,n)),this.setBaseTarget(e,Ai(r)?r.get():r)),Ai(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var u;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const h=Bp(this.props,n,(u=this.presenceContext)==null?void 0:u.custom);h&&(r=h[e])}if(n&&r!==void 0)return r;const l=this.getBaseTargetFromProps(this.props,e);return l!==void 0&&!Ai(l)?l:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new dp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class bC extends eV{constructor(){super(...arguments),this.KeyframeResolver=cP}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ai(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function wC(t,{style:e,vars:n},r,l){const u=t.style;let h;for(h in e)u[h]=e[h];l==null||l.applyProjectionStyles(u,r);for(h in n)u.setProperty(h,n[h])}function tV(t){return window.getComputedStyle(t)}class nV extends bC{constructor(){super(...arguments),this.type="html",this.renderInstance=wC}readValueFromInstance(e,n){var r;if(jc.has(n))return(r=this.projection)!=null&&r.isProjecting?wm(n):NB(e,n);{const l=tV(e),u=(mp(n)?l.getPropertyValue(n):l[n])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(e,{transformPagePoint:n}){return rC(e,n)}build(e,n,r){Lp(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Pp(e,n,r)}}const vC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function iV(t,e,n,r){wC(t,e,void 0,r);for(const l in e.attrs)t.setAttribute(vC.has(l)?l:Dp(l),e.attrs[l])}class sV extends bC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ln}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(jc.has(n)){const r=RS(n);return r&&r.default||0}return n=vC.has(n)?n:Dp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return WS(e,n,r)}build(e,n,r){GS(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,l){iV(e,n,r,l)}mount(e){this.isSVGTag=YS(e.tagName),super.mount(e)}}const rV=(t,e)=>jp(t)?new sV(e):new nV(e,{allowProjection:t!==R.Fragment}),aV=rU({...IU,...WF,...PF,...KF},rV),qi=OP(aV);function oV(t){return hi({queryKey:["review_count"],queryFn:async()=>{const[{data:e,error:n},{data:r,error:l}]=await Promise.all([Pe.from("applications").select("id",{count:"exact"}).eq("status","pending"),Pe.from("application_changes").select("id",{count:"exact"}).eq("status","pending")]);if(n||l)throw new Error((n==null?void 0:n.message)||(l==null?void 0:l.message)||"Failed to count reviews");return((e==null?void 0:e.length)||0)+((r==null?void 0:r.length)||0)},staleTime:1e4,enabled:t,initialData:0})}function lV({label:t,icon:e,color:n,onClick:r,badge:l}){return C.jsxs(qi.button,{onClick:r,className:`relative ${n} text-white font-bold text-lg p-8
                  flex flex-col items-center gap-3 rounded-2xl shadow-lg
                  w-full min-w-[220px] min-h-[150px] transition-all`,whileHover:{scale:1.05},whileTap:{scale:.97},style:{boxShadow:"0 2px 20px 0 rgba(102,84,179,0.08)"},children:[e,C.jsx("span",{className:"mt-2",children:t}),l?C.jsx("span",{className:"absolute top-2 right-4 bg-red-500 text-white rounded-full text-base font-extrabold px-4 py-2 shadow-lg border-2 border-white",style:{minWidth:36,minHeight:36,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",lineHeight:1},children:l}):null]})}function cV(){const{t}=zn(),e=_s(),{user:n}=Fh(),r=(n==null?void 0:n.role)==="admin",{data:l}=oV(r),u=[{label:t("addNewStudent"),icon:C.jsx(z9,{className:"w-12 h-12"}),color:"bg-green-500 hover:bg-green-600",onClick:()=>e("/admissions")},{label:t("takeAttendance"),icon:C.jsx(E9,{className:"w-12 h-12"}),color:"bg-blue-500 hover:bg-blue-600",onClick:()=>e("/attendance")},{label:t("studentsActive"),icon:C.jsx(ew,{className:"w-14 h-14"}),color:"bg-[#6654b3] hover:bg-[#5542a0]",onClick:()=>e("/myschool/students")},{label:t("studentsInactive"),icon:C.jsx(ew,{className:"w-14 h-14"}),color:"bg-pink-400 hover:bg-pink-500",onClick:()=>e("/myschool/students/inactive")},{label:t("courses"),icon:C.jsx(p9,{className:"w-12 h-12"}),color:"bg-teal-500 hover:bg-teal-600",onClick:()=>e("/myschool/courses")},...r?[{label:t("review"),icon:C.jsx(h9,{className:"w-12 h-12"}),color:"bg-yellow-500 hover:bg-yellow-600",onClick:()=>e("/review"),badge:l&&l>0?l:null}]:[]];return C.jsxs("main",{className:"min-h-screen flex flex-col bg-[#f6f6f6]",children:[C.jsx("div",{className:"flex flex-col items-center pt-10 pb-6",children:C.jsx("p",{className:"text-lg text-[#6654b3] font-medium mb-6 text-center",children:t("homepageSlogan")})}),C.jsx("div",{className:"flex-1 flex flex-col items-center w-full",children:C.jsx("div",{className:"w-full max-w-5xl grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-7 p-5 sm:p-6",children:u.map(h=>C.jsx(lV,{...h},h.label))})})]})}function uV(t,e){switch(t.type){case"new_application":return e("newApplication",{name:t.payload.name||`${t.payload.first} ${t.payload.last}`});case"course_limit":return e("courseLimitReached",{name:t.payload.student_name});case"edit_request":return e("editRequestFrom",{name:t.payload.student_name});default:return e(t.type.replace(/_/g,""),t.payload)||t.type.replace(/_/g," ")}}function Dv(t){const e=new Set,n=[];for(const r of t){const l=`${r.type}_${r.payload.application_id??""}_${r.created_at}`;e.has(l)||(e.add(l),n.push(r))}return n}function fV(){const{t}=zn(),e=_s(),[n,r]=R.useState([]),[l,u]=R.useState(!0),h=R.useRef(null);R.useEffect(()=>{(async()=>{const{data:E,error:A}=await Pe.from("notifications").select("*").order("created_at",{ascending:!1}).limit(200);A?console.error(A):r(Dv(E)),u(!1)})()},[]),R.useEffect(()=>{if(!h.current)return h.current=Pe.channel("notifications_live").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications"},({new:E})=>r(A=>Dv([E,...A]))).subscribe(),()=>{h.current&&(Pe.removeChannel(h.current),h.current=null)}},[]);const y=async(E,A)=>{A==null||A.stopPropagation(),!E.read&&(r(N=>N.map(I=>I.id===E.id?{...I,read:!0}:I)),await Pe.from("notifications").update({read:!0}).eq("id",E.id))},b=E=>{switch(E.type){case"new_application":e(`/admissions?view=review&app=${E.payload.application_id}`);break;case"course_limit":case"edit_request":e(`/myschool/student/${E.student_id}`);break;default:return}y(E)};if(l)return C.jsx("p",{className:"p-8",children:t("loading")});const x=n.filter(E=>!E.read).length;return C.jsxs("div",{className:"p-4 sm:p-8 space-y-6 max-w-3xl mx-auto",children:[C.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[C.jsx(uE,{className:"w-6 h-6 text-[#6654b3]"}),C.jsxs("h1",{className:"text-2xl font-bold text-[#6654b3]",children:[t("notifications")," ",x>0&&C.jsxs("span",{className:"text-[#ec4899]",children:["(",x,")"]})]})]}),n.length===0?C.jsx("p",{className:"text-gray-600",children:t("noNotifications")}):C.jsx("ul",{className:"space-y-4",children:n.map(E=>C.jsx("li",{onClick:()=>b(E),className:`border rounded-xl p-4 cursor-pointer hover:bg-[#ede9fe] transition
                          ${E.read?"bg-white":"bg-purple-50"}`,children:C.jsxs("div",{className:"flex justify-between items-start gap-3",children:[C.jsxs("div",{children:[C.jsx("p",{className:"font-medium",children:uV(E,t)}),C.jsx("p",{className:"text-xs text-gray-500",children:new Date(E.created_at).toLocaleString()})]}),!E.read&&C.jsxs("button",{type:"button",onClick:A=>y(E,A),className:"text-[#6654b3] hover:underline text-xs flex items-center gap-1",children:[C.jsx(w9,{className:"w-4 h-4"})," ",t("markRead")]})]})},E.id))})]})}const dV=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],EC=[];for(let t=6;t<23;++t)EC.push(`${String(t).padStart(2,"0")}:00-${String(t+1).padStart(2,"0")}:00`);function hV(){return hi({queryKey:["courses_full"],queryFn:async()=>{const{data:t,error:e}=await Pe.from("courses").select("id,name,weekdays,times,capacity,hour_packages").order("name");if(e)throw new Error(e.message);return t||[]},staleTime:12e4})}function gV(){return hi({queryKey:["courseFilters"],queryFn:async()=>{const{data:t,error:e}=await Pe.from("courses").select("id,name,weekdays,times").order("name");if(e)throw new Error(e.message);return t||[]},staleTime:12e4})}function mV(t,e,n){return hi({queryKey:["students",t,e,n],queryFn:async()=>{if(!t)return[];const{data:r,error:l}=await Pe.from("students").select("id,first_name,last_name,nick_name,courses");if(l)throw new Error(l.message);return r?e?n?r.filter(u=>{var y,b;return(((b=(y=u.courses)==null?void 0:y[t])==null?void 0:b[e])||[]).some(x=>x===n||x.startsWith(n.split("-")[0]))}):r.filter(u=>{var h,y;return(y=(h=u.courses)==null?void 0:h[t])==null?void 0:y[e]}):r.filter(u=>{var h;return(h=u.courses)==null?void 0:h[t]}):[]},enabled:!!t,staleTime:3e4})}function pV(){const{t}=zn(),[e,n]=R.useState("check"),[r,l]=R.useState(""),[u,h]=R.useState(""),[y,b]=R.useState(""),{data:x=[],isLoading:E}=gV(),{data:A=[],isLoading:N}=mV(r,u,y);return C.jsx("div",{className:"min-h-screen bg-[#f6f6f6] flex flex-col items-center py-8 px-2",children:C.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[C.jsxs("div",{className:"flex mb-6 border-b border-purple-200",children:[C.jsx("button",{className:`px-5 py-3 font-bold rounded-t-2xl transition ${e==="check"?"bg-white text-[#6654b3] border-x border-t border-purple-200 border-b-0 shadow":"text-gray-400 hover:text-[#6654b3]"}`,onClick:()=>n("check"),children:t("checkCourses")}),C.jsx("button",{className:`ml-3 px-5 py-3 font-bold rounded-t-2xl transition ${e==="manage"?"bg-white text-[#6654b3] border-x border-t border-purple-200 border-b-0 shadow":"text-gray-400 hover:text-[#6654b3]"}`,onClick:()=>n("manage"),children:t("manageCourses")})]}),e==="check"?C.jsx(xV,{courseFilters:x,loadingCourses:E,courseId:r,setCourseId:l,day:u,setDay:h,time:y,setTime:b,filteredStudents:A,loadingStudents:N}):C.jsx(yV,{})]})})}function xV({courseFilters:t,courseId:e,setCourseId:n,day:r,setDay:l,time:u,setTime:h,filteredStudents:y,loadingStudents:b}){const{t:x}=zn(),E=_s(),A=t==null?void 0:t.find(M=>M.id===e),N=(A==null?void 0:A.weekdays)||[];let I=[];if(A&&r&&A.times&&A.times[r]){const j=(A.times[r]||[]).map(U=>{if(U.includes("-"))return U;const $=Number(U.slice(0,2));return!isNaN($)&&$>=6&&$<23?`${U}-${String($+1).padStart(2,"0")}:00`:U});I=Array.from(new Set(j)).sort()}return C.jsxs("div",{className:"w-full",children:[C.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[C.jsxs("select",{className:"px-4 py-2 rounded-xl border border-purple-200 text-[#6654b3] bg-white",value:e,onChange:M=>{n(M.target.value),l(""),h("")},children:[C.jsx("option",{value:"",children:x("selectCourse")}),t==null?void 0:t.map(M=>C.jsx("option",{value:M.id,children:M.name},M.id))]}),C.jsxs("select",{className:"px-4 py-2 rounded-xl border border-purple-200 text-[#6654b3] bg-white",value:r,onChange:M=>{l(M.target.value),h("")},disabled:!e,children:[C.jsx("option",{value:"",children:x("selectDay")}),N.map(M=>C.jsx("option",{children:M},M))]}),C.jsxs("select",{className:"px-4 py-2 rounded-xl border border-purple-200 text-[#6654b3] bg-white",value:u,onChange:M=>h(M.target.value),disabled:!e||!r,children:[C.jsx("option",{value:"",children:x("selectTime")}),I.map(M=>C.jsx("option",{children:M},M))]})]}),C.jsx("div",{children:e?b?C.jsx("div",{className:"text-center text-gray-400 py-8",children:x("loadingStudents")}):C.jsxs("table",{className:"w-full bg-white border border-purple-200 rounded-2xl",children:[C.jsx("thead",{children:C.jsxs("tr",{children:[C.jsx("th",{className:"py-3 px-2 text-left font-semibold text-[#6654b3]",children:"#"}),C.jsx("th",{className:"py-3 px-2 text-left font-semibold text-[#6654b3]",children:x("nickName")}),C.jsx("th",{className:"py-3 px-2 text-left font-semibold text-[#6654b3]",children:x("fullName")})]})}),C.jsx("tbody",{children:!y||y.length===0?C.jsx("tr",{children:C.jsx("td",{colSpan:3,className:"text-center text-gray-300 py-8",children:x("noStudentsFound")})}):y.map((M,j)=>C.jsxs("tr",{className:"hover:bg-purple-50 transition",children:[C.jsx("td",{className:"py-2 px-2",children:j+1}),C.jsx("td",{className:"py-2 px-2 text-[#6654b3] font-bold",children:M.nick_name||""}),C.jsxs("td",{className:"py-2 px-2 text-blue-700 font-semibold cursor-pointer hover:underline",onClick:()=>E(`/myschool/student/${M.id}`),children:[M.first_name," ",M.last_name]})]},M.id))})]}):C.jsx("div",{className:"text-center text-gray-400 py-8",children:x("Choose a course to see students")})})]})}function yV(){const{t}=zn(),e=Mc(),{data:n=[],isLoading:r}=hV(),[l,u]=R.useState(null),[h,y]=R.useState(""),b=Tb({mutationFn:async B=>{const V={name:B.name,weekdays:B.weekdays,times:B.times,capacity:B.capacity,hour_packages:B.hour_packages};if(B.id){const{error:z}=await Pe.from("courses").update(V).eq("id",B.id);if(z)throw z}else{const{error:z}=await Pe.from("courses").insert([V]);if(z)throw z}},onSuccess:()=>{u(null),e.invalidateQueries({queryKey:["courses_full"]})},onError:B=>y(B.message)}),x=Tb({mutationFn:async B=>{if(!window.confirm(t("deleteCourseConfirm")))return;const{error:V}=await Pe.from("courses").delete().eq("id",B);if(V)throw V},onSuccess:()=>{e.invalidateQueries({queryKey:["courses_full"]})},onError:B=>y(B.message)});function E(B){u(B||{name:"",weekdays:[],times:{},capacity:0,hour_packages:[]}),y("")}function A(B){u(V=>{if(!V)return V;const z=V.weekdays.includes(B)?V.weekdays.filter(X=>X!==B):[...V.weekdays,B],ee={...V.times};return z.includes(B)||delete ee[B],{...V,weekdays:z,times:ee}})}function N(B,V){u(z=>z&&{...z,times:{...z.times,[B]:[...z.times[B]||[],V]}})}function I(B,V){u(z=>z&&{...z,times:{...z.times,[B]:z.times[B].filter((ee,X)=>X!==V)}})}function M(){u(B=>B&&{...B,hour_packages:[...B.hour_packages||[],{hours:1,price:0}]})}function j(B,V,z){u(ee=>{if(!ee)return ee;const X=[...ee.hour_packages||[]];return X[B][V]=z,{...ee,hour_packages:X}})}function U(B){u(V=>{if(!V)return V;const z=[...V.hour_packages||[]];return z.splice(B,1),{...V,hour_packages:z}})}function $(){if(!l||!l.name)return y(t("enterCourseName"));b.mutate(l)}function q(B){x.mutate(B)}return C.jsxs("div",{className:"relative bg-white rounded-3xl p-6",children:[C.jsx("h2",{className:"text-xl font-bold mb-4 text-[#6654b3]",children:t("manageCourses")}),r?C.jsx("p",{children:t("loadingCourses")}):C.jsxs(C.Fragment,{children:[C.jsxs("table",{className:"w-full mb-4 border border-purple-200 rounded-lg",children:[C.jsx("thead",{children:C.jsxs("tr",{children:[C.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("course")}),C.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("days")}),C.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("times")}),C.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("capacity")}),C.jsx("th",{className:"px-4 py-2 text-left text-[#6654b3]",children:t("hourPackages")}),C.jsx("th",{className:"px-4 py-2"})]})}),C.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:n.map(B=>C.jsxs("tr",{className:"hover:bg-purple-50 transition",children:[C.jsx("td",{className:"px-4 py-2",children:B.name}),C.jsx("td",{className:"px-4 py-2",children:(B.weekdays||[]).join(", ")}),C.jsx("td",{className:"px-4 py-2",children:Object.entries(B.times||{}).map(([V,z])=>z.length?C.jsxs("div",{children:[V,": ",z.join(", ")]},V):null)}),C.jsx("td",{className:"px-4 py-2",children:B.capacity}),C.jsx("td",{className:"px-4 py-2",children:(B.hour_packages||[]).map((V,z)=>C.jsxs("div",{children:[V.hours," hours - ",V.price.toLocaleString()," THB"]},z))}),C.jsxs("td",{className:"px-4 py-2 space-x-2",children:[C.jsx("button",{onClick:()=>E(B),className:"bg-gray-100 hover:bg-gray-200 text-blue-600 px-3 py-1 rounded-full text-sm",children:t("edit")}),C.jsx("button",{onClick:()=>q(B.id),className:"bg-gray-100 hover:bg-gray-200 text-red-600 px-3 py-1 rounded-full text-sm",children:t("delete")})]})]},B.id))})]}),C.jsx("button",{onClick:()=>E(null),className:"bg-[#6654b3] hover:bg-purple-700 text-white px-4 py-2 rounded-full",children:t("addCourse")})]}),l&&C.jsxs("div",{className:"absolute inset-0 bg-white bg-opacity-95 rounded-3xl flex flex-col p-6 overflow-y-auto",children:[C.jsx("h3",{className:"text-lg font-bold mb-3 text-[#6654b3]",children:l.id?t("editCourse"):t("newCourse")}),C.jsxs("label",{className:"block mb-2",children:[t("courseName"),C.jsx("input",{className:"border rounded px-2 py-1 ml-2 w-full",value:l.name,onChange:B=>u(V=>V&&{...V,name:B.target.value})})]}),C.jsxs("label",{className:"block mb-2",children:[t("capacity"),C.jsx("input",{type:"number",min:0,className:"border rounded px-2 py-1 ml-2 w-24",value:l.capacity||0,onChange:B=>u(V=>V&&{...V,capacity:Number(B.target.value)})})]}),C.jsxs("div",{className:"mb-2",children:[C.jsxs("span",{className:"font-semibold",children:[t("days"),":"]}),C.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:dV.map(B=>C.jsxs("label",{className:`border rounded-full px-3 py-1 cursor-pointer ${l.weekdays.includes(B)?"bg-[#6654b3] text-white border-[#6654b3]":"border-gray-300"}`,children:[C.jsx("input",{type:"checkbox",className:"hidden",checked:l.weekdays.includes(B),onChange:()=>A(B)}),B]},B))})]}),l.weekdays.map(B=>C.jsxs("div",{className:"mb-2 ml-4",children:[C.jsx("span",{className:"font-semibold",children:t("timesForDay",{day:B})}),C.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[(l.times[B]||[]).map((V,z)=>C.jsxs("span",{className:"inline-flex items-center bg-gray-200 rounded-full px-3 py-1 mr-2",children:[V,C.jsx("button",{onClick:()=>I(B,z),className:"ml-1 text-red-500",children:""})]},z)),C.jsxs("select",{className:"border rounded px-2 py-1 max-h-40 overflow-y-auto",defaultValue:"",onChange:V=>{V.target.value&&(N(B,V.target.value),V.target.value="")},children:[C.jsx("option",{value:"",children:t("addTime")}),EC.filter(V=>!(l.times[B]||[]).includes(V)).map(V=>C.jsx("option",{children:V},V))]})]})]},B)),C.jsxs("div",{className:"mb-2 mt-4",children:[C.jsx("span",{className:"font-semibold text-[#6654b3]",children:t("hourPackages")}),(l.hour_packages||[]).length===0&&C.jsx("div",{className:"text-gray-400 text-sm mt-1",children:t("noPackagesDefined")}),(l.hour_packages||[]).map((B,V)=>C.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[C.jsx("span",{className:"text-sm",children:t("hours")}),C.jsx("input",{type:"number",min:1,className:"border rounded px-2 py-1 w-20",value:B.hours,onChange:z=>j(V,"hours",Number(z.target.value)),placeholder:"Hours"}),C.jsx("span",{className:"text-sm",children:t("price")}),C.jsx("input",{type:"number",min:0,className:"border rounded px-2 py-1 w-24",value:B.price,onChange:z=>j(V,"price",Number(z.target.value)),placeholder:"Price"}),C.jsx("span",{className:"text-xs",children:"THB"}),C.jsx("button",{type:"button",className:"ml-2 text-red-500 font-bold",onClick:()=>U(V),children:""})]},V)),C.jsx("button",{type:"button",className:"mt-2 bg-gray-100 px-2 py-1 rounded",onClick:M,children:t("addPackage")})]}),h&&C.jsx("p",{className:"text-red-600",children:h}),C.jsxs("div",{className:"flex gap-2 mt-4",children:[C.jsx("button",{onClick:$,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-full",disabled:b.status==="pending",children:t("save")}),C.jsx("button",{onClick:()=>u(null),className:"bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-full",children:t("cancel")})]})]})]})}function bV(t,e,n=new Date){if(!t||!t.courses||!t.course_limits)return"inactive";let r=!1,l=null;const u={};for(const h of e)u[h.course_id]||(u[h.course_id]=[]),u[h.course_id].push(h);for(const h of Object.keys(t.courses)){const y=(u[h]||[]).length;if((t.course_limits[h]||0)>y){r=!0;break}else{const x=(u[h]||[]).sort((E,A)=>A.attended_at_ts.localeCompare(E.attended_at_ts))[0];x&&(!l||x.attended_at_ts>l)&&(l=x.attended_at_ts)}}if(r)return"active";if(l){const h=new Date(l);if((n.getTime()-h.getTime())/(1e3*60*60*24)>30)return"inactive"}return"needs_renewal"}const rs="#6654b3",wV="#f6f6f6";function vV(){return Pe.from("students").select("id,first_name,last_name,nick_name,parent_phone,parent_line_id,joined_at,courses,course_limits").order("joined_at",{ascending:!1})}function EV(){return Pe.from("attendance").select("student_id,course_id,attended_at_ts,approved_by")}function SV(){const{t}=zn(),e=_s(),[n,r]=R.useState(""),[l,u]=R.useState(new Set),[h,y]=R.useState(!1),{data:b,isLoading:x,error:E}=hi({queryKey:["students","withCourses"],queryFn:vV,staleTime:1e3*60*10,refetchOnWindowFocus:!1}),{data:A,isLoading:N,error:I}=hi({queryKey:["attendance","all"],queryFn:EV,staleTime:1e3*60*10,refetchOnWindowFocus:!1}),M=b&&"data"in b&&Array.isArray(b.data)?b.data:[],j=A&&"data"in A&&Array.isArray(A.data)?A.data:[],U=R.useMemo(()=>{const z={};return j.forEach(ee=>{z[ee.student_id]||(z[ee.student_id]=[]),z[ee.student_id].push(ee)}),z},[j]),$=R.useMemo(()=>M.map(z=>({...z,status:bV(z,U[z.id]||[])})),[M,U]),q=R.useMemo(()=>{const z=n.trim().toLowerCase(),ee=$.filter(X=>X.status==="active");return z?ee.filter(X=>(X.nick_name||"").toLowerCase().includes(z)||X.first_name.toLowerCase().includes(z)||X.last_name.toLowerCase().includes(z)||X.parent_phone.includes(z)||(X.parent_line_id||"").toLowerCase().includes(z)):ee},[$,n]),B=x||N,V=E||I;return C.jsxs("div",{className:"min-h-screen flex flex-col items-center py-8 px-2 sm:px-6 font-sans",style:{background:wV},children:[C.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-3 pb-4",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("h1",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight",style:{color:rs},children:t("students")}),C.jsx("span",{className:"ml-2 px-3 py-1 rounded-full text-lg font-semibold",style:{background:"#ebe7f7",color:rs,border:"1px solid #e1def5"},children:q.length})]}),C.jsxs("div",{className:"flex gap-2 mt-3 sm:mt-0",children:[C.jsx("input",{type:"text",placeholder:t("searchStudents"),value:n,onChange:z=>r(z.target.value),className:"rounded-2xl border border-[#e1def5] px-4 py-2 bg-white shadow focus:outline-none focus:ring-2 focus:ring-[#6654b3] transition w-56",style:{color:rs}}),C.jsxs("button",{onClick:()=>e("/admissions"),className:"flex items-center gap-1 font-semibold px-4 py-2 rounded-2xl transition active:scale-95",style:{background:rs,color:"#fff",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.06)"},children:[C.jsx(mE,{className:"w-5 h-5"})," ",t("addStudent")]}),C.jsxs("button",{onClick:()=>y(!0),disabled:!l.size,className:"flex items-center gap-1 font-semibold px-4 py-2 rounded-2xl transition active:scale-95 disabled:opacity-60",style:{background:"#ec4899",color:"#fff",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.02)"},children:[C.jsx(Ch,{className:"w-5 h-5"})," ",t("export")]})]})]}),C.jsx("div",{className:"w-full max-w-6xl mx-auto overflow-x-auto",children:B?C.jsx("div",{className:"text-center text-[#a7a3c0] py-10",children:t("loading")}):V?C.jsx("div",{className:"text-red-500 py-10 text-center",children:V.message||V.toString()}):C.jsxs("table",{className:"w-full min-w-[650px] rounded-2xl",style:{background:"#fff",borderCollapse:"separate",borderSpacing:0,boxShadow:"0 2px 18px 0 rgba(102,84,179,0.05)",border:"1.5px solid #e1def5"},children:[C.jsx("thead",{style:{background:"#f6f6f6"},children:C.jsxs("tr",{children:[C.jsx("th",{className:"px-2 py-3 rounded-l-2xl",children:C.jsx("input",{type:"checkbox",className:"accent-[#6654b3]",checked:q.length>0&&q.every(z=>l.has(z.id)),onChange:z=>{const ee=new Set(l);z.target.checked?q.forEach(X=>ee.add(X.id)):q.forEach(X=>ee.delete(X.id)),u(ee)}})}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:rs},children:"#"}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:rs},children:t("nickName")}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:rs},children:t("firstName")}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:rs},children:t("lastName")}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:rs},children:t("parentPhone")}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:rs},children:t("lineID")})]})}),C.jsx("tbody",{children:q.length===0?C.jsx("tr",{children:C.jsx("td",{colSpan:7,className:"text-center text-[#b0b0b0] py-8",children:t("noStudentsFound")})}):q.map((z,ee)=>C.jsxs("tr",{className:"transition",style:{animation:"fadein 0.3s",background:l.has(z.id)?"#f6e6fa":"inherit"},children:[C.jsx("td",{className:"px-2 py-2 text-center align-middle",children:C.jsx("input",{type:"checkbox",className:"accent-[#6654b3]",checked:l.has(z.id),onChange:X=>{const ae=new Set(l);X.target.checked?ae.add(z.id):ae.delete(z.id),u(ae)}})}),C.jsx("td",{className:"px-2 py-2 align-middle",children:ee+1}),C.jsx("td",{className:"px-2 py-2 align-middle font-semibold",style:{color:rs},children:z.nick_name||C.jsx("span",{className:"text-[#d3d3e0]",children:""})}),C.jsx("td",{className:"px-2 py-2 align-middle font-semibold cursor-pointer hover:underline",style:{color:"#3a38a0"},onClick:()=>e(`/myschool/student/${z.id}`),children:z.first_name}),C.jsx("td",{className:"px-2 py-2 align-middle",children:z.last_name}),C.jsx("td",{className:"px-2 py-2 align-middle font-mono",children:z.parent_phone}),C.jsx("td",{className:"px-2 py-2 align-middle",children:C.jsx("span",{className:"rounded-xl px-2 py-1 text-xs font-semibold",style:{background:"#ebe7f7",color:rs,border:"1px solid #e1def5"},children:z.parent_line_id||""})})]},z.id))})]})}),h&&C.jsx("div",{className:"fixed z-50 inset-0 bg-black/40 flex items-center justify-center",children:C.jsxs("div",{className:"rounded-2xl shadow-lg p-6 max-w-md w-full relative",style:{background:"#fff"},children:[C.jsx("button",{className:"absolute right-4 top-4 text-[#c2bce5] hover:text-[#ec4899]",onClick:()=>y(!1),children:C.jsx(so,{className:"w-6 h-6"})}),C.jsx("h2",{className:"text-lg font-bold mb-3",style:{color:"#ec4899"},children:t("exportStudents",{count:l.size})}),C.jsxs("div",{className:"flex gap-2 justify-between",children:[C.jsxs("button",{onClick:()=>{const z=q.filter(ve=>l.has(ve.id)),ee=[t("no"),t("nickName"),t("firstName"),t("lastName"),t("parentPhone"),t("lineID")],X=z.map((ve,le)=>[le+1,`"${ve.nick_name||""}"`,`"${ve.first_name}"`,`"${ve.last_name}"`,`"${ve.parent_phone}"`,`"${ve.parent_line_id||""}"`]),ae=[ee,...X].map(ve=>ve.join(",")).join(`
`),Y=new Blob([ae],{type:"text/csv"}),be=URL.createObjectURL(Y),Te=document.createElement("a");Te.href=be,Te.download=`students_export_${Date.now()}.csv`,Te.click(),URL.revokeObjectURL(be),y(!1)},className:"rounded-xl px-4 py-2 font-semibold flex items-center gap-1",style:{background:"#34d399",color:"#fff"},children:[C.jsx(Ch,{className:"w-5 h-5"})," ",t("exportCSV")]}),C.jsxs("button",{onClick:()=>{window.print(),y(!1)},className:"rounded-xl px-4 py-2 font-semibold flex items-center gap-1",style:{background:rs,color:"#fff"},children:[C.jsx(Qm,{className:"w-5 h-5"})," ",t("print")]})]})]})}),C.jsx("style",{children:`
        @keyframes fadein { from { opacity:0; transform: scale(0.98);} to { opacity:1; transform: scale(1);} }
      `})]})}const Lv=["bg-pink-50","bg-blue-50","bg-yellow-50","bg-purple-50","bg-green-50","bg-indigo-50"];function CV(t){return Lv[t%Lv.length]}async function AV(){const{data:{user:t}}=await Pe.auth.getUser();if(!t)return{id:null,role:null};const{data:e}=await Pe.from("profiles").select("role").eq("id",t.id).single();return{id:t.id,role:(e==null?void 0:e.role)||null}}function TV(t){return hi({queryKey:["student",t],queryFn:async()=>{const{data:e}=await Pe.from("students").select("*").eq("id",t).single();return e},enabled:!!t,staleTime:3e5})}function _V(){return hi({queryKey:["courses"],queryFn:async()=>{const{data:t}=await Pe.from("courses").select("*").order("name");return t??[]},staleTime:3e5})}function NV(t){return hi({queryKey:["attendance",t],queryFn:async()=>{const{data:e}=await Pe.from("attendance").select("*").eq("student_id",t);return e||[]},enabled:!!t,staleTime:12e4})}function RV(t){return hi({queryKey:["appchanges",t],queryFn:async()=>{const{data:e}=await Pe.from("application_changes").select("*").eq("student_id",t);return e||[]},enabled:!!t,staleTime:12e4})}function OV(){return hi({queryKey:["profile"],queryFn:AV,staleTime:12e4})}function IV({msg:t,onClear:e}){return ot.useEffect(()=>{if(!t)return;const n=setTimeout(e,3500);return()=>clearTimeout(n)},[t,e]),t?C.jsx("div",{className:"fixed left-1/2 -translate-x-1/2 bottom-8 z-50 bg-[#6654b3] text-white rounded-2xl px-8 py-3 shadow-xl text-lg font-semibold fade-in",children:t}):null}function MV(){var xt,gt,cs,ze,wr,ia,Li,sa,kn;const{t,i18n:e}=zn(),{id:n}=RO(),r=_s(),l=Mc(),{data:u}=OV(),{data:h,isLoading:y}=TV(n),{data:b}=_V(),{data:x}=NV(n),{data:E}=RV(n),[A,N]=R.useState(!1),[I,M]=R.useState(null),[j,U]=R.useState(null),[$,q]=R.useState(null),[B,V]=R.useState(null),[z,ee]=R.useState(null),[X,ae]=R.useState(!1),[Y,be]=R.useState(null),[Te,ve]=R.useState(null),[le,ke]=R.useState(null),[ie,se]=R.useState(!1),[fe,Ie]=R.useState(null),[Ue,W]=R.useState(null),[Z,ce]=R.useState(""),oe=R.useMemo(()=>Object.fromEntries((b||[]).map(Le=>[Le.id,Le])),[b]);function Oe(){return h!=null&&h.courses?Object.keys(h.courses).map((Le,nt)=>{var Pt,ln,Ut;const Ze=oe[Le];return{cid:Le,idx:nt,course:Ze,days:h.courses[Le],hours:((Pt=h.course_limits)==null?void 0:Pt[Le])||0,cancelled_at:((ln=h.cancelled_at)==null?void 0:ln[Le])||null,cancelled_by:((Ut=h.cancelled_by)==null?void 0:Ut[Le])||null}}):[]}function qe(Le){var ln;const nt=Array.isArray(h==null?void 0:h.payment_receipt_urls)?h.payment_receipt_urls:[],Ze=((ln=h==null?void 0:h.receipts)==null?void 0:ln[Le])||[],Pt=(E||[]).filter(Ut=>{var vt,Me,Dt,Tt,jt,ki,gi;return(((Me=(vt=Ut.changes)==null?void 0:vt.course_limits)==null?void 0:Me[Le])||((Tt=(Dt=Ut.changes)==null?void 0:Dt.course_changes)==null?void 0:Tt[Le]))&&(((ki=(jt=Ut.changes)==null?void 0:jt.receipts)==null?void 0:ki.length)||((gi=Ut.receipt_urls)==null?void 0:gi.length))}).flatMap(Ut=>{var vt,Me,Dt;return(Me=(vt=Ut.changes)==null?void 0:vt.receipts)!=null&&Me.length?Ut.changes.receipts:(Dt=Ut.receipt_urls)!=null&&Dt.length?Ut.receipt_urls:[]});return[...nt,...Ze,...Pt]}function we(Le){return(x||[]).filter(nt=>nt.course_id===Le)}function ht(Le){var Pt;const nt=we(Le).length,Ze=((Pt=h==null?void 0:h.course_limits)==null?void 0:Pt[Le])||0;return{used:nt,purchased:Ze,left:Math.max(0,Ze-nt),status:Ze-nt>0?t("ongoing"):t("renewalNeeded")}}async function Ge(Le){if(!h||!u||!u.id){ce(e.language.startsWith("th")?" ":"Unable to cancel course. Profile missing.");return}await Pe.from("application_changes").insert([{student_id:h.id,type:"cancel",status:"pending",changes:{cancel_course:Le}}]),ce(e.language.startsWith("th")?" ":"Course cancellation request submitted for review."),l.invalidateQueries({queryKey:["appchanges",n]})}const It=I&&((xt=oe[I])==null?void 0:xt.hour_packages)||[],bn=B!==null?It[B]:void 0,_e=bn?bn.price:0;async function Be(){if(!I||!j||!$||B==null||!z){ce(e.language.startsWith("th")?"":"Please upload payment receipt");return}if(!h){ce(e.language.startsWith("th")?"":"Student not loaded");return}const Le=z,nt=`${Date.now()}-${Le.name}`,{data:Ze,error:Pt}=await Pe.storage.from("receipts").upload(nt,Le);if(Pt){ce(Pt.message);return}const{data:ln}=Pe.storage.from("receipts").getPublicUrl(Ze.path),Ut=bn,vt=[{course_id:I,course_name:oe[I].name,hours:Ut.hours,price:Ut.price,day:j,time:$}];await Pe.from("application_changes").insert([{student_id:h.id,type:"edit",status:"pending",changes:{course_changes:{[I]:{[j]:[$]}},course_limits:{[I]:Ut.hours},purchased_packages:vt,total_price:Ut.price,receipts:[ln.publicUrl]}}]),N(!1),M(null),U(null),q(null),V(null),ee(null),ae(!1),ce(e.language.startsWith("th")?" ":"Add course request submitted for review."),l.invalidateQueries({queryKey:["appchanges",n]})}const je=Y&&((gt=oe[Y])==null?void 0:gt.hour_packages)||[],tt=Te!==null?je[Te]:void 0,Ke=tt?tt.price:0;async function pt(){if(!Y||Te==null||!le){ce(e.language.startsWith("th")?"":"Please upload payment receipt");return}if(!h){ce(e.language.startsWith("th")?"":"Student not loaded");return}const Le=le,nt=`${Date.now()}-${Le.name}`,{data:Ze,error:Pt}=await Pe.storage.from("receipts").upload(nt,Le);if(Pt){ce(Pt.message);return}const{data:ln}=Pe.storage.from("receipts").getPublicUrl(Ze.path),Ut=tt,vt=[{course_id:Y,course_name:oe[Y].name,hours:Ut.hours,price:Ut.price}];await Pe.from("application_changes").insert([{student_id:h.id,type:"renewal",status:"pending",changes:{course_limits:{[Y]:Ut.hours},purchased_packages:vt,total_price:Ut.price,receipts:[ln.publicUrl]}}]),be(null),ve(null),ke(null),se(!1),ce(e.language.startsWith("th")?"":"Renewal request submitted."),l.invalidateQueries({queryKey:["appchanges",n]})}function lt({urls:Le,title:nt}){return C.jsx(Ss,{open:!!Le,onClose:()=>Ie(null),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:C.jsxs(Ss.Panel,{className:"bg-white rounded-2xl p-6 max-w-lg w-full shadow-2xl relative",children:[C.jsx("button",{type:"button",onClick:()=>Ie(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:C.jsx(so,{className:"w-6 h-6"})}),C.jsxs("h2",{className:"text-lg font-bold mb-2",children:[nt," ",t("receipt")]}),C.jsx("div",{className:"space-y-3",children:Le.map(Ze=>C.jsxs("div",{className:"rounded-lg border bg-gray-50 px-3 py-2 flex items-center gap-3",children:[C.jsx("span",{className:"flex-1 truncate",children:Ze.split("/").slice(-1)[0]}),C.jsx("button",{type:"button",className:"text-blue-600 hover:underline text-sm",onClick:()=>window.open(Ze,"_blank"),children:t("open")}),C.jsx("button",{type:"button",className:"text-green-600 hover:underline text-sm",onClick:async()=>{const ln=await(await fetch(Ze)).blob(),Ut=document.createElement("a");Ut.href=URL.createObjectURL(ln),Ut.download=Ze.split("/").slice(-1)[0],Ut.click()},children:t("download")}),C.jsx("button",{type:"button",className:"text-pink-600 hover:underline text-sm",onClick:()=>{const Pt=document.createElement("iframe");Pt.style.position="fixed",Pt.style.right="0",Pt.style.top="0",Pt.style.width="0",Pt.style.height="0",Pt.src=Ze,document.body.appendChild(Pt),Pt.onload=()=>{var ln;(ln=Pt.contentWindow)==null||ln.print(),setTimeout(()=>document.body.removeChild(Pt),1e3)}},children:t("print")})]},Ze))})]})})}return y||!u||!b||!x||!E?C.jsxs("div",{className:"min-h-[300px] flex items-center justify-center",children:[C.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full bg-pink-300 mr-2"}),C.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full bg-blue-200 mr-2"}),C.jsx("span",{className:"animate-bounce w-5 h-5 rounded-full bg-yellow-200"})]}):h?C.jsx("div",{className:"p-0 min-h-screen",style:{background:"#f6f6f6"},children:C.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-2 sm:px-10 space-y-8",children:[C.jsx(IV,{msg:Z,onClear:()=>ce("")}),C.jsx("div",{className:"flex justify-end w-full",children:(u==null?void 0:u.role)==="admin"&&C.jsxs("button",{type:"button",onClick:async()=>{window.confirm(t("deleteStudentConfirm"))&&(await Pe.from("students").delete().eq("id",h.id),r("/myschool/students"))},className:"rounded-full px-3 py-2 bg-red-50 border border-red-200 text-red-600 hover:bg-red-100 flex items-center gap-1",children:[C.jsx(om,{className:"w-5 h-5"})," ",t("deleteStudent")]})}),C.jsxs("div",{className:"bg-white rounded-2xl px-6 py-4 flex flex-col gap-2 border border-[#ece6fc]",children:[C.jsxs("div",{className:"font-bold text-2xl text-[#6654b3] mb-1",children:[h.first_name," ",h.last_name]}),C.jsxs("div",{className:"flex flex-wrap gap-x-8 gap-y-1 text-gray-700 text-sm",children:[C.jsxs("div",{children:[C.jsxs("span",{className:"font-semibold text-gray-900",children:[t("dob"),":"]})," ",h.dob?new Date(h.dob).toLocaleDateString("en-GB"):""]}),C.jsxs("div",{children:[C.jsxs("span",{className:"font-semibold text-gray-900",children:[t("phone"),":"]})," ",h.parent_phone]}),C.jsxs("div",{children:[C.jsxs("span",{className:"font-semibold text-gray-900",children:[t("lineId"),":"]})," ",h.parent_line_id]}),C.jsxs("div",{children:[C.jsxs("span",{className:"font-semibold text-gray-900",children:[t("joined"),":"]})," ",h.joined_at?new Date(h.joined_at).toLocaleDateString("en-GB"):""]})]})]}),Array.isArray(h==null?void 0:h.purchased_packages)&&h.purchased_packages.length>0&&C.jsxs("div",{className:"mb-2",children:[C.jsx("div",{className:"font-bold text-[#6654b3] mb-1",children:t("purchasedPackages")}),C.jsx("ul",{children:h.purchased_packages.map(Le=>C.jsxs("li",{children:[Le.course_name,": ",Le.hours," ",t("hoursLabel",{count:Le.hours}),"  ",Le.price.toLocaleString()," ",t("baht")]},Le.course_id+Le.hours))}),C.jsxs("div",{className:"mt-1 font-semibold",children:[t("totalPrice"),": ",(cs=h.total_price)==null?void 0:cs.toLocaleString()," ",t("baht")]})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("div",{className:"text-lg font-semibold text-[#6654b3]",children:t("enrolledCourses")}),C.jsxs("button",{type:"button",onClick:()=>N(!0),className:"rounded-full bg-[#ece6fc] text-[#6654b3] border border-[#6654b3] px-3 py-2 hover:bg-[#e4d8fd] flex items-center gap-1 transition",children:[C.jsx(mE,{className:"w-5 h-5"})," ",t("addCourse")]})]}),C.jsx("div",{className:"rounded-3xl overflow-x-auto border border-[#ece6fc] bg-white",children:C.jsxs("table",{className:"w-full min-w-[700px] text-sm",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-white",children:[C.jsx("th",{className:"px-4 py-3 text-left font-semibold text-[#6654b3] rounded-tl-3xl",children:"#"}),C.jsx("th",{className:"px-4 py-3 text-left font-semibold text-[#6654b3]",children:t("course")}),C.jsx("th",{className:"px-4 py-3 text-left font-semibold text-[#6654b3]",children:t("daysTimes")}),C.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("hoursLeft")}),C.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("status")}),C.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("receipt")}),C.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3]",children:t("actions")}),C.jsx("th",{className:"px-4 py-3 text-center font-semibold text-[#6654b3] rounded-tr-3xl",children:t("attendance")})]})}),C.jsx("tbody",{children:Oe().map(({cid:Le,idx:nt,course:Ze,days:Pt,cancelled_at:ln})=>{const Ut=CV(nt),vt=qe(Le),Me=we(Le),{purchased:Dt,left:Tt,status:jt}=ht(Le),ki=!!ln;return C.jsxs(ot.Fragment,{children:[C.jsxs("tr",{className:Vu(Ut,"transition",ki?"bg-red-100/70 text-red-600 opacity-80":"hover:bg-[#ece6fc]/70"),children:[C.jsx("td",{className:"px-4 py-3 text-center",children:nt+1}),C.jsx("td",{className:"px-4 py-3",children:(Ze==null?void 0:Ze.name)||Le}),C.jsx("td",{className:"px-4 py-3",children:Object.entries(Pt).map(([gi,ra])=>C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("span",{className:"font-bold",children:gi}),Array.isArray(ra)&&ra.map(Ct=>C.jsx("span",{className:"inline-flex items-center ml-2",children:Ct},Ct))]},gi))}),C.jsxs("td",{className:"px-4 py-3 text-center font-mono font-semibold",children:[Tt," / ",Dt]}),C.jsx("td",{className:"px-4 py-3 text-center",children:jt===t("ongoing")?C.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-50 text-green-600 text-xs font-semibold",children:[C.jsx(eL,{className:"w-4 h-4"})," ",t("ongoing")]}):C.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-50 text-yellow-600 text-xs font-semibold",children:[C.jsx(lL,{className:"w-4 h-4"})," ",t("renewalNeeded")]})}),C.jsx("td",{className:"px-4 py-3 text-center",children:vt.length>0?C.jsx("button",{type:"button",className:"rounded-full px-2 py-1 bg-[#f6d6ec] text-[#b03580] hover:bg-pink-200 text-xs",onClick:()=>Ie({urls:vt,title:Ze==null?void 0:Ze.name}),children:t("viewReceipts",{count:vt.length})}):C.jsx("span",{className:"text-gray-300 text-xs",children:""})}),C.jsx("td",{className:"px-4 py-3 text-center",children:C.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[C.jsx("button",{type:"button",className:Vu("rounded-full px-2 py-1 text-xs","bg-[#ece6fc] text-[#6654b3] hover:bg-purple-100",jt!==t("renewalNeeded")&&"opacity-50 pointer-events-none"),onClick:()=>be(Le),children:t("renew")}),!ki&&C.jsx("button",{type:"button",className:"rounded-full px-2 py-1 bg-red-50 text-red-700 hover:bg-red-100 text-xs",onClick:()=>Ge(Le),children:t("cancel")}),ki&&C.jsxs("span",{className:"block text-xs mt-1 text-red-400",children:[t("cancelled"),C.jsx("br",{}),ln?new Date(ln).toLocaleDateString("en-GB"):""]})]})}),C.jsx("td",{className:"px-4 py-3 text-center",children:C.jsx("button",{type:"button",className:"rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 text-xs px-2 py-1 flex items-center gap-1",onClick:()=>W(Ue===Le?null:Le),children:Ue===Le?C.jsxs(C.Fragment,{children:[C.jsx(hE,{className:"w-4 h-4"})," ",t("hide")]}):C.jsxs(C.Fragment,{children:[C.jsx(gE,{className:"w-4 h-4"})," ",t("view")]})})})]}),Ue===Le&&C.jsx("tr",{children:C.jsx("td",{colSpan:8,className:"bg-white/90",children:C.jsxs("div",{className:"px-4 py-2 text-sm",children:[C.jsx("div",{className:"font-bold text-gray-700 mb-1",children:t("attendanceHistory")}),C.jsxs("div",{className:"flex flex-col gap-1",children:[Me.map(gi=>C.jsxs("div",{className:"flex items-center justify-between border-b last:border-0 border-dashed border-gray-200 py-1 px-2",children:[C.jsx("span",{children:new Date(gi.attended_at_ts).toLocaleString("en-GB",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),C.jsx("button",{type:"button",className:"rounded-full px-2 py-0.5 bg-gray-100 text-gray-600 text-xs hover:bg-blue-50",onClick:()=>navigator.clipboard.writeText(gi.attended_at_ts),children:t("copy")})]},gi.id)),Me.length===0&&C.jsx("div",{className:"text-gray-400",children:t("noRecords")})]})]})})})]},Le)})})]})})]}),C.jsx(Ss,{open:A,onClose:()=>N(!1),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:C.jsxs(Ss.Panel,{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[C.jsx("button",{type:"button",onClick:()=>N(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:C.jsx(so,{className:"w-6 h-6"})}),C.jsx("h2",{className:"font-bold text-lg mb-3",children:t("addNewCourse")}),C.jsxs("div",{className:"space-y-2",children:[C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("course")}),C.jsxs("select",{className:"w-full rounded border px-2 py-1",value:I||"",onChange:Le=>{M(Le.target.value),U(null),q(null),V(null),ae(!1)},children:[C.jsx("option",{value:"",children:t("select")}),b.filter(Le=>!(h.courses||{})[Le.id]).map(Le=>C.jsx("option",{value:Le.id,children:Le.name},Le.id))]})]}),I&&C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("day")}),C.jsxs("select",{className:"w-full rounded border px-2 py-1",value:j||"",onChange:Le=>{U(Le.target.value),q(null)},children:[C.jsx("option",{value:"",children:t("select")}),(((ze=oe[I])==null?void 0:ze.weekdays)||[]).map(Le=>C.jsx("option",{children:Le},Le))]})]}),j&&I&&C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("timeSlot")}),C.jsxs("select",{className:"w-full rounded border px-2 py-1",value:$||"",onChange:Le=>q(Le.target.value),children:[C.jsx("option",{value:"",children:t("select")}),(((ia=(wr=oe[I])==null?void 0:wr.times)==null?void 0:ia[j])||[]).map(Le=>C.jsx("option",{children:Le},Le))]})]}),I&&C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("chooseHourPackage")}),C.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:It.map((Le,nt)=>C.jsxs("label",{className:Vu("cursor-pointer border rounded-full px-4 py-2 text-sm font-semibold transition",B===nt?"bg-[#6654b3] text-white border-[#6654b3]":"bg-white border-gray-300 text-[#6654b3] hover:bg-purple-50"),children:[C.jsx("input",{type:"radio",name:"add-package",className:"hidden",checked:B===nt,onChange:()=>{V(nt),ae(!1)}}),t("hoursLabel",{count:Le.hours}),"  ",Le.price.toLocaleString()," ",t("baht")]},nt))}),B!=null&&C.jsxs(C.Fragment,{children:[C.jsx("button",{type:"button",onClick:()=>ae(!X),className:"mt-2 text-sm text-[#6654b3] underline",children:t(X?"hideDetail":"showDetail")}),X&&C.jsxs("div",{className:"border rounded-xl bg-purple-50 px-4 py-2 mt-2 text-sm",children:[C.jsx("div",{className:"font-semibold mb-1",children:(Li=oe[I])==null?void 0:Li.name}),C.jsxs("div",{children:[t("hoursLabel",{count:It[B].hours}),"  ",It[B].price.toLocaleString()," ",t("baht")]}),C.jsxs("div",{children:[t("day"),": ",j]}),C.jsxs("div",{children:[t("timeSlot"),": ",$]})]})]})]}),C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("uploadReceipt")}),C.jsx("input",{type:"file",className:"block",accept:"image/*,application/pdf",onChange:Le=>{var nt;return ee(((nt=Le.target.files)==null?void 0:nt[0])??null)}}),z&&C.jsx("span",{className:"text-xs text-gray-500",children:z.name})]}),B!=null&&C.jsxs("div",{className:"text-right font-bold text-lg text-[#6654b3] mt-2",children:[t("totalPrice"),": ",_e.toLocaleString()," ",t("baht")]})]}),C.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[C.jsx("button",{type:"button",onClick:()=>N(!1),className:"rounded-full px-4 py-2 border hover:bg-gray-100",children:t("cancel")}),C.jsxs("button",{type:"button",onClick:Be,className:"rounded-full px-4 py-2 bg-green-500 text-white hover:bg-green-600 flex items-center gap-1",children:[C.jsx(am,{className:"w-5 h-5"})," ",t("submit")]})]})]})}),C.jsx(Ss,{open:!!Y,onClose:()=>be(null),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:C.jsxs(Ss.Panel,{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[C.jsx("button",{type:"button",onClick:()=>be(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:C.jsx(so,{className:"w-6 h-6"})}),C.jsx("h2",{className:"font-bold text-lg mb-3",children:t("submitRenew",{course:((sa=oe[Y||""])==null?void 0:sa.name)||""})}),Y&&C.jsxs("label",{className:"block",children:[C.jsx("span",{className:"font-semibold",children:t("chooseHourPackage")}),C.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:je.map((Le,nt)=>C.jsxs("label",{className:Vu("cursor-pointer border rounded-full px-4 py-2 text-sm font-semibold transition",Te===nt?"bg-[#6654b3] text-white border-[#6654b3]":"bg-white border-gray-300 text-[#6654b3] hover:bg-purple-50"),children:[C.jsx("input",{type:"radio",name:"renew-package",className:"hidden",checked:Te===nt,onChange:()=>{ve(nt),se(!1)}}),t("hoursLabel",{count:Le.hours}),"  ",Le.price.toLocaleString()," ",t("baht")]},nt))}),Te!=null&&C.jsxs(C.Fragment,{children:[C.jsx("button",{type:"button",onClick:()=>se(!ie),className:"mt-2 text-sm text-[#6654b3] underline",children:t(ie?"hideDetail":"showDetail")}),ie&&C.jsxs("div",{className:"border rounded-xl bg-purple-50 px-4 py-2 mt-2 text-sm",children:[C.jsx("div",{className:"font-semibold mb-1",children:(kn=oe[Y])==null?void 0:kn.name}),C.jsxs("div",{children:[t("hoursLabel",{count:je[Te].hours}),"  ",je[Te].price.toLocaleString()," ",t("baht")]})]})]})]}),C.jsxs("label",{className:"block mb-3",children:[C.jsx("span",{className:"font-semibold",children:t("uploadReceipt")}),C.jsx("input",{type:"file",className:"block",accept:"image/*,application/pdf",onChange:Le=>{var nt;return ke(((nt=Le.target.files)==null?void 0:nt[0])??null)}}),le&&C.jsx("span",{className:"text-xs text-gray-500",children:le.name})]}),Te!=null&&C.jsxs("div",{className:"text-right font-bold text-lg text-[#6654b3] mt-2",children:[t("totalPrice"),": ",Ke.toLocaleString()," ",t("baht")]}),C.jsxs("div",{className:"flex justify-end gap-3 mt-2",children:[C.jsx("button",{type:"button",onClick:()=>be(null),className:"rounded-full px-4 py-2 border hover:bg-gray-100",children:t("cancel")}),C.jsxs("button",{type:"button",onClick:pt,className:"rounded-full px-4 py-2 bg-[#6654b3] text-white hover:bg-purple-700 flex items-center gap-1",children:[C.jsx(am,{className:"w-5 h-5"})," ",t("submit")]})]})]})}),fe&&C.jsx(lt,{urls:fe.urls,title:fe.title})]})}):C.jsx("div",{className:"p-8 text-pink-500",children:t("studentNotFound")})}const Ei="#6654b3",DV="#f6f6f6";function LV(t){const e=["#f6e6fa","#e5f6fb","#faf6e6","#f1e6fa","#e6faea","#e6ebfa"];return e[t%e.length]}async function kV(){const{data:t}=await Pe.from("students").select("id,first_name,last_name,nick_name,courses,course_limits,cancelled_at,parent_phone,parent_line_id,joined_at"),{data:e}=await Pe.from("attendance").select("student_id,course_id,approved_by"),{data:n}=await Pe.from("courses").select("id,name,hour_packages");if(!t||!e||!n)return[];let r=[];return t.forEach(l=>{var u;if(!(!l.courses||!l.course_limits))for(const h of Object.keys(l.courses)){const y=((u=l.course_limits)==null?void 0:u[h])||0,b=e.filter(A=>A.student_id===l.id&&A.course_id===h&&A.approved_by),x=b.length,E=!!(l.cancelled_at&&l.cancelled_at[h]);y>0&&x>=y&&!E&&r.push({stu:l,cid:h,used:x,purchased:y,attendance:b,course:n.find(A=>A.id===h)||{name:h}})}}),r}function jV(){const{t}=zn(),e=_s(),n=Mc(),[r,l]=R.useState(""),[u,h]=R.useState(new Set),[y,b]=R.useState(!1),[x,E]=R.useState(null),[A,N]=R.useState(1),[I,M]=R.useState(null),[j,U]=R.useState(null),{data:$=[],isLoading:q,error:B}=hi({queryKey:["students","inactive","rows"],queryFn:kV,staleTime:12e4}),V=R.useMemo(()=>{const Y=r.trim().toLowerCase();return Y?$.filter(({stu:be,course:Te})=>[be.nick_name||"",be.first_name,be.last_name,be.parent_phone,be.parent_line_id||"",(Te==null?void 0:Te.name)||""].map(ve=>(""+ve).toLowerCase()).some(ve=>ve.includes(Y))):$},[$,r]);function z(Y){return`${Y.stu.id}-${Y.cid}`}function ee(){const Y=V.filter(se=>u.has(z(se))),be=[t("no"),t("nickName"),t("firstName"),t("lastName"),t("parentPhone"),t("lineID"),t("course"),C.jsxs("th",{children:[t("used"),"/",t("purchased")]}),t("status")],Te=Y.map((se,fe)=>{var Ie;return[fe+1,`"${se.stu.nick_name||""}"`,`"${se.stu.first_name}"`,`"${se.stu.last_name}"`,`"${se.stu.parent_phone}"`,`"${se.stu.parent_line_id||""}"`,`"${((Ie=se.course)==null?void 0:Ie.name)||se.cid}"`,`"${se.used}/${se.purchased}"`,t("renewalNeeded")]}),ve=[be,...Te].map(se=>se.join(",")).join(`
`),le=new Blob([ve],{type:"text/csv"}),ke=URL.createObjectURL(le),ie=document.createElement("a");ie.href=ke,ie.download=`students_renewal_export_${Date.now()}.csv`,ie.click(),URL.revokeObjectURL(ke),b(!1)}async function X(){if(!(x!=null&&x.stu)||!x.cid||!I||A<1)return;const Y=I,be=`${Date.now()}-${Y.name}`,{data:Te,error:ve}=await Pe.storage.from("receipts").upload(be,Y);if(ve){alert(ve.message);return}const{data:le}=Pe.storage.from("receipts").getPublicUrl(Te.path);await Pe.from("application_changes").insert([{student_id:x.stu.id,type:"renewal",status:"pending",changes:{course_limits:{[x.cid]:A},receipts:[le.publicUrl]}}]),E(null),N(1),M(null),alert(t("submitRenewal")),n.invalidateQueries({queryKey:["students","inactive","rows"]})}async function ae(Y,be){const{data:Te}=await Pe.auth.getUser();if(!(Te!=null&&Te.user)){alert(t("profileMissingError"));return}const ve={...Y.cancelled_at||{}};ve[be]=new Date().toISOString(),await Pe.from("students").update({cancelled_at:ve}).eq("id",Y.id),n.invalidateQueries({queryKey:["students","inactive","rows"]}),U(null)}return C.jsxs("div",{className:"min-h-screen flex flex-col items-center py-8 px-2 sm:px-6 font-sans",style:{background:DV},children:[C.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-3 pb-4",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsxs("h1",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight",style:{color:Ei},children:[t("students")," (",t("inactive"),")"]}),C.jsx("span",{className:"ml-2 px-3 py-1 rounded-full text-lg font-semibold",style:{background:"#ebe7f7",color:Ei,border:"1px solid #e1def5"},children:V.length})]}),C.jsxs("div",{className:"flex gap-2 mt-3 sm:mt-0",children:[C.jsx("input",{type:"text",placeholder:t("searchStudents"),value:r,onChange:Y=>l(Y.target.value),className:"rounded-2xl border border-[#e1def5] px-4 py-2 bg-white shadow focus:outline-none focus:ring-2 focus:ring-[#6654b3] transition w-56",style:{color:Ei}}),C.jsxs("button",{onClick:()=>b(!0),disabled:!u.size,className:"flex items-center gap-1 font-semibold px-4 py-2 rounded-2xl transition active:scale-95 disabled:opacity-60",style:{background:"#ec4899",color:"#fff",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.02)"},children:[C.jsx(Ch,{className:"w-5 h-5"})," ",t("export")]})]})]}),C.jsx("div",{className:"w-full max-w-6xl mx-auto overflow-x-auto",children:q?C.jsx("div",{className:"text-center text-[#a7a3c0] py-10",children:t("loading")}):B?C.jsx("div",{className:"text-red-500 py-10 text-center",children:B.message||B.toString()}):C.jsxs("table",{className:"w-full min-w-[900px] rounded-2xl",style:{background:"#fff",borderCollapse:"separate",borderSpacing:0,boxShadow:"0 2px 18px 0 rgba(102,84,179,0.05)",border:"1.5px solid #e1def5"},children:[C.jsx("thead",{style:{background:"#f6f6f6"},children:C.jsxs("tr",{children:[C.jsx("th",{className:"px-2 py-3 rounded-l-2xl",children:C.jsx("input",{type:"checkbox",className:"accent-[#6654b3]",checked:V.length>0&&V.every(Y=>u.has(z(Y))),onChange:Y=>{const be=new Set(u);Y.target.checked?V.forEach(Te=>be.add(z(Te))):V.forEach(Te=>be.delete(z(Te))),h(be)}})}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Ei},children:"#"}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Ei},children:t("nickName")}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Ei},children:t("firstName")}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Ei},children:t("lastName")}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Ei},children:t("parentPhone")}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Ei},children:t("lineID")}),C.jsx("th",{className:"px-2 py-3 text-left font-semibold",style:{color:Ei},children:t("course")}),C.jsxs("th",{className:"px-2 py-3 text-center font-semibold",style:{color:Ei},children:[t("used"),"/",t("purchased")]}),C.jsx("th",{className:"px-2 py-3 text-center font-semibold",style:{color:Ei},children:t("status")}),C.jsx("th",{className:"px-2 py-3 text-center font-semibold rounded-r-2xl",style:{color:Ei},children:t("actions")})]})}),C.jsx("tbody",{children:V.length===0?C.jsx("tr",{children:C.jsx("td",{colSpan:11,className:"text-center text-[#b0b0b0] py-8",children:t("noStudentsFound")})}):V.map((Y,be)=>{var Te;return C.jsxs("tr",{className:"transition",style:{animation:"fadein 0.3s",background:u.has(z(Y))?LV(be):"inherit"},children:[C.jsx("td",{className:"px-2 py-2 text-center align-middle",children:C.jsx("input",{type:"checkbox",className:"accent-[#6654b3]",checked:u.has(z(Y)),onChange:ve=>{const le=new Set(u);ve.target.checked?le.add(z(Y)):le.delete(z(Y)),h(le)}})}),C.jsx("td",{className:"px-2 py-2 align-middle",children:be+1}),C.jsx("td",{className:"px-2 py-2 align-middle font-semibold",style:{color:Ei},children:Y.stu.nick_name||C.jsx("span",{className:"text-[#d3d3e0]",children:""})}),C.jsx("td",{className:"px-2 py-2 align-middle font-semibold cursor-pointer hover:underline",style:{color:"#3a38a0"},onClick:()=>e(`/myschool/student/${Y.stu.id}`),children:Y.stu.first_name}),C.jsx("td",{className:"px-2 py-2 align-middle",children:Y.stu.last_name}),C.jsx("td",{className:"px-2 py-2 align-middle font-mono",children:Y.stu.parent_phone}),C.jsx("td",{className:"px-2 py-2 align-middle",children:C.jsx("span",{className:"rounded-xl px-2 py-1 text-xs font-semibold",style:{background:"#ebe7f7",color:Ei,border:"1px solid #e1def5"},children:Y.stu.parent_line_id||""})}),C.jsx("td",{className:"px-2 py-2 align-middle",children:((Te=Y.course)==null?void 0:Te.name)||Y.cid}),C.jsxs("td",{className:"px-2 py-2 align-middle text-center font-mono",children:[Y.used," / ",Y.purchased]}),C.jsx("td",{className:"px-2 py-2 align-middle text-center",children:C.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold",style:{background:"#fffbe5",color:"#bfa700",border:"1px solid #f6e38d"},children:t("renewalNeeded")})}),C.jsxs("td",{className:"px-2 py-2 align-middle text-center flex gap-1 justify-center",children:[C.jsx("button",{className:"rounded-full px-3 py-1 bg-[#ece6fc] text-[#6654b3] border border-[#6654b3] hover:bg-[#e4d8fd] text-xs font-semibold",onClick:()=>{E({stu:Y.stu,cid:Y.cid}),N(1),M(null)},children:t("renew")}),C.jsxs("button",{className:"rounded-full px-3 py-1 bg-red-50 text-red-700 border border-red-300 hover:bg-red-100 text-xs font-semibold flex items-center gap-1",onClick:()=>U({stu:Y.stu,cid:Y.cid}),children:[C.jsx(om,{className:"w-4 h-4"}),t("cancelled")]})]})]},z(Y))})})]})}),y&&C.jsx("div",{className:"fixed z-50 inset-0 bg-black/40 flex items-center justify-center",children:C.jsxs("div",{className:"rounded-2xl shadow-lg p-6 max-w-md w-full relative",style:{background:"#fff"},children:[C.jsx("button",{className:"absolute right-4 top-4 text-[#c2bce5] hover:text-[#ec4899]",onClick:()=>b(!1),children:C.jsx(so,{className:"w-6 h-6"})}),C.jsx("h2",{className:"text-lg font-bold mb-3",style:{color:"#ec4899"},children:t("exportStudents",{count:u.size})}),C.jsxs("div",{className:"flex gap-2 justify-between",children:[C.jsxs("button",{onClick:ee,className:"rounded-xl px-4 py-2 font-semibold flex items-center gap-1",style:{background:"#34d399",color:"#fff"},children:[C.jsx(Ch,{className:"w-5 h-5"})," ",t("exportCSV")]}),C.jsxs("button",{onClick:()=>{window.print(),b(!1)},className:"rounded-xl px-4 py-2 font-semibold flex items-center gap-1",style:{background:Ei,color:"#fff"},children:[C.jsx(Qm,{className:"w-5 h-5"})," ",t("print")]})]})]})}),C.jsx(Ss,{open:!!x,onClose:()=>E(null),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:C.jsxs(Ss.Panel,{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[C.jsx("button",{type:"button",onClick:()=>E(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:C.jsx(so,{className:"w-6 h-6"})}),C.jsx("h2",{className:"font-bold text-lg mb-3",children:t("submitRenew")}),C.jsxs("label",{className:"block mb-3",children:[C.jsx("span",{className:"font-semibold",children:t("hoursToPurchase")}),C.jsx("input",{type:"number",className:"w-full rounded border px-2 py-1",min:1,value:A,onChange:Y=>N(Number(Y.target.value))})]}),C.jsxs("label",{className:"block mb-3",children:[C.jsx("span",{className:"font-semibold",children:t("uploadReceipt")}),C.jsx("input",{type:"file",className:"block",accept:"image/*,application/pdf",onChange:Y=>M(Y.target.files?Y.target.files[0]:null)}),I&&C.jsx("span",{className:"text-xs text-gray-500",children:I.name})]}),C.jsxs("div",{className:"flex justify-end gap-3 mt-2",children:[C.jsx("button",{type:"button",onClick:()=>E(null),className:"rounded-full px-4 py-2 border hover:bg-gray-100",children:t("cancel")}),C.jsxs("button",{type:"button",onClick:X,className:"rounded-full px-4 py-2 bg-[#6654b3] text-white hover:bg-purple-700 flex items-center gap-1",children:[C.jsx(am,{className:"w-5 h-5"})," ",t("submit")]})]})]})}),C.jsx(Ss,{open:!!j,onClose:()=>U(null),className:"fixed z-50 inset-0 flex items-center justify-center bg-black/30",children:C.jsxs(Ss.Panel,{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl",children:[C.jsx("button",{type:"button",onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:C.jsx(so,{className:"w-6 h-6"})}),C.jsx("h2",{className:"font-bold text-lg mb-4 text-red-500",children:t("cancelCourse")}),C.jsx("div",{className:"mb-6",children:t("cancelCourseConfirm")}),C.jsxs("div",{className:"flex justify-end gap-3",children:[C.jsx("button",{type:"button",onClick:()=>U(null),className:"rounded-full px-4 py-2 border hover:bg-gray-100",children:t("cancel")}),C.jsxs("button",{type:"button",onClick:()=>ae(j.stu,j.cid),className:"rounded-full px-4 py-2 bg-red-500 text-white hover:bg-red-600 flex items-center gap-1",children:[C.jsx(om,{className:"w-5 h-5"})," ",t("confirm")]})]})]})}),C.jsx("style",{children:`
        @keyframes fadein { from { opacity:0; transform: scale(0.98);} to { opacity:1; transform: scale(1);} }
      `})]})}function BV(){return hi({queryKey:["courses"],queryFn:async()=>{const{data:t}=await Pe.from("courses").select("id,name,weekdays,times,capacity,hour_packages").order("name");return t??[]},staleTime:3e5})}function PV(t){return hi({queryKey:["public-admissions-link"],queryFn:async()=>{const{data:e}=await Pe.from("application_links").select("*").order("created_at",{ascending:!1}).limit(1);let n=e&&e[0]&&new Date(e[0].expires_at)>new Date?e[0]:null;if(!n){await Pe.from("application_links").update({expires_at:new Date(Date.now()-60*1e3)}).neq("expires_at",null);const{data:r}=await Pe.from("application_links").insert([{expires_at:new Date(Date.now()+7*24*3600*1e3)}]).select("*").single();n=r}return`${window.location.origin}/apply/${n.id}`},enabled:t,refetchOnWindowFocus:!1})}function UV({msg:t,onClear:e}){return ot.useEffect(()=>{if(!t)return;const n=setTimeout(e,3500);return()=>clearTimeout(n)},[t,e]),t?C.jsx("div",{className:"fixed left-1/2 -translate-x-1/2 bottom-8 z-50 bg-[#6654b3] text-white rounded-2xl px-8 py-3 shadow-xl text-lg font-semibold fade-in",children:t}):null}function kv({publicMode:t=!1}){const{t:e}=zn(),{user:n}=Fh(),r=(n==null?void 0:n.role)??null,[l,u]=R.useState(""),[h,y]=R.useState(""),[b,x]=R.useState(""),[E,A]=R.useState(""),[N,I]=R.useState(""),[M,j]=R.useState(""),[U,$]=R.useState({}),[q,B]=R.useState({}),[V,z]=R.useState([]),ee=R.useRef(null),[X,ae]=R.useState(!1),[Y,be]=R.useState(!1),[Te,ve]=R.useState(""),[le,ke]=R.useState(""),[ie,se]=R.useState(!1),[fe,Ie]=R.useState(!1),{data:Ue,refetch:W}=PV(fe&&(r==="admin"||r==="staff")),{data:Z=[],isLoading:ce}=BV();function oe(_e){$(Be=>{const je={...Be};return je[_e]?(delete je[_e],B(tt=>{const{[_e]:Ke,...pt}=tt;return pt})):je[_e]={},je})}function Oe(_e,Be){$(je=>{const tt={...je},Ke={...tt[_e]||{}};return Ke[Be]?delete Ke[Be]:Ke[Be]=[],Object.keys(Ke).length?tt[_e]=Ke:delete tt[_e],tt})}function qe(_e,Be,je){$(tt=>{const Ke={...tt};return Ke[_e]=Ke[_e]||{},Ke[_e][Be]=Ke[_e][Be]||[],Ke[_e][Be].includes(je)||Ke[_e][Be].push(je),Ke})}function we(_e,Be,je){$(tt=>{const Ke={...tt};return Ke[_e][Be].splice(je,1),Ke[_e][Be].length||delete Ke[_e][Be],Object.keys(Ke[_e]).length||delete Ke[_e],Ke})}const ht=_e=>z(Be=>[...Be,..._e]),Ge=_e=>z(Be=>Be.filter((je,tt)=>tt!==_e)),It=Object.entries(q).reduce((_e,[Be,je])=>{var pt;const tt=Z.find(lt=>lt.id===Be),Ke=(pt=tt==null?void 0:tt.hour_packages)==null?void 0:pt[je];return Ke?_e+Ke.price:_e},0);async function bn(_e){var Ke;if(_e.preventDefault(),ke(""),!Object.keys(U).length)return ke(e("selectCourseError"));if(!l.trim())return ke(e("enterNickError"));for(const pt of Object.keys(U)){const lt=Z.find(xt=>xt.id===pt);if(lt&&((Ke=lt.hour_packages)!=null&&Ke.length)&&q[pt]===void 0)return ke(e("selectHourPackageError"))}ae(!0);const Be=[];for(const pt of V){const lt=`${Date.now()}-${Math.random().toString(36).slice(2)}.${pt.name.split(".").pop()}`,{data:xt,error:gt}=await Pe.storage.from("receipts").upload(lt,pt,{cacheControl:"3600"});if(gt){ke(gt.message),ae(!1);return}const{data:cs}=Pe.storage.from("receipts").getPublicUrl(xt.path);Be.push(cs.publicUrl)}const je={};for(const pt of Object.keys(U)){const lt=Z.find(xt=>xt.id===pt);lt&&Array.isArray(lt.hour_packages)&&q[pt]!==void 0?je[pt]=lt.hour_packages[q[pt]]:je[pt]=null}const tt={nick_name:l,first_name:h,last_name:b,dob:E,parent_line_id:N,parent_phone:M,courses:U,purchased_packages:je,total_price:It,payment_receipt_urls:Be};if(r==="admin"){const{error:pt}=await Pe.from("students").insert([{...tt,joined_at:new Date().toISOString()}]);if(pt){ke(pt.message),ae(!1);return}ve(e("studentAdded",{nick:l})),be(!0)}else{const{error:pt}=await Pe.from("applications").insert([{...tt,status:"pending"}]);if(pt){ke(pt.message),ae(!1);return}ve(e("applicationSubmitted")),be(!0)}ae(!1)}return ot.useEffect(()=>{if(!t&&Y){const _e=setTimeout(()=>be(!1),1200);return()=>clearTimeout(_e)}},[t,Y]),t&&Y?C.jsx("div",{className:"min-h-[60vh] flex flex-col justify-center items-center bg-[#f6f6f6]",children:C.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-green-50 to-yellow-50 shadow-xl rounded-3xl px-8 py-12 max-w-md w-full flex flex-col items-center",children:[C.jsx("div",{className:"text-3xl font-extrabold mb-3 text-[#6654b3]",children:e("thankYou")}),C.jsxs("div",{className:"text-lg text-gray-700 mb-4 text-center",children:[e("applicationReceived"),C.jsx("br",{}),e("staffWillContact"),C.jsx("br",{}),e("youMayClose")]})]})}):C.jsxs("div",{className:"flex flex-col gap-8 py-10 px-2 sm:px-6 max-w-3xl mx-auto",style:{background:"#f6f6f6"},children:[C.jsxs("header",{className:"mb-4",children:[C.jsx("h1",{className:"text-3xl font-extrabold text-[#6654b3]",children:e("admissionsTitle")}),C.jsx("p",{className:"text-lg text-[#6654b3] mt-2",children:e("admissionsIntro",{staffMsg:e(r==="admin"?"enrollInstant":"contactToConfirm")})})]}),C.jsxs("form",{onSubmit:bn,className:"space-y-8",children:[C.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[C.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("studentInfo")}),C.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[C.jsxs("label",{className:"flex flex-col gap-1",children:[C.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("nickName")}),C.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:l,onChange:_e=>u(_e.target.value),maxLength:40,pattern:".*"})]}),C.jsxs("label",{className:"flex flex-col gap-1",children:[C.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("firstName")}),C.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:h,onChange:_e=>y(_e.target.value),maxLength:40,pattern:".*"})]}),C.jsxs("label",{className:"flex flex-col gap-1",children:[C.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("lastName")}),C.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:b,onChange:_e=>x(_e.target.value),maxLength:40,pattern:".*"})]})]}),C.jsxs("label",{className:"flex flex-col gap-1 mt-4 w-full md:w-1/2",children:[C.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("dob")}),C.jsx("input",{required:!0,type:"date",className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:E,onChange:_e=>A(_e.target.value)})]})]}),C.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[C.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("guardian")}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[C.jsxs("label",{className:"flex flex-col gap-1",children:[C.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("lineAppId")}),C.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:N,onChange:_e=>I(_e.target.value)})]}),C.jsxs("label",{className:"flex flex-col gap-1",children:[C.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("phone")}),C.jsx("input",{required:!0,className:"border border-[#ece6fc] bg-purple-50 rounded-xl px-4 py-2",value:M,onChange:_e=>j(_e.target.value)})]})]})]}),C.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[C.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("courses")}),ce?C.jsx("div",{className:"text-gray-400",children:e("loadingCourses")}):Z.length===0?C.jsx("div",{className:"text-gray-400",children:e("noCourses")}):Z.map(_e=>C.jsxs("div",{className:`mb-2 border ${U[_e.id]?"border-[#6654b3] bg-purple-50":"border-gray-200 bg-white"} rounded-xl p-3 transition-all`,children:[C.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[C.jsx("input",{type:"checkbox",checked:!!U[_e.id],onChange:()=>oe(_e.id)}),C.jsx("span",{className:"text-lg",children:_e.name}),C.jsx("span",{className:"text-xs text-gray-400",children:e("seats",{count:_e.capacity})})]}),U[_e.id]&&C.jsxs("div",{className:"ml-8 mt-2 mb-2",children:[_e.weekdays.map(Be=>{var je,tt;return C.jsxs("div",{className:"mb-1",children:[C.jsxs("label",{className:"font-semibold mr-2",children:[C.jsx("input",{type:"checkbox",className:"mr-1",checked:!!((je=U[_e.id])!=null&&je[Be]),onChange:()=>Oe(_e.id,Be)}),Be]}),!!((tt=U[_e.id])!=null&&tt[Be])&&C.jsxs(C.Fragment,{children:[U[_e.id][Be].map((Ke,pt)=>C.jsxs("span",{className:"inline-flex items-center bg-[#ece6fc] rounded-full px-3 py-0.5 text-xs mr-2 mt-1",children:[Ke,C.jsx("button",{type:"button",className:"ml-1 text-red-500 font-bold",onClick:()=>we(_e.id,Be,pt),children:""})]},pt)),C.jsxs("select",{className:"border rounded px-2 py-1 text-sm ml-2",defaultValue:"",onChange:Ke=>{Ke.target.value&&(qe(_e.id,Be,Ke.target.value),Ke.target.value="")},children:[C.jsx("option",{value:"",children:e("addTime")}),(_e.times[Be]||[]).filter(Ke=>{var pt;return!((pt=U[_e.id][Be])!=null&&pt.includes(Ke))}).map(Ke=>C.jsx("option",{children:Ke},Ke))]})]})]},Be)}),Array.isArray(_e.hour_packages)&&_e.hour_packages.length>0&&C.jsxs("div",{className:"mt-3",children:[C.jsx("span",{className:"font-semibold text-[#6654b3]",children:e("chooseHourPackage")}),C.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:_e.hour_packages.map((Be,je)=>C.jsxs("label",{className:`cursor-pointer border rounded-full px-4 py-2 text-sm font-semibold transition
                              ${q[_e.id]===je?"bg-[#6654b3] text-white border-[#6654b3]":"bg-white border-gray-300 text-[#6654b3] hover:bg-purple-50"}`,children:[C.jsx("input",{type:"radio",name:`hour-package-${_e.id}`,className:"hidden",checked:q[_e.id]===je,onChange:()=>B(tt=>({...tt,[_e.id]:je}))}),e("hoursLabel",{count:Be.hours}),"  ",Be.price.toLocaleString()," ",e("baht")]},je))})]})]})]},_e.id))]}),C.jsxs("div",{className:"bg-white border border-[#ece6fc] p-6 rounded-2xl shadow transition-all",children:[C.jsx("h2",{className:"text-xl font-bold text-[#6654b3] mb-2",children:e("paymentReceipt")}),C.jsxs("div",{className:"mb-4 flex flex-col items-end",children:[C.jsxs("div",{className:"text-lg font-bold text-[#6654b3] mb-1",children:[e("totalPrice"),": ",It.toLocaleString()," ",e("baht")]}),It>0&&C.jsx("button",{type:"button",onClick:()=>se(_e=>!_e),className:"text-sm text-[#6654b3] underline hover:opacity-70 transition px-2",children:e(ie?"hideDetail":"showDetail")})]}),ie&&It>0&&C.jsx("div",{className:"mb-4 bg-[#f9f5ff] p-4 rounded-xl shadow-inner text-sm text-[#6654b3]",children:Object.entries(q).map(([_e,Be])=>{var pt;const je=Z.find(lt=>lt.id===_e),tt=(pt=je==null?void 0:je.hour_packages)==null?void 0:pt[Be];if(!je||!tt)return null;const Ke=U[_e];return C.jsxs("div",{className:"mb-3",children:[C.jsxs("div",{className:"font-semibold",children:[je.name,": ",e("hoursLabel",{count:tt.hours}),"  ",tt.price.toLocaleString()," ",e("baht")]}),C.jsx("ul",{className:"ml-4 mt-1 list-disc",children:Object.entries(Ke||{}).map(([lt,xt])=>C.jsxs("li",{children:[C.jsx("span",{className:"font-medium",children:lt}),xt&&xt.length>0&&C.jsx("span",{className:"ml-2",children:xt.join(", ")})]},lt))})]},_e)})}),C.jsxs("div",{className:"flex flex-col gap-2",children:[C.jsx("button",{type:"button",onClick:()=>{var _e;return(_e=ee.current)==null?void 0:_e.click()},className:"rounded-full border border-[#ece6fc] bg-purple-50 text-[#6654b3] px-5 py-2 font-semibold hover:bg-purple-100 transition",children:e("chooseFiles")}),C.jsx("input",{ref:ee,type:"file",multiple:!0,accept:"image/*,application/pdf",className:"hidden",onChange:_e=>_e.target.files&&ht(Array.from(_e.target.files))}),V.length>0&&C.jsx("ul",{className:"mt-2 space-y-1",children:V.map((_e,Be)=>C.jsxs("li",{className:"flex items-center bg-[#ece6fc] rounded-full px-3 py-1 text-sm",children:[C.jsx("span",{className:"truncate max-w-[180px]",children:_e.name}),C.jsx("button",{type:"button",className:"ml-2 text-red-500 font-bold",onClick:()=>Ge(Be),children:""})]},Be))})]})]}),C.jsx(UV,{msg:Te||le,onClear:()=>{ve(""),ke("")}}),C.jsx("div",{className:"flex justify-end",children:C.jsx("button",{type:"submit",disabled:X,className:"bg-[#6654b3] hover:bg-purple-700 text-white font-bold px-8 py-3 rounded-xl shadow disabled:opacity-50 transition",children:e(r==="admin"?X?"adding":"addStudent":X?"submitting":"submitApplication")})}),!t&&(r==="admin"||r==="staff")&&C.jsxs("div",{className:"mt-12 flex flex-col items-center gap-2",children:[C.jsx("button",{type:"button",onClick:()=>{Ie(!0),W()},className:"px-5 py-2 rounded-full font-semibold border bg-[#f6f6f6] text-[#6654b3] border-[#ece6fc] hover:bg-[#ece6fc] transition",children:e(Ue?"refreshPublicAdmissionsLink":"showPublicAdmissionsLink")}),fe&&Ue&&C.jsxs("div",{className:"flex items-center gap-2 mt-2 bg-[#ece6fc] px-4 py-2 rounded-xl w-full max-w-lg",children:[C.jsx("input",{readOnly:!0,className:"flex-1 bg-transparent outline-none",value:Ue}),C.jsx("button",{onClick:()=>navigator.clipboard.writeText(Ue),className:"text-[#6654b3] hover:underline font-bold px-2",children:e("copy")})]})]})]})]})}var He;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(He||(He={}));var jv=new Map([[He.QR_CODE,"QR_CODE"],[He.AZTEC,"AZTEC"],[He.CODABAR,"CODABAR"],[He.CODE_39,"CODE_39"],[He.CODE_93,"CODE_93"],[He.CODE_128,"CODE_128"],[He.DATA_MATRIX,"DATA_MATRIX"],[He.MAXICODE,"MAXICODE"],[He.ITF,"ITF"],[He.EAN_13,"EAN_13"],[He.EAN_8,"EAN_8"],[He.PDF_417,"PDF_417"],[He.RSS_14,"RSS_14"],[He.RSS_EXPANDED,"RSS_EXPANDED"],[He.UPC_A,"UPC_A"],[He.UPC_E,"UPC_E"],[He.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Bv;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Bv||(Bv={}));function FV(t){return Object.values(He).includes(t)}var lo;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(lo||(lo={}));var zs=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[lo.SCAN_TYPE_CAMERA,lo.SCAN_TYPE_FILE],t}(),SC=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!jv.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,jv.get(e))},t}(),Pv=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Lm;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Lm||(Lm={}));var CC=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Lm.UNKWOWN_ERROR}},t}(),AC=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function fr(t){return typeof t>"u"||t===null}function VV(t,e,n){return t>n?n:t<e?e:t}var hc=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Zt=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),Uv=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),TC=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],u=new Set(l),h=Object.keys(e),y=0,b=h;y<b.length;y++){var x=b[y];if(u.has(x))return n.logError("".concat(x," is not supported videoConstaints."),!0),!1}return!0},t}(),qu={exports:{}},zV=qu.exports,Fv;function HV(){return Fv||(Fv=1,function(t,e){(function(n,r){r(e)})(zV,function(n){function r(L){return L==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,s){L.__proto__=s}||function(L,s){for(var o in s)s.hasOwnProperty(o)&&(L[o]=s[o])};function u(L,s){l(L,s);function o(){this.constructor=L}L.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}function h(L,s){var o=Object.setPrototypeOf;o?o(L,s):L.__proto__=s}function y(L,s){s===void 0&&(s=L.constructor);var o=Error.captureStackTrace;o&&o(L,s)}var b=function(L){u(s,L);function s(o){var c=this.constructor,d=L.call(this,o)||this;return Object.defineProperty(d,"name",{value:c.name,enumerable:!1}),h(d,c.prototype),y(d),d}return s}(Error);class x extends b{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}x.kind="Exception";class E extends x{}E.kind="ArgumentException";class A extends x{}A.kind="IllegalArgumentException";class N{constructor(s){if(this.binarizer=s,s===null)throw new A("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,o){return this.binarizer.getBlackRow(s,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,o,c,d){const g=this.binarizer.getLuminanceSource().crop(s,o,c,d);return new N(this.binarizer.createBinarizer(g))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new N(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new N(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class I extends x{static getChecksumInstance(){return new I}}I.kind="ChecksumException";class M{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class j{static arraycopy(s,o,c,d,g){for(;g--;)c[d++]=s[o++]}static currentTimeMillis(){return Date.now()}}class U extends x{}U.kind="IndexOutOfBoundsException";class $ extends U{constructor(s=void 0,o=void 0){super(o),this.index=s,this.message=o}}$.kind="ArrayIndexOutOfBoundsException";class q{static fill(s,o){for(let c=0,d=s.length;c<d;c++)s[c]=o}static fillWithin(s,o,c,d){q.rangeCheck(s.length,o,c);for(let g=o;g<c;g++)s[g]=d}static rangeCheck(s,o,c){if(o>c)throw new A("fromIndex("+o+") > toIndex("+c+")");if(o<0)throw new $(o);if(c>s)throw new $(c)}static asList(...s){return s}static create(s,o,c){return Array.from({length:s}).map(g=>Array.from({length:o}).fill(c))}static createInt32Array(s,o,c){return Array.from({length:s}).map(g=>Int32Array.from({length:o}).fill(c))}static equals(s,o){if(!s||!o||!s.length||!o.length||s.length!==o.length)return!1;for(let c=0,d=s.length;c<d;c++)if(s[c]!==o[c])return!1;return!0}static hashCode(s){if(s===null)return 0;let o=1;for(const c of s)o=31*o+c;return o}static fillUint8Array(s,o){for(let c=0;c!==s.length;c++)s[c]=o}static copyOf(s,o){return s.slice(0,o)}static copyOfUint8Array(s,o){if(s.length<=o){const c=new Uint8Array(o);return c.set(s),c}return s.slice(0,o)}static copyOfRange(s,o,c){const d=c-o,g=new Int32Array(d);return j.arraycopy(s,o,g,0,d),g}static binarySearch(s,o,c){c===void 0&&(c=q.numberComparator);let d=0,g=s.length-1;for(;d<=g;){const p=g+d>>1,w=c(o,s[p]);if(w>0)d=p+1;else if(w<0)g=p-1;else return p}return-d-1}static numberComparator(s,o){return s-o}}class B{static numberOfTrailingZeros(s){let o;if(s===0)return 32;let c=31;return o=s<<16,o!==0&&(c-=16,s=o),o=s<<8,o!==0&&(c-=8,s=o),o=s<<4,o!==0&&(c-=4,s=o),o=s<<2,o!==0&&(c-=2,s=o),c-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let o=1;return s>>>16||(o+=16,s<<=16),s>>>24||(o+=8,s<<=8),s>>>28||(o+=4,s<<=4),s>>>30||(o+=2,s<<=2),o-=s>>>31,o}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,o){return Math.trunc(s/o)}static parseInt(s,o=void 0){return parseInt(s,o)}}B.MIN_VALUE_32_BITS=-2147483648,B.MAX_VALUE=Number.MAX_SAFE_INTEGER;class V{constructor(s,o){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,o==null?this.bits=V.makeArray(s):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const o=V.makeArray(s);j.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const o=this.size;if(s>=o)return o;const c=this.bits;let d=Math.floor(s/32),g=c[d];g&=~((1<<(s&31))-1);const p=c.length;for(;g===0;){if(++d===p)return o;g=c[d]}const w=d*32+B.numberOfTrailingZeros(g);return w>o?o:w}getNextUnset(s){const o=this.size;if(s>=o)return o;const c=this.bits;let d=Math.floor(s/32),g=~c[d];g&=~((1<<(s&31))-1);const p=c.length;for(;g===0;){if(++d===p)return o;g=~c[d]}const w=d*32+B.numberOfTrailingZeros(g);return w>o?o:w}setBulk(s,o){this.bits[Math.floor(s/32)]=o}setRange(s,o){if(o<s||s<0||o>this.size)throw new A;if(o===s)return;o--;const c=Math.floor(s/32),d=Math.floor(o/32),g=this.bits;for(let p=c;p<=d;p++){const w=p>c?0:s&31,_=(2<<(p<d?31:o&31))-(1<<w);g[p]|=_}}clear(){const s=this.bits.length,o=this.bits;for(let c=0;c<s;c++)o[c]=0}isRange(s,o,c){if(o<s||s<0||o>this.size)throw new A;if(o===s)return!0;o--;const d=Math.floor(s/32),g=Math.floor(o/32),p=this.bits;for(let w=d;w<=g;w++){const S=w>d?0:s&31,O=(2<<(w<g?31:o&31))-(1<<S)&4294967295;if((p[w]&O)!==(c?O:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,o){if(o<0||o>32)throw new A("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let c=o;c>0;c--)this.appendBit((s>>c-1&1)===1)}appendBitArray(s){const o=s.size;this.ensureCapacity(this.size+o);for(let c=0;c<o;c++)this.appendBit(s.get(c))}xor(s){if(this.size!==s.size)throw new A("Sizes don't match");const o=this.bits;for(let c=0,d=o.length;c<d;c++)o[c]^=s.bits[c]}toBytes(s,o,c,d){for(let g=0;g<d;g++){let p=0;for(let w=0;w<8;w++)this.get(s)&&(p|=1<<7-w),s++;o[c+g]=p}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),c=o+1,d=this.bits;for(let g=0;g<c;g++){let p=d[g];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,s[o-g]=p}if(this.size!==c*32){const g=c*32-this.size;let p=s[0]>>>g;for(let w=1;w<c;w++){const S=s[w];p|=S<<32-g,s[w-1]=p,p=S>>>g}s[c-1]=p}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof V))return!1;const o=s;return this.size===o.size&&q.equals(this.bits,o.bits)}hashCode(){return 31*this.size+q.hashCode(this.bits)}toString(){let s="";for(let o=0,c=this.size;o<c;o++)(o&7)===0&&(s+=" "),s+=this.get(o)?"X":".";return s}clone(){return new V(this.size,this.bits.slice())}}var z;(function(L){L[L.OTHER=0]="OTHER",L[L.PURE_BARCODE=1]="PURE_BARCODE",L[L.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",L[L.TRY_HARDER=3]="TRY_HARDER",L[L.CHARACTER_SET=4]="CHARACTER_SET",L[L.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",L[L.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",L[L.ASSUME_GS1=7]="ASSUME_GS1",L[L.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",L[L.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",L[L.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(z||(z={}));var ee=z;class X extends x{static getFormatInstance(){return new X}}X.kind="FormatException";var ae;(function(L){L[L.Cp437=0]="Cp437",L[L.ISO8859_1=1]="ISO8859_1",L[L.ISO8859_2=2]="ISO8859_2",L[L.ISO8859_3=3]="ISO8859_3",L[L.ISO8859_4=4]="ISO8859_4",L[L.ISO8859_5=5]="ISO8859_5",L[L.ISO8859_6=6]="ISO8859_6",L[L.ISO8859_7=7]="ISO8859_7",L[L.ISO8859_8=8]="ISO8859_8",L[L.ISO8859_9=9]="ISO8859_9",L[L.ISO8859_10=10]="ISO8859_10",L[L.ISO8859_11=11]="ISO8859_11",L[L.ISO8859_13=12]="ISO8859_13",L[L.ISO8859_14=13]="ISO8859_14",L[L.ISO8859_15=14]="ISO8859_15",L[L.ISO8859_16=15]="ISO8859_16",L[L.SJIS=16]="SJIS",L[L.Cp1250=17]="Cp1250",L[L.Cp1251=18]="Cp1251",L[L.Cp1252=19]="Cp1252",L[L.Cp1256=20]="Cp1256",L[L.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",L[L.UTF8=22]="UTF8",L[L.ASCII=23]="ASCII",L[L.Big5=24]="Big5",L[L.GB18030=25]="GB18030",L[L.EUC_KR=26]="EUC_KR"})(ae||(ae={}));class Y{constructor(s,o,c,...d){this.valueIdentifier=s,this.name=c,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=d,Y.VALUE_IDENTIFIER_TO_ECI.set(s,this),Y.NAME_TO_ECI.set(c,this);const g=this.values;for(let p=0,w=g.length;p!==w;p++){const S=g[p];Y.VALUES_TO_ECI.set(S,this)}for(const p of d)Y.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new X("incorect value");const o=Y.VALUES_TO_ECI.get(s);if(o===void 0)throw new X("incorect value");return o}static getCharacterSetECIByName(s){const o=Y.NAME_TO_ECI.get(s);if(o===void 0)throw new X("incorect value");return o}equals(s){if(!(s instanceof Y))return!1;const o=s;return this.getName()===o.getName()}}Y.VALUE_IDENTIFIER_TO_ECI=new Map,Y.VALUES_TO_ECI=new Map,Y.NAME_TO_ECI=new Map,Y.Cp437=new Y(ae.Cp437,Int32Array.from([0,2]),"Cp437"),Y.ISO8859_1=new Y(ae.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Y.ISO8859_2=new Y(ae.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Y.ISO8859_3=new Y(ae.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Y.ISO8859_4=new Y(ae.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Y.ISO8859_5=new Y(ae.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Y.ISO8859_6=new Y(ae.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Y.ISO8859_7=new Y(ae.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Y.ISO8859_8=new Y(ae.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Y.ISO8859_9=new Y(ae.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Y.ISO8859_10=new Y(ae.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Y.ISO8859_11=new Y(ae.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Y.ISO8859_13=new Y(ae.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Y.ISO8859_14=new Y(ae.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Y.ISO8859_15=new Y(ae.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Y.ISO8859_16=new Y(ae.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Y.SJIS=new Y(ae.SJIS,20,"SJIS","Shift_JIS"),Y.Cp1250=new Y(ae.Cp1250,21,"Cp1250","windows-1250"),Y.Cp1251=new Y(ae.Cp1251,22,"Cp1251","windows-1251"),Y.Cp1252=new Y(ae.Cp1252,23,"Cp1252","windows-1252"),Y.Cp1256=new Y(ae.Cp1256,24,"Cp1256","windows-1256"),Y.UnicodeBigUnmarked=new Y(ae.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Y.UTF8=new Y(ae.UTF8,26,"UTF8","UTF-8"),Y.ASCII=new Y(ae.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Y.Big5=new Y(ae.Big5,28,"Big5"),Y.GB18030=new Y(ae.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Y.EUC_KR=new Y(ae.EUC_KR,30,"EUC_KR","EUC-KR");class be extends x{}be.kind="UnsupportedOperationException";class Te{static decode(s,o){const c=this.encodingName(o);return this.customDecoder?this.customDecoder(s,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(s,c):new TextDecoder(c).decode(s)}static shouldDecodeOnFallback(s){return!Te.isBrowser()&&s==="ISO-8859-1"}static encode(s,o){const c=this.encodingName(o);return this.customEncoder?this.customEncoder(s,c):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof Y?s:Y.getCharacterSetECIByName(s)}static decodeFallback(s,o){const c=this.encodingCharacterSet(o);if(Te.isDecodeFallbackSupported(c)){let d="";for(let g=0,p=s.length;g<p;g++){let w=s[g].toString(16);w.length<2&&(w="0"+w),d+="%"+w}return decodeURIComponent(d)}if(c.equals(Y.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new be(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(Y.UTF8)||s.equals(Y.ISO8859_1)||s.equals(Y.ASCII)}static encodeFallback(s){const c=btoa(unescape(encodeURIComponent(s))).split(""),d=[];for(let g=0;g<c.length;g++)d.push(c[g].charCodeAt(0));return new Uint8Array(d)}}class ve{static castAsNonUtf8Char(s,o=null){const c=o?o.getName():this.ISO88591;return Te.decode(new Uint8Array([s]),c)}static guessEncoding(s,o){if(o!=null&&o.get(ee.CHARACTER_SET)!==void 0)return o.get(ee.CHARACTER_SET).toString();const c=s.length;let d=!0,g=!0,p=!0,w=0,S=0,_=0,O=0,k=0,P=0,G=0,Q=0,te=0,ue=0,pe=0;const Re=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let De=0;De<c&&(d||g||p);De++){const Ne=s[De]&255;p&&(w>0?(Ne&128)===0?p=!1:w--:(Ne&128)!==0&&((Ne&64)===0?p=!1:(w++,(Ne&32)===0?S++:(w++,(Ne&16)===0?_++:(w++,(Ne&8)===0?O++:p=!1))))),d&&(Ne>127&&Ne<160?d=!1:Ne>159&&(Ne<192||Ne===215||Ne===247)&&pe++),g&&(k>0?Ne<64||Ne===127||Ne>252?g=!1:k--:Ne===128||Ne===160||Ne>239?g=!1:Ne>160&&Ne<224?(P++,Q=0,G++,G>te&&(te=G)):Ne>127?(k++,G=0,Q++,Q>ue&&(ue=Q)):(G=0,Q=0))}return p&&w>0&&(p=!1),g&&k>0&&(g=!1),p&&(Re||S+_+O>0)?ve.UTF8:g&&(ve.ASSUME_SHIFT_JIS||te>=3||ue>=3)?ve.SHIFT_JIS:d&&g?te===2&&P===2||pe*10>=c?ve.SHIFT_JIS:ve.ISO88591:d?ve.ISO88591:g?ve.SHIFT_JIS:p?ve.UTF8:ve.PLATFORM_DEFAULT_ENCODING}static format(s,...o){let c=-1;function d(p,w,S,_,O,k){if(p==="%%")return"%";if(o[++c]===void 0)return;p=_?parseInt(_.substr(1)):void 0;let P=O?parseInt(O.substr(1)):void 0,G;switch(k){case"s":G=o[c];break;case"c":G=o[c][0];break;case"f":G=parseFloat(o[c]).toFixed(p);break;case"p":G=parseFloat(o[c]).toPrecision(p);break;case"e":G=parseFloat(o[c]).toExponential(p);break;case"x":G=parseInt(o[c]).toString(P||16);break;case"d":G=parseFloat(parseInt(o[c],P||10).toPrecision(p)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(P);let Q=parseInt(S),te=S&&S[0]+""=="0"?"0":" ";for(;G.length<Q;)G=w!==void 0?G+te:te+G;return G}let g=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(g,d)}static getBytes(s,o){return Te.encode(s,o)}static getCharCode(s,o=0){return s.charCodeAt(o)}static getCharAt(s){return String.fromCharCode(s)}}ve.SHIFT_JIS=Y.SJIS.getName(),ve.GB2312="GB2312",ve.ISO88591=Y.ISO8859_1.getName(),ve.EUC_JP="EUC_JP",ve.UTF8=Y.UTF8.getName(),ve.PLATFORM_DEFAULT_ENCODING=ve.UTF8,ve.ASSUME_SHIFT_JIS=!1;class le{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=ve.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,o,c){for(let d=o;o<o+c;d++)this.append(s[d]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,o){this.value=this.value.substr(0,s)+o+this.value.substr(s+1)}substring(s,o){return this.value.substring(s,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,o){this.value=this.value.substr(0,s)+o+this.value.substr(s+o.length)}}class ke{constructor(s,o,c,d){if(this.width=s,this.height=o,this.rowSize=c,this.bits=d,o==null&&(o=s),this.height=o,s<1||o<1)throw new A("Both dimensions must be greater than 0");c==null&&(c=Math.floor((s+31)/32)),this.rowSize=c,d==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const o=s.length,c=s[0].length,d=new ke(c,o);for(let g=0;g<o;g++){const p=s[g];for(let w=0;w<c;w++)p[w]&&d.set(w,g)}return d}static parseFromString(s,o,c){if(s===null)throw new A("stringRepresentation cannot be null");const d=new Array(s.length);let g=0,p=0,w=-1,S=0,_=0;for(;_<s.length;)if(s.charAt(_)===`
`||s.charAt(_)==="\r"){if(g>p){if(w===-1)w=g-p;else if(g-p!==w)throw new A("row lengths do not match");p=g,S++}_++}else if(s.substring(_,_+o.length)===o)_+=o.length,d[g]=!0,g++;else if(s.substring(_,_+c.length)===c)_+=c.length,d[g]=!1,g++;else throw new A("illegal character encountered: "+s.substring(_));if(g>p){if(w===-1)w=g-p;else if(g-p!==w)throw new A("row lengths do not match");S++}const O=new ke(w,S);for(let k=0;k<g;k++)d[k]&&O.set(Math.floor(k%w),Math.floor(k/w));return O}get(s,o){const c=o*this.rowSize+Math.floor(s/32);return(this.bits[c]>>>(s&31)&1)!==0}set(s,o){const c=o*this.rowSize+Math.floor(s/32);this.bits[c]|=1<<(s&31)&4294967295}unset(s,o){const c=o*this.rowSize+Math.floor(s/32);this.bits[c]&=~(1<<(s&31)&4294967295)}flip(s,o){const c=o*this.rowSize+Math.floor(s/32);this.bits[c]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new A("input matrix dimensions do not match");const o=new V(Math.floor(this.width/32)+1),c=this.rowSize,d=this.bits;for(let g=0,p=this.height;g<p;g++){const w=g*c,S=s.getRow(g,o).getBitArray();for(let _=0;_<c;_++)d[w+_]^=S[_]}}clear(){const s=this.bits,o=s.length;for(let c=0;c<o;c++)s[c]=0}setRegion(s,o,c,d){if(o<0||s<0)throw new A("Left and top must be nonnegative");if(d<1||c<1)throw new A("Height and width must be at least 1");const g=s+c,p=o+d;if(p>this.height||g>this.width)throw new A("The region must fit inside the matrix");const w=this.rowSize,S=this.bits;for(let _=o;_<p;_++){const O=_*w;for(let k=s;k<g;k++)S[O+Math.floor(k/32)]|=1<<(k&31)&4294967295}}getRow(s,o){o==null||o.getSize()<this.width?o=new V(this.width):o.clear();const c=this.rowSize,d=this.bits,g=s*c;for(let p=0;p<c;p++)o.setBulk(p*32,d[g+p]);return o}setRow(s,o){j.arraycopy(o.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),o=this.getHeight();let c=new V(s),d=new V(s);for(let g=0,p=Math.floor((o+1)/2);g<p;g++)c=this.getRow(g,c),d=this.getRow(o-1-g,d),c.reverse(),d.reverse(),this.setRow(g,d),this.setRow(o-1-g,c)}getEnclosingRectangle(){const s=this.width,o=this.height,c=this.rowSize,d=this.bits;let g=s,p=o,w=-1,S=-1;for(let _=0;_<o;_++)for(let O=0;O<c;O++){const k=d[_*c+O];if(k!==0){if(_<p&&(p=_),_>S&&(S=_),O*32<g){let P=0;for(;(k<<31-P&4294967295)===0;)P++;O*32+P<g&&(g=O*32+P)}if(O*32+31>w){let P=31;for(;!(k>>>P);)P--;O*32+P>w&&(w=O*32+P)}}}return w<g||S<p?null:Int32Array.from([g,p,w-g+1,S-p+1])}getTopLeftOnBit(){const s=this.rowSize,o=this.bits;let c=0;for(;c<o.length&&o[c]===0;)c++;if(c===o.length)return null;const d=c/s;let g=c%s*32;const p=o[c];let w=0;for(;(p<<31-w&4294967295)===0;)w++;return g+=w,Int32Array.from([g,d])}getBottomRightOnBit(){const s=this.rowSize,o=this.bits;let c=o.length-1;for(;c>=0&&o[c]===0;)c--;if(c<0)return null;const d=Math.floor(c/s);let g=Math.floor(c%s)*32;const p=o[c];let w=31;for(;!(p>>>w);)w--;return g+=w,Int32Array.from([g,d])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof ke))return!1;const o=s;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&q.equals(this.bits,o.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+q.hashCode(this.bits),s}toString(s="X ",o="  ",c=`
`){return this.buildToString(s,o,c)}buildToString(s,o,c){let d=new le;for(let g=0,p=this.height;g<p;g++){for(let w=0,S=this.width;w<S;w++)d.append(this.get(w,g)?s:o);d.append(c)}return d.toString()}clone(){return new ke(this.width,this.height,this.rowSize,this.bits.slice())}}class ie extends x{static getNotFoundInstance(){return new ie}}ie.kind="NotFoundException";class se extends M{constructor(s){super(s),this.luminances=se.EMPTY,this.buckets=new Int32Array(se.LUMINANCE_BUCKETS)}getBlackRow(s,o){const c=this.getLuminanceSource(),d=c.getWidth();o==null||o.getSize()<d?o=new V(d):o.clear(),this.initArrays(d);const g=c.getRow(s,this.luminances),p=this.buckets;for(let S=0;S<d;S++)p[(g[S]&255)>>se.LUMINANCE_SHIFT]++;const w=se.estimateBlackPoint(p);if(d<3)for(let S=0;S<d;S++)(g[S]&255)<w&&o.set(S);else{let S=g[0]&255,_=g[1]&255;for(let O=1;O<d-1;O++){const k=g[O+1]&255;(_*4-S-k)/2<w&&o.set(O),S=_,_=k}}return o}getBlackMatrix(){const s=this.getLuminanceSource(),o=s.getWidth(),c=s.getHeight(),d=new ke(o,c);this.initArrays(o);const g=this.buckets;for(let S=1;S<5;S++){const _=Math.floor(c*S/5),O=s.getRow(_,this.luminances),k=Math.floor(o*4/5);for(let P=Math.floor(o/5);P<k;P++){const G=O[P]&255;g[G>>se.LUMINANCE_SHIFT]++}}const p=se.estimateBlackPoint(g),w=s.getMatrix();for(let S=0;S<c;S++){const _=S*o;for(let O=0;O<o;O++)(w[_+O]&255)<p&&d.set(O,S)}return d}createBinarizer(s){return new se(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const o=this.buckets;for(let c=0;c<se.LUMINANCE_BUCKETS;c++)o[c]=0}static estimateBlackPoint(s){const o=s.length;let c=0,d=0,g=0;for(let O=0;O<o;O++)s[O]>g&&(d=O,g=s[O]),s[O]>c&&(c=s[O]);let p=0,w=0;for(let O=0;O<o;O++){const k=O-d,P=s[O]*k*k;P>w&&(p=O,w=P)}if(d>p){const O=d;d=p,p=O}if(p-d<=o/16)throw new ie;let S=p-1,_=-1;for(let O=p-1;O>d;O--){const k=O-d,P=k*k*(p-O)*(c-s[O]);P>_&&(S=O,_=P)}return S<<se.LUMINANCE_SHIFT}}se.LUMINANCE_BITS=5,se.LUMINANCE_SHIFT=8-se.LUMINANCE_BITS,se.LUMINANCE_BUCKETS=1<<se.LUMINANCE_BITS,se.EMPTY=Uint8ClampedArray.from([0]);class fe extends se{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),o=s.getWidth(),c=s.getHeight();if(o>=fe.MINIMUM_DIMENSION&&c>=fe.MINIMUM_DIMENSION){const d=s.getMatrix();let g=o>>fe.BLOCK_SIZE_POWER;(o&fe.BLOCK_SIZE_MASK)!==0&&g++;let p=c>>fe.BLOCK_SIZE_POWER;(c&fe.BLOCK_SIZE_MASK)!==0&&p++;const w=fe.calculateBlackPoints(d,g,p,o,c),S=new ke(o,c);fe.calculateThresholdForBlock(d,g,p,o,c,w,S),this.matrix=S}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new fe(s)}static calculateThresholdForBlock(s,o,c,d,g,p,w){const S=g-fe.BLOCK_SIZE,_=d-fe.BLOCK_SIZE;for(let O=0;O<c;O++){let k=O<<fe.BLOCK_SIZE_POWER;k>S&&(k=S);const P=fe.cap(O,2,c-3);for(let G=0;G<o;G++){let Q=G<<fe.BLOCK_SIZE_POWER;Q>_&&(Q=_);const te=fe.cap(G,2,o-3);let ue=0;for(let Re=-2;Re<=2;Re++){const De=p[P+Re];ue+=De[te-2]+De[te-1]+De[te]+De[te+1]+De[te+2]}const pe=ue/25;fe.thresholdBlock(s,Q,k,pe,d,w)}}}static cap(s,o,c){return s<o?o:s>c?c:s}static thresholdBlock(s,o,c,d,g,p){for(let w=0,S=c*g+o;w<fe.BLOCK_SIZE;w++,S+=g)for(let _=0;_<fe.BLOCK_SIZE;_++)(s[S+_]&255)<=d&&p.set(o+_,c+w)}static calculateBlackPoints(s,o,c,d,g){const p=g-fe.BLOCK_SIZE,w=d-fe.BLOCK_SIZE,S=new Array(c);for(let _=0;_<c;_++){S[_]=new Int32Array(o);let O=_<<fe.BLOCK_SIZE_POWER;O>p&&(O=p);for(let k=0;k<o;k++){let P=k<<fe.BLOCK_SIZE_POWER;P>w&&(P=w);let G=0,Q=255,te=0;for(let pe=0,Re=O*d+P;pe<fe.BLOCK_SIZE;pe++,Re+=d){for(let De=0;De<fe.BLOCK_SIZE;De++){const Ne=s[Re+De]&255;G+=Ne,Ne<Q&&(Q=Ne),Ne>te&&(te=Ne)}if(te-Q>fe.MIN_DYNAMIC_RANGE)for(pe++,Re+=d;pe<fe.BLOCK_SIZE;pe++,Re+=d)for(let De=0;De<fe.BLOCK_SIZE;De++)G+=s[Re+De]&255}let ue=G>>fe.BLOCK_SIZE_POWER*2;if(te-Q<=fe.MIN_DYNAMIC_RANGE&&(ue=Q/2,_>0&&k>0)){const pe=(S[_-1][k]+2*S[_][k-1]+S[_-1][k-1])/4;Q<pe&&(ue=pe)}S[_][k]=ue}}return S}}fe.BLOCK_SIZE_POWER=3,fe.BLOCK_SIZE=1<<fe.BLOCK_SIZE_POWER,fe.BLOCK_SIZE_MASK=fe.BLOCK_SIZE-1,fe.MINIMUM_DIMENSION=fe.BLOCK_SIZE*5,fe.MIN_DYNAMIC_RANGE=24;class Ie{constructor(s,o){this.width=s,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,o,c,d){throw new be("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new be("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new be("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let o=new le;for(let c=0;c<this.height;c++){const d=this.getRow(c,s);for(let g=0;g<this.width;g++){const p=d[g]&255;let w;p<64?w="#":p<128?w="+":p<192?w=".":w=" ",o.append(w)}o.append(`
`)}return o.toString()}}class Ue extends Ie{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,o){const c=this.delegate.getRow(s,o),d=this.getWidth();for(let g=0;g<d;g++)c[g]=255-(c[g]&255);return c}getMatrix(){const s=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(o);for(let d=0;d<o;d++)c[d]=255-(s[d]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(s,o,c,d){return new Ue(this.delegate.crop(s,o,c,d))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ue(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ue(this.delegate.rotateCounterClockwise45())}}class W extends Ie{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=W.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const o=s.getContext("2d").getImageData(0,0,s.width,s.height);return W.toGrayscaleBuffer(o.data,s.width,s.height)}static toGrayscaleBuffer(s,o,c){const d=new Uint8ClampedArray(o*c);for(let g=0,p=0,w=s.length;g<w;g+=4,p++){let S;if(s[g+3]===0)S=255;else{const O=s[g],k=s[g+1],P=s[g+2];S=306*O+601*k+117*P+512>>10}d[p]=S}return d}getRow(s,o){if(s<0||s>=this.getHeight())throw new A("Requested row is outside the image: "+s);const c=this.getWidth(),d=s*c;return o===null?o=this.buffer.slice(d,d+c):(o.length<c&&(o=new Uint8ClampedArray(c)),o.set(this.buffer.slice(d,d+c))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,o,c,d){return super.crop(s,o,c,d),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const o=this.getTempCanvasElement(),c=o.getContext("2d"),d=s*W.DEGREE_TO_RADIANS,g=this.canvas.width,p=this.canvas.height,w=Math.ceil(Math.abs(Math.cos(d))*g+Math.abs(Math.sin(d))*p),S=Math.ceil(Math.abs(Math.sin(d))*g+Math.abs(Math.cos(d))*p);return o.width=w,o.height=S,c.translate(w/2,S/2),c.rotate(d),c.drawImage(this.canvas,g/-2,p/-2),this.buffer=W.makeBufferFromCanvasImageData(o),this}invert(){return new Ue(this)}}W.DEGREE_TO_RADIANS=Math.PI/180;class Z{constructor(s,o,c){this.deviceId=s,this.label=o,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ce=(globalThis||Gd||self||window||void 0)&&(globalThis||Gd||self||window||void 0).__awaiter||function(L,s,o,c){function d(g){return g instanceof o?g:new o(function(p){p(g)})}return new(o||(o=Promise))(function(g,p){function w(O){try{_(c.next(O))}catch(k){p(k)}}function S(O){try{_(c.throw(O))}catch(k){p(k)}}function _(O){O.done?g(O.value):d(O.value).then(w,S)}_((c=c.apply(L,s||[])).next())})};class oe{constructor(s,o=500,c){this.reader=s,this.timeBetweenScansMillis=o,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return ce(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const c of s){const d=c.kind==="video"?"videoinput":c.kind;if(d!=="videoinput")continue;const g=c.deviceId||c.id,p=c.label||`Video device ${o.length+1}`,w=c.groupId,S={deviceId:g,label:p,kind:d,groupId:w};o.push(S)}return o})}getVideoInputDevices(){return ce(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new Z(o.deviceId,o.label))})}findDeviceById(s){return ce(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(c=>c.deviceId===s):null})}decodeFromInputVideoDevice(s,o){return ce(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,o)})}decodeOnceFromVideoDevice(s,o){return ce(this,void 0,void 0,function*(){this.reset();let c;s?c={deviceId:{exact:s}}:c={facingMode:"environment"};const d={video:c};return yield this.decodeOnceFromConstraints(d,o)})}decodeOnceFromConstraints(s,o){return ce(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(c,o)})}decodeOnceFromStream(s,o){return ce(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(s,o);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(s,o,c){return ce(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,o,c)})}decodeFromVideoDevice(s,o,c){return ce(this,void 0,void 0,function*(){let d;s?d={deviceId:{exact:s}}:d={facingMode:"environment"};const g={video:d};return yield this.decodeFromConstraints(g,o,c)})}decodeFromConstraints(s,o,c){return ce(this,void 0,void 0,function*(){const d=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(d,o,c)})}decodeFromStream(s,o,c){return ce(this,void 0,void 0,function*(){this.reset();const d=yield this.attachStreamToVideo(s,o);return yield this.decodeContinuously(d,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,o){return ce(this,void 0,void 0,function*(){const c=this.prepareVideoElement(o);return this.addVideoSource(c,s),this.videoElement=c,this.stream=s,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(s){return new Promise((o,c)=>this.playVideoOnLoad(s,()=>o()))}playVideoOnLoad(s,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",o),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return ce(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,o){const c=document.getElementById(s);if(!c)throw new E(`element with id '${s}' not found`);if(c.nodeName.toLowerCase()!==o.toLowerCase())throw new E(`element with id '${s}' must be an ${o} element`);return c}decodeFromImage(s,o){if(!s&&!o)throw new E("either imageElement with a src set or an url must be provided");return o&&!s?this.decodeFromImageUrl(o):this.decodeFromImageElement(s)}decodeFromVideo(s,o){if(!s&&!o)throw new E("Either an element with a src set or an URL must be provided");return o&&!s?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,o,c){if(s===void 0&&o===void 0)throw new E("Either an element with a src set or an URL must be provided");return o&&!s?this.decodeFromVideoUrlContinuously(o,c):this.decodeFromVideoElementContinuously(s,c)}decodeFromImageElement(s){if(!s)throw new E("An image element must be provided.");this.reset();const o=this.prepareImageElement(s);this.imageElement=o;let c;return this.isImageLoaded(o)?c=this.decodeOnce(o,!1,!0):c=this._decodeOnLoadImage(o),c}decodeFromVideoElement(s){const o=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(s,o){const c=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(c,o)}_decodeFromVideoElementSetup(s){if(!s)throw new E("A video element must be provided.");this.reset();const o=this.prepareVideoElement(s);return this.videoElement=o,o}decodeFromImageUrl(s){if(!s)throw new E("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const c=this._decodeOnLoadImage(o);return o.src=s,c}decodeFromVideoUrl(s){if(!s)throw new E("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),c=this.decodeFromVideoElement(o);return o.src=s,c}decodeFromVideoUrlContinuously(s,o){if(!s)throw new E("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),d=this.decodeFromVideoElementContinuously(c,o);return c.src=s,d}_decodeOnLoadImage(s){return new Promise((o,c)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(o,c),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return ce(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,o){return ce(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,o)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let o;return typeof s>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof s=="string"&&(o=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(o=s),o}prepareVideoElement(s){let o;return!s&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof s=="string"&&(o=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(o=s),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(s,o=!0,c=!0){this._stopAsyncDecode=!1;const d=(g,p)=>{if(this._stopAsyncDecode){p(new ie("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const w=this.decode(s);g(w)}catch(w){const S=o&&w instanceof ie,O=(w instanceof I||w instanceof X)&&c;if(S||O)return setTimeout(d,this._timeBetweenDecodingAttempts,g,p);p(w)}};return new Promise((g,p)=>d(g,p))}decodeContinuously(s,o){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const d=this.decode(s);o(d,null),setTimeout(c,this.timeBetweenScansMillis)}catch(d){o(null,d);const g=d instanceof I||d instanceof X,p=d instanceof ie;(g||p)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(s){const o=this.createBinaryBitmap(s);return this.decodeBitmap(o)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,o,c){o||(o={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(s,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(s,o,c=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(s,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const o=this.getCaptureCanvas(s),c=new W(o),d=new fe(c);return new N(d)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const o=this.createCaptureCanvas(s);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let c,d;return typeof s<"u"&&(s instanceof HTMLVideoElement?(c=s.videoWidth,d=s.videoHeight):s instanceof HTMLImageElement&&(c=s.naturalWidth||s.width,d=s.naturalHeight||s.height)),o.style.width=c+"px",o.style.height=d+"px",o.width=c,o.height=d,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,o){try{s.srcObject=o}catch{s.src=URL.createObjectURL(o)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Oe{constructor(s,o,c=o==null?0:8*o.length,d,g,p=j.currentTimeMillis()){this.text=s,this.rawBytes=o,this.numBits=c,this.resultPoints=d,this.format=g,this.timestamp=p,this.text=s,this.rawBytes=o,c==null?this.numBits=o==null?0:8*o.length:this.numBits=c,this.resultPoints=d,this.format=g,this.resultMetadata=null,p==null?this.timestamp=j.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,o)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const o=this.resultPoints;if(o===null)this.resultPoints=s;else if(s!==null&&s.length>0){const c=new Array(o.length+s.length);j.arraycopy(o,0,c,0,o.length),j.arraycopy(s,0,c,o.length,s.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var qe;(function(L){L[L.AZTEC=0]="AZTEC",L[L.CODABAR=1]="CODABAR",L[L.CODE_39=2]="CODE_39",L[L.CODE_93=3]="CODE_93",L[L.CODE_128=4]="CODE_128",L[L.DATA_MATRIX=5]="DATA_MATRIX",L[L.EAN_8=6]="EAN_8",L[L.EAN_13=7]="EAN_13",L[L.ITF=8]="ITF",L[L.MAXICODE=9]="MAXICODE",L[L.PDF_417=10]="PDF_417",L[L.QR_CODE=11]="QR_CODE",L[L.RSS_14=12]="RSS_14",L[L.RSS_EXPANDED=13]="RSS_EXPANDED",L[L.UPC_A=14]="UPC_A",L[L.UPC_E=15]="UPC_E",L[L.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(qe||(qe={}));var we=qe,ht;(function(L){L[L.OTHER=0]="OTHER",L[L.ORIENTATION=1]="ORIENTATION",L[L.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",L[L.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",L[L.ISSUE_NUMBER=4]="ISSUE_NUMBER",L[L.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",L[L.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",L[L.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",L[L.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",L[L.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",L[L.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ht||(ht={}));var Ge=ht;class It{constructor(s,o,c,d,g=-1,p=-1){this.rawBytes=s,this.text=o,this.byteSegments=c,this.ecLevel=d,this.structuredAppendSequenceNumber=g,this.structuredAppendParity=p,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class bn{exp(s){return this.expTable[s]}log(s){if(s===0)throw new A;return this.logTable[s]}static addOrSubtract(s,o){return s^o}}class _e{constructor(s,o){if(o.length===0)throw new A;this.field=s;const c=o.length;if(c>1&&o[0]===0){let d=1;for(;d<c&&o[d]===0;)d++;d===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-d),j.arraycopy(o,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const o=this.coefficients;let c;if(s===1){c=0;for(let p=0,w=o.length;p!==w;p++){const S=o[p];c=bn.addOrSubtract(c,S)}return c}c=o[0];const d=o.length,g=this.field;for(let p=1;p<d;p++)c=bn.addOrSubtract(g.multiply(s,c),o[p]);return c}addOrSubtract(s){if(!this.field.equals(s.field))throw new A("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let o=this.coefficients,c=s.coefficients;if(o.length>c.length){const p=o;o=c,c=p}let d=new Int32Array(c.length);const g=c.length-o.length;j.arraycopy(c,0,d,0,g);for(let p=g;p<c.length;p++)d[p]=bn.addOrSubtract(o[p-g],c[p]);return new _e(this.field,d)}multiply(s){if(!this.field.equals(s.field))throw new A("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const o=this.coefficients,c=o.length,d=s.coefficients,g=d.length,p=new Int32Array(c+g-1),w=this.field;for(let S=0;S<c;S++){const _=o[S];for(let O=0;O<g;O++)p[S+O]=bn.addOrSubtract(p[S+O],w.multiply(_,d[O]))}return new _e(w,p)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const o=this.coefficients.length,c=this.field,d=new Int32Array(o),g=this.coefficients;for(let p=0;p<o;p++)d[p]=c.multiply(g[p],s);return new _e(c,d)}multiplyByMonomial(s,o){if(s<0)throw new A;if(o===0)return this.field.getZero();const c=this.coefficients,d=c.length,g=new Int32Array(d+s),p=this.field;for(let w=0;w<d;w++)g[w]=p.multiply(c[w],o);return new _e(p,g)}divide(s){if(!this.field.equals(s.field))throw new A("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new A("Divide by 0");const o=this.field;let c=o.getZero(),d=this;const g=s.getCoefficient(s.getDegree()),p=o.inverse(g);for(;d.getDegree()>=s.getDegree()&&!d.isZero();){const w=d.getDegree()-s.getDegree(),S=o.multiply(d.getCoefficient(d.getDegree()),p),_=s.multiplyByMonomial(w,S),O=o.buildMonomial(w,S);c=c.addOrSubtract(O),d=d.addOrSubtract(_)}return[c,d]}toString(){let s="";for(let o=this.getDegree();o>=0;o--){let c=this.getCoefficient(o);if(c!==0){if(c<0?(s+=" - ",c=-c):s.length>0&&(s+=" + "),o===0||c!==1){const d=this.field.log(c);d===0?s+="1":d===1?s+="a":(s+="a^",s+=d)}o!==0&&(o===1?s+="x":(s+="x^",s+=o))}}return s}}class Be extends x{}Be.kind="ArithmeticException";class je extends bn{constructor(s,o,c){super(),this.primitive=s,this.size=o,this.generatorBase=c;const d=new Int32Array(o);let g=1;for(let w=0;w<o;w++)d[w]=g,g*=2,g>=o&&(g^=s,g&=o-1);this.expTable=d;const p=new Int32Array(o);for(let w=0;w<o-1;w++)p[d[w]]=w;this.logTable=p,this.zero=new _e(this,Int32Array.from([0])),this.one=new _e(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,o){if(s<0)throw new A;if(o===0)return this.zero;const c=new Int32Array(s+1);return c[0]=o,new _e(this,c)}inverse(s){if(s===0)throw new Be;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,o){return s===0||o===0?0:this.expTable[(this.logTable[s]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+B.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}je.AZTEC_DATA_12=new je(4201,4096,1),je.AZTEC_DATA_10=new je(1033,1024,1),je.AZTEC_DATA_6=new je(67,64,1),je.AZTEC_PARAM=new je(19,16,1),je.QR_CODE_FIELD_256=new je(285,256,0),je.DATA_MATRIX_FIELD_256=new je(301,256,1),je.AZTEC_DATA_8=je.DATA_MATRIX_FIELD_256,je.MAXICODE_FIELD_64=je.AZTEC_DATA_6;class tt extends x{}tt.kind="ReedSolomonException";class Ke extends x{}Ke.kind="IllegalStateException";class pt{constructor(s){this.field=s}decode(s,o){const c=this.field,d=new _e(c,s),g=new Int32Array(o);let p=!0;for(let G=0;G<o;G++){const Q=d.evaluateAt(c.exp(G+c.getGeneratorBase()));g[g.length-1-G]=Q,Q!==0&&(p=!1)}if(p)return;const w=new _e(c,g),S=this.runEuclideanAlgorithm(c.buildMonomial(o,1),w,o),_=S[0],O=S[1],k=this.findErrorLocations(_),P=this.findErrorMagnitudes(O,k);for(let G=0;G<k.length;G++){const Q=s.length-1-c.log(k[G]);if(Q<0)throw new tt("Bad error location");s[Q]=je.addOrSubtract(s[Q],P[G])}}runEuclideanAlgorithm(s,o,c){if(s.getDegree()<o.getDegree()){const G=s;s=o,o=G}const d=this.field;let g=s,p=o,w=d.getZero(),S=d.getOne();for(;p.getDegree()>=(c/2|0);){let G=g,Q=w;if(g=p,w=S,g.isZero())throw new tt("r_{i-1} was zero");p=G;let te=d.getZero();const ue=g.getCoefficient(g.getDegree()),pe=d.inverse(ue);for(;p.getDegree()>=g.getDegree()&&!p.isZero();){const Re=p.getDegree()-g.getDegree(),De=d.multiply(p.getCoefficient(p.getDegree()),pe);te=te.addOrSubtract(d.buildMonomial(Re,De)),p=p.addOrSubtract(g.multiplyByMonomial(Re,De))}if(S=te.multiply(w).addOrSubtract(Q),p.getDegree()>=g.getDegree())throw new Ke("Division algorithm failed to reduce polynomial?")}const _=S.getCoefficient(0);if(_===0)throw new tt("sigmaTilde(0) was zero");const O=d.inverse(_),k=S.multiplyScalar(O),P=p.multiplyScalar(O);return[k,P]}findErrorLocations(s){const o=s.getDegree();if(o===1)return Int32Array.from([s.getCoefficient(1)]);const c=new Int32Array(o);let d=0;const g=this.field;for(let p=1;p<g.getSize()&&d<o;p++)s.evaluateAt(p)===0&&(c[d]=g.inverse(p),d++);if(d!==o)throw new tt("Error locator degree does not match number of roots");return c}findErrorMagnitudes(s,o){const c=o.length,d=new Int32Array(c),g=this.field;for(let p=0;p<c;p++){const w=g.inverse(o[p]);let S=1;for(let _=0;_<c;_++)if(p!==_){const O=g.multiply(o[_],w),k=(O&1)===0?O|1:O&-2;S=g.multiply(S,k)}d[p]=g.multiply(s.evaluateAt(w),g.inverse(S)),g.getGeneratorBase()!==0&&(d[p]=g.multiply(d[p],w))}return d}}var lt;(function(L){L[L.UPPER=0]="UPPER",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.DIGIT=3]="DIGIT",L[L.PUNCT=4]="PUNCT",L[L.BINARY=5]="BINARY"})(lt||(lt={}));class xt{decode(s){this.ddata=s;let o=s.getBits(),c=this.extractBits(o),d=this.correctBits(c),g=xt.convertBoolArrayToByteArray(d),p=xt.getEncodedData(d),w=new It(g,p,null,null);return w.setNumBits(d.length),w}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let o=s.length,c=lt.UPPER,d=lt.UPPER,g="",p=0;for(;p<o;)if(d===lt.BINARY){if(o-p<5)break;let w=xt.readCode(s,p,5);if(p+=5,w===0){if(o-p<11)break;w=xt.readCode(s,p,11)+31,p+=11}for(let S=0;S<w;S++){if(o-p<8){p=o;break}const _=xt.readCode(s,p,8);g+=ve.castAsNonUtf8Char(_),p+=8}d=c}else{let w=d===lt.DIGIT?4:5;if(o-p<w)break;let S=xt.readCode(s,p,w);p+=w;let _=xt.getCharacter(d,S);_.startsWith("CTRL_")?(c=d,d=xt.getTable(_.charAt(5)),_.charAt(6)==="L"&&(c=d)):(g+=_,d=c)}return g}static getTable(s){switch(s){case"L":return lt.LOWER;case"P":return lt.PUNCT;case"M":return lt.MIXED;case"D":return lt.DIGIT;case"B":return lt.BINARY;case"U":default:return lt.UPPER}}static getCharacter(s,o){switch(s){case lt.UPPER:return xt.UPPER_TABLE[o];case lt.LOWER:return xt.LOWER_TABLE[o];case lt.MIXED:return xt.MIXED_TABLE[o];case lt.PUNCT:return xt.PUNCT_TABLE[o];case lt.DIGIT:return xt.DIGIT_TABLE[o];default:throw new Ke("Bad table")}}correctBits(s){let o,c;this.ddata.getNbLayers()<=2?(c=6,o=je.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,o=je.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,o=je.AZTEC_DATA_10):(c=12,o=je.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),g=s.length/c;if(g<d)throw new X;let p=s.length%c,w=new Int32Array(g);for(let P=0;P<g;P++,p+=c)w[P]=xt.readCode(s,p,c);try{new pt(o).decode(w,g-d)}catch(P){throw new X(P)}let S=(1<<c)-1,_=0;for(let P=0;P<d;P++){let G=w[P];if(G===0||G===S)throw new X;(G===1||G===S-1)&&_++}let O=new Array(d*c-_),k=0;for(let P=0;P<d;P++){let G=w[P];if(G===1||G===S-1)O.fill(G>1,k,k+c-1),k+=c-1;else for(let Q=c-1;Q>=0;--Q)O[k++]=(G&1<<Q)!==0}return O}extractBits(s){let o=this.ddata.isCompact(),c=this.ddata.getNbLayers(),d=(o?11:14)+c*4,g=new Int32Array(d),p=new Array(this.totalBitsInLayer(c,o));if(o)for(let w=0;w<g.length;w++)g[w]=w;else{let w=d+1+2*B.truncDivision(B.truncDivision(d,2)-1,15),S=d/2,_=B.truncDivision(w,2);for(let O=0;O<S;O++){let k=O+B.truncDivision(O,15);g[S-O-1]=_-k-1,g[S+O]=_+k+1}}for(let w=0,S=0;w<c;w++){let _=(c-w)*4+(o?9:12),O=w*2,k=d-1-O;for(let P=0;P<_;P++){let G=P*2;for(let Q=0;Q<2;Q++)p[S+G+Q]=s.get(g[O+Q],g[O+P]),p[S+2*_+G+Q]=s.get(g[O+P],g[k-Q]),p[S+4*_+G+Q]=s.get(g[k-Q],g[k-P]),p[S+6*_+G+Q]=s.get(g[k-P],g[O+Q])}S+=_*8}return p}static readCode(s,o,c){let d=0;for(let g=o;g<o+c;g++)d<<=1,s[g]&&(d|=1);return d}static readByte(s,o){let c=s.length-o;return c>=8?xt.readCode(s,o,8):xt.readCode(s,o,c)<<8-c}static convertBoolArrayToByteArray(s){let o=new Uint8Array((s.length+7)/8);for(let c=0;c<o.length;c++)o[c]=xt.readByte(s,8*c);return o}totalBitsInLayer(s,o){return((o?88:112)+16*s)*s}}xt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],xt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],xt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],xt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],xt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class gt{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,o,c,d){const g=s-c,p=o-d;return Math.sqrt(g*g+p*p)}static sum(s){let o=0;for(let c=0,d=s.length;c!==d;c++){const g=s[c];o+=g}return o}}class cs{static floatToIntBits(s){return s}}cs.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ze{constructor(s,o){this.x=s,this.y=o}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof ze){const o=s;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*cs.floatToIntBits(this.x)+cs.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const o=this.distance(s[0],s[1]),c=this.distance(s[1],s[2]),d=this.distance(s[0],s[2]);let g,p,w;if(c>=o&&c>=d?(p=s[0],g=s[1],w=s[2]):d>=c&&d>=o?(p=s[1],g=s[0],w=s[2]):(p=s[2],g=s[0],w=s[1]),this.crossProductZ(g,p,w)<0){const S=g;g=w,w=S}s[0]=g,s[1]=p,s[2]=w}static distance(s,o){return gt.distance(s.x,s.y,o.x,o.y)}static crossProductZ(s,o,c){const d=o.x,g=o.y;return(c.x-d)*(s.y-g)-(c.y-g)*(s.x-d)}}class wr{constructor(s,o){this.bits=s,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class ia extends wr{constructor(s,o,c,d,g){super(s,o),this.compact=c,this.nbDatablocks=d,this.nbLayers=g}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Li{constructor(s,o,c,d){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),o==null&&(o=Li.INIT_SIZE),c==null&&(c=s.getWidth()/2|0),d==null&&(d=s.getHeight()/2|0);const g=o/2|0;if(this.leftInit=c-g,this.rightInit=c+g,this.upInit=d-g,this.downInit=d+g,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ie}detect(){let s=this.leftInit,o=this.rightInit,c=this.upInit,d=this.downInit,g=!1,p=!0,w=!1,S=!1,_=!1,O=!1,k=!1;const P=this.width,G=this.height;for(;p;){p=!1;let Q=!0;for(;(Q||!S)&&o<P;)Q=this.containsBlackPoint(c,d,o,!1),Q?(o++,p=!0,S=!0):S||o++;if(o>=P){g=!0;break}let te=!0;for(;(te||!_)&&d<G;)te=this.containsBlackPoint(s,o,d,!0),te?(d++,p=!0,_=!0):_||d++;if(d>=G){g=!0;break}let ue=!0;for(;(ue||!O)&&s>=0;)ue=this.containsBlackPoint(c,d,s,!1),ue?(s--,p=!0,O=!0):O||s--;if(s<0){g=!0;break}let pe=!0;for(;(pe||!k)&&c>=0;)pe=this.containsBlackPoint(s,o,c,!0),pe?(c--,p=!0,k=!0):k||c--;if(c<0){g=!0;break}p&&(w=!0)}if(!g&&w){const Q=o-s;let te=null;for(let De=1;te===null&&De<Q;De++)te=this.getBlackPointOnSegment(s,d-De,s+De,d);if(te==null)throw new ie;let ue=null;for(let De=1;ue===null&&De<Q;De++)ue=this.getBlackPointOnSegment(s,c+De,s+De,c);if(ue==null)throw new ie;let pe=null;for(let De=1;pe===null&&De<Q;De++)pe=this.getBlackPointOnSegment(o,c+De,o-De,c);if(pe==null)throw new ie;let Re=null;for(let De=1;Re===null&&De<Q;De++)Re=this.getBlackPointOnSegment(o,d-De,o-De,d);if(Re==null)throw new ie;return this.centerEdges(Re,te,pe,ue)}else throw new ie}getBlackPointOnSegment(s,o,c,d){const g=gt.round(gt.distance(s,o,c,d)),p=(c-s)/g,w=(d-o)/g,S=this.image;for(let _=0;_<g;_++){const O=gt.round(s+_*p),k=gt.round(o+_*w);if(S.get(O,k))return new ze(O,k)}return null}centerEdges(s,o,c,d){const g=s.getX(),p=s.getY(),w=o.getX(),S=o.getY(),_=c.getX(),O=c.getY(),k=d.getX(),P=d.getY(),G=Li.CORR;return g<this.width/2?[new ze(k-G,P+G),new ze(w+G,S+G),new ze(_-G,O-G),new ze(g+G,p-G)]:[new ze(k+G,P+G),new ze(w+G,S-G),new ze(_-G,O+G),new ze(g-G,p-G)]}containsBlackPoint(s,o,c,d){const g=this.image;if(d){for(let p=s;p<=o;p++)if(g.get(p,c))return!0}else for(let p=s;p<=o;p++)if(g.get(c,p))return!0;return!1}}Li.INIT_SIZE=10,Li.CORR=1;class sa{static checkAndNudgePoints(s,o){const c=s.getWidth(),d=s.getHeight();let g=!0;for(let p=0;p<o.length&&g;p+=2){const w=Math.floor(o[p]),S=Math.floor(o[p+1]);if(w<-1||w>c||S<-1||S>d)throw new ie;g=!1,w===-1?(o[p]=0,g=!0):w===c&&(o[p]=c-1,g=!0),S===-1?(o[p+1]=0,g=!0):S===d&&(o[p+1]=d-1,g=!0)}g=!0;for(let p=o.length-2;p>=0&&g;p-=2){const w=Math.floor(o[p]),S=Math.floor(o[p+1]);if(w<-1||w>c||S<-1||S>d)throw new ie;g=!1,w===-1?(o[p]=0,g=!0):w===c&&(o[p]=c-1,g=!0),S===-1?(o[p+1]=0,g=!0):S===d&&(o[p+1]=d-1,g=!0)}}}class kn{constructor(s,o,c,d,g,p,w,S,_){this.a11=s,this.a21=o,this.a31=c,this.a12=d,this.a22=g,this.a32=p,this.a13=w,this.a23=S,this.a33=_}static quadrilateralToQuadrilateral(s,o,c,d,g,p,w,S,_,O,k,P,G,Q,te,ue){const pe=kn.quadrilateralToSquare(s,o,c,d,g,p,w,S);return kn.squareToQuadrilateral(_,O,k,P,G,Q,te,ue).times(pe)}transformPoints(s){const o=s.length,c=this.a11,d=this.a12,g=this.a13,p=this.a21,w=this.a22,S=this.a23,_=this.a31,O=this.a32,k=this.a33;for(let P=0;P<o;P+=2){const G=s[P],Q=s[P+1],te=g*G+S*Q+k;s[P]=(c*G+p*Q+_)/te,s[P+1]=(d*G+w*Q+O)/te}}transformPointsWithValues(s,o){const c=this.a11,d=this.a12,g=this.a13,p=this.a21,w=this.a22,S=this.a23,_=this.a31,O=this.a32,k=this.a33,P=s.length;for(let G=0;G<P;G++){const Q=s[G],te=o[G],ue=g*Q+S*te+k;s[G]=(c*Q+p*te+_)/ue,o[G]=(d*Q+w*te+O)/ue}}static squareToQuadrilateral(s,o,c,d,g,p,w,S){const _=s-c+g-w,O=o-d+p-S;if(_===0&&O===0)return new kn(c-s,g-c,s,d-o,p-d,o,0,0,1);{const k=c-g,P=w-g,G=d-p,Q=S-p,te=k*Q-P*G,ue=(_*Q-P*O)/te,pe=(k*O-_*G)/te;return new kn(c-s+ue*c,w-s+pe*w,s,d-o+ue*d,S-o+pe*S,o,ue,pe,1)}}static quadrilateralToSquare(s,o,c,d,g,p,w,S){return kn.squareToQuadrilateral(s,o,c,d,g,p,w,S).buildAdjoint()}buildAdjoint(){return new kn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new kn(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class Le extends sa{sampleGrid(s,o,c,d,g,p,w,S,_,O,k,P,G,Q,te,ue,pe,Re,De){const Ne=kn.quadrilateralToQuadrilateral(d,g,p,w,S,_,O,k,P,G,Q,te,ue,pe,Re,De);return this.sampleGridWithTransform(s,o,c,Ne)}sampleGridWithTransform(s,o,c,d){if(o<=0||c<=0)throw new ie;const g=new ke(o,c),p=new Float32Array(2*o);for(let w=0;w<c;w++){const S=p.length,_=w+.5;for(let O=0;O<S;O+=2)p[O]=O/2+.5,p[O+1]=_;d.transformPoints(p),sa.checkAndNudgePoints(s,p);try{for(let O=0;O<S;O+=2)s.get(Math.floor(p[O]),Math.floor(p[O+1]))&&g.set(O/2,w)}catch{throw new ie}}return g}}class nt{static setGridSampler(s){nt.gridSampler=s}static getInstance(){return nt.gridSampler}}nt.gridSampler=new Le;class Ze{constructor(s,o){this.x=s,this.y=o}toResultPoint(){return new ze(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Pt{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let o=this.getMatrixCenter(),c=this.getBullsEyeCorners(o);if(s){let p=c[0];c[0]=c[2],c[2]=p}this.extractParameters(c);let d=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),g=this.getMatrixCornerPoints(c);return new ia(d,g,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new ie;let o=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(s[0],s[1],o),this.sampleLine(s[1],s[2],o),this.sampleLine(s[2],s[3],o),this.sampleLine(s[3],s[0],o)]);this.shift=this.getRotation(c,o);let d=0;for(let p=0;p<4;p++){let w=c[(this.shift+p)%4];this.compact?(d<<=7,d+=w>>1&127):(d<<=10,d+=(w>>2&992)+(w>>1&31))}let g=this.getCorrectedParameterData(d,this.compact);this.compact?(this.nbLayers=(g>>6)+1,this.nbDataBlocks=(g&63)+1):(this.nbLayers=(g>>11)+1,this.nbDataBlocks=(g&2047)+1)}getRotation(s,o){let c=0;s.forEach((d,g,p)=>{let w=(d>>o-2<<1)+(d&1);c=(c<<3)+w}),c=((c&1)<<11)+(c>>1);for(let d=0;d<4;d++)if(B.bitCount(c^this.EXPECTED_CORNER_BITS[d])<=2)return d;throw new ie}getCorrectedParameterData(s,o){let c,d;o?(c=7,d=2):(c=10,d=4);let g=c-d,p=new Int32Array(c);for(let S=c-1;S>=0;--S)p[S]=s&15,s>>=4;try{new pt(je.AZTEC_PARAM).decode(p,g)}catch{throw new ie}let w=0;for(let S=0;S<d;S++)w=(w<<4)+p[S];return w}getBullsEyeCorners(s){let o=s,c=s,d=s,g=s,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let k=this.getFirstDifferent(o,p,1,-1),P=this.getFirstDifferent(c,p,1,1),G=this.getFirstDifferent(d,p,-1,1),Q=this.getFirstDifferent(g,p,-1,-1);if(this.nbCenterLayers>2){let te=this.distancePoint(Q,k)*this.nbCenterLayers/(this.distancePoint(g,o)*(this.nbCenterLayers+2));if(te<.75||te>1.25||!this.isWhiteOrBlackRectangle(k,P,G,Q))break}o=k,c=P,d=G,g=Q,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ie;this.compact=this.nbCenterLayers===5;let w=new ze(o.getX()+.5,o.getY()-.5),S=new ze(c.getX()+.5,c.getY()+.5),_=new ze(d.getX()-.5,d.getY()+.5),O=new ze(g.getX()-.5,g.getY()-.5);return this.expandSquare([w,S,_,O],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,o,c,d;try{let w=new Li(this.image).detect();s=w[0],o=w[1],c=w[2],d=w[3]}catch{let S=this.image.getWidth()/2,_=this.image.getHeight()/2;s=this.getFirstDifferent(new Ze(S+7,_-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Ze(S+7,_+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Ze(S-7,_+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new Ze(S-7,_-7),!1,-1,-1).toResultPoint()}let g=gt.round((s.getX()+d.getX()+o.getX()+c.getX())/4),p=gt.round((s.getY()+d.getY()+o.getY()+c.getY())/4);try{let w=new Li(this.image,15,g,p).detect();s=w[0],o=w[1],c=w[2],d=w[3]}catch{s=this.getFirstDifferent(new Ze(g+7,p-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Ze(g+7,p+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Ze(g-7,p+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new Ze(g-7,p-7),!1,-1,-1).toResultPoint()}return g=gt.round((s.getX()+d.getX()+o.getX()+c.getX())/4),p=gt.round((s.getY()+d.getY()+o.getY()+c.getY())/4),new Ze(g,p)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,o,c,d,g){let p=nt.getInstance(),w=this.getDimension(),S=w/2-this.nbCenterLayers,_=w/2+this.nbCenterLayers;return p.sampleGrid(s,w,w,S,S,_,S,_,_,S,_,o.getX(),o.getY(),c.getX(),c.getY(),d.getX(),d.getY(),g.getX(),g.getY())}sampleLine(s,o,c){let d=0,g=this.distanceResultPoint(s,o),p=g/c,w=s.getX(),S=s.getY(),_=p*(o.getX()-s.getX())/g,O=p*(o.getY()-s.getY())/g;for(let k=0;k<c;k++)this.image.get(gt.round(w+k*_),gt.round(S+k*O))&&(d|=1<<c-k-1);return d}isWhiteOrBlackRectangle(s,o,c,d){let g=3;s=new Ze(s.getX()-g,s.getY()+g),o=new Ze(o.getX()-g,o.getY()-g),c=new Ze(c.getX()+g,c.getY()-g),d=new Ze(d.getX()+g,d.getY()+g);let p=this.getColor(d,s);if(p===0)return!1;let w=this.getColor(s,o);return w!==p||(w=this.getColor(o,c),w!==p)?!1:(w=this.getColor(c,d),w===p)}getColor(s,o){let c=this.distancePoint(s,o),d=(o.getX()-s.getX())/c,g=(o.getY()-s.getY())/c,p=0,w=s.getX(),S=s.getY(),_=this.image.get(s.getX(),s.getY()),O=Math.ceil(c);for(let P=0;P<O;P++)w+=d,S+=g,this.image.get(gt.round(w),gt.round(S))!==_&&p++;let k=p/c;return k>.1&&k<.9?0:k<=.1===_?1:-1}getFirstDifferent(s,o,c,d){let g=s.getX()+c,p=s.getY()+d;for(;this.isValid(g,p)&&this.image.get(g,p)===o;)g+=c,p+=d;for(g-=c,p-=d;this.isValid(g,p)&&this.image.get(g,p)===o;)g+=c;for(g-=c;this.isValid(g,p)&&this.image.get(g,p)===o;)p+=d;return p-=d,new Ze(g,p)}expandSquare(s,o,c){let d=c/(2*o),g=s[0].getX()-s[2].getX(),p=s[0].getY()-s[2].getY(),w=(s[0].getX()+s[2].getX())/2,S=(s[0].getY()+s[2].getY())/2,_=new ze(w+d*g,S+d*p),O=new ze(w-d*g,S-d*p);g=s[1].getX()-s[3].getX(),p=s[1].getY()-s[3].getY(),w=(s[1].getX()+s[3].getX())/2,S=(s[1].getY()+s[3].getY())/2;let k=new ze(w+d*g,S+d*p),P=new ze(w-d*g,S-d*p);return[_,k,O,P]}isValid(s,o){return s>=0&&s<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(s){let o=gt.round(s.getX()),c=gt.round(s.getY());return this.isValid(o,c)}distancePoint(s,o){return gt.distance(s.getX(),s.getY(),o.getX(),o.getY())}distanceResultPoint(s,o){return gt.distance(s.getX(),s.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(B.truncDivision(this.nbLayers-4,8)+1)+15}}class ln{decode(s,o=null){let c=null,d=new Pt(s.getBlackMatrix()),g=null,p=null;try{let O=d.detectMirror(!1);g=O.getPoints(),this.reportFoundResultPoints(o,g),p=new xt().decode(O)}catch(O){c=O}if(p==null)try{let O=d.detectMirror(!0);g=O.getPoints(),this.reportFoundResultPoints(o,g),p=new xt().decode(O)}catch(O){throw c??O}let w=new Oe(p.getText(),p.getRawBytes(),p.getNumBits(),g,we.AZTEC,j.currentTimeMillis()),S=p.getByteSegments();S!=null&&w.putMetadata(Ge.BYTE_SEGMENTS,S);let _=p.getECLevel();return _!=null&&w.putMetadata(Ge.ERROR_CORRECTION_LEVEL,_),w}reportFoundResultPoints(s,o){if(s!=null){let c=s.get(ee.NEED_RESULT_POINT_CALLBACK);c!=null&&o.forEach((d,g,p)=>{c.foundPossibleResultPoint(d)})}}reset(){}}class Ut extends oe{constructor(s=500){super(new ln,s)}}class vt{decode(s,o){try{return this.doDecode(s,o)}catch{if(o&&o.get(ee.TRY_HARDER)===!0&&s.isRotateSupported()){const g=s.rotateCounterClockwise(),p=this.doDecode(g,o),w=p.getResultMetadata();let S=270;w!==null&&w.get(Ge.ORIENTATION)===!0&&(S=S+w.get(Ge.ORIENTATION)%360),p.putMetadata(Ge.ORIENTATION,S);const _=p.getResultPoints();if(_!==null){const O=g.getHeight();for(let k=0;k<_.length;k++)_[k]=new ze(O-_[k].getY()-1,_[k].getX())}return p}else throw new ie}}reset(){}doDecode(s,o){const c=s.getWidth(),d=s.getHeight();let g=new V(c);const p=o&&o.get(ee.TRY_HARDER)===!0,w=Math.max(1,d>>(p?8:5));let S;p?S=d:S=15;const _=Math.trunc(d/2);for(let O=0;O<S;O++){const k=Math.trunc((O+1)/2),P=(O&1)===0,G=_+w*(P?k:-k);if(G<0||G>=d)break;try{g=s.getBlackRow(G,g)}catch{continue}for(let Q=0;Q<2;Q++){if(Q===1&&(g.reverse(),o&&o.get(ee.NEED_RESULT_POINT_CALLBACK)===!0)){const te=new Map;o.forEach((ue,pe)=>te.set(pe,ue)),te.delete(ee.NEED_RESULT_POINT_CALLBACK),o=te}try{const te=this.decodeRow(G,g,o);if(Q===1){te.putMetadata(Ge.ORIENTATION,180);const ue=te.getResultPoints();ue!==null&&(ue[0]=new ze(c-ue[0].getX()-1,ue[0].getY()),ue[1]=new ze(c-ue[1].getX()-1,ue[1].getY()))}return te}catch{}}}throw new ie}static recordPattern(s,o,c){const d=c.length;for(let _=0;_<d;_++)c[_]=0;const g=s.getSize();if(o>=g)throw new ie;let p=!s.get(o),w=0,S=o;for(;S<g;){if(s.get(S)!==p)c[w]++;else{if(++w===d)break;c[w]=1,p=!p}S++}if(!(w===d||w===d-1&&S===g))throw new ie}static recordPatternInReverse(s,o,c){let d=c.length,g=s.get(o);for(;o>0&&d>=0;)s.get(--o)!==g&&(d--,g=!g);if(d>=0)throw new ie;vt.recordPattern(s,o+1,c)}static patternMatchVariance(s,o,c){const d=s.length;let g=0,p=0;for(let _=0;_<d;_++)g+=s[_],p+=o[_];if(g<p)return Number.POSITIVE_INFINITY;const w=g/p;c*=w;let S=0;for(let _=0;_<d;_++){const O=s[_],k=o[_]*w,P=O>k?O-k:k-O;if(P>c)return Number.POSITIVE_INFINITY;S+=P}return S/g}}class Me extends vt{static findStartPattern(s){const o=s.getSize(),c=s.getNextSet(0);let d=0,g=Int32Array.from([0,0,0,0,0,0]),p=c,w=!1;const S=6;for(let _=c;_<o;_++)if(s.get(_)!==w)g[d]++;else{if(d===S-1){let O=Me.MAX_AVG_VARIANCE,k=-1;for(let P=Me.CODE_START_A;P<=Me.CODE_START_C;P++){const G=vt.patternMatchVariance(g,Me.CODE_PATTERNS[P],Me.MAX_INDIVIDUAL_VARIANCE);G<O&&(O=G,k=P)}if(k>=0&&s.isRange(Math.max(0,p-(_-p)/2),p,!1))return Int32Array.from([p,_,k]);p+=g[0]+g[1],g=g.slice(2,g.length-1),g[d-1]=0,g[d]=0,d--}else d++;g[d]=1,w=!w}throw new ie}static decodeCode(s,o,c){vt.recordPattern(s,c,o);let d=Me.MAX_AVG_VARIANCE,g=-1;for(let p=0;p<Me.CODE_PATTERNS.length;p++){const w=Me.CODE_PATTERNS[p],S=this.patternMatchVariance(o,w,Me.MAX_INDIVIDUAL_VARIANCE);S<d&&(d=S,g=p)}if(g>=0)return g;throw new ie}decodeRow(s,o,c){const d=c&&c.get(ee.ASSUME_GS1)===!0,g=Me.findStartPattern(o),p=g[2];let w=0;const S=new Uint8Array(20);S[w++]=p;let _;switch(p){case Me.CODE_START_A:_=Me.CODE_CODE_A;break;case Me.CODE_START_B:_=Me.CODE_CODE_B;break;case Me.CODE_START_C:_=Me.CODE_CODE_C;break;default:throw new X}let O=!1,k=!1,P="",G=g[0],Q=g[1];const te=Int32Array.from([0,0,0,0,0,0]);let ue=0,pe=0,Re=p,De=0,Ne=!0,dt=!1,ut=!1;for(;!O;){const sr=k;switch(k=!1,ue=pe,pe=Me.decodeCode(o,te,Q),S[w++]=pe,pe!==Me.CODE_STOP&&(Ne=!0),pe!==Me.CODE_STOP&&(De++,Re+=De*pe),G=Q,Q+=te.reduce((Qi,$f)=>Qi+$f,0),pe){case Me.CODE_START_A:case Me.CODE_START_B:case Me.CODE_START_C:throw new X}switch(_){case Me.CODE_CODE_A:if(pe<64)ut===dt?P+=String.fromCharCode(32+pe):P+=String.fromCharCode(32+pe+128),ut=!1;else if(pe<96)ut===dt?P+=String.fromCharCode(pe-64):P+=String.fromCharCode(pe+64),ut=!1;else switch(pe!==Me.CODE_STOP&&(Ne=!1),pe){case Me.CODE_FNC_1:d&&(P.length===0?P+="]C1":P+="");break;case Me.CODE_FNC_2:case Me.CODE_FNC_3:break;case Me.CODE_FNC_4_A:!dt&&ut?(dt=!0,ut=!1):dt&&ut?(dt=!1,ut=!1):ut=!0;break;case Me.CODE_SHIFT:k=!0,_=Me.CODE_CODE_B;break;case Me.CODE_CODE_B:_=Me.CODE_CODE_B;break;case Me.CODE_CODE_C:_=Me.CODE_CODE_C;break;case Me.CODE_STOP:O=!0;break}break;case Me.CODE_CODE_B:if(pe<96)ut===dt?P+=String.fromCharCode(32+pe):P+=String.fromCharCode(32+pe+128),ut=!1;else switch(pe!==Me.CODE_STOP&&(Ne=!1),pe){case Me.CODE_FNC_1:d&&(P.length===0?P+="]C1":P+="");break;case Me.CODE_FNC_2:case Me.CODE_FNC_3:break;case Me.CODE_FNC_4_B:!dt&&ut?(dt=!0,ut=!1):dt&&ut?(dt=!1,ut=!1):ut=!0;break;case Me.CODE_SHIFT:k=!0,_=Me.CODE_CODE_A;break;case Me.CODE_CODE_A:_=Me.CODE_CODE_A;break;case Me.CODE_CODE_C:_=Me.CODE_CODE_C;break;case Me.CODE_STOP:O=!0;break}break;case Me.CODE_CODE_C:if(pe<100)pe<10&&(P+="0"),P+=pe;else switch(pe!==Me.CODE_STOP&&(Ne=!1),pe){case Me.CODE_FNC_1:d&&(P.length===0?P+="]C1":P+="");break;case Me.CODE_CODE_A:_=Me.CODE_CODE_A;break;case Me.CODE_CODE_B:_=Me.CODE_CODE_B;break;case Me.CODE_STOP:O=!0;break}break}sr&&(_=_===Me.CODE_CODE_A?Me.CODE_CODE_B:Me.CODE_CODE_A)}const li=Q-G;if(Q=o.getNextUnset(Q),!o.isRange(Q,Math.min(o.getSize(),Q+(Q-G)/2),!1))throw new ie;if(Re-=De*ue,Re%103!==ue)throw new I;const Ui=P.length;if(Ui===0)throw new ie;Ui>0&&Ne&&(_===Me.CODE_CODE_C?P=P.substring(0,Ui-2):P=P.substring(0,Ui-1));const yi=(g[1]+g[0])/2,Xt=G+li/2,Xn=S.length,bi=new Uint8Array(Xn);for(let sr=0;sr<Xn;sr++)bi[sr]=S[sr];const _r=[new ze(yi,s),new ze(Xt,s)];return new Oe(P,bi,0,_r,we.CODE_128,new Date().getTime())}}Me.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Me.MAX_AVG_VARIANCE=.25,Me.MAX_INDIVIDUAL_VARIANCE=.7,Me.CODE_SHIFT=98,Me.CODE_CODE_C=99,Me.CODE_CODE_B=100,Me.CODE_CODE_A=101,Me.CODE_FNC_1=102,Me.CODE_FNC_2=97,Me.CODE_FNC_3=96,Me.CODE_FNC_4_A=101,Me.CODE_FNC_4_B=100,Me.CODE_START_A=103,Me.CODE_START_B=104,Me.CODE_START_C=105,Me.CODE_STOP=106;class Dt extends vt{constructor(s=!1,o=!1){super(),this.usingCheckDigit=s,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,o,c){let d=this.counters;d.fill(0),this.decodeRowResult="";let g=Dt.findAsteriskPattern(o,d),p=o.getNextSet(g[1]),w=o.getSize(),S,_;do{Dt.recordPattern(o,p,d);let te=Dt.toNarrowWidePattern(d);if(te<0)throw new ie;S=Dt.patternToChar(te),this.decodeRowResult+=S,_=p;for(let ue of d)p+=ue;p=o.getNextSet(p)}while(S!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let O=0;for(let te of d)O+=te;let k=p-_-O;if(p!==w&&k*2<O)throw new ie;if(this.usingCheckDigit){let te=this.decodeRowResult.length-1,ue=0;for(let pe=0;pe<te;pe++)ue+=Dt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(pe));if(this.decodeRowResult.charAt(te)!==Dt.ALPHABET_STRING.charAt(ue%43))throw new I;this.decodeRowResult=this.decodeRowResult.substring(0,te)}if(this.decodeRowResult.length===0)throw new ie;let P;this.extendedMode?P=Dt.decodeExtended(this.decodeRowResult):P=this.decodeRowResult;let G=(g[1]+g[0])/2,Q=_+O/2;return new Oe(P,null,0,[new ze(G,s),new ze(Q,s)],we.CODE_39,new Date().getTime())}static findAsteriskPattern(s,o){let c=s.getSize(),d=s.getNextSet(0),g=0,p=d,w=!1,S=o.length;for(let _=d;_<c;_++)if(s.get(_)!==w)o[g]++;else{if(g===S-1){if(this.toNarrowWidePattern(o)===Dt.ASTERISK_ENCODING&&s.isRange(Math.max(0,p-Math.floor((_-p)/2)),p,!1))return[p,_];p+=o[0]+o[1],o.copyWithin(0,2,2+g-1),o[g-1]=0,o[g]=0,g--}else g++;o[g]=1,w=!w}throw new ie}static toNarrowWidePattern(s){let o=s.length,c=0,d;do{let g=2147483647;for(let S of s)S<g&&S>c&&(g=S);c=g,d=0;let p=0,w=0;for(let S=0;S<o;S++){let _=s[S];_>c&&(w|=1<<o-1-S,d++,p+=_)}if(d===3){for(let S=0;S<o&&d>0;S++){let _=s[S];if(_>c&&(d--,_*2>=p))return-1}return w}}while(d>3);return-1}static patternToChar(s){for(let o=0;o<Dt.CHARACTER_ENCODINGS.length;o++)if(Dt.CHARACTER_ENCODINGS[o]===s)return Dt.ALPHABET_STRING.charAt(o);if(s===Dt.ASTERISK_ENCODING)return"*";throw new ie}static decodeExtended(s){let o=s.length,c="";for(let d=0;d<o;d++){let g=s.charAt(d);if(g==="+"||g==="$"||g==="%"||g==="/"){let p=s.charAt(d+1),w="\0";switch(g){case"+":if(p>="A"&&p<="Z")w=String.fromCharCode(p.charCodeAt(0)+32);else throw new X;break;case"$":if(p>="A"&&p<="Z")w=String.fromCharCode(p.charCodeAt(0)-64);else throw new X;break;case"%":if(p>="A"&&p<="E")w=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")w=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")w=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")w=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")w="\0";else if(p==="V")w="@";else if(p==="W")w="`";else if(p==="X"||p==="Y"||p==="Z")w="";else throw new X;break;case"/":if(p>="A"&&p<="O")w=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")w=":";else throw new X;break}c+=w,d++}else c+=g}return c}}Dt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Dt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Dt.ASTERISK_ENCODING=148;class Tt extends vt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,o,c){let d=this.decodeStart(o),g=this.decodeEnd(o),p=new le;Tt.decodeMiddle(o,d[1],g[0],p);let w=p.toString(),S=null;c!=null&&(S=c.get(ee.ALLOWED_LENGTHS)),S==null&&(S=Tt.DEFAULT_ALLOWED_LENGTHS);let _=w.length,O=!1,k=0;for(let Q of S){if(_===Q){O=!0;break}Q>k&&(k=Q)}if(!O&&_>k&&(O=!0),!O)throw new X;const P=[new ze(d[1],s),new ze(g[0],s)];return new Oe(w,null,0,P,we.ITF,new Date().getTime())}static decodeMiddle(s,o,c,d){let g=new Int32Array(10),p=new Int32Array(5),w=new Int32Array(5);for(g.fill(0),p.fill(0),w.fill(0);o<c;){vt.recordPattern(s,o,g);for(let _=0;_<5;_++){let O=2*_;p[_]=g[O],w[_]=g[O+1]}let S=Tt.decodeDigit(p);d.append(S.toString()),S=this.decodeDigit(w),d.append(S.toString()),g.forEach(function(_){o+=_})}}decodeStart(s){let o=Tt.skipWhiteSpace(s),c=Tt.findGuardPattern(s,o,Tt.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(s,c[0]),c}validateQuietZone(s,o){let c=this.narrowLineWidth*10;c=c<o?c:o;for(let d=o-1;c>0&&d>=0&&!s.get(d);d--)c--;if(c!==0)throw new ie}static skipWhiteSpace(s){const o=s.getSize(),c=s.getNextSet(0);if(c===o)throw new ie;return c}decodeEnd(s){s.reverse();try{let o=Tt.skipWhiteSpace(s),c;try{c=Tt.findGuardPattern(s,o,Tt.END_PATTERN_REVERSED[0])}catch(g){g instanceof ie&&(c=Tt.findGuardPattern(s,o,Tt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,c[0]);let d=c[0];return c[0]=s.getSize()-c[1],c[1]=s.getSize()-d,c}finally{s.reverse()}}static findGuardPattern(s,o,c){let d=c.length,g=new Int32Array(d),p=s.getSize(),w=!1,S=0,_=o;g.fill(0);for(let O=o;O<p;O++)if(s.get(O)!==w)g[S]++;else{if(S===d-1){if(vt.patternMatchVariance(g,c,Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE)return[_,O];_+=g[0]+g[1],j.arraycopy(g,2,g,0,S-1),g[S-1]=0,g[S]=0,S--}else S++;g[S]=1,w=!w}throw new ie}static decodeDigit(s){let o=Tt.MAX_AVG_VARIANCE,c=-1,d=Tt.PATTERNS.length;for(let g=0;g<d;g++){let p=Tt.PATTERNS[g],w=vt.patternMatchVariance(s,p,Tt.MAX_INDIVIDUAL_VARIANCE);w<o?(o=w,c=g):w===o&&(c=-1)}if(c>=0)return c%10;throw new ie}}Tt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Tt.MAX_AVG_VARIANCE=.38,Tt.MAX_INDIVIDUAL_VARIANCE=.5,Tt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Tt.START_PATTERN=Int32Array.from([1,1,1,1]),Tt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class jt extends vt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let o=!1,c,d=0,g=Int32Array.from([0,0,0]);for(;!o;){g=Int32Array.from([0,0,0]),c=jt.findGuardPattern(s,d,!1,this.START_END_PATTERN,g);let p=c[0];d=c[1];let w=p-(d-p);w>=0&&(o=s.isRange(w,p,!1))}return c}static checkChecksum(s){return jt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let o=s.length;if(o===0)return!1;let c=parseInt(s.charAt(o-1),10);return jt.getStandardUPCEANChecksum(s.substring(0,o-1))===c}static getStandardUPCEANChecksum(s){let o=s.length,c=0;for(let d=o-1;d>=0;d-=2){let g=s.charAt(d).charCodeAt(0)-48;if(g<0||g>9)throw new X;c+=g}c*=3;for(let d=o-2;d>=0;d-=2){let g=s.charAt(d).charCodeAt(0)-48;if(g<0||g>9)throw new X;c+=g}return(1e3-c)%10}static decodeEnd(s,o){return jt.findGuardPattern(s,o,!1,jt.START_END_PATTERN,new Int32Array(jt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,o,c,d){return this.findGuardPattern(s,o,c,d,new Int32Array(d.length))}static findGuardPattern(s,o,c,d,g){let p=s.getSize();o=c?s.getNextUnset(o):s.getNextSet(o);let w=0,S=o,_=d.length,O=c;for(let k=o;k<p;k++)if(s.get(k)!==O)g[w]++;else{if(w===_-1){if(vt.patternMatchVariance(g,d,jt.MAX_INDIVIDUAL_VARIANCE)<jt.MAX_AVG_VARIANCE)return Int32Array.from([S,k]);S+=g[0]+g[1];let P=g.slice(2,g.length-1);for(let G=0;G<w-1;G++)g[G]=P[G];g[w-1]=0,g[w]=0,w--}else w++;g[w]=1,O=!O}throw new ie}static decodeDigit(s,o,c,d){this.recordPattern(s,c,o);let g=this.MAX_AVG_VARIANCE,p=-1,w=d.length;for(let S=0;S<w;S++){let _=d[S],O=vt.patternMatchVariance(o,_,jt.MAX_INDIVIDUAL_VARIANCE);O<g&&(g=O,p=S)}if(p>=0)return p;throw new ie}}jt.MAX_AVG_VARIANCE=.48,jt.MAX_INDIVIDUAL_VARIANCE=.7,jt.START_END_PATTERN=Int32Array.from([1,1,1]),jt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),jt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),jt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ki{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,o,c){let d=this.decodeRowStringBuffer,g=this.decodeMiddle(o,c,d),p=d.toString(),w=ki.parseExtensionString(p),S=[new ze((c[0]+c[1])/2,s),new ze(g,s)],_=new Oe(p,null,0,S,we.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&_.putAllMetadata(w),_}decodeMiddle(s,o,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let g=s.getSize(),p=o[1],w=0;for(let _=0;_<5&&p<g;_++){let O=jt.decodeDigit(s,d,p,jt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+O%10);for(let k of d)p+=k;O>=10&&(w|=1<<4-_),_!==4&&(p=s.getNextSet(p),p=s.getNextUnset(p))}if(c.length!==5)throw new ie;let S=this.determineCheckDigit(w);if(ki.extensionChecksum(c.toString())!==S)throw new ie;return p}static extensionChecksum(s){let o=s.length,c=0;for(let d=o-2;d>=0;d-=2)c+=s.charAt(d).charCodeAt(0)-48;c*=3;for(let d=o-1;d>=0;d-=2)c+=s.charAt(d).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(s){for(let o=0;o<10;o++)if(s===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new ie}static parseExtensionString(s){if(s.length!==5)return null;let o=ki.parseExtension5String(s);return o==null?null:new Map([[Ge.SUGGESTED_PRICE,o]])}static parseExtension5String(s){let o;switch(s.charAt(0)){case"0":o="";break;case"5":o="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let c=parseInt(s.substring(1)),d=(c/100).toString(),g=c%100,p=g<10?"0"+g:g.toString();return o+d+"."+p}}class gi{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,o,c){let d=this.decodeRowStringBuffer,g=this.decodeMiddle(o,c,d),p=d.toString(),w=gi.parseExtensionString(p),S=[new ze((c[0]+c[1])/2,s),new ze(g,s)],_=new Oe(p,null,0,S,we.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&_.putAllMetadata(w),_}decodeMiddle(s,o,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let g=s.getSize(),p=o[1],w=0;for(let S=0;S<2&&p<g;S++){let _=jt.decodeDigit(s,d,p,jt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+_%10);for(let O of d)p+=O;_>=10&&(w|=1<<1-S),S!==1&&(p=s.getNextSet(p),p=s.getNextUnset(p))}if(c.length!==2)throw new ie;if(parseInt(c.toString())%4!==w)throw new ie;return p}static parseExtensionString(s){return s.length!==2?null:new Map([[Ge.ISSUE_NUMBER,parseInt(s)]])}}class ra{static decodeRow(s,o,c){let d=jt.findGuardPattern(o,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ki().decodeRow(s,o,d)}catch{return new gi().decodeRow(s,o,d)}}}ra.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ct extends jt{constructor(){super(),this.decodeRowStringBuffer="",Ct.L_AND_G_PATTERNS=Ct.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let o=Ct.L_PATTERNS[s-10],c=new Int32Array(o.length);for(let d=0;d<o.length;d++)c[d]=o[o.length-d-1];Ct.L_AND_G_PATTERNS[s]=c}}decodeRow(s,o,c){let d=Ct.findStartGuardPattern(o),g=c==null?null:c.get(ee.NEED_RESULT_POINT_CALLBACK);if(g!=null){const Ne=new ze((d[0]+d[1])/2,s);g.foundPossibleResultPoint(Ne)}let p=this.decodeMiddle(o,d,this.decodeRowStringBuffer),w=p.rowOffset,S=p.resultString;if(g!=null){const Ne=new ze(w,s);g.foundPossibleResultPoint(Ne)}let _=this.decodeEnd(o,w);if(g!=null){const Ne=new ze((_[0]+_[1])/2,s);g.foundPossibleResultPoint(Ne)}let O=_[1],k=O+(O-_[0]);if(k>=o.getSize()||!o.isRange(O,k,!1))throw new ie;let P=S.toString();if(P.length<8)throw new X;if(!Ct.checkChecksum(P))throw new I;let G=(d[1]+d[0])/2,Q=(_[1]+_[0])/2,te=this.getBarcodeFormat(),ue=[new ze(G,s),new ze(Q,s)],pe=new Oe(P,null,0,ue,te,new Date().getTime()),Re=0;try{let Ne=ra.decodeRow(s,o,_[1]);pe.putMetadata(Ge.UPC_EAN_EXTENSION,Ne.getText()),pe.putAllMetadata(Ne.getResultMetadata()),pe.addResultPoints(Ne.getResultPoints()),Re=Ne.getText().length}catch{}let De=c==null?null:c.get(ee.ALLOWED_EAN_EXTENSIONS);if(De!=null){let Ne=!1;for(let dt in De)if(Re.toString()===dt){Ne=!0;break}if(!Ne)throw new ie}return pe}decodeEnd(s,o){return Ct.findGuardPattern(s,o,!1,Ct.START_END_PATTERN,new Int32Array(Ct.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return Ct.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let o=s.length;if(o===0)return!1;let c=parseInt(s.charAt(o-1),10);return Ct.getStandardUPCEANChecksum(s.substring(0,o-1))===c}static getStandardUPCEANChecksum(s){let o=s.length,c=0;for(let d=o-1;d>=0;d-=2){let g=s.charAt(d).charCodeAt(0)-48;if(g<0||g>9)throw new X;c+=g}c*=3;for(let d=o-2;d>=0;d-=2){let g=s.charAt(d).charCodeAt(0)-48;if(g<0||g>9)throw new X;c+=g}return(1e3-c)%10}}class Wi extends Ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,o,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let g=s.getSize(),p=o[1],w=0;for(let _=0;_<6&&p<g;_++){let O=Ct.decodeDigit(s,d,p,Ct.L_AND_G_PATTERNS);c+=String.fromCharCode(48+O%10);for(let k of d)p+=k;O>=10&&(w|=1<<5-_)}c=Wi.determineFirstDigit(c,w),p=Ct.findGuardPattern(s,p,!0,Ct.MIDDLE_PATTERN,new Int32Array(Ct.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<6&&p<g;_++){let O=Ct.decodeDigit(s,d,p,Ct.L_PATTERNS);c+=String.fromCharCode(48+O);for(let k of d)p+=k}return{rowOffset:p,resultString:c}}getBarcodeFormat(){return we.EAN_13}static determineFirstDigit(s,o){for(let c=0;c<10;c++)if(o===this.FIRST_DIGIT_ENCODINGS[c])return s=String.fromCharCode(48+c)+s,s;throw new ie}}Wi.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Lf extends Ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,o,c){const d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let g=s.getSize(),p=o[1];for(let S=0;S<4&&p<g;S++){let _=Ct.decodeDigit(s,d,p,Ct.L_PATTERNS);c+=String.fromCharCode(48+_);for(let O of d)p+=O}p=Ct.findGuardPattern(s,p,!0,Ct.MIDDLE_PATTERN,new Int32Array(Ct.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<4&&p<g;S++){let _=Ct.decodeDigit(s,d,p,Ct.L_PATTERNS);c+=String.fromCharCode(48+_);for(let O of d)p+=O}return{rowOffset:p,resultString:c}}getBarcodeFormat(){return we.EAN_8}}class Bc extends Ct{constructor(){super(...arguments),this.ean13Reader=new Wi}getBarcodeFormat(){return we.UPC_A}decode(s,o){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,o,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,o,c))}decodeMiddle(s,o,c){return this.ean13Reader.decodeMiddle(s,o,c)}maybeReturnResult(s){let o=s.getText();if(o.charAt(0)==="0"){let c=new Oe(o.substring(1),null,null,s.getResultPoints(),we.UPC_A);return s.getResultMetadata()!=null&&c.putAllMetadata(s.getResultMetadata()),c}else throw new ie}reset(){this.ean13Reader.reset()}}class ji extends Ct{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,o,c){const d=this.decodeMiddleCounters.map(_=>_);d[0]=0,d[1]=0,d[2]=0,d[3]=0;const g=s.getSize();let p=o[1],w=0;for(let _=0;_<6&&p<g;_++){const O=ji.decodeDigit(s,d,p,ji.L_AND_G_PATTERNS);c+=String.fromCharCode(48+O%10);for(let k of d)p+=k;O>=10&&(w|=1<<5-_)}let S=ji.determineNumSysAndCheckDigit(c,w);return{rowOffset:p,resultString:S}}decodeEnd(s,o){return ji.findGuardPatternWithoutCounters(s,o,!0,ji.MIDDLE_END_PATTERN)}checkChecksum(s){return Ct.checkChecksum(ji.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,o){for(let c=0;c<=1;c++)for(let d=0;d<10;d++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][d]){let g=String.fromCharCode(48+c),p=String.fromCharCode(48+d);return g+s+p}throw ie.getNotFoundInstance()}getBarcodeFormat(){return we.UPC_E}static convertUPCEtoUPCA(s){const o=s.slice(1,7).split("").map(g=>g.charCodeAt(0)),c=new le;c.append(s.charAt(0));let d=o[5];switch(d){case 0:case 1:case 2:c.appendChars(o,0,2),c.append(d),c.append("0000"),c.appendChars(o,2,3);break;case 3:c.appendChars(o,0,3),c.append("00000"),c.appendChars(o,3,2);break;case 4:c.appendChars(o,0,4),c.append("00000"),c.append(o[4]);break;default:c.appendChars(o,0,5),c.append("0000"),c.append(d);break}return s.length>=8&&c.append(s.charAt(7)),c.toString()}}ji.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ji.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class fo extends vt{constructor(s){super();let o=s==null?null:s.get(ee.POSSIBLE_FORMATS),c=[];r(o)?(c.push(new Wi),c.push(new Bc),c.push(new Lf),c.push(new ji)):(o.indexOf(we.EAN_13)>-1&&c.push(new Wi),o.indexOf(we.UPC_A)>-1&&c.push(new Bc),o.indexOf(we.EAN_8)>-1&&c.push(new Lf),o.indexOf(we.UPC_E)>-1&&c.push(new ji)),this.readers=c}decodeRow(s,o,c){for(let d of this.readers)try{const g=d.decodeRow(s,o,c),p=g.getBarcodeFormat()===we.EAN_13&&g.getText().charAt(0)==="0",w=c==null?null:c.get(ee.POSSIBLE_FORMATS),S=w==null||w.includes(we.UPC_A);if(p&&S){const _=g.getRawBytes(),O=new Oe(g.getText().substring(1),_,_?_.length:null,g.getResultPoints(),we.UPC_A);return O.putAllMetadata(g.getResultMetadata()),O}return g}catch{}throw new ie}reset(){for(let s of this.readers)s.reset()}}class jn extends vt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,o){for(let c=0;c<o.length;c++)if(vt.patternMatchVariance(s,o[c],jn.MAX_INDIVIDUAL_VARIANCE)<jn.MAX_AVG_VARIANCE)return c;throw new ie}static count(s){return gt.sum(new Int32Array(s))}static increment(s,o){let c=0,d=o[0];for(let g=1;g<s.length;g++)o[g]>d&&(d=o[g],c=g);s[c]++}static decrement(s,o){let c=0,d=o[0];for(let g=1;g<s.length;g++)o[g]<d&&(d=o[g],c=g);s[c]--}static isFinderPattern(s){let o=s[0]+s[1],c=o+s[2]+s[3],d=o/c;if(d>=jn.MIN_FINDER_PATTERN_RATIO&&d<=jn.MAX_FINDER_PATTERN_RATIO){let g=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let w of s)w>p&&(p=w),w<g&&(g=w);return p<10*g}return!1}}jn.MAX_AVG_VARIANCE=.2,jn.MAX_INDIVIDUAL_VARIANCE=.45,jn.MIN_FINDER_PATTERN_RATIO=9.5/12,jn.MAX_FINDER_PATTERN_RATIO=12.5/14;class vr{constructor(s,o){this.value=s,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof vr))return!1;const o=s;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class fl{constructor(s,o,c,d,g){this.value=s,this.startEnd=o,this.value=s,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new ze(c,g)),this.resultPoints.push(new ze(d,g))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof fl))return!1;const o=s;return this.value===o.value}hashCode(){return this.value}}class Hn{constructor(){}static getRSSvalue(s,o,c){let d=0;for(let S of s)d+=S;let g=0,p=0,w=s.length;for(let S=0;S<w-1;S++){let _;for(_=1,p|=1<<S;_<s[S];_++,p&=~(1<<S)){let O=Hn.combins(d-_-1,w-S-2);if(c&&p===0&&d-_-(w-S-1)>=w-S-1&&(O-=Hn.combins(d-_-(w-S),w-S-2)),w-S-1>1){let k=0;for(let P=d-_-(w-S-2);P>o;P--)k+=Hn.combins(d-_-P-1,w-S-3);O-=k*(w-1-S)}else d-_>o&&O--;g+=O}d-=_}return g}static combins(s,o){let c,d;s-o>o?(d=o,c=s-o):(d=s-o,c=o);let g=1,p=1;for(let w=s;w>c;w--)g*=w,p<=d&&(g/=p,p++);for(;p<=d;)g/=p,p++;return g}}class Jn{static buildBitArray(s){let o=s.length*2-1;s[s.length-1].getRightChar()==null&&(o-=1);let c=12*o,d=new V(c),g=0,w=s[0].getRightChar().getValue();for(let S=11;S>=0;--S)(w&1<<S)!=0&&d.set(g),g++;for(let S=1;S<s.length;++S){let _=s[S],O=_.getLeftChar().getValue();for(let k=11;k>=0;--k)(O&1<<k)!=0&&d.set(g),g++;if(_.getRightChar()!=null){let k=_.getRightChar().getValue();for(let P=11;P>=0;--P)(k&1<<P)!=0&&d.set(g),g++}}return d}}class wn{constructor(s,o){o?this.decodedInformation=null:(this.finished=s,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class qs{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class ei extends qs{constructor(s,o){super(s),this.value=o}getValue(){return this.value}isFNC1(){return this.value===ei.FNC1}}ei.FNC1="$";class Er extends qs{constructor(s,o,c){super(s),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Bi extends qs{constructor(s,o,c){if(super(s),o<0||o>10||c<0||c>10)throw new X;this.firstDigit=o,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Bi.FNC1}isSecondDigitFNC1(){return this.secondDigit===Bi.FNC1}isAnyFNC1(){return this.firstDigit===Bi.FNC1||this.secondDigit===Bi.FNC1}}Bi.FNC1=10;class Fe{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new ie;let o=s.substring(0,2);for(let g of Fe.TWO_DIGIT_DATA_LENGTH)if(g[0]===o)return g[1]===Fe.VARIABLE_LENGTH?Fe.processVariableAI(2,g[2],s):Fe.processFixedAI(2,g[1],s);if(s.length<3)throw new ie;let c=s.substring(0,3);for(let g of Fe.THREE_DIGIT_DATA_LENGTH)if(g[0]===c)return g[1]===Fe.VARIABLE_LENGTH?Fe.processVariableAI(3,g[2],s):Fe.processFixedAI(3,g[1],s);for(let g of Fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(g[0]===c)return g[1]===Fe.VARIABLE_LENGTH?Fe.processVariableAI(4,g[2],s):Fe.processFixedAI(4,g[1],s);if(s.length<4)throw new ie;let d=s.substring(0,4);for(let g of Fe.FOUR_DIGIT_DATA_LENGTH)if(g[0]===d)return g[1]===Fe.VARIABLE_LENGTH?Fe.processVariableAI(4,g[2],s):Fe.processFixedAI(4,g[1],s);throw new ie}static processFixedAI(s,o,c){if(c.length<s)throw new ie;let d=c.substring(0,s);if(c.length<s+o)throw new ie;let g=c.substring(s,s+o),p=c.substring(s+o),w="("+d+")"+g,S=Fe.parseFieldsInGeneralPurpose(p);return S==null?w:w+S}static processVariableAI(s,o,c){let d=c.substring(0,s),g;c.length<s+o?g=c.length:g=s+o;let p=c.substring(s,g),w=c.substring(g),S="("+d+")"+p,_=Fe.parseFieldsInGeneralPurpose(w);return _==null?S:S+_}}Fe.VARIABLE_LENGTH=[],Fe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Fe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Fe.VARIABLE_LENGTH,20],["22",Fe.VARIABLE_LENGTH,29],["30",Fe.VARIABLE_LENGTH,8],["37",Fe.VARIABLE_LENGTH,8],["90",Fe.VARIABLE_LENGTH,30],["91",Fe.VARIABLE_LENGTH,30],["92",Fe.VARIABLE_LENGTH,30],["93",Fe.VARIABLE_LENGTH,30],["94",Fe.VARIABLE_LENGTH,30],["95",Fe.VARIABLE_LENGTH,30],["96",Fe.VARIABLE_LENGTH,30],["97",Fe.VARIABLE_LENGTH,3],["98",Fe.VARIABLE_LENGTH,30],["99",Fe.VARIABLE_LENGTH,30]],Fe.THREE_DIGIT_DATA_LENGTH=[["240",Fe.VARIABLE_LENGTH,30],["241",Fe.VARIABLE_LENGTH,30],["242",Fe.VARIABLE_LENGTH,6],["250",Fe.VARIABLE_LENGTH,30],["251",Fe.VARIABLE_LENGTH,30],["253",Fe.VARIABLE_LENGTH,17],["254",Fe.VARIABLE_LENGTH,20],["400",Fe.VARIABLE_LENGTH,30],["401",Fe.VARIABLE_LENGTH,30],["402",17],["403",Fe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Fe.VARIABLE_LENGTH,20],["421",Fe.VARIABLE_LENGTH,15],["422",3],["423",Fe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Fe.VARIABLE_LENGTH,15],["391",Fe.VARIABLE_LENGTH,18],["392",Fe.VARIABLE_LENGTH,15],["393",Fe.VARIABLE_LENGTH,18],["703",Fe.VARIABLE_LENGTH,30]],Fe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Fe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Fe.VARIABLE_LENGTH,20],["8003",Fe.VARIABLE_LENGTH,30],["8004",Fe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Fe.VARIABLE_LENGTH,30],["8008",Fe.VARIABLE_LENGTH,12],["8018",18],["8020",Fe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Fe.VARIABLE_LENGTH,70],["8200",Fe.VARIABLE_LENGTH,70]];class us{constructor(s){this.buffer=new le,this.information=s}decodeAllCodes(s,o){let c=o,d=null;do{let g=this.decodeGeneralPurposeField(c,d),p=Fe.parseFieldsInGeneralPurpose(g.getNewString());if(p!=null&&s.append(p),g.isRemaining()?d=""+g.getRemainingValue():d=null,c===g.getNewPosition())break;c=g.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let o=s;o<s+3;++o)if(this.information.get(o))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let g=this.extractNumericValueFromBitArray(s,4);return g===0?new Bi(this.information.getSize(),Bi.FNC1,Bi.FNC1):new Bi(this.information.getSize(),g-1,Bi.FNC1)}let o=this.extractNumericValueFromBitArray(s,7),c=(o-8)/11,d=(o-8)%11;return new Bi(s+7,c,d)}extractNumericValueFromBitArray(s,o){return us.extractNumericValueFromBitArray(this.information,s,o)}static extractNumericValueFromBitArray(s,o,c){let d=0;for(let g=0;g<c;++g)s.get(o+g)&&(d|=1<<c-g-1);return d}decodeGeneralPurposeField(s,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(s);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new Er(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new Er(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,o;do{let c=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),s=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),s=o.isFinished()):(o=this.parseNumericBlock(),s=o.isFinished()),!(c!==this.current.getPosition())&&!s)break}while(!s);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let o;return s.isSecondDigitFNC1()?o=new Er(this.current.getPosition(),this.buffer.toString()):o=new Er(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new wn(!0,o)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let o=new Er(this.current.getPosition(),this.buffer.toString());return new wn(!0,o)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new wn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let o=new Er(this.current.getPosition(),this.buffer.toString());return new wn(!0,o)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new wn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let o=new Er(this.current.getPosition(),this.buffer.toString());return new wn(!0,o)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new wn(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(s,5);if(o>=5&&o<16)return!0;if(s+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(s,7);if(c>=64&&c<116)return!0;if(s+8>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(s,8);return d>=232&&d<253}decodeIsoIec646(s){let o=this.extractNumericValueFromBitArray(s,5);if(o===15)return new ei(s+5,ei.FNC1);if(o>=5&&o<15)return new ei(s+5,"0"+(o-5));let c=this.extractNumericValueFromBitArray(s,7);if(c>=64&&c<90)return new ei(s+7,""+(c+1));if(c>=90&&c<116)return new ei(s+7,""+(c+7));let d=this.extractNumericValueFromBitArray(s,8),g;switch(d){case 232:g="!";break;case 233:g='"';break;case 234:g="%";break;case 235:g="&";break;case 236:g="'";break;case 237:g="(";break;case 238:g=")";break;case 239:g="*";break;case 240:g="+";break;case 241:g=",";break;case 242:g="-";break;case 243:g=".";break;case 244:g="/";break;case 245:g=":";break;case 246:g=";";break;case 247:g="<";break;case 248:g="=";break;case 249:g=">";break;case 250:g="?";break;case 251:g="_";break;case 252:g=" ";break;default:throw new X}return new ei(s+8,g)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(s,5);if(o>=5&&o<16)return!0;if(s+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(s,6);return c>=16&&c<63}decodeAlphanumeric(s){let o=this.extractNumericValueFromBitArray(s,5);if(o===15)return new ei(s+5,ei.FNC1);if(o>=5&&o<15)return new ei(s+5,"0"+(o-5));let c=this.extractNumericValueFromBitArray(s,6);if(c>=32&&c<58)return new ei(s+6,""+(c+33));let d;switch(c){case 58:d="*";break;case 59:d=",";break;case 60:d="-";break;case 61:d=".";break;case 62:d="/";break;default:throw new Ke("Decoding invalid alphanumeric value: "+c)}return new ei(s+6,d)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let o=0;o<5&&o+s<this.information.getSize();++o)if(o===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+o))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let o=s;o<s+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let o=0;o<4&&o+s<this.information.getSize();++o)if(this.information.get(s+o))return!1;return!0}}class ho{constructor(s){this.information=s,this.generalDecoder=new us(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Nn extends ho{constructor(s){super(s)}encodeCompressedGtin(s,o){s.append("(01)");let c=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,o,c)}encodeCompressedGtinWithoutAI(s,o,c){for(let d=0;d<4;++d){let g=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*d,10);g/100===0&&s.append("0"),g/10===0&&s.append("0"),s.append(g)}Nn.appendCheckDigit(s,c)}static appendCheckDigit(s,o){let c=0;for(let d=0;d<13;d++){let g=s.charAt(d+o).charCodeAt(0)-48;c+=(d&1)===0?3*g:g}c=10-c%10,c===10&&(c=0),s.append(c)}}Nn.GTIN_SIZE=40;class Ki extends Nn{constructor(s){super(s)}parseInformation(){let s=new le;s.append("(01)");let o=s.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(Ki.HEADER_SIZE,4);return s.append(c),this.encodeCompressedGtinWithoutAI(s,Ki.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(s,Ki.HEADER_SIZE+44)}}Ki.HEADER_SIZE=4;class Ys extends ho{constructor(s){super(s)}parseInformation(){let s=new le;return this.getGeneralDecoder().decodeAllCodes(s,Ys.HEADER_SIZE)}}Ys.HEADER_SIZE=5;class Rs extends Nn{constructor(s){super(s)}encodeCompressedWeight(s,o,c){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o,c);this.addWeightCode(s,d);let g=this.checkWeight(d),p=1e5;for(let w=0;w<5;++w)g/p===0&&s.append("0"),p/=10;s.append(g)}}class qt extends Rs{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=qt.HEADER_SIZE+Rs.GTIN_SIZE+qt.WEIGHT_SIZE)throw new ie;let s=new le;return this.encodeCompressedGtin(s,qt.HEADER_SIZE),this.encodeCompressedWeight(s,qt.HEADER_SIZE+Rs.GTIN_SIZE,qt.WEIGHT_SIZE),s.toString()}}qt.HEADER_SIZE=5,qt.WEIGHT_SIZE=15;class kf extends qt{constructor(s){super(s)}addWeightCode(s,o){s.append("(3103)")}checkWeight(s){return s}}class jf extends qt{constructor(s){super(s)}addWeightCode(s,o){o<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class ti extends Nn{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<ti.HEADER_SIZE+Nn.GTIN_SIZE)throw new ie;let s=new le;this.encodeCompressedGtin(s,ti.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(ti.HEADER_SIZE+Nn.GTIN_SIZE,ti.LAST_DIGIT_SIZE);s.append("(392"),s.append(o),s.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(ti.HEADER_SIZE+Nn.GTIN_SIZE+ti.LAST_DIGIT_SIZE,null);return s.append(c.getNewString()),s.toString()}}ti.HEADER_SIZE=8,ti.LAST_DIGIT_SIZE=2;class vn extends Nn{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<vn.HEADER_SIZE+Nn.GTIN_SIZE)throw new ie;let s=new le;this.encodeCompressedGtin(s,vn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(vn.HEADER_SIZE+Nn.GTIN_SIZE,vn.LAST_DIGIT_SIZE);s.append("(393"),s.append(o),s.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(vn.HEADER_SIZE+Nn.GTIN_SIZE+vn.LAST_DIGIT_SIZE,vn.FIRST_THREE_DIGITS_SIZE);c/100==0&&s.append("0"),c/10==0&&s.append("0"),s.append(c);let d=this.getGeneralDecoder().decodeGeneralPurposeField(vn.HEADER_SIZE+Nn.GTIN_SIZE+vn.LAST_DIGIT_SIZE+vn.FIRST_THREE_DIGITS_SIZE,null);return s.append(d.getNewString()),s.toString()}}vn.HEADER_SIZE=8,vn.LAST_DIGIT_SIZE=2,vn.FIRST_THREE_DIGITS_SIZE=10;class rn extends Rs{constructor(s,o,c){super(s),this.dateCode=c,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=rn.HEADER_SIZE+rn.GTIN_SIZE+rn.WEIGHT_SIZE+rn.DATE_SIZE)throw new ie;let s=new le;return this.encodeCompressedGtin(s,rn.HEADER_SIZE),this.encodeCompressedWeight(s,rn.HEADER_SIZE+rn.GTIN_SIZE,rn.WEIGHT_SIZE),this.encodeCompressedDate(s,rn.HEADER_SIZE+rn.GTIN_SIZE+rn.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,o){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(o,rn.DATE_SIZE);if(c==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let d=c%32;c/=32;let g=c%12+1;c/=12;let p=c;p/10==0&&s.append("0"),s.append(p),g/10==0&&s.append("0"),s.append(g),d/10==0&&s.append("0"),s.append(d)}addWeightCode(s,o){s.append("("),s.append(this.firstAIdigits),s.append(o/1e5),s.append(")")}checkWeight(s){return s%1e5}}rn.HEADER_SIZE=8,rn.WEIGHT_SIZE=20,rn.DATE_SIZE=16;function Pc(L){try{if(L.get(1))return new Ki(L);if(!L.get(2))return new Ys(L);switch(us.extractNumericValueFromBitArray(L,1,4)){case 4:return new kf(L);case 5:return new jf(L)}switch(us.extractNumericValueFromBitArray(L,1,5)){case 12:return new ti(L);case 13:return new vn(L)}switch(us.extractNumericValueFromBitArray(L,1,7)){case 56:return new rn(L,"310","11");case 57:return new rn(L,"320","11");case 58:return new rn(L,"310","13");case 59:return new rn(L,"320","13");case 60:return new rn(L,"310","15");case 61:return new rn(L,"320","15");case 62:return new rn(L,"310","17");case 63:return new rn(L,"320","17")}}catch(s){throw console.log(s),new Ke("unknown decoder: "+L)}}class Os{constructor(s,o,c,d){this.leftchar=s,this.rightchar=o,this.finderpattern=c,this.maybeLast=d}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,o){return s instanceof Os?Os.equalsOrNull(s.leftchar,o.leftchar)&&Os.equalsOrNull(s.rightchar,o.rightchar)&&Os.equalsOrNull(s.finderpattern,o.finderpattern):!1}static equalsOrNull(s,o){return s===null?o===null:Os.equals(s,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Uc{constructor(s,o,c){this.pairs=s,this.rowNumber=o,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,o){return s instanceof Uc?this.checkEqualitity(s,o)&&s.wasReversed===o.wasReversed:!1}checkEqualitity(s,o){if(!s||!o)return;let c;return s.forEach((d,g)=>{o.forEach(p=>{d.getLeftChar().getValue()===p.getLeftChar().getValue()&&d.getRightChar().getValue()===p.getRightChar().getValue()&&d.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(c=!0)})}),c}}class Ae extends jn{constructor(s){super(...arguments),this.pairs=new Array(Ae.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,o,c){this.pairs.length=0,this.startFromEven=!1;try{return Ae.constructResult(this.decodeRow2pairs(s,o))}catch(d){this.verbose&&console.log(d)}return this.pairs.length=0,this.startFromEven=!0,Ae.constructResult(this.decodeRow2pairs(s,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,o){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,s))}catch(g){if(g instanceof ie){if(!this.pairs.length)throw new ie;c=!0}}if(this.checkChecksum())return this.pairs;let d;if(this.rows.length?d=!0:d=!1,this.storeRow(s,!1),d){let g=this.checkRowsBoolean(!1);if(g!=null||(g=this.checkRowsBoolean(!0),g!=null))return g}throw new ie}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return s&&(this.rows=this.rows.reverse()),o}checkRows(s,o){for(let c=o;c<this.rows.length;c++){let d=this.rows[c];this.pairs.length=0;for(let p of s)this.pairs.push(p.getPairs());if(this.pairs.push(d.getPairs()),!Ae.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let g=new Array(s);g.push(d);try{return this.checkRows(g,c+1)}catch(p){this.verbose&&console.log(p)}}throw new ie}static isValidSequence(s){for(let o of Ae.FINDER_PATTERN_SEQUENCES){if(s.length>o.length)continue;let c=!0;for(let d=0;d<s.length;d++)if(s[d].getFinderPattern().getValue()!=o[d]){c=!1;break}if(c)return!0}return!1}storeRow(s,o){let c=0,d=!1,g=!1;for(;c<this.rows.length;){let p=this.rows[c];if(p.getRowNumber()>s){g=p.isEquivalent(this.pairs);break}d=p.isEquivalent(this.pairs),c++}g||d||Ae.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new Uc(this.pairs,s,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,o){for(let c of o)if(c.getPairs().length!==s.length){for(let d of c.getPairs())for(let g of s)if(Os.equals(d,g))break}}static isPartialRow(s,o){for(let c of o){let d=!0;for(let g of s){let p=!1;for(let w of c.getPairs())if(g.equals(w)){p=!0;break}if(!p){d=!1;break}}if(d)return!0}return!1}getRows(){return this.rows}static constructResult(s){let o=Jn.buildBitArray(s),d=Pc(o).parseInformation(),g=s[0].getFinderPattern().getResultPoints(),p=s[s.length-1].getFinderPattern().getResultPoints(),w=[g[0],g[1],p[0],p[1]];return new Oe(d,null,null,w,we.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),o=s.getLeftChar(),c=s.getRightChar();if(c==null)return!1;let d=c.getChecksumPortion(),g=2;for(let w=1;w<this.pairs.size();++w){let S=this.pairs.get(w);d+=S.getLeftChar().getChecksumPortion(),g++;let _=S.getRightChar();_!=null&&(d+=_.getChecksumPortion(),g++)}return d%=211,211*(g-4)+d==o.getValue()}static getNextSecondBar(s,o){let c;return s.get(o)?(c=s.getNextUnset(o),c=s.getNextSet(c)):(c=s.getNextSet(o),c=s.getNextUnset(c)),c}retrieveNextPair(s,o,c){let d=o.length%2==0;this.startFromEven&&(d=!d);let g,p=!0,w=-1;do this.findNextPair(s,o,w),g=this.parseFoundFinderPattern(s,c,d),g==null?w=Ae.getNextSecondBar(s,this.startEnd[0]):p=!1;while(p);let S=this.decodeDataCharacter(s,g,d,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new ie;let _;try{_=this.decodeDataCharacter(s,g,d,!1)}catch(O){_=null,this.verbose&&console.log(O)}return new Os(S,_,g,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,o,c){let d=this.getDecodeFinderCounters();d[0]=0,d[1]=0,d[2]=0,d[3]=0;let g=s.getSize(),p;c>=0?p=c:this.isEmptyPair(o)?p=0:p=o[o.length-1].getFinderPattern().getStartEnd()[1];let w=o.length%2!=0;this.startFromEven&&(w=!w);let S=!1;for(;p<g&&(S=!s.get(p),!!S);)p++;let _=0,O=p;for(let k=p;k<g;k++)if(s.get(k)!=S)d[_]++;else{if(_==3){if(w&&Ae.reverseCounters(d),Ae.isFinderPattern(d)){this.startEnd[0]=O,this.startEnd[1]=k;return}w&&Ae.reverseCounters(d),O+=d[0]+d[1],d[0]=d[2],d[1]=d[3],d[2]=0,d[3]=0,_--}else _++;d[_]=1,S=!S}throw new ie}static reverseCounters(s){let o=s.length;for(let c=0;c<o/2;++c){let d=s[c];s[c]=s[o-c-1],s[o-c-1]=d}}parseFoundFinderPattern(s,o,c){let d,g,p;if(c){let _=this.startEnd[0]-1;for(;_>=0&&!s.get(_);)_--;_++,d=this.startEnd[0]-_,g=_,p=this.startEnd[1]}else g=this.startEnd[0],p=s.getNextUnset(this.startEnd[1]+1),d=p-this.startEnd[1];let w=this.getDecodeFinderCounters();j.arraycopy(w,0,w,1,w.length-1),w[0]=d;let S;try{S=this.parseFinderValue(w,Ae.FINDER_PATTERNS)}catch{return null}return new fl(S,[g,p],g,p,o)}decodeDataCharacter(s,o,c,d){let g=this.getDataCharacterCounters();for(let Xt=0;Xt<g.length;Xt++)g[Xt]=0;if(d)Ae.recordPatternInReverse(s,o.getStartEnd()[0],g);else{Ae.recordPattern(s,o.getStartEnd()[1],g);for(let Xt=0,Xn=g.length-1;Xt<Xn;Xt++,Xn--){let bi=g[Xt];g[Xt]=g[Xn],g[Xn]=bi}}let p=17,w=gt.sum(new Int32Array(g))/p,S=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(w-S)/S>.3)throw new ie;let _=this.getOddCounts(),O=this.getEvenCounts(),k=this.getOddRoundingErrors(),P=this.getEvenRoundingErrors();for(let Xt=0;Xt<g.length;Xt++){let Xn=1*g[Xt]/w,bi=Xn+.5;if(bi<1){if(Xn<.3)throw new ie;bi=1}else if(bi>8){if(Xn>8.7)throw new ie;bi=8}let _r=Xt/2;(Xt&1)==0?(_[_r]=bi,k[_r]=Xn-bi):(O[_r]=bi,P[_r]=Xn-bi)}this.adjustOddEvenCounts(p);let G=4*o.getValue()+(c?0:2)+(d?0:1)-1,Q=0,te=0;for(let Xt=_.length-1;Xt>=0;Xt--){if(Ae.isNotA1left(o,c,d)){let Xn=Ae.WEIGHTS[G][2*Xt];te+=_[Xt]*Xn}Q+=_[Xt]}let ue=0;for(let Xt=O.length-1;Xt>=0;Xt--)if(Ae.isNotA1left(o,c,d)){let Xn=Ae.WEIGHTS[G][2*Xt+1];ue+=O[Xt]*Xn}let pe=te+ue;if((Q&1)!=0||Q>13||Q<4)throw new ie;let Re=(13-Q)/2,De=Ae.SYMBOL_WIDEST[Re],Ne=9-De,dt=Hn.getRSSvalue(_,De,!0),ut=Hn.getRSSvalue(O,Ne,!1),li=Ae.EVEN_TOTAL_SUBSET[Re],Ui=Ae.GSUM[Re],yi=dt*li+ut+Ui;return new vr(yi,pe)}static isNotA1left(s,o,c){return!(s.getValue()==0&&o&&c)}adjustOddEvenCounts(s){let o=gt.sum(new Int32Array(this.getOddCounts())),c=gt.sum(new Int32Array(this.getEvenCounts())),d=!1,g=!1;o>13?g=!0:o<4&&(d=!0);let p=!1,w=!1;c>13?w=!0:c<4&&(p=!0);let S=o+c-s,_=(o&1)==1,O=(c&1)==0;if(S==1)if(_){if(O)throw new ie;g=!0}else{if(!O)throw new ie;w=!0}else if(S==-1)if(_){if(O)throw new ie;d=!0}else{if(!O)throw new ie;p=!0}else if(S==0){if(_){if(!O)throw new ie;o<c?(d=!0,w=!0):(g=!0,p=!0)}else if(O)throw new ie}else throw new ie;if(d){if(g)throw new ie;Ae.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&Ae.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(w)throw new ie;Ae.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Ae.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ae.SYMBOL_WIDEST=[7,5,4,3,1],Ae.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ae.GSUM=[0,348,1388,2948,3988],Ae.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ae.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ae.FINDER_PAT_A=0,Ae.FINDER_PAT_B=1,Ae.FINDER_PAT_C=2,Ae.FINDER_PAT_D=3,Ae.FINDER_PAT_E=4,Ae.FINDER_PAT_F=5,Ae.FINDER_PATTERN_SEQUENCES=[[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_C,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_C],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_E],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F]],Ae.MAX_PAIRS=11;class dl extends vr{constructor(s,o,c){super(s,o),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ft extends jn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,o,c){const d=this.decodePair(o,!1,s,c);Ft.addOrTally(this.possibleLeftPairs,d),o.reverse();let g=this.decodePair(o,!0,s,c);Ft.addOrTally(this.possibleRightPairs,g),o.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let w of this.possibleRightPairs)if(w.getCount()>1&&Ft.checkChecksum(p,w))return Ft.constructResult(p,w)}throw new ie}static addOrTally(s,o){if(o==null)return;let c=!1;for(let d of s)if(d.getValue()===o.getValue()){d.incrementCount(),c=!0;break}c||s.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,o){let c=4537077*s.getValue()+o.getValue(),d=new String(c).toString(),g=new le;for(let _=13-d.length;_>0;_--)g.append("0");g.append(d);let p=0;for(let _=0;_<13;_++){let O=g.charAt(_).charCodeAt(0)-48;p+=(_&1)===0?3*O:O}p=10-p%10,p===10&&(p=0),g.append(p.toString());let w=s.getFinderPattern().getResultPoints(),S=o.getFinderPattern().getResultPoints();return new Oe(g.toString(),null,0,[w[0],w[1],S[0],S[1]],we.RSS_14,new Date().getTime())}static checkChecksum(s,o){let c=(s.getChecksumPortion()+16*o.getChecksumPortion())%79,d=9*s.getFinderPattern().getValue()+o.getFinderPattern().getValue();return d>72&&d--,d>8&&d--,c===d}decodePair(s,o,c,d){try{let g=this.findFinderPattern(s,o),p=this.parseFoundFinderPattern(s,c,o,g),w=d==null?null:d.get(ee.NEED_RESULT_POINT_CALLBACK);if(w!=null){let O=(g[0]+g[1])/2;o&&(O=s.getSize()-1-O),w.foundPossibleResultPoint(new ze(O,c))}let S=this.decodeDataCharacter(s,p,!0),_=this.decodeDataCharacter(s,p,!1);return new dl(1597*S.getValue()+_.getValue(),S.getChecksumPortion()+4*_.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(s,o,c){let d=this.getDataCharacterCounters();for(let ue=0;ue<d.length;ue++)d[ue]=0;if(c)vt.recordPatternInReverse(s,o.getStartEnd()[0],d);else{vt.recordPattern(s,o.getStartEnd()[1]+1,d);for(let ue=0,pe=d.length-1;ue<pe;ue++,pe--){let Re=d[ue];d[ue]=d[pe],d[pe]=Re}}let g=c?16:15,p=gt.sum(new Int32Array(d))/g,w=this.getOddCounts(),S=this.getEvenCounts(),_=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors();for(let ue=0;ue<d.length;ue++){let pe=d[ue]/p,Re=Math.floor(pe+.5);Re<1?Re=1:Re>8&&(Re=8);let De=Math.floor(ue/2);(ue&1)===0?(w[De]=Re,_[De]=pe-Re):(S[De]=Re,O[De]=pe-Re)}this.adjustOddEvenCounts(c,g);let k=0,P=0;for(let ue=w.length-1;ue>=0;ue--)P*=9,P+=w[ue],k+=w[ue];let G=0,Q=0;for(let ue=S.length-1;ue>=0;ue--)G*=9,G+=S[ue],Q+=S[ue];let te=P+3*G;if(c){if((k&1)!==0||k>12||k<4)throw new ie;let ue=(12-k)/2,pe=Ft.OUTSIDE_ODD_WIDEST[ue],Re=9-pe,De=Hn.getRSSvalue(w,pe,!1),Ne=Hn.getRSSvalue(S,Re,!0),dt=Ft.OUTSIDE_EVEN_TOTAL_SUBSET[ue],ut=Ft.OUTSIDE_GSUM[ue];return new vr(De*dt+Ne+ut,te)}else{if((Q&1)!==0||Q>10||Q<4)throw new ie;let ue=(10-Q)/2,pe=Ft.INSIDE_ODD_WIDEST[ue],Re=9-pe,De=Hn.getRSSvalue(w,pe,!0),Ne=Hn.getRSSvalue(S,Re,!1),dt=Ft.INSIDE_ODD_TOTAL_SUBSET[ue],ut=Ft.INSIDE_GSUM[ue];return new vr(Ne*dt+De+ut,te)}}findFinderPattern(s,o){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=s.getSize(),g=!1,p=0;for(;p<d&&(g=!s.get(p),o!==g);)p++;let w=0,S=p;for(let _=p;_<d;_++)if(s.get(_)!==g)c[w]++;else{if(w===3){if(jn.isFinderPattern(c))return[S,_];S+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,g=!g}throw new ie}parseFoundFinderPattern(s,o,c,d){let g=s.get(d[0]),p=d[0]-1;for(;p>=0&&g!==s.get(p);)p--;p++;const w=d[0]-p,S=this.getDecodeFinderCounters(),_=new Int32Array(S.length);j.arraycopy(S,0,_,1,S.length-1),_[0]=w;const O=this.parseFinderValue(_,Ft.FINDER_PATTERNS);let k=p,P=d[1];return c&&(k=s.getSize()-1-k,P=s.getSize()-1-P),new fl(O,[p,d[1]],k,P,o)}adjustOddEvenCounts(s,o){let c=gt.sum(new Int32Array(this.getOddCounts())),d=gt.sum(new Int32Array(this.getEvenCounts())),g=!1,p=!1,w=!1,S=!1;s?(c>12?p=!0:c<4&&(g=!0),d>12?S=!0:d<4&&(w=!0)):(c>11?p=!0:c<5&&(g=!0),d>10?S=!0:d<4&&(w=!0));let _=c+d-o,O=(c&1)===(s?1:0),k=(d&1)===1;if(_===1)if(O){if(k)throw new ie;p=!0}else{if(!k)throw new ie;S=!0}else if(_===-1)if(O){if(k)throw new ie;g=!0}else{if(!k)throw new ie;w=!0}else if(_===0){if(O){if(!k)throw new ie;c<d?(g=!0,S=!0):(p=!0,w=!0)}else if(k)throw new ie}else throw new ie;if(g){if(p)throw new ie;jn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&jn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),w){if(S)throw new ie;jn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}S&&jn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ft.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ft.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ft.OUTSIDE_GSUM=[0,161,961,2015,2715],Ft.INSIDE_GSUM=[0,336,1036,1516],Ft.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ft.INSIDE_ODD_WIDEST=[2,4,6,8],Ft.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Xs extends vt{constructor(s,o){super(),this.readers=[],this.verbose=o===!0;const c=s?s.get(ee.POSSIBLE_FORMATS):null,d=s&&s.get(ee.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(we.EAN_13)||c.includes(we.UPC_A)||c.includes(we.EAN_8)||c.includes(we.UPC_E))&&this.readers.push(new fo(s)),c.includes(we.CODE_39)&&this.readers.push(new Dt(d)),c.includes(we.CODE_128)&&this.readers.push(new Me),c.includes(we.ITF)&&this.readers.push(new Tt),c.includes(we.RSS_14)&&this.readers.push(new Ft),c.includes(we.RSS_EXPANDED)&&this.readers.push(new Ae(this.verbose))):(this.readers.push(new fo(s)),this.readers.push(new Dt),this.readers.push(new fo(s)),this.readers.push(new Me),this.readers.push(new Tt),this.readers.push(new Ft),this.readers.push(new Ae(this.verbose)))}decodeRow(s,o,c){for(let d=0;d<this.readers.length;d++)try{return this.readers[d].decodeRow(s,o,c)}catch{}throw new ie}reset(){this.readers.forEach(s=>s.reset())}}class Bf extends oe{constructor(s=500,o){super(new Xs(o),s,o)}}class _t{constructor(s,o,c){this.ecCodewords=s,this.ecBlocks=[o],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Lt{constructor(s,o){this.count=s,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Et{constructor(s,o,c,d,g,p){this.versionNumber=s,this.symbolSizeRows=o,this.symbolSizeColumns=c,this.dataRegionSizeRows=d,this.dataRegionSizeColumns=g,this.ecBlocks=p;let w=0;const S=p.getECCodewords(),_=p.getECBlocks();for(let O of _)w+=O.getCount()*(O.getDataCodewords()+S);this.totalCodewords=w}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,o){if((s&1)!==0||(o&1)!==0)throw new X;for(let c of Et.VERSIONS)if(c.symbolSizeRows===s&&c.symbolSizeColumns===o)return c;throw new X}toString(){return""+this.versionNumber}static buildVersions(){return[new Et(1,10,10,8,8,new _t(5,new Lt(1,3))),new Et(2,12,12,10,10,new _t(7,new Lt(1,5))),new Et(3,14,14,12,12,new _t(10,new Lt(1,8))),new Et(4,16,16,14,14,new _t(12,new Lt(1,12))),new Et(5,18,18,16,16,new _t(14,new Lt(1,18))),new Et(6,20,20,18,18,new _t(18,new Lt(1,22))),new Et(7,22,22,20,20,new _t(20,new Lt(1,30))),new Et(8,24,24,22,22,new _t(24,new Lt(1,36))),new Et(9,26,26,24,24,new _t(28,new Lt(1,44))),new Et(10,32,32,14,14,new _t(36,new Lt(1,62))),new Et(11,36,36,16,16,new _t(42,new Lt(1,86))),new Et(12,40,40,18,18,new _t(48,new Lt(1,114))),new Et(13,44,44,20,20,new _t(56,new Lt(1,144))),new Et(14,48,48,22,22,new _t(68,new Lt(1,174))),new Et(15,52,52,24,24,new _t(42,new Lt(2,102))),new Et(16,64,64,14,14,new _t(56,new Lt(2,140))),new Et(17,72,72,16,16,new _t(36,new Lt(4,92))),new Et(18,80,80,18,18,new _t(48,new Lt(4,114))),new Et(19,88,88,20,20,new _t(56,new Lt(4,144))),new Et(20,96,96,22,22,new _t(68,new Lt(4,174))),new Et(21,104,104,24,24,new _t(56,new Lt(6,136))),new Et(22,120,120,18,18,new _t(68,new Lt(6,175))),new Et(23,132,132,20,20,new _t(62,new Lt(8,163))),new Et(24,144,144,22,22,new _t(62,new Lt(8,156),new Lt(2,155))),new Et(25,8,18,6,16,new _t(7,new Lt(1,5))),new Et(26,8,32,6,14,new _t(11,new Lt(1,10))),new Et(27,12,26,10,24,new _t(14,new Lt(1,16))),new Et(28,12,36,10,16,new _t(18,new Lt(1,22))),new Et(29,16,36,14,16,new _t(24,new Lt(1,32))),new Et(30,16,48,14,22,new _t(28,new Lt(1,49)))]}}Et.VERSIONS=Et.buildVersions();class Fc{constructor(s){const o=s.getHeight();if(o<8||o>144||(o&1)!==0)throw new X;this.version=Fc.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new ke(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const o=s.getHeight(),c=s.getWidth();return Et.getVersionForDimensions(o,c)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let o=0,c=4,d=0;const g=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let w=!1,S=!1,_=!1,O=!1;do if(c===g&&d===0&&!w)s[o++]=this.readCorner1(g,p)&255,c-=2,d+=2,w=!0;else if(c===g-2&&d===0&&(p&3)!==0&&!S)s[o++]=this.readCorner2(g,p)&255,c-=2,d+=2,S=!0;else if(c===g+4&&d===2&&(p&7)===0&&!_)s[o++]=this.readCorner3(g,p)&255,c-=2,d+=2,_=!0;else if(c===g-2&&d===0&&(p&7)===4&&!O)s[o++]=this.readCorner4(g,p)&255,c-=2,d+=2,O=!0;else{do c<g&&d>=0&&!this.readMappingMatrix.get(d,c)&&(s[o++]=this.readUtah(c,d,g,p)&255),c-=2,d+=2;while(c>=0&&d<p);c+=1,d+=3;do c>=0&&d<p&&!this.readMappingMatrix.get(d,c)&&(s[o++]=this.readUtah(c,d,g,p)&255),c+=2,d-=2;while(c<g&&d>=0);c+=3,d+=1}while(c<g||d<p);if(o!==this.version.getTotalCodewords())throw new X;return s}readModule(s,o,c,d){return s<0&&(s+=c,o+=4-(c+4&7)),o<0&&(o+=d,s+=4-(d+4&7)),this.readMappingMatrix.set(o,s),this.mappingBitMatrix.get(o,s)}readUtah(s,o,c,d){let g=0;return this.readModule(s-2,o-2,c,d)&&(g|=1),g<<=1,this.readModule(s-2,o-1,c,d)&&(g|=1),g<<=1,this.readModule(s-1,o-2,c,d)&&(g|=1),g<<=1,this.readModule(s-1,o-1,c,d)&&(g|=1),g<<=1,this.readModule(s-1,o,c,d)&&(g|=1),g<<=1,this.readModule(s,o-2,c,d)&&(g|=1),g<<=1,this.readModule(s,o-1,c,d)&&(g|=1),g<<=1,this.readModule(s,o,c,d)&&(g|=1),g}readCorner1(s,o){let c=0;return this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,1,s,o)&&(c|=1),c<<=1,this.readModule(s-1,2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c<<=1,this.readModule(2,o-1,s,o)&&(c|=1),c<<=1,this.readModule(3,o-1,s,o)&&(c|=1),c}readCorner2(s,o){let c=0;return this.readModule(s-3,0,s,o)&&(c|=1),c<<=1,this.readModule(s-2,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(0,o-4,s,o)&&(c|=1),c<<=1,this.readModule(0,o-3,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c}readCorner3(s,o){let c=0;return this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,o-1,s,o)&&(c|=1),c<<=1,this.readModule(0,o-3,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-3,s,o)&&(c|=1),c<<=1,this.readModule(1,o-2,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c}readCorner4(s,o){let c=0;return this.readModule(s-3,0,s,o)&&(c|=1),c<<=1,this.readModule(s-2,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c<<=1,this.readModule(2,o-1,s,o)&&(c|=1),c<<=1,this.readModule(3,o-1,s,o)&&(c|=1),c}extractDataRegion(s){const o=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(s.getHeight()!==o)throw new A("Dimension of bitMatrix must match the version size");const d=this.version.getDataRegionSizeRows(),g=this.version.getDataRegionSizeColumns(),p=o/d|0,w=c/g|0,S=p*d,_=w*g,O=new ke(_,S);for(let k=0;k<p;++k){const P=k*d;for(let G=0;G<w;++G){const Q=G*g;for(let te=0;te<d;++te){const ue=k*(d+2)+1+te,pe=P+te;for(let Re=0;Re<g;++Re){const De=G*(g+2)+1+Re;if(s.get(De,ue)){const Ne=Q+Re;O.set(Ne,pe)}}}}}return O}}class hl{constructor(s,o){this.numDataCodewords=s,this.codewords=o}static getDataBlocks(s,o){const c=o.getECBlocks();let d=0;const g=c.getECBlocks();for(let te of g)d+=te.getCount();const p=new Array(d);let w=0;for(let te of g)for(let ue=0;ue<te.getCount();ue++){const pe=te.getDataCodewords(),Re=c.getECCodewords()+pe;p[w++]=new hl(pe,new Uint8Array(Re))}const _=p[0].codewords.length-c.getECCodewords(),O=_-1;let k=0;for(let te=0;te<O;te++)for(let ue=0;ue<w;ue++)p[ue].codewords[te]=s[k++];const P=o.getVersionNumber()===24,G=P?8:w;for(let te=0;te<G;te++)p[te].codewords[_-1]=s[k++];const Q=p[0].codewords.length;for(let te=_;te<Q;te++)for(let ue=0;ue<w;ue++){const pe=P?(ue+8)%w:ue,Re=P&&pe>7?te-1:te;p[pe].codewords[Re]=s[k++]}if(k!==s.length)throw new A;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class mi{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new A(""+s);let o=0,c=this.bitOffset,d=this.byteOffset;const g=this.bytes;if(c>0){const p=8-c,w=s<p?s:p,S=p-w,_=255>>8-w<<S;o=(g[d]&_)>>S,s-=w,c+=w,c===8&&(c=0,d++)}if(s>0){for(;s>=8;)o=o<<8|g[d]&255,d++,s-=8;if(s>0){const p=8-s,w=255>>p<<p;o=o<<s|(g[d]&w)>>p,c+=s}}return this.bitOffset=c,this.byteOffset=d,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var En;(function(L){L[L.PAD_ENCODE=0]="PAD_ENCODE",L[L.ASCII_ENCODE=1]="ASCII_ENCODE",L[L.C40_ENCODE=2]="C40_ENCODE",L[L.TEXT_ENCODE=3]="TEXT_ENCODE",L[L.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",L[L.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",L[L.BASE256_ENCODE=6]="BASE256_ENCODE"})(En||(En={}));class Ws{static decode(s){const o=new mi(s),c=new le,d=new le,g=new Array;let p=En.ASCII_ENCODE;do if(p===En.ASCII_ENCODE)p=this.decodeAsciiSegment(o,c,d);else{switch(p){case En.C40_ENCODE:this.decodeC40Segment(o,c);break;case En.TEXT_ENCODE:this.decodeTextSegment(o,c);break;case En.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,c);break;case En.EDIFACT_ENCODE:this.decodeEdifactSegment(o,c);break;case En.BASE256_ENCODE:this.decodeBase256Segment(o,c,g);break;default:throw new X}p=En.ASCII_ENCODE}while(p!==En.PAD_ENCODE&&o.available()>0);return d.length()>0&&c.append(d.toString()),new It(s,c.toString(),g.length===0?null:g,null)}static decodeAsciiSegment(s,o,c){let d=!1;do{let g=s.readBits(8);if(g===0)throw new X;if(g<=128)return d&&(g+=128),o.append(String.fromCharCode(g-1)),En.ASCII_ENCODE;if(g===129)return En.PAD_ENCODE;if(g<=229){const p=g-130;p<10&&o.append("0"),o.append(""+p)}else switch(g){case 230:return En.C40_ENCODE;case 231:return En.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:d=!0;break;case 236:o.append("[)>05"),c.insert(0,"");break;case 237:o.append("[)>06"),c.insert(0,"");break;case 238:return En.ANSIX12_ENCODE;case 239:return En.TEXT_ENCODE;case 240:return En.EDIFACT_ENCODE;case 241:break;default:if(g!==254||s.available()!==0)throw new X;break}}while(s.available()>0);return En.ASCII_ENCODE}static decodeC40Segment(s,o){let c=!1;const d=[];let g=0;do{if(s.available()===8)return;const p=s.readBits(8);if(p===254)return;this.parseTwoBytes(p,s.readBits(8),d);for(let w=0;w<3;w++){const S=d[w];switch(g){case 0:if(S<3)g=S+1;else if(S<this.C40_BASIC_SET_CHARS.length){const _=this.C40_BASIC_SET_CHARS[S];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_)}else throw new X;break;case 1:c?(o.append(String.fromCharCode(S+128)),c=!1):o.append(String.fromCharCode(S)),g=0;break;case 2:if(S<this.C40_SHIFT2_SET_CHARS.length){const _=this.C40_SHIFT2_SET_CHARS[S];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_)}else switch(S){case 27:o.append("");break;case 30:c=!0;break;default:throw new X}g=0;break;case 3:c?(o.append(String.fromCharCode(S+224)),c=!1):o.append(String.fromCharCode(S+96)),g=0;break;default:throw new X}}}while(s.available()>0)}static decodeTextSegment(s,o){let c=!1,d=[],g=0;do{if(s.available()===8)return;const p=s.readBits(8);if(p===254)return;this.parseTwoBytes(p,s.readBits(8),d);for(let w=0;w<3;w++){const S=d[w];switch(g){case 0:if(S<3)g=S+1;else if(S<this.TEXT_BASIC_SET_CHARS.length){const _=this.TEXT_BASIC_SET_CHARS[S];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_)}else throw new X;break;case 1:c?(o.append(String.fromCharCode(S+128)),c=!1):o.append(String.fromCharCode(S)),g=0;break;case 2:if(S<this.TEXT_SHIFT2_SET_CHARS.length){const _=this.TEXT_SHIFT2_SET_CHARS[S];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_)}else switch(S){case 27:o.append("");break;case 30:c=!0;break;default:throw new X}g=0;break;case 3:if(S<this.TEXT_SHIFT3_SET_CHARS.length){const _=this.TEXT_SHIFT3_SET_CHARS[S];c?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):o.append(_),g=0}else throw new X;break;default:throw new X}}}while(s.available()>0)}static decodeAnsiX12Segment(s,o){const c=[];do{if(s.available()===8)return;const d=s.readBits(8);if(d===254)return;this.parseTwoBytes(d,s.readBits(8),c);for(let g=0;g<3;g++){const p=c[g];switch(p){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(p<14)o.append(String.fromCharCode(p+44));else if(p<40)o.append(String.fromCharCode(p+51));else throw new X;break}}}while(s.available()>0)}static parseTwoBytes(s,o,c){let d=(s<<8)+o-1,g=Math.floor(d/1600);c[0]=g,d-=g*1600,g=Math.floor(d/40),c[1]=g,c[2]=d-g*40}static decodeEdifactSegment(s,o){do{if(s.available()<=16)return;for(let c=0;c<4;c++){let d=s.readBits(6);if(d===31){const g=8-s.getBitOffset();g!==8&&s.readBits(g);return}(d&32)===0&&(d|=64),o.append(String.fromCharCode(d))}}while(s.available()>0)}static decodeBase256Segment(s,o,c){let d=1+s.getByteOffset();const g=this.unrandomize255State(s.readBits(8),d++);let p;if(g===0?p=s.available()/8|0:g<250?p=g:p=250*(g-249)+this.unrandomize255State(s.readBits(8),d++),p<0)throw new X;const w=new Uint8Array(p);for(let S=0;S<p;S++){if(s.available()<8)throw new X;w[S]=this.unrandomize255State(s.readBits(8),d++)}c.push(w);try{o.append(Te.decode(w,ve.ISO88591))}catch(S){throw new Ke("Platform does not support required encoding: "+S.message)}}static unrandomize255State(s,o){const c=149*o%255+1,d=s-c;return d>=0?d:d+256}}Ws.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ws.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ws.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ws.TEXT_SHIFT2_SET_CHARS=Ws.C40_SHIFT2_SET_CHARS,Ws.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class gl{constructor(){this.rsDecoder=new pt(je.DATA_MATRIX_FIELD_256)}decode(s){const o=new Fc(s),c=o.getVersion(),d=o.readCodewords(),g=hl.getDataBlocks(d,c);let p=0;for(let _ of g)p+=_.getNumDataCodewords();const w=new Uint8Array(p),S=g.length;for(let _=0;_<S;_++){const O=g[_],k=O.getCodewords(),P=O.getNumDataCodewords();this.correctErrors(k,P);for(let G=0;G<P;G++)w[G*S+_]=k[G]}return Ws.decode(w)}correctErrors(s,o){const c=new Int32Array(s);try{this.rsDecoder.decode(c,s.length-o)}catch{throw new I}for(let d=0;d<o;d++)s[d]=c[d]}}class fn{constructor(s){this.image=s,this.rectangleDetector=new Li(this.image)}detect(){const s=this.rectangleDetector.detect();let o=this.detectSolid1(s);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new ie;o=this.shiftToModuleCenter(o);const c=o[0],d=o[1],g=o[2],p=o[3];let w=this.transitionsBetween(c,p)+1,S=this.transitionsBetween(g,p)+1;(w&1)===1&&(w+=1),(S&1)===1&&(S+=1),4*w<7*S&&4*S<7*w&&(w=S=Math.max(w,S));let _=fn.sampleGrid(this.image,c,d,g,p,w,S);return new wr(_,[c,d,g,p])}static shiftPoint(s,o,c){let d=(o.getX()-s.getX())/(c+1),g=(o.getY()-s.getY())/(c+1);return new ze(s.getX()+d,s.getY()+g)}static moveAway(s,o,c){let d=s.getX(),g=s.getY();return d<o?d-=1:d+=1,g<c?g-=1:g+=1,new ze(d,g)}detectSolid1(s){let o=s[0],c=s[1],d=s[3],g=s[2],p=this.transitionsBetween(o,c),w=this.transitionsBetween(c,d),S=this.transitionsBetween(d,g),_=this.transitionsBetween(g,o),O=p,k=[g,o,c,d];return O>w&&(O=w,k[0]=o,k[1]=c,k[2]=d,k[3]=g),O>S&&(O=S,k[0]=c,k[1]=d,k[2]=g,k[3]=o),O>_&&(k[0]=d,k[1]=g,k[2]=o,k[3]=c),k}detectSolid2(s){let o=s[0],c=s[1],d=s[2],g=s[3],p=this.transitionsBetween(o,g),w=fn.shiftPoint(c,d,(p+1)*4),S=fn.shiftPoint(d,c,(p+1)*4),_=this.transitionsBetween(w,o),O=this.transitionsBetween(S,g);return _<O?(s[0]=o,s[1]=c,s[2]=d,s[3]=g):(s[0]=c,s[1]=d,s[2]=g,s[3]=o),s}correctTopRight(s){let o=s[0],c=s[1],d=s[2],g=s[3],p=this.transitionsBetween(o,g),w=this.transitionsBetween(c,g),S=fn.shiftPoint(o,c,(w+1)*4),_=fn.shiftPoint(d,c,(p+1)*4);p=this.transitionsBetween(S,g),w=this.transitionsBetween(_,g);let O=new ze(g.getX()+(d.getX()-c.getX())/(p+1),g.getY()+(d.getY()-c.getY())/(p+1)),k=new ze(g.getX()+(o.getX()-c.getX())/(w+1),g.getY()+(o.getY()-c.getY())/(w+1));if(!this.isValid(O))return this.isValid(k)?k:null;if(!this.isValid(k))return O;let P=this.transitionsBetween(S,O)+this.transitionsBetween(_,O),G=this.transitionsBetween(S,k)+this.transitionsBetween(_,k);return P>G?O:k}shiftToModuleCenter(s){let o=s[0],c=s[1],d=s[2],g=s[3],p=this.transitionsBetween(o,g)+1,w=this.transitionsBetween(d,g)+1,S=fn.shiftPoint(o,c,w*4),_=fn.shiftPoint(d,c,p*4);p=this.transitionsBetween(S,g)+1,w=this.transitionsBetween(_,g)+1,(p&1)===1&&(p+=1),(w&1)===1&&(w+=1);let O=(o.getX()+c.getX()+d.getX()+g.getX())/4,k=(o.getY()+c.getY()+d.getY()+g.getY())/4;o=fn.moveAway(o,O,k),c=fn.moveAway(c,O,k),d=fn.moveAway(d,O,k),g=fn.moveAway(g,O,k);let P,G;return S=fn.shiftPoint(o,c,w*4),S=fn.shiftPoint(S,g,p*4),P=fn.shiftPoint(c,o,w*4),P=fn.shiftPoint(P,d,p*4),_=fn.shiftPoint(d,g,w*4),_=fn.shiftPoint(_,c,p*4),G=fn.shiftPoint(g,d,w*4),G=fn.shiftPoint(G,o,p*4),[S,P,_,G]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,o,c,d,g,p,w){return nt.getInstance().sampleGrid(s,p,w,.5,.5,p-.5,.5,p-.5,w-.5,.5,w-.5,o.getX(),o.getY(),g.getX(),g.getY(),d.getX(),d.getY(),c.getX(),c.getY())}transitionsBetween(s,o){let c=Math.trunc(s.getX()),d=Math.trunc(s.getY()),g=Math.trunc(o.getX()),p=Math.trunc(o.getY()),w=Math.abs(p-d)>Math.abs(g-c);if(w){let te=c;c=d,d=te,te=g,g=p,p=te}let S=Math.abs(g-c),_=Math.abs(p-d),O=-S/2,k=d<p?1:-1,P=c<g?1:-1,G=0,Q=this.image.get(w?d:c,w?c:d);for(let te=c,ue=d;te!==g;te+=P){let pe=this.image.get(w?ue:te,w?te:ue);if(pe!==Q&&(G++,Q=pe),O+=_,O>0){if(ue===p)break;ue+=k,O-=S}}return G}}class Zi{constructor(){this.decoder=new gl}decode(s,o=null){let c,d;if(o!=null&&o.has(ee.PURE_BARCODE)){const _=Zi.extractPureBits(s.getBlackMatrix());c=this.decoder.decode(_),d=Zi.NO_POINTS}else{const _=new fn(s.getBlackMatrix()).detect();c=this.decoder.decode(_.getBits()),d=_.getPoints()}const g=c.getRawBytes(),p=new Oe(c.getText(),g,8*g.length,d,we.DATA_MATRIX,j.currentTimeMillis()),w=c.getByteSegments();w!=null&&p.putMetadata(Ge.BYTE_SEGMENTS,w);const S=c.getECLevel();return S!=null&&p.putMetadata(Ge.ERROR_CORRECTION_LEVEL,S),p}reset(){}static extractPureBits(s){const o=s.getTopLeftOnBit(),c=s.getBottomRightOnBit();if(o==null||c==null)throw new ie;const d=this.moduleSize(o,s);let g=o[1];const p=c[1];let w=o[0];const _=(c[0]-w+1)/d,O=(p-g+1)/d;if(_<=0||O<=0)throw new ie;const k=d/2;g+=k,w+=k;const P=new ke(_,O);for(let G=0;G<O;G++){const Q=g+G*d;for(let te=0;te<_;te++)s.get(w+te*d,Q)&&P.set(te,G)}return P}static moduleSize(s,o){const c=o.getWidth();let d=s[0];const g=s[1];for(;d<c&&o.get(d,g);)d++;if(d===c)throw new ie;const p=d-s[0];if(p===0)throw new ie;return p}}Zi.NO_POINTS=[];class e0 extends oe{constructor(s=500){super(new Zi,s)}}var $n;(function(L){L[L.L=0]="L",L[L.M=1]="M",L[L.Q=2]="Q",L[L.H=3]="H"})($n||($n={}));class Ht{constructor(s,o,c){this.value=s,this.stringValue=o,this.bits=c,Ht.FOR_BITS.set(c,this),Ht.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return Ht.L;case"M":return Ht.M;case"Q":return Ht.Q;case"H":return Ht.H;default:throw new E(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof Ht))return!1;const o=s;return this.value===o.value}static forBits(s){if(s<0||s>=Ht.FOR_BITS.size)throw new A;return Ht.FOR_BITS.get(s)}}Ht.FOR_BITS=new Map,Ht.FOR_VALUE=new Map,Ht.L=new Ht($n.L,"L",1),Ht.M=new Ht($n.M,"M",0),Ht.Q=new Ht($n.Q,"Q",3),Ht.H=new Ht($n.H,"H",2);class Gn{constructor(s){this.errorCorrectionLevel=Ht.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,o){return B.bitCount(s^o)}static decodeFormatInformation(s,o){const c=Gn.doDecodeFormatInformation(s,o);return c!==null?c:Gn.doDecodeFormatInformation(s^Gn.FORMAT_INFO_MASK_QR,o^Gn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,o){let c=Number.MAX_SAFE_INTEGER,d=0;for(const g of Gn.FORMAT_INFO_DECODE_LOOKUP){const p=g[0];if(p===s||p===o)return new Gn(g[1]);let w=Gn.numBitsDiffering(s,p);w<c&&(d=g[1],c=w),s!==o&&(w=Gn.numBitsDiffering(o,p),w<c&&(d=g[1],c=w))}return c<=3?new Gn(d):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof Gn))return!1;const o=s;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Gn.FORMAT_INFO_MASK_QR=21522,Gn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class de{constructor(s,...o){this.ecCodewordsPerBlock=s,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const o=this.ecBlocks;for(const c of o)s+=c.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class H{constructor(s,o){this.count=s,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ye{constructor(s,o,...c){this.versionNumber=s,this.alignmentPatternCenters=o,this.ecBlocks=c;let d=0;const g=c[0].getECCodewordsPerBlock(),p=c[0].getECBlocks();for(const w of p)d+=w.getCount()*(w.getDataCodewords()+g);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new X;try{return this.getVersionForNumber((s-17)/4)}catch{throw new X}}static getVersionForNumber(s){if(s<1||s>40)throw new A;return Ye.VERSIONS[s-1]}static decodeVersionInformation(s){let o=Number.MAX_SAFE_INTEGER,c=0;for(let d=0;d<Ye.VERSION_DECODE_INFO.length;d++){const g=Ye.VERSION_DECODE_INFO[d];if(g===s)return Ye.getVersionForNumber(d+7);const p=Gn.numBitsDiffering(s,g);p<o&&(c=d+7,o=p)}return o<=3?Ye.getVersionForNumber(c):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),o=new ke(s);o.setRegion(0,0,9,9),o.setRegion(s-8,0,8,9),o.setRegion(0,s-8,9,8);const c=this.alignmentPatternCenters.length;for(let d=0;d<c;d++){const g=this.alignmentPatternCenters[d]-2;for(let p=0;p<c;p++)d===0&&(p===0||p===c-1)||d===c-1&&p===0||o.setRegion(this.alignmentPatternCenters[p]-2,g,5,5)}return o.setRegion(6,9,1,s-17),o.setRegion(9,6,s-17,1),this.versionNumber>6&&(o.setRegion(s-11,0,3,6),o.setRegion(0,s-11,6,3)),o}toString(){return""+this.versionNumber}}Ye.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ye.VERSIONS=[new Ye(1,new Int32Array(0),new de(7,new H(1,19)),new de(10,new H(1,16)),new de(13,new H(1,13)),new de(17,new H(1,9))),new Ye(2,Int32Array.from([6,18]),new de(10,new H(1,34)),new de(16,new H(1,28)),new de(22,new H(1,22)),new de(28,new H(1,16))),new Ye(3,Int32Array.from([6,22]),new de(15,new H(1,55)),new de(26,new H(1,44)),new de(18,new H(2,17)),new de(22,new H(2,13))),new Ye(4,Int32Array.from([6,26]),new de(20,new H(1,80)),new de(18,new H(2,32)),new de(26,new H(2,24)),new de(16,new H(4,9))),new Ye(5,Int32Array.from([6,30]),new de(26,new H(1,108)),new de(24,new H(2,43)),new de(18,new H(2,15),new H(2,16)),new de(22,new H(2,11),new H(2,12))),new Ye(6,Int32Array.from([6,34]),new de(18,new H(2,68)),new de(16,new H(4,27)),new de(24,new H(4,19)),new de(28,new H(4,15))),new Ye(7,Int32Array.from([6,22,38]),new de(20,new H(2,78)),new de(18,new H(4,31)),new de(18,new H(2,14),new H(4,15)),new de(26,new H(4,13),new H(1,14))),new Ye(8,Int32Array.from([6,24,42]),new de(24,new H(2,97)),new de(22,new H(2,38),new H(2,39)),new de(22,new H(4,18),new H(2,19)),new de(26,new H(4,14),new H(2,15))),new Ye(9,Int32Array.from([6,26,46]),new de(30,new H(2,116)),new de(22,new H(3,36),new H(2,37)),new de(20,new H(4,16),new H(4,17)),new de(24,new H(4,12),new H(4,13))),new Ye(10,Int32Array.from([6,28,50]),new de(18,new H(2,68),new H(2,69)),new de(26,new H(4,43),new H(1,44)),new de(24,new H(6,19),new H(2,20)),new de(28,new H(6,15),new H(2,16))),new Ye(11,Int32Array.from([6,30,54]),new de(20,new H(4,81)),new de(30,new H(1,50),new H(4,51)),new de(28,new H(4,22),new H(4,23)),new de(24,new H(3,12),new H(8,13))),new Ye(12,Int32Array.from([6,32,58]),new de(24,new H(2,92),new H(2,93)),new de(22,new H(6,36),new H(2,37)),new de(26,new H(4,20),new H(6,21)),new de(28,new H(7,14),new H(4,15))),new Ye(13,Int32Array.from([6,34,62]),new de(26,new H(4,107)),new de(22,new H(8,37),new H(1,38)),new de(24,new H(8,20),new H(4,21)),new de(22,new H(12,11),new H(4,12))),new Ye(14,Int32Array.from([6,26,46,66]),new de(30,new H(3,115),new H(1,116)),new de(24,new H(4,40),new H(5,41)),new de(20,new H(11,16),new H(5,17)),new de(24,new H(11,12),new H(5,13))),new Ye(15,Int32Array.from([6,26,48,70]),new de(22,new H(5,87),new H(1,88)),new de(24,new H(5,41),new H(5,42)),new de(30,new H(5,24),new H(7,25)),new de(24,new H(11,12),new H(7,13))),new Ye(16,Int32Array.from([6,26,50,74]),new de(24,new H(5,98),new H(1,99)),new de(28,new H(7,45),new H(3,46)),new de(24,new H(15,19),new H(2,20)),new de(30,new H(3,15),new H(13,16))),new Ye(17,Int32Array.from([6,30,54,78]),new de(28,new H(1,107),new H(5,108)),new de(28,new H(10,46),new H(1,47)),new de(28,new H(1,22),new H(15,23)),new de(28,new H(2,14),new H(17,15))),new Ye(18,Int32Array.from([6,30,56,82]),new de(30,new H(5,120),new H(1,121)),new de(26,new H(9,43),new H(4,44)),new de(28,new H(17,22),new H(1,23)),new de(28,new H(2,14),new H(19,15))),new Ye(19,Int32Array.from([6,30,58,86]),new de(28,new H(3,113),new H(4,114)),new de(26,new H(3,44),new H(11,45)),new de(26,new H(17,21),new H(4,22)),new de(26,new H(9,13),new H(16,14))),new Ye(20,Int32Array.from([6,34,62,90]),new de(28,new H(3,107),new H(5,108)),new de(26,new H(3,41),new H(13,42)),new de(30,new H(15,24),new H(5,25)),new de(28,new H(15,15),new H(10,16))),new Ye(21,Int32Array.from([6,28,50,72,94]),new de(28,new H(4,116),new H(4,117)),new de(26,new H(17,42)),new de(28,new H(17,22),new H(6,23)),new de(30,new H(19,16),new H(6,17))),new Ye(22,Int32Array.from([6,26,50,74,98]),new de(28,new H(2,111),new H(7,112)),new de(28,new H(17,46)),new de(30,new H(7,24),new H(16,25)),new de(24,new H(34,13))),new Ye(23,Int32Array.from([6,30,54,78,102]),new de(30,new H(4,121),new H(5,122)),new de(28,new H(4,47),new H(14,48)),new de(30,new H(11,24),new H(14,25)),new de(30,new H(16,15),new H(14,16))),new Ye(24,Int32Array.from([6,28,54,80,106]),new de(30,new H(6,117),new H(4,118)),new de(28,new H(6,45),new H(14,46)),new de(30,new H(11,24),new H(16,25)),new de(30,new H(30,16),new H(2,17))),new Ye(25,Int32Array.from([6,32,58,84,110]),new de(26,new H(8,106),new H(4,107)),new de(28,new H(8,47),new H(13,48)),new de(30,new H(7,24),new H(22,25)),new de(30,new H(22,15),new H(13,16))),new Ye(26,Int32Array.from([6,30,58,86,114]),new de(28,new H(10,114),new H(2,115)),new de(28,new H(19,46),new H(4,47)),new de(28,new H(28,22),new H(6,23)),new de(30,new H(33,16),new H(4,17))),new Ye(27,Int32Array.from([6,34,62,90,118]),new de(30,new H(8,122),new H(4,123)),new de(28,new H(22,45),new H(3,46)),new de(30,new H(8,23),new H(26,24)),new de(30,new H(12,15),new H(28,16))),new Ye(28,Int32Array.from([6,26,50,74,98,122]),new de(30,new H(3,117),new H(10,118)),new de(28,new H(3,45),new H(23,46)),new de(30,new H(4,24),new H(31,25)),new de(30,new H(11,15),new H(31,16))),new Ye(29,Int32Array.from([6,30,54,78,102,126]),new de(30,new H(7,116),new H(7,117)),new de(28,new H(21,45),new H(7,46)),new de(30,new H(1,23),new H(37,24)),new de(30,new H(19,15),new H(26,16))),new Ye(30,Int32Array.from([6,26,52,78,104,130]),new de(30,new H(5,115),new H(10,116)),new de(28,new H(19,47),new H(10,48)),new de(30,new H(15,24),new H(25,25)),new de(30,new H(23,15),new H(25,16))),new Ye(31,Int32Array.from([6,30,56,82,108,134]),new de(30,new H(13,115),new H(3,116)),new de(28,new H(2,46),new H(29,47)),new de(30,new H(42,24),new H(1,25)),new de(30,new H(23,15),new H(28,16))),new Ye(32,Int32Array.from([6,34,60,86,112,138]),new de(30,new H(17,115)),new de(28,new H(10,46),new H(23,47)),new de(30,new H(10,24),new H(35,25)),new de(30,new H(19,15),new H(35,16))),new Ye(33,Int32Array.from([6,30,58,86,114,142]),new de(30,new H(17,115),new H(1,116)),new de(28,new H(14,46),new H(21,47)),new de(30,new H(29,24),new H(19,25)),new de(30,new H(11,15),new H(46,16))),new Ye(34,Int32Array.from([6,34,62,90,118,146]),new de(30,new H(13,115),new H(6,116)),new de(28,new H(14,46),new H(23,47)),new de(30,new H(44,24),new H(7,25)),new de(30,new H(59,16),new H(1,17))),new Ye(35,Int32Array.from([6,30,54,78,102,126,150]),new de(30,new H(12,121),new H(7,122)),new de(28,new H(12,47),new H(26,48)),new de(30,new H(39,24),new H(14,25)),new de(30,new H(22,15),new H(41,16))),new Ye(36,Int32Array.from([6,24,50,76,102,128,154]),new de(30,new H(6,121),new H(14,122)),new de(28,new H(6,47),new H(34,48)),new de(30,new H(46,24),new H(10,25)),new de(30,new H(2,15),new H(64,16))),new Ye(37,Int32Array.from([6,28,54,80,106,132,158]),new de(30,new H(17,122),new H(4,123)),new de(28,new H(29,46),new H(14,47)),new de(30,new H(49,24),new H(10,25)),new de(30,new H(24,15),new H(46,16))),new Ye(38,Int32Array.from([6,32,58,84,110,136,162]),new de(30,new H(4,122),new H(18,123)),new de(28,new H(13,46),new H(32,47)),new de(30,new H(48,24),new H(14,25)),new de(30,new H(42,15),new H(32,16))),new Ye(39,Int32Array.from([6,26,54,82,110,138,166]),new de(30,new H(20,117),new H(4,118)),new de(28,new H(40,47),new H(7,48)),new de(30,new H(43,24),new H(22,25)),new de(30,new H(10,15),new H(67,16))),new Ye(40,Int32Array.from([6,30,58,86,114,142,170]),new de(30,new H(19,118),new H(6,119)),new de(28,new H(18,47),new H(31,48)),new de(30,new H(34,24),new H(34,25)),new de(30,new H(20,15),new H(61,16)))];var Rn;(function(L){L[L.DATA_MASK_000=0]="DATA_MASK_000",L[L.DATA_MASK_001=1]="DATA_MASK_001",L[L.DATA_MASK_010=2]="DATA_MASK_010",L[L.DATA_MASK_011=3]="DATA_MASK_011",L[L.DATA_MASK_100=4]="DATA_MASK_100",L[L.DATA_MASK_101=5]="DATA_MASK_101",L[L.DATA_MASK_110=6]="DATA_MASK_110",L[L.DATA_MASK_111=7]="DATA_MASK_111"})(Rn||(Rn={}));class qn{constructor(s,o){this.value=s,this.isMasked=o}unmaskBitMatrix(s,o){for(let c=0;c<o;c++)for(let d=0;d<o;d++)this.isMasked(c,d)&&s.flip(d,c)}}qn.values=new Map([[Rn.DATA_MASK_000,new qn(Rn.DATA_MASK_000,(L,s)=>(L+s&1)===0)],[Rn.DATA_MASK_001,new qn(Rn.DATA_MASK_001,(L,s)=>(L&1)===0)],[Rn.DATA_MASK_010,new qn(Rn.DATA_MASK_010,(L,s)=>s%3===0)],[Rn.DATA_MASK_011,new qn(Rn.DATA_MASK_011,(L,s)=>(L+s)%3===0)],[Rn.DATA_MASK_100,new qn(Rn.DATA_MASK_100,(L,s)=>(Math.floor(L/2)+Math.floor(s/3)&1)===0)],[Rn.DATA_MASK_101,new qn(Rn.DATA_MASK_101,(L,s)=>L*s%6===0)],[Rn.DATA_MASK_110,new qn(Rn.DATA_MASK_110,(L,s)=>L*s%6<3)],[Rn.DATA_MASK_111,new qn(Rn.DATA_MASK_111,(L,s)=>(L+s+L*s%3&1)===0)]]);class t0{constructor(s){const o=s.getHeight();if(o<21||(o&3)!==1)throw new X;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let g=0;g<6;g++)s=this.copyBit(g,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let g=5;g>=0;g--)s=this.copyBit(8,g,s);const o=this.bitMatrix.getHeight();let c=0;const d=o-7;for(let g=o-1;g>=d;g--)c=this.copyBit(8,g,c);for(let g=o-8;g<o;g++)c=this.copyBit(g,8,c);if(this.parsedFormatInfo=Gn.decodeFormatInformation(s,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new X}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),o=Math.floor((s-17)/4);if(o<=6)return Ye.getVersionForNumber(o);let c=0;const d=s-11;for(let p=5;p>=0;p--)for(let w=s-9;w>=d;w--)c=this.copyBit(w,p,c);let g=Ye.decodeVersionInformation(c);if(g!==null&&g.getDimensionForVersion()===s)return this.parsedVersion=g,g;c=0;for(let p=5;p>=0;p--)for(let w=s-9;w>=d;w--)c=this.copyBit(p,w,c);if(g=Ye.decodeVersionInformation(c),g!==null&&g.getDimensionForVersion()===s)return this.parsedVersion=g,g;throw new X}copyBit(s,o,c){return(this.isMirror?this.bitMatrix.get(o,s):this.bitMatrix.get(s,o))?c<<1|1:c<<1}readCodewords(){const s=this.readFormatInformation(),o=this.readVersion(),c=qn.values.get(s.getDataMask()),d=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,d);const g=o.buildFunctionPattern();let p=!0;const w=new Uint8Array(o.getTotalCodewords());let S=0,_=0,O=0;for(let k=d-1;k>0;k-=2){k===6&&k--;for(let P=0;P<d;P++){const G=p?d-1-P:P;for(let Q=0;Q<2;Q++)g.get(k-Q,G)||(O++,_<<=1,this.bitMatrix.get(k-Q,G)&&(_|=1),O===8&&(w[S++]=_,O=0,_=0))}p=!p}if(S!==o.getTotalCodewords())throw new X;return w}remask(){if(this.parsedFormatInfo===null)return;const s=qn.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,o)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let o=0,c=s.getWidth();o<c;o++)for(let d=o+1,g=s.getHeight();d<g;d++)s.get(o,d)!==s.get(d,o)&&(s.flip(d,o),s.flip(o,d))}}class ml{constructor(s,o){this.numDataCodewords=s,this.codewords=o}static getDataBlocks(s,o,c){if(s.length!==o.getTotalCodewords())throw new A;const d=o.getECBlocksForLevel(c);let g=0;const p=d.getECBlocks();for(const Q of p)g+=Q.getCount();const w=new Array(g);let S=0;for(const Q of p)for(let te=0;te<Q.getCount();te++){const ue=Q.getDataCodewords(),pe=d.getECCodewordsPerBlock()+ue;w[S++]=new ml(ue,new Uint8Array(pe))}const _=w[0].codewords.length;let O=w.length-1;for(;O>=0&&w[O].codewords.length!==_;)O--;O++;const k=_-d.getECCodewordsPerBlock();let P=0;for(let Q=0;Q<k;Q++)for(let te=0;te<S;te++)w[te].codewords[Q]=s[P++];for(let Q=O;Q<S;Q++)w[Q].codewords[k]=s[P++];const G=w[0].codewords.length;for(let Q=k;Q<G;Q++)for(let te=0;te<S;te++){const ue=te<O?Q:Q+1;w[te].codewords[ue]=s[P++]}return w}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var _i;(function(L){L[L.TERMINATOR=0]="TERMINATOR",L[L.NUMERIC=1]="NUMERIC",L[L.ALPHANUMERIC=2]="ALPHANUMERIC",L[L.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",L[L.BYTE=4]="BYTE",L[L.ECI=5]="ECI",L[L.KANJI=6]="KANJI",L[L.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",L[L.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",L[L.HANZI=9]="HANZI"})(_i||(_i={}));class Xe{constructor(s,o,c,d){this.value=s,this.stringValue=o,this.characterCountBitsForVersions=c,this.bits=d,Xe.FOR_BITS.set(d,this),Xe.FOR_VALUE.set(s,this)}static forBits(s){const o=Xe.FOR_BITS.get(s);if(o===void 0)throw new A;return o}getCharacterCountBits(s){const o=s.getVersionNumber();let c;return o<=9?c=0:o<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof Xe))return!1;const o=s;return this.value===o.value}toString(){return this.stringValue}}Xe.FOR_BITS=new Map,Xe.FOR_VALUE=new Map,Xe.TERMINATOR=new Xe(_i.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Xe.NUMERIC=new Xe(_i.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Xe.ALPHANUMERIC=new Xe(_i.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Xe.STRUCTURED_APPEND=new Xe(_i.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Xe.BYTE=new Xe(_i.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Xe.ECI=new Xe(_i.ECI,"ECI",Int32Array.from([0,0,0]),7),Xe.KANJI=new Xe(_i.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Xe.FNC1_FIRST_POSITION=new Xe(_i.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Xe.FNC1_SECOND_POSITION=new Xe(_i.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Xe.HANZI=new Xe(_i.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class cn{static decode(s,o,c,d){const g=new mi(s);let p=new le;const w=new Array;let S=-1,_=-1;try{let O=null,k=!1,P;do{if(g.available()<4)P=Xe.TERMINATOR;else{const G=g.readBits(4);P=Xe.forBits(G)}switch(P){case Xe.TERMINATOR:break;case Xe.FNC1_FIRST_POSITION:case Xe.FNC1_SECOND_POSITION:k=!0;break;case Xe.STRUCTURED_APPEND:if(g.available()<16)throw new X;S=g.readBits(8),_=g.readBits(8);break;case Xe.ECI:const G=cn.parseECIValue(g);if(O=Y.getCharacterSetECIByValue(G),O===null)throw new X;break;case Xe.HANZI:const Q=g.readBits(4),te=g.readBits(P.getCharacterCountBits(o));Q===cn.GB2312_SUBSET&&cn.decodeHanziSegment(g,p,te);break;default:const ue=g.readBits(P.getCharacterCountBits(o));switch(P){case Xe.NUMERIC:cn.decodeNumericSegment(g,p,ue);break;case Xe.ALPHANUMERIC:cn.decodeAlphanumericSegment(g,p,ue,k);break;case Xe.BYTE:cn.decodeByteSegment(g,p,ue,O,w,d);break;case Xe.KANJI:cn.decodeKanjiSegment(g,p,ue);break;default:throw new X}break}}while(P!==Xe.TERMINATOR)}catch{throw new X}return new It(s,p.toString(),w.length===0?null:w,c===null?null:c.toString(),S,_)}static decodeHanziSegment(s,o,c){if(c*13>s.available())throw new X;const d=new Uint8Array(2*c);let g=0;for(;c>0;){const p=s.readBits(13);let w=p/96<<8&4294967295|p%96;w<959?w+=41377:w+=42657,d[g]=w>>8&255,d[g+1]=w&255,g+=2,c--}try{o.append(Te.decode(d,ve.GB2312))}catch(p){throw new X(p)}}static decodeKanjiSegment(s,o,c){if(c*13>s.available())throw new X;const d=new Uint8Array(2*c);let g=0;for(;c>0;){const p=s.readBits(13);let w=p/192<<8&4294967295|p%192;w<7936?w+=33088:w+=49472,d[g]=w>>8,d[g+1]=w,g+=2,c--}try{o.append(Te.decode(d,ve.SHIFT_JIS))}catch(p){throw new X(p)}}static decodeByteSegment(s,o,c,d,g,p){if(8*c>s.available())throw new X;const w=new Uint8Array(c);for(let _=0;_<c;_++)w[_]=s.readBits(8);let S;d===null?S=ve.guessEncoding(w,p):S=d.getName();try{o.append(Te.decode(w,S))}catch(_){throw new X(_)}g.push(w)}static toAlphaNumericChar(s){if(s>=cn.ALPHANUMERIC_CHARS.length)throw new X;return cn.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,o,c,d){const g=o.length();for(;c>1;){if(s.available()<11)throw new X;const p=s.readBits(11);o.append(cn.toAlphaNumericChar(Math.floor(p/45))),o.append(cn.toAlphaNumericChar(p%45)),c-=2}if(c===1){if(s.available()<6)throw new X;o.append(cn.toAlphaNumericChar(s.readBits(6)))}if(d)for(let p=g;p<o.length();p++)o.charAt(p)==="%"&&(p<o.length()-1&&o.charAt(p+1)==="%"?o.deleteCharAt(p+1):o.setCharAt(p,""))}static decodeNumericSegment(s,o,c){for(;c>=3;){if(s.available()<10)throw new X;const d=s.readBits(10);if(d>=1e3)throw new X;o.append(cn.toAlphaNumericChar(Math.floor(d/100))),o.append(cn.toAlphaNumericChar(Math.floor(d/10)%10)),o.append(cn.toAlphaNumericChar(d%10)),c-=3}if(c===2){if(s.available()<7)throw new X;const d=s.readBits(7);if(d>=100)throw new X;o.append(cn.toAlphaNumericChar(Math.floor(d/10))),o.append(cn.toAlphaNumericChar(d%10))}else if(c===1){if(s.available()<4)throw new X;const d=s.readBits(4);if(d>=10)throw new X;o.append(cn.toAlphaNumericChar(d))}}static parseECIValue(s){const o=s.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){const c=s.readBits(8);return(o&63)<<8&4294967295|c}if((o&224)===192){const c=s.readBits(16);return(o&31)<<16&4294967295|c}throw new X}}cn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",cn.GB2312_SUBSET=1;class Pf{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const o=s[0];s[0]=s[2],s[2]=o}}class pl{constructor(){this.rsDecoder=new pt(je.QR_CODE_FIELD_256)}decodeBooleanArray(s,o){return this.decodeBitMatrix(ke.parseFromBooleanArray(s),o)}decodeBitMatrix(s,o){const c=new t0(s);let d=null;try{return this.decodeBitMatrixParser(c,o)}catch(g){d=g}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const g=this.decodeBitMatrixParser(c,o);return g.setOther(new Pf(!0)),g}catch(g){throw d!==null?d:g}}decodeBitMatrixParser(s,o){const c=s.readVersion(),d=s.readFormatInformation().getErrorCorrectionLevel(),g=s.readCodewords(),p=ml.getDataBlocks(g,c,d);let w=0;for(const O of p)w+=O.getNumDataCodewords();const S=new Uint8Array(w);let _=0;for(const O of p){const k=O.getCodewords(),P=O.getNumDataCodewords();this.correctErrors(k,P);for(let G=0;G<P;G++)S[_++]=k[G]}return cn.decode(S,c,d,o)}correctErrors(s,o){const c=new Int32Array(s);try{this.rsDecoder.decode(c,s.length-o)}catch{throw new I}for(let d=0;d<o;d++)s[d]=c[d]}}class go extends ze{constructor(s,o,c){super(s,o),this.estimatedModuleSize=c}aboutEquals(s,o,c){if(Math.abs(o-this.getY())<=s&&Math.abs(c-this.getX())<=s){const d=Math.abs(s-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(s,o,c){const d=(this.getX()+o)/2,g=(this.getY()+s)/2,p=(this.estimatedModuleSize+c)/2;return new go(d,g,p)}}class aa{constructor(s,o,c,d,g,p,w){this.image=s,this.startX=o,this.startY=c,this.width=d,this.height=g,this.moduleSize=p,this.resultPointCallback=w,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,o=this.height,c=this.width,d=s+c,g=this.startY+o/2,p=new Int32Array(3),w=this.image;for(let S=0;S<o;S++){const _=g+((S&1)===0?Math.floor((S+1)/2):-Math.floor((S+1)/2));p[0]=0,p[1]=0,p[2]=0;let O=s;for(;O<d&&!w.get(O,_);)O++;let k=0;for(;O<d;){if(w.get(O,_))if(k===1)p[1]++;else if(k===2){if(this.foundPatternCross(p)){const P=this.handlePossibleCenter(p,_,O);if(P!==null)return P}p[0]=p[2],p[1]=1,p[2]=0,k=1}else p[++k]++;else k===1&&k++,p[k]++;O++}if(this.foundPatternCross(p)){const P=this.handlePossibleCenter(p,_,d);if(P!==null)return P}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ie}static centerFromEnd(s,o){return o-s[2]-s[1]/2}foundPatternCross(s){const o=this.moduleSize,c=o/2;for(let d=0;d<3;d++)if(Math.abs(o-s[d])>=c)return!1;return!0}crossCheckVertical(s,o,c,d){const g=this.image,p=g.getHeight(),w=this.crossCheckStateCount;w[0]=0,w[1]=0,w[2]=0;let S=s;for(;S>=0&&g.get(o,S)&&w[1]<=c;)w[1]++,S--;if(S<0||w[1]>c)return NaN;for(;S>=0&&!g.get(o,S)&&w[0]<=c;)w[0]++,S--;if(w[0]>c)return NaN;for(S=s+1;S<p&&g.get(o,S)&&w[1]<=c;)w[1]++,S++;if(S===p||w[1]>c)return NaN;for(;S<p&&!g.get(o,S)&&w[2]<=c;)w[2]++,S++;if(w[2]>c)return NaN;const _=w[0]+w[1]+w[2];return 5*Math.abs(_-d)>=2*d?NaN:this.foundPatternCross(w)?aa.centerFromEnd(w,S):NaN}handlePossibleCenter(s,o,c){const d=s[0]+s[1]+s[2],g=aa.centerFromEnd(s,c),p=this.crossCheckVertical(o,g,2*s[1],d);if(!isNaN(p)){const w=(s[0]+s[1]+s[2])/3;for(const _ of this.possibleCenters)if(_.aboutEquals(w,p,g))return _.combineEstimate(p,g,w);const S=new go(g,p,w);this.possibleCenters.push(S),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(S)}return null}}class Ks extends ze{constructor(s,o,c,d){super(s,o),this.estimatedModuleSize=c,this.count=d,d===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,o,c){if(Math.abs(o-this.getY())<=s&&Math.abs(c-this.getX())<=s){const d=Math.abs(s-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(s,o,c){const d=this.count+1,g=(this.count*this.getX()+o)/d,p=(this.count*this.getY()+s)/d,w=(this.count*this.estimatedModuleSize+c)/d;return new Ks(g,p,w,d)}}class oa{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class On{constructor(s,o){this.image=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const o=s!=null&&s.get(ee.TRY_HARDER)!==void 0,c=s!=null&&s.get(ee.PURE_BARCODE)!==void 0,d=this.image,g=d.getHeight(),p=d.getWidth();let w=Math.floor(3*g/(4*On.MAX_MODULES));(w<On.MIN_SKIP||o)&&(w=On.MIN_SKIP);let S=!1;const _=new Int32Array(5);for(let k=w-1;k<g&&!S;k+=w){_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0;let P=0;for(let G=0;G<p;G++)if(d.get(G,k))(P&1)===1&&P++,_[P]++;else if((P&1)===0)if(P===4)if(On.foundPatternCross(_)){if(this.handlePossibleCenter(_,k,G,c)===!0)if(w=2,this.hasSkipped===!0)S=this.haveMultiplyConfirmedCenters();else{const te=this.findRowSkip();te>_[2]&&(k+=te-_[2]-w,G=p-1)}else{_[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,P=3;continue}P=0,_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0}else _[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,P=3;else _[++P]++;else _[P]++;On.foundPatternCross(_)&&this.handlePossibleCenter(_,k,p,c)===!0&&(w=_[0],this.hasSkipped&&(S=this.haveMultiplyConfirmedCenters()))}const O=this.selectBestPatterns();return ze.orderBestPatterns(O),new oa(O)}static centerFromEnd(s,o){return o-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let o=0;for(let g=0;g<5;g++){const p=s[g];if(p===0)return!1;o+=p}if(o<7)return!1;const c=o/7,d=c/2;return Math.abs(c-s[0])<d&&Math.abs(c-s[1])<d&&Math.abs(3*c-s[2])<3*d&&Math.abs(c-s[3])<d&&Math.abs(c-s[4])<d}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,o,c,d){const g=this.getCrossCheckStateCount();let p=0;const w=this.image;for(;s>=p&&o>=p&&w.get(o-p,s-p);)g[2]++,p++;if(s<p||o<p)return!1;for(;s>=p&&o>=p&&!w.get(o-p,s-p)&&g[1]<=c;)g[1]++,p++;if(s<p||o<p||g[1]>c)return!1;for(;s>=p&&o>=p&&w.get(o-p,s-p)&&g[0]<=c;)g[0]++,p++;if(g[0]>c)return!1;const S=w.getHeight(),_=w.getWidth();for(p=1;s+p<S&&o+p<_&&w.get(o+p,s+p);)g[2]++,p++;if(s+p>=S||o+p>=_)return!1;for(;s+p<S&&o+p<_&&!w.get(o+p,s+p)&&g[3]<c;)g[3]++,p++;if(s+p>=S||o+p>=_||g[3]>=c)return!1;for(;s+p<S&&o+p<_&&w.get(o+p,s+p)&&g[4]<c;)g[4]++,p++;if(g[4]>=c)return!1;const O=g[0]+g[1]+g[2]+g[3]+g[4];return Math.abs(O-d)<2*d&&On.foundPatternCross(g)}crossCheckVertical(s,o,c,d){const g=this.image,p=g.getHeight(),w=this.getCrossCheckStateCount();let S=s;for(;S>=0&&g.get(o,S);)w[2]++,S--;if(S<0)return NaN;for(;S>=0&&!g.get(o,S)&&w[1]<=c;)w[1]++,S--;if(S<0||w[1]>c)return NaN;for(;S>=0&&g.get(o,S)&&w[0]<=c;)w[0]++,S--;if(w[0]>c)return NaN;for(S=s+1;S<p&&g.get(o,S);)w[2]++,S++;if(S===p)return NaN;for(;S<p&&!g.get(o,S)&&w[3]<c;)w[3]++,S++;if(S===p||w[3]>=c)return NaN;for(;S<p&&g.get(o,S)&&w[4]<c;)w[4]++,S++;if(w[4]>=c)return NaN;const _=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(_-d)>=2*d?NaN:On.foundPatternCross(w)?On.centerFromEnd(w,S):NaN}crossCheckHorizontal(s,o,c,d){const g=this.image,p=g.getWidth(),w=this.getCrossCheckStateCount();let S=s;for(;S>=0&&g.get(S,o);)w[2]++,S--;if(S<0)return NaN;for(;S>=0&&!g.get(S,o)&&w[1]<=c;)w[1]++,S--;if(S<0||w[1]>c)return NaN;for(;S>=0&&g.get(S,o)&&w[0]<=c;)w[0]++,S--;if(w[0]>c)return NaN;for(S=s+1;S<p&&g.get(S,o);)w[2]++,S++;if(S===p)return NaN;for(;S<p&&!g.get(S,o)&&w[3]<c;)w[3]++,S++;if(S===p||w[3]>=c)return NaN;for(;S<p&&g.get(S,o)&&w[4]<c;)w[4]++,S++;if(w[4]>=c)return NaN;const _=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(_-d)>=d?NaN:On.foundPatternCross(w)?On.centerFromEnd(w,S):NaN}handlePossibleCenter(s,o,c,d){const g=s[0]+s[1]+s[2]+s[3]+s[4];let p=On.centerFromEnd(s,c),w=this.crossCheckVertical(o,Math.floor(p),s[2],g);if(!isNaN(w)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(w),s[2],g),!isNaN(p)&&(!d||this.crossCheckDiagonal(Math.floor(w),Math.floor(p),s[2],g)))){const S=g/7;let _=!1;const O=this.possibleCenters;for(let k=0,P=O.length;k<P;k++){const G=O[k];if(G.aboutEquals(S,w,p)){O[k]=G.combineEstimate(w,p,S),_=!0;break}}if(!_){const k=new Ks(p,w,S);O.push(k),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(k)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const c of this.possibleCenters)if(c.getCount()>=On.CENTER_QUORUM)if(o==null)o=c;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-c.getX())-Math.abs(o.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,o=0;const c=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=On.CENTER_QUORUM&&(s++,o+=p.getEstimatedModuleSize());if(s<3)return!1;const d=o/c;let g=0;for(const p of this.possibleCenters)g+=Math.abs(p.getEstimatedModuleSize()-d);return g<=.05*o}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new ie;const o=this.possibleCenters;let c;if(s>3){let d=0,g=0;for(const S of this.possibleCenters){const _=S.getEstimatedModuleSize();d+=_,g+=_*_}c=d/s;let p=Math.sqrt(g/s-c*c);o.sort((S,_)=>{const O=Math.abs(_.getEstimatedModuleSize()-c),k=Math.abs(S.getEstimatedModuleSize()-c);return O<k?-1:O>k?1:0});const w=Math.max(.2*c,p);for(let S=0;S<o.length&&o.length>3;S++){const _=o[S];Math.abs(_.getEstimatedModuleSize()-c)>w&&(o.splice(S,1),S--)}}if(o.length>3){let d=0;for(const g of o)d+=g.getEstimatedModuleSize();c=d/o.length,o.sort((g,p)=>{if(p.getCount()===g.getCount()){const w=Math.abs(p.getEstimatedModuleSize()-c),S=Math.abs(g.getEstimatedModuleSize()-c);return w<S?1:w>S?-1:0}else return p.getCount()-g.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}On.CENTER_QUORUM=2,On.MIN_SKIP=3,On.MAX_MODULES=57;class Sr{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(ee.NEED_RESULT_POINT_CALLBACK);const c=new On(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(c)}processFinderPatternInfo(s){const o=s.getTopLeft(),c=s.getTopRight(),d=s.getBottomLeft(),g=this.calculateModuleSize(o,c,d);if(g<1)throw new ie("No pattern found in proccess finder.");const p=Sr.computeDimension(o,c,d,g),w=Ye.getProvisionalVersionForDimension(p),S=w.getDimensionForVersion()-7;let _=null;if(w.getAlignmentPatternCenters().length>0){const G=c.getX()-o.getX()+d.getX(),Q=c.getY()-o.getY()+d.getY(),te=1-3/S,ue=Math.floor(o.getX()+te*(G-o.getX())),pe=Math.floor(o.getY()+te*(Q-o.getY()));for(let Re=4;Re<=16;Re<<=1)try{_=this.findAlignmentInRegion(g,ue,pe,Re);break}catch(De){if(!(De instanceof ie))throw De}}const O=Sr.createTransform(o,c,d,_,p),k=Sr.sampleGrid(this.image,O,p);let P;return _===null?P=[d,o,c]:P=[d,o,c,_],new wr(k,P)}static createTransform(s,o,c,d,g){const p=g-3.5;let w,S,_,O;return d!==null?(w=d.getX(),S=d.getY(),_=p-3,O=_):(w=o.getX()-s.getX()+c.getX(),S=o.getY()-s.getY()+c.getY(),_=p,O=p),kn.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,_,O,3.5,p,s.getX(),s.getY(),o.getX(),o.getY(),w,S,c.getX(),c.getY())}static sampleGrid(s,o,c){return nt.getInstance().sampleGridWithTransform(s,c,c,o)}static computeDimension(s,o,c,d){const g=gt.round(ze.distance(s,o)/d),p=gt.round(ze.distance(s,c)/d);let w=Math.floor((g+p)/2)+7;switch(w&3){case 0:w++;break;case 2:w--;break;case 3:throw new ie("Dimensions could be not found.")}return w}calculateModuleSize(s,o,c){return(this.calculateModuleSizeOneWay(s,o)+this.calculateModuleSizeOneWay(s,c))/2}calculateModuleSizeOneWay(s,o){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(o.getX()),Math.floor(o.getY())),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(c)?d/7:isNaN(d)?c/7:(c+d)/14}sizeOfBlackWhiteBlackRunBothWays(s,o,c,d){let g=this.sizeOfBlackWhiteBlackRun(s,o,c,d),p=1,w=s-(c-s);w<0?(p=s/(s-w),w=0):w>=this.image.getWidth()&&(p=(this.image.getWidth()-1-s)/(w-s),w=this.image.getWidth()-1);let S=Math.floor(o-(d-o)*p);return p=1,S<0?(p=o/(o-S),S=0):S>=this.image.getHeight()&&(p=(this.image.getHeight()-1-o)/(S-o),S=this.image.getHeight()-1),w=Math.floor(s+(w-s)*p),g+=this.sizeOfBlackWhiteBlackRun(s,o,w,S),g-1}sizeOfBlackWhiteBlackRun(s,o,c,d){const g=Math.abs(d-o)>Math.abs(c-s);if(g){let G=s;s=o,o=G,G=c,c=d,d=G}const p=Math.abs(c-s),w=Math.abs(d-o);let S=-p/2;const _=s<c?1:-1,O=o<d?1:-1;let k=0;const P=c+_;for(let G=s,Q=o;G!==P;G+=_){const te=g?Q:G,ue=g?G:Q;if(k===1===this.image.get(te,ue)){if(k===2)return gt.distance(G,Q,s,o);k++}if(S+=w,S>0){if(Q===d)break;Q+=O,S-=p}}return k===2?gt.distance(c+_,d,s,o):NaN}findAlignmentInRegion(s,o,c,d){const g=Math.floor(d*s),p=Math.max(0,o-g),w=Math.min(this.image.getWidth()-1,o+g);if(w-p<s*3)throw new ie("Alignment top exceeds estimated module size.");const S=Math.max(0,c-g),_=Math.min(this.image.getHeight()-1,c+g);if(_-S<s*3)throw new ie("Alignment bottom exceeds estimated module size.");return new aa(this.image,p,S,w-p,_-S,s,this.resultPointCallback).find()}}class Is{constructor(){this.decoder=new pl}getDecoder(){return this.decoder}decode(s,o){let c,d;if(o!=null&&o.get(ee.PURE_BARCODE)!==void 0){const S=Is.extractPureBits(s.getBlackMatrix());c=this.decoder.decodeBitMatrix(S,o),d=Is.NO_POINTS}else{const S=new Sr(s.getBlackMatrix()).detect(o);c=this.decoder.decodeBitMatrix(S.getBits(),o),d=S.getPoints()}c.getOther()instanceof Pf&&c.getOther().applyMirroredCorrection(d);const g=new Oe(c.getText(),c.getRawBytes(),void 0,d,we.QR_CODE,void 0),p=c.getByteSegments();p!==null&&g.putMetadata(Ge.BYTE_SEGMENTS,p);const w=c.getECLevel();return w!==null&&g.putMetadata(Ge.ERROR_CORRECTION_LEVEL,w),c.hasStructuredAppend()&&(g.putMetadata(Ge.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),g.putMetadata(Ge.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),g}reset(){}static extractPureBits(s){const o=s.getTopLeftOnBit(),c=s.getBottomRightOnBit();if(o===null||c===null)throw new ie;const d=this.moduleSize(o,s);let g=o[1],p=c[1],w=o[0],S=c[0];if(w>=S||g>=p)throw new ie;if(p-g!==S-w&&(S=w+(p-g),S>=s.getWidth()))throw new ie;const _=Math.round((S-w+1)/d),O=Math.round((p-g+1)/d);if(_<=0||O<=0)throw new ie;if(O!==_)throw new ie;const k=Math.floor(d/2);g+=k,w+=k;const P=w+Math.floor((_-1)*d)-S;if(P>0){if(P>k)throw new ie;w-=P}const G=g+Math.floor((O-1)*d)-p;if(G>0){if(G>k)throw new ie;g-=G}const Q=new ke(_,O);for(let te=0;te<O;te++){const ue=g+Math.floor(te*d);for(let pe=0;pe<_;pe++)s.get(w+Math.floor(pe*d),ue)&&Q.set(pe,te)}return Q}static moduleSize(s,o){const c=o.getHeight(),d=o.getWidth();let g=s[0],p=s[1],w=!0,S=0;for(;g<d&&p<c;){if(w!==o.get(g,p)){if(++S===5)break;w=!w}g++,p++}if(g===d||p===c)throw new ie;return(g-s[0])/7}}Is.NO_POINTS=new Array;class Qe{PDF417Common(){}static getBitCountSum(s){return gt.sum(s)}static toIntArray(s){if(s==null||!s.length)return Qe.EMPTY_INT_ARRAY;const o=new Int32Array(s.length);let c=0;for(const d of s)o[c++]=d;return o}static getCodeword(s){const o=q.binarySearch(Qe.SYMBOL_TABLE,s&262143);return o<0?-1:(Qe.CODEWORD_TABLE[o]-1)%Qe.NUMBER_OF_CODEWORDS}}Qe.NUMBER_OF_CODEWORDS=929,Qe.MAX_CODEWORDS_IN_BARCODE=Qe.NUMBER_OF_CODEWORDS-1,Qe.MIN_ROWS_IN_BARCODE=3,Qe.MAX_ROWS_IN_BARCODE=90,Qe.MODULES_IN_CODEWORD=17,Qe.MODULES_IN_STOP_PATTERN=18,Qe.BARS_IN_MODULE=8,Qe.EMPTY_INT_ARRAY=new Int32Array([]),Qe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Qe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ms{constructor(s,o){this.bits=s,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class ft{static detectMultiple(s,o,c){let d=s.getBlackMatrix(),g=ft.detect(c,d);return g.length||(d=d.clone(),d.rotate180(),g=ft.detect(c,d)),new Ms(d,g)}static detect(s,o){const c=new Array;let d=0,g=0,p=!1;for(;d<o.getHeight();){const w=ft.findVertices(o,d,g);if(w[0]==null&&w[3]==null){if(!p)break;p=!1,g=0;for(const S of c)S[1]!=null&&(d=Math.trunc(Math.max(d,S[1].getY()))),S[3]!=null&&(d=Math.max(d,Math.trunc(S[3].getY())));d+=ft.ROW_STEP;continue}if(p=!0,c.push(w),!s)break;w[2]!=null?(g=Math.trunc(w[2].getX()),d=Math.trunc(w[2].getY())):(g=Math.trunc(w[4].getX()),d=Math.trunc(w[4].getY()))}return c}static findVertices(s,o,c){const d=s.getHeight(),g=s.getWidth(),p=new Array(8);return ft.copyToResult(p,ft.findRowsWithPattern(s,d,g,o,c,ft.START_PATTERN),ft.INDEXES_START_PATTERN),p[4]!=null&&(c=Math.trunc(p[4].getX()),o=Math.trunc(p[4].getY())),ft.copyToResult(p,ft.findRowsWithPattern(s,d,g,o,c,ft.STOP_PATTERN),ft.INDEXES_STOP_PATTERN),p}static copyToResult(s,o,c){for(let d=0;d<c.length;d++)s[c[d]]=o[d]}static findRowsWithPattern(s,o,c,d,g,p){const w=new Array(4);let S=!1;const _=new Int32Array(p.length);for(;d<o;d+=ft.ROW_STEP){let k=ft.findGuardPattern(s,g,d,c,!1,p,_);if(k!=null){for(;d>0;){const P=ft.findGuardPattern(s,g,--d,c,!1,p,_);if(P!=null)k=P;else{d++;break}}w[0]=new ze(k[0],d),w[1]=new ze(k[1],d),S=!0;break}}let O=d+1;if(S){let k=0,P=Int32Array.from([Math.trunc(w[0].getX()),Math.trunc(w[1].getX())]);for(;O<o;O++){const G=ft.findGuardPattern(s,P[0],O,c,!1,p,_);if(G!=null&&Math.abs(P[0]-G[0])<ft.MAX_PATTERN_DRIFT&&Math.abs(P[1]-G[1])<ft.MAX_PATTERN_DRIFT)P=G,k=0;else{if(k>ft.SKIPPED_ROW_COUNT_MAX)break;k++}}O-=k+1,w[2]=new ze(P[0],O),w[3]=new ze(P[1],O)}return O-d<ft.BARCODE_MIN_HEIGHT&&q.fill(w,null),w}static findGuardPattern(s,o,c,d,g,p,w){q.fillWithin(w,0,w.length,0);let S=o,_=0;for(;s.get(S,c)&&S>0&&_++<ft.MAX_PIXEL_DRIFT;)S--;let O=S,k=0,P=p.length;for(let G=g;O<d;O++)if(s.get(O,c)!==G)w[k]++;else{if(k===P-1){if(ft.patternMatchVariance(w,p,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE)return new Int32Array([S,O]);S+=w[0]+w[1],j.arraycopy(w,2,w,0,k-1),w[k-1]=0,w[k]=0,k--}else k++;w[k]=1,G=!G}return k===P-1&&ft.patternMatchVariance(w,p,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE?new Int32Array([S,O-1]):null}static patternMatchVariance(s,o,c){let d=s.length,g=0,p=0;for(let _=0;_<d;_++)g+=s[_],p+=o[_];if(g<p)return 1/0;let w=g/p;c*=w;let S=0;for(let _=0;_<d;_++){let O=s[_],k=o[_]*w,P=O>k?O-k:k-O;if(P>c)return 1/0;S+=P}return S/g}}ft.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ft.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ft.MAX_AVG_VARIANCE=.42,ft.MAX_INDIVIDUAL_VARIANCE=.8,ft.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ft.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ft.MAX_PIXEL_DRIFT=3,ft.MAX_PATTERN_DRIFT=5,ft.SKIPPED_ROW_COUNT_MAX=25,ft.ROW_STEP=5,ft.BARCODE_MIN_HEIGHT=10;class pn{constructor(s,o){if(o.length===0)throw new A;this.field=s;let c=o.length;if(c>1&&o[0]===0){let d=1;for(;d<c&&o[d]===0;)d++;d===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-d),j.arraycopy(o,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let d=0;for(let g of this.coefficients)d=this.field.add(d,g);return d}let o=this.coefficients[0],c=this.coefficients.length;for(let d=1;d<c;d++)o=this.field.add(this.field.multiply(s,o),this.coefficients[d]);return o}add(s){if(!this.field.equals(s.field))throw new A("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let o=this.coefficients,c=s.coefficients;if(o.length>c.length){let p=o;o=c,c=p}let d=new Int32Array(c.length),g=c.length-o.length;j.arraycopy(c,0,d,0,g);for(let p=g;p<c.length;p++)d[p]=this.field.add(o[p-g],c[p]);return new pn(this.field,d)}subtract(s){if(!this.field.equals(s.field))throw new A("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof pn?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new A("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new pn(this.field,new Int32Array([0]));let o=this.coefficients,c=o.length,d=s.coefficients,g=d.length,p=new Int32Array(c+g-1);for(let w=0;w<c;w++){let S=o[w];for(let _=0;_<g;_++)p[w+_]=this.field.add(p[w+_],this.field.multiply(S,d[_]))}return new pn(this.field,p)}negative(){let s=this.coefficients.length,o=new Int32Array(s);for(let c=0;c<s;c++)o[c]=this.field.subtract(0,this.coefficients[c]);return new pn(this.field,o)}multiplyScalar(s){if(s===0)return new pn(this.field,new Int32Array([0]));if(s===1)return this;let o=this.coefficients.length,c=new Int32Array(o);for(let d=0;d<o;d++)c[d]=this.field.multiply(this.coefficients[d],s);return new pn(this.field,c)}multiplyByMonomial(s,o){if(s<0)throw new A;if(o===0)return new pn(this.field,new Int32Array([0]));let c=this.coefficients.length,d=new Int32Array(c+s);for(let g=0;g<c;g++)d[g]=this.field.multiply(this.coefficients[g],o);return new pn(this.field,d)}toString(){let s=new le;for(let o=this.getDegree();o>=0;o--){let c=this.getCoefficient(o);c!==0&&(c<0?(s.append(" - "),c=-c):s.length()>0&&s.append(" + "),(o===0||c!==1)&&s.append(c),o!==0&&(o===1?s.append("x"):(s.append("x^"),s.append(o))))}return s.toString()}}class Zs{add(s,o){return(s+o)%this.modulus}subtract(s,o){return(this.modulus+s-o)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new A;return this.logTable[s]}inverse(s){if(s===0)throw new Be;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,o){return s===0||o===0?0:this.expTable[(this.logTable[s]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class mo extends Zs{constructor(s,o){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let c=1;for(let d=0;d<s;d++)this.expTable[d]=c,c=c*o%s;for(let d=0;d<s-1;d++)this.logTable[this.expTable[d]]=d;this.zero=new pn(this,new Int32Array([0])),this.one=new pn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,o){if(s<0)throw new A;if(o===0)return this.zero;let c=new Int32Array(s+1);return c[0]=o,new pn(this,c)}}mo.PDF417_GF=new mo(Qe.NUMBER_OF_CODEWORDS,3);class po{constructor(){this.field=mo.PDF417_GF}decode(s,o,c){let d=new pn(this.field,s),g=new Int32Array(o),p=!1;for(let Q=o;Q>0;Q--){let te=d.evaluateAt(this.field.exp(Q));g[o-Q]=te,te!==0&&(p=!0)}if(!p)return 0;let w=this.field.getOne();if(c!=null)for(const Q of c){let te=this.field.exp(s.length-1-Q),ue=new pn(this.field,new Int32Array([this.field.subtract(0,te),1]));w=w.multiply(ue)}let S=new pn(this.field,g),_=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),S,o),O=_[0],k=_[1],P=this.findErrorLocations(O),G=this.findErrorMagnitudes(k,O,P);for(let Q=0;Q<P.length;Q++){let te=s.length-1-this.field.log(P[Q]);if(te<0)throw I.getChecksumInstance();s[te]=this.field.subtract(s[te],G[Q])}return P.length}runEuclideanAlgorithm(s,o,c){if(s.getDegree()<o.getDegree()){let P=s;s=o,o=P}let d=s,g=o,p=this.field.getZero(),w=this.field.getOne();for(;g.getDegree()>=Math.round(c/2);){let P=d,G=p;if(d=g,p=w,d.isZero())throw I.getChecksumInstance();g=P;let Q=this.field.getZero(),te=d.getCoefficient(d.getDegree()),ue=this.field.inverse(te);for(;g.getDegree()>=d.getDegree()&&!g.isZero();){let pe=g.getDegree()-d.getDegree(),Re=this.field.multiply(g.getCoefficient(g.getDegree()),ue);Q=Q.add(this.field.buildMonomial(pe,Re)),g=g.subtract(d.multiplyByMonomial(pe,Re))}w=Q.multiply(p).subtract(G).negative()}let S=w.getCoefficient(0);if(S===0)throw I.getChecksumInstance();let _=this.field.inverse(S),O=w.multiply(_),k=g.multiply(_);return[O,k]}findErrorLocations(s){let o=s.getDegree(),c=new Int32Array(o),d=0;for(let g=1;g<this.field.getSize()&&d<o;g++)s.evaluateAt(g)===0&&(c[d]=this.field.inverse(g),d++);if(d!==o)throw I.getChecksumInstance();return c}findErrorMagnitudes(s,o,c){let d=o.getDegree(),g=new Int32Array(d);for(let _=1;_<=d;_++)g[d-_]=this.field.multiply(_,o.getCoefficient(_));let p=new pn(this.field,g),w=c.length,S=new Int32Array(w);for(let _=0;_<w;_++){let O=this.field.inverse(c[_]),k=this.field.subtract(0,s.evaluateAt(O)),P=this.field.inverse(p.evaluateAt(O));S[_]=this.field.multiply(k,P)}return S}}class Qs{constructor(s,o,c,d,g){s instanceof Qs?this.constructor_2(s):this.constructor_1(s,o,c,d,g)}constructor_1(s,o,c,d,g){const p=o==null||c==null,w=d==null||g==null;if(p&&w)throw new ie;p?(o=new ze(0,d.getY()),c=new ze(0,g.getY())):w&&(d=new ze(s.getWidth()-1,o.getY()),g=new ze(s.getWidth()-1,c.getY())),this.image=s,this.topLeft=o,this.bottomLeft=c,this.topRight=d,this.bottomRight=g,this.minX=Math.trunc(Math.min(o.getX(),c.getX())),this.maxX=Math.trunc(Math.max(d.getX(),g.getX())),this.minY=Math.trunc(Math.min(o.getY(),d.getY())),this.maxY=Math.trunc(Math.max(c.getY(),g.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,o){return s==null?o:o==null?s:new Qs(s.image,s.topLeft,s.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(s,o,c){let d=this.topLeft,g=this.bottomLeft,p=this.topRight,w=this.bottomRight;if(s>0){let S=c?this.topLeft:this.topRight,_=Math.trunc(S.getY()-s);_<0&&(_=0);let O=new ze(S.getX(),_);c?d=O:p=O}if(o>0){let S=c?this.bottomLeft:this.bottomRight,_=Math.trunc(S.getY()+o);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);let O=new ze(S.getX(),_);c?g=O:w=O}return new Qs(this.image,d,g,p,w)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class xl{constructor(s,o,c,d){this.columnCount=s,this.errorCorrectionLevel=d,this.rowCountUpperPart=o,this.rowCountLowerPart=c,this.rowCount=o+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Js{constructor(){this.buffer=""}static form(s,o){let c=-1;function d(p,w,S,_,O,k){if(p==="%%")return"%";if(o[++c]===void 0)return;p=_?parseInt(_.substr(1)):void 0;let P=O?parseInt(O.substr(1)):void 0,G;switch(k){case"s":G=o[c];break;case"c":G=o[c][0];break;case"f":G=parseFloat(o[c]).toFixed(p);break;case"p":G=parseFloat(o[c]).toPrecision(p);break;case"e":G=parseFloat(o[c]).toExponential(p);break;case"x":G=parseInt(o[c]).toString(P||16);break;case"d":G=parseFloat(parseInt(o[c],P||10).toPrecision(p)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(P);let Q=parseInt(S),te=S&&S[0]+""=="0"?"0":" ";for(;G.length<Q;)G=w!==void 0?G+te:te+G;return G}let g=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(g,d)}format(s,...o){this.buffer+=Js.form(s,o)}toString(){return this.buffer}}class la{constructor(s){this.boundingBox=new Qs(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let o=this.getCodeword(s);if(o!=null)return o;for(let c=1;c<la.MAX_NEARBY_DISTANCE;c++){let d=this.imageRowToCodewordIndex(s)-c;if(d>=0&&(o=this.codewords[d],o!=null)||(d=this.imageRowToCodewordIndex(s)+c,d<this.codewords.length&&(o=this.codewords[d],o!=null)))return o}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,o){this.codewords[this.imageRowToCodewordIndex(s)]=o}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new Js;let o=0;for(const c of this.codewords){if(c==null){s.format("%3d:    |   %n",o++);continue}s.format("%3d: %3d|%3d%n",o++,c.getRowNumber(),c.getValue())}return s.toString()}}la.MAX_NEARBY_DISTANCE=5;class Bn{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let o=this.values.get(s);o==null&&(o=0),o++,this.values.set(s,o)}getValue(){let s=-1,o=new Array;for(const[c,d]of this.values.entries()){const g={getKey:()=>c,getValue:()=>d};g.getValue()>s?(s=g.getValue(),o=[],o.push(g.getKey())):g.getValue()===s&&o.push(g.getKey())}return Qe.toIntArray(o)}getConfidence(s){return this.values.get(s)}}class er extends la{constructor(s,o){super(s),this._isLeft=o}setRowNumbers(){for(let s of this.getCodewords())s!=null&&s.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,s);let c=this.getBoundingBox(),d=this._isLeft?c.getTopLeft():c.getTopRight(),g=this._isLeft?c.getBottomLeft():c.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),w=this.imageRowToCodewordIndex(Math.trunc(g.getY())),S=-1,_=1,O=0;for(let k=p;k<w;k++){if(o[k]==null)continue;let P=o[k],G=P.getRowNumber()-S;if(G===0)O++;else if(G===1)_=Math.max(_,O),O=1,S=P.getRowNumber();else if(G<0||P.getRowNumber()>=s.getRowCount()||G>k)o[k]=null;else{let Q;_>2?Q=(_-2)*G:Q=G;let te=Q>=k;for(let ue=1;ue<=Q&&!te;ue++)te=o[k-ue]!=null;te?o[k]=null:(S=P.getRowNumber(),O=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let o=new Int32Array(s.getRowCount());for(let c of this.getCodewords())if(c!=null){let d=c.getRowNumber();if(d>=o.length)continue;o[d]++}return o}adjustIncompleteIndicatorColumnRowNumbers(s){let o=this.getBoundingBox(),c=this._isLeft?o.getTopLeft():o.getTopRight(),d=this._isLeft?o.getBottomLeft():o.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),w=this.getCodewords(),S=-1;for(let _=g;_<p;_++){if(w[_]==null)continue;let O=w[_];O.setRowNumberAsRowIndicatorColumn();let k=O.getRowNumber()-S;k===0||(k===1?S=O.getRowNumber():O.getRowNumber()>=s.getRowCount()?w[_]=null:S=O.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),o=new Bn,c=new Bn,d=new Bn,g=new Bn;for(let w of s){if(w==null)continue;w.setRowNumberAsRowIndicatorColumn();let S=w.getValue()%30,_=w.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:c.setValue(S*3+1);break;case 1:g.setValue(S/3),d.setValue(S%3);break;case 2:o.setValue(S+1);break}}if(o.getValue().length===0||c.getValue().length===0||d.getValue().length===0||g.getValue().length===0||o.getValue()[0]<1||c.getValue()[0]+d.getValue()[0]<Qe.MIN_ROWS_IN_BARCODE||c.getValue()[0]+d.getValue()[0]>Qe.MAX_ROWS_IN_BARCODE)return null;let p=new xl(o.getValue()[0],c.getValue()[0],d.getValue()[0],g.getValue()[0]);return this.removeIncorrectCodewords(s,p),p}removeIncorrectCodewords(s,o){for(let c=0;c<s.length;c++){let d=s[c];if(s[c]==null)continue;let g=d.getValue()%30,p=d.getRowNumber();if(p>o.getRowCount()){s[c]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:g*3+1!==o.getRowCountUpperPart()&&(s[c]=null);break;case 1:(Math.trunc(g/3)!==o.getErrorCorrectionLevel()||g%3!==o.getRowCountLowerPart())&&(s[c]=null);break;case 2:g+1!==o.getColumnCount()&&(s[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class tr{constructor(s,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=Qe.MAX_CODEWORDS_IN_BARCODE,o;do o=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s!=null&&s.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let c=this.detectionResultColumns[o].getCodewords();for(let d=0;d<c.length;d++)c[d]!=null&&(c[d].hasValidRowNumber()||this.adjustRowNumbers(o,d,c))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<s.length;c++)if(s[c]!=null&&o[c]!=null&&s[c].getRowNumber()===o[c].getRowNumber())for(let d=1;d<=this.barcodeColumnCount;d++){let g=this.detectionResultColumns[d].getCodewords()[c];g!=null&&(g.setRowNumber(s[c].getRowNumber()),g.hasValidRowNumber()||(this.detectionResultColumns[d].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<o.length;c++){if(o[c]==null)continue;let d=o[c].getRowNumber(),g=0;for(let p=this.barcodeColumnCount+1;p>0&&g<this.ADJUST_ROW_NUMBER_SKIP;p--){let w=this.detectionResultColumns[p].getCodewords()[c];w!=null&&(g=tr.adjustRowNumberIfValid(d,g,w),w.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,o=this.detectionResultColumns[0].getCodewords();for(let c=0;c<o.length;c++){if(o[c]==null)continue;let d=o[c].getRowNumber(),g=0;for(let p=1;p<this.barcodeColumnCount+1&&g<this.ADJUST_ROW_NUMBER_SKIP;p++){let w=this.detectionResultColumns[p].getCodewords()[c];w!=null&&(g=tr.adjustRowNumberIfValid(d,g,w),w.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,o,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(s)?(c.setRowNumber(s),o=0):++o),o}adjustRowNumbers(s,o,c){if(!this.detectionResultColumns[s-1])return;let d=c[o],g=this.detectionResultColumns[s-1].getCodewords(),p=g;this.detectionResultColumns[s+1]!=null&&(p=this.detectionResultColumns[s+1].getCodewords());let w=new Array(14);w[2]=g[o],w[3]=p[o],o>0&&(w[0]=c[o-1],w[4]=g[o-1],w[5]=p[o-1]),o>1&&(w[8]=c[o-2],w[10]=g[o-2],w[11]=p[o-2]),o<c.length-1&&(w[1]=c[o+1],w[6]=g[o+1],w[7]=p[o+1]),o<c.length-2&&(w[9]=c[o+2],w[12]=g[o+2],w[13]=p[o+2]);for(let S of w)if(tr.adjustRowNumber(d,S))return}static adjustRowNumber(s,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===s.getBucket()?(s.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,o){this.detectionResultColumns[s]=o}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new Js;for(let c=0;c<s.getCodewords().length;c++){o.format("CW %3d:",c);for(let d=0;d<this.barcodeColumnCount+2;d++){if(this.detectionResultColumns[d]==null){o.format("    |   ");continue}let g=this.detectionResultColumns[d].getCodewords()[c];if(g==null){o.format("    |   ");continue}o.format(" %3d|%3d",g.getRowNumber(),g.getValue())}o.format("%n")}return o.toString()}}class Ds{constructor(s,o,c,d){this.rowNumber=Ds.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(o),this.bucket=Math.trunc(c),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==Ds.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}Ds.BARCODE_ROW_UNKNOWN=-1;class pi{static initialize(){for(let s=0;s<Qe.SYMBOL_TABLE.length;s++){let o=Qe.SYMBOL_TABLE[s],c=o&1;for(let d=0;d<Qe.BARS_IN_MODULE;d++){let g=0;for(;(o&1)===c;)g+=1,o>>=1;c=o&1,pi.RATIOS_TABLE[s]||(pi.RATIOS_TABLE[s]=new Array(Qe.BARS_IN_MODULE)),pi.RATIOS_TABLE[s][Qe.BARS_IN_MODULE-d-1]=Math.fround(g/Qe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let o=pi.getDecodedCodewordValue(pi.sampleBitCounts(s));return o!==-1?o:pi.getClosestDecodedValue(s)}static sampleBitCounts(s){let o=gt.sum(s),c=new Int32Array(Qe.BARS_IN_MODULE),d=0,g=0;for(let p=0;p<Qe.MODULES_IN_CODEWORD;p++){let w=o/(2*Qe.MODULES_IN_CODEWORD)+p*o/Qe.MODULES_IN_CODEWORD;g+s[d]<=w&&(g+=s[d],d++),c[d]++}return c}static getDecodedCodewordValue(s){let o=pi.getBitValue(s);return Qe.getCodeword(o)===-1?-1:o}static getBitValue(s){let o=0;for(let c=0;c<s.length;c++)for(let d=0;d<s[c];d++)o=o<<1|(c%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(s){let o=gt.sum(s),c=new Array(Qe.BARS_IN_MODULE);if(o>1)for(let p=0;p<c.length;p++)c[p]=Math.fround(s[p]/o);let d=cs.MAX_VALUE,g=-1;this.bSymbolTableReady||pi.initialize();for(let p=0;p<pi.RATIOS_TABLE.length;p++){let w=0,S=pi.RATIOS_TABLE[p];for(let _=0;_<Qe.BARS_IN_MODULE;_++){let O=Math.fround(S[_]-c[_]);if(w+=Math.fround(O*O),w>=d)break}w<d&&(d=w,g=Qe.SYMBOL_TABLE[p])}return g}}pi.bSymbolTableReady=!1,pi.RATIOS_TABLE=new Array(Qe.SYMBOL_TABLE.length).map(L=>new Array(Qe.BARS_IN_MODULE));class yl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class bl{static parseLong(s,o=void 0){return parseInt(s,o)}}class ca extends x{}ca.kind="NullPointerException";class wl{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,o,c){if(s==null)throw new ca;if(o<0||o>s.length||c<0||o+c>s.length||o+c<0)throw new U;if(c===0)return;for(let d=0;d<c;d++)this.write(s[o+d])}flush(){}close(){}}class Uf extends x{}class n0 extends wl{constructor(s=32){if(super(),this.count=0,s<0)throw new A("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let c=this.buf.length<<1;if(c-s<0&&(c=s),c<0){if(s<0)throw new Uf;c=B.MAX_VALUE}this.buf=q.copyOfUint8Array(this.buf,c)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,o,c){if(o<0||o>s.length||c<0||o+c-s.length>0)throw new U;this.ensureCapacity(this.count+c),j.arraycopy(s,o,this.buf,this.count,c),this.count+=c}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return q.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var $t;(function(L){L[L.ALPHA=0]="ALPHA",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.PUNCT=3]="PUNCT",L[L.ALPHA_SHIFT=4]="ALPHA_SHIFT",L[L.PUNCT_SHIFT=5]="PUNCT_SHIFT"})($t||($t={}));function Ff(){if(typeof window<"u")return window.BigInt||null;if(typeof Gd<"u")return Gd.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ua;function nr(L){if(typeof ua>"u"&&(ua=Ff()),ua===null)throw new Error("BigInt is not supported!");return ua(L)}function i0(){let L=[];L[0]=nr(1);let s=nr(900);L[1]=s;for(let o=2;o<16;o++)L[o]=L[o-1]*s;return L}class ye{static decode(s,o){let c=new le(""),d=Y.ISO8859_1;c.enableDecoding(d);let g=1,p=s[g++],w=new yl;for(;g<s[0];){switch(p){case ye.TEXT_COMPACTION_MODE_LATCH:g=ye.textCompaction(s,g,c);break;case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:g=ye.byteCompaction(p,s,d,g,c);break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[g++]);break;case ye.NUMERIC_COMPACTION_MODE_LATCH:g=ye.numericCompaction(s,g,c);break;case ye.ECI_CHARSET:Y.getCharacterSetECIByValue(s[g++]);break;case ye.ECI_GENERAL_PURPOSE:g+=2;break;case ye.ECI_USER_DEFINED:g++;break;case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:g=ye.decodeMacroBlock(s,g,w);break;case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:throw new X;default:g--,g=ye.textCompaction(s,g,c);break}if(g<s.length)p=s[g++];else throw X.getFormatInstance()}if(c.length()===0)throw X.getFormatInstance();let S=new It(null,c.toString(),null,o);return S.setOther(w),S}static decodeMacroBlock(s,o,c){if(o+ye.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw X.getFormatInstance();let d=new Int32Array(ye.NUMBER_OF_SEQUENCE_CODEWORDS);for(let w=0;w<ye.NUMBER_OF_SEQUENCE_CODEWORDS;w++,o++)d[w]=s[o];c.setSegmentIndex(B.parseInt(ye.decodeBase900toBase10(d,ye.NUMBER_OF_SEQUENCE_CODEWORDS)));let g=new le;o=ye.textCompaction(s,o,g),c.setFileId(g.toString());let p=-1;for(s[o]===ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=o+1);o<s[0];)switch(s[o]){case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,s[o]){case ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let w=new le;o=ye.textCompaction(s,o+1,w),c.setFileName(w.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let S=new le;o=ye.textCompaction(s,o+1,S),c.setSender(S.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let _=new le;o=ye.textCompaction(s,o+1,_),c.setAddressee(_.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let O=new le;o=ye.numericCompaction(s,o+1,O),c.setSegmentCount(B.parseInt(O.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let k=new le;o=ye.numericCompaction(s,o+1,k),c.setTimestamp(bl.parseLong(k.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let P=new le;o=ye.numericCompaction(s,o+1,P),c.setChecksum(B.parseInt(P.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let G=new le;o=ye.numericCompaction(s,o+1,G),c.setFileSize(bl.parseLong(G.toString()));break;default:throw X.getFormatInstance()}break;case ye.MACRO_PDF417_TERMINATOR:o++,c.setLastSegment(!0);break;default:throw X.getFormatInstance()}if(p!==-1){let w=o-p;c.isLastSegment()&&w--,c.setOptionalData(q.copyOfRange(s,p,p+w))}return o}static textCompaction(s,o,c){let d=new Int32Array((s[0]-o)*2),g=new Int32Array((s[0]-o)*2),p=0,w=!1;for(;o<s[0]&&!w;){let S=s[o++];if(S<ye.TEXT_COMPACTION_MODE_LATCH)d[p]=S/30,d[p+1]=S%30,p+=2;else switch(S){case ye.TEXT_COMPACTION_MODE_LATCH:d[p++]=ye.TEXT_COMPACTION_MODE_LATCH;break;case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:o--,w=!0;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d[p]=ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,S=s[o++],g[p]=S,p++;break}}return ye.decodeTextCompaction(d,g,p,c),o}static decodeTextCompaction(s,o,c,d){let g=$t.ALPHA,p=$t.ALPHA,w=0;for(;w<c;){let S=s[w],_="";switch(g){case $t.ALPHA:if(S<26)_=String.fromCharCode(65+S);else switch(S){case 26:_=" ";break;case ye.LL:g=$t.LOWER;break;case ye.ML:g=$t.MIXED;break;case ye.PS:p=g,g=$t.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(o[w]);break;case ye.TEXT_COMPACTION_MODE_LATCH:g=$t.ALPHA;break}break;case $t.LOWER:if(S<26)_=String.fromCharCode(97+S);else switch(S){case 26:_=" ";break;case ye.AS:p=g,g=$t.ALPHA_SHIFT;break;case ye.ML:g=$t.MIXED;break;case ye.PS:p=g,g=$t.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(o[w]);break;case ye.TEXT_COMPACTION_MODE_LATCH:g=$t.ALPHA;break}break;case $t.MIXED:if(S<ye.PL)_=ye.MIXED_CHARS[S];else switch(S){case ye.PL:g=$t.PUNCT;break;case 26:_=" ";break;case ye.LL:g=$t.LOWER;break;case ye.AL:g=$t.ALPHA;break;case ye.PS:p=g,g=$t.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(o[w]);break;case ye.TEXT_COMPACTION_MODE_LATCH:g=$t.ALPHA;break}break;case $t.PUNCT:if(S<ye.PAL)_=ye.PUNCT_CHARS[S];else switch(S){case ye.PAL:g=$t.ALPHA;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(o[w]);break;case ye.TEXT_COMPACTION_MODE_LATCH:g=$t.ALPHA;break}break;case $t.ALPHA_SHIFT:if(g=p,S<26)_=String.fromCharCode(65+S);else switch(S){case 26:_=" ";break;case ye.TEXT_COMPACTION_MODE_LATCH:g=$t.ALPHA;break}break;case $t.PUNCT_SHIFT:if(g=p,S<ye.PAL)_=ye.PUNCT_CHARS[S];else switch(S){case ye.PAL:g=$t.ALPHA;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(o[w]);break;case ye.TEXT_COMPACTION_MODE_LATCH:g=$t.ALPHA;break}break}_!==""&&d.append(_),w++}}static byteCompaction(s,o,c,d,g){let p=new n0,w=0,S=0,_=!1;switch(s){case ye.BYTE_COMPACTION_MODE_LATCH:let O=new Int32Array(6),k=o[d++];for(;d<o[0]&&!_;)switch(O[w++]=k,S=900*S+k,k=o[d++],k){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:d--,_=!0;break;default:if(w%5===0&&w>0){for(let P=0;P<6;++P)p.write(Number(nr(S)>>nr(8*(5-P))));S=0,w=0}break}d===o[0]&&k<ye.TEXT_COMPACTION_MODE_LATCH&&(O[w++]=k);for(let P=0;P<w;P++)p.write(O[P]);break;case ye.BYTE_COMPACTION_MODE_LATCH_6:for(;d<o[0]&&!_;){let P=o[d++];if(P<ye.TEXT_COMPACTION_MODE_LATCH)w++,S=900*S+P;else switch(P){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:d--,_=!0;break}if(w%5===0&&w>0){for(let G=0;G<6;++G)p.write(Number(nr(S)>>nr(8*(5-G))));S=0,w=0}}break}return g.append(Te.decode(p.toByteArray(),c)),d}static numericCompaction(s,o,c){let d=0,g=!1,p=new Int32Array(ye.MAX_NUMERIC_CODEWORDS);for(;o<s[0]&&!g;){let w=s[o++];if(o===s[0]&&(g=!0),w<ye.TEXT_COMPACTION_MODE_LATCH)p[d]=w,d++;else switch(w){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:o--,g=!0;break}(d%ye.MAX_NUMERIC_CODEWORDS===0||w===ye.NUMERIC_COMPACTION_MODE_LATCH||g)&&d>0&&(c.append(ye.decodeBase900toBase10(p,d)),d=0)}return o}static decodeBase900toBase10(s,o){let c=nr(0);for(let g=0;g<o;g++)c+=ye.EXP900[o-g-1]*nr(s[g]);let d=c.toString();if(d.charAt(0)!=="1")throw new X;return d.substring(1)}}ye.TEXT_COMPACTION_MODE_LATCH=900,ye.BYTE_COMPACTION_MODE_LATCH=901,ye.NUMERIC_COMPACTION_MODE_LATCH=902,ye.BYTE_COMPACTION_MODE_LATCH_6=924,ye.ECI_USER_DEFINED=925,ye.ECI_GENERAL_PURPOSE=926,ye.ECI_CHARSET=927,ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ye.MACRO_PDF417_TERMINATOR=922,ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ye.MAX_NUMERIC_CODEWORDS=15,ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ye.PL=25,ye.LL=27,ye.AS=27,ye.ML=28,ye.AL=28,ye.PS=29,ye.PAL=29,ye.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ye.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ye.EXP900=Ff()?i0():[],ye.NUMBER_OF_SEQUENCE_CODEWORDS=2;class yt{constructor(){}static decode(s,o,c,d,g,p,w){let S=new Qs(s,o,c,d,g),_=null,O=null,k;for(let Q=!0;;Q=!1){if(o!=null&&(_=yt.getRowIndicatorColumn(s,S,o,!0,p,w)),d!=null&&(O=yt.getRowIndicatorColumn(s,S,d,!1,p,w)),k=yt.merge(_,O),k==null)throw ie.getNotFoundInstance();let te=k.getBoundingBox();if(Q&&te!=null&&(te.getMinY()<S.getMinY()||te.getMaxY()>S.getMaxY()))S=te;else break}k.setBoundingBox(S);let P=k.getBarcodeColumnCount()+1;k.setDetectionResultColumn(0,_),k.setDetectionResultColumn(P,O);let G=_!=null;for(let Q=1;Q<=P;Q++){let te=G?Q:P-Q;if(k.getDetectionResultColumn(te)!==void 0)continue;let ue;te===0||te===P?ue=new er(S,te===0):ue=new la(S),k.setDetectionResultColumn(te,ue);let pe=-1,Re=pe;for(let De=S.getMinY();De<=S.getMaxY();De++){if(pe=yt.getStartColumn(k,te,De,G),pe<0||pe>S.getMaxX()){if(Re===-1)continue;pe=Re}let Ne=yt.detectCodeword(s,S.getMinX(),S.getMaxX(),G,pe,De,p,w);Ne!=null&&(ue.setCodeword(De,Ne),Re=pe,p=Math.min(p,Ne.getWidth()),w=Math.max(w,Ne.getWidth()))}}return yt.createDecoderResult(k)}static merge(s,o){if(s==null&&o==null)return null;let c=yt.getBarcodeMetadata(s,o);if(c==null)return null;let d=Qs.merge(yt.adjustBoundingBox(s),yt.adjustBoundingBox(o));return new tr(c,d)}static adjustBoundingBox(s){if(s==null)return null;let o=s.getRowHeights();if(o==null)return null;let c=yt.getMax(o),d=0;for(let w of o)if(d+=c-w,w>0)break;let g=s.getCodewords();for(let w=0;d>0&&g[w]==null;w++)d--;let p=0;for(let w=o.length-1;w>=0&&(p+=c-o[w],!(o[w]>0));w--);for(let w=g.length-1;p>0&&g[w]==null;w--)p--;return s.getBoundingBox().addMissingRows(d,p,s.isLeft())}static getMax(s){let o=-1;for(let c of s)o=Math.max(o,c);return o}static getBarcodeMetadata(s,o){let c;if(s==null||(c=s.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let d;return o==null||(d=o.getBarcodeMetadata())==null?c:c.getColumnCount()!==d.getColumnCount()&&c.getErrorCorrectionLevel()!==d.getErrorCorrectionLevel()&&c.getRowCount()!==d.getRowCount()?null:c}static getRowIndicatorColumn(s,o,c,d,g,p){let w=new er(o,d);for(let S=0;S<2;S++){let _=S===0?1:-1,O=Math.trunc(Math.trunc(c.getX()));for(let k=Math.trunc(Math.trunc(c.getY()));k<=o.getMaxY()&&k>=o.getMinY();k+=_){let P=yt.detectCodeword(s,0,s.getWidth(),d,O,k,g,p);P!=null&&(w.setCodeword(k,P),d?O=P.getStartX():O=P.getEndX())}}return w}static adjustCodewordCount(s,o){let c=o[0][1],d=c.getValue(),g=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-yt.getNumberOfECCodeWords(s.getBarcodeECLevel());if(d.length===0){if(g<1||g>Qe.MAX_CODEWORDS_IN_BARCODE)throw ie.getNotFoundInstance();c.setValue(g)}else d[0]!==g&&c.setValue(g)}static createDecoderResult(s){let o=yt.createBarcodeMatrix(s);yt.adjustCodewordCount(s,o);let c=new Array,d=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),g=[],p=new Array;for(let S=0;S<s.getBarcodeRowCount();S++)for(let _=0;_<s.getBarcodeColumnCount();_++){let O=o[S][_+1].getValue(),k=S*s.getBarcodeColumnCount()+_;O.length===0?c.push(k):O.length===1?d[k]=O[0]:(p.push(k),g.push(O))}let w=new Array(g.length);for(let S=0;S<w.length;S++)w[S]=g[S];return yt.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),d,Qe.toIntArray(c),Qe.toIntArray(p),w)}static createDecoderResultFromAmbiguousValues(s,o,c,d,g){let p=new Int32Array(d.length),w=100;for(;w-- >0;){for(let S=0;S<p.length;S++)o[d[S]]=g[S][p[S]];try{return yt.decodeCodewords(o,s,c)}catch(S){if(!(S instanceof I))throw S}if(p.length===0)throw I.getChecksumInstance();for(let S=0;S<p.length;S++)if(p[S]<g[S].length-1){p[S]++;break}else if(p[S]=0,S===p.length-1)throw I.getChecksumInstance()}throw I.getChecksumInstance()}static createBarcodeMatrix(s){let o=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let d=0;d<o.length;d++)for(let g=0;g<o[d].length;g++)o[d][g]=new Bn;let c=0;for(let d of s.getDetectionResultColumns()){if(d!=null){for(let g of d.getCodewords())if(g!=null){let p=g.getRowNumber();if(p>=0){if(p>=o.length)continue;o[p][c].setValue(g.getValue())}}}c++}return o}static isValidBarcodeColumn(s,o){return o>=0&&o<=s.getBarcodeColumnCount()+1}static getStartColumn(s,o,c,d){let g=d?1:-1,p=null;if(yt.isValidBarcodeColumn(s,o-g)&&(p=s.getDetectionResultColumn(o-g).getCodeword(c)),p!=null)return d?p.getEndX():p.getStartX();if(p=s.getDetectionResultColumn(o).getCodewordNearby(c),p!=null)return d?p.getStartX():p.getEndX();if(yt.isValidBarcodeColumn(s,o-g)&&(p=s.getDetectionResultColumn(o-g).getCodewordNearby(c)),p!=null)return d?p.getEndX():p.getStartX();let w=0;for(;yt.isValidBarcodeColumn(s,o-g);){o-=g;for(let S of s.getDetectionResultColumn(o).getCodewords())if(S!=null)return(d?S.getEndX():S.getStartX())+g*w*(S.getEndX()-S.getStartX());w++}return d?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,o,c,d,g,p,w,S){g=yt.adjustCodewordStartColumn(s,o,c,d,g,p);let _=yt.getModuleBitCount(s,o,c,d,g,p);if(_==null)return null;let O,k=gt.sum(_);if(d)O=g+k;else{for(let Q=0;Q<_.length/2;Q++){let te=_[Q];_[Q]=_[_.length-1-Q],_[_.length-1-Q]=te}O=g,g=O-k}if(!yt.checkCodewordSkew(k,w,S))return null;let P=pi.getDecodedValue(_),G=Qe.getCodeword(P);return G===-1?null:new Ds(g,O,yt.getCodewordBucketNumber(P),G)}static getModuleBitCount(s,o,c,d,g,p){let w=g,S=new Int32Array(8),_=0,O=d?1:-1,k=d;for(;(d?w<c:w>=o)&&_<S.length;)s.get(w,p)===k?(S[_]++,w+=O):(_++,k=!k);return _===S.length||w===(d?c:o)&&_===S.length-1?S:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,o,c,d,g,p){let w=g,S=d?-1:1;for(let _=0;_<2;_++){for(;(d?w>=o:w<c)&&d===s.get(w,p);){if(Math.abs(g-w)>yt.CODEWORD_SKEW_SIZE)return g;w+=S}S=-S,d=!d}return w}static checkCodewordSkew(s,o,c){return o-yt.CODEWORD_SKEW_SIZE<=s&&s<=c+yt.CODEWORD_SKEW_SIZE}static decodeCodewords(s,o,c){if(s.length===0)throw X.getFormatInstance();let d=1<<o+1,g=yt.correctErrors(s,c,d);yt.verifyCodewordCount(s,d);let p=ye.decode(s,""+o);return p.setErrorsCorrected(g),p.setErasures(c.length),p}static correctErrors(s,o,c){if(o!=null&&o.length>c/2+yt.MAX_ERRORS||c<0||c>yt.MAX_EC_CODEWORDS)throw I.getChecksumInstance();return yt.errorCorrection.decode(s,c,o)}static verifyCodewordCount(s,o){if(s.length<4)throw X.getFormatInstance();let c=s[0];if(c>s.length)throw X.getFormatInstance();if(c===0)if(o<s.length)s[0]=s.length-o;else throw X.getFormatInstance()}static getBitCountForCodeword(s){let o=new Int32Array(8),c=0,d=o.length-1;for(;!((s&1)!==c&&(c=s&1,d--,d<0));)o[d]++,s>>=1;return o}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return yt.getCodewordBucketNumber(yt.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let o=new Js;for(let c=0;c<s.length;c++){o.format("Row %2d: ",c);for(let d=0;d<s[c].length;d++){let g=s[c][d];g.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",g.getValue()[0],g.getConfidence(g.getValue()[0]))}o.format("%n")}return o.toString()}}yt.CODEWORD_SKEW_SIZE=2,yt.MAX_ERRORS=3,yt.MAX_EC_CODEWORDS=512,yt.errorCorrection=new po;class Yn{decode(s,o=null){let c=Yn.decode(s,o,!1);if(c==null||c.length===0||c[0]==null)throw ie.getNotFoundInstance();return c[0]}decodeMultiple(s,o=null){try{return Yn.decode(s,o,!0)}catch(c){throw c instanceof X||c instanceof I?ie.getNotFoundInstance():c}}static decode(s,o,c){const d=new Array,g=ft.detectMultiple(s,o,c);for(const p of g.getPoints()){const w=yt.decode(g.getBits(),p[4],p[5],p[6],p[7],Yn.getMinCodewordWidth(p),Yn.getMaxCodewordWidth(p)),S=new Oe(w.getText(),w.getRawBytes(),void 0,p,we.PDF_417);S.putMetadata(Ge.ERROR_CORRECTION_LEVEL,w.getECLevel());const _=w.getOther();_!=null&&S.putMetadata(Ge.PDF417_EXTRA_METADATA,_),d.push(S)}return d.map(p=>p)}static getMaxWidth(s,o){return s==null||o==null?0:Math.trunc(Math.abs(s.getX()-o.getX()))}static getMinWidth(s,o){return s==null||o==null?B.MAX_VALUE:Math.trunc(Math.abs(s.getX()-o.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(Yn.getMaxWidth(s[0],s[4]),Yn.getMaxWidth(s[6],s[2])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN),Math.max(Yn.getMaxWidth(s[1],s[5]),Yn.getMaxWidth(s[7],s[3])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(Yn.getMinWidth(s[0],s[4]),Yn.getMinWidth(s[6],s[2])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN),Math.min(Yn.getMinWidth(s[1],s[5]),Yn.getMinWidth(s[7],s[3])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN)))}reset(){}}class xo extends x{}xo.kind="ReaderException";class Vf{constructor(s,o){this.verbose=s===!0,o&&this.setHints(o)}decode(s,o){return o&&this.setHints(o),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const o=!r(s)&&s.get(ee.TRY_HARDER)===!0,c=r(s)?null:s.get(ee.POSSIBLE_FORMATS),d=new Array;if(!r(c)){const g=c.some(p=>p===we.UPC_A||p===we.UPC_E||p===we.EAN_13||p===we.EAN_8||p===we.CODABAR||p===we.CODE_39||p===we.CODE_93||p===we.CODE_128||p===we.ITF||p===we.RSS_14||p===we.RSS_EXPANDED);g&&!o&&d.push(new Xs(s,this.verbose)),c.includes(we.QR_CODE)&&d.push(new Is),c.includes(we.DATA_MATRIX)&&d.push(new Zi),c.includes(we.AZTEC)&&d.push(new ln),c.includes(we.PDF_417)&&d.push(new Yn),g&&o&&d.push(new Xs(s,this.verbose))}d.length===0&&(o||d.push(new Xs(s,this.verbose)),d.push(new Is),d.push(new Zi),d.push(new ln),d.push(new Yn),o&&d.push(new Xs(s,this.verbose))),this.readers=d}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new xo("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(s,this.hints)}catch(c){if(c instanceof xo)continue}throw new ie("No MultiFormat Readers were able to detect the code.")}}class s0 extends oe{constructor(s=null,o=500){const c=new Vf;c.setHints(s),super(c,o)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class r0 extends oe{constructor(s=500){super(new Yn,s)}}class a0 extends oe{constructor(s=500){super(new Is,s)}}var yo;(function(L){L[L.ERROR_CORRECTION=0]="ERROR_CORRECTION",L[L.CHARACTER_SET=1]="CHARACTER_SET",L[L.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",L[L.MIN_SIZE=3]="MIN_SIZE",L[L.MAX_SIZE=4]="MAX_SIZE",L[L.MARGIN=5]="MARGIN",L[L.PDF417_COMPACT=6]="PDF417_COMPACT",L[L.PDF417_COMPACTION=7]="PDF417_COMPACTION",L[L.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",L[L.AZTEC_LAYERS=9]="AZTEC_LAYERS",L[L.QR_VERSION=10]="QR_VERSION"})(yo||(yo={}));var In=yo;class Vc{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new _e(s,Int32Array.from([1])))}buildGenerator(s){const o=this.cachedGenerators;if(s>=o.length){let c=o[o.length-1];const d=this.field;for(let g=o.length;g<=s;g++){const p=c.multiply(new _e(d,Int32Array.from([1,d.exp(g-1+d.getGeneratorBase())])));o.push(p),c=p}}return o[s]}encode(s,o){if(o===0)throw new A("No error correction bytes");const c=s.length-o;if(c<=0)throw new A("No data bytes provided");const d=this.buildGenerator(o),g=new Int32Array(c);j.arraycopy(s,0,g,0,c);let p=new _e(this.field,g);p=p.multiplyByMonomial(o,1);const S=p.divide(d)[1].getCoefficients(),_=o-S.length;for(let O=0;O<_;O++)s[c+O]=0;j.arraycopy(S,0,s,c+_,S.length)}}class dn{constructor(){}static applyMaskPenaltyRule1(s){return dn.applyMaskPenaltyRule1Internal(s,!0)+dn.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let o=0;const c=s.getArray(),d=s.getWidth(),g=s.getHeight();for(let p=0;p<g-1;p++){const w=c[p];for(let S=0;S<d-1;S++){const _=w[S];_===w[S+1]&&_===c[p+1][S]&&_===c[p+1][S+1]&&o++}}return dn.N2*o}static applyMaskPenaltyRule3(s){let o=0;const c=s.getArray(),d=s.getWidth(),g=s.getHeight();for(let p=0;p<g;p++)for(let w=0;w<d;w++){const S=c[p];w+6<d&&S[w]===1&&S[w+1]===0&&S[w+2]===1&&S[w+3]===1&&S[w+4]===1&&S[w+5]===0&&S[w+6]===1&&(dn.isWhiteHorizontal(S,w-4,w)||dn.isWhiteHorizontal(S,w+7,w+11))&&o++,p+6<g&&c[p][w]===1&&c[p+1][w]===0&&c[p+2][w]===1&&c[p+3][w]===1&&c[p+4][w]===1&&c[p+5][w]===0&&c[p+6][w]===1&&(dn.isWhiteVertical(c,w,p-4,p)||dn.isWhiteVertical(c,w,p+7,p+11))&&o++}return o*dn.N3}static isWhiteHorizontal(s,o,c){o=Math.max(o,0),c=Math.min(c,s.length);for(let d=o;d<c;d++)if(s[d]===1)return!1;return!0}static isWhiteVertical(s,o,c,d){c=Math.max(c,0),d=Math.min(d,s.length);for(let g=c;g<d;g++)if(s[g][o]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let o=0;const c=s.getArray(),d=s.getWidth(),g=s.getHeight();for(let S=0;S<g;S++){const _=c[S];for(let O=0;O<d;O++)_[O]===1&&o++}const p=s.getHeight()*s.getWidth();return Math.floor(Math.abs(o*2-p)*10/p)*dn.N4}static getDataMaskBit(s,o,c){let d,g;switch(s){case 0:d=c+o&1;break;case 1:d=c&1;break;case 2:d=o%3;break;case 3:d=(c+o)%3;break;case 4:d=Math.floor(c/2)+Math.floor(o/3)&1;break;case 5:g=c*o,d=(g&1)+g%3;break;case 6:g=c*o,d=(g&1)+g%3&1;break;case 7:g=c*o,d=g%3+(c+o&1)&1;break;default:throw new A("Invalid mask pattern: "+s)}return d===0}static applyMaskPenaltyRule1Internal(s,o){let c=0;const d=o?s.getHeight():s.getWidth(),g=o?s.getWidth():s.getHeight(),p=s.getArray();for(let w=0;w<d;w++){let S=0,_=-1;for(let O=0;O<g;O++){const k=o?p[w][O]:p[O][w];k===_?S++:(S>=5&&(c+=dn.N1+(S-5)),S=1,_=k)}S>=5&&(c+=dn.N1+(S-5))}return c}}dn.N1=3,dn.N2=3,dn.N3=40,dn.N4=10;class bo{constructor(s,o){this.width=s,this.height=o;const c=new Array(o);for(let d=0;d!==o;d++)c[d]=new Uint8Array(s);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(s,o){return this.bytes[o][s]}getArray(){return this.bytes}setNumber(s,o,c){this.bytes[o][s]=c}setBoolean(s,o,c){this.bytes[o][s]=c?1:0}clear(s){for(const o of this.bytes)q.fill(o,s)}equals(s){if(!(s instanceof bo))return!1;const o=s;if(this.width!==o.width||this.height!==o.height)return!1;for(let c=0,d=this.height;c<d;++c){const g=this.bytes[c],p=o.bytes[c];for(let w=0,S=this.width;w<S;++w)if(g[w]!==p[w])return!1}return!0}toString(){const s=new le;for(let o=0,c=this.height;o<c;++o){const d=this.bytes[o];for(let g=0,p=this.width;g<p;++g)switch(d[g]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class Cr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new le;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<Cr.NUM_MASK_PATTERNS}}Cr.NUM_MASK_PATTERNS=8;class Yt extends x{}Yt.kind="WriterException";class Je{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,o,c,d,g){Je.clearMatrix(g),Je.embedBasicPatterns(c,g),Je.embedTypeInfo(o,d,g),Je.maybeEmbedVersionInfo(c,g),Je.embedDataBits(s,d,g)}static embedBasicPatterns(s,o){Je.embedPositionDetectionPatternsAndSeparators(o),Je.embedDarkDotAtLeftBottomCorner(o),Je.maybeEmbedPositionAdjustmentPatterns(s,o),Je.embedTimingPatterns(o)}static embedTypeInfo(s,o,c){const d=new V;Je.makeTypeInfoBits(s,o,d);for(let g=0,p=d.getSize();g<p;++g){const w=d.get(d.getSize()-1-g),S=Je.TYPE_INFO_COORDINATES[g],_=S[0],O=S[1];if(c.setBoolean(_,O,w),g<8){const k=c.getWidth()-g-1;c.setBoolean(k,8,w)}else{const P=c.getHeight()-7+(g-8);c.setBoolean(8,P,w)}}}static maybeEmbedVersionInfo(s,o){if(s.getVersionNumber()<7)return;const c=new V;Je.makeVersionInfoBits(s,c);let d=6*3-1;for(let g=0;g<6;++g)for(let p=0;p<3;++p){const w=c.get(d);d--,o.setBoolean(g,o.getHeight()-11+p,w),o.setBoolean(o.getHeight()-11+p,g,w)}}static embedDataBits(s,o,c){let d=0,g=-1,p=c.getWidth()-1,w=c.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);w>=0&&w<c.getHeight();){for(let S=0;S<2;++S){const _=p-S;if(!Je.isEmpty(c.get(_,w)))continue;let O;d<s.getSize()?(O=s.get(d),++d):O=!1,o!==255&&dn.getDataMaskBit(o,_,w)&&(O=!O),c.setBoolean(_,w,O)}w+=g}g=-g,w+=g,p-=2}if(d!==s.getSize())throw new Yt("Not all bits consumed: "+d+"/"+s.getSize())}static findMSBSet(s){return 32-B.numberOfLeadingZeros(s)}static calculateBCHCode(s,o){if(o===0)throw new A("0 polynomial");const c=Je.findMSBSet(o);for(s<<=c-1;Je.findMSBSet(s)>=c;)s^=o<<Je.findMSBSet(s)-c;return s}static makeTypeInfoBits(s,o,c){if(!Cr.isValidMaskPattern(o))throw new Yt("Invalid mask pattern");const d=s.getBits()<<3|o;c.appendBits(d,5);const g=Je.calculateBCHCode(d,Je.TYPE_INFO_POLY);c.appendBits(g,10);const p=new V;if(p.appendBits(Je.TYPE_INFO_MASK_PATTERN,15),c.xor(p),c.getSize()!==15)throw new Yt("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(s,o){o.appendBits(s.getVersionNumber(),6);const c=Je.calculateBCHCode(s.getVersionNumber(),Je.VERSION_INFO_POLY);if(o.appendBits(c,12),o.getSize()!==18)throw new Yt("should not happen but we got: "+o.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let o=8;o<s.getWidth()-8;++o){const c=(o+1)%2;Je.isEmpty(s.get(o,6))&&s.setNumber(o,6,c),Je.isEmpty(s.get(6,o))&&s.setNumber(6,o,c)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new Yt;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,o,c){for(let d=0;d<8;++d){if(!Je.isEmpty(c.get(s+d,o)))throw new Yt;c.setNumber(s+d,o,0)}}static embedVerticalSeparationPattern(s,o,c){for(let d=0;d<7;++d){if(!Je.isEmpty(c.get(s,o+d)))throw new Yt;c.setNumber(s,o+d,0)}}static embedPositionAdjustmentPattern(s,o,c){for(let d=0;d<5;++d){const g=Je.POSITION_ADJUSTMENT_PATTERN[d];for(let p=0;p<5;++p)c.setNumber(s+p,o+d,g[p])}}static embedPositionDetectionPattern(s,o,c){for(let d=0;d<7;++d){const g=Je.POSITION_DETECTION_PATTERN[d];for(let p=0;p<7;++p)c.setNumber(s+p,o+d,g[p])}}static embedPositionDetectionPatternsAndSeparators(s){const o=Je.POSITION_DETECTION_PATTERN[0].length;Je.embedPositionDetectionPattern(0,0,s),Je.embedPositionDetectionPattern(s.getWidth()-o,0,s),Je.embedPositionDetectionPattern(0,s.getWidth()-o,s);const c=8;Je.embedHorizontalSeparationPattern(0,c-1,s),Je.embedHorizontalSeparationPattern(s.getWidth()-c,c-1,s),Je.embedHorizontalSeparationPattern(0,s.getWidth()-c,s);const d=7;Je.embedVerticalSeparationPattern(d,0,s),Je.embedVerticalSeparationPattern(s.getHeight()-d-1,0,s),Je.embedVerticalSeparationPattern(d,s.getHeight()-d,s)}static maybeEmbedPositionAdjustmentPatterns(s,o){if(s.getVersionNumber()<2)return;const c=s.getVersionNumber()-1,d=Je.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let g=0,p=d.length;g!==p;g++){const w=d[g];if(w>=0)for(let S=0;S!==p;S++){const _=d[S];_>=0&&Je.isEmpty(o.get(_,w))&&Je.embedPositionAdjustmentPattern(_-2,w-2,o)}}}}Je.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Je.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Je.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Je.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Je.VERSION_INFO_POLY=7973,Je.TYPE_INFO_POLY=1335,Je.TYPE_INFO_MASK_PATTERN=21522;class o0{constructor(s,o){this.dataBytes=s,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class tn{constructor(){}static calculateMaskPenalty(s){return dn.applyMaskPenaltyRule1(s)+dn.applyMaskPenaltyRule2(s)+dn.applyMaskPenaltyRule3(s)+dn.applyMaskPenaltyRule4(s)}static encode(s,o,c=null){let d=tn.DEFAULT_BYTE_MODE_ENCODING;const g=c!==null&&c.get(In.CHARACTER_SET)!==void 0;g&&(d=c.get(In.CHARACTER_SET).toString());const p=this.chooseMode(s,d),w=new V;if(p===Xe.BYTE&&(g||tn.DEFAULT_BYTE_MODE_ENCODING!==d)){const De=Y.getCharacterSetECIByName(d);De!==void 0&&this.appendECI(De,w)}this.appendModeInfo(p,w);const S=new V;this.appendBytes(s,p,S,d);let _;if(c!==null&&c.get(In.QR_VERSION)!==void 0){const De=Number.parseInt(c.get(In.QR_VERSION).toString(),10);_=Ye.getVersionForNumber(De);const Ne=this.calculateBitsNeeded(p,w,S,_);if(!this.willFit(Ne,_,o))throw new Yt("Data too big for requested version")}else _=this.recommendVersion(o,p,w,S);const O=new V;O.appendBitArray(w);const k=p===Xe.BYTE?S.getSizeInBytes():s.length;this.appendLengthInfo(k,_,p,O),O.appendBitArray(S);const P=_.getECBlocksForLevel(o),G=_.getTotalCodewords()-P.getTotalECCodewords();this.terminateBits(G,O);const Q=this.interleaveWithECBytes(O,_.getTotalCodewords(),G,P.getNumBlocks()),te=new Cr;te.setECLevel(o),te.setMode(p),te.setVersion(_);const ue=_.getDimensionForVersion(),pe=new bo(ue,ue),Re=this.chooseMaskPattern(Q,o,_,pe);return te.setMaskPattern(Re),Je.buildMatrix(Q,o,_,Re,pe),te.setMatrix(pe),te}static recommendVersion(s,o,c,d){const g=this.calculateBitsNeeded(o,c,d,Ye.getVersionForNumber(1)),p=this.chooseVersion(g,s),w=this.calculateBitsNeeded(o,c,d,p);return this.chooseVersion(w,s)}static calculateBitsNeeded(s,o,c,d){return o.getSize()+s.getCharacterCountBits(d)+c.getSize()}static getAlphanumericCode(s){return s<tn.ALPHANUMERIC_TABLE.length?tn.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,o=null){if(Y.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(s))return Xe.KANJI;let c=!1,d=!1;for(let g=0,p=s.length;g<p;++g){const w=s.charAt(g);if(tn.isDigit(w))c=!0;else if(this.getAlphanumericCode(w.charCodeAt(0))!==-1)d=!0;else return Xe.BYTE}return d?Xe.ALPHANUMERIC:c?Xe.NUMERIC:Xe.BYTE}static isOnlyDoubleByteKanji(s){let o;try{o=Te.encode(s,Y.SJIS)}catch{return!1}const c=o.length;if(c%2!==0)return!1;for(let d=0;d<c;d+=2){const g=o[d]&255;if((g<129||g>159)&&(g<224||g>235))return!1}return!0}static chooseMaskPattern(s,o,c,d){let g=Number.MAX_SAFE_INTEGER,p=-1;for(let w=0;w<Cr.NUM_MASK_PATTERNS;w++){Je.buildMatrix(s,o,c,w,d);let S=this.calculateMaskPenalty(d);S<g&&(g=S,p=w)}return p}static chooseVersion(s,o){for(let c=1;c<=40;c++){const d=Ye.getVersionForNumber(c);if(tn.willFit(s,d,o))return d}throw new Yt("Data too big")}static willFit(s,o,c){const d=o.getTotalCodewords(),p=o.getECBlocksForLevel(c).getTotalECCodewords(),w=d-p,S=(s+7)/8;return w>=S}static terminateBits(s,o){const c=s*8;if(o.getSize()>c)throw new Yt("data bits cannot fit in the QR Code"+o.getSize()+" > "+c);for(let p=0;p<4&&o.getSize()<c;++p)o.appendBit(!1);const d=o.getSize()&7;if(d>0)for(let p=d;p<8;p++)o.appendBit(!1);const g=s-o.getSizeInBytes();for(let p=0;p<g;++p)o.appendBits((p&1)===0?236:17,8);if(o.getSize()!==c)throw new Yt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,o,c,d,g,p){if(d>=c)throw new Yt("Block ID too large");const w=s%c,S=c-w,_=Math.floor(s/c),O=_+1,k=Math.floor(o/c),P=k+1,G=_-k,Q=O-P;if(G!==Q)throw new Yt("EC bytes mismatch");if(c!==S+w)throw new Yt("RS blocks mismatch");if(s!==(k+G)*S+(P+Q)*w)throw new Yt("Total bytes mismatch");d<S?(g[0]=k,p[0]=G):(g[0]=P,p[0]=Q)}static interleaveWithECBytes(s,o,c,d){if(s.getSizeInBytes()!==c)throw new Yt("Number of bits and data bytes does not match");let g=0,p=0,w=0;const S=new Array;for(let O=0;O<d;++O){const k=new Int32Array(1),P=new Int32Array(1);tn.getNumDataBytesAndNumECBytesForBlockID(o,c,d,O,k,P);const G=k[0],Q=new Uint8Array(G);s.toBytes(8*g,Q,0,G);const te=tn.generateECBytes(Q,P[0]);S.push(new o0(Q,te)),p=Math.max(p,G),w=Math.max(w,te.length),g+=k[0]}if(c!==g)throw new Yt("Data bytes does not match offset");const _=new V;for(let O=0;O<p;++O)for(const k of S){const P=k.getDataBytes();O<P.length&&_.appendBits(P[O],8)}for(let O=0;O<w;++O)for(const k of S){const P=k.getErrorCorrectionBytes();O<P.length&&_.appendBits(P[O],8)}if(o!==_.getSizeInBytes())throw new Yt("Interleaving error: "+o+" and "+_.getSizeInBytes()+" differ.");return _}static generateECBytes(s,o){const c=s.length,d=new Int32Array(c+o);for(let p=0;p<c;p++)d[p]=s[p]&255;new Vc(je.QR_CODE_FIELD_256).encode(d,o);const g=new Uint8Array(o);for(let p=0;p<o;p++)g[p]=d[c+p];return g}static appendModeInfo(s,o){o.appendBits(s.getBits(),4)}static appendLengthInfo(s,o,c,d){const g=c.getCharacterCountBits(o);if(s>=1<<g)throw new Yt(s+" is bigger than "+((1<<g)-1));d.appendBits(s,g)}static appendBytes(s,o,c,d){switch(o){case Xe.NUMERIC:tn.appendNumericBytes(s,c);break;case Xe.ALPHANUMERIC:tn.appendAlphanumericBytes(s,c);break;case Xe.BYTE:tn.append8BitBytes(s,c,d);break;case Xe.KANJI:tn.appendKanjiBytes(s,c);break;default:throw new Yt("Invalid mode: "+o)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const o=tn.getDigit(s);return o>=0&&o<=9}static appendNumericBytes(s,o){const c=s.length;let d=0;for(;d<c;){const g=tn.getDigit(s.charAt(d));if(d+2<c){const p=tn.getDigit(s.charAt(d+1)),w=tn.getDigit(s.charAt(d+2));o.appendBits(g*100+p*10+w,10),d+=3}else if(d+1<c){const p=tn.getDigit(s.charAt(d+1));o.appendBits(g*10+p,7),d+=2}else o.appendBits(g,4),d++}}static appendAlphanumericBytes(s,o){const c=s.length;let d=0;for(;d<c;){const g=tn.getAlphanumericCode(s.charCodeAt(d));if(g===-1)throw new Yt;if(d+1<c){const p=tn.getAlphanumericCode(s.charCodeAt(d+1));if(p===-1)throw new Yt;o.appendBits(g*45+p,11),d+=2}else o.appendBits(g,6),d++}}static append8BitBytes(s,o,c){let d;try{d=Te.encode(s,c)}catch(g){throw new Yt(g)}for(let g=0,p=d.length;g!==p;g++){const w=d[g];o.appendBits(w,8)}}static appendKanjiBytes(s,o){let c;try{c=Te.encode(s,Y.SJIS)}catch(g){throw new Yt(g)}const d=c.length;for(let g=0;g<d;g+=2){const p=c[g]&255,w=c[g+1]&255,S=p<<8&4294967295|w;let _=-1;if(S>=33088&&S<=40956?_=S-33088:S>=57408&&S<=60351&&(_=S-49472),_===-1)throw new Yt("Invalid byte sequence");const O=(_>>8)*192+(_&255);o.appendBits(O,13)}}static appendECI(s,o){o.appendBits(Xe.ECI.getBits(),4),o.appendBits(s.getValue(),8)}}tn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),tn.DEFAULT_BYTE_MODE_ENCODING=Y.UTF8.getName();class Ar{write(s,o,c,d=null){if(s.length===0)throw new A("Found empty contents");if(o<0||c<0)throw new A("Requested dimensions are too small: "+o+"x"+c);let g=Ht.L,p=Ar.QUIET_ZONE_SIZE;d!==null&&(d.get(In.ERROR_CORRECTION)!==void 0&&(g=Ht.fromString(d.get(In.ERROR_CORRECTION).toString())),d.get(In.MARGIN)!==void 0&&(p=Number.parseInt(d.get(In.MARGIN).toString(),10)));const w=tn.encode(s,g,d);return this.renderResult(w,o,c,p)}writeToDom(s,o,c,d,g=null){typeof s=="string"&&(s=document.querySelector(s));const p=this.write(o,c,d,g);s&&s.appendChild(p)}renderResult(s,o,c,d){const g=s.getMatrix();if(g===null)throw new Ke;const p=g.getWidth(),w=g.getHeight(),S=p+d*2,_=w+d*2,O=Math.max(o,S),k=Math.max(c,_),P=Math.min(Math.floor(O/S),Math.floor(k/_)),G=Math.floor((O-p*P)/2),Q=Math.floor((k-w*P)/2),te=this.createSVGElement(O,k);for(let ue=0,pe=Q;ue<w;ue++,pe+=P)for(let Re=0,De=G;Re<p;Re++,De+=P)if(g.get(Re,ue)===1){const Ne=this.createSvgRectElement(De,pe,P,P);te.appendChild(Ne)}return te}createSVGElement(s,o){const c=document.createElementNS(Ar.SVG_NS,"svg");return c.setAttributeNS(null,"height",s.toString()),c.setAttributeNS(null,"width",o.toString()),c}createSvgRectElement(s,o,c,d){const g=document.createElementNS(Ar.SVG_NS,"rect");return g.setAttributeNS(null,"x",s.toString()),g.setAttributeNS(null,"y",o.toString()),g.setAttributeNS(null,"height",c.toString()),g.setAttributeNS(null,"width",d.toString()),g.setAttributeNS(null,"fill","#000000"),g}}Ar.QUIET_ZONE_SIZE=4,Ar.SVG_NS="http://www.w3.org/2000/svg";class fa{encode(s,o,c,d,g){if(s.length===0)throw new A("Found empty contents");if(o!==we.QR_CODE)throw new A("Can only encode QR_CODE, but got "+o);if(c<0||d<0)throw new A(`Requested dimensions are too small: ${c}x${d}`);let p=Ht.L,w=fa.QUIET_ZONE_SIZE;g!==null&&(g.get(In.ERROR_CORRECTION)!==void 0&&(p=Ht.fromString(g.get(In.ERROR_CORRECTION).toString())),g.get(In.MARGIN)!==void 0&&(w=Number.parseInt(g.get(In.MARGIN).toString(),10)));const S=tn.encode(s,p,g);return fa.renderResult(S,c,d,w)}static renderResult(s,o,c,d){const g=s.getMatrix();if(g===null)throw new Ke;const p=g.getWidth(),w=g.getHeight(),S=p+d*2,_=w+d*2,O=Math.max(o,S),k=Math.max(c,_),P=Math.min(Math.floor(O/S),Math.floor(k/_)),G=Math.floor((O-p*P)/2),Q=Math.floor((k-w*P)/2),te=new ke(O,k);for(let ue=0,pe=Q;ue<w;ue++,pe+=P)for(let Re=0,De=G;Re<p;Re++,De+=P)g.get(Re,ue)===1&&te.setRegion(De,pe,P,P);return te}}fa.QUIET_ZONE_SIZE=4;class l0{encode(s,o,c,d,g){let p;switch(o){case we.QR_CODE:p=new fa;break;default:throw new A("No encoder available for format "+o)}return p.encode(s,o,c,d,g)}}class fs extends Ie{constructor(s,o,c,d,g,p,w,S){if(super(p,w),this.yuvData=s,this.dataWidth=o,this.dataHeight=c,this.left=d,this.top=g,d+p>o||g+w>c)throw new A("Crop rectangle does not fit within image data.");S&&this.reverseHorizontal(p,w)}getRow(s,o){if(s<0||s>=this.getHeight())throw new A("Requested row is outside the image: "+s);const c=this.getWidth();(o==null||o.length<c)&&(o=new Uint8ClampedArray(c));const d=(s+this.top)*this.dataWidth+this.left;return j.arraycopy(this.yuvData,d,o,0,c),o}getMatrix(){const s=this.getWidth(),o=this.getHeight();if(s===this.dataWidth&&o===this.dataHeight)return this.yuvData;const c=s*o,d=new Uint8ClampedArray(c);let g=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return j.arraycopy(this.yuvData,g,d,0,c),d;for(let p=0;p<o;p++){const w=p*s;j.arraycopy(this.yuvData,g,d,w,s),g+=this.dataWidth}return d}isCropSupported(){return!0}crop(s,o,c,d){return new fs(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+o,c,d,!1)}renderThumbnail(){const s=this.getWidth()/fs.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/fs.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(s*o),d=this.yuvData;let g=this.top*this.dataWidth+this.left;for(let p=0;p<o;p++){const w=p*s;for(let S=0;S<s;S++){const _=d[g+S*fs.THUMBNAIL_SCALE_FACTOR]&255;c[w+S]=4278190080|_*65793}g+=this.dataWidth*fs.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/fs.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/fs.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,o){const c=this.yuvData;for(let d=0,g=this.top*this.dataWidth+this.left;d<o;d++,g+=this.dataWidth){const p=g+s/2;for(let w=g,S=g+s-1;w<p;w++,S--){const _=c[w];c[w]=c[S],c[S]=_}}}invert(){return new Ue(this)}}fs.THUMBNAIL_SCALE_FACTOR=2;class wo extends Ie{constructor(s,o,c,d,g,p,w){if(super(o,c),this.dataWidth=d,this.dataHeight=g,this.left=p,this.top=w,s.BYTES_PER_ELEMENT===4){const S=o*c,_=new Uint8ClampedArray(S);for(let O=0;O<S;O++){const k=s[O],P=k>>16&255,G=k>>7&510,Q=k&255;_[O]=(P+G+Q)/4&255}this.luminances=_}else this.luminances=s;if(d===void 0&&(this.dataWidth=o),g===void 0&&(this.dataHeight=c),p===void 0&&(this.left=0),w===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+c>this.dataHeight)throw new A("Crop rectangle does not fit within image data.")}getRow(s,o){if(s<0||s>=this.getHeight())throw new A("Requested row is outside the image: "+s);const c=this.getWidth();(o==null||o.length<c)&&(o=new Uint8ClampedArray(c));const d=(s+this.top)*this.dataWidth+this.left;return j.arraycopy(this.luminances,d,o,0,c),o}getMatrix(){const s=this.getWidth(),o=this.getHeight();if(s===this.dataWidth&&o===this.dataHeight)return this.luminances;const c=s*o,d=new Uint8ClampedArray(c);let g=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return j.arraycopy(this.luminances,g,d,0,c),d;for(let p=0;p<o;p++){const w=p*s;j.arraycopy(this.luminances,g,d,w,s),g+=this.dataWidth}return d}isCropSupported(){return!0}crop(s,o,c,d){return new wo(this.luminances,c,d,this.dataWidth,this.dataHeight,this.left+s,this.top+o)}invert(){return new Ue(this)}}class da extends Y{static forName(s){return this.getCharacterSetECIByName(s)}}class zc{}zc.ISO_8859_1=Y.ISO8859_1;class Hc{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class $c{static singletonList(s){return[s]}static min(s,o){return s.sort(o)[0]}}class zf{constructor(s){this.previous=s}getPrevious(){return this.previous}}class Tr extends zf{constructor(s,o,c){super(s),this.value=o,this.bitCount=c}appendTo(s,o){s.appendBits(this.value,this.bitCount)}add(s,o){return new Tr(this,s,o)}addBinaryShift(s,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Tr(this,s,o)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+B.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class vl extends Tr{constructor(s,o,c){super(s,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=c}appendTo(s,o){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):c===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(o[this.binaryShiftStart+c],8)}addBinaryShift(s,o){return new vl(this,s,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ha(L,s,o){return new vl(L,s,o)}function vo(L,s,o){return new Tr(L,s,o)}const c0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ir=0,Eo=1,Ni=2,ga=3,xi=4,u0=new Tr(null,0,0),ma=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Hf(L){for(let s of L)q.fill(s,-1);return L[ir][xi]=0,L[Eo][xi]=0,L[Eo][ir]=28,L[ga][xi]=0,L[Ni][xi]=0,L[Ni][ir]=15,L}const Gc=Hf(q.createInt32Array(6,6));class Pi{constructor(s,o,c,d){this.token=s,this.mode=o,this.binaryShiftByteCount=c,this.bitCount=d}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,o){let c=this.bitCount,d=this.token;if(s!==this.mode){let p=ma[this.mode][s];d=vo(d,p&65535,p>>16),c+=p>>16}let g=s===Ni?4:5;return d=vo(d,o,g),new Pi(d,s,0,c+g)}shiftAndAppend(s,o){let c=this.token,d=this.mode===Ni?4:5;return c=vo(c,Gc[this.mode][s],d),c=vo(c,o,5),new Pi(c,this.mode,0,this.bitCount+d+5)}addBinaryShiftChar(s){let o=this.token,c=this.mode,d=this.bitCount;if(this.mode===xi||this.mode===Ni){let w=ma[c][ir];o=vo(o,w&65535,w>>16),d+=w>>16,c=ir}let g=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new Pi(o,c,this.binaryShiftByteCount+1,d+g);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(s+1)),p}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=ha(o,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new Pi(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let o=this.bitCount+(ma[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?o+=Pi.calculateBinaryShiftCost(s)-Pi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(o+=10),o<=s.bitCount}toBitArray(s){let o=[];for(let d=this.endBinaryShift(s.length).token;d!==null;d=d.getPrevious())o.unshift(d);let c=new V;for(const d of o)d.appendTo(c,s);return c}toString(){return ve.format("%s bits=%d bytes=%d",c0[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}Pi.INITIAL_STATE=new Pi(u0,ir,0,0);function qc(L){const s=ve.getCharCode(" "),o=ve.getCharCode("."),c=ve.getCharCode(",");L[ir][s]=1;const d=ve.getCharCode("Z"),g=ve.getCharCode("A");for(let P=g;P<=d;P++)L[ir][P]=P-g+2;L[Eo][s]=1;const p=ve.getCharCode("z"),w=ve.getCharCode("a");for(let P=w;P<=p;P++)L[Eo][P]=P-w+2;L[Ni][s]=1;const S=ve.getCharCode("9"),_=ve.getCharCode("0");for(let P=_;P<=S;P++)L[Ni][P]=P-_+2;L[Ni][c]=12,L[Ni][o]=13;const O=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let P=0;P<O.length;P++)L[ga][ve.getCharCode(O[P])]=P;const k=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let P=0;P<k.length;P++)ve.getCharCode(k[P])>0&&(L[xi][ve.getCharCode(k[P])]=P);return L}const El=qc(q.createInt32Array(5,256));class pa{constructor(s){this.text=s}encode(){const s=ve.getCharCode(" "),o=ve.getCharCode(`
`);let c=$c.singletonList(Pi.INITIAL_STATE);for(let g=0;g<this.text.length;g++){let p,w=g+1<this.text.length?this.text[g+1]:0;switch(this.text[g]){case ve.getCharCode("\r"):p=w===o?2:0;break;case ve.getCharCode("."):p=w===s?3:0;break;case ve.getCharCode(","):p=w===s?4:0;break;case ve.getCharCode(":"):p=w===s?5:0;break;default:p=0}p>0?(c=pa.updateStateListForPair(c,g,p),g++):c=this.updateStateListForChar(c,g)}return $c.min(c,(g,p)=>g.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,o){const c=[];for(let d of s)this.updateStateForChar(d,o,c);return pa.simplifyStates(c)}updateStateForChar(s,o,c){let d=this.text[o]&255,g=El[s.getMode()][d]>0,p=null;for(let w=0;w<=xi;w++){let S=El[w][d];if(S>0){if(p==null&&(p=s.endBinaryShift(o)),!g||w===s.getMode()||w===Ni){const _=p.latchAndAppend(w,S);c.push(_)}if(!g&&Gc[s.getMode()][w]>=0){const _=p.shiftAndAppend(w,S);c.push(_)}}}if(s.getBinaryShiftByteCount()>0||El[s.getMode()][d]===0){let w=s.addBinaryShiftChar(o);c.push(w)}}static updateStateListForPair(s,o,c){const d=[];for(let g of s)this.updateStateForPair(g,o,c,d);return this.simplifyStates(d)}static updateStateForPair(s,o,c,d){let g=s.endBinaryShift(o);if(d.push(g.latchAndAppend(xi,c)),s.getMode()!==xi&&d.push(g.shiftAndAppend(xi,c)),c===3||c===4){let p=g.latchAndAppend(Ni,16-c).latchAndAppend(Ni,1);d.push(p)}if(s.getBinaryShiftByteCount()>0){let p=s.addBinaryShiftChar(o).addBinaryShiftChar(o+1);d.push(p)}}static simplifyStates(s){let o=[];for(const c of s){let d=!0;for(const g of o){if(g.isBetterThanOrEqualTo(c)){d=!1;break}c.isBetterThanOrEqualTo(g)&&(o=o.filter(p=>p!==g))}d&&o.push(c)}return o}}class Mt{constructor(){}static encodeBytes(s){return Mt.encode(s,Mt.DEFAULT_EC_PERCENT,Mt.DEFAULT_AZTEC_LAYERS)}static encode(s,o,c){let d=new pa(s).encode(),g=B.truncDivision(d.getSize()*o,100)+11,p=d.getSize()+g,w,S,_,O,k;if(c!==Mt.DEFAULT_AZTEC_LAYERS){if(w=c<0,S=Math.abs(c),S>(w?Mt.MAX_NB_BITS_COMPACT:Mt.MAX_NB_BITS))throw new A(ve.format("Illegal value %s for layers",c));_=Mt.totalBitsInLayer(S,w),O=Mt.WORD_SIZE[S];let Ne=_-_%O;if(k=Mt.stuffBits(d,O),k.getSize()+g>Ne)throw new A("Data to large for user specified layer");if(w&&k.getSize()>O*64)throw new A("Data to large for user specified layer")}else{O=0,k=null;for(let Ne=0;;Ne++){if(Ne>Mt.MAX_NB_BITS)throw new A("Data too large for an Aztec code");if(w=Ne<=3,S=w?Ne+1:Ne,_=Mt.totalBitsInLayer(S,w),p>_)continue;(k==null||O!==Mt.WORD_SIZE[S])&&(O=Mt.WORD_SIZE[S],k=Mt.stuffBits(d,O));let dt=_-_%O;if(!(w&&k.getSize()>O*64)&&k.getSize()+g<=dt)break}}let P=Mt.generateCheckWords(k,_,O),G=k.getSize()/O,Q=Mt.generateModeMessage(w,S,G),te=(w?11:14)+S*4,ue=new Int32Array(te),pe;if(w){pe=te;for(let Ne=0;Ne<ue.length;Ne++)ue[Ne]=Ne}else{pe=te+1+2*B.truncDivision(B.truncDivision(te,2)-1,15);let Ne=B.truncDivision(te,2),dt=B.truncDivision(pe,2);for(let ut=0;ut<Ne;ut++){let li=ut+B.truncDivision(ut,15);ue[Ne-ut-1]=dt-li-1,ue[Ne+ut]=dt+li+1}}let Re=new ke(pe);for(let Ne=0,dt=0;Ne<S;Ne++){let ut=(S-Ne)*4+(w?9:12);for(let li=0;li<ut;li++){let Ui=li*2;for(let yi=0;yi<2;yi++)P.get(dt+Ui+yi)&&Re.set(ue[Ne*2+yi],ue[Ne*2+li]),P.get(dt+ut*2+Ui+yi)&&Re.set(ue[Ne*2+li],ue[te-1-Ne*2-yi]),P.get(dt+ut*4+Ui+yi)&&Re.set(ue[te-1-Ne*2-yi],ue[te-1-Ne*2-li]),P.get(dt+ut*6+Ui+yi)&&Re.set(ue[te-1-Ne*2-li],ue[Ne*2+yi])}dt+=ut*8}if(Mt.drawModeMessage(Re,w,pe,Q),w)Mt.drawBullsEye(Re,B.truncDivision(pe,2),5);else{Mt.drawBullsEye(Re,B.truncDivision(pe,2),7);for(let Ne=0,dt=0;Ne<B.truncDivision(te,2)-1;Ne+=15,dt+=16)for(let ut=B.truncDivision(pe,2)&1;ut<pe;ut+=2)Re.set(B.truncDivision(pe,2)-dt,ut),Re.set(B.truncDivision(pe,2)+dt,ut),Re.set(ut,B.truncDivision(pe,2)-dt),Re.set(ut,B.truncDivision(pe,2)+dt)}let De=new Hc;return De.setCompact(w),De.setSize(pe),De.setLayers(S),De.setCodeWords(G),De.setMatrix(Re),De}static drawBullsEye(s,o,c){for(let d=0;d<c;d+=2)for(let g=o-d;g<=o+d;g++)s.set(g,o-d),s.set(g,o+d),s.set(o-d,g),s.set(o+d,g);s.set(o-c,o-c),s.set(o-c+1,o-c),s.set(o-c,o-c+1),s.set(o+c,o-c),s.set(o+c,o-c+1),s.set(o+c,o+c-1)}static generateModeMessage(s,o,c){let d=new V;return s?(d.appendBits(o-1,2),d.appendBits(c-1,6),d=Mt.generateCheckWords(d,28,4)):(d.appendBits(o-1,5),d.appendBits(c-1,11),d=Mt.generateCheckWords(d,40,4)),d}static drawModeMessage(s,o,c,d){let g=B.truncDivision(c,2);if(o)for(let p=0;p<7;p++){let w=g-3+p;d.get(p)&&s.set(w,g-5),d.get(p+7)&&s.set(g+5,w),d.get(20-p)&&s.set(w,g+5),d.get(27-p)&&s.set(g-5,w)}else for(let p=0;p<10;p++){let w=g-5+p+B.truncDivision(p,5);d.get(p)&&s.set(w,g-7),d.get(p+10)&&s.set(g+7,w),d.get(29-p)&&s.set(w,g+7),d.get(39-p)&&s.set(g-7,w)}}static generateCheckWords(s,o,c){let d=s.getSize()/c,g=new Vc(Mt.getGF(c)),p=B.truncDivision(o,c),w=Mt.bitsToWords(s,c,p);g.encode(w,p-d);let S=o%c,_=new V;_.appendBits(0,S);for(const O of Array.from(w))_.appendBits(O,c);return _}static bitsToWords(s,o,c){let d=new Int32Array(c),g,p;for(g=0,p=s.getSize()/o;g<p;g++){let w=0;for(let S=0;S<o;S++)w|=s.get(g*o+S)?1<<o-S-1:0;d[g]=w}return d}static getGF(s){switch(s){case 4:return je.AZTEC_PARAM;case 6:return je.AZTEC_DATA_6;case 8:return je.AZTEC_DATA_8;case 10:return je.AZTEC_DATA_10;case 12:return je.AZTEC_DATA_12;default:throw new A("Unsupported word size "+s)}}static stuffBits(s,o){let c=new V,d=s.getSize(),g=(1<<o)-2;for(let p=0;p<d;p+=o){let w=0;for(let S=0;S<o;S++)(p+S>=d||s.get(p+S))&&(w|=1<<o-1-S);(w&g)===g?(c.appendBits(w&g,o),p--):(w&g)===0?(c.appendBits(w|1,o),p--):c.appendBits(w,o)}return c}static totalBitsInLayer(s,o){return((o?88:112)+16*s)*s}}Mt.DEFAULT_EC_PERCENT=33,Mt.DEFAULT_AZTEC_LAYERS=0,Mt.MAX_NB_BITS=32,Mt.MAX_NB_BITS_COMPACT=4,Mt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Sl{encode(s,o,c,d){return this.encodeWithHints(s,o,c,d,null)}encodeWithHints(s,o,c,d,g){let p=zc.ISO_8859_1,w=Mt.DEFAULT_EC_PERCENT,S=Mt.DEFAULT_AZTEC_LAYERS;return g!=null&&(g.has(In.CHARACTER_SET)&&(p=da.forName(g.get(In.CHARACTER_SET).toString())),g.has(In.ERROR_CORRECTION)&&(w=B.parseInt(g.get(In.ERROR_CORRECTION).toString())),g.has(In.AZTEC_LAYERS)&&(S=B.parseInt(g.get(In.AZTEC_LAYERS).toString()))),Sl.encodeLayers(s,o,c,d,p,w,S)}static encodeLayers(s,o,c,d,g,p,w){if(o!==we.AZTEC)throw new A("Can only encode AZTEC, but got "+o);let S=Mt.encode(ve.getBytes(s,g),p,w);return Sl.renderResult(S,c,d)}static renderResult(s,o,c){let d=s.getMatrix();if(d==null)throw new Ke;let g=d.getWidth(),p=d.getHeight(),w=Math.max(o,g),S=Math.max(c,p),_=Math.min(w/g,S/p),O=(w-g*_)/2,k=(S-p*_)/2,P=new ke(w,S);for(let G=0,Q=k;G<p;G++,Q+=_)for(let te=0,ue=O;te<g;te++,ue+=_)d.get(te,G)&&P.setRegion(ue,Q,_,_);return P}}n.AbstractExpandedDecoder=ho,n.ArgumentException=E,n.ArithmeticException=Be,n.AztecCode=Hc,n.AztecCodeReader=ln,n.AztecCodeWriter=Sl,n.AztecDecoder=xt,n.AztecDetector=Pt,n.AztecDetectorResult=ia,n.AztecEncoder=Mt,n.AztecHighLevelEncoder=pa,n.AztecPoint=Ze,n.BarcodeFormat=we,n.Binarizer=M,n.BinaryBitmap=N,n.BitArray=V,n.BitMatrix=ke,n.BitSource=mi,n.BrowserAztecCodeReader=Ut,n.BrowserBarcodeReader=Bf,n.BrowserCodeReader=oe,n.BrowserDatamatrixCodeReader=e0,n.BrowserMultiFormatReader=s0,n.BrowserPDF417Reader=r0,n.BrowserQRCodeReader=a0,n.BrowserQRCodeSvgWriter=Ar,n.CharacterSetECI=Y,n.ChecksumException=I,n.Code128Reader=Me,n.Code39Reader=Dt,n.DataMatrixDecodedBitStreamParser=Ws,n.DataMatrixReader=Zi,n.DecodeHintType=ee,n.DecoderResult=It,n.DefaultGridSampler=Le,n.DetectorResult=wr,n.EAN13Reader=Wi,n.EncodeHintType=In,n.Exception=x,n.FormatException=X,n.GenericGF=je,n.GenericGFPoly=_e,n.GlobalHistogramBinarizer=se,n.GridSampler=sa,n.GridSamplerInstance=nt,n.HTMLCanvasElementLuminanceSource=W,n.HybridBinarizer=fe,n.ITFReader=Tt,n.IllegalArgumentException=A,n.IllegalStateException=Ke,n.InvertedLuminanceSource=Ue,n.LuminanceSource=Ie,n.MathUtils=gt,n.MultiFormatOneDReader=Xs,n.MultiFormatReader=Vf,n.MultiFormatWriter=l0,n.NotFoundException=ie,n.OneDReader=vt,n.PDF417DecodedBitStreamParser=ye,n.PDF417DecoderErrorCorrection=po,n.PDF417Reader=Yn,n.PDF417ResultMetadata=yl,n.PerspectiveTransform=kn,n.PlanarYUVLuminanceSource=fs,n.QRCodeByteMatrix=bo,n.QRCodeDataMask=qn,n.QRCodeDecodedBitStreamParser=cn,n.QRCodeDecoderErrorCorrectionLevel=Ht,n.QRCodeDecoderFormatInformation=Gn,n.QRCodeEncoder=tn,n.QRCodeEncoderQRCode=Cr,n.QRCodeMaskUtil=dn,n.QRCodeMatrixUtil=Je,n.QRCodeMode=Xe,n.QRCodeReader=Is,n.QRCodeVersion=Ye,n.QRCodeWriter=fa,n.RGBLuminanceSource=wo,n.RSS14Reader=Ft,n.RSSExpandedReader=Ae,n.ReaderException=xo,n.ReedSolomonDecoder=pt,n.ReedSolomonEncoder=Vc,n.ReedSolomonException=tt,n.Result=Oe,n.ResultMetadataType=Ge,n.ResultPoint=ze,n.StringUtils=ve,n.UnsupportedOperationException=be,n.VideoInputDevice=Z,n.WhiteRectangleDetector=Li,n.WriterException=Yt,n.ZXingArrays=q,n.ZXingCharset=da,n.ZXingInteger=B,n.ZXingStandardCharsets=zc,n.ZXingStringBuilder=le,n.ZXingStringEncoding=Te,n.ZXingSystem=j,n.createAbstractExpandedDecoder=Pc,Object.defineProperty(n,"__esModule",{value:!0})})}(qu,qu.exports)),qu.exports}var un=HV();const $V=km(un),GV=u3({__proto__:null,default:$V},[un]);var Vv=function(){function t(e,n,r){if(this.formatMap=new Map([[He.QR_CODE,un.BarcodeFormat.QR_CODE],[He.AZTEC,un.BarcodeFormat.AZTEC],[He.CODABAR,un.BarcodeFormat.CODABAR],[He.CODE_39,un.BarcodeFormat.CODE_39],[He.CODE_93,un.BarcodeFormat.CODE_93],[He.CODE_128,un.BarcodeFormat.CODE_128],[He.DATA_MATRIX,un.BarcodeFormat.DATA_MATRIX],[He.MAXICODE,un.BarcodeFormat.MAXICODE],[He.ITF,un.BarcodeFormat.ITF],[He.EAN_13,un.BarcodeFormat.EAN_13],[He.EAN_8,un.BarcodeFormat.EAN_8],[He.PDF_417,un.BarcodeFormat.PDF_417],[He.RSS_14,un.BarcodeFormat.RSS_14],[He.RSS_EXPANDED,un.BarcodeFormat.RSS_EXPANDED],[He.UPC_A,un.BarcodeFormat.UPC_A],[He.UPC_E,un.BarcodeFormat.UPC_E],[He.UPC_EAN_EXTENSION,un.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!GV)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var l=this.createZXingFormats(e),u=new Map;u.set(un.DecodeHintType.POSSIBLE_FORMATS,l),u.set(un.DecodeHintType.TRY_HARDER,!1),this.hints=u}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,l){try{r(n.decode(e))}catch(u){l(u)}})},t.prototype.decode=function(e){var n=new un.MultiFormatReader(this.verbose,this.hints),r=new un.HTMLCanvasElementLuminanceSource(e),l=new un.BinaryBitmap(new un.HybridBinarizer(r)),u=n.decode(l);return{text:u.text,format:SC.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,l){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,l=e;r<l.length;r++){var u=l[r];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.logError("".concat(u," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),qV=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(E){try{x(r.next(E))}catch(A){h(A)}}function b(E){try{x(r.throw(E))}catch(A){h(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},YV=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(x){return function(E){return b([x,E])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(E){x=[6,E],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},zv=function(){function t(e,n,r){if(this.formatMap=new Map([[He.QR_CODE,"qr_code"],[He.AZTEC,"aztec"],[He.CODABAR,"codabar"],[He.CODE_39,"code_39"],[He.CODE_93,"code_93"],[He.CODE_128,"code_128"],[He.DATA_MATRIX,"data_matrix"],[He.ITF,"itf"],[He.EAN_13,"ean_13"],[He.EAN_8,"ean_8"],[He.PDF_417,"pdf417"],[He.UPC_A,"upc_a"],[He.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var l=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return qV(this,void 0,void 0,function(){var n,r;return YV(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=l.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:SC.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,l=0,u=e;l<u.length;l++){var h=u[l],y=h.boundingBox.width*h.boundingBox.height;y>r&&(r=y,n=h)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,l=e;r<l.length;r++){var u=l[r];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.warn("".concat(u," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,l){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Hv=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(E){try{x(r.next(E))}catch(A){h(A)}}function b(E){try{x(r.throw(E))}catch(A){h(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},$v=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(x){return function(E){return b([x,E])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(E){x=[6,E],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},XV=function(){function t(e,n,r,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&zv.isSupported()?(this.primaryDecoder=new zv(e,r,l),this.secondaryDecoder=new Vv(e,r,l)):this.primaryDecoder=new Vv(e,r,l)}return t.prototype.decodeAsync=function(e){return Hv(this,void 0,void 0,function(){var n;return $v(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Hv(this,void 0,void 0,function(){var n,r;return $v(this,function(l){switch(l.label){case 0:n=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,l.sent()];case 3:if(r=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var l=r[n];e+=l}var u=e/this.executionResults.length;console.log("".concat(u," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Fp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,l){r.__proto__=l}||function(r,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(r[u]=l[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dh=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(E){try{x(r.next(E))}catch(A){h(A)}}function b(E){try{x(r.throw(E))}catch(A){h(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},Lh=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(x){return function(E){return b([x,E])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(E){x=[6,E],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},_C=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),WV=function(t){Fp(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var l={advanced:[r]};return this.track.applyConstraints(l)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(_C),KV=function(t){Fp(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(WV),ZV=function(t){Fp(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(_C),QV=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new KV(this.track)},t.prototype.torchFeature=function(){return new ZV(this.track)},t}(),JV=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,l=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,l),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,l){return Dh(this,void 0,void 0,function(){var u,h;return Lh(this,function(y){switch(y.label){case 0:return u=new t(e,n,l),r.aspectRatio?(h={aspectRatio:r.aspectRatio},[4,u.getFirstTrackOrFail().applyConstraints(h)]):[3,2];case 1:y.sent(),y.label=2;case 2:return u.setupSurface(),[2,u]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Dh(this,void 0,void 0,function(){return Lh(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var l=e.mediaStream.getVideoTracks(),u=l.length,h=0;e.mediaStream.getVideoTracks().forEach(function(y){e.mediaStream.removeTrack(y),y.stop(),++h,h>=u&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new QV(this.getFirstTrackOrFail())},t}(),ez=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return Dh(this,void 0,void 0,function(){return Lh(this,function(l){return[2,JV.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return Dh(this,void 0,void 0,function(){var n,r;return Lh(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=l.sent(),[2,new t(r)]}})})},t}(),Gv=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(E){try{x(r.next(E))}catch(A){h(A)}}function b(E){try{x(r.throw(E))}catch(A){h(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},qv=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(x){return function(E){return b([x,E])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(E){x=[6,E],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},tz=function(){function t(){}return t.failIfNotSupported=function(){return Gv(this,void 0,void 0,function(){return qv(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Gv(this,void 0,void 0,function(){return qv(this,function(n){return[2,ez.create(e)]})})},t}(),nz=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(E){try{x(r.next(E))}catch(A){h(A)}}function b(E){try{x(r.throw(E))}catch(A){h(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},iz=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(x){return function(E){return b([x,E])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(E){x=[6,E],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},sz=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=hc.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=hc.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return nz(this,void 0,void 0,function(){var e,n,r,l,u,h,y;return iz(this,function(b){switch(b.label){case 0:return e=function(x){for(var E=x.getVideoTracks(),A=0,N=E;A<N.length;A++){var I=N[A];I.enabled=!1,I.stop(),x.removeTrack(I)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=b.sent(),l=[],u=0,h=r;u<h.length;u++)y=h[u],y.kind==="videoinput"&&l.push({id:y.deviceId,label:y.label});return e(n),[2,l]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(u){for(var h=[],y=0,b=u;y<b.length;y++){var x=b[y];x.kind==="video"&&h.push({id:x.id,label:x.label})}e(h)},l=MediaStreamTrack;l.getSources(r)})},t}(),Tn;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Tn||(Tn={}));var rz=function(){function t(){this.state=Tn.NOT_STARTED,this.onGoingTransactionNewState=Tn.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Tn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Tn.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Tn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Tn.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Tn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Tn.UNKNOWN:throw"Transition from unknown is not allowed";case Tn.NOT_STARTED:this.failIfNewStateIs(e,[Tn.PAUSED]);break;case Tn.SCANNING:break;case Tn.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,l=n;r<l.length;r++){var u=l[r];if(e===u)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),az=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Tn.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Tn.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Tn.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Tn.PAUSED},t}(),oz=function(){function t(){}return t.create=function(){return new az(new rz)},t}(),lz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,l){r.__proto__=l}||function(r,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(r[u]=l[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),as=function(t){lz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(zs),cz=function(){function t(e,n){this.logger=n,this.fps=as.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=as.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?TC.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!fr(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),Yv=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new AC(this.verbose),this.qrcode=new XV(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=oz.create()}return t.prototype.start=function(e,n,r,l){var u=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var h;l?h=l:h=this.verbose?this.logger.log:function(){};var y=cz.create(n,this.logger);this.clearElement();var b=!1;y.videoConstraints&&(y.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var x=b,E=document.getElementById(this.elementId);E.clientWidth?E.clientWidth:as.DEFAULT_WIDTH,E.style.position="relative",this.shouldScan=!0,this.element=E;var A=this,N=this.stateManagerProxy.startTransition(Tn.SCANNING);return new Promise(function(I,M){var j=x?y.videoConstraints:A.createVideoConstraints(e);if(!j){N.cancel(),M("videoConstraints should be defined");return}var U={};(!x||y.aspectRatio)&&(U.aspectRatio=y.aspectRatio);var $={onRenderSurfaceReady:function(q,B){A.setupUi(q,B,y),A.isScanning=!0,A.foreverScan(y,r,h)}};tz.failIfNotSupported().then(function(q){q.create(j).then(function(B){return B.render(u.element,U,$).then(function(V){A.renderedCamera=V,N.execute(),I(null)}).catch(function(V){N.cancel(),M(V)})}).catch(function(B){N.cancel(),M(hc.errorGettingUserMedia(B))})}).catch(function(q){N.cancel(),M(hc.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Tn.PAUSED),this.showPausedState(),(fr(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Tn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Tn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var u=document.getElementById(as.SHADED_REGION_ELEMENT_ID);u&&e.element.removeChild(u)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),r(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),n.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(fr(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,u){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var h=new Image;h.onload=function(){var y=h.width,b=h.height,x=document.getElementById(r.elementId),E=x.clientWidth?x.clientWidth:as.DEFAULT_WIDTH,A=Math.max(x.clientHeight?x.clientHeight:b,as.FILE_SCAN_MIN_HEIGHT),N=r.computeCanvasDrawConfig(y,b,E,A);if(n){var I=r.createCanvasElement(E,A,"qr-canvas-visible");I.style.display="inline-block",x.appendChild(I);var M=I.getContext("2d");if(!M)throw"Unable to get 2d context from canvas";M.canvas.width=E,M.canvas.height=A,M.drawImage(h,0,0,y,b,N.x,N.y,N.width,N.height)}var j=as.FILE_SCAN_HIDDEN_CANVAS_PADDING,U=Math.max(h.width,N.width),$=Math.max(h.height,N.height),q=U+2*j,B=$+2*j,V=r.createCanvasElement(q,B);x.appendChild(V);var z=V.getContext("2d");if(!z)throw"Unable to get 2d context from canvas";z.canvas.width=q,z.canvas.height=B,z.drawImage(h,0,0,y,b,j,j,U,$);try{r.qrcode.decodeRobustlyAsync(V).then(function(ee){l(Pv.createFromQrcodeResult(ee))}).catch(u)}catch(ee){u("QR code parse error, error = ".concat(ee))}},h.onerror=u,h.onabort=u,h.onstalled=u,h.onsuspend=u,h.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return sz.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!TC.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[He.QR_CODE,He.AZTEC,He.CODABAR,He.CODE_39,He.CODE_93,He.CODE_128,He.DATA_MATRIX,He.MAXICODE,He.ITF,He.EAN_13,He.EAN_8,He.PDF_417,He.RSS_14,He.RSS_EXPANDED,He.UPC_A,He.UPC_E,He.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],l=0,u=e.formatsToSupport;l<u.length;l++){var h=u[l];FV(h)?r.push(h):this.logger.warn("Invalid format: ".concat(h," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(fr(e))return!0;if(!fr(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(fr(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return fr(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var l=this,u=r.qrbox;this.validateQrboxConfig(u);var h=this.toQrdimensions(e,n,u),y=function(x){if(x<as.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(as.MIN_QR_BOX_SIZE,"px.")},b=function(x){return x>e&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),x=e),x};y(h.width),y(h.height),h.width=b(h.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var l=fr(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(l);var u=this.toQrdimensions(e,n,l);u.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var h=r.isShadedBoxEnabled()&&u.height<=n,y={x:0,y:0,width:e,height:n},b=h?this.getShadedRegionBounds(e,n,u):y,x=this.createCanvasElement(b.width,b.height),E={willReadFrequently:!0},A=x.getContext("2d",E);A.canvas.width=b.width,A.canvas.height=b.height,this.element.append(x),h&&this.possiblyInsertShadingElement(this.element,e,n,u),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=A,this.canvasElement=x},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=hc.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return e(l.text,Pv.createFromQrcodeResult(l)),r.possiblyUpdateShaders(!0),!0}).catch(function(l){r.possiblyUpdateShaders(!1);var u=hc.codeParseError(l);return n(u,CC.createFrom(u)),!1})},t.prototype.foreverScan=function(e,n,r){var l=this;if(this.shouldScan&&this.renderedCamera){var u=this.renderedCamera.getSurface(),h=u.videoWidth/u.clientWidth,y=u.videoHeight/u.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*h,x=this.qrRegion.height*y,E=this.qrRegion.x*h,A=this.qrRegion.y*y;this.context.drawImage(u,E,A,b,x,0,0,this.qrRegion.width,this.qrRegion.height);var N=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(e,n,r)},l.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(I){!I&&e.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(n,r).finally(function(){N()})):N()}).catch(function(I){l.logger.logError("Error happend while scanning context",I),N()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",l={user:!0,environment:!0},u="exact",h=function(M){if(M in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(M,"'")},y=Object.keys(e);if(y.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(y.length," keys");var b=Object.keys(e)[0];if(b!==n&&b!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(b===n){var x=e.facingMode;if(typeof x=="string"){if(h(x))return{facingMode:x}}else if(typeof x=="object")if(u in x){if(h(x["".concat(u)]))return{facingMode:{exact:x["".concat(u)]}}}else throw"'facingMode' should be string or object with"+" ".concat(u," as key.");else{var E=typeof x;throw"Invalid type of 'facingMode' = ".concat(E)}}else{var A=e.deviceId;if(typeof A=="string")return{deviceId:A};if(typeof A=="object"){if(u in A)return{deviceId:{exact:A["".concat(u)]}};throw"'deviceId' should be string or object with"+" ".concat(u," as key.")}else{var N=typeof A;throw"Invalid type of 'deviceId' = ".concat(N)}}}var I=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(I)},t.prototype.computeCanvasDrawConfig=function(e,n,r,l){if(e<=r&&n<=l){var u=(r-e)/2,h=(l-n)/2;return{x:u,y:h,width:e,height:n}}else{var y=e,b=n;return e>r&&(n=r/e*n,e=r),n>l&&(e=l/n*e,n=l),this.logger.log("Image downsampled from "+"".concat(y,"X").concat(b)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,l)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?as.BORDER_SHADER_MATCH_COLOR:as.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var l=e,u=n,h=document.createElement("canvas");return h.style.width="".concat(l,"px"),h.style.height="".concat(u,"px"),h.style.display="none",h.id=fr(r)?"qr-canvas":r,h},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,l){if(!(n-l.width<1||r-l.height<1)){var u=document.createElement("div");u.style.position="absolute";var h=(n-l.width)/2,y=(r-l.height)/2;if(u.style.borderLeft="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderRight="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderTop="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderBottom="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),u.style.boxSizing="border-box",u.style.top="0px",u.style.bottom="0px",u.style.left="0px",u.style.right="0px",u.id="".concat(as.SHADED_REGION_ELEMENT_ID),n-l.width<11||r-l.height<11)this.hasBorderShaders=!1;else{var b=5,x=40;this.insertShaderBorders(u,x,b,-b,null,0,!0),this.insertShaderBorders(u,x,b,-b,null,0,!1),this.insertShaderBorders(u,x,b,null,-b,0,!0),this.insertShaderBorders(u,x,b,null,-b,0,!1),this.insertShaderBorders(u,b,x+b,-b,null,-b,!0),this.insertShaderBorders(u,b,x+b,null,-b,-b,!0),this.insertShaderBorders(u,b,x+b,-b,null,-b,!1),this.insertShaderBorders(u,b,x+b,null,-b,-b,!1),this.hasBorderShaders=!0}e.append(u)}},t.prototype.insertShaderBorders=function(e,n,r,l,u,h,y){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=as.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(n,"px"),b.style.height="".concat(r,"px"),l!==null&&(b.style.top="".concat(l,"px")),u!==null&&(b.style.bottom="".concat(u,"px")),y?b.style.left="".concat(h,"px"):b.style.right="".concat(h,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),e.appendChild(b)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Vp="data:image/svg+xml;base64,",uz=Vp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",fz=Vp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Xv=Vp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",dz="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Wv=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),hz=function(){function t(){this.data=Wv.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=Wv.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),gz=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Uv.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),l=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(l);var u=document.createElement("a");u.innerText=Uv.reportIssues(),u.href="https://github.com/mebjas/html5-qrcode/issues",u.target="new",u.style.color="white",this.infoDiv.appendChild(u),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),mz=function(){function t(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Xv,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=dz,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Xv,this.infoIcon.style.opacity="0.6")},t}(),pz=function(){function t(){var e=this;this.infoDiv=new gz,this.infoIcon=new mz(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),xz=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(E){try{x(r.next(E))}catch(A){h(A)}}function b(E){try{x(r.throw(E))}catch(A){h(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},yz=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(x){return function(E){return b([x,E])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(E){x=[6,E],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Kv=function(){function t(){}return t.hasPermissions=function(){return xz(this,void 0,void 0,function(){var e,n,r,l;return yz(this,function(u){switch(u.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=u.sent(),n=0,r=e;n<r.length;n++)if(l=r[n],l.kind==="videoinput"&&l.label)return[2,!0];return[2,!1]}})})},t}(),Pa=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var r=n[e];if(t.isCameraScanType(r))return!0}return!1},t.isCameraScanType=function(e){return e===lo.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===lo.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return zs.DEFAULT_SUPPORTED_SCAN_TYPE;var n=zs.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,l=e;r<l.length;r++){var u=l[r];if(!zs.DEFAULT_SUPPORTED_SCAN_TYPE.includes(u))throw"Unsupported scan type ".concat(u)}return e},t}(),ls=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),Yr=function(){function t(){}return t.createElement=function(e,n){var r=document.createElement(e);return r.id=n,r.classList.add(ls.ALL_ELEMENT_CLASS),e==="button"&&r.setAttribute("type","button"),r},t}(),NC=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function y(E){try{x(r.next(E))}catch(A){h(A)}}function b(E){try{x(r.throw(E))}catch(A){h(A)}}function x(E){E.done?u(E.value):l(E.value).then(y,b)}x((r=r.apply(t,e||[])).next())})},RC=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(x){return function(E){return b([x,E])}}function b(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,l=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){n.label=x[1];break}if(x[0]===6&&n.label<u[1]){n.label=u[1],u=x;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(x);break}u[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(E){x=[6,E],l=0}finally{r=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Zv=function(){function t(e,n,r){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=r}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return NC(this,void 0,void 0,function(){var e,n;return RC(this,function(r){switch(r.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=r.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?Zt.torchOffButton():Zt.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(e,n){var r=e?Zt.torchOnFailedMessage():Zt.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),bz=function(){function t(e,n){this.onTorchActionFailureCallback=n,this.torchButton=Yr.createElement("button",ls.TORCH_BUTTON_ID),this.torchController=new Zv(e,this,n)}return t.prototype.render=function(e,n){var r=this;this.torchButton.innerText=Zt.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var l=this;this.torchButton.addEventListener("click",function(u){return NC(r,void 0,void 0,function(){return RC(this,function(h){switch(h.label){case 0:return[4,l.torchController.flipState()];case 1:return h.sent(),l.torchController.isTorchEnabled()?(l.torchButton.classList.remove(ls.TORCH_BUTTON_CLASS_TORCH_OFF),l.torchButton.classList.add(ls.TORCH_BUTTON_CLASS_TORCH_ON)):(l.torchButton.classList.remove(ls.TORCH_BUTTON_CLASS_TORCH_ON),l.torchButton.classList.add(ls.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new Zv(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=Zt.torchOnButton(),this.torchController.reset()},t.create=function(e,n,r,l){var u=new t(n,l);return u.render(e,r),u},t}(),wz=function(){function t(e,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var l=document.createElement("label");l.setAttribute("for",this.getFileScanInputId()),l.style.display="inline-block",this.fileBasedScanRegion.appendChild(l),this.fileSelectionButton=Yr.createElement("button",ls.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(y){l.click()}),l.append(this.fileSelectionButton),this.fileScanInput=Yr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",l.appendChild(this.fileScanInput);var u=this;this.fileScanInput.addEventListener("change",function(y){if(!(y==null||y.target==null)){var b=y.target;if(!(b.files&&b.files.length===0)){var x=b.files,E=x[0],A=E.name;u.setImageNameToButton(A),r(E)}}});var h=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(h),this.fileBasedScanRegion.addEventListener("dragenter",function(y){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionActiveBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(y){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionDefaultBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(y){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionActiveBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(y){y.stopPropagation(),y.preventDefault(),u.fileBasedScanRegion.style.border=u.fileBasedScanRegionDefaultBorder();var b=y.dataTransfer;if(b){var x=b.files;if(!x||x.length===0)return;for(var E=!1,A=0;A<x.length;++A){var N=x.item(A);if(N){var I=/image.*/;if(N.type.match(I)){E=!0;var M=N.name;u.setImageNameToButton(M),r(N),h.innerText=Zt.dragAndDropMessage();break}}}E||(h.innerText=Zt.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=Zt.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var r=e.substring(0,8),l=e.length,u=e.substring(l-8,l);e="".concat(r,"....").concat(u)}var h=Zt.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=h},t.prototype.setInitialValueToButton=function(){var e=Zt.fileSelectionChooseImage()+" - "+Zt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,r){var l=new t(e,n,r);return l},t}(),vz=function(){function t(e){this.selectElement=Yr.createElement("select",ls.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var l=Zt.selectCamera();n.innerText="".concat(l," (").concat(this.cameras.length,")  ")}for(var u=1,h=0,y=this.cameras;h<y.length;h++){var b=y[h],x=b.id,E=b.label==null?x:b.label;(!E||E==="")&&(E=[Zt.anonymousCameraPrefix(),u++].join(" "));var A=document.createElement("option");A.value=x,A.innerText=E,this.options.push(A),this.selectElement.appendChild(A)}n.appendChild(this.selectElement),e.appendChild(n)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var n=0,r=this.options;n<r.length;n++){var l=r[n];if(l.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var r=new t(n);return r.render(e),r},t}(),Ez=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Yr.createElement("input",ls.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=Zt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var l=this;this.rangeInput.addEventListener("input",function(){return l.onValueChange()}),this.rangeInput.addEventListener("change",function(){return l.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=Zt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,n,r,l){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=l.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var r=new t;return r.render(e,n),r},t}(),os;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(os||(os={}));function Sz(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function Cz(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var Az=function(){function t(e,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Pa(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new AC(this.verbose),this.persistedDataManager=new hz,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(u,h){if(e)e(u,h);else{if(r.lastMatchFound===u)return;r.lastMatchFound=u,r.setHeaderMessage(Zt.lastMatch(u),os.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(u,h){n&&n(u,h)};var l=document.getElementById(this.elementId);if(!l)throw"HTML Element with id=".concat(this.elementId," not found");l.innerHTML="",this.createBasicLayout(l),this.html5Qrcode=new Yv(this.getScanRegionId(),Cz(this.config,this.verbose))},t.prototype.pause=function(e){(fr(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,n=function(){var r=document.getElementById(e.elementId);r&&(r.innerHTML="",e.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,l){if(!e.html5Qrcode){r();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(u){if(!e.html5Qrcode){r();return}e.html5Qrcode.clear(),n(),r()}).catch(function(u){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",u),l(u)}):(e.html5Qrcode.clear(),n(),r())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=zs.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!zs.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=zs.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=zs.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:zs.SCAN_DEFAULT_FPS,rememberLastUsedCamera:zs.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:zs.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),Pa.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var l=document.createElement("div"),u=this.getDashboardId();l.id=u,l.style.width="100%",e.appendChild(l),this.setupInitialDashboard(l)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var r=new pz;r.renderInto(n);var l=document.createElement("div");l.id=this.getHeaderMessageContainerId(),l.style.display="none",l.style.textAlign="center",l.style.fontSize="14px",l.style.padding="2px 10px",l.style.margin="4px",l.style.borderTop="1px solid #f6f6f6",n.appendChild(l)},t.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},t.prototype.createCameraListUi=function(e,n,r){var l=this;l.showHideScanTypeSwapLink(!1),l.setHeaderMessage(Zt.cameraPermissionRequesting());var u=function(){r||l.createPermissionButton(e,n)};Yv.getCameras().then(function(h){l.persistedDataManager.setHasPermission(!0),l.showHideScanTypeSwapLink(!0),l.resetHeaderMessage(),h&&h.length>0?(e.removeChild(n),l.renderCameraSelection(h)):(l.setHeaderMessage(Zt.noCameraFound(),os.STATUS_WARNING),u())}).catch(function(h){l.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:u(),l.setHeaderMessage(h,os.STATUS_WARNING),l.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,n){var r=this,l=Yr.createElement("button",this.getCameraPermissionButtonId());l.innerText=Zt.cameraPermissionTitle(),l.addEventListener("click",function(){l.disabled=!0,r.createCameraListUi(e,n,l)}),n.appendChild(l)},t.prototype.createPermissionsUi=function(e,n){var r=this;if(Pa.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Kv.hasPermissions().then(function(l){l?r.createCameraListUi(e,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n))}).catch(function(l){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Pa.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var l=document.createElement("div");l.style.textAlign="center",r.appendChild(l),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,l),this.renderFileScanUi(n)},t.prototype.renderFileScanUi=function(e){var n=Pa.isFileScanType(this.currentScanType),r=this,l=function(u){if(!r.html5Qrcode)throw"html5Qrcode not defined";Pa.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(Zt.loadingImage()),r.html5Qrcode.scanFileV2(u,!0).then(function(h){r.resetHeaderMessage(),r.qrCodeSuccessCallback(h.decodedText,h)}).catch(function(h){r.setHeaderMessage(h,os.STATUS_WARNING),r.qrCodeErrorCallback(h,CC.createFrom(h))}))};this.fileSelectionUi=wz.create(e,n,l)},t.prototype.renderCameraSelection=function(e){var n=this,r=this,l=document.getElementById(this.getDashboardSectionCameraScanRegionId());l.style.textAlign="center";var u=Ez.create(l,!1),h=function(j){var U=j.zoomFeature();if(U.isSupported()){u.setOnCameraZoomValueChangeCallback(function(q){U.apply(q)});var $=1;n.config.defaultZoomValueIfSupported&&($=n.config.defaultZoomValueIfSupported),$=VV($,U.min(),U.max()),u.setValues(U.min(),U.max(),$,U.step()),u.show()}},y=vz.create(l,e),b=document.createElement("span"),x=Yr.createElement("button",ls.CAMERA_START_BUTTON_ID);x.innerText=Zt.scanButtonStartScanningText(),b.appendChild(x);var E=Yr.createElement("button",ls.CAMERA_STOP_BUTTON_ID);E.innerText=Zt.scanButtonStopScanningText(),E.style.display="none",E.disabled=!0,b.appendChild(E);var A,N=function(j){if(!j.torchFeature().isSupported()){A&&A.hide();return}A?A.updateTorchCapability(j.torchFeature()):A=bz.create(b,j.torchFeature(),{display:"none",marginLeft:"5px"},function(U){r.setHeaderMessage(U,os.STATUS_WARNING)}),A.show()};l.appendChild(b);var I=function(j){j||(x.style.display="none"),x.innerText=Zt.scanButtonStartScanningText(),x.style.opacity="1",x.disabled=!1,j&&(x.style.display="inline-block")};if(x.addEventListener("click",function(j){x.innerText=Zt.scanButtonScanningStarting(),y.disable(),x.disabled=!0,x.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var U=y.getValue();r.persistedDataManager.setLastUsedCameraId(U),r.html5Qrcode.start(U,Sz(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function($){E.disabled=!1,E.style.display="inline-block",I(!1);var q=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&N(q),n.config.showZoomSliderIfSupported===!0&&h(q)}).catch(function($){r.showHideScanTypeSwapLink(!0),y.enable(),I(!0),r.setHeaderMessage($,os.STATUS_WARNING)})}),y.hasSingleItem()&&x.click(),E.addEventListener("click",function(j){if(!r.html5Qrcode)throw"html5Qrcode not defined";E.disabled=!0,r.html5Qrcode.stop().then(function(U){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),y.enable(),x.disabled=!1,E.style.display="none",x.style.display="inline-block",A&&(A.reset(),A.hide()),u.removeOnCameraZoomValueChangeCallback(),u.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(U){E.disabled=!1,r.setHeaderMessage(U,os.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var M=r.persistedDataManager.getLastUsedCameraId();y.hasValue(M)?(y.setValue(M),x.click()):r.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,n=Zt.textIfCameraScanSelected(),r=Zt.textIfFileScanSelected(),l=document.getElementById(this.getDashboardSectionId()),u=document.createElement("div");u.style.textAlign="center";var h=Yr.createElement("span",this.getDashboardSectionSwapLinkId());h.style.textDecoration="underline",h.style.cursor="pointer",h.innerText=Pa.isCameraScanType(this.currentScanType)?n:r,h.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Pa.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),h.innerText=r,e.currentScanType=lo.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),h.innerText=n,e.currentScanType=lo.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),u.appendChild(h),l.appendChild(u)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Kv.hasPermissions().then(function(r){if(r){var l=document.getElementById(n.getCameraPermissionButtonId());if(!l)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";l.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,n){n||(n=os.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=e,r.style.display="block",n){case os.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case os.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case os.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=uz,this.cameraScanImage.alt=Zt.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=fz,this.fileScanImage.alt=Zt.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return ls.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return ls.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();function Qv({onScan:t,onClose:e}){const{t:n}=zn(),r=R.useRef(`qr-reader-${Math.random().toString(36).substr(2,9)}`),l=R.useRef(null),[u,h]=R.useState(!1);R.useEffect(()=>{h(!1);const b={fps:10,qrbox:250,rememberLastUsedCamera:!0},x=new Az(r.current,b,!1);l.current=x;const E=N=>{u||(h(!0),x.clear().catch(()=>{}).finally(()=>{t(N)}))},A=N=>{`${N}`.includes("No MultiFormat Readers")||console.error("QR scan error:",N)};return x.render(E,A),()=>{var N;(N=l.current)==null||N.clear().catch(()=>{})}},[t,u]);const y=()=>{var b;h(!1),(b=l.current)==null||b.clear().catch(()=>{}).then(()=>{l.current&&l.current.render(x=>{u||(h(!0),l.current.clear().catch(()=>{}).finally(()=>t(x)))},x=>{`${x}`.includes("No MultiFormat Readers")||console.error("QR scan error:",x)})})};return C.jsx(qi.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",damping:20},className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:C.jsxs(qi.div,{initial:{y:-20},animate:{y:0},exit:{y:20},className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-sm",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsx("h3",{className:"text-lg font-bold",children:n("scanStudentQr")}),C.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-800",children:""})]}),C.jsx("div",{id:r.current,style:{width:"100%",height:"300px"},className:"mb-4 bg-gray-50"}),C.jsxs("div",{className:"flex justify-between gap-2",children:[u&&C.jsx("button",{onClick:y,className:"flex-1 px-4 py-2 bg-blue-100 hover:bg-blue-200 rounded-lg",children:n("scanAnother")}),C.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg",children:n("cancel")})]})]})})}const Jv=["bg-pink-300","bg-orange-300","bg-yellow-300","bg-lime-300","bg-emerald-300","bg-cyan-300","bg-purple-300","bg-rose-300"],Og="#f6f6f6",js="#6654b3",ac=()=>new Date().toISOString().slice(0,10);let Yu=null,Xu=null;try{Yu=new Audio("ding.wav"),Xu=new Audio("wrongbeep.wav")}catch{}const Ig=()=>{try{Yu&&(Yu.pause(),Yu.currentTime=0,Yu.play())}catch{}},oh=()=>{try{Xu&&(Xu.pause(),Xu.currentTime=0,Xu.play())}catch{}};function Tz(t,e){if(!t||!e)return!1;let n=t.purchased_packages;if(typeof n=="string")try{n=JSON.parse(n)}catch{n=null}return Array.isArray(n)?n.some(r=>r&&r.course_id===e):!1}function _z(t,e){return!t||!e?!1:!!(t.courses&&typeof t.courses=="object"&&t.courses[e]||t.course_limits&&t.course_limits[e]>0||Tz(t,e))}function Nz(){const{t,i18n:e}=zn(),n=_s(),[r,l]=R.useState(null),[u,h]=R.useState(!1),[y,b]=R.useState(!1),[x,E]=R.useState(null),[A,N]=R.useState(null);R.useEffect(()=>{if(!x)return;const Z=setTimeout(()=>E(null),4e3);return()=>clearTimeout(Z)},[x]);const[I,M]=R.useState(!0),[j,U]=R.useState(!0),[$,q]=R.useState(""),[B,V]=R.useState([]),[z,ee]=R.useState([]),[X,ae]=R.useState([]);R.useEffect(()=>{(async()=>{const{data:Z}=await Pe.from("courses").select("id,name").order("name");V(Z||[]),M(!1);const[ce,oe]=await Promise.all([Pe.from("students").select("id,first_name,last_name,courses,course_limits,qr_code_url,purchased_packages"),Pe.from("attendance").select("*").gte("attended_at_ts",ac())]);ee(ce.data||[]),ae(oe.data||[]),U(!1)})()},[]);const Y=X.filter(Z=>Z.approved_by),be=R.useMemo(()=>{const Z={};return Y.forEach(ce=>{var oe;ce.course_id&&(Z[oe=ce.student_id]??(Z[oe]={}),Z[ce.student_id][ce.course_id]=(Z[ce.student_id][ce.course_id]||0)+1)}),Z},[Y]),Te=R.useMemo(()=>{const Z={};return Y.forEach(ce=>{var oe;ce.course_id&&ce.attended_at_ts.slice(0,10)===ac()&&(Z[oe=ce.course_id]??(Z[oe]=new Set),Z[ce.course_id].add(ce.student_id))}),Z},[Y]),ve=X.filter(Z=>!Z.approved_by),le=(Z,ce)=>{var oe;return((oe=be[Z])==null?void 0:oe[ce])||0},ke=(Z,ce)=>Z.course_limits&&Z.course_limits[ce]||0,ie=(Z,ce)=>{var oe;return(oe=Te[ce])==null?void 0:oe.has(Z)};async function se(Z){await Pe.from("attendance").delete().eq("id",Z.id),ae(ce=>ce.filter(oe=>oe.id!==Z.id))}async function fe(Z,ce){const oe=`${Z.id}|${ce}`;if($===oe)return;q(oe);const{data:{user:Oe}}=await Pe.auth.getUser(),qe=Oe==null?void 0:Oe.id;try{if(ie(Z.id,ce)){const we=X.find(ht=>ht.student_id===Z.id&&ht.course_id===ce&&ht.attended_at_ts.slice(0,10)===ac());we&&(await Pe.from("attendance").delete().eq("id",we.id),ae(ht=>ht.filter(Ge=>Ge.id!==we.id))),E({message:t("uncheckedStudent",{first:Z.first_name,last:Z.last_name}),type:"error"})}else{if(ke(Z,ce)&&le(Z.id,ce)>=ke(Z,ce)){E({message:t("overLimit",{first:Z.first_name,last:Z.last_name}),type:"error"}),oh();return}const{data:we,error:ht}=await Pe.from("attendance").insert({student_id:Z.id,course_id:ce,attended_at_ts:ac(),approved_by:qe}).select();if(ht)throw ht;ae(Ge=>[...Ge,we[0]]),E({message:t("checkedInStudent",{first:Z.first_name,last:Z.last_name}),type:"success"}),Ig()}}finally{q(""),b(!1)}}async function Ie(Z){const ce=Z.trim(),oe=z.find(we=>we.id===ce);if(b(!1),!oe){oh(),E({message:t("unknownCode"),type:"error"});return}if(X.some(we=>we.student_id===ce&&we.attended_at_ts.slice(0,10)===ac())){oh(),E({message:t("alreadyScanned",{first:oe.first_name,last:oe.last_name}),type:"error"});return}const{data:Oe,error:qe}=await Pe.from("attendance").insert({student_id:ce,course_id:null,attended_at_ts:ac()}).select();qe?(oh(),E({message:t("scanFailed"),type:"error"})):(ae(we=>[...we,Oe[0]]),Ig(),E({message:t("pendingStudent",{first:oe.first_name,last:oe.last_name}),type:"success"}))}async function Ue(Z,ce){if(!ce.length)return;const{data:{user:oe}}=await Pe.auth.getUser(),Oe=oe==null?void 0:oe.id,qe=z.find(we=>we.id===Z.student_id);if(await Pe.from("attendance").update({course_id:ce[0],approved_by:Oe}).eq("id",Z.id),ce.length>1){const we=ce.slice(1).map(ht=>({student_id:Z.student_id,course_id:ht,attended_at_ts:Z.attended_at_ts,approved_by:Oe}));await Pe.from("attendance").insert(we)}ae(we=>{const ht=we.filter(bn=>bn.id!==Z.id),Ge={...Z,course_id:ce[0],approved_by:Oe},It=[...ht,Ge];return ce.length>1&&ce.slice(1).forEach(bn=>It.push({...Z,id:crypto.randomUUID(),course_id:bn,approved_by:Oe})),It}),Ig(),E({message:t("checkedInStudent",{first:qe.first_name,last:qe.last_name}),type:"success"})}const W=C.jsx(Bu,{children:x&&C.jsxs(qi.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",stiffness:300},className:`fixed bottom-4 left-1/2 transform -translate-x-1/2 
                      max-w-md w-full px-4 py-3 rounded-xl shadow-lg flex 
                      justify-between items-center z-50 ${x.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[C.jsx("span",{children:x.message}),C.jsx("button",{onClick:()=>E(null),className:"text-xl font-bold leading-none",children:""})]},"banner")});return u?j?C.jsx("div",{className:"p-6 text-center",children:t("loadingPending")}):C.jsxs(C.Fragment,{children:[W,C.jsxs("main",{style:{background:Og},className:"min-h-screen p-6",children:[C.jsxs("header",{className:"flex items-center gap-4 mb-4",children:[C.jsx("button",{onClick:()=>h(!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 shadow",children:C.jsx(rm,{className:"w-6 h-6 text-gray-700"})}),C.jsx("h2",{className:"text-2xl font-bold",style:{color:js},children:t("pendingCheckins")})]}),ve.length===0?C.jsx("p",{className:"text-gray-500",children:t("noPendingCheckins")}):ve.map(Z=>{const ce=z.find(oe=>oe.id===Z.student_id);return ce?C.jsx(Rz,{row:Z,student:ce,courses:B,onApprove:Ue,onDelete:se},Z.id):null})]})]}):C.jsxs("div",{style:{background:Og},className:"min-h-screen",children:[W,C.jsx(Bu,{mode:"wait",children:r==null?C.jsxs("main",{className:"min-h-screen p-6 flex flex-col items-center gap-8",style:{background:Og},children:[C.jsxs("div",{className:"w-full max-w-5xl flex justify-between items-center mb-6",children:[C.jsx("h1",{className:"text-3xl font-extrabold",style:{color:js},children:t("takeAttendance")}),C.jsxs("div",{className:"flex gap-3",children:[C.jsxs("button",{onClick:()=>h(!0),className:"relative p-2 bg-yellow-400 text-white rounded-full shadow",children:[C.jsx(C9,{className:"w-5 h-5"}),ve.length>0&&C.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-[10px] px-1 rounded-full",children:ve.length})]}),C.jsx(qi.button,{whileTap:{scale:.92},onClick:()=>b(!0),className:"p-2",style:{background:js,color:"#fff",borderRadius:"9999px",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.12)"},children:C.jsx(tw,{className:"w-6 h-6"})})]})]}),C.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-7 w-full max-w-4xl",children:I?Array(6).fill(0).map((Z,ce)=>C.jsx(qi.div,{initial:{opacity:.3},animate:{opacity:1},className:"w-32 h-32 bg-gray-200 rounded-2xl"},ce)):B.map((Z,ce)=>C.jsx(qi.button,{whileHover:{scale:1.06},whileTap:{scale:.95},onClick:()=>l(Z),className:`${Jv[ce%Jv.length]} w-32 h-32 md:w-40 md:h-40 rounded-2xl shadow-lg
                                 flex items-center justify-center text-white font-bold text-lg transition-all duration-150`,style:{boxShadow:"0 3px 16px 0 rgba(102,84,179,0.06)"},children:Z.name},Z.id))}),C.jsx(Bu,{children:y&&C.jsx(Qv,{onScan:Ie,onClose:()=>b(!1)},"scanner-grid")})]}):j?C.jsx("div",{className:"p-6 text-center",children:t("loadingStudents")}):C.jsxs(qi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-6 space-y-6",children:[C.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[C.jsx("button",{onClick:()=>l(null),className:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 shadow",children:C.jsx(rm,{className:"w-6 h-6 text-gray-700"})}),C.jsx("h2",{className:"text-2xl font-bold",style:{color:js},children:r.name}),C.jsx(qi.button,{whileTap:{scale:.92},onClick:()=>b(!0),className:"ml-auto p-2",style:{background:js,color:"#fff",borderRadius:"9999px",boxShadow:"0 2px 8px 0 rgba(102,84,179,0.12)"},children:C.jsx(tw,{className:"w-6 h-6"})})]}),C.jsxs("table",{className:"min-w-full bg-white rounded-xl shadow",style:{boxShadow:"0 2px 12px 0 rgba(102,84,179,0.05)"},children:[C.jsx("thead",{style:{background:"#ede9fe"},children:C.jsxs("tr",{children:[C.jsx("th",{className:"px-3 py-2 text-left font-semibold",style:{color:js},children:t("student")}),C.jsx("th",{className:"px-3 py-2 font-semibold",style:{color:js},children:t("slots")}),C.jsx("th",{className:"px-3 py-2 font-semibold",style:{color:js},children:t("usedLimit")}),C.jsx("th",{className:"px-3 py-2 font-semibold",style:{color:js},children:t("check")}),C.jsx("th",{className:"px-3 py-2 font-semibold",style:{color:js},children:"QR"})]})}),C.jsx("tbody",{children:z.filter(Z=>_z(Z,r.id)).map(Z=>{const ce=le(Z.id,r.id),oe=ke(Z,r.id),Oe=ie(Z.id,r.id),qe=$===`${Z.id}|${r.id}`;return C.jsxs(qi.tr,{whileHover:{backgroundColor:"#f3f4f6"},className:"border-t transition",children:[C.jsxs("td",{onClick:()=>n(`/myschool/student/${Z.id}`),className:"px-3 py-1 text-blue-700 font-semibold hover:underline cursor-pointer",children:[Z.first_name," ",Z.last_name]}),C.jsx("td",{className:"px-3 py-1 text-gray-700",children:Z.courses&&Z.courses[r.id]?Object.entries(Z.courses[r.id]).flatMap(([we,ht])=>ht.map(Ge=>`${we} ${Ge}`)).join(", "):""}),C.jsxs("td",{className:"px-3 py-1 text-center",children:[ce,"/",oe||t("unlimited")]}),C.jsx("td",{className:"px-3 py-1 text-center",children:C.jsx(qi.button,{whileTap:{scale:.82},disabled:qe,onClick:()=>fe(Z,r.id),className:`w-9 h-9 rounded-full transition font-bold ${Oe?"bg-green-500 text-white":oe&&ce>=oe?"bg-gray-200 text-gray-400":"bg-gray-300 text-gray-700 hover:bg-gray-400"}`,children:""})}),C.jsx("td",{className:"px-3 py-1 text-center",children:C.jsx("button",{onClick:()=>N(Z.qr_code_url),disabled:!Z.qr_code_url,className:"px-3 py-1 bg-purple-100 hover:bg-purple-200 rounded-full text-xs text-[#6654b3] font-bold disabled:opacity-50",children:"QR"})})]},Z.id)})})]}),C.jsx(Bu,{children:y&&C.jsx(Qv,{onScan:Z=>{const ce=Z.trim(),oe=z.find(Oe=>Oe.id===ce);oe&&fe(oe,r.id)},onClose:()=>b(!1)},"scanner-detail")})]},"detail")}),C.jsx(Bu,{children:A&&C.jsx(qi.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20},className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:C.jsxs(qi.div,{initial:{y:-20},animate:{y:0},exit:{y:20},className:"bg-white p-6 rounded-xl shadow-lg text-center",children:[C.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:js},children:t("studentQrCode")}),C.jsx("img",{src:A,alt:"QR",className:"mx-auto max-w-xs mb-4"}),C.jsxs("div",{className:"flex justify-center gap-4",children:[C.jsx("a",{href:A,download:!0,className:"px-4 py-2 bg-blue-100 hover:bg-blue-200 rounded-lg",children:t("download")}),C.jsx("button",{onClick:()=>{const Z=window.open("");Z&&(Z.document.write(`<img src="${A}" onload="window.print();window.close()" />`),Z.document.close())},className:"px-4 py-2 bg-green-100 hover:bg-green-200 rounded-lg",children:t("print")}),C.jsx("button",{onClick:()=>N(null),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg",children:t("close")})]})]})},"qrModal")})]})}function Rz({row:t,student:e,courses:n,onApprove:r,onDelete:l}){const{t:u}=zn(),[h,y]=R.useState([]),b=Object.keys(e.courses||{});return C.jsxs(qi.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},exit:{opacity:0,y:16},className:"border border-gray-100 bg-white p-4 mb-4 rounded-2xl shadow",style:{boxShadow:"0 2px 10px 0 rgba(102,84,179,0.04)"},children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsxs("h3",{className:"font-semibold text-[#6654b3]",children:[e.first_name," ",e.last_name]}),C.jsx("button",{onClick:()=>l(t),className:"text-gray-400 hover:text-red-500 text-lg px-2 font-bold",children:""})]}),C.jsx("div",{className:"flex flex-wrap gap-3 mb-3",children:b.map(x=>{var E;return C.jsxs("label",{className:"inline-flex items-center gap-2 px-2 py-1 rounded-lg bg-[#ede9fe] text-[#6654b3] font-semibold cursor-pointer",children:[C.jsx("input",{type:"checkbox",checked:h.includes(x),onChange:A=>y(N=>A.target.checked?[...N,x]:N.filter(I=>I!==x)),className:"accent-[#6654b3]"}),(E=n.find(A=>A.id===x))==null?void 0:E.name]},x)})}),C.jsx("button",{disabled:!h.length,onClick:()=>r(t,h),className:"px-5 py-2 bg-green-600 hover:bg-green-700 text-white rounded-full font-bold disabled:opacity-50 transition",children:u("approve")})]})}function Oz(){const{t}=zn();return C.jsx("div",{className:"text-2xl font-bold",children:t("billingComingSoon")},Qn.language)}function Iz(){return C.jsx("div",{className:"text-2xl font-bold",children:"Reports Page (coming soon)"})}function Mz(){const{t}=zn();return C.jsx("div",{className:"text-2xl font-bold",children:t("Messaging Page (coming soon)")},Qn.language)}const Dz="#f6f6f6";function Lz(){const{t}=zn(),{user:e}=Fh(),n=(e==null?void 0:e.role)==="admin",[r,l]=R.useState([]),[u,h]=R.useState(!1),[y,b]=R.useState(null),[x,E]=R.useState(!1),[A,N]=R.useState(""),[I,M]=R.useState(""),[j,U]=R.useState(""),[$,q]=R.useState("staff"),[B,V]=R.useState(!1),[z,ee]=R.useState(null),[X,ae]=R.useState(!1);R.useEffect(()=>{Y()},[]);async function Y(){h(!0),b(null);const{data:le,error:ke}=await Pe.from("profiles").select("*").order("role",{ascending:!1});if(ke)b(ke.message);else{const ie=le;l(n?ie:ie.filter(se=>se.id===(e==null?void 0:e.id)))}h(!1)}async function be(le){var Ie;le.preventDefault(),V(!0),b(null);const{data:ke,error:ie}=await Pe.auth.admin.createUser({email:A.trim().toLowerCase(),password:j,email_confirm:!0});if(ie){b(ie.message),V(!1);return}const se=(Ie=ke.user)==null?void 0:Ie.id;if(!se){b(t("noUserIdError")),V(!1);return}const{error:fe}=await Pe.from("profiles").insert([{id:se,email:A.trim().toLowerCase(),full_name:I.trim()||null,role:$}]);fe?b(fe.message):(N(""),M(""),U(""),q("staff"),Y()),V(!1)}async function Te(){if(!z)return;ae(!0);const{error:le}=await Pe.from("profiles").update({full_name:z.full_name,role:z.role}).eq("id",z.id);le?alert(le.message):(ee(null),Y()),ae(!1)}async function ve(le){le.role!=="admin"&&window.confirm(t("confirmRemoveStaff"))&&(await Pe.from("profiles").delete().eq("id",le.id),Y())}return C.jsxs("div",{className:"py-8 px-2 min-h-screen",style:{background:Dz},children:[C.jsxs("div",{className:"max-w-5xl mx-auto flex justify-between items-center mb-8",children:[C.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-[#6654b3]",children:t("settingsTitle")}),n&&C.jsx("button",{onClick:()=>E(le=>!le),className:"flex items-center gap-2 bg-[#6654b3] hover:bg-[#5542a0] text-white px-5 py-2 rounded-full transition font-semibold shadow",children:x?C.jsxs(C.Fragment,{children:[C.jsx(fE,{className:"w-5 h-5"}),t("closeInvite")]}):C.jsxs(C.Fragment,{children:[C.jsx(B9,{className:"w-5 h-5"}),t("inviteUser")]})})]}),x&&n&&C.jsxs("div",{className:"bg-white shadow rounded-2xl p-6 max-w-xl mx-auto mb-8 border border-purple-100",children:[y&&C.jsx("p",{className:"text-red-600 mb-3",children:y}),C.jsxs("form",{onSubmit:be,className:"grid gap-4 sm:grid-cols-2",children:[C.jsx("input",{type:"email",required:!0,placeholder:t("email"),value:A,onChange:le=>N(le.target.value),className:"border rounded px-3 py-2",autoFocus:!0}),C.jsx("input",{type:"text",required:!0,placeholder:t("fullName"),value:I,onChange:le=>M(le.target.value),className:"border rounded px-3 py-2"}),C.jsx("input",{type:"password",required:!0,placeholder:t("tempPassword"),value:j,onChange:le=>U(le.target.value),className:"border rounded px-3 py-2"}),C.jsxs("select",{value:$,onChange:le=>q(le.target.value),className:"border rounded px-3 py-2",children:[C.jsx("option",{value:"staff",children:t("roleStaff")}),C.jsx("option",{value:"admin",children:t("roleAdmin")})]}),C.jsx("div",{className:"sm:col-span-2 flex justify-end mt-2",children:C.jsx("button",{disabled:B,className:"bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-full font-bold transition disabled:opacity-60",children:t(B?"inviting":"sendInvite")})})]})]}),C.jsxs("div",{className:"max-w-5xl mx-auto",children:[C.jsx("h2",{className:"text-2xl font-bold text-[#6654b3] mb-5",children:t("teamMembers")}),u?C.jsx("p",{children:t("loading")}):r.length===0?C.jsx("p",{className:"text-gray-500",children:t("noUsers")}):C.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:r.map(le=>C.jsxs("div",{className:"bg-white rounded-2xl border border-purple-100 shadow p-6 flex flex-col justify-between",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-lg font-bold text-[#6654b3]",children:le.full_name??""}),C.jsx("p",{className:"text-sm text-gray-500 mt-1",children:le.email}),C.jsx("span",{className:"inline-block mt-2 text-xs font-medium bg-[#f6f6f6] px-3 py-1 rounded-full text-[#6654b3] border border-purple-100",children:t("role_"+le.role)})]}),C.jsxs("div",{className:"mt-6 flex gap-2",children:[C.jsxs("button",{onClick:()=>n&&ee(le),disabled:!n,className:`flex-1 flex items-center justify-center gap-1 border rounded-full py-2 transition font-semibold
                      ${n?"border-purple-200 hover:bg-[#f6f6f6]":"opacity-50 cursor-not-allowed"}`,children:[C.jsx(k9,{className:"w-5 h-5"}),t("edit")]}),n&&le.role==="staff"&&C.jsxs("button",{onClick:()=>ve(le),className:"flex-1 flex items-center justify-center gap-1 border border-red-200 text-red-600 rounded-full py-2 hover:bg-red-50 font-semibold",children:[C.jsx(F9,{className:"w-5 h-5"}),t("delete")]})]})]},le.id))})]}),z&&C.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:C.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md space-y-4 border border-purple-100",children:[C.jsx("h2",{className:"text-xl font-bold text-[#6654b3]",children:t("editUser")}),C.jsxs("label",{className:"block text-sm font-semibold text-[#6654b3]",children:[t("fullName"),C.jsx("input",{value:z.full_name??"",onChange:le=>ee({...z,full_name:le.target.value}),className:"w-full border rounded px-3 py-2 mt-1"})]}),C.jsxs("label",{className:"block text-sm font-semibold text-[#6654b3]",children:[t("emailReadOnly"),C.jsx("input",{value:z.email??"",disabled:!0,className:"w-full border rounded px-3 py-2 mt-1 bg-gray-100"})]}),(e==null?void 0:e.id)!==z.id&&C.jsxs("label",{className:"block text-sm font-semibold text-[#6654b3]",children:[t("role"),C.jsxs("select",{value:z.role,onChange:le=>ee({...z,role:le.target.value}),className:"w-full border rounded px-3 py-2 mt-1",children:[C.jsx("option",{value:"staff",children:t("roleStaff")}),C.jsx("option",{value:"admin",children:t("roleAdmin")})]})]}),C.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[C.jsx("button",{onClick:()=>ee(null),className:"px-4 py-2 rounded-full border border-purple-200 hover:bg-[#f6f6f6] text-[#6654b3] font-semibold",children:t("cancel")}),C.jsx("button",{onClick:Te,disabled:X,className:"bg-[#6654b3] text-white px-4 py-2 rounded-full font-semibold disabled:opacity-50",children:t(X?"saving":"save")})]})]})})]})}const kz=new VI;function jz(){return C.jsx(qI,{client:kz,children:C.jsx(mI,{children:C.jsxs(GO,{children:[C.jsx(Fn,{path:"/login",element:C.jsx(a9,{})}),C.jsxs(Fn,{element:C.jsx(K9,{children:C.jsx(W9,{})}),children:[C.jsx(Fn,{path:"/dashboard",element:C.jsx(cV,{})}),C.jsx(Fn,{path:"/myschool/students",element:C.jsx(SV,{})}),C.jsx(Fn,{path:"/myschool/student/:id",element:C.jsx(MV,{})}),C.jsx(Fn,{path:"/admissions",element:C.jsx(kv,{})}),C.jsx(Fn,{path:"/apply/:token",element:C.jsx(kv,{publicMode:!0})}),C.jsx(Fn,{path:"/attendance",element:C.jsx(Nz,{})}),C.jsx(Fn,{path:"/billing",element:C.jsx(Oz,{})}),C.jsx(Fn,{path:"/reports",element:C.jsx(Iz,{})}),C.jsx(Fn,{path:"/messaging",element:C.jsx(Mz,{})}),C.jsx(Fn,{path:"/settings",element:C.jsx(Lz,{})}),C.jsx(Fn,{path:"/review",element:C.jsx(yw,{})}),C.jsx(Fn,{path:"/myschool/courses",element:C.jsx(pV,{})}),C.jsx(Fn,{path:"/myschool/students/inactive",element:C.jsx(jV,{})}),C.jsx(Fn,{path:"/notifications",element:C.jsx(fV,{})}),C.jsx(Fn,{path:"/review-hub",element:C.jsx(yw,{})}),C.jsx(Fn,{index:!0,element:C.jsx(mb,{to:"/dashboard",replace:!0})})]}),C.jsx(Fn,{path:"*",element:C.jsx(mb,{to:"/login",replace:!0})})]})})})}K7.createRoot(document.getElementById("root")).render(C.jsx(R.StrictMode,{children:C.jsx(Y9,{children:C.jsx(jz,{})})}));
